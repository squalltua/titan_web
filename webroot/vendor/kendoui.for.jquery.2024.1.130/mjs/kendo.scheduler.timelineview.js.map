{"version":3,"file":"kendo.scheduler.timelineview.js","names":["__meta__","id","name","category","description","depends","hidden","$","undefined$1","kendo","window","ui","setTime","date","SchedulerView","outerWidth","_outerWidth","outerHeight","_outerHeight","extend","encode","htmlEncode","getDate","getMilliseconds","MS_PER_DAY","MS_PER_MINUTE","CURRENT_TIME_MARKER_CLASS","CURRENT_TIME_MARKER_ARROW_CLASS","SCHEDULER_HEADER_WRAP_CLASS","INVERSE_COLOR_CLASS","BORDER_SIZE_COEFF","DOT","NS","EVENT_TEMPLATE","template","title","start","end","format","DATA_HEADER_TEMPLATE","EVENT_WRAPPER_TEMPLATE","task","ariaLabel","ns","uid","resources","attr","color","tail","icon","isException","isRecurring","showDelete","messages","destroy","head","resizable","toInvariantTime","staticDate","Date","setColspan","columnLevel","count","columns","i","length","colspan","TimelineGroupedView","Class","init","view","this","_view","_getTimeSlotByPosition","x","y","groupIndex","groups","timeSlotByPosition","_hideHeaders","timesHeader","find","last","hide","datesHeader","_setColspan","timeColumn","_createRowsLayout","rows","groupHeaderTemplate","_createVerticalColumnsLayout","_createColumnsLayout","_getRowCount","_groupCount","_getGroupsCount","_addContent","dates","columnCount","groupsCount","rowCount","slotTemplate","isVerticalGrouped","html","options","appendRow","tmplDate","content","classes","isToday","idx","workDayStart","workDayEnd","_isWorkDay","rowIdx","groupIdx","_resourceBySlot","_forTimeRange","_addTimeSlotsCollections","groupCount","datesCount","tableRows","interval","isVerticallyGrouped","Math","floor","time","rowMultiplier","group","cellMultiplier","cells","children","cellsPerGroup","cellsPerDay","dateIndex","cellOffset","startTime","cellIndex","_addTimeSlotToCollection","_getVerticalGroupCount","_getVerticalRowCount","eventGroups","maxRowCount","_isVerticallyGrouped","_renderEvent","eventGroup","event","adjustedEvent","range","container","element","_createEventElement","occurrence","appendTo","css","top","height","eventHeight","eventObject","_startTime","_endTime","slotRange","rowIndex","offsetTop","events","_inverseEventColor","addContinuousEvent","isAllDay","_arrangeRows","_verticalCountForLevel","level","_rowCountForLevel","_horizontalCountForLevel","_columnCountForLevel","_updateCurrentVerticalTimeMarker","ranges","currentTime","elementHtml","headerWrap","left","round","innerRect","getTime","timesTableMarker","prependTo","addClass","_adjustLeftPosition","prev","position","width","scrollHeight","_changeGroup","_prevGroupSlot","slot","isDay","_collection","_nextGroupSlot","first","_verticalSlots","selection","reverse","_verticalMethod","_normalizeVerticalSelection","_horizontalSlots","method","startSlot","endSlot","multiple","result","_isHorizontallyGrouped","_changeVerticalViewPeriod","_changeHorizontalViewPeriod","slots","shift","_changeViewPeriod","_updateDirection","_createMoveHint","hint","rect","snap","right","offsetHeight","inverseColor","_appendMoveHint","_isRtl","scrollWidth","clientWidth","TimelineGroupedByDateView","times","eq","_createDateLayout","subColumns","isMajorTickColumn","isMiddleColumn","isLastSlotColumn","minorTickColumns","workDateIndex","tempStart","minorTickCount","msInterval","majorTick","_dates","startIndex","endIndex","eventObjects","index","currentSlot","_timeSlotCollections","_slots","dateRange","timeSlotRanges","push","firstTimesCell","lastTimesCell","markerTopPosition","timesTableMarkerCss","previous","_changeDate","collections","_getCollections","tempSlot","startEnd","slotIdx","collection","offsetLeft","offsetWidth","scheduler","TimelineView","that","zeroWidthEvent","document","body","fn","call","_zeroWidthEventOffset","remove","_groupedView","_getGroupedView","_workDays","workDays","dayIndex","workWeekStart","workWeekEnd","abs","getWorkDays","_templates","_editable","calculateDateRange","_groups","_currentTime","_isVirtualized","_isGroupedByDate","_getNextEventIndexBySlot","sortedEvents","tempIndex","startDate","_getSelectedSlot","pad","_getSortedEvents","uniqueAllEvents","sort","second","isDaySlot","_currentTimeMarkerUpdater","_updateCurrentTimeMarker","_scrollTo","elementOffset","elementOffsetDir","containerScroll","scrollLeft","containerOffsetDir","rightDistance","_isInDateSlot","currentTimeMarker","useLocalTimezone","timezone","dataSource","schema","timezoneOffset","offset","convert","getTimezoneOffset","orientation","currentGroup","utcCurrentTime","toUtcTime","slotByStartDate","setUpdateTimer","markerOptions","updateInterval","_currentTimeUpdateTimer","setInterval","bind","editable","_isMobile","_touchEditable","_mouseEditable","on","e","trigger","closest","preventDefault","create","_slotByPosition","pageX","pageY","resourceInfo","eventInfo","endDate","update","threshold","support","mobileOS","android","_addUserEvents","UserEvents","useClickAsTap","browser","edge","filter","tap","_scrolling","location","_editUserEvents","eventElement","target","touch","initialTouch","is","hasClass","mozilla","webkit","version","msie","scrollTop","ceil","selectedDateFormat","selectedShortDateFormat","selectedMobileDateFormat","today","endTime","showWorkHours","eventMinWidth","columnWidth","text","majorTimeHeaderTemplate","toString","eventTemplate","dateHeaderTemplate","footer","command","ongoingEvents","cssClass","enabled","defaultRowText","showFullDay","showWorkDay","settings","Template","templateSettings","_render","_startDate","_endDate","_calculateSlotRanges","createLayout","_layout","_content","_footer","_setContentWidth","refreshLayout","th","currentTarget","contentWidth","contentTable","minWidth","calculatedWidth","add","slotStartTime","slotEndTime","slotRanges","rangeStart","rangeEnd","_slotRanges","min","max","action","verticalByDate","msMin","msMax","msMajorInterval","majorTickDivider","timeColumns","groupedView","minorTickSlots","minorTickIndex","className","minorTicks","middleColumn","lastSlotColumn","minorSlotsCount","slice","groupedResources","_groupOrientation","_footerItems","items","_defaultTools","todayMobile","fulldayMobile","fulldayDesktop","toggleFullDay","isWorkDay","columnLevels","rowLevel","rowLevels","day","getDay","append","_addResourceView","addTimeSlotCollection","addDays","_timeSlotGroups","_timeSlotInterval","cell","getTimeSlotCollection","currentDate","UTC","getFullYear","getMonth","addTimeSlot","visibleEndDate","nextDate","nextDay","previousDate","previousDay","render","_headerColumnCount","data","Query","field","dir","toArray","eventsByResource","_eventsByResource","_renderEvents","_setRowsHeight","_positionEvents","_ongoingEvents","eventsForGroup","eventUid","Array","isArray","eventIndex","_positionEvent","eventBottomOffset","_getBottomRowOffset","verticalGroupCount","rowsCount","rowHeight","timesRow","row","_refreshSlots","minOffset","maxOffset","slotsCollection","lastSlot","offsetRight","refresh","parentValue","resource","item","itemParentValue","getter","dataParentValueField","itemIdx","value","_resourceValue","eventsFilteredByResource","operator","groupEqFilter","_isInTimeSlot","slotIndex","_adjustEvent","eventStartTime","_time","eventEndTime","adjustedStartDate","adjustedEndDate","clone","isMultiDayEvent","duration","_continuousEvents","isMobile","resize","eventStartDate","eventEndDate","eventResources","apply","singleDay","_formatEventAriaLabel","applyStylesFromKendoAttributes","rectRight","collidingEvents","addEvent","slotIndexEnd","zeroWidthEventOffset","rectLeft","createRows","rowEvents","j","eventLength","_updateEventForSelection","_eventOptionsForMove","_updateEventForResize","set","_updateMoveHint","distance","clonedEvent","eventDuraton","_removeMoveHint","rangeIndex","_moveHint","_updateResizeHint","_removeResizeHint","startRect","_createResizeHint","_resizeHint","toLocalDate","selectionByElement","vertical","collectionIndex","backward","prevGroupSlot","nextGroupSlot","newStart","newEnd","_isInRange","move","key","handled","keys","DOWN","UP","LEFT","RIGHT","off","clearInterval","groupOptions","passedChildren","numberOfChildren","resourceIndex","levels","groupLevel","groupLevelMember","_setResourceValue","TimelineWeekView","selectedDate","dayOfWeek","calendarInfo","firstDay","TimelineWorkWeekView","weekStart","map","indexOf","TimelineMonthView","firstDayOfMonth","lastDayOfMonth","jQuery","kendo$1"],"sources":["kendo.scheduler.timelineview.js"],"mappings":"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","sourcesContent":["import './kendo.scheduler.view.js';\nimport './kendo.icons.js';\n\nvar __meta__ = {\n    id: \"scheduler.timelineview\",\n    name: \"Scheduler Timeline View\",\n    category: \"web\",\n    description: \"The Scheduler Timeline View\",\n    depends: [ \"scheduler.view\", \"icons\" ],\n    hidden: true\n};\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        setTime = kendo.date.setTime,\n        SchedulerView = ui.SchedulerView,\n        outerWidth = kendo._outerWidth,\n        outerHeight = kendo._outerHeight,\n        extend = $.extend,\n        encode = kendo.htmlEncode,\n        getDate = kendo.date.getDate,\n        getMilliseconds = kendo.date.getMilliseconds,\n        MS_PER_DAY = kendo.date.MS_PER_DAY,\n        MS_PER_MINUTE = kendo.date.MS_PER_MINUTE,\n        CURRENT_TIME_MARKER_CLASS = \"k-current-time\",\n        CURRENT_TIME_MARKER_ARROW_CLASS = \"k-current-time-arrow\",\n        SCHEDULER_HEADER_WRAP_CLASS = \"k-scheduler-header-wrap\",\n        INVERSE_COLOR_CLASS = \"k-event-inverse\",\n        BORDER_SIZE_COEFF = 0.8666,\n        DOT = \".\",\n        NS = \".kendoTimelineView\";\n\n    var EVENT_TEMPLATE = kendo.template(({ title, start, end }) =>'<div>' +\n        `<div class=\"k-event-template k-event-time\">${encode(kendo.format(\"{0:t} - {1:t}\", start, end))}</div>` +\n        `<div class=\"k-event-template\">${title}</div></div>`),\n        DATA_HEADER_TEMPLATE = kendo.template(({ date }) => `<span class='k-link k-nav-day'>${kendo.format('{0:m}', date)}</span>`),\n        EVENT_WRAPPER_TEMPLATE = (task) =>\n            `<div role=\"button\" aria-label=\"${encode(task.ariaLabel)}\" data-${task.ns}uid=\"${task.uid}\" ` +\n            `${task.resources[0] ? `${kendo.attr(\"style-background-color\")}=\"${task.resources[0].color}\" ${kendo.attr(\"style-border-color\")}=\"${task.resources[0].color}\" class=\"k-event\">` : 'class=\"k-event\">'}` +\n                '<span class=\"k-event-actions\">' +\n                    `${task.tail ? kendo.ui.icon(\"caret-alt-left\") : ''}` +\n                    `${task.isException() ? kendo.ui.icon(\"arrows-no-repeat\") :\n                        (task.isRecurring() ? kendo.ui.icon(\"arrow-rotate-cw\") : '')}` +\n                '</span>' +\n                `${kendo.template(task.template)(task)}` +\n                '<span class=\"k-event-actions\">' +\n                    `${task.showDelete ? `<a href=\"#\" class=\"k-link k-event-delete\" title=\"${task.messages.destroy}\" aria-label=\"${task.messages.destroy}\">${kendo.ui.icon(\"x\")}</a>` : ''}` +\n                    `${task.head ? kendo.ui.icon(\"caret-alt-right\") : ''}` +\n                '</span>' +\n                `${task.resizable && !task.tail ? '<span class=\"k-resize-handle k-resize-w\"></span>' : ''}` +\n                `${task.resizable && !task.head ? '<span class=\"k-resize-handle k-resize-e\"></span>' : ''}` +\n            '</div>';\n\n    function toInvariantTime(date) {\n        var staticDate = new Date(1980, 1, 1, 0, 0, 0);\n        setTime(staticDate, getMilliseconds(date));\n        return staticDate;\n    }\n\n    function createZeroWidthEvent() {\n        return $(\"<div class='k-event'></div>\").appendTo(document.body);\n    }\n\n    function getWorkDays(options) {\n        if (options.workDays && options.workDays.length) {\n            return options.workDays;\n        }\n\n        var workDays = [];\n        var dayIndex = options.workWeekStart % 7;\n        var workWeekEnd = Math.abs(options.workWeekEnd % 7);\n\n        workDays.push(dayIndex);\n\n        while (workWeekEnd != dayIndex) {\n            if (dayIndex > 6 ) {\n                dayIndex -= 7;\n            } else {\n                dayIndex++;\n            }\n            workDays.push(dayIndex);\n        }\n        return workDays;\n    }\n\n    function setColspan(columnLevel) {\n        var count = 0;\n        if (columnLevel.columns) {\n            for (var i = 0; i < columnLevel.columns.length; i++) {\n                count += setColspan(columnLevel.columns[i]);\n            }\n            columnLevel.colspan = count;\n            return count;\n        } else {\n            columnLevel.colspan = 1;\n            return 1;\n        }\n    }\n\n    var TimelineGroupedView = kendo.Class.extend({\n        init: function(view) {\n            this._view = view;\n        },\n\n        _getTimeSlotByPosition: function(x, y, groupIndex) {\n            var group = this._view.groups[groupIndex];\n\n            return group.timeSlotByPosition(x, y);\n        },\n\n        _hideHeaders: function() {\n            var view = this._view;\n\n            view.timesHeader.find(\"table tr\").last().hide(); /*Chrome fix, use CSS selector*/\n            view.datesHeader.find(\"table tr\").last().hide();\n        },\n\n        _setColspan: function(timeColumn) {\n            setColspan(timeColumn);\n        },\n\n        _createRowsLayout: function(resources, rows, groupHeaderTemplate) {\n            var view = this._view;\n\n            return view._createRowsLayout(resources, rows, groupHeaderTemplate);\n        },\n\n        _createVerticalColumnsLayout: function(resources, rows, groupHeaderTemplate, columns) {\n\n            return columns;\n        },\n\n        _createColumnsLayout: function(resources, columns, groupHeaderTemplate) {\n            var view = this._view;\n\n            return view._createColumnsLayout(resources, columns, groupHeaderTemplate);\n        },\n\n        _getRowCount: function() {\n            var view = this._view;\n\n            return view._groupCount();\n        },\n\n        _getGroupsCount: function() {\n            return 1;\n        },\n\n        _addContent: function(dates, columnCount, groupsCount, rowCount, start, end, slotTemplate, isVerticalGrouped) {\n            var view = this._view;\n            var html = '';\n            var options = view.options;\n\n            var appendRow = function(date) {\n                var content = \"\";\n                var classes = \"\";\n                var tmplDate;\n\n                var resources = function(groupIndex) {\n                    return function() {\n                        return view._resourceBySlot({ groupIndex: groupIndex });\n                    };\n                };\n\n                if (kendo.date.isToday(dates[idx])) {\n                    classes += \"k-today\";\n                }\n\n                if (kendo.date.getMilliseconds(date) < kendo.date.getMilliseconds(options.workDayStart) ||\n                    kendo.date.getMilliseconds(date) >= kendo.date.getMilliseconds(options.workDayEnd) ||\n                    !view._isWorkDay(dates[idx])) {\n                    classes += \" k-nonwork-hour\";\n                }\n\n                content += '<td' + (classes !== \"\" ? ' class=\"' + classes + '\"' : \"\") + \">\";\n                tmplDate = kendo.date.getDate(dates[idx]);\n                kendo.date.setTime(tmplDate, kendo.date.getMilliseconds(date));\n\n                content += slotTemplate({ date: tmplDate, resources: resources(isVerticalGrouped ? rowIdx : groupIdx) });\n                content += \"</td>\";\n\n                return content;\n            };\n\n            for (var rowIdx = 0; rowIdx < rowCount; rowIdx++) {\n                html += '<tr>';\n                for (var groupIdx = 0; groupIdx < groupsCount; groupIdx++) {\n                    for (var idx = 0, length = columnCount; idx < length; idx++) {\n                        html += view._forTimeRange(start, end, appendRow);\n                    }\n                }\n                html += \"</tr>\";\n            }\n            return html;\n        },\n\n        _addTimeSlotsCollections: function(groupCount, datesCount, tableRows, interval, isVerticallyGrouped) {\n            var view = this._view;\n            var rowCount = tableRows.length;\n\n            if (isVerticallyGrouped) {\n                rowCount = Math.floor(rowCount / groupCount);\n            }\n\n            for (var groupIndex = 0; groupIndex < groupCount; groupIndex++) {\n                var rowMultiplier = 0;\n                var group = view.groups[groupIndex];\n                var time;\n\n                if (isVerticallyGrouped) {\n                    rowMultiplier = groupIndex;\n                }\n\n                var rowIndex = rowMultiplier * rowCount;\n                var cellMultiplier = 0;\n\n                if (!isVerticallyGrouped) {\n                    cellMultiplier = groupIndex;\n                }\n\n                var cells = tableRows[rowIndex].children;\n                var cellsPerGroup = cells.length / (!isVerticallyGrouped ? groupCount : 1);\n                var cellsPerDay = cellsPerGroup / datesCount;\n\n                for (var dateIndex = 0; dateIndex < datesCount; dateIndex++) {\n                    var cellOffset = dateIndex * cellsPerDay + (cellsPerGroup * cellMultiplier);\n                    time = getMilliseconds(new Date(+view.startTime()));\n\n                    for (var cellIndex = 0; cellIndex < cellsPerDay; cellIndex++) {\n\n                        view._addTimeSlotToCollection(group, cells, cellIndex, cellOffset, dateIndex, time, interval);\n                        time += interval;\n                    }\n                }\n            }\n        },\n\n        _getVerticalGroupCount: function(groupsCount) {\n\n            return groupsCount;\n        },\n\n        _getVerticalRowCount: function(eventGroups, groupIndex, maxRowCount) {\n            var view = this._view;\n\n            return view._isVerticallyGrouped() ? eventGroups[groupIndex].maxRowCount : maxRowCount;\n        },\n\n        _renderEvent: function(eventGroup, event, adjustedEvent, group, range, container) {\n            var view = this._view;\n            var element;\n\n            element = view._createEventElement(adjustedEvent.occurrence, event, range.head || adjustedEvent.head, range.tail || adjustedEvent.tail);\n            element.appendTo(container).css({ top: 0, height: view.options.eventHeight });\n\n            var eventObject = {\n                start: adjustedEvent.occurrence._startTime || adjustedEvent.occurrence.start,\n                end: adjustedEvent.occurrence._endTime || adjustedEvent.occurrence.end,\n                element: element,\n                uid: event.uid,\n                slotRange: range,\n                rowIndex: 0,\n                offsetTop: 0\n            };\n\n            eventGroup.events[event.uid] = eventObject;\n\n            view._inverseEventColor(element);\n            view.addContinuousEvent(group, range, element, event.isAllDay);\n            view._arrangeRows(eventObject, range, eventGroup);\n        },\n\n        _verticalCountForLevel: function(level) {\n            var view = this._view;\n\n            return view._rowCountForLevel(level);\n        },\n\n        _horizontalCountForLevel: function(level) {\n            var view = this._view;\n\n            return view._columnCountForLevel(level);\n        },\n\n        _updateCurrentVerticalTimeMarker: function(ranges, currentTime) {\n            var view = this._view;\n            var elementHtml = \"<div class='\" + CURRENT_TIME_MARKER_CLASS + \"'></div>\";\n            var headerWrap = view.datesHeader.find(DOT + SCHEDULER_HEADER_WRAP_CLASS);\n            var left = Math.round(ranges[0].innerRect(currentTime, new Date(currentTime.getTime() + 1), false).left);\n            var timesTableMarker = $(elementHtml)\n                    .prependTo(headerWrap)\n                    .addClass(CURRENT_TIME_MARKER_ARROW_CLASS + \"-down\");\n\n            timesTableMarker.css({\n                left: view._adjustLeftPosition(left - (outerWidth(timesTableMarker) * BORDER_SIZE_COEFF / 2)),\n                top: headerWrap.find(\"tr\").last().prev().position().top\n            });\n\n            $(elementHtml).prependTo(view.content).css({\n                left: view._adjustLeftPosition(left),\n                width: \"1px\",\n                height: view.content[0].scrollHeight - 1,\n                top: 0\n            });\n        },\n\n        _changeGroup: function() {\n            return undefined$1;\n        },\n\n        _prevGroupSlot: function(slot, group, isDay) {\n            var view = this._view;\n\n            if (view._isVerticallyGrouped()) {\n                return slot;\n            } else {\n                var collection = group._collection(0, isDay);\n                return collection.last();\n            }\n        },\n\n        _nextGroupSlot: function(slot, group, isDay) {\n            var view = this._view;\n\n            if (view._isVerticallyGrouped()) {\n                return slot;\n            } else {\n                var collection = group._collection(0, isDay);\n                return collection.first();\n            }\n        },\n\n        _verticalSlots: function(selection, reverse) {\n             var view = this._view;\n\n             return view._changeGroup(selection, reverse);\n        },\n\n         _verticalMethod: function(reverse) {\n\n              return reverse ? \"leftSlot\" : \"rightSlot\";\n         },\n\n         _normalizeVerticalSelection: function() {\n             return undefined$1;\n         },\n\n         _horizontalSlots: function(selection, group, method, startSlot, endSlot, multiple, reverse) {\n            var view = this._view;\n            var result = {};\n\n            result.startSlot = group[method](startSlot);\n            result.endSlot = group[method](endSlot);\n\n            if (!multiple && view._isHorizontallyGrouped() && (!result.startSlot || !result.endSlot)) {\n                result.startSlot = result.endSlot = view._changeGroup(selection, reverse);\n            }\n\n            return result;\n        },\n\n        _changeVerticalViewPeriod: function() {\n            return false;\n        },\n\n        _changeHorizontalViewPeriod: function(slots, shift, selection, reverse) {\n            var view = this._view;\n\n            if ((!slots.startSlot || !slots.endSlot ) && !shift && view._changeViewPeriod(selection, reverse, false)) {\n                return true;\n            }\n            return false;\n        },\n\n        _updateDirection: function(selection, ranges, shift, reverse) {\n            var view = this._view;\n\n            view._updateDirection(selection, ranges, shift, reverse, true);\n        },\n\n         _createMoveHint: function(range, adjustedEvent) {\n                var view = this._view;\n                var startSlot = range.start;\n\n                var hint = view._createEventElement(adjustedEvent.occurrence ,adjustedEvent.occurrence, false, false);\n\n                hint.addClass(\"k-event-drag-hint\");\n\n                var rect = range.innerRect(adjustedEvent.occurrence.start, adjustedEvent.occurrence.end, view.options.snap);\n                var width = rect.right - rect.left;\n\n                if (width < 0) {\n                    width = 0;\n                }\n\n                var left = view._adjustLeftPosition(rect.left);\n\n                var css = {\n                    left: left,\n                    top: startSlot.offsetTop,\n                    height: startSlot.offsetHeight,\n                    width: width\n                };\n\n                hint.css(css);\n\n                if (adjustedEvent.occurrence.inverseColor) {\n                    hint.addClass(INVERSE_COLOR_CLASS);\n                }\n\n                view._appendMoveHint(hint);\n         },\n\n         _adjustLeftPosition: function(left) {\n            var view = this._view;\n\n            if (view._isRtl) {\n                left -= (view.content[0].scrollWidth - view.content[0].clientWidth);\n            }\n\n            return left;\n         }\n    });\n\n    var TimelineGroupedByDateView = kendo.Class.extend({\n        init: function(view) {\n            this._view = view;\n        },\n\n        _getTimeSlotByPosition: function(x, y, groupIndex) {\n            var group = this._view.groups[groupIndex];\n\n            return group.timeSlotByPosition(x, y, true);\n        },\n\n        _hideHeaders: function() {\n            var view = this._view;\n\n            if (!view._isVerticallyGrouped()) {\n                view.timesHeader.find(\"table tr\").eq(2).hide();\n                view.datesHeader.find(\"table tr\").eq(2).hide();\n            } else {\n                        view.times.find(\".k-last\").hide();\n            }\n        },\n        _setColspan: function() {},\n\n        _createRowsLayout: function(resources, rows, groupHeaderTemplate, columns) {\n            var view = this._view;\n\n            return view._createDateLayout(columns, null, true);\n        },\n\n        _createVerticalColumnsLayout: function(resources, rows, groupHeaderTemplate) {\n            var view = this._view;\n\n            return view._createColumnsLayout(resources, null, groupHeaderTemplate);\n        },\n\n        _createColumnsLayout: function(resources, columns, groupHeaderTemplate, subColumns) {\n            var view = this._view;\n\n            return view._createColumnsLayout(resources, columns, groupHeaderTemplate, subColumns, true);\n        },\n\n        _getRowCount: function(level) {\n            var view = this._view;\n\n            return view._rowCountForLevel(level);\n        },\n\n        _getGroupsCount: function() {\n            var view = this._view;\n\n            return view._groupCount();\n        },\n\n        _addContent: function(dates, columnCount, groupsCount, rowCount, start, end, slotTemplate, isVerticalGrouped) {\n            var view = this._view;\n            var html = '';\n            var options = view.options;\n\n            var appendRow = function(date, isMajorTickColumn, isMiddleColumn, isLastSlotColumn, minorTickColumns, groupIdx) {\n                var content = \"\";\n                var classes = \"\";\n                var tmplDate;\n                var workDateIndex = view._isVerticallyGrouped() ? dateIndex : idx;\n\n                var resources = function(groupIndex) {\n                    return function() {\n                        return view._resourceBySlot({ groupIndex: groupIndex });\n                    };\n                };\n\n                if (kendo.date.isToday(dates[idx])) {\n                    classes += \"k-today\";\n                }\n\n                if (kendo.date.getMilliseconds(date) < kendo.date.getMilliseconds(options.workDayStart) ||\n                    kendo.date.getMilliseconds(date) >= kendo.date.getMilliseconds(options.workDayEnd) ||\n                    !view._isWorkDay(dates[workDateIndex])) {\n                    classes += \" k-nonwork-hour\";\n                }\n\n                content += '<td' + (classes !== \"\" ? ' class=\"' + classes + '\"' : \"\") + \">\";\n                tmplDate = kendo.date.getDate(dates[idx]);\n                kendo.date.setTime(tmplDate, kendo.date.getMilliseconds(date));\n\n                content += slotTemplate({ date: tmplDate, resources: resources(groupIdx) });\n                content += \"</td>\";\n\n                return content;\n            };\n\n            var tempStart = new Date(start),\n                minorTickCount = view.options.minorTickCount,\n                msMajorInterval = view.options.majorTick * MS_PER_MINUTE,\n                msInterval = msMajorInterval / minorTickCount || 1,\n                dateIndex;\n\n            for (var rowIdx = 0; rowIdx < rowCount; rowIdx++) {\n                html += '<tr>';\n\n                 if ((rowIdx % (rowCount / view._dates.length)) === 0) {\n                   dateIndex = (rowIdx / (rowCount / view._dates.length));\n                   tempStart = new Date(view._dates[dateIndex]);\n                   kendo.date.setTime(tempStart, kendo.date.getMilliseconds(start));\n                  }\n\n                for (var idx = 0, length = columnCount; idx < length; idx++) {\n\n                    html += view._forTimeRange(tempStart, end, appendRow, isVerticalGrouped, groupsCount);\n\n                    if (isVerticalGrouped) {\n                    setTime(tempStart, msInterval, false);\n                        break;\n                    }\n                }\n               html += \"</tr>\";\n            }\n\n            return html;\n        },\n\n        _addTimeSlotsCollections: function(groupCount, datesCount, tableRows, interval, isVerticallyGrouped) {\n            var view = this._view;\n            var rowCount = tableRows.length;\n\n             if (isVerticallyGrouped) {\n                rowCount = rowCount / datesCount;\n             }\n\n            for (var dateIndex = 0; dateIndex < datesCount; dateIndex++) {\n                var rowMultiplier = 0;\n                var time;\n\n                if (isVerticallyGrouped) {\n                    rowMultiplier = dateIndex;\n                }\n\n                var rowIndex = rowMultiplier * rowCount;\n                var cellMultiplier = 0;\n                var cells = tableRows[rowIndex].children;\n                var cellsPerGroup = isVerticallyGrouped ? rowCount : cells.length / (datesCount * groupCount);\n                var cellsPerDay = cells.length / datesCount;\n                var cellOffset;\n\n                time = getMilliseconds(new Date(+view.startTime()));\n\n                for (var cellIndex = 0; cellIndex < cellsPerGroup; cellIndex++) {\n                    if (!isVerticallyGrouped) {\n                        cellOffset = (dateIndex * cellsPerDay) + (groupCount * cellIndex);\n                        cellMultiplier++;\n                    } else {\n                        cellOffset = 0;\n                        cells = tableRows[cellIndex + (cellsPerGroup * dateIndex)].children;\n                    }\n\n                    for (var groupIndex = 0; groupIndex < groupCount; groupIndex++) {\n                        var group = view.groups[groupIndex];\n\n                        view._addTimeSlotToCollection(group, cells, groupIndex, cellOffset, dateIndex, time, interval);\n                    }\n                    time += interval;\n                }\n             }\n        },\n\n        _getVerticalGroupCount: function() {\n            var view = this._view;\n\n            return view.content.find(\"tr\").length;\n        },\n\n        _getVerticalRowCount: function(eventGroups, groupIndex, maxRowCount) {\n\n            return maxRowCount;\n        },\n\n        _renderEvent: function(eventGroup, event, adjustedEvent, group, range, container, startIndex, endIndex) {\n            var view = this._view;\n            var element;\n            var eventObjects = [];\n\n            for (var i = range.start.index; i <= range.end.index; i++) {\n                element = view._createEventElement(adjustedEvent.occurrence, event, i !== endIndex, i !== startIndex);\n                element.appendTo(container).css({ top: 0, height: view.options.eventHeight });\n                var currentSlot = group._timeSlotCollections[0]._slots[i];\n                var dateRange = group.timeSlotRanges(currentSlot.start, currentSlot.end, false)[0];\n\n                    var eventObject = {\n                    start: i === startIndex ? adjustedEvent.occurrence._startTime || adjustedEvent.occurrence.start : currentSlot.start,\n                    end: i === endIndex ? adjustedEvent.occurrence._endTime || adjustedEvent.occurrence.end : currentSlot.end,\n                    element: element,\n                    uid: event.uid,\n                    slotRange: dateRange,\n                    rowIndex: 0,\n                    offsetTop: 0\n                };\n\n                eventGroup.events[event.uid] = eventObject;\n                eventObjects.push(eventObject);\n\n                view.addContinuousEvent(group, dateRange, element, event.isAllDay);\n                view._arrangeRows(eventObject, dateRange, eventGroup);\n            }\n            eventGroup.events[event.uid] = eventObjects;\n        },\n\n        _verticalCountForLevel: function(level) {\n            var view = this._view;\n\n            return view._columnCountForLevel(level);\n        },\n\n        _horizontalCountForLevel: function(level, columnLevel) {\n            var view = this._view;\n\n            return view._columnCountForLevel(columnLevel) / view._columnCountForLevel(2);\n        },\n\n        _updateCurrentVerticalTimeMarker: function(ranges,currentTime) {\n            var view = this._view;\n            var firstTimesCell = view.times.find(\"tr\").first().find(\"th\").first();\n            var lastTimesCell = view.times.find(\"tr\").first().find(\"th\").last();\n            var elementHtml = \"<div class='\" + CURRENT_TIME_MARKER_CLASS + \"'></div>\";\n            var timesTableMarker = $(elementHtml).prependTo(view.times);\n            var markerTopPosition = Math.round(ranges[0].innerRect(currentTime, new Date(currentTime.getTime() + 1), false).top);\n            var timesTableMarkerCss = {};\n\n            if (this._isRtl) {\n                timesTableMarkerCss.right = firstTimesCell.position().left + outerHeight(firstTimesCell) - outerHeight(lastTimesCell);\n                timesTableMarker.addClass(CURRENT_TIME_MARKER_ARROW_CLASS + \"-left\");\n            } else {\n                timesTableMarkerCss.left = lastTimesCell.position().left;\n                timesTableMarker.addClass(CURRENT_TIME_MARKER_ARROW_CLASS + \"-right\");\n            }\n\n            timesTableMarkerCss.top = markerTopPosition - (outerWidth(timesTableMarker) * BORDER_SIZE_COEFF / 2);\n\n            timesTableMarker.css(timesTableMarkerCss);\n\n            $(elementHtml).prependTo(view.content).css({\n                top: markerTopPosition,\n                height: \"1px\",\n                right: \"1px\",\n                width: view.content[0].scrollWidth,\n                left: 0\n            });\n        },\n\n        _changeGroup: function(selection, previous, slot) {\n             var view = this._view;\n\n             if (!slot) {\n                selection.groupIndex = previous ? view.groups.length - 1 : 0;\n             }\n        },\n\n         _prevGroupSlot: function(slot) {\n              return slot;\n        },\n\n        _nextGroupSlot: function(slot) {\n              return slot;\n        },\n\n        _changeDate: function(selection, reverse, slot) {\n            var view = this._view;\n            var group = view.groups[selection.groupIndex];\n            var collections, index;\n\n            if (reverse) {\n                  collections = group._getCollections(false);\n                  index = slot.index - 1;\n\n                  if (index >= 0) {\n                      return collections[0]._slots[index];\n                  }\n              } else {\n                  collections = group._getCollections(false);\n                  index = slot.index + 1;\n\n                  if (collections[0] && collections[0]._slots[index]) {\n                      return collections[0]._slots[index];\n                  }\n               }\n        },\n\n        _verticalSlots: function(selection, reverse, slot) {\n            return this._changeDate(selection, reverse, slot);\n        },\n\n        _verticalMethod: function(reverse, multiple) {\n            if (multiple) {\n               return reverse ? \"upSlot\" : \"downSlot\";\n            } else {\n               return reverse ? \"leftSlot\" : \"rightSlot\";\n            }\n        },\n\n        _normalizeVerticalSelection: function(selection, ranges, reverse, multiple) {\n            var view = this._view;\n\n            if (!multiple) {\n                return view._normalizeVerticalSelection(selection, ranges, reverse);\n            }\n\n            return undefined$1;\n        },\n\n        _horizontalSlots: function(selection, group, method, startSlot, endSlot, multiple, reverse) {\n             var view = this._view;\n             var tempSlot = view._changeGroup(selection, reverse);\n             var result = {};\n\n            if (!tempSlot) {\n                if (!view._isVerticallyGrouped()) {\n                    result.startSlot = group[method](startSlot);\n                    result.endSlot = group[method](endSlot);\n                }\n\n            } else {\n                result.startSlot = result.endSlot = tempSlot;\n            }\n\n            return result;\n        },\n\n        _changeVerticalViewPeriod: function(slots, shift, selection, reverse) {\n            var view = this._view;\n\n            if ((!slots.startSlot || !slots.endSlot) && !shift &&\n                view._changeViewPeriod(selection, reverse, view._isVerticallyGrouped())) {\n                return true;\n            }\n            return false;\n        },\n\n        _changeHorizontalViewPeriod: function(slots, shift, selection, reverse) {\n           var view = this._view;\n\n           if ( view._isVerticallyGrouped()) {\n               return false;\n           }\n\n           if ((!slots.startSlot || !slots.endSlot ) && !shift && view._changeViewPeriod(selection, reverse, false)) {\n                return true;\n            }\n            return false;\n        },\n\n        _updateDirection: function(selection, ranges, shift, reverse) {\n            var view = this._view;\n\n            view._updateDirection(selection, ranges, shift, reverse, !view._isVerticallyGrouped());\n        },\n\n         _createMoveHint: function(range, adjustedEvent) {\n                var view = this._view;\n                var startSlot = range.start;\n                var startEnd = range.end;\n\n                for (var slotIdx = startSlot.index; slotIdx <= startEnd.index; slotIdx++) {\n                    var slot = range.collection._slots[slotIdx];\n                    var hint = view._createEventElement(adjustedEvent.occurrence ,adjustedEvent.occurrence, false, false);\n\n                    hint.addClass(\"k-event-drag-hint\");\n\n                    var css = {\n                        left: slot.offsetLeft + 2,\n                        top: slot.offsetTop,\n                        height: view.options.eventHeight,\n                        width: slot.offsetWidth\n                    };\n\n                    hint.css(css);\n\n                    if (adjustedEvent.occurrence.inverseColor) {\n                        hint.addClass(INVERSE_COLOR_CLASS);\n                    }\n\n                    view._appendMoveHint(hint);\n                }\n         },\n\n         _adjustLeftPosition: function(left) {\n             var view = this._view;\n\n            if (view._isRtl && !view._isVerticallyGrouped()) {\n                left -= (view.content[0].scrollWidth - view.content[0].offsetWidth);\n            }\n\n            return left;\n         }\n });\n\n    kendo.ui.scheduler.TimelineGroupedView = TimelineGroupedView;\n    kendo.ui.scheduler.TimelineGroupedByDateView = TimelineGroupedByDateView;\n\n    var TimelineView = SchedulerView.extend({\n        init: function(element, options) {\n            var that = this,\n            zeroWidthEvent = createZeroWidthEvent();\n\n            SchedulerView.fn.init.call(that, element, options);\n\n            that._zeroWidthEventOffset = zeroWidthEvent.outerWidth();\n            zeroWidthEvent.remove();\n\n            that._groupedView = that._getGroupedView();\n\n            that.title = that.options.title || that.options.name;\n\n            that._workDays = getWorkDays(that.options);\n\n            that._templates();\n\n            that._editable();\n\n            that.calculateDateRange();\n\n            that._groups();\n\n            that._currentTime(true);\n        },\n        name: \"timeline\",\n\n        _isVirtualized: function() {\n            return false;\n        },\n\n        _getGroupedView: function() {\n\n            if (this._isGroupedByDate()) {\n                   return new kendo.ui.scheduler.TimelineGroupedByDateView(this);\n            } else {\n                   return new kendo.ui.scheduler.TimelineGroupedView(this);\n            }\n        },\n\n        _getNextEventIndexBySlot: function(slot, sortedEvents, groupIndex) {\n           if (this._isVerticallyGrouped()) {\n               return kendo.ui.SchedulerView.fn._getNextEventIndexBySlot.call(this, slot, sortedEvents, groupIndex);\n           }\n\n            var tempIndex = 0;\n\n            for (var i = 0; i < sortedEvents.length; i++) {\n                if (slot.startDate() > sortedEvents[i].start.startDate()) {\n                    tempIndex++;\n                    continue;\n                }\n\n                if (slot.startDate().getTime() === sortedEvents[i].start.startDate().getTime() &&\n                 groupIndex > sortedEvents[i].start.groupIndex) {\n                      tempIndex++;\n                      continue;\n                }\n\n                 break;\n\n            }\n            return tempIndex;\n        },\n\n        _getSelectedSlot: function(slot, sortedEvents, event, idx, pad, prev) {\n            if (this._isVerticallyGrouped()) {\n               return kendo.ui.SchedulerView.fn._getSelectedSlot.call(this, slot, sortedEvents, event, idx, pad, prev);\n            }\n\n            return slot;\n        },\n\n        _getSortedEvents: function(uniqueAllEvents) {\n            if (this._isVerticallyGrouped()) {\n               return kendo.ui.SchedulerView.fn._getSortedEvents.call(this, uniqueAllEvents);\n            }\n\n            return uniqueAllEvents.sort(function(first, second) {\n                var result = first.start.startDate().getTime() - second.start.startDate().getTime();\n\n                if (result === 0) {\n                    if (first.start.isDaySlot && !second.start.isDaySlot) {\n                            result = -1;\n                    }\n\n                    if (!first.start.isDaySlot && second.start.isDaySlot) {\n                            result = 1;\n                    }\n                }\n\n                if (result === 0) {\n                    result = first.start.groupIndex - second.start.groupIndex;\n                }\n\n                if (result === 0) {\n                    result = $(first.element).index() - $(second.element).index();\n                }\n\n                return result;\n            });\n        },\n\n        _currentTimeMarkerUpdater: function() {\n            this._updateCurrentTimeMarker(new Date());\n        },\n\n        _scrollTo: function(element, container) {\n            SchedulerView.fn._scrollTo.call(this, element, container);\n\n            var elementOffset = element.offsetLeft,\n                elementOffsetDir = element.offsetWidth,\n                containerScroll = container.scrollLeft,\n                containerOffsetDir = container.clientWidth,\n                rightDistance = elementOffset + elementOffsetDir,\n                result = 0;\n\n                if (containerScroll > elementOffset) {\n                    result = elementOffset;\n                } else if (rightDistance > (containerScroll + containerOffsetDir)) {\n                    if (elementOffsetDir <= containerOffsetDir) {\n                        result = (rightDistance - containerOffsetDir);\n                    } else {\n                        result = elementOffset;\n                    }\n                } else {\n                    result = containerScroll;\n                }\n                container.scrollLeft = result;\n        },\n\n        _updateCurrentTimeMarker: function(currentTime) {\n            var options = this.options;\n\n            this.datesHeader.find(DOT + CURRENT_TIME_MARKER_CLASS).remove();\n            this.times.find(DOT + CURRENT_TIME_MARKER_CLASS).remove();\n            this.content.find(DOT + CURRENT_TIME_MARKER_CLASS).remove();\n\n            if (!this._isInDateSlot({ start: currentTime, end: currentTime })) {\n                return;\n            }\n\n            if (options.currentTimeMarker.useLocalTimezone === false) {\n                var timezone = options.dataSource.options.schema.timezone;\n\n                if (options.dataSource && timezone) {\n                    var timezoneOffset = kendo.timezone.offset(currentTime, timezone);\n                    currentTime = kendo.timezone.convert(currentTime, currentTime.getTimezoneOffset(), timezoneOffset);\n                }\n            }\n\n            var groupsCount = !options.group || options.group.orientation == \"vertical\" ? 1 : this.groups.length;\n\n            for (var groupIndex = 0; groupIndex < groupsCount; groupIndex++) {\n                var currentGroup = this.groups[groupIndex];\n\n                if (!currentGroup) {\n                    return;\n                }\n\n                var utcCurrentTime = kendo.date.toUtcTime(currentTime);\n                var ranges = currentGroup.timeSlotRanges(utcCurrentTime, utcCurrentTime + 1);\n\n                if (ranges.length === 0) {\n                    return;\n                }\n\n                var collection = ranges[0].collection;\n                var slotElement = collection.slotByStartDate(currentTime);\n\n                if (slotElement) {\n\n                    if (this._isVerticallyGrouped()) {\n                        this._groupedView._updateCurrentVerticalTimeMarker(ranges,currentTime);\n                    } else {\n                        var elementHtml = \"<div class='\" + CURRENT_TIME_MARKER_CLASS + \"'></div>\";\n                        var headerWrap = this.datesHeader.find(DOT + SCHEDULER_HEADER_WRAP_CLASS);\n                        var left = Math.round(ranges[0].innerRect(currentTime, new Date(currentTime.getTime() + 1), false).left);\n                        var timesTableMarker = $(elementHtml)\n                                .prependTo(headerWrap)\n                                .addClass(CURRENT_TIME_MARKER_ARROW_CLASS + \"-down\");\n\n                        timesTableMarker.css({\n                            left: this._adjustLeftPosition(left - (outerWidth(timesTableMarker) * BORDER_SIZE_COEFF / 2)),\n                            top: headerWrap.find(\"tr\").last().prev().position().top\n                        });\n\n                        $(elementHtml).prependTo(this.content).css({\n                            left: this._adjustLeftPosition(left),\n                            width: \"1px\",\n                            height: this.content[0].scrollHeight - 1,\n                            top: 0\n                        });\n                    }\n                }\n            }\n        },\n\n        _adjustLeftPosition: function(left) {\n            return this._groupedView._adjustLeftPosition(left);\n        },\n\n        _currentTime: function(setUpdateTimer) {\n            var that = this;\n            var markerOptions = that.options.currentTimeMarker;\n\n            if (markerOptions !== false && markerOptions.updateInterval !== undefined$1) {\n                that._currentTimeMarkerUpdater();\n\n                if (setUpdateTimer) {\n                    that._currentTimeUpdateTimer = setInterval(this._currentTimeMarkerUpdater.bind(that), markerOptions.updateInterval);\n                }\n            }\n        },\n\n        _editable: function() {\n            if (this.options.editable) {\n                if (this._isMobile()) {\n                    this._touchEditable();\n                } else {\n                    this._mouseEditable();\n                }\n            }\n        },\n\n        _mouseEditable: function() {\n            var that = this;\n            that.element.on(\"click\" + NS, \".k-event a:has(.k-i-x),.k-event a:has(.k-svg-i-x)\", function(e) {\n                that.trigger(\"remove\", { uid: $(this).closest(\".k-event\").attr(kendo.attr(\"uid\")) });\n                e.preventDefault();\n            });\n\n            if (that.options.editable.create !== false) {\n                that.element.on(\"dblclick\" + NS, \".k-scheduler-content td\", function(e) {\n                    var slot = that._slotByPosition(e.pageX, e.pageY);\n\n                    if (slot) {\n                        var resourceInfo = that._resourceBySlot(slot);\n                        that.trigger(\"add\", { eventInfo: extend({ start: slot.startDate(), end: slot.endDate() }, resourceInfo) });\n                    }\n\n                    e.preventDefault();\n                });\n            }\n\n            if (that.options.editable.update !== false) {\n                that.element.on(\"dblclick\" + NS, \".k-event\", function(e) {\n                    that.trigger(\"edit\", { uid: $(this).closest(\".k-event\").attr(kendo.attr(\"uid\")) });\n                    e.preventDefault();\n                });\n            }\n        },\n\n        _touchEditable: function() {\n            var that = this;\n            var threshold = 0;\n\n            if (kendo.support.mobileOS.android) {\n                threshold = 5;\n            }\n\n            if (that.options.editable.create !== false) {\n                that._addUserEvents = new kendo.UserEvents(that.element, {\n                    threshold: threshold,\n                    useClickAsTap: !kendo.support.browser.edge,\n                    filter: \".k-scheduler-content td\",\n                    tap: function(e) {\n                        if (that._scrolling) {\n                            return;\n                        }\n                        var x = e.x.location !== undefined$1 ? e.x.location : e.x;\n                        var y = e.y.location !== undefined$1 ? e.y.location : e.y;\n                        var slot = that._slotByPosition(x, y);\n\n                        if (slot) {\n                            var resourceInfo = that._resourceBySlot(slot);\n                            that.trigger(\"add\", { eventInfo: extend({ start: slot.startDate(), end: slot.endDate() }, resourceInfo) });\n                        }\n\n                        e.preventDefault();\n                    }\n                });\n            }\n\n            if (that.options.editable.update !== false) {\n                that._editUserEvents = new kendo.UserEvents(that.element, {\n                    threshold: threshold,\n                    useClickAsTap: !kendo.support.browser.edge,\n                    filter: \".k-event\",\n                    tap: function(e) {\n                        if (that._scrolling) {\n                            return;\n                        }\n                        var eventElement = $(e.target).closest(\".k-event\");\n                        var touchElement = $(e.touch.initialTouch);\n\n                        if (touchElement.is(\".k-i-x,.k-svg-i-x\")) {\n                            that.trigger(\"remove\", { uid: eventElement.attr(kendo.attr(\"uid\")) });\n                        } else if (!eventElement.hasClass(\"k-event-active\")) {\n                            that.trigger(\"edit\", { uid: eventElement.attr(kendo.attr(\"uid\")) });\n                        }\n\n                        e.preventDefault();\n                    }\n                });\n            }\n        },\n\n        _slotByPosition: function(x, y) {\n            var slot;\n            var content = this.content;\n            var offset = content.offset();\n            var groupIndex;\n\n            x -= offset.left;\n            y -= offset.top;\n\n            if (this._isRtl) {\n                var browser = kendo.support.browser;\n\n                if (browser.mozilla || (browser.webkit && browser.version >= 85)) {\n                     x += (content[0].scrollWidth - content[0].offsetWidth);\n                     x += content[0].scrollLeft;\n                } else if (browser.msie) {\n                     x -= kendo.scrollLeft(content);\n                     x += content[0].scrollWidth - content[0].offsetWidth;\n                } else if (browser.webkit) {\n                     x += content[0].scrollLeft;\n                }\n            } else {\n                x += content[0].scrollLeft;\n            }\n\n            y += content[0].scrollTop;\n\n            x = Math.ceil(x);\n            y = Math.ceil(y);\n\n            for (groupIndex = 0; groupIndex < this.groups.length; groupIndex++) {\n\n                 slot = this._groupedView._getTimeSlotByPosition(x, y, groupIndex);\n\n                 if (slot) {\n                     return slot;\n                 }\n            }\n\n            return null;\n        },\n\n        options: {\n            name: \"TimelineView\",\n            title: \"Timeline\",\n            selectedDateFormat: \"{0:D}\",\n            selectedShortDateFormat: \"{0:d}\",\n            selectedMobileDateFormat: \"{0:MMM dd}\",\n            date: kendo.date.today(),\n            startTime: kendo.date.today(),\n            endTime: kendo.date.today(),\n            showWorkHours: false,\n            minorTickCount: 2,\n            editable: true,\n            workDayStart: new Date(1980, 1, 1, 8, 0, 0),\n            workDayEnd: new Date(1980, 1, 1, 17, 0, 0),\n            workWeekStart: 1,\n            workWeekEnd: 5,\n            majorTick: 60,\n            eventHeight: 25,\n            eventMinWidth: 0,\n            columnWidth: 100,\n            groupHeaderTemplate: ({ text }) => text,\n            majorTimeHeaderTemplate: ({ date }) => kendo.toString(date, 't'),\n            slotTemplate: () => \"&nbsp;\",\n            eventTemplate: EVENT_TEMPLATE,\n            dateHeaderTemplate: DATA_HEADER_TEMPLATE,\n            footer: {\n                command: \"workDay\"\n            },\n            currentTimeMarker: {\n                updateInterval: 10000,\n                useLocalTimezone: true\n            },\n            ongoingEvents: {\n                cssClass: null,\n                enabled: true,\n                updateInterval: 60000\n            },\n            messages: {\n                defaultRowText: \"All events\",\n                showFullDay: \"Show full day\",\n                showWorkDay: \"Show business hours\"\n            }\n        },\n\n        events: [\"remove\", \"add\", \"edit\"],\n\n        _templates: function() {\n            var options = this.options,\n                settings = extend({}, kendo.Template, options.templateSettings);\n\n            this.eventTemplate = kendo.template(EVENT_WRAPPER_TEMPLATE);\n            this.majorTimeHeaderTemplate = kendo.template(options.majorTimeHeaderTemplate, settings);\n            this.dateHeaderTemplate = kendo.template(options.dateHeaderTemplate, settings);\n            this.slotTemplate = kendo.template(options.slotTemplate, settings);\n            this.groupHeaderTemplate = kendo.template(options.groupHeaderTemplate, settings);\n        },\n\n        _render: function(dates) {\n            var that = this;\n\n            dates = dates || [];\n\n            that._dates = dates;\n\n            that._startDate = dates[0];\n\n            that._endDate = dates[(dates.length - 1) || 0];\n\n            that._calculateSlotRanges();\n\n            that.createLayout(that._layout(dates));\n\n            that._content(dates);\n\n            that._footer();\n\n            that._setContentWidth();\n\n            that.refreshLayout();\n\n            that.datesHeader.on(\"click\" + NS, \".k-nav-day\", function(e) {\n                var th = $(e.currentTarget).closest(\"th\");\n\n                var slot = that._slotByPosition(th.offset().left, that.content.offset().top);\n\n                that.trigger(\"navigate\", { view: \"timeline\", date: slot.startDate() });\n            });\n\n            that._groupedView._hideHeaders();\n        },\n\n        _setContentWidth: function() {\n            var content = this.content;\n            var contentWidth = content.width();\n            var contentTable = this.content.find(\"table\");\n            var columnCount = contentTable.find(\"tr\").first().children().length;\n\n            var minWidth = 100;\n            var calculatedWidth = columnCount * this.options.columnWidth;\n\n            if (contentWidth < calculatedWidth) {\n                minWidth = Math.ceil((calculatedWidth / contentWidth) * 100);\n            }\n\n            contentTable.add(this.datesHeader.find(\"table\"))\n                .css(\"width\", minWidth + \"%\");\n        },\n\n        _calculateSlotRanges: function() {\n            var dates = this._dates;\n            var slotStartTime = this.startTime();\n            var slotEndTime = this.endTime();\n\n            slotEndTime = getMilliseconds(slotEndTime);\n            slotStartTime = getMilliseconds(slotStartTime);\n\n            if (slotEndTime === slotStartTime) {\n                slotEndTime += MS_PER_DAY - 1;\n            } else if (slotEndTime < slotStartTime) {\n                slotEndTime += MS_PER_DAY;\n            }\n\n            var slotRanges = [];\n            for (var i = 0; i < dates.length; i++) {\n                var rangeStart = getDate(dates[i]);\n                setTime(rangeStart, slotStartTime);\n\n                var rangeEnd = getDate(dates[i]);\n                setTime(rangeEnd, slotEndTime);\n\n                slotRanges.push({\n                    start: kendo.date.toUtcTime(rangeStart),\n                    end: kendo.date.toUtcTime(rangeEnd)\n                });\n            }\n\n            this._slotRanges = slotRanges;\n        },\n\n        _forTimeRange: function(min, max, action, verticalByDate, groupsCount) {\n            min = toInvariantTime(min); //convert the date to 1/2/1980 and sets the time\n            max = toInvariantTime(max);\n\n            var that = this,\n                msMin = getMilliseconds(min),\n                msMax = getMilliseconds(max),\n                minorTickCount = that.options.minorTickCount,\n                msMajorInterval = that.options.majorTick * MS_PER_MINUTE,\n                msInterval = msMajorInterval / minorTickCount || 1,\n                start = new Date(+min),\n                idx = 0, length,\n                html = \"\";\n\n            length = MS_PER_DAY / msInterval;\n\n            if (msMin != msMax) {\n                if (msMin > msMax) {\n                    msMax += MS_PER_DAY;\n                }\n\n                length = ((msMax - msMin) / msInterval);\n            }\n\n            length = verticalByDate ? 1 : Math.round(length);\n\n            if (groupsCount) {\n                length = length * groupsCount;\n            }\n\n            for (; idx < length; idx++) {\n                var majorTickDivider = idx % (msMajorInterval / msInterval);\n                var isMajorTickColumn = majorTickDivider === 0;\n                var isMiddleColumn = majorTickDivider < minorTickCount - 1;\n                var isLastSlotColumn = majorTickDivider === minorTickCount - 1;\n                var minorTickColumns = minorTickCount;\n\n                if (length % minorTickCount !== 0) {\n                    var isLastMajorSlot = (length - (idx + 1)) < minorTickCount;\n                    if (isMajorTickColumn && isLastMajorSlot) {\n                        minorTickColumns = length % minorTickCount;\n                    }\n                }\n\n                html += action(start, isMajorTickColumn, isMiddleColumn, isLastSlotColumn, minorTickColumns, idx % groupsCount);\n\n                if (!verticalByDate) {\n                    if (groupsCount) {\n                        if ((idx % groupsCount) === groupsCount - 1) {\n                            setTime(start, msInterval, false);\n                        }\n                    } else {\n                        setTime(start, msInterval, false);\n                    }\n                }\n            }\n\n            return html;\n        },\n\n        _layout: function(dates) {\n            var timeColumns = [];\n            var columns = [];\n            var that = this;\n            var rows = [{ text: that.options.messages.defaultRowText }];\n            var groupedView = that._groupedView;\n\n            var minorTickSlots = [];\n            for (var minorTickIndex = 0; minorTickIndex < that.options.minorTickCount; minorTickIndex++) {\n                minorTickSlots.push({\n                    text: \"&#8203;\",\n                    className: \"k-last\",\n                    minorTicks: true\n                });\n            }\n\n            this._forTimeRange(that.startTime(), that.endTime(), function(date, majorTick, middleColumn, lastSlotColumn, minorSlotsCount) {\n                var template = that.majorTimeHeaderTemplate;\n\n                if (majorTick) {\n                    var timeColumn = {\n                        text: template({ date: date }),\n                        className: lastSlotColumn ? \"k-slot-cell\" : \"\",\n                        columns: minorTickSlots.slice(0, minorSlotsCount)\n                    };\n\n                    groupedView._setColspan(timeColumn);\n\n                    timeColumns.push(timeColumn);\n                }\n            });\n\n            for (var idx = 0; idx < dates.length; idx++) {\n                columns.push({\n                    text: that.dateHeaderTemplate({ date: dates[idx] }),\n                    className: \"k-slot-cell\",\n                    columns: timeColumns.slice(0)\n                });\n            }\n\n            var resources = this.groupedResources;\n            if (resources.length) {\n                if (this._groupOrientation() === \"vertical\") {\n                    rows = groupedView._createRowsLayout(resources, null, this.groupHeaderTemplate, columns);\n                    columns = groupedView._createVerticalColumnsLayout(resources, null, this.groupHeaderTemplate, columns);\n\n                } else {\n                    columns = groupedView._createColumnsLayout(resources, columns, this.groupHeaderTemplate, columns);\n                }\n            }\n\n            return {\n                columns: columns,\n                rows: rows\n            };\n        },\n\n        _footerItems: function() {\n            var that = this,\n                items = [],\n                options = this.options,\n                command = options.footer.command;\n\n            if (that._isMobile()) {\n                items.push(that._defaultTools.todayMobile);\n            }\n\n            if (command && command === \"workDay\") {\n                if (that._isMobile()) {\n                    items.push(that._defaultTools.fulldayMobile);\n                } else {\n                    items.push(that._defaultTools.fulldayDesktop);\n                }\n            }\n\n            return items;\n        },\n\n        toggleFullDay: function() {\n            var options = this.options;\n\n            this.trigger(\"navigate\", { view: this.name || options.name, date: options.date, isWorkDay: !options.showWorkHours });\n        },\n\n        _columnCountForLevel: function(level) {\n            var columnLevel = this.columnLevels[level];\n            return columnLevel ? columnLevel.length : 0;\n        },\n\n        _rowCountForLevel: function(level) {\n            var rowLevel = this.rowLevels[level];\n            return rowLevel ? rowLevel.length : 0;\n        },\n\n        _isWorkDay: function(date) {\n            var day = date.getDay();\n            var workDays = this._workDays;\n\n            for (var i = 0; i < workDays.length; i++) {\n                if (workDays[i] === day) {\n                    return true;\n                }\n            }\n            return false;\n        },\n\n        _content: function(dates) {\n            var that = this;\n            var start = that.startTime();\n            var end = this.endTime();\n            var groupsCount = 1;\n            var rowCount = 1;\n            var columnCount = dates.length;\n            var html = '';\n            var resources = this.groupedResources;\n            var slotTemplate = this.slotTemplate;\n            var isVerticalGrouped = false;\n\n            if (resources.length) {\n                isVerticalGrouped = that._groupOrientation() === \"vertical\";\n\n                if (isVerticalGrouped) {\n                    rowCount = that._groupedView._getRowCount(this.rowLevels.length - 1);\n                    groupsCount = that._groupedView._getGroupsCount();\n                } else {\n                    groupsCount = that._groupCount();\n                }\n            }\n\n            html += '<tbody>';\n            html += that._groupedView._addContent(dates, columnCount, groupsCount, rowCount, start, end, slotTemplate, isVerticalGrouped);\n            html += '</tbody>';\n\n            this.content.find(\"table\").append(html);\n        },\n\n        _groups: function() {\n            var groupCount = this._groupCount();\n            var dates = this._dates;\n            var columnCount = dates.length;\n\n            this.groups = [];\n\n            for (var idx = 0; idx < groupCount; idx++) {\n                var view = this._addResourceView(idx);\n\n                var start = dates[0];\n                var end = dates[(dates.length - 1) || 0];\n\n                var startTime = getMilliseconds(this.startTime());\n                var endTime = getMilliseconds(this.endTime());\n\n                if (startTime !== 0 && endTime <= startTime) {\n                    start = getDate(start);\n                    setTime(start, startTime);\n\n                    end = getDate(end);\n                    setTime(end, endTime);\n                }\n\n                view.addTimeSlotCollection(start, kendo.date.addDays(end, 1));\n            }\n\n            this._timeSlotGroups(groupCount, columnCount);\n        },\n\n        _isHorizontallyGrouped: function() {\n            return this.groupedResources.length && this._groupOrientation() === \"horizontal\";\n        },\n\n        _timeSlotGroups: function(groupCount, datesCount) {\n            var interval = this._timeSlotInterval();\n            var isVerticallyGrouped = this._isVerticallyGrouped();\n            var tableRows = this.content.find(\"tr\");\n\n            this._groupedView._addTimeSlotsCollections(groupCount, datesCount, tableRows, interval, isVerticallyGrouped);\n\n        },\n\n        _addTimeSlotToCollection: function(group, cells, cellIndex, cellOffset, dateIndex, time, interval) {\n              var cell = cells[cellIndex + cellOffset];\n              var collection = group.getTimeSlotCollection(0);\n              var currentDate = this._dates[dateIndex];\n              var currentTime = Date.UTC(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate());\n              var start = currentTime + time;\n              var end = start + interval;\n\n              collection.addTimeSlot(cell, start, end, true);\n        },\n\n        startDate: function() {\n            return this._startDate;\n        },\n\n        endDate: function() {\n            return this._endDate;\n        },\n\n        visibleEndDate: function() {\n            var startTime = getMilliseconds(this.startTime());\n            var endTime = getMilliseconds(this.endTime());\n            var endDate = this.endDate();\n\n            if (startTime !== 0 && endTime <= startTime) {\n                endDate = kendo.date.addDays(endDate, 1);\n            }\n\n            return endDate;\n        },\n\n        startTime: function() {\n            var options = this.options;\n            return options.showWorkHours ? options.workDayStart : options.startTime;\n        },\n\n        endTime: function() {\n            var options = this.options;\n            return options.showWorkHours ? options.workDayEnd : options.endTime;\n        },\n\n        _timeSlotInterval: function() {\n            var options = this.options;\n            return (options.majorTick / options.minorTickCount) * MS_PER_MINUTE;\n        },\n\n        nextDate: function() {\n            return kendo.date.nextDay(this.endDate());\n        },\n\n        previousDate: function() {\n            return kendo.date.previousDay(this.startDate());\n        },\n\n        calculateDateRange: function() {\n            this._render([this.options.date]);\n        },\n\n        render: function(events) {\n            this._headerColumnCount = 0;\n\n            this._groups();\n\n            this.element.find(\".k-event\").remove();\n\n            events = new kendo.data.Query(events)\n                .sort([{ field: \"start\", dir: \"asc\" },{ field: \"end\", dir: \"desc\" }])\n                .toArray();\n\n            var eventsByResource = [];\n\n            this._eventsByResource(events, this.groupedResources, eventsByResource);\n\n            var eventGroups = [];\n            var maxRowCount = 0;\n\n            for (var groupIndex = 0; groupIndex < eventsByResource.length; groupIndex++) {\n                var eventGroup = {\n                    groupIndex: groupIndex,\n                    maxRowCount: 0,\n                    events: {}\n                };\n\n                eventGroups.push(eventGroup);\n\n                this._renderEvents(eventsByResource[groupIndex], groupIndex, eventGroup);\n\n                if (maxRowCount < eventGroup.maxRowCount) {\n                    maxRowCount = eventGroup.maxRowCount;\n                }\n            }\n\n            this._setRowsHeight(eventGroups, eventsByResource.length, maxRowCount);\n\n            this._positionEvents(eventGroups, eventsByResource.length);\n\n            this._currentTime(false);\n            this._ongoingEvents(events);\n\n            this.trigger(\"activate\");\n        },\n\n        _positionEvents: function(eventGroups, groupsCount) {\n            for (var groupIndex = 0; groupIndex < groupsCount; groupIndex++) {\n                var eventsForGroup = eventGroups[groupIndex].events;\n                for (var eventUid in eventsForGroup) {\n                    var eventObject = eventsForGroup[eventUid];\n                    if (Array.isArray(eventObject)) {\n                        for (var eventIndex = 0; eventIndex < eventObject.length; eventIndex++) {\n                            this._positionEvent(eventObject[eventIndex]);\n                        }\n                    } else {\n                        this._positionEvent(eventObject);\n                    }\n                }\n            }\n        },\n\n        _setRowsHeight: function(eventGroups, groupsCount, maxRowCount) {\n            var eventHeight = this.options.eventHeight;\n            var eventBottomOffset = this._getBottomRowOffset();\n            var groupedView = this._groupedView;\n            var verticalGroupCount = groupedView._getVerticalGroupCount(groupsCount);\n\n            groupsCount = this._isVerticallyGrouped() ? verticalGroupCount : 1;\n\n            for (var groupIndex = 0; groupIndex < groupsCount; groupIndex++) {\n                var rowsCount = groupedView._getVerticalRowCount(eventGroups, groupIndex, maxRowCount);\n\n                rowsCount = rowsCount ? rowsCount : 1;\n\n                var rowHeight = ((eventHeight + 2) * rowsCount) + eventBottomOffset;\n                var timesRow = $(this.times.find(\"tr\")[groupIndex]);\n                var row = $(this.content.find(\"tr\")[groupIndex]);\n\n                timesRow.height(rowHeight);\n                row.height(rowHeight);\n            }\n\n            this._setContentWidth();\n            this.refreshLayout();\n            this._refreshSlots();\n        },\n\n        _getBottomRowOffset: function() {\n            var eventBottomOffset = this.options.eventHeight * 0.50;\n            var isMobile = this._isMobile();\n            var minOffset;\n            var maxOffset;\n\n            if (isMobile) {\n                minOffset = 30;\n                maxOffset = 60;\n            } else {\n                minOffset = 15;\n                maxOffset = 30;\n            }\n\n            if (eventBottomOffset > maxOffset) {\n                eventBottomOffset = maxOffset;\n            } else if (eventBottomOffset < minOffset) {\n                eventBottomOffset = minOffset;\n            }\n\n            return eventBottomOffset;\n        },\n\n        _positionEvent: function(eventObject) {\n            var eventHeight = this.options.eventHeight;\n            var eventOffset = 2;\n            var rect = eventObject.slotRange.innerRect(eventObject.start, eventObject.end, false);\n            var left = this._adjustLeftPosition(rect.left);\n            var width = rect.right - rect.left;\n\n            if (width < 0) {\n                width = 0;\n            }\n\n            if (width < this.options.eventMinWidth) {\n                var slotsCollection = eventObject.slotRange.collection;\n                var lastSlot = slotsCollection._slots[slotsCollection._slots.length - 1];\n                var offsetRight = lastSlot.offsetLeft + lastSlot.offsetWidth;\n\n                width = this.options.eventMinWidth;\n\n                if (offsetRight < left + width) {\n                    width = offsetRight - rect.left;\n                }\n            }\n\n            eventObject.element.css({\n                top: eventObject.slotRange.start.offsetTop + eventObject.rowIndex * (eventHeight + eventOffset) + \"px\",\n                left: left,\n                width: width\n            });\n        },\n\n        _refreshSlots: function() {\n            for (var groupIndex = 0; groupIndex < this.groups.length; groupIndex++) {\n                this.groups[groupIndex].refresh();\n            }\n        },\n\n        _eventsByResource: function(events, resources, result, parentValue) {\n            var resource = resources[0];\n\n            if (resource) {\n                var view = resource.dataSource.view();\n\n                view = view.filter(function(item) {\n                    var itemParentValue = kendo.getter(resource.dataParentValueField)(item);\n\n                    return itemParentValue === null || itemParentValue === undefined$1 || itemParentValue === parentValue;\n                });\n\n                for (var itemIdx = 0; itemIdx < view.length; itemIdx++) {\n                    var value = this._resourceValue(resource, view[itemIdx]);\n\n                    var eventsFilteredByResource = new kendo.data.Query(events).filter({ field: resource.field, operator: SchedulerView.groupEqFilter(value) }).toArray();\n\n                    if (resources.length > 1) {\n                        this._eventsByResource(eventsFilteredByResource, resources.slice(1), result, value);\n                    } else {\n                        result.push(eventsFilteredByResource);\n                    }\n                }\n            } else {\n                result.push(events);\n            }\n        },\n\n        _isInDateSlot: function(event) {\n            var startTime = event.start;\n            var endTime = event.end;\n            var rangeStart = getDate(this._startDate);\n            var rangeEnd = kendo.date.addDays(getDate(this.visibleEndDate()), 1);\n\n            if (startTime < rangeEnd && rangeStart <= endTime) {\n                return true;\n            }\n            return false;\n        },\n\n        _isInTimeSlot: function(event) {\n            var startTime = event._startTime || kendo.date.toUtcTime(event.start);\n            var endTime = event._endTime || kendo.date.toUtcTime(event.end);\n\n            var slotRanges = this._slotRanges;\n\n            if (startTime === endTime) {\n                endTime = endTime + 1;\n            }\n\n            for (var slotIndex = 0; slotIndex < slotRanges.length; slotIndex++) {\n                if (startTime < slotRanges[slotIndex].end && slotRanges[slotIndex].start < endTime) {\n                    return true;\n                }\n            }\n            return false;\n        },\n\n        _adjustEvent: function(event) {\n            var start = event.start;\n            var end = event.end;\n            var eventStartTime = event._time(\"start\");\n            var eventEndTime = event._time(\"end\");\n            var startTime = getMilliseconds(this.startTime());\n            var endTime = getMilliseconds(this.endTime());\n            var adjustedStartDate = null;\n            var adjustedEndDate = null;\n            var occurrence;\n            var head = false;\n            var tail = false;\n\n            if (event.isAllDay) {\n                start = getDate(start);\n                eventStartTime = 0;\n\n                end = getDate(end);\n                eventEndTime = MS_PER_DAY;\n                adjustedEndDate = kendo.date.addDays(end, 1);\n            }\n\n            if (endTime === 0) {\n                endTime = MS_PER_DAY;\n            }\n\n            if (endTime <= startTime) {\n                if (eventStartTime < startTime && eventStartTime >= endTime) {\n                    adjustedStartDate = getDate(start);\n                    setTime(adjustedStartDate, startTime);\n                    tail = true;\n                }\n\n                if (eventEndTime > endTime && eventEndTime <= startTime) {\n                    adjustedEndDate = getDate(end);\n                    setTime(adjustedEndDate, endTime);\n                    head = true;\n                }\n            } else {\n                if (startTime > eventStartTime) {\n                    adjustedStartDate = getDate(start);\n                    setTime(adjustedStartDate, startTime);\n                    tail = true;\n                } else if (endTime <= eventStartTime) {\n                    adjustedStartDate = getDate(start);\n                    adjustedStartDate = kendo.date.addDays(adjustedStartDate, 1);\n                    setTime(adjustedStartDate, startTime);\n                    tail = true;\n                }\n\n                if (endTime < eventEndTime) {\n                    adjustedEndDate = getDate(end);\n                    setTime(adjustedEndDate, endTime);\n                    head = true;\n                } else if (startTime > eventEndTime) {\n                    adjustedEndDate = getDate(end);\n                    adjustedEndDate = kendo.date.addDays(adjustedEndDate,-1);\n                    setTime(adjustedEndDate, endTime);\n                    head = true;\n                }\n            }\n\n            occurrence = event.clone({\n                start: adjustedStartDate ? adjustedStartDate : start,\n                end: adjustedEndDate ? adjustedEndDate : end,\n                _startTime: adjustedStartDate ? kendo.date.toUtcTime(adjustedStartDate) : event._startTime,\n                _endTime: adjustedEndDate ? kendo.date.toUtcTime(adjustedEndDate) : event._endTime,\n                isAllDay: false\n            });\n\n            return {\n                occurrence: occurrence,\n                head: head,\n                tail: tail\n            };\n        },\n\n        _renderEvents: function(events, groupIndex, eventGroup) {\n            var event;\n            var idx;\n            var length;\n\n            for (idx = 0, length = events.length; idx < length; idx++) {\n                event = events[idx];\n\n                if (this._isInDateSlot(event)) {\n                    var isMultiDayEvent = event.isAllDay || event.duration() >= MS_PER_DAY;\n                    var container = this.content;\n\n                    if (isMultiDayEvent || this._isInTimeSlot(event)) {\n                        var adjustedEvent = this._adjustEvent(event);\n                        var group = this.groups[groupIndex];\n\n                        if (!group._continuousEvents) {\n                            group._continuousEvents = [];\n                        }\n\n                        if (this._isInTimeSlot(adjustedEvent.occurrence)) {\n                            var ranges = group.slotRanges(adjustedEvent.occurrence, false);\n                            var range = ranges[0];\n                            var startIndex = range.start.index;\n                            var endIndex = range.end.index;\n\n                            this._groupedView._renderEvent(eventGroup, event, adjustedEvent, group, range, container, startIndex, endIndex);\n                        }\n                    }\n                }\n            }\n        },\n\n        addContinuousEvent: function(group, range, element, isAllDay) {\n            var events = group._continuousEvents;\n\n            events.push({\n                element: element,\n                isAllDay: isAllDay,\n                uid: element.attr(kendo.attr(\"uid\")),\n                start: range.start,\n                end: range.end\n            });\n        },\n\n        _createEventElement: function(occurrence, event, head, tail) {\n            var template = this.eventTemplate;\n            var editable = this.options.editable;\n            var isMobile = this._isMobile();\n            var showDelete = editable && editable.destroy !== false && !isMobile;\n            var resizable = editable && editable.resize !== false;\n            var eventStartTime = event._time(\"start\");\n            var eventEndTime = event._time(\"end\");\n            var eventStartDate = event.start;\n            var eventEndDate = event.end;\n\n            var resources = this.eventResources(event);\n\n            if (event._startTime && eventStartTime !== kendo.date.getMilliseconds(event.start)) {\n                eventStartDate = new Date(eventStartTime);\n                eventStartDate = kendo.timezone.apply(eventStartDate, \"Etc/UTC\");\n            }\n\n            if (event._endTime && eventEndTime !== kendo.date.getMilliseconds(event.end)) {\n                eventEndDate = new Date(eventEndTime);\n                eventEndDate = kendo.timezone.apply(eventEndDate, \"Etc/UTC\");\n            }\n\n            var data = extend({}, {\n                ns: kendo.ns,\n                resizable: resizable,\n                showDelete: showDelete,\n                head: head,\n                tail: tail,\n                singleDay: this._dates.length == 1,\n                resources: resources,\n                inverseColor: false,\n                messages: this.options.messages,\n                ariaLabel: this._formatEventAriaLabel(event.title, eventStartDate, eventEndDate, event.isAllDay),\n                template: this.options.eventTemplate\n            }, event, {\n                start: eventStartDate,\n                end: eventEndDate\n            });\n\n            var element = $(template(data));\n            kendo.applyStylesFromKendoAttributes(element, [\"background-color\", \"border-color\"]);\n\n            return element;\n        },\n\n        _arrangeRows: function(eventObject, slotRange, eventGroup) {\n            var that = this;\n            var startIndex = slotRange.start.index;\n            var endIndex = slotRange.end.index;\n\n            var rect = eventObject.slotRange.innerRect(eventObject.start, eventObject.end, false);\n            var rectRight = rect.right + this.options.eventMinWidth;\n\n            var events = SchedulerView.collidingEvents(slotRange.events(), rect.left, rectRight);\n\n            slotRange.addEvent({\n                slotIndex: startIndex,\n                slotIndexEnd: endIndex,\n                start: rect.left,\n                end: rectRight,\n                zeroWidthEventOffset: that._zeroWidthEventOffset,\n                rectLeft: rect.left,\n                rectRight: rectRight,\n                element: eventObject.element,\n                uid: eventObject.uid\n            });\n\n            events.push({\n                slotIndex: startIndex,\n                slotIndexEnd: endIndex,\n                start: rect.left,\n                end: rectRight,\n                zeroWidthEventOffset: that._zeroWidthEventOffset,\n                uid: eventObject.uid\n            });\n\n            var rows = SchedulerView.createRows(events);\n\n            if (eventGroup.maxRowCount < rows.length) {\n                eventGroup.maxRowCount = rows.length;\n            }\n\n            for (var idx = 0, length = rows.length; idx < length; idx++) {\n                var rowEvents = rows[idx].events;\n                for (var j = 0, eventLength = rowEvents.length; j < eventLength; j++) {\n                    eventGroup.events[rowEvents[j].uid].rowIndex = idx;\n                }\n            }\n        },\n\n        _groupCount: function() {\n            var resources = this.groupedResources;\n            var groupedView = this._groupedView;\n\n            if (resources.length) {\n                if (this._groupOrientation() === \"vertical\") {\n                    return groupedView._verticalCountForLevel(resources.length - 1);\n                } else {\n                    return groupedView._horizontalCountForLevel(resources.length - 1, this.columnLevels.length - 1);\n                }\n            }\n            return 1;\n        },\n\n        _updateEventForSelection: function(event) {\n            var adjustedEvent = this._adjustEvent(event.clone());\n            return adjustedEvent.occurrence;\n        },\n\n        _eventOptionsForMove: function(event) {\n            if (event.isAllDay) {\n                return { isAllDay: false };\n            }\n\n            return {};\n        },\n\n        _updateEventForResize: function(event) {\n            if (event.isAllDay) {\n                event.set(\"isAllDay\", false);\n            }\n        },\n\n        _updateMoveHint: function(event, groupIndex, distance) {\n            var group = this.groups[groupIndex];\n\n            var clonedEvent = event.clone({ start: event.start, end: event.end });\n\n            var eventDuraton = clonedEvent.duration();\n            clonedEvent.start = new Date(clonedEvent.start.getTime() + distance);\n            clonedEvent.end = new Date(+clonedEvent.start + eventDuraton);\n\n            this._removeMoveHint(event.uid);\n\n            if (this._isInDateSlot(clonedEvent)) {\n                if (clonedEvent.isAllDay || clonedEvent.duration() >= MS_PER_DAY || this._isInTimeSlot(clonedEvent)) {\n                    var adjustedEvent = this._adjustEvent(clonedEvent);\n                    var ranges = group.slotRanges(adjustedEvent.occurrence, false);\n\n                    for (var rangeIndex = 0; rangeIndex < ranges.length; rangeIndex++) {\n                        this._groupedView._createMoveHint(ranges[rangeIndex], adjustedEvent);\n                    }\n                }\n            }\n        },\n\n       _appendMoveHint: function(hint) {\n            hint.appendTo(this.content);\n\n            this._moveHint = this._moveHint.add(hint);\n       },\n\n        _updateResizeHint: function(event, groupIndex, startTime, endTime) {\n            var group = this.groups[groupIndex];\n            var ranges = group.ranges(startTime, endTime, false, false);\n\n            this._removeResizeHint();\n\n            for (var rangeIndex = 0; rangeIndex < ranges.length; rangeIndex++) {\n                var range = ranges[rangeIndex];\n                var start = range.startSlot();\n\n                var startRect = range.innerRect(startTime, endTime, false);\n                startRect.top = start.offsetTop;\n\n                var width = startRect.right - startRect.left;\n\n                if (width < 0) {\n                    for (var i = 0; i < range.events().length; i++) {\n                        if (range.events()[i].uid === event.uid) {\n                            width = range.events()[i].rectRight - startRect.left;\n                            break;\n                        }\n                    }\n                }\n\n                var height = range.endSlot().offsetTop + start.offsetHeight - startRect.top;\n\n                var left = this._adjustLeftPosition(startRect.left);\n\n                var hint = SchedulerView.fn._createResizeHint.call(this,\n                    left,\n                    startRect.top,\n                    width,\n                    height\n                );\n\n                this._resizeHint = this._resizeHint.add(hint);\n            }\n\n            var format = \"t\";\n            var container = this.content;\n\n            this._resizeHint.appendTo(container);\n\n            this._resizeHint.find(\".k-label-top,.k-label-bottom\").text(\"\");\n\n            this._resizeHint.first().addClass(\"k-first\").find(\".k-label-top\").text(kendo.toString(kendo.timezone.toLocalDate(startTime), format));\n\n            this._resizeHint.last().addClass(\"k-last\").find(\".k-label-bottom\").text(kendo.toString(kendo.timezone.toLocalDate(endTime), format));\n        },\n\n        selectionByElement: function(cell) {\n            var offset = cell.offset();\n            return this._slotByPosition(offset.left, offset.top);\n        },\n\n        _updateDirection: function(selection, ranges, multiple, reverse, vertical) {\n\n            var startSlot = ranges[0].start;\n            var endSlot = ranges[ranges.length - 1].end;\n            if (multiple && !vertical) {\n                if (startSlot.index === endSlot.index &&\n                    startSlot.collectionIndex === endSlot.collectionIndex) {\n                    selection.backward = reverse;\n                }\n            }\n        },\n\n        _changeGroup: function(selection, previous) {\n            var method = previous ? \"prevGroupSlot\" : \"nextGroupSlot\";\n\n            var slot = this[method](selection.start, selection.groupIndex, false);\n\n            if (slot) {\n                selection.groupIndex += previous ? -1 : 1;\n            }\n\n            this._groupedView._changeGroup(selection, previous, slot);\n            return slot;\n        },\n\n        prevGroupSlot: function(date, groupIndex, isDay) {\n            var group = this.groups[groupIndex];\n            var slot = group.ranges(date, date, isDay, false)[0].start;\n\n            if (groupIndex <= 0) {\n                return;\n            }\n\n            return this._groupedView._prevGroupSlot(slot, group, isDay);\n        },\n\n        nextGroupSlot: function(date, groupIndex, isDay) {\n            var group = this.groups[groupIndex];\n            var slot = group.ranges(date, date, isDay, false)[0].start;\n\n            if (groupIndex >= this.groups.length - 1) {\n                return;\n            }\n\n            return this._groupedView._nextGroupSlot(slot, group, isDay);\n        },\n\n        _verticalSlots: function(selection, ranges, multiple, reverse) {\n            var groupedView = this._groupedView;\n            var method = groupedView._verticalMethod(reverse, multiple);\n            var startSlot = ranges[0].start;\n            var endSlot = ranges[ranges.length - 1].end;\n            var group = this.groups[selection.groupIndex];\n            var slot = groupedView._normalizeVerticalSelection(selection, ranges, reverse, multiple);\n\n            if (slot) {\n                startSlot = endSlot = slot;\n            }\n\n            startSlot = group[method](startSlot);\n            endSlot = group[method](endSlot);\n\n            if (!multiple && this._isVerticallyGrouped() && (!startSlot || !endSlot)) {\n                startSlot = endSlot = groupedView._verticalSlots(selection, reverse, slot);\n            }\n\n            return {\n                startSlot: startSlot,\n                endSlot: endSlot\n            };\n        },\n\n        _horizontalSlots: function(selection, ranges, multiple, reverse) {\n            var method = reverse ? \"upSlot\" : \"downSlot\";\n            var startSlot = ranges[0].start;\n            var endSlot = ranges[ranges.length - 1].end;\n            var group = this.groups[selection.groupIndex];\n            var result = {};\n\n            if (!multiple) {\n                result = this._groupedView._horizontalSlots(selection, group, method, startSlot, endSlot, multiple, reverse);\n            } else {\n                result.startSlot = group[method](startSlot);\n                result.endSlot = group[method](endSlot);\n\n                if (!multiple && this._isHorizontallyGrouped() && (!startSlot || !endSlot)) {\n                    result.startSlot = result.endSlot = this._changeGroup(selection, reverse);\n                }\n            }\n\n            return result;\n        },\n\n        _changeViewPeriod: function(selection, reverse) {\n            var date = reverse ? this.previousDate() : this.nextDate();\n            var start = selection.start;\n            var end = selection.end;\n            var newStart, newEnd;\n\n            newStart = new Date(date);\n            newEnd = new Date(date);\n\n            if (this._isInRange(newStart, newEnd)) {\n                return false;\n            }\n            selection.start = newStart;\n            selection.end = newEnd;\n\n            if (this._isHorizontallyGrouped()) {\n               selection.groupIndex = reverse ? this.groups.length - 1 : 0;\n            }\n\n            var duration = end - start;\n\n            if (reverse) {\n                end = getMilliseconds(this.endTime());\n                end = end === 0 ? MS_PER_DAY : end;\n\n                setTime(selection.start, end - duration);\n                setTime(selection.end, end);\n            } else {\n                start = getMilliseconds(this.startTime());\n\n                setTime(selection.start, start);\n                setTime(selection.end, start + duration);\n            }\n\n            selection.events = [];\n\n            return true;\n        },\n\n        move: function(selection, key, shift) {\n            var handled = false;\n            var group = this.groups[selection.groupIndex];\n            var keys = kendo.keys;\n            var groupedView = this._groupedView;\n            var ranges = group.ranges(selection.start, selection.end, false, false);\n            var startSlot, endSlot, reverse, slots;\n\n            if (key === keys.DOWN || key === keys.UP) {\n                handled = true;\n                reverse = key === keys.UP;\n\n                groupedView._updateDirection(selection, ranges, shift, reverse);\n\n                slots = this._verticalSlots(selection, ranges, shift, reverse);\n\n                if (groupedView._changeVerticalViewPeriod(slots, shift, selection, reverse)) {\n                    return handled;\n                }\n            } else if (key === keys.LEFT || key === keys.RIGHT) {\n                handled = true;\n                reverse = key === keys.LEFT;\n\n                this._updateDirection(selection, ranges, shift, reverse, false);\n\n                slots = this._horizontalSlots(selection, ranges, shift, reverse);\n\n                if (groupedView._changeHorizontalViewPeriod(slots, shift, selection, reverse)) {\n                     return handled;\n                }\n            }\n\n           if (handled) {\n               startSlot = slots.startSlot;\n               endSlot = slots.endSlot;\n\n               if (shift) {\n                   var backward = selection.backward;\n\n                   if (backward && startSlot) {\n                       selection.start = startSlot.startDate();\n                   } else if (!backward && endSlot) {\n                       selection.end = endSlot.endDate();\n                   }\n               } else if (startSlot && endSlot) {\n                   selection.start = startSlot.startDate();\n                   selection.end = endSlot.endDate();\n               }\n\n               selection.events = [];\n           }\n\n            return handled;\n        },\n\n        destroy: function() {\n            var that = this;\n\n            if (that.element) {\n                that.element.off(NS);\n            }\n\n            if (that._currentTimeUpdateTimer) {\n                clearInterval(that._currentTimeUpdateTimer);\n            }\n\n            SchedulerView.fn.destroy.call(this);\n\n            if (this._isMobile() && that.options.editable) {\n                if (that.options.editable.create !== false) {\n                    that._addUserEvents.destroy();\n                }\n\n                if (that.options.editable.update !== false) {\n                    that._editUserEvents.destroy();\n                }\n            }\n        },\n\n        _resourceBySlot: function(slot) {\n            var resources = this.groupedResources;\n            var result = {},\n            groupOptions = this.options.group;\n\n            if (resources.length && groupOptions.orientation === \"horizontal\" && groupOptions.date) {\n                var resourceIndex = slot.groupIndex,\n                    levels = this.columnLevels,\n                    groupLevel = levels[levels.length - 1],\n                    resource = resources[resources.length - 1],\n                    groupLevelMember = groupLevel[resourceIndex],\n                    passedChildren, numberOfChildren, j, i;\n\n                this._setResourceValue(groupLevelMember, resource, result);\n\n                for (j = levels.length - 2; j >= 3; j--) {\n                    groupLevel = levels[j];\n                    resource = resources[j - 3];\n                    passedChildren = 0;\n\n                    for (i = 0; i < groupLevel.length; i++) {\n                        groupLevelMember = groupLevel[i];\n                        numberOfChildren = groupLevelMember.columns.length;\n\n                        if (numberOfChildren > resourceIndex - passedChildren) {\n                            this._setResourceValue(groupLevelMember, resource, result);\n\n                            i = groupLevel.length;\n                        } else {\n                            passedChildren += numberOfChildren;\n                        }\n                    }\n                }\n\n                return result;\n            } else {\n                return SchedulerView.fn._resourceBySlot.call(this, slot);\n            }\n        }\n    });\n\n    extend(true, ui, {\n        TimelineView: TimelineView,\n        TimelineWeekView: TimelineView.extend({\n            options: {\n                name: \"TimelineWeekView\",\n                title: \"Timeline Week\",\n                selectedDateFormat: \"{0:D} - {1:D}\",\n                selectedShortDateFormat: \"{0:d} - {1:d}\",\n                selectedMobileDateFormat: \"{0:MMM dd} - {1:dd}\",\n                majorTick: 120\n            },\n            name: \"timelineWeek\",\n            calculateDateRange: function() {\n                var selectedDate = this.options.date,\n                    start = kendo.date.dayOfWeek(selectedDate, this.calendarInfo().firstDay, -1),\n                    idx, length,\n                    dates = [];\n\n                for (idx = 0, length = 7; idx < length; idx++) {\n                    dates.push(start);\n                    start = kendo.date.nextDay(start);\n                }\n                this._render(dates);\n            }\n        }),\n        TimelineWorkWeekView: TimelineView.extend({\n            options: {\n                name: \"TimelineWorkWeekView\",\n                title: \"Timeline Work Week\",\n                selectedDateFormat: \"{0:D} - {1:D}\",\n                selectedShortDateFormat: \"{0:d} - {1:d}\",\n                selectedMobileDateFormat: \"{0:MMM dd} - {1:dd}\",\n                majorTick: 120\n            },\n            name: \"timelineWorkWeek\",\n            nextDate: function() {\n                var weekStart = kendo.date.dayOfWeek(kendo.date.nextDay(this.endDate()), this.calendarInfo().firstDay, 1);\n\n                return kendo.date.addDays(weekStart, this._workDays[0]);\n            },\n            previousDate: function() {\n                var weekStart = kendo.date.dayOfWeek(this.startDate(), this.calendarInfo().firstDay, -1);\n                var workDays = this._workDays;\n\n                return kendo.date.addDays(weekStart, workDays[workDays.length - 1] - 7);\n            },\n            calculateDateRange: function() {\n                var options = this.options,\n                    selectedDate = options.date,\n                    dayOfWeek = kendo.date.dayOfWeek,\n                    weekStart = dayOfWeek(selectedDate, this.calendarInfo().firstDay, -1),\n                    start = dayOfWeek(weekStart, options.workWeekStart, 1),\n                    end = dayOfWeek(start, options.workWeekEnd, 1),\n                    dates = [],\n                    workDays = (options.workDays && options.workDays.length) ? options.workDays.map(function(day) {\n                        return dayOfWeek(weekStart, day, 1).getTime();\n                    }) : null;\n\n                if (workDays) {\n                    start = weekStart;\n                    end = dayOfWeek(start, this.calendarInfo().firstDay + 6, 1);\n                }\n\n                while (start <= end) {\n                    if (workDays && workDays.indexOf(start.getTime()) > -1) {\n                        dates.push(start);\n                    } else if (!workDays) {\n                        dates.push(start);\n                    }\n\n                    start = kendo.date.nextDay(start);\n                }\n\n                this._render(dates);\n            }\n        }),\n        TimelineMonthView: TimelineView.extend({\n            options: {\n                name: \"TimelineMonthView\",\n                title: \"Timeline Month\",\n                selectedDateFormat: \"{0:D} - {1:D}\",\n                selectedShortDateFormat: \"{0:d} - {1:d}\",\n                workDayStart: new Date(1980, 1, 1, 0, 0, 0),\n                workDayEnd: new Date(1980, 1, 1, 23, 59, 59),\n                footer: false,\n                majorTick: 1440,\n                minorTickCount: 1\n            },\n            name: \"timelineMonth\",\n            calculateDateRange: function() {\n                var selectedDate = this.options.date,\n                    start = kendo.date.firstDayOfMonth(selectedDate),\n                    end = kendo.date.lastDayOfMonth(selectedDate),\n                    idx, length,\n                    dates = [];\n\n                for (idx = 0, length = end.getDate(); idx < length; idx++) {\n                    dates.push(start);\n                    start = kendo.date.nextDay(start);\n                }\n                this._render(dates);\n            }\n        })\n    });\n\n})(window.kendo.jQuery);\nvar kendo$1 = kendo;\n\nexport { kendo$1 as default };\n"]}