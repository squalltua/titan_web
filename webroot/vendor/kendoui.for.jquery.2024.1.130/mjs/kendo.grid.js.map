{"version":3,"file":"kendo.grid.js","names":["$","undefined$1","kendo","window","ContextMenu","ui","extend","encode","htmlEncode","ACTION","GridContextMenu","init","element","options","that","this","fn","call","_overrideTemplates","_extendItems","bind","_onSelect","_onOpen","templates","sprite","icon","spriteCssClass","iconClass","defaultItems","separator","name","create","text","command","rules","edit","destroy","select","items","softRules","copySelection","copySelectionNoHeaders","paste","reorderRow","exportPDF","exportExcel","sortAsc","sortDesc","moveGroupPrevious","moveGroupNext","events","concat","ev","item","data","split","map","val","indexOf","key","reduce","acc","v","Object","assign","target","action","menu","sender","elTarget","event","isEmptyObject","closest","length","preventDefault","_toggleSeparatorVisibility","find","attr","each","i","enable","_validateSoftRules","filter","prev","next","hide","isPlainObject","keys","_append","_extendItem","messages","j","forEach","subItem","commands","uid","guid","_readState","_validateRules","tool","state","states","isFunction","append","args","trigger","grid","jQuery","Command","Class","MoveGroupCommand","exec","groupable","method","dir","_change","SortCommand","idx","dataSource","sort","field","_getCellField","multipleMode","sortable","mode","compare","splice","push","AddCommand","addRow","EditCommand","inCellMode","_editMode","editCell","editRow","DeleteCommand","removeRow","CopySelectionCommand","withHeaders","copySelectionToClipboard","SelectRowCommand","selectMode","Selectable","parseOptions","selectable","cell","SelectAllRowsCommand","rows","ClearSelectionCommand","clearSelection","ReorderRowCommand","newIndex","index","reorderRowTo","ExportPDFCommand","saveAsPDF","ExportExcelCommand","selection","exportSelectedToExcel","saveAsExcel","GridCommand","__meta__","id","category","description","depends","features","GroupsPager","DataSource","ObservableObject","tbodySupportsInnerHtml","support","tbodyInnerHtml","activeElement","_activeElement","Widget","outerWidth","_outerWidth","outerHeight","_outerHeight","getType","type","grep","isArray","Array","inArray","prototype","contains","math","Math","DOT","PROGRESS","ERROR","DATA_CELL","DATA_CELL_HIDDENINCLUDED","NAVROW","NAVCELL","ITEMROW","COLGROUP","HEADERCELLS","CARET_ALT_DOWN","CARET_ALT_RIGHT","CARET_ALT_RIGHT_CACHE","NS","EDIT","BEFOREEDIT","SAVE","REMOVE","DETAILINIT","FILTERMENUINIT","COLUMNMENUINIT","FILTERMENUOPEN","COLUMNMENUOPEN","CELLCLOSE","CHANGING","CHANGE","COLUMNHIDE","COLUMNSHOW","SAVECHANGES","DATABOUND","DETAILEXPAND","DETAILCOLLAPSE","ITEM_CHANGE","PAGE","PAGING","PASTE","SCROLL","SYNC","LOAD_START","LOAD_END","FOCUSED","HOVER","ACTIVE","FOCUSABLE","SELECTED","CHECKBOX","CHECKBOXINPUT","NORECORDSCLASS","LINK_CLASS","ICON_CLASS","SVG_ICON_CLASS","ORDER_CLASS","SORTED_CLASS","HEADER_CLASS","HEADER_COLUMN_MENU_CLASS","FILTER_MENU_CLASS","STICKY_CELL_CLASS","STICKY_HEADER_CLASS","STICKY_FOOTER_CLASS","STICKY_HEADER_NO_BORDER_CLASS","GROUPING_ROW","RESIZE","ROWRESIZE","COLUMNRESIZE","COLUMNREORDER","COLUMNLOCK","COLUMNUNLOCK","COLUMNSTICK","COLUMNUNSTICK","ROWREORDER","NAVIGATE","CLICK","MOUSEDOWN","MOUSEUP","MOUSEENTER","MOUSELEAVE","MOUSEMOVE","DUBLECLICK","HEIGHT","WIDTH","AUTO","TABINDEX","FUNCTION","STRING","NUMBER","BOTTOM","CONTAINER_FOR","FIELD","INPUT","INCELL","INLINE","OVERFLOW","SORT","GROUP_SORT","COLLAPSE","EXPAND","ID","PX","TR","DIV","ARIA_LABEL","ARIA_OWNS","ARIA_ROWCOUNT","ARIA_COLCOUNT","ARIA_COLINDEX","ARIA_ROWINDEX","ARIA_EXPANDED","ARIA_CHECKED","ARIA_ACTIVEDESCENDANT","ROLE","NONE","ROW","ROWGROUP","COLUMNHEADER","GRIDCELL","formatRegExp","whitespaceRegExp","nonDataCellsRegExp","RegExp","filterRowRegExp","COMMANDBUTTONTMPL","className","DEFAULTSELECTCOLUMNTMPL","size","ariaLabel","SELECTCOLUMNTMPL","SELECTCOLUMNHEADERTMPL","DRAGHANDLECOLUMNTMPL","DEFAULTHEADERTEMPLATE","isRtl","browser","isIE11","msie","version","isMac","test","navigator","userAgent","classNames","defaultBodyContextMenu","defaultHeadContextMenu","defaultGroupsContextMenu","Pager","useRanges","_omitPrefetch","totalPages","ceil","_collapsedTotal","pageSize","groupsTotal","VirtualScrollable","_refreshHandler","refresh","setDataSource","wrap","unbind","virtual","itemHeight","noop","prefetch","maxScrollHeight","wrapper","add","verticalScrollbar","off","clearTimeout","_timeout","_scrollingTimeout","drag","scrollbar","css","width","overflow","content","children","first","parent","on","_wheelScroll","_wrapper","kineticScrollNeeded","touch","UserEvents","global","allowSelection","start","e","capture","move","scrollTop","y","delta","scrollLeft","x","appendTo","_scroll","ctrlKey","wheelDeltaY","clientHeight","scrollHeight","delayLoading","currentTarget","rowHeight","skip","_rangeStart","height","innerHeight","isScrollingUp","_scrollbarTop","firstItemIndex","max","floor","lastItemOffset","lastItemIndex","_preventScroll","_prevScrollTop","_scrollTop","_scrolling","_fetch","setTimeout","_page","take","scrollToTop","_scrollTo","scrollToBottom","_scrollWrapperToTop","_scrollWrapperToBottom","_scrollWrapperOnColumnResize","initialScrollTop","scrollWidth","clientWidth","_wrapperScrolled","_isScrolledToBottom","_isWrapperScrolledToBottom","_isScrolledToTop","parseInt","itemIndex","rowIndex","position","result","rangeStart","scrollIntoView","row","container","containerHeight","containerScroll","elementOffset","offsetTop","elementHeight","offsetHeight","scrollingUp","currentSkip","fetching","webkitCorrection","webkit","total","_isGroupPaged","min","_fetching","callback","isGroupPaged","_groupRangeExists","inRange","range","repaintScrollbar","shouldScrollWrapper","totalHeight","maxHeight","wrapperElement","wasScrolledToBottom","addScrollBarHeight","offsetWidth","divElements","join","empty","cancel","page","attrEquals","attrName","attrValue","groupCells","count","stringifyAttributes","attributes","defaultCommands","save","themeColor","update","canceledit","excel","pdf","search","columns","fillMode","cursor","context","value","document","body","reorder","selector","source","dest","before","sourceIndex","eq","elements","lockedContent","attachCustomCommandEvent","commandName","click","replace","normalizeColumns","encoded","locked","parentIds","column","hidden","Function","_attributesFunction","isVisible","addHiddenStyle","footerAttributes","headerAttributes","headers","columnParent","parents","columnParents","inserted","setColumnVisibility","visible","setVisibility","show","removeHiddenStyle","setColumnMediaVisibility","setColumnMatchesMedia","_hideByMedia","matchesMedia","columnMatchesMedia","isUndefined","media","isCellVisible","style","display","visibleColumns","columnsWithMedia","minScreenWidth","Error","toJQuery","toArray","findColumnByField","moveCellsBetweenContainers","sources","leafs","destination","groups","sourcesDepth","depth","targetDepth","insertAfter","last","cells","rowSpan","addRowSpanValue","moveCells","updateCellIndex","thead","offset","allColumns","leafColumns","el","hasClass","columnPosition","temp","sourcePosition","columnVisiblePosition","ths","t","cellCounts","decorateCellWithClass","html","classes","match","cssClasses","pop","findReorderTarget","masterColumns","parentColumns","rtl","targetLocked","findParentColumnWithChildren","targetIndex","flatColumnsInDomOrder","flatColumns","lockedColumns","nonLockedColumns","targetParentContainerIndex","hiddenLeafColumnsCount","counter","sumWidths","cols","columnsWidth","colWidth","removeEmptyRows","emptyRowsCount","remove","mapColumnToCellRows","setLeftAndRightStyles","left","right","createColumnAttribute","attribute","property","addColumnAttribute","removeColumnAttribute","removeAttributeProperty","stickyColumns","sticky","visibleNonLockedColumns","visibleLockedColumns","visibleLeafColumns","visibleLeafExportColumns","values","title","childColumns","visibleChildColumns","getColumnsFields","editField","format","editor","editorOptions","label","leafDataCells","indexAttr","a","b","indexA","indexB","parentColumnsCells","headerRows","level","parentCellsWithChildren","prevCells","prevAll","colSpan","parentCell","getAttribute","childColumnsCells","colSpanAttr","child","appendContent","tbody","table","placeholder","tmp","$html","applyStylesFromKendoAttributes","_","appendChild","createElement","innerHTML","addClass","getValidCssClass","firstChild","replaceChild","kendoStyleAttrObject","normalizeCols","hasDetails","resizable","minWidth","colgroup","tableWidth","totalWidth","col","is","prepend","convertToObject","array","formatGroupValue","columnValues","groupValue","setCellVisibility","pad","classList","hideColumnCells","columnIndex","groupRows","hasSubgroups","showColumnCells","updateColspan","toAdd","toRemove","num","Grid","DataBoundWidget","_events","_element","_ariaId","_columns","_foreignKeyPromises","when","apply","then","_continueInit","_dataSource","_stickyColumns","_tbody","_thead","_rowResizing","_groupable","_toolbar","columnsToolbarButton","_globalColumnsMenu","_pageable","_setContentHeight","_templates","_navigatable","_initSelectableAggregates","_selectable","_statusBar","_clipboard","_paste","_details","_editable","_attachCustomCommandsEvent","_adaptiveColumns","_minScreenSupport","autoBind","fetch","_group","_groups","_footer","contextMenu","_initContextMenu","_resizeHandler","resize","notify","_showWatermarkOverlay","scrollableContent","scrollable","leftMostPosition","virtualScrollable","navigatable","toolbar","filterable","allowCopy","allowPaste","pageable","persistSelection","editable","encodeTitles","rowTemplate","altRowTemplate","statusBarTemplate","noRecords","reorderable","columnMenu","detailTemplate","columnResizeHandleWidth","mobile","loaderType","cancelDelete","confirmation","confirmDelete","selectRow","selectAllRows","reorderRowUp","reorderRowDown","reorderRowTop","reorderRowBottom","exportPdf","exportToExcelAll","exportToExcelSelection","exportToExcelSelectionNoHeaders","expandCollapseColumnHeader","groupHeader","ungroupHeader","itemsSelected","dragHandleLabel","toolbarLabel","groupingHeaderLabel","filterCellTitle","reorderableInstance","_destroyColumnAttachments","_navigatableTables","_headertables","pager","timer","_progressTimeOut","_collapseGroupsTimeOut","_endlessFetchTimeOut","_destroyGroupable","pasteHandler","pasteActionsDropDownList","clearArea","_selectedIds","copyHandler","updateClipBoardState","clearAreaHandler","_selectableAggregatesOptions","_resizeUserEvents","_resizeHandleDocumentClickHandler","_destroyRowResizing","_destroyVirtualScrollable","editableUserEvents","_lockedContentUserEvents","_destroyEditable","_progressHandler","_errorHandler","_clearSortClasses","_sortHandler","scrollables","lockedHeader","_removeLockedContainers","pane","_isMobile","minScreenResizeHandler","_detachColumnMediaResizeHandler","_draggableInstance","_draggableRowsInstance","tbodyContextMenu","theadContextMenu","lockedRowTemplate","lockedAltRowTemplate","footerTemplate","groupFooterTemplate","lockedGroupFooterTemplate","noRecordsTemplate","statusBar","footer","lockedTable","lockedFooter","_groupableClickHandler","_groupRows","_setContentWidthHandler","getOptions","deepExtend","initialData","_data","group","aggregate","transport","setOptions","currentOptions","mobileWrapper","roleSelector","after","removeClass","_setEvents","_items","includeGroupRows","tr","dataItems","n","resizeHandle","th","filterMenu","_aria","tbodyId","headerGroupId","footerGroupId","tableOwned","rowsCount","gridRole","_hasDetails","groupingHeader","gridId","_ariaGridId","tableTabindex","numberOfFixedRows","trailingColumns","_trailingColumns","virtualScroll","_ariaRowIndex","_ariaColumnIndex","role","_ariaHeaderFooter","_ariaLockedContent","_ariaGroupTitles","previousIndex","dataIndex","cellsIndex","dataVirtual","not","lockedHeaderRows","firstIndex","Number","MAX_VALUE","lastIndex","lockedLastIndex","previousVirtual","nextVirtual","eachHeaderCell","current","currentIndex","lockedParent","setAttribute","rowGroup","groupId","_ariaLocked","_cellId","lockedRows","ownedCells","_cellsIds","tableRows","_ariaAddHiddenColIndex","leafColsCount","_ariaRemoveHiddenColIndex","removeAttr","currentRow","numberOfHeaderRows","bodyRows","footerRows","totalNumberOfItems","previousItems","previousMaster","prefix","_createResizeHandle","headerWrap","ieCorrection","leftMargin","leftBorderWidth","top","indicatorWidth","halfResizeHandle","rtlCorrection","mozilla","parseFloat","_autoFitLeafColumn","_positionColumnResizeHandle","lockedHead","button","buttons","which","hasAttribute","_resizeHandleDocumentClick","_resetResizeHandleHeader","_hideResizeHandle","_positionColumnResizeHandleTouch","threshold","minHold","hold","resizeColumn","columnWidth","isLocked","isHidden","mobileOS","contentTable","header","columnMinWidth","minResizableWidth","gridWidth","constrain","_footerWidth","_scrollVirtualWrapperOnColumnResize","_applyLockedContainersWidth","_syncLockedContentHeight","_syncLockedHeaderHeight","_updateStickyColumns","_resizable","columnStart","isMobile","Resizable","handle","hint","location","rtlMultiplier","currentWidth","resizeend","newWidth","oldWidth","_addLockedRowResizing","_getMinRowHeight","minHeight","currentMinHeight","_cacheRowHeight","_cachedRowsHeight","_clearCachedRowsHeight","_mapCachedRowsHeight","input","ds","output","_rowResizerDblClick","newHeight","resizer","rowResizer","oldHeight","rowPair","pairMinHeight","_setupRowResizer","_attachRowResizerEvents","isIn","_getResizerTop","inner","paddingTop","getComputedStyle","_getResizerContainer","_createRowResizer","targetHeight","positionIntarget","offsetY","previousRow","_detachRowResizerEvents","_mapResizedRows","multiSelectionLocked","pairNew","pairMin","r","rowStart","rowResizing","_draggable","kendoDraggable","autoScroll","dragstart","dragend","_reorderable","kendoReorderable","draggable","dropFilter","dragOverContainers","lockable","inSameContainer","sourceParent","targetParent","_isLocked","change","oldIndex","reorderColumn","_reorderHeader","destPosition","sourceLockedColumnsCount","lockedColumnDepth","nonLockedColumnDepth","sourceLockedColumns","targetLockedColumns","_reorderContent","headerCol","footerCol","beforeVisibleColumn","visibleSources","destIndex","colSourceIndex","colDest","lockedCount","columnsArray","_findClosestVisibleColumnIndex","slice","_hasFilterRow","_hasVirtualColumns","reverse","closestVisibleColumn","leafIndex","autoFitColumn","_hasReorderableRows","_hasDragHandleColumn","_draggableRows","_checkBoxSelection","clickMoveClick","holdToDrag","showHintOnHold","preventOsHoldFeatures","clone","elm","innerText","cursorOffset","_reorderableRows","smartPosition","allowIcon","orientation","reorderDropCue","positionDropCue","dropTarget","firstCellLeft","getOffset","transform","externalDraggable","_triggerRowRorder","reorderRows","dataItem","pushMove","rowsLength","targetItem","_rowDropping","autoFitColumns","headerTable","leafCols","contentDiv","thWidth","visibleLocked","notGroupOrHierarchyCol","notGroupOrHierarchyVisibleCell","footerTable","tables","safari","oldColumnWidth","newColumnWidth","lockChanged","destColumn","groupHeaderColumnTemplateColumns","groupHeaderColumnTemplate","sourceColumns","_updateLockedCols","_updateCols","_updateColumnCellIndex","_updateColumnSorters","_renderGroupRows","_updateTablesWidth","_updateFirstColumnClass","lockColumn","unstickColumn","unlockColumn","stickColumn","_removeStickyAttributes","_removeStickyStyles","_anyStickyColumns","_updateStickyFilterCells","cellIndex","td","lockedColumnOffset","_modelForContainer","getByUid","_calculateColumnIndex","virtualOffset","useDoubleTapEditing","editContainer","_editContainer","_mousedownOnEditCell","supportDoubleTap","fastTap","isLockedCell","has","end","closeCell","_scrollVirtualWrapper","shouldCloseCell","_virtualColScroll","_belongsToGrid","_isVirtualInlineEditable","stopPropagation","_confirmation","model","isColumnEditable","_attachModelChange","_shouldClearEditableState","_clearEditableState","kendoEditable","fields","skipFocus","_isVirtualIncellEditable","_editableState","adjustRowHeight","_relatedRow","_syncLockedScroll","_adjustLockedHorizontalScrollBar","touchScroller","_adjustRowsHeight","table1","table2","diff","lockedHeigth","tableHeigth","syncTableHeight","_syncLockedFooterHeight","editView","_editCancelClickHandler","_editUpdateClickHandler","_detachModelChange","_destroyEditView","_editableIsClosing","close","_confirmDialog","purge","navigate","_modelChangeHandler","_modelChange","isCancel","dirtyFields","_displayCell","ns","storage","settings","Template","templateSettings","tmpl","template","_cellTmpl","_removeRow","schema","cancelRow","_removeGroupIfEmpty","idField","sync","_createPopupEditor","_createInlineEditor","_editCancelClick","_editUpdateClick","saveRow","_setCurrent","focusTable","_editFields","updateText","cancelText","updateIconClass","cancelIconClass","tempCommand","buttonsHTML","editMenuGuid","unescape","getCommand","_createButton","kendoWindow","modal","userTriggered","clearContainer","Form","buttonsTemplate","formData","_openPopUpEditor","windowEditor","windowOptions","_editAnimation","center","open","Editable","cancelChanges","_displayRow","valid","deferred","Deferred","reject","promise","resolve","related","newRow","nextRow","isSelected","isAlt","replaceWith","_showMessage","Confirm","preventScroll","closable","okText","done","fail","confirmDialog","confirm","_shouldMapHights","_isVirtualEditable","_virtualPageToTop","saveChanges","createAt","view","createAtBottom","toLowerCase","virtualEditable","serverPaging","_removeCurrent","_virtualAddRow","insert","_editModel","_firstEditableColumnIndex","_virtualAddRowAtBottom","_virtualAddRowAtTop","at","_virtualPageToBottom","_virtualPage","_clickAdd","_clickCancel","_clickExcel","_clickPdf","_pdfInitialized","_clickSave","_searchInput","_searchTimeOut","searchFields","expression","filters","logic","endless","_endlessPageSize","_pushExpression","_pasteToolbarDropDown","kendoDropDownList","dataTextField","dataValueField","_allowFilterPaste","isServerFiltering","serverFiltering","defaultOperators","string","number","date","enums","boolean","operator","modelInfo","reader","fieldInfo","parseFn","parse","_createClickHandler","_addClickHandler","_cancelClickHandler","_saveClickHandler","_excelClickHandler","_pdfClickHandler","_serachHandler","_attachToolbarClicks","prependTo","_processItems","kendoToolBar","navigateOnTab","tools","itemsCollectionHasSpacer","searchText","_processAttr","keyValue","replaceAll","attributeClassMatch","renderButton","_hasFooters","groupRow","collapseGroup","expandGroup","_attachGroupable","draggables","enabled","chrome","Groupable","groupContainer","draggableElements","allowDrag","enableContextMenu","removeGroup","_showUngroupedColumn","_hideGroupedColumns","_resetEndless","_addGroupableOptionsToHeader","colID","hideOnGroup","showColumn","hideColumn","_skip","_pageSize","_take","headerCell","columnOptions","columnFieldMap","headerCells","_headerCells","kendoGroupable","_removeGroupableOptionsFromHeader","removeData","_continuousItems","lockedItems","nonLockedItems","multi","notString","checkboxSelection","multiple","aria","toggleable","dragToSelect","changing","originalEvent","selectedValues","_persistSelectedRows","_uncheckCheckBoxes","_checkRows","_toggleHeaderCheckState","_calculateAggregatesForSelected","cellAggregates","_cellAggregates","useAllItems","relatedTarget","continuousItems","ignoreOverlapped","addIdToRanges","triggerChange","lastSelection","eventObject","keyCode","SPACEBAR","shiftKey","_deselectCheckRows","clear","_lastActive","LEFT","RIGHT","UP","DOWN","selectRange","_firstSelectee","toCompare","compareElements","_pasteReplaceHandler","plain","currentRowUid","currentField","uids","f","nextAll","_executePaste","_pasteInsertHandler","dataItemIndex","selectedUids","_getSelectedRowUids","selectedColumnFields","_getSelectedColumnFields","changedItems","startingIndex","c","set","dirty","_pasteKeyboardHandler","rowUid","clipBoardData","clipboardData","operation","getData","trimEnd","_currentRowIndex","_restoreCurrent","stopImmediatePropagation","tableClick","areaClipBoard","getTSV","includeHeaders","_createAreaClipBoard","execCommand","Event","metaKey","getSelection","toString","createRange","opacity","selected","delimeter","hasLockedCols","cellsOffset","lockedCols","inLockedArea","cellText","rowsOffset","getTitle","headerIndex","findIndex","_anyColumnHasMediaQuery","_setColumnsMediaVisibility","_attachColumnMediaResizeHandler","_columnsWithMediaQuery","_columnMediaResizeHandler","_onColumnMediaResize","_setContentMediaWidth","_setColumnMediaVisibility","_showColumnByMedia","_hideColumnByMedia","initiallyHidden","headerColumns","headerColgroup","headerColumnsCount","visibleHeaderColumnsCount","hiddenHeaderColumnsCount","totalHeaderWidth","currentHeaderWidth","colgroupChild","columnStyleWidth","hideMinScreenCols","screenWidth","innerWidth","screen","_iterateMinScreenCols","any","_setStickyColumns","filterCells","stickyStyle","updateStyles","visibleStickyColumns","stickyWidths","_calculateStickyWidths","_setStickyClassAttributes","_setStickyStyleAttributes","_setStickyStyles","initialLeftWidth","initialRightWidth","nextColumnLeft","nextColumnRight","fill","_sumColumnWidth","masterIndex","stickyLeft","stickyRight","childCols","childStickyWidths","cellClassRegExp","headerClassRegExp","footerClassRegExp","headerClassNoBorderRegExp","leafsCols","_getColumnHeader","groupHeaderColumnTemplateClass","_sumCurrentWidths","getSelectedData","selectedRanges","selectedRangeNames","selectedSingleItems","_mapSelectionToData","getSelectedDataByKeys","selectedKeyNames","columnMapHandler","get","ooxml","exporter","ExcelExporter","book","sheets","autoWidth","freezePane","exportData","sortHandler","exportDataSort","isExcelExportableColumn","_addRangeSelectionRows","_addSingleSelectionRows","workbook","Workbook","skipCustomHeight","toDataURLAsync","dataURI","saveAs","fileName","proxyURL","forceProxy","_setExporterColumns","_createExportRows","_rows","_dataRows","_prepareColumn","columnsFilter","ignoreOffset","curr","isRowSelection","nodeName","fieldAttr","indexOffset","_relatedCell","_parseSelectableAggregatesOptions","sum","average","earliest","latest","isTrue","isFalse","selectedData","cellsLength","columnFields","isCellSelection","numberAggregates","dateAggregates","booleanAggregates","$cell","hasCheckbox","hasWrappedCheckbox","Date","checked","prop","rangeSelectedAttr","modelId","allRows","selectedViewIds","ids","_updateCurrentAttr","nextId","descId","headerId","_current","_scrollCurrent","tableContainer","isInLockedContainer","isInContent","scrollableContainer","addBack","_rowVirtualIndex","preventTrigger","_filterFocusable","siblings","colspan","_virtualCellIndex","_lastCellIndex","_updateSelctCheckbox","nextCheckbox","focus","elementToLowercase","tagName","isHorizontal","elementOffsetDir","containerOffsetDir","abs","offsetLeft","bottomDistance","firefoxCorrection","edge","dataTables","headerTables","_tableFocus","_tableBlur","_tableKeyDown","_filterFocus","_findCellIndex","startIndex","reversed","_scrollToColumn","HOME","END","requestInProgress","canHandle","isDefaultPrevented","altKey","handled","F10","_focusToolbar","_moveUp","_moveDown","_moveRight","_moveLeft","PAGEDOWN","_handlePageDown","PAGEUP","_handlePageUp","_handleHome","_handleEnd","_handleSpaceKey","ENTER","F2","_handleEnterKey","ESC","_handleEscKey","TAB","_handleTabKey","focusable","currentTable","collapseRow","_moveColumn","_prevHorizontalCell","_tabNext","_horizontalContainer","expandRow","_nextHorizontalCell","_prevVerticalCell","_verticalContainer","_nextVerticalCell","_findVisibleCell","isLeft","ctrl","rowContainer","isInLockedTable","isInBody","filterFocusable","_handleEditing","active","isInCell","blur","_toggleCurrent","descriptors","aggregates","_canDrag","link","originalIndex","cellToFocus","_currentDataIndex","lockedColumnsCount","$newFocus","hiddenCount","prevUntil","nextCell","originalRow","up","step","back","switchRow","isEdited","isIE","_initMobile","groupsContextMenu","head","mainOptions","_action","_buildStates","showOn","isEditable","isSelectable","isSortable","isRowReorderable","isGroupable","alwaysDisabled","hasSelection","isSorted","canMoveGroupPrev","canMoveGroupNext","commandOptions","_createPane","Pane","viewEngine","viewOptions","renderOnInit","wrapInSections","detachOnHide","detachOnDestroy","_scrollable","asLowerString","parseVirtualSettings","insertBefore","_createVirtualScrollable","_scrollLeft","isScrollingLeft","originalPageSize","_endlessFetchInProgress","_skipRerenderItemsCount","_cacheEditableState","_restoreEditableState","movable","one","_averageRowHeight","scroll","_focusEditable","loadStart","_progress","loadEnd","_onVirtualPaging","_isVirtualPopupEditable","editableState","editedModel","inlineMode","incellMode","virtualColumns","_getByUid","editedField","_canFocusEditable","isElementVisibleInWrapper","widget","widgetInstance","_renderNoRecordsContent","noRecordsElement","_setContentWidth","expander","hiddenDivClass","hiddenDiv","isNaN","footerWrap","contentWidth","nonLockedCols","nonLockedColsWidth","initialHeight","scrollableHeight","itemsCount","_rowHeight","_sum","_measures","currentRowHeight","_requestStart","_error","relatedRow","selectableRow","childCells","originalCells","tmpResult","pagerWrap","_groupPaging","_togglePagerVisibility","_wrapFooter","_appendLockedColumnFooter","footerRow","_appendCols","menuOptions","autoSize","clearAllFilters","columnsExpanderOptions","expanded","animation","hideExpanderIndicator","hideAutoSizeColumn","owner","closeCallback","componentType","kendoColumnMenu","_columnMenu","hasMultiColumnHeaders","hasLockableColumns","hasStickableColumns","stickable","initCallback","openCallback","stickCallback","unstickCallback","filterHandler","forceUnique","checkSource","stick","unstick","filtering","_hasFilterMenu","_filterable","filterInit","filterOpen","columnFilterable","kendoFilterMultiCheck","kendoFilterMenu","_filterRow","rowheader","_updateHeader","suggestDataSource","operators","customDataSource","cellOptions","delay","inputWidth","suggestionOperator","minLength","showOperators","kendoFilterCell","_sortable","sorterInstance","kendoColumnSorter","draggableColumns","initialColumns","len","normalizeHeaderCells","_updateColumnIDs","_checkboxClick","_headerCheckboxClick","_foreignKeyBindings","_fetchForeignKeyValues","_hasBoundForeignKey","checkBox","isSelecting","_tmpl","alt","skipGroupCells","classAttribute","compiledAttributes","paramName","rowTemplateFunc","getter","rowTemplateResult","dirtyCellTemplate","_dirtyCellTemplate","columnAttributes","colSpanAttributes","charAt","_headerCellText","headerTemplate","_dirtyIndicatorTemplate","useWithBlock","fieldValue","_virtualCols","considerNext","widths","sumOfWidths","colsToRender","firstColspan","lastColspan","hiddenColumns","widthOfHiddenColumns","virtualCols","columnLeafs","columnsLocked","groupHeaderColumnTemplateLockedColumns","groupHeaderColumnTemplateNonLockedColumns","_detailTmpl","_footerTmpl","g","_groupHeaderTmpl","lockedGroupHeaderColumnTemplate","_noRecordsTmpl","scrollableNoGridHeightStyles","resultTemplate","currentCustomTemplate","templateName","rowClass","scope","fieldsMap","_emptyAggregates","headerTemplateIndex","resultHtml","groupCellBuilder","groupCellLockedContentBuilder","stickyAttributes","templateFunctionStorage","templateFunctionCount","hasFiltering","columnsWithoutFiltering","_toggleDetails","omitAnimation","detailRow","expanding","masterRow","masterRowIndex","ariaLabelText","ariaExpandText","detailCell","toggle","correctIdx","classesRegEx","sectionRowIndex","_createHeaderCells","currentTh","isGroupedBy","outerHTML","_appendLockedColumnContent","spanIdx","skipHiddenCount","colOffset","detach","lockedCells","_appendLockedColumnHeader","filtercellCells","hasFilterRow","filterCellOffset","leafColumnsCount","removeRowSpanValue","syncHeight","hasTHead","headerContent","_updateHeadersAttr","_prepareColumns","filterRow","existingFilterRow","hasLockedColumns","_retrieveFirstColumn","parentRow","childRow","totalColSpan","_updateHeaderCols","_autoColumns","toJSON","_setRowCachedHeight","$row","cachedHeight","_rowsHtml","cachedHeights","_groupData","skipFooter","firstColumn","footerDefaults","_groupAggregatesDefaultObject","groupItems","headerData","footerData","subgroupsCount","_groupRowHtml","groupHeaderBuilder","skipColspan","skipLastGroup","isLockedTable","groupData","firstVisibleColumnGroupHeaderTemplate","groupHeaderTemplate","currentItems","_groupsState","isNew","excludeHeader","templateColspan","groupHtmlBuilder","_skippedGroups","shift","groupToCollapse","footerCount","showFooter","relatedGroup","groupCountAfterCollapse","groupUid","groupObject","_getGroupByUid","currentGroupCount","_calculateGroupsTotal","_serverGroupsTotal","_currentRangeStart","toHide","_groupToCollapse","footersVisibility","groupsCount","groupCountAfterExpand","groupCount","toggleVisibility","_firstDataItem","grouped","headerCellIndex","_columnVisibilitySetter","_setParentsVisibility","_updateContentWidth","predicate","p","originalColumn","columnLeafIndex","_buildSkeleton","loaderHTML","columnsCount","skeleton","progress","_resize","force","_isActiveInTable","contentScrollLeft","cachedItemsToSkip","isCurrentInHeader","_renderContent","_renderLockedContent","contentResized","resetTouchEvents","_restoreSelection","selectedRows","dataItemKey","vc","_cleanupDetailItems","endlessAppend","flatViewLength","flatView","groupRowLockedContentBuilder","groupRowBuilder","groupRowBuilderFunc","groupHeaderData","prevElement","newGroupRowElement","firstColumnGroupData","alwaysVisible","rows2","containers","containersLength","heights","offsetHeight1","offsetHeight2","row1","row2","direct","focusElement","isInputElement","isHeader","isInput","activeEl","halfHeight","includeAdditionalData","backslashEscapeQuotes","exportable","ExcelMixin","PDFMixin","_drawPDF_autoPageBreak","allPages","origBody","cont","toggleUnexportableColumns","paddingRight","_initPDFProgress","startingPage","draw","_destructive","pageNumber","pageNum","drawing","drawDOM","always","err","renderPage","restore","visibleInExport","visibleInExportOnly","_toggledDuringExport","_drawPDF","paperSize","doc","Group","exportPage","_drawPDFShadow","avoidLinks","loading","pb","kendoProgressBar","chunkCount","plugin","kendo$1"],"sources":["kendo.grid.js"],"mappings":"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","sourcesContent":["import './kendo.data.js';\nimport './kendo.columnsorter.js';\nimport './kendo.editable.js';\nimport './kendo.window.js';\nimport './kendo.filtermenu.js';\nimport './kendo.filtercell.js';\nimport './kendo.columnmenu.js';\nimport './kendo.groupable.js';\nimport './kendo.pager.js';\nimport './kendo.selectable.js';\nimport './kendo.sortable.js';\nimport './kendo.reorderable.js';\nimport './kendo.resizable.js';\nimport './kendo.ooxml.js';\nimport './kendo.excel.js';\nimport './kendo.pane.js';\nimport './kendo.progressbar.js';\nimport './kendo.pdf.js';\nimport './kendo.dialog.js';\nimport './kendo.switch.js';\nimport './kendo.html.button.js';\nimport './kendo.textbox.js';\nimport './kendo.form.js';\nimport './kendo.toolbar.js';\nimport './kendo.icons.js';\nimport './kendo.menu.js';\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        ContextMenu = ui.ContextMenu,\n        extend = $.extend,\n        encode = kendo.htmlEncode;\n\n    var ACTION = \"action\";\n\n    var GridContextMenu = ContextMenu.extend({\n        init: function(element, options) {\n            var that = this;\n\n            ContextMenu.fn.init.call(that, element, options);\n\n            that._overrideTemplates();\n            that._extendItems();\n\n            that.bind(\"select\", that._onSelect.bind(that));\n            that.bind(\"open\", that._onOpen.bind(that));\n        },\n\n        _overrideTemplates: function() {\n            this.templates.sprite = ({ icon, spriteCssClass }) => `${(icon || spriteCssClass) ? kendo.ui.icon({ icon: encode(icon || \"\"), iconClass: encode(spriteCssClass || \"\") }) : ''}`;\n        },\n\n        defaultItems: {\n            \"separator\": { name: \"separator\", separator: true },\n            \"create\": { name: \"create\", text: \"Add\", icon: \"plus\", command: \"AddCommand\", rules: \"isEditable\" },\n            \"edit\": { name: \"edit\", text: \"Edit\", icon: \"pencil\", command: \"EditCommand\", rules: \"isEditable\" },\n            \"destroy\": { name: \"destroy\", text: \"Delete\", icon: \"trash\", command: \"DeleteCommand\", rules: \"isEditable\" },\n            \"select\": { name: \"select\", text: \"Select\", icon: \"table-body\", rules: \"isSelectable\", items: [\n                { name: \"selectRow\", text: \"Row\", icon: \"table-row-groups\", command: \"SelectRowCommand\" },\n                { name: \"selectAllRows\", text: \"All rows\", icon: \"grid\", command: \"SelectAllRowsCommand\" },\n                { name: \"clearSelection\", text: \"Clear selection\", icon: \"table-unmerge\", softRules: \"hasSelection\", command: \"ClearSelectionCommand\" },\n            ] },\n            \"copySelection\": { name: \"copySelection\", text: \"Copy selection\", icon: \"page-header-section\", rules: \"isSelectable\", softRules: \"hasSelection\", command: \"CopySelectionCommand\", options: \"withHeaders\" },\n            \"copySelectionNoHeaders\": { name: \"copySelectionNoHeaders\", text: \"Copy selection (No Headers)\", icon: \"file-txt\", rules: \"isSelectable\", softRules: \"hasSelection\", command: \"CopySelectionCommand\" },\n            \"paste\": { name: \"paste\", text: \"Paste (use CTRL/⌘ + V)\", rules: \"allowPaste\", softRules: \"alwaysDisabled\", icon: \"clipboard\" },\n            \"reorderRow\": { name: \"reorderRow\", text: \"Reorder row\", icon: \"caret-alt-expand\", rules: \"isRowReorderable\", softRules: \"isSorted\", items: [\n                { name: \"reorderRowUp\", text: \"Up\", icon: \"caret-alt-up\", command: \"ReorderRowCommand\", options: \"dir:up\" },\n                { name: \"reorderRowDown\", text: \"Down\", icon: \"caret-alt-down\", command: \"ReorderRowCommand\", options: \"dir:down\" },\n                { name: \"reorderRowTop\", text: \"Top\", icon: \"caret-alt-to-top\", command: \"ReorderRowCommand\", options: \"dir:top\" },\n                { name: \"reorderRowBottom\", text: \"Bottom\", icon: \"caret-alt-to-bottom\", command: \"ReorderRowCommand\", options: \"dir:bottom\" }\n            ] },\n            \"exportPDF\": { name: \"exportPDF\", text: \"Export to PDF\", icon: \"file-pdf\", command: \"ExportPDFCommand\" },\n            \"exportExcel\": { name: \"exportExcel\", text: \"Export to Excel\", icon: \"file-excel\", items: [\n                { name: \"exportToExcelAll\", text: \"All\", command: \"ExportExcelCommand\" },\n                { name: \"exportToExcelSelection\", text: \"Selection\", command: \"ExportExcelCommand\", softRules: \"hasSelection\", options: \"selection,withHeaders\" },\n                { name: \"exportToExcelSelectionNoHeaders\", text: \"Selection (No Headers)\", softRules: \"hasSelection\", command: \"ExportExcelCommand\", options: \"selection\" }\n            ] },\n            \"sortAsc\": { name: \"sortAsc\", text: \"Sort Ascending\", icon: \"sort-asc-small\", rules: \"isSortable\", command: \"SortCommand\", options: \"dir:asc\" },\n            \"sortDesc\": { name: \"sortDesc\", text: \"Sort Descending\", icon: \"sort-desc-small\", rules: \"isSortable\", command: \"SortCommand\", options: \"dir:desc\" },\n            \"moveGroupPrevious\": { name: \"moveGroupPrevious\", text: \"Move previous\", icon: \"arrow-left\", rules: \"isGroupable\", softRules: \"canMoveGroupPrev\", command: \"MoveGroupCommand\", options: \"dir:prev\" },\n            \"moveGroupNext\": { name: \"moveGroupNext\", text: \"Move next\", icon: \"arrow-right\", rules: \"isGroupable\", softRules: \"canMoveGroupNext\", command: \"MoveGroupCommand\", options: \"dir:next\" }\n            // \"filter\": { name: \"filter\", text: \"Filter\", icon: \"filter\", attr: { [kendo.attr(\"is-filter\")]: true }, items: [\n            //     { content: '<div class=\"k-columnmenu-item-wrapper\"><div class=\"k-columnmenu-item-content k-column-menu-filter\"><div class=\"k-filterable\"></div></div></div>' }\n            // ] },\n        },\n\n        events: ContextMenu.fn.events.concat([\n            ACTION\n        ]),\n\n        _onSelect: function(ev) {\n            var command = $(ev.item).data(\"command\");\n            var options = $(ev.item).data(\"options\");\n                options = options ? options.split(\",\")\n                .map(val => {\n                    if (val.indexOf(\":\") > -1) {\n                        var [key, val] = val.split(\":\");\n                        return { [key || \"_\"]: val };\n                    }\n\n                    return { [val]: true };\n                })\n                .reduce((acc, v) => Object.assign(acc, v), {}) : {};\n\n            var target = $(ev.target);\n\n            if (!command) {\n                return;\n            }\n\n            this.action({\n                command: command,\n                options: Object.assign(options, { target: target })\n            });\n        },\n\n        _onOpen: function(ev) {\n            var menu = ev.sender,\n                items = menu.options.items,\n                elTarget = $(ev.event ? ev.event.target : null);\n\n            if ((!items && $.isEmptyObject(this.defaultItems)) || elTarget.closest(\".k-grid-column-menu\").length) {\n                ev.preventDefault();\n                return;\n            }\n\n            this._toggleSeparatorVisibility();\n\n            menu.element.find(`[${kendo.attr('soft-rules')}]`).each((i, item) => {\n                var rules = $(item).attr(kendo.attr('soft-rules')).split(\";\");\n                menu.enable(item, this._validateSoftRules(rules, elTarget));\n            });\n        },\n\n        _toggleSeparatorVisibility: function() {\n            var that = this,\n                items = that.element.find(\".k-item.k-separator\").filter((i, item) => {\n                    var prev = $(item).prev(\".k-item:not(.k-separator)\");\n                    var next = $(item).next(\".k-item:not(.k-separator)\");\n\n                    return !(prev.length && next.length);\n                });\n\n            items.hide();\n        },\n\n        _extendItems: function() {\n            var that = this,\n                items = that.options.items,\n                item, isBuiltInTool;\n\n            if (items && items.length) {\n                for (var i = 0; i < items.length; i++) {\n                    item = items[i];\n                    isBuiltInTool = $.isPlainObject(item) && Object.keys(item).length === 1 && item.name;\n\n                    if (isBuiltInTool) {\n                        item = item.name;\n                    }\n\n                    if ($.isPlainObject(item)) {\n                        that._append(item);\n                    } else if (that.defaultItems[item]) {\n                        item = that.defaultItems[item];\n                        that._append(item);\n                    } else if (typeof(item) === \"string\") {\n                        item = { name: item, text: item, spriteCssClass: item, command: item + \"Command\" };\n                        that._append(item);\n                    }\n                }\n            } else {\n                for (var key in that.defaultItems) {\n                    item = that.defaultItems[key];\n                    that._append(item);\n                }\n            }\n        },\n\n        _extendItem: function(item) {\n            var that = this,\n                messages = that.options.messages,\n                attr = item.attr || {};\n\n            if (item.command) {\n                attr[kendo.attr(\"command\")] = item.command;\n            }\n\n            if (item.options) {\n                attr[kendo.attr(\"options\")] = item.options;\n            }\n\n            if (item.softRules) {\n                attr[kendo.attr(\"soft-rules\")] = item.softRules;\n            }\n\n            if (item.items) {\n                for (var j = 0; j < item.items.length; j++) {\n                    item.items.forEach(subItem => {\n                        that._extendItem(subItem);\n                    });\n                }\n            }\n\n            extend(item, {\n                text: messages.commands[item.name],\n                icon: item.icon || \"\",\n                spriteCssClass: item.spriteCssClass || \"\",\n                attr: attr,\n                uid: kendo.guid()\n            });\n        },\n\n        _validateSoftRules: function(rules, target) {\n            var that = this;\n\n            if (!rules || !(rules && rules.length)) {\n                return true;\n            }\n\n            for (var i = 0; i < rules.length; i++) {\n                if (!this._readState(rules[i], target)) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        _validateRules: function(tool) {\n            var that = this,\n                rules = tool.rules ? tool.rules.split(\";\") : [];\n\n            if (!rules.length) {\n                return true;\n            }\n\n            for (var i = 0; i < rules.length; i++) {\n                if (!this._readState(rules[i])) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        _readState: function(state, target) {\n            var that = this,\n                states = that.options.states;\n\n            if (kendo.isFunction(states[state])) {\n                return states[state](target);\n            } else {\n                return states[state];\n            }\n        },\n\n        _append: function(item) {\n            var that = this;\n\n            that._extendItem(item);\n\n            if (that._validateRules(item)) {\n                that.append(item);\n            }\n        },\n\n        action: function(args) {\n            this.trigger(ACTION, args);\n        }\n    });\n\n    kendo.ui.grid = kendo.ui.grid || {};\n\n    extend(kendo.ui.grid, {\n        ContextMenu: GridContextMenu\n    });\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        extend = $.extend,\n        Class = kendo.Class;\n\n    var Command = Class.extend({\n        init: function(options) {\n            this.options = options;\n            this.grid = options.grid;\n        }\n    });\n\n    var MoveGroupCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                groupable = grid.groupable,\n                options = that.options,\n                target = options.target.closest(\".k-chip\"),\n                method = options.dir === \"next\" ? \"after\" : \"before\",\n                position = options.dir === \"next\" ? target.next() : target.prev();\n\n            position[method](target);\n            groupable._change();\n        },\n    });\n\n    var SortCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                dataSource = grid.dataSource,\n                sort = dataSource.sort() || [],\n                options = that.options,\n                dir = options.dir,\n                field = grid._getCellField(options.target),\n                multipleMode = grid.options.sortable.mode && grid.options.sortable.mode === \"multiple\",\n                compare = grid.options.compare,\n                length, idx;\n\n            if (multipleMode) {\n                for (idx = 0, length = sort.length; idx < length; idx++) {\n                    if (sort[idx].field === field) {\n                        sort.splice(idx, 1);\n                        break;\n                    }\n                }\n                sort.push({ field: field, dir: dir, compare: compare });\n            } else {\n                sort = [{ field: field, dir: dir, compare: compare }];\n            }\n\n            dataSource.sort(sort);\n        },\n    });\n\n    var AddCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid;\n\n            grid.addRow();\n        }\n    });\n\n    var EditCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                inCellMode = grid._editMode() === \"incell\",\n                target = inCellMode ? that.options.target : that.options.target.closest(\"tr\");\n\n            if (inCellMode) {\n                grid.editCell(target);\n            } else {\n                grid.editRow(target);\n            }\n        }\n    });\n\n    var DeleteCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                target = that.options.target.closest(\"tr\");\n\n            grid.removeRow(target);\n        }\n    });\n\n    var CopySelectionCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                withHeaders = that.options.withHeaders;\n\n            grid.copySelectionToClipboard(withHeaders);\n        }\n    });\n\n    var SelectRowCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                selectMode = kendo.ui.Selectable.parseOptions(grid.options.selectable),\n                target = that.options.target.closest(\"tr\");\n\n            grid.select(selectMode.cell ? target.find('td') : target);\n        }\n    });\n\n    var SelectAllRowsCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                selectMode = kendo.ui.Selectable.parseOptions(grid.options.selectable),\n                rows = grid.items();\n\n            grid.select(selectMode.cell ? rows.find('td') : rows);\n        }\n    });\n\n    var ClearSelectionCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid;\n\n            grid.clearSelection();\n        }\n    });\n\n    var ReorderRowCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                dir = that.options.dir,\n                target = that.options.target.closest(\"tr\"),\n                index = target.index(),\n                newIndex;\n\n            switch (dir) {\n                case \"up\":\n                    newIndex = index - 1;\n                    break;\n                case \"down\":\n                    newIndex = index + 2;\n                    break;\n                case \"top\":\n                    newIndex = 0;\n                    break;\n                case \"bottom\":\n                    newIndex = grid.items().length;\n                    break;\n            }\n\n            grid.reorderRowTo(target, newIndex);\n        }\n    });\n\n    var ExportPDFCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid;\n\n            grid.saveAsPDF();\n        }\n    });\n\n    var ExportExcelCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                selection = that.options.selection,\n                withHeaders = that.options.withHeaders,\n                grid = that.grid;\n\n            if (selection) {\n                grid.exportSelectedToExcel(withHeaders);\n            } else {\n                grid.saveAsExcel();\n            }\n        }\n    });\n\n    kendo.ui.grid = kendo.ui.grid || {};\n\n    extend(kendo.ui.grid, {\n        GridCommand: Command,\n        commands: {\n            SortCommand: SortCommand,\n            AddCommand: AddCommand,\n            EditCommand: EditCommand,\n            DeleteCommand: DeleteCommand,\n            CopySelectionCommand: CopySelectionCommand,\n            SelectRowCommand: SelectRowCommand,\n            SelectAllRowsCommand: SelectAllRowsCommand,\n            ClearSelectionCommand: ClearSelectionCommand,\n            ReorderRowCommand: ReorderRowCommand,\n            ExportPDFCommand: ExportPDFCommand,\n            ExportExcelCommand: ExportExcelCommand,\n            MoveGroupCommand: MoveGroupCommand\n        }\n    });\n})(window.kendo.jQuery);\n\nvar __meta__ = {\n    id: \"grid\",\n    name: \"Grid\",\n    category: \"web\",\n    description: \"The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.\",\n    depends: [ \"data\", \"columnsorter\", \"sortable\", \"toolbar\", \"html.button\", \"icons\", \"menu\" ],\n    features: [ {\n        id: \"grid-editing\",\n        name: \"Editing\",\n        description: \"Support for record editing\",\n        depends: [ \"editable\", \"window\", \"textbox\", \"form\" ]\n    }, {\n        id: \"grid-filtering\",\n        name: \"Filtering\",\n        description: \"Support for record filtering\",\n        depends: [ \"filtermenu\" ]\n    }, {\n        id: \"grid-columnmenu\",\n        name: \"Column menu\",\n        description: \"Support for header column menu\",\n        depends: [ \"columnmenu\" ]\n    }, {\n        id: \"grid-grouping\",\n        name: \"Grouping\",\n        description: \"Support for grid grouping\",\n        depends: [ \"groupable\" ]\n    }, {\n        id: \"grid-filtercell\",\n        name: \"Row filter\",\n        description: \"Support for grid header filtering\",\n        depends: [ \"filtercell\" ]\n    }, {\n        id: \"grid-paging\",\n        name: \"Paging\",\n        description: \"Support for grid paging\",\n        depends: [ \"pager\" ]\n    }, {\n        id: \"grid-selection\",\n        name: \"Selection\",\n        description: \"Support for row selection\",\n        depends: [ \"selectable\" ]\n    }, {\n        id: \"grid-column-reorder\",\n        name: \"Column reordering\",\n        description: \"Support for column reordering\",\n        depends: [ \"reorderable\" ]\n    }, {\n        id: \"grid-column-resize\",\n        name: \"Column resizing\",\n        description: \"Support for column resizing\",\n        depends: [ \"resizable\" ]\n    }, {\n        id: \"grid-mobile\",\n        name: \"Grid adaptive rendering\",\n        description: \"Support for adaptive rendering\",\n        depends: [ \"dialog\", \"pane\", \"switch\" ]\n    }, {\n        id: \"grid-excel-export\",\n        name: \"Excel export\",\n        description: \"Export grid data as Excel spreadsheet\",\n        depends: [ \"excel\" ]\n    }, {\n        id: \"grid-pdf-export\",\n        name: \"PDF export\",\n        description: \"Export grid data as PDF\",\n        depends: [ \"pdf\", \"drawing\", \"progressbar\" ]\n    } ]\n};\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        DataSource = kendo.data.DataSource,\n        ObservableObject = kendo.data.ObservableObject,\n        tbodySupportsInnerHtml = kendo.support.tbodyInnerHtml,\n        activeElement = kendo._activeElement,\n        Widget = ui.Widget,\n        outerWidth = kendo._outerWidth,\n        outerHeight = kendo._outerHeight,\n        keys = kendo.keys,\n        getType = kendo.type,\n\n        isPlainObject = $.isPlainObject,\n        extend = $.extend,\n        map = $.map,\n        grep = $.grep,\n        isArray = Array.isArray,\n        inArray = $.inArray,\n        push = Array.prototype.push,\n        isFunction = kendo.isFunction,\n        encode = kendo.htmlEncode,\n        isEmptyObject = $.isEmptyObject,\n        contains = $.contains,\n        math = Math,\n\n        DOT = \".\",\n        PROGRESS = \"progress\",\n        ERROR = \"error\",\n        HIERARCHY_CELL_CLASS = \"k-hierarchy-cell\",\n        DATA_CELL = \":not(.k-group-cell):not([\" + kendo.attr(\"virtual\") + \"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left))):visible\",\n        DATA_CELL_HIDDENINCLUDED = \":not([\" + kendo.attr(\"virtual\") + \"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left)))\",\n        SELECTION_CELL_SELECTOR = \"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)\",\n        NAVROW = \"tr:not(.k-footer-template):visible\",\n        NAVCELL = \":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible\",\n        ITEMROW = \"tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible\",\n        COLGROUP = \"col:not(.k-group-col, .k-hierarchy-col)\",\n        HEADERCELLS = \"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)\",\n        CARET_ALT_DOWN = \"a[class*='-i-caret-alt-down']\",\n        CARET_ALT_RIGHT = \"a[class*='-i-caret-alt-right']\",\n        CARET_ALT_RIGHT_CACHE = CARET_ALT_RIGHT,\n        CARET_ALT_LEFT = \"a[class*='-i-caret-alt-left']\",\n        WRAPPER = \".k-grid\",\n        NS = \".kendoGrid\",\n        CONTENTRLOCKEDCONTAINER = \"k-grid-content-locked\",\n        GROUPCELLCLASS = \"k-group-cell\",\n\n        EDIT = \"edit\",\n        BEFOREEDIT = \"beforeEdit\",\n        SAVE = \"save\",\n        REMOVE = \"remove\",\n        DETAILINIT = \"detailInit\",\n        FILTERMENUINIT = \"filterMenuInit\",\n        COLUMNMENUINIT = \"columnMenuInit\",\n        FILTERMENUOPEN = \"filterMenuOpen\",\n        COLUMNMENUOPEN = \"columnMenuOpen\",\n        CELLCLOSE = \"cellClose\",\n        CHANGING = \"changing\",\n        CHANGE = \"change\",\n        COLUMNHIDE = \"columnHide\",\n        COLUMNSHOW = \"columnShow\",\n        SAVECHANGES = \"saveChanges\",\n        DATABOUND = \"dataBound\",\n        DETAILEXPAND = \"detailExpand\",\n        DETAILCOLLAPSE = \"detailCollapse\",\n        ITEM_CHANGE = \"itemchange\",\n        PAGE = \"page\",\n        PAGING = \"paging\",\n        PASTE = \"paste\",\n        SCROLL = \"scroll\",\n        SYNC = \"sync\",\n        LOAD_START = \"loadStart\",\n        LOAD_END = \"loadEnd\",\n\n        FOCUSED = \"k-focus\",\n        HOVER = \"k-hover\",\n        ACTIVE = \"k-active\",\n        FOCUSABLE = \":kendoFocusable\",\n        SELECTED = \"k-selected\",\n        CHECKBOX = \"k-checkbox\",\n        CHECKBOXINPUT = \"input[data-role='checkbox'].k-select-checkbox.\" + CHECKBOX,\n        NORECORDSCLASS = \"k-grid-norecords\",\n        LINK_CLASS = \"k-link\",\n        ICON_CLASS = \"k-icon\",\n        SVG_ICON_CLASS = \"k-svg-icon\",\n        ORDER_CLASS = \"k-sort-order\",\n        SORTED_CLASS = \"k-sorted\",\n        HEADER_CLASS = \"k-header\",\n        HEADER_COLUMN_MENU_CLASS = \"k-grid-column-menu\",\n        FILTER_MENU_CLASS = \"k-grid-filter-menu\",\n        STICKY_CELL_CLASS = \"k-grid-content-sticky\",\n        STICKY_HEADER_CLASS = \"k-grid-header-sticky\",\n        STICKY_FOOTER_CLASS = \"k-grid-footer-sticky\",\n        STICKY_HEADER_NO_BORDER_CLASS = \"k-grid-no-left-border\",\n        ROW_RESIZER = \"k-row-resizer\",\n        ROW_RESIZER_WRAP = \"k-resizer-wrap\",\n        GROUPING_ROW = \"k-grouping-row\",\n        RESIZE = \"resize\",\n        ROWRESIZE = \"rowResize\",\n        COLUMNRESIZE = \"columnResize\",\n        COLUMNREORDER = \"columnReorder\",\n        COLUMNLOCK = \"columnLock\",\n        COLUMNUNLOCK = \"columnUnlock\",\n        COLUMNSTICK = \"columnStick\",\n        COLUMNUNSTICK = \"columnUnstick\",\n        ROWREORDER = \"rowReorder\",\n        NAVIGATE = \"navigate\",\n        CLICK = \"click\",\n        MOUSEDOWN = \"mousedown\",\n        MOUSEUP = \"mouseup\",\n        MOUSEENTER = \"mouseenter\",\n        MOUSELEAVE = \"mouseleave\",\n        MOUSEMOVE = \"mousemove\",\n        DUBLECLICK = \"dblclick\",\n        HEIGHT = \"height\",\n        WIDTH = \"width\",\n        AUTO = \"auto\",\n        TABINDEX = \"tabIndex\",\n        FUNCTION = \"function\",\n        STRING = \"string\",\n        NUMBER = \"number\",\n        BOTTOM = \"bottom\",\n        CONTAINER_FOR = \"container-for\",\n        FIELD = \"field\",\n        INPUT = \"input\",\n        INCELL = \"incell\",\n        INLINE = \"inline\",\n        UNIQUE_ID = \"uid\",\n        MINCOLSPANVALUE = 1,\n        COLSPAN = \"colSpan\",\n        OVERFLOW = \"overflow\",\n        HIDDEN = \"hidden\",\n        SORT = \"sort\",\n        GROUP_SORT = \"group-sort\",\n        DELETECONFIRM = \"Are you sure you want to delete this record?\",\n        NORECORDS = \"No records available.\",\n        CONFIRMDELETE = \"Delete\",\n        CANCELDELETE = \"Cancel\",\n        COLLAPSE = \"Collapse\",\n        EXPAND = \"Expand\",\n        ID = \"id\",\n        PX = \"px\",\n        TR = \"tr\",\n        TD = \"td\",\n        DIV = \"div\",\n\n        ARIA_LABEL = \"aria-label\",\n        ARIA_OWNS = \"aria-owns\",\n        ARIA_ROWCOUNT = \"aria-rowcount\",\n        ARIA_COLCOUNT = \"aria-colcount\",\n        ARIA_CONTROLS = \"aria-controls\",\n        ARIA_COLINDEX = \"aria-colindex\",\n        ARIA_ROWINDEX = \"aria-rowindex\",\n        ARIA_EXPANDED = \"aria-expanded\",\n        ARIA_CHECKED = \"aria-checked\",\n        ARIA_ACTIVEDESCENDANT = \"aria-activedescendant\",\n        ROLE = \"role\",\n        NONE = \"none\",\n        ROW = \"row\",\n        ROWGROUP = \"rowgroup\",\n        COLUMNHEADER = \"columnheader\",\n        GRIDCELL = \"gridcell\",\n\n        formatRegExp = /(\\}|\\#)/ig,\n        templateHashRegExp = /#/ig,\n        whitespaceRegExp = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n        leftRegExp = new RegExp(\"(\\\\s*left\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n        rightRegExp = new RegExp(\"(\\\\s*right\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n        nonDataCellsRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-group-cell|k-hierarchy-cell)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n        filterRowRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-filter-row)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n        COMMANDBUTTONTMPL = ({ className, attr, text }) => `<button type=\"button\" class=\"${className}\" ${attr}>${text}</button>`,\n        DEFAULTSELECTCOLUMNTMPL = (size, ariaLabel) => `<span class=\"k-checkbox-wrap\"><input tabindex=\"-1\" class=\"k-select-checkbox ${CHECKBOX} ${size} k-rounded-md\" data-role=\"checkbox\" aria-label=\"${ariaLabel}\" aria-checked=\"false\" type=\"checkbox\"></span>`,\n        SELECTCOLUMNTMPL = ({ size }) => DEFAULTSELECTCOLUMNTMPL(size, \"Select row\"),\n        SELECTCOLUMNHEADERTMPL = ({ size }) => DEFAULTSELECTCOLUMNTMPL(size, \"Select all rows\"),\n        DRAGHANDLECOLUMNTMPL = () => kendo.ui.icon(\"reorder\"),\n        DEFAULTHEADERTEMPLATE = ({ text }) => `<span class=\"k-cell-inner\"><span class=\"k-link\"><span class=\"k-column-title\">${text}</span></span></span>`,\n        isRtl = false,\n        browser = kendo.support.browser;\n\n    var isIE11 = browser.msie && browser.version === 11;\n    var isMac = /Mac OS/.test(navigator.userAgent);\n    var classNames = {\n        content: \"k-content\",\n        scrollContainer: \"k-scroll-container\",\n        headerCellInner: \"k-cell-inner\"\n    };\n    var GroupsPager;\n\n    var defaultBodyContextMenu = [\n        \"copySelection\",\n        \"copySelectionNoHeaders\",\n        \"paste\",\n        \"separator\",\n        \"create\",\n        \"edit\",\n        \"destroy\",\n        \"select\",\n        \"separator\",\n        \"reorderRow\",\n        \"exportPDF\",\n        \"exportExcel\",\n        \"separator\"\n    ];\n\n    var defaultHeadContextMenu = [\n        \"sortAsc\",\n        \"sortDesc\",\n        \"separator\"\n    ];\n\n    var defaultGroupsContextMenu = [\n        \"moveGroupPrevious\",\n        \"moveGroupNext\",\n        \"separator\"\n    ];\n\n    if (ui.Pager) {\n        GroupsPager = ui.Pager.extend({\n            init: function(element, options) {\n                ui.Pager.fn.init.call(this, element, extend(true, {}, options));\n                this.dataSource.options.useRanges = true;\n                this.dataSource._omitPrefetch = true;\n            },\n            options: {\n                name: \"GroupsPager\"\n            },\n\n            totalPages: function() {\n                var that = this;\n\n                return Math.ceil((that._collapsedTotal() || 0) / (that.pageSize() || 1));\n            },\n            _collapsedTotal: function() {\n                var dataSource = this.dataSource;\n                return dataSource ? (dataSource.groupsTotal(true) || 0) : 0;\n            }\n        });\n    }\n\n    var VirtualScrollable = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n            that._refreshHandler = that.refresh.bind(that);\n            that.setDataSource(options.dataSource);\n            that.wrap();\n        },\n\n        setDataSource: function(dataSource) {\n            var that = this;\n            if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n            }\n            that.dataSource = dataSource;\n            that.dataSource.bind(CHANGE, that._refreshHandler);\n            that.dataSource.options.useRanges = true;\n            that.dataSource.options.virtual = true;\n        },\n\n        options: {\n            name: \"VirtualScrollable\",\n            itemHeight: $.noop,\n            prefetch: true,\n            maxScrollHeight: 250000\n        },\n\n        events: [\n            PAGING,\n            PAGE,\n            SCROLL,\n            LOAD_START,\n            LOAD_END\n        ],\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that.dataSource.unbind(CHANGE, that._refreshHandler);\n            that.wrapper.add(that.verticalScrollbar).off(NS);\n\n            clearTimeout(that._timeout);\n            if (that._scrollingTimeout) {\n                clearTimeout(that._scrollingTimeout);\n            }\n\n            if (that.drag) {\n                that.drag.destroy();\n                that.drag = null;\n            }\n            that.wrapper = that.element = that.verticalScrollbar = null;\n            that._refreshHandler = null;\n        },\n\n        wrap: function() {\n            var that = this,\n                // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n                scrollbar = kendo.support.scrollbar() + 1,\n                element = that.element,\n                wrapper;\n\n            element.css( {\n                width: AUTO,\n                overflow: \"hidden\"\n            }).css((isRtl ? \"padding-left\" : \"padding-right\"), scrollbar);\n            that.content = element.children().first();\n            wrapper = that.wrapper = that.content.wrap('<div class=\"k-virtual-scrollable-wrap\"/>')\n                                .parent()\n                                .on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n            that._wrapper();\n\n            if (kendo.support.kineticScrollNeeded || kendo.support.touch) {\n                that.wrapper.css(\"touch-action\", NONE);\n                that.drag = new kendo.UserEvents(that.wrapper, {\n                    global: true,\n                    allowSelection: true,\n                    start: function(e) {\n                        e.sender.capture();\n                    },\n                    move: function(e) {\n                        that.verticalScrollbar.scrollTop(that.verticalScrollbar.scrollTop() - e.y.delta);\n                        kendo.scrollLeft(wrapper, kendo.scrollLeft(wrapper) - e.x.delta);\n                        e.preventDefault();\n                    }\n                });\n            }\n\n            that.verticalScrollbar = $('<div class=\"k-scrollbar k-scrollbar-vertical\" />')\n                                        .css({\n                                            width: scrollbar\n                                        }).appendTo(element)\n                                        .on(\"scroll\" + NS, that._scroll.bind(that));\n        },\n\n        _wrapper: function() {\n            var that = this;\n\n            if (isIE11) {\n                //scrolling the virtual scrollbar to the bottom and then\n                //scrolling the horizontal content scrollbar does not fire the \"scroll\" event\n                //seems like a problem in IE 11 only (after version 11.0.9600.18860)\n                //https://github.com/telerik/kendo-ui-core/issues/3779\n                that.wrapper.css({\n                    \"overflow-y\": SCROLL\n                });\n\n                //hide the wrapper behind the virtual scrollbar\n                that.element.css((isRtl ? \"padding-left\" : \"padding-right\"), 0);\n            }\n        },\n\n        _wheelScroll: function(e) {\n            if (e.ctrlKey) {\n                return;\n            }\n\n            var scrollbar = this.verticalScrollbar,\n                scrollTop = scrollbar.scrollTop(),\n                delta = kendo.wheelDeltaY(e);\n\n            if (delta && !(delta > 0 && scrollTop === 0) && !(delta < 0 && scrollTop + scrollbar[0].clientHeight == scrollbar[0].scrollHeight)) {\n                e.preventDefault();\n                this.verticalScrollbar.scrollTop(scrollTop + (-delta));\n            }\n        },\n\n        _scroll: function(e) {\n            var that = this,\n                delayLoading = !that.options.prefetch,\n                scrollTop = e.currentTarget.scrollTop,\n                dataSource = that.dataSource,\n                rowHeight = that.itemHeight,\n                skip = dataSource.skip() || 0,\n                start = that._rangeStart || skip,\n                height = that.element.innerHeight(),\n                isScrollingUp = !!(that._scrollbarTop && that._scrollbarTop > scrollTop),\n                firstItemIndex = math.max(math.floor(scrollTop / rowHeight), 0),\n                lastItemOffset = isScrollingUp ? math.ceil(height / rowHeight) : math.floor(height / rowHeight),\n                lastItemIndex = math.max(firstItemIndex + lastItemOffset, 0);\n\n            if (that._preventScroll) {\n                that._preventScroll = false;\n                return;\n            }\n            that._prevScrollTop = that._scrollTop;\n            that._scrollTop = scrollTop - (start * rowHeight);\n            that._scrollbarTop = scrollTop;\n\n            that._scrolling = delayLoading;\n\n            if (!that._fetch(firstItemIndex, lastItemIndex, isScrollingUp)) {\n                that.wrapper[0].scrollTop = that._scrollTop;\n            }\n\n            that.trigger(SCROLL);\n\n            if (delayLoading) {\n                if (that._scrollingTimeout) {\n                    clearTimeout(that._scrollingTimeout);\n                }\n\n                that._scrollingTimeout = setTimeout(function() {\n                    that._scrolling = false;\n                    that._page(that._rangeStart, that.dataSource.take());\n                }, 100);\n            }\n        },\n\n        scrollToTop: function() {\n            this._scrollTo(0);\n        },\n\n        scrollToBottom: function() {\n            var scrollbar = this.verticalScrollbar;\n            this._scrollTo(scrollbar[0].scrollHeight - scrollbar.height());\n        },\n\n        _scrollWrapperToTop: function() {\n            this.wrapper.scrollTop(0);\n        },\n\n        _scrollWrapperToBottom: function() {\n            this.wrapper.scrollTop(this.wrapper[0].scrollHeight);\n        },\n\n        _scrollWrapperOnColumnResize: function() {\n            var that = this;\n            var wrapper = this.wrapper;\n            var initialScrollTop = wrapper.scrollTop();\n\n            if (wrapper[0].scrollWidth > wrapper[0].clientWidth) {\n                if ((!that._wrapperScrolled && initialScrollTop) || that._isScrolledToBottom()) {\n                    wrapper.scrollTop(initialScrollTop + kendo.support.scrollbar());\n                    that._scrollTop = wrapper.scrollTop();\n                    that._wrapperScrolled = true;\n                }\n            } else if (that._wrapperScrolled) {\n                if (!that._isWrapperScrolledToBottom()) {\n                    wrapper.scrollTop(initialScrollTop - kendo.support.scrollbar());\n                    that._scrollTop = wrapper.scrollTop();\n                }\n\n                that._wrapperScrolled = false;\n            }\n        },\n\n        _scrollTo: function(scrollTop) {\n            var that = this;\n            var scrollbar = that.verticalScrollbar;\n\n            if (scrollbar.scrollTop() !== scrollTop) {\n                that._preventScroll = true;\n            }\n\n            that.wrapper.scrollTop(scrollTop);\n            that._scrollTop = that.wrapper.scrollTop();\n\n            scrollbar.scrollTop(scrollTop);\n            that._scrollbarTop = scrollbar.scrollTop();\n        },\n\n        _isScrolledToTop: function() {\n            return this.verticalScrollbar.scrollTop() === 0;\n        },\n\n        _isScrolledToBottom: function() {\n            var scrollbar = this.verticalScrollbar;\n            var scrollTop = scrollbar.scrollTop();\n\n            return (scrollTop > 0 && scrollTop >= parseInt(scrollbar[0].scrollHeight - scrollbar.height(), 10));\n        },\n\n        _isWrapperScrolledToBottom: function() {\n            var wrapper = this.wrapper;\n\n            return (wrapper.scrollTop() >= parseInt(wrapper[0].scrollHeight - wrapper.height(), 10));\n        },\n\n        itemIndex: function(rowIndex) {\n            var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n\n            return rangeStart + rowIndex;\n        },\n\n        position: function(index) {\n            var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n            var pageSize = this.dataSource.pageSize();\n            var result;\n\n            if (index > rangeStart) {\n                result = index - rangeStart;\n            } else {\n                result = rangeStart - index - 1;\n            }\n\n            return result > pageSize ? pageSize : result;\n        },\n\n        scrollIntoView: function(row) {\n            var container = this.wrapper[0];\n            var containerHeight = container.clientHeight;\n            var containerScroll = !this._isScrolledToBottom() ? (this._scrollTop || container.scrollTop) : container.scrollTop;\n            var elementOffset = row[0].offsetTop;\n            var elementHeight = row[0].offsetHeight;\n\n            if (containerScroll > elementOffset) {\n                this.verticalScrollbar[0].scrollTop -= containerHeight / 2;\n            } else if (elementOffset + elementHeight >= containerScroll + containerHeight) {\n                this.verticalScrollbar[0].scrollTop += containerHeight / 2;\n            }\n        },\n\n        _fetch: function(firstItemIndex, lastItemIndex, scrollingUp) {\n            var that = this,\n                dataSource = that.dataSource,\n                itemHeight = that.itemHeight,\n                take = dataSource.take(),\n                rangeStart = that._rangeStart || dataSource.skip() || 0,\n                currentSkip = math.floor(firstItemIndex / take) * take,\n                fetching = false,\n                prefetchAt = 0.33;\n            var scrollbar = that.verticalScrollbar;\n            var webkitCorrection = browser.webkit ? 1 : 0;\n            var total = dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total();\n\n            if (firstItemIndex < rangeStart) {\n\n                fetching = true;\n                rangeStart = math.max(0, lastItemIndex - take);\n                that._scrollTop = scrollbar.scrollTop() - (rangeStart * itemHeight);\n                that._page(rangeStart, take);\n\n            } else if (lastItemIndex >= rangeStart + take && !scrollingUp) {\n\n                fetching = true;\n                rangeStart = math.min(firstItemIndex, total - take);\n\n                //ensure the scrollbar can be scrolled to bottom with mouse drag\n                if (scrollbar.scrollTop() >= scrollbar[0].scrollHeight - scrollbar[0].offsetHeight - webkitCorrection) {\n                    that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight;\n                } else if (that.dataSource._isGroupPaged() && firstItemIndex >= total - take) {\n                    that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight - (that._scrollTop - that._prevScrollTop);\n                } else {\n                    that._scrollTop = itemHeight;\n                }\n\n                that._page(rangeStart, take);\n\n            } else if (!that._fetching && that.options.prefetch) {\n\n                if (firstItemIndex < (currentSkip + take) - take * prefetchAt && firstItemIndex > take) {\n                    dataSource.prefetch(currentSkip - take, take, $.noop);\n                }\n                if (lastItemIndex > currentSkip + take * prefetchAt) {\n                    dataSource.prefetch(currentSkip + take, take, $.noop);\n                }\n\n            }\n            return fetching;\n        },\n\n        fetching: function() {\n            return this._fetching;\n        },\n\n        _page: function(skip, take, callback) {\n            var that = this,\n                delayLoading = !that.options.prefetch,\n                dataSource = that.dataSource,\n                isGroupPaged = dataSource._isGroupPaged();\n            callback = isFunction(callback) ? callback : $.noop;\n\n            if (that.trigger(PAGING, { skip: skip, take: take })) {\n                return;\n            }\n\n            clearTimeout(that._timeout);\n            that._fetching = true;\n            that._rangeStart = skip;\n\n            if ((isGroupPaged && dataSource._groupRangeExists(skip, skip + take)) || (!isGroupPaged && dataSource.inRange(skip, take))) {\n                that.trigger(LOAD_START);\n\n                dataSource.range(skip, take, function() {\n                    that.trigger(LOAD_END);\n                    callback();\n                    that.trigger(PAGE);\n                }, \"page\");\n            } else {\n                if (!delayLoading) {\n                    that.trigger(LOAD_START);\n                }\n\n                that._timeout = setTimeout(function() {\n                    if (!that._scrolling) {\n\n                        if (delayLoading) {\n                            that.trigger(LOAD_START);\n                        }\n\n                        dataSource.range(skip, take, function() {\n                            that.trigger(LOAD_END);\n                            callback();\n                            that.trigger(PAGE);\n                        });\n                    }\n                }, 100);\n            }\n        },\n\n        repaintScrollbar: function(shouldScrollWrapper) {\n            var that = this,\n                maxHeight = that.options.maxScrollHeight,\n                dataSource = that.dataSource,\n                scrollbar = !kendo.support.kineticScrollNeeded ? kendo.support.scrollbar() : 0,\n                wrapperElement = that.wrapper[0],\n                totalHeight,\n                idx,\n                itemHeight;\n            var wasScrolledToBottom = that._isScrolledToBottom();\n\n            itemHeight = that.itemHeight = that.options.itemHeight() || 0;\n\n            var addScrollBarHeight = (wrapperElement.scrollWidth > wrapperElement.offsetWidth) ? scrollbar : 0;\n\n            totalHeight = (dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total()) * itemHeight + addScrollBarHeight;\n\n            var divElements = $(new Array(math.floor(totalHeight / maxHeight) + 1).join('<div></div>'))\n                .css({\n                    width: \"1px\",\n                    height: `${maxHeight}px`\n                });\n\n            if (totalHeight % maxHeight) {\n                divElements = divElements.add($(\"<div></div>\").css({\n                    width: \"1px\",\n                    height: `${(totalHeight % maxHeight)}px`\n                }));\n            }\n\n            that.verticalScrollbar.empty().append(divElements);\n\n            if (wasScrolledToBottom && !that._isScrolledToBottom() && !that.dataSource._isGroupPaged()) {\n                that.scrollToBottom();\n            }\n\n            if (typeof(that._scrollTop) !== \"undefined\" && !!shouldScrollWrapper) {\n                wrapperElement.scrollTop = that._scrollTop;\n                that._scrollWrapperOnColumnResize();\n            }\n        },\n\n        refresh: function(e) {\n            var that = this,\n                dataSource = that.dataSource,\n                rangeStart = that._rangeStart;\n            var action = (e || {}).action;\n            var shouldScrollWrapper = that._isScrolledToBottom() || !action || (action !== ITEM_CHANGE && action !== REMOVE && action !== SYNC);\n\n            that.trigger(LOAD_END);\n            clearTimeout(that._timeout);\n\n            that.repaintScrollbar(shouldScrollWrapper);\n\n            if (that.drag) {\n                that.drag.cancel();\n            }\n\n            if (typeof(rangeStart) !== \"undefined\" && !that._fetching) { // we are rebound from outside local range should be reset\n                if (!action || (action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\")) {\n                    that._rangeStart = dataSource.skip();\n                }\n\n                if (dataSource.page() === 1 && (!action || (action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\" && action !== \"collapseGroup\"))) {\n                    // reset the scrollbar position if datasource is filtered\n                    that.verticalScrollbar[0].scrollTop = 0;\n                }\n            }\n\n            that._fetching = false;\n        }\n    });\n\n    function attrEquals(attrName, attrValue) {\n        return \"[\" + kendo.attr(attrName) + \"=\" + attrValue + \"]\";\n    }\n\n    function groupCells(count) {\n        return new Array(count + 1).join('<td class=\"k-table-td k-group-cell\">&nbsp;</td>');\n    }\n\n    function cellsExcludingSpecialColumns(cells) {\n        return cells.filter((i,cell) => {\n            const $cell = $(cell);\n            const hasCheckbox = $cell.children(\".k-select-checkbox\").length > 0;\n            const hasWrappedCheckbox = $cell.find(\"> .k-checkbox-wrap > .k-select-checkbox\").length > 0;\n            return !$cell.hasClass(\"k-drag-cell\") && !$cell.hasClass(\"k-command-cell\") && !hasCheckbox && !hasWrappedCheckbox;\n        });\n    }\n\n    function stringifyAttributes(attributes) {\n        var attr,\n            result = \" \";\n\n        if (attributes) {\n            if (typeof attributes === STRING) {\n                return attributes;\n            }\n\n            for (attr in attributes) {\n                if (attributes[attr] !== '') {\n                    result += attr + '=\"' + attributes[attr] + '\"';\n                }\n            }\n        }\n        return result;\n    }\n\n    var defaultCommands = {\n        create: {\n            text: \"Add new record\",\n            className: \"k-grid-add\",\n            iconClass: \"k-i-plus\"\n        },\n        cancel: {\n            text: \"Cancel changes\",\n            className: \"k-grid-cancel-changes\",\n            iconClass: \"k-i-cancel\"\n        },\n        save: {\n            text: \"Save changes\",\n            className: \"k-grid-save-changes\",\n            iconClass: \"k-i-check\"\n        },\n        destroy: {\n            text: \"Delete\",\n            className: \"k-grid-remove-command\",\n            iconClass: \"k-i-x\"\n        },\n        edit: {\n            text: \"Edit\",\n            className: \"k-grid-edit-command\",\n            iconClass: \"k-i-pencil\",\n            themeColor: \"primary\"\n        },\n        update: {\n            text: \"Save\",\n            className: \"k-grid-save-command\",\n            iconClass: \"k-i-save\",\n            themeColor: \"primary\"\n        },\n        canceledit: {\n            text: \"Cancel\",\n            className: \"k-grid-cancel-command\",\n            iconClass: \"k-i-cancel-outline\"\n        },\n        excel: {\n            text: \"Export to Excel\",\n            className: \"k-grid-excel\",\n            iconClass: \"k-i-file-excel\"\n        },\n        pdf: {\n            text: \"Export to PDF\",\n            className: \"k-grid-pdf\",\n            iconClass: \"k-i-file-pdf\"\n        },\n        search: {\n            text: \"Search...\",\n            className: \"k-grid-search\"\n        },\n        columns: {\n            text: \"Columns\",\n            type: \"button\",\n            icon: \"columns\",\n            fillMode: \"flat\",\n            overflow: \"never\",\n            className: \"k-grid-column-menu\",\n            attr: {\n                \"aria-haspopup\": \"menu\"\n            }\n        }\n    };\n\n    function cursor(context, value) {\n        $('th, th .k-grid-filter-menu, th .k-link', context)\n            .add(document.body)\n            .css('cursor', value);\n    }\n\n    function reorder(selector, source, dest, before, count) {\n        var sourceIndex = source;\n        source = $();\n        count = count || 1;\n        for (var idx = 0; idx < count; idx++) {\n            source = source.add(selector.eq(sourceIndex + idx));\n        }\n\n        if (typeof dest == \"number\") {\n            source[before ? \"insertBefore\" : \"insertAfter\"](selector.eq(dest));\n        } else {\n            source.appendTo(dest);\n        }\n    }\n\n    function elements(lockedContent, content, filter) {\n        return $(lockedContent).add(content).find(filter);\n    }\n\n    function attachCustomCommandEvent(context, container, commands) {\n        var idx,\n            length,\n            command,\n            commandName;\n\n        commands = !isArray(commands) ? [commands] : commands;\n\n        for (idx = 0, length = commands.length; idx < length; idx++) {\n            command = commands[idx];\n\n            if (isPlainObject(command) && command.click) {\n                commandName = command.name || command.text;\n                container.on(CLICK + NS, \".k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"), { commandName: commandName }, command.click.bind(context));\n            }\n        }\n    }\n\n    function normalizeColumns(columns, encoded, hide, locked, parentIds) {\n        return map(columns, function(column) {\n            column = typeof column === STRING ? { field: column } : column;\n\n            var hidden;\n            column.parentIds = parentIds;\n\n            if (column.attributes instanceof Function) {\n                column._attributesFunction = column.attributes;\n            }\n\n            if (!isVisible(column) || hide) {\n                column.attributes = addHiddenStyle(column.attributes);\n                column.footerAttributes = addHiddenStyle(column.footerAttributes);\n                column.headerAttributes = addHiddenStyle(column.headerAttributes);\n                hidden = true;\n            }\n\n            var uid = kendo.guid();\n            if (locked && !column.locked) {\n                column.locked = locked;\n            }\n\n            column.headerAttributes = extend({ headers: parentIds }, column.headerAttributes);\n            if (!column.headerAttributes.id) {\n                column.headerAttributes = extend({ id: uid }, column.headerAttributes);\n                column.uid = uid;\n            } else {\n                column.uid = uid = column.headerAttributes.id;\n            }\n\n            if (column.columns) {\n                column.columns = normalizeColumns(column.columns, encoded, hidden, column.locked, parentIds ? (parentIds + \" \" + uid) : uid);\n            }\n            return extend({ encoded: encoded, hidden: hidden, locked: locked }, column);\n        });\n    }\n\n    function columnParent(column, columns) {\n        var parents = [];\n        columnParents(column, columns, parents);\n        return parents[parents.length - 1];\n    }\n\n    function columnParents(column, columns, parents) {\n        parents = parents || [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (column === columns[idx]) {\n                return true;\n            } else if (columns[idx].columns) {\n                var inserted = parents.length;\n                parents.push(columns[idx]);\n                if (!columnParents(column, columns[idx].columns, parents)) {\n                    parents.splice(inserted, parents.length - inserted);\n                } else {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    function setColumnVisibility(column, visible) {\n        setVisibility(column, visible, visible);\n    }\n\n    function setVisibility(column, visible, show) {\n        var method = show ? removeHiddenStyle : addHiddenStyle;\n        column.hidden = !visible;\n        column.attributes = method(column.attributes);\n        column.footerAttributes = method(column.footerAttributes);\n        column.headerAttributes = method(column.headerAttributes);\n    }\n\n\n    function setColumnMediaVisibility(column, visible) {\n        setColumnMatchesMedia(column);\n        var hideByMedia = column._hideByMedia;\n        setVisibility(column, visible, hideByMedia ? column.matchesMedia : visible);\n    }\n\n    function setColumnMatchesMedia(column) {\n        column.matchesMedia = columnMatchesMedia(column);\n    }\n\n    function columnMatchesMedia(column) {\n        return column && (isUndefined(column.media) || (!isUndefined(column.media) && kendo.matchesMedia(column.media)));\n    }\n\n    function isCellVisible() {\n        return this.style.display !== NONE;\n    }\n\n    function isElementVisible(element) {\n        return $(element)[0].style.display !== NONE;\n    }\n\n    function isVisible(column) {\n        return visibleColumns([column]).length > 0;\n    }\n\n    function visibleColumns(columns) {\n        return grep(columns, function(column) {\n            var result = !column.hidden && column.matchesMedia !== false;\n\n            if (result && column.columns) {\n                result = visibleColumns(column.columns).length > 0;\n            }\n            return result;\n        });\n    }\n\n    function columnsWithMedia(columns) {\n        var result = [];\n        var column;\n\n        for (var i = 0; i < columns.length; i++) {\n            column = columns[i];\n\n            if (!isUndefined(column.media)) {\n                if (!isUndefined(column.minScreenWidth)) {\n                    throw new Error(\"Using 'media' and 'minScreenWidth' options at the same time is not supported.\");\n                }\n\n                result.push(column);\n            }\n\n            if (column.columns) {\n                result = result.concat(columnsWithMedia(column.columns));\n            }\n        }\n\n        return result;\n    }\n\n    function isUndefined(value) {\n        return typeof value === \"undefined\";\n    }\n\n    function toJQuery(elements) {\n        return $(elements).map(function() { return this.toArray(); });\n    }\n\n    function updateCellRowSpan(cell, columns, sourceLockedColumnsCount) {\n        var lockedColumnDepth = depth(lockedColumns(columns));\n        var nonLockedColumnDepth = depth(nonLockedColumns(columns));\n\n        var rowSpan = cell.rowSpan;\n        if (sourceLockedColumnsCount) {\n            if (lockedColumnDepth > nonLockedColumnDepth) {\n                cell.rowSpan = (rowSpan - (lockedColumnDepth - nonLockedColumnDepth)) || 1;\n            } else {\n                cell.rowSpan = rowSpan + (nonLockedColumnDepth - lockedColumnDepth);\n            }\n        } else {\n            if (lockedColumnDepth > nonLockedColumnDepth) {\n                cell.rowSpan = rowSpan + (lockedColumnDepth - nonLockedColumnDepth);\n            } else {\n                cell.rowSpan = (rowSpan - (nonLockedColumnDepth - lockedColumnDepth)) || 1;\n            }\n        }\n    }\n\n    function findColumnByField(columns, field) {\n        for (var i = 0; i < columns.length; i++) {\n            if (columns[i].field == field) {\n                return columns[i];\n            }\n        }\n    }\n\n    function moveCellsBetweenContainers(sources, target, leafs, columns, container, destination, groups, action) {\n        var sourcesDepth = depth(sources);\n        var targetDepth = depth([target]);\n\n        if (sourcesDepth > targetDepth) {\n            var groupCells = new Array(groups + 1).join('<th class=\"k-group-cell k-header k-table-th\" scope=\"col\">&nbsp;</th>');\n            var rows = destination.children(\":not(.k-filter-row)\");\n            $(new Array((sourcesDepth - targetDepth) + 1).join(\"<tr class='k-table-row'>\" + groupCells + \"</tr>\")).insertAfter(rows.last());\n        }\n\n        addRowSpanValue(destination, sourcesDepth - targetDepth);\n\n        moveCells(leafs, columns, container, destination, action);\n    }\n\n    function updateCellIndex(thead, columns, offset) {\n        offset = offset || 0;\n\n        var position;\n        var cell;\n        var allColumns = columns;\n        columns = leafColumns(columns);\n\n        var cells = {};\n        var rows = thead.find(\">tr:not(.k-filter-row)\");\n\n        var filter = function() {\n            var el = $(this);\n            return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n        };\n\n        for (var idx = 0, length = columns.length; idx < length; idx++) {\n            position = columnPosition(columns[idx], allColumns);\n\n            if (!cells[position.row]) {\n                cells[position.row] = rows.eq(position.row)\n                    .find(DOT + HEADER_CLASS)\n                    .filter(filter);\n            }\n\n            cell = cells[position.row].eq(position.cell);\n            cell.attr(kendo.attr(\"index\"), offset + idx);\n        }\n\n\n        return columns.length;\n    }\n\n    function depth(columns) {\n        var result = 1;\n        var max = 0;\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].columns) {\n                var temp = depth(columns[idx].columns);\n                if (temp > max) {\n                    max = temp;\n                }\n            }\n        }\n        return result + max;\n    }\n\n    function moveCells(leafs, columns, container, destination, action) {\n        var sourcePosition = columnVisiblePosition(leafs[0], columns);\n\n        var ths = container.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row).children(\"th.k-header:not(.k-group-cell)\");\n\n        var t = $();\n        var sourceIndex = sourcePosition.cell;\n        var idx;\n\n        for (idx = 0; idx < leafs.length; idx++) {\n            t = t.add(ths.eq(sourceIndex + idx));\n        }\n\n        destination.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row)[action](t);\n\n        var children = [];\n        for (idx = 0; idx < leafs.length; idx++) {\n            if (leafs[idx].columns) {\n                children = children.concat(leafs[idx].columns);\n            }\n        }\n\n        if (children.length) {\n            moveCells(children, columns, container, destination, action);\n        }\n    }\n\n    function columnPosition(column, columns, row, cellCounts) {\n        var result;\n        var idx;\n\n        row = row || 0;\n        cellCounts = cellCounts || {};\n        cellCounts[row] = cellCounts[row] || 0;\n\n        for (idx = 0; idx < columns.length; idx++) {\n           if (columns[idx] == column) {\n                result = { cell: cellCounts[row], row: row };\n                break;\n           } else if (columns[idx].columns) {\n               result = columnPosition(column, columns[idx].columns, row + 1, cellCounts);\n               if (result) {\n                    break;\n               }\n           }\n\n           cellCounts[row]++;\n        }\n        return result;\n    }\n    function findParentColumnWithChildren(columns, index, source, rtl) {\n        var target;\n        var locked = !!source.locked;\n        var targetLocked;\n\n        do {\n            target = columns[index];\n            index += rtl ? 1 : -1;\n            targetLocked = !!target.locked;\n        } while (target && index > -1 && index < columns.length && target != source && !target.columns && targetLocked === locked);\n\n        return target;\n    }\n\n    function decorateCellWithClass(html) {\n        let element = html;\n        let classes = element.match(/class=[\"][^\"]+/g);\n        if (classes) {\n            const cssClasses = classes[0].split('\\\"').pop();\n            element = element.replace(cssClasses, cssClasses + \" k-table-td\");\n        } else {\n            element = element.replace(\"<td\",\"<td class='k-table-td'\");\n        }\n\n        return element;\n    }\n\n    function findReorderTarget(columns, target, source, before, masterColumns) {\n        if (target.columns) {\n            target = target.columns;\n            return target[before ? 0 : target.length - 1];\n        } else {\n            var parent = columnParent(target, columns);\n            var parentColumns;\n\n            if (parent) {\n                parentColumns = parent.columns;\n            } else {\n                parentColumns = columns;\n            }\n\n            var index = inArray(target, parentColumns);\n            if (index === 0 && before) {\n                index++;\n            } else if ((index == parentColumns.length - 1 && !before) || (!source.locked && !target.columns && !before)) {\n                index--;\n            } else if (index > 0 || (index === 0 && !before)) {\n                index++;\n            }\n\n            var sourceIndex = inArray(source, parentColumns);\n            target = findParentColumnWithChildren(parentColumns, index, source, sourceIndex > index);\n            var targetIndex = inArray(target, masterColumns);\n            if (target.columns && (!targetIndex || targetIndex === parentColumns.length - 1)) {\n                return null;\n            }\n\n            if (target && target != source && target.columns) {\n                return findReorderTarget(columns, target, source, before, masterColumns);\n            }\n        }\n        return null;\n    }\n\n    function columnVisiblePosition(column, columns, row, cellCounts) {\n        var result;\n        var idx;\n\n        row = row || 0;\n        cellCounts = cellCounts || {};\n        cellCounts[row] = cellCounts[row] || 0;\n\n        for (idx = 0; idx < columns.length; idx++) {\n           if (columns[idx] == column) {\n                result = { cell: cellCounts[row], row: row };\n                break;\n           } else if (columns[idx].columns) {\n               result = columnVisiblePosition(column, columns[idx].columns, row + 1, cellCounts);\n               if (result) {\n                    break;\n               }\n           }\n\n           if (!columns[idx].hidden) {\n               cellCounts[row]++;\n           }\n        }\n        return result;\n    }\n\n    function flatColumnsInDomOrder(columns) {\n        var result = flatColumns(lockedColumns(columns));\n        return result.concat(flatColumns(nonLockedColumns(columns)));\n    }\n\n    function targetParentContainerIndex(flatColumns, columns, sourceIndex, targetIndex) {\n        var column = flatColumns[sourceIndex];\n        var target = flatColumns[targetIndex];\n\n        var parent = columnParent(column, columns);\n        columns = parent ? parent.columns : columns;\n\n        return inArray(target, columns);\n    }\n\n    function flatColumns(columns) {\n        var result = [];\n        var children = [];\n        for (var idx = 0; idx < columns.length; idx++) {\n            result.push(columns[idx]);\n            if (columns[idx].columns) {\n                children = children.concat(columns[idx].columns);\n            }\n\n        }\n        if (children.length) {\n            result = result.concat(flatColumns(children));\n        }\n        return result;\n    }\n\n    function hiddenLeafColumnsCount(columns) {\n        var counter = 0;\n        var column;\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            column = columns[idx];\n\n            if (column.columns) {\n                counter += hiddenLeafColumnsCount(column.columns);\n            } else if (column.hidden) {\n                counter++;\n            }\n        }\n        return counter;\n    }\n\n    function sumWidths(cols) {\n        var width = 0;\n\n        for (var idx = 0, length = cols.length; idx < length; idx++) {\n            if (!cols[idx].hidden) {\n                width += parseInt(cols[idx].width, 10);\n            }\n        }\n\n        return width;\n    }\n\n    function columnsWidth(cols) {\n        var colWidth, width = 0;\n\n        for (var idx = 0, length = cols.length; idx < length; idx++) {\n            colWidth = cols[idx].style.width;\n            if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                width += parseInt(colWidth, 10);\n            }\n        }\n\n        return width;\n    }\n\n    function removeRowSpanValue(container, count) {\n        var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n        var rowSpan;\n        for (var idx = 0; idx < cells.length; idx++) {\n            rowSpan = cells[idx].rowSpan;\n            if (rowSpan > 1) {\n                cells[idx].rowSpan = (rowSpan - count) || 1;\n            }\n        }\n    }\n\n    function addRowSpanValue(container, count) {\n        var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n        for (var idx = 0; idx < cells.length; idx++) {\n            cells[idx].rowSpan += count;\n        }\n    }\n\n    function removeEmptyRows(container) {\n        var rows = container.find(\"tr:not(.k-filter-row)\");\n\n        var emptyRowsCount = rows.filter(function() {\n            return !$(this).children().length;\n        }).remove().length;\n\n        var cells = rows.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n        for (var idx = 0; idx < cells.length; idx++) {\n            if (cells[idx].rowSpan > 1) {\n                cells[idx].rowSpan -= emptyRowsCount;\n            }\n        }\n        return rows.length - emptyRowsCount;\n    }\n\n    function mapColumnToCellRows(columns, cells, rows, rowIndex, offset) {\n        var idx, row, length, children = [];\n\n        for (idx = 0, length = columns.length; idx < length; idx++) {\n            row = rows[rowIndex] || [];\n            row.push(cells.eq(offset + idx));\n            rows[rowIndex] = row;\n\n            if (columns[idx].columns) {\n                children = children.concat(columns[idx].columns);\n            }\n        }\n\n        if (children.length) {\n            mapColumnToCellRows(children, cells, rows, rowIndex + 1, offset + columns.length);\n        }\n    }\n\n    function setLeftAndRightStyles(element, left, right) {\n        element.css({\n            \"left\": left,\n            \"right\": right\n        });\n    }\n\n    function createColumnAttribute(column, attribute, property) {\n        column[attribute] = column[attribute] || {};\n        column[attribute][property] = column[attribute][property] || \"\";\n    }\n\n    function addColumnAttribute(column, attribute, property, value) {\n        createColumnAttribute(column, attribute, property);\n\n        if (column[attribute][property] !== \"\") {\n            column[attribute][property] += \" \" + value;\n        } else {\n            column[attribute][property] = value;\n        }\n    }\n\n    function removeColumnAttribute(column, attribute, property, value, removeAttributeProperty) {\n        createColumnAttribute(column, attribute, property);\n        if (removeAttributeProperty) {\n            delete column[attribute][property];\n        } else {\n            column[attribute][property] = column[attribute][property].replace(value, \"\");\n        }\n    }\n\n    function lockedColumns(columns) {\n        return grep(columns, function(column) {\n            return column.locked;\n        });\n    }\n\n    function nonLockedColumns(columns) {\n        return grep(columns, function(column) {\n            return !column.locked;\n        });\n    }\n\n    function stickyColumns(columns) {\n        return grep(columns, function(column) {\n            return column.sticky && !column.locked;\n        });\n    }\n\n    function visibleStickyColumns(columns) {\n        return grep(columns, function(column) {\n            return column.sticky && !column.locked && isVisible(column);\n        });\n    }\n\n    function visibleNonLockedColumns(columns) {\n        return grep(columns, function(column) {\n            return !column.locked && isVisible(column);\n        });\n    }\n\n    function visibleLockedColumns(columns) {\n        return grep(columns, function(column) {\n            return column.locked && isVisible(column);\n        });\n    }\n\n    function visibleLeafColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].hidden) {\n                continue;\n            }\n\n            if (columns[idx].columns) {\n                result = result.concat(visibleLeafColumns(columns[idx].columns));\n            } else {\n                result.push(columns[idx]);\n            }\n        }\n\n        return result;\n    }\n\n    function visibleLeafExportColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].hidden) {\n                continue;\n            }\n\n            if (columns[idx].columns) {\n                result = result.concat(visibleLeafColumns(columns[idx].columns));\n            } else {\n                result.push({\n                    field: columns[idx].field,\n                    width: columns[idx].width,\n                    values: columns[idx].values,\n                    title: columns[idx].title\n                });\n            }\n        }\n\n        return result;\n    }\n\n    function childColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].columns) {\n                result = result.concat(columns[idx].columns);\n            }\n        }\n\n        return result;\n    }\n\n    function visibleChildColumns(columns) {\n        var result = childColumns(columns);\n\n        result = result.filter(function(e) {\n            return !e.hidden;\n        });\n\n        return result;\n    }\n\n    function leafColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (!columns[idx].columns) {\n                result.push(columns[idx]);\n                continue;\n            }\n            result = result.concat(leafColumns(columns[idx].columns));\n        }\n\n        return result;\n    }\n\n    function getColumnsFields(columns) {\n        var result = [];\n        columns = leafColumns(columns);\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (typeof columns[idx] === \"string\") {\n                result.push(columns[idx]);\n            } else if (columns[idx].field) {\n                result.push(columns[idx].field);\n            }\n        }\n        return result;\n    }\n\n    function editField(column) {\n        return {\n            field: column.field,\n            title: column.title,\n            format: column.format,\n            editor: column.editor,\n            values: column.values,\n            editorOptions: extend(true, { format: column.format }, column.editorOptions),\n            label: column.title || column.field || \"\"\n        };\n    }\n\n    function leafDataCells(container) {\n        var rows = container.find(\">tr:not(.k-filter-row)\");\n\n        var filter = function() {\n            var el = $(this);\n            return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n        };\n\n        var cells = $();\n        if (rows.length > 1) {\n            cells = rows.find(\"th\")\n                .filter(filter)\n                .filter(function() { return this.rowSpan > 1; });\n        }\n\n        cells = cells.add(rows.last().find(\"th\").filter(filter));\n\n        var indexAttr = kendo.attr(\"index\");\n        cells.sort(function(a, b) {\n            a = $(a);\n            b = $(b);\n\n            var indexA = a.attr(indexAttr);\n            var indexB = b.attr(indexAttr);\n\n            if (indexA === undefined$1) {\n                indexA = $(a).index();\n            }\n            if (indexB === undefined$1) {\n                indexB = $(b).index();\n            }\n\n            indexA = parseInt(indexA, 10);\n            indexB = parseInt(indexB, 10);\n            return indexA > indexB ? 1 : (indexA < indexB ? -1 : 0);\n        });\n\n        return cells;\n    }\n\n    function parentColumnsCells(cell) {\n        var container = cell.closest(\"table\");\n        var result = $().add(cell);\n\n        var row = cell.closest(TR);\n        var headerRows = container.find(\"tr:not(.k-filter-row)\");\n        var level = headerRows.index(row);\n        if (level > 0) {\n            var parent = headerRows.eq(level - 1);\n            var parentCellsWithChildren = parent.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").filter(function() {\n                return !$(this).attr(\"rowspan\");\n            });\n\n            var offset = 0;\n            var index = row.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").index(cell);\n\n            var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\").filter(function() {\n                return this.colSpan > 1;\n            });\n\n            for (var idx = 0; idx < prevCells.length; idx++) {\n                offset += prevCells[idx].colSpan || 1;\n            }\n\n            index += Math.max(offset - 1, 0);\n\n            offset = 0;\n            for (idx = 0; idx < parentCellsWithChildren.length; idx++) {\n                var parentCell = parentCellsWithChildren.eq(idx);\n                if (parentCell.attr(\"data-colspan\")) {\n                    offset += parentCell[0].getAttribute(\"data-colspan\");\n                } else {\n                    offset += 1;\n                }\n                if (index >= idx && index < offset) {\n                    result = parentColumnsCells(parentCell).add(result);\n                    break;\n                }\n            }\n        }\n        return result;\n    }\n\n    function childColumnsCells(cell) {\n        var container = cell.closest(\"thead\");\n        var result = $().add(cell);\n\n        var row = cell.closest(TR);\n        var headerRows = container.find(\"tr:not(.k-filter-row)\");\n        var level = headerRows.index(row) + cell[0].rowSpan;\n        var colSpanAttr = kendo.attr(\"colspan\");\n\n        if (level <= headerRows.length - 1) {\n            var child = row.next();\n            var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n            var idx;\n\n            prevCells = prevCells.filter(function() {\n                return !this.rowSpan || this.rowSpan === 1;\n            });\n\n            var offset = 0;\n\n            for (idx = 0; idx < prevCells.length; idx++) {\n                offset += parseInt(prevCells.eq(idx).attr(colSpanAttr), 10) || 1;\n            }\n\n            var cells = child.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n            var colSpan = parseInt(cell.attr(colSpanAttr), 10) || 1;\n\n            idx = 0;\n\n            while (idx < colSpan) {\n                child = cells.eq(idx + offset);\n                result = result.add(childColumnsCells(child));\n                var value = parseInt(child.attr(colSpanAttr), 10);\n                if (value > 1) {\n                    colSpan -= value - 1;\n                }\n                idx++;\n            }\n        }\n\n        return result;\n    }\n\n    function appendContent(tbody, table, html, size) {\n        var placeholder,\n            tmp = tbody;\n\n        if (tbodySupportsInnerHtml) {\n            let $html = $(html);\n            kendo.applyStylesFromKendoAttributes($html, [\"display\", \"left\", \"right\"]);\n            tbody.empty();\n            $html.each((_, el) => tbody[0].appendChild(el));\n        } else {\n            placeholder = document.createElement(DIV);\n            placeholder.innerHTML = \"<table class='k-grid-table k-table'><tbody class='k-table-tbody'>\" + html + \"</tbody></table>\";\n            $(placeholder).find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", size));\n            tbody = placeholder.firstChild.firstChild;\n            table[0].replaceChild(tbody, tmp[0]);\n            tbody = $(tbody);\n        }\n        return tbody;\n    }\n\n    function addHiddenStyle(attr) {\n        attr = attr || {};\n        let kendoStyleAttrObject = {};\n        kendoStyleAttrObject[kendo.attr(\"style-display\")] = \"none\";\n\n        return extend({}, attr, kendoStyleAttrObject);\n    }\n\n    function hasHiddenStyle(attr) {\n        attr = attr || {};\n\n        return !!attr[kendo.attr(\"style-display\")];\n    }\n\n    function removeHiddenStyle(attr) {\n        attr = attr || {};\n        delete attr[kendo.attr(\"style-display\")];\n\n        return attr;\n    }\n\n    function normalizeCols(table, visibleColumns, hasDetails, groups, resizable) {\n        var colgroup = table.find(\">colgroup\"),\n            tableWidth = table.width(),\n            width,\n            minWidth,\n            parsedWidth,\n            totalWidth = visibleColumns.reduce((total, col) => total += parseInt(col.width, 10), 0),\n            cols = map(visibleColumns, function(column, i) {\n                    width = column.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        parsedWidth = parseInt(width, 10);\n                        if (tableWidth > totalWidth && (typeof width === NUMBER || width.indexOf(PX) > -1) && resizable && !colgroup.length) {\n                            minWidth = tableWidth / visibleColumns.length;\n                            return kendo.format(`<col ${kendo.attr('style-width')}=\"{0}\"/>`, minWidth + PX);\n                        }\n                        return kendo.format(`<col ${kendo.attr('style-width')}=\"{0}\"/>`, typeof width === STRING ? width : width + PX);\n                    }\n\n                    return \"<col />\";\n                });\n\n        if (hasDetails || colgroup.find(\".k-hierarchy-col\").length) {\n            cols.splice(0, 0, '<col class=\"k-hierarchy-col\" />');\n        }\n\n        if (colgroup.length) {\n            colgroup.remove();\n        }\n\n        colgroup = $(new Array(groups + 1).join('<col class=\"k-group-col\">') + cols.join(\"\"));\n        kendo.applyStylesFromKendoAttributes(colgroup, [\"width\"]);\n\n        if (!colgroup.is(\"colgroup\")) {\n            colgroup = $(\"<colgroup/>\").append(colgroup);\n        }\n\n        table.prepend(colgroup);\n    }\n\n    function normalizeHeaderCells(container, columns) {\n        var lastIndex = 0;\n        var idx , len;\n        var th = container.find(\"th:not(.k-group-cell)\");\n\n        for (idx = 0, len = columns.length; idx < len; idx ++) {\n            if (columns[idx].locked) {\n                th.eq(idx).insertBefore(th.eq(lastIndex));\n                th = container.find(\"th:not(.k-group-cell)\");\n                lastIndex ++;\n            }\n        }\n    }\n\n    function convertToObject(array) {\n        var result = {},\n            item,\n            idx,\n            length;\n\n        for (idx = 0, length = array.length; idx < length; idx++) {\n            item = array[idx];\n            result[item.value] = item.text;\n        }\n\n        return result;\n    }\n\n    function formatGroupValue(value, format, columnValues, encoded) {\n        var isForeignKey = columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0],\n            groupValue = isForeignKey ? convertToObject(columnValues)[value] : value;\n\n        groupValue = groupValue != null ? groupValue : \"\";\n\n        return format ? kendo.format(format, groupValue) : (encoded === false ? groupValue : kendo.htmlEncode(groupValue));\n    }\n\n    function setCellVisibility(cells, index, visible) {\n        var pad = 0,\n            state,\n            cell = cells[pad];\n\n        while (cell) {\n            state = visible ? true : cell.style.display !== NONE;\n\n            if (visible && cell.classList.contains(\"k-hidden\")) {\n                cell.classList.remove(\"k-hidden\");\n            }\n\n            if (state && !nonDataCellsRegExp.test(cell.className) && --index < 0) {\n                cell.style.display = visible ? \"\" : NONE;\n                break;\n            }\n\n            cell = cells[++pad];\n        }\n    }\n\n    function hideColumnCells(rows, columnIndex) {\n        var idx = 0,\n            length = rows.length,\n            cell, row;\n\n        for ( ; idx < length; idx += 1) {\n            row = rows.eq(idx);\n            if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n            } else {\n                if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                    cell = $(cell);\n                    cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n                    cell.find(\"col\").eq(columnIndex).remove();\n                    row = cell.find(TR).first();\n                }\n\n                setCellVisibility(row[0].cells, columnIndex, false);\n            }\n        }\n    }\n\n    function groupRows(data) {\n        var result = [];\n        var item;\n\n        for (var idx = 0; idx < data.length; idx++) {\n            item = data[idx];\n            if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                break;\n            }\n\n            result.push(item);\n\n            if (item.hasSubgroups) {\n                result = result.concat(groupRows(item.items));\n            }\n        }\n\n        return result;\n    }\n\n    function groupFooters(data) {\n        var result = [];\n        var item;\n\n        for (var idx = 0; idx < data.length; idx++) {\n            item = data[idx];\n            if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                break;\n            }\n\n            if (item.hasSubgroups) {\n                result = result.concat(groupFooters(item.items));\n            }\n\n            result.push(item.aggregates);\n        }\n\n        return result;\n    }\n\n    function showColumnCells(rows, columnIndex) {\n        var idx = 0,\n            length = rows.length,\n            cell, row, columns;\n\n        for ( ; idx < length; idx += 1) {\n            row = rows.eq(idx);\n            if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n            } else {\n                if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                    cell = $(cell);\n                    cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n                    normalizeCols(cell.find(\">form>table\"), visibleColumns(columns), false, 0);\n                    row = cell.find(TR).first();\n                }\n\n                setCellVisibility(row[0].cells, columnIndex, true);\n            }\n        }\n    }\n\n    function updateColspan(toAdd, toRemove, num) {\n        num = num || 1;\n\n        var item, idx, length;\n        for (idx = 0, length = toAdd.length; idx < length; idx++) {\n            item = toAdd.eq(idx).children(\":not([hidden])\").last();\n            item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) + num);\n\n            item = toRemove.eq(idx).children(\":not([hidden])\").last();\n            item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) - num);\n        }\n    }\n\n    function tableWidth(table) {\n        var idx, length, width = 0;\n        var cols = table.find(\">colgroup>col\");\n\n        for (idx = 0, length = cols.length; idx < length; idx += 1) {\n            width += parseInt(cols[idx].style.width, 10);\n        }\n\n        return width;\n    }\n    var Grid = kendo.ui.DataBoundWidget.extend({\n        init: function(element, options, events) {\n            var that = this;\n\n            options = isArray(options) ? { dataSource: options } : options;\n\n            Widget.fn.init.call(that, element, options);\n\n            if (events) {\n                that._events = events;\n            }\n\n            isRtl = kendo.support.isRtl(element);\n            CARET_ALT_RIGHT = isRtl ? CARET_ALT_LEFT : CARET_ALT_RIGHT_CACHE;\n\n            that._element();\n\n            that._ariaId();\n\n            that._columns($.extend(true, [], that.options.columns));\n\n            if (that._foreignKeyPromises) {\n                $.when.apply(null, that._foreignKeyPromises)\n                    .then(function() {\n                        that._foreignKeyPromises = null;\n                        that._continueInit();\n                    });\n            } else {\n                that._continueInit();\n            }\n        },\n\n        _continueInit: function() {\n            var that = this;\n\n            that._dataSource();\n\n            that._stickyColumns();\n\n            that._tbody();\n\n            that._thead();\n\n            that._rowResizing();\n\n            that._groupable();\n\n            that._toolbar();\n\n            let columnsToolbarButton = that.wrapper.find(\".k-grid-toolbar .k-toolbar-button.k-grid-column-menu.k-toolbar-tool\");\n            if (columnsToolbarButton.length > 0) {\n                that._globalColumnsMenu(columnsToolbarButton);\n            }\n\n            that._pageable();\n\n            that._setContentHeight();\n\n            that._templates();\n\n            that._navigatable();\n\n            that._initSelectableAggregates();\n\n            that._selectable();\n\n            that._statusBar();\n\n            that._clipboard();\n\n            that._paste();\n\n            that._details();\n\n            that._editable();\n\n            that._attachCustomCommandsEvent();\n\n            that._adaptiveColumns();\n\n            that._minScreenSupport();\n\n            if (that.options.autoBind) {\n                that.dataSource.fetch();\n            } else {\n                that._group = that._groups() > 0;\n                that._footer();\n            }\n\n            if (that.options.contextMenu) {\n                that._initContextMenu();\n            }\n\n            if (that.lockedContent) {\n                that.wrapper.addClass(\"k-grid-lockedcolumns\");\n                that._resizeHandler = function() {\n                    that.resize();\n                };\n                $(window).on(\"resize\" + NS, that._resizeHandler);\n            }\n\n            kendo.notify(that);\n\n            if (that._showWatermarkOverlay) {\n                that._showWatermarkOverlay(that.wrapper[0]);\n            }\n        },\n\n        events: [\n           CHANGE,\n           CHANGING,\n           \"dataBinding\",\n           \"cancel\",\n           DATABOUND,\n           DETAILEXPAND,\n           DETAILCOLLAPSE,\n           DETAILINIT,\n           FILTERMENUINIT,\n           FILTERMENUOPEN,\n           COLUMNMENUINIT,\n           COLUMNMENUOPEN,\n           EDIT,\n           BEFOREEDIT,\n           SAVE,\n           REMOVE,\n           SAVECHANGES,\n           CELLCLOSE,\n           ROWRESIZE,\n           COLUMNRESIZE,\n           COLUMNREORDER,\n           COLUMNSHOW,\n           COLUMNHIDE,\n           COLUMNLOCK,\n           COLUMNUNLOCK,\n           COLUMNSTICK,\n           COLUMNUNSTICK,\n           ROWREORDER,\n           NAVIGATE,\n           PASTE,\n           \"page\",\n           \"sort\",\n           \"filter\",\n           \"group\",\n           \"groupExpand\",\n           \"groupCollapse\",\n           \"kendoKeydown\"\n        ],\n\n        setDataSource: function(dataSource) {\n            var that = this;\n            var scrollable = that.options.scrollable;\n            var scrollableContent;\n\n            that.options.dataSource = dataSource;\n\n            that._dataSource();\n\n            that._pageable();\n\n            that._thead();\n\n            that._rowResizing();\n\n            if (scrollable) {\n                if (scrollable.virtual) {\n                    scrollableContent = that.content.find(\">.k-virtual-scrollable-wrap\");\n                    kendo.scrollLeft(scrollableContent, leftMostPosition(scrollableContent, isRtl));\n                } else {\n                    scrollableContent = that.tbody;\n                    kendo.scrollLeft(that.content, leftMostPosition(scrollableContent, isRtl));\n                }\n            }\n\n            if (that.options.groupable) {\n                that._groupable();\n            }\n\n            if (that.virtualScrollable) {\n                that.virtualScrollable.setDataSource(that.options.dataSource);\n            }\n\n            if (that.options.navigatable) {\n                that._navigatable();\n            }\n\n            if (that.options.selectable) {\n                that._selectable();\n            }\n\n            if (that.options.autoBind) {\n                that.dataSource.fetch();\n            } else {\n                that._footer();\n            }\n        },\n\n        options: {\n            name: \"Grid\",\n            columns: [],\n            toolbar: null,\n            autoBind: true,\n            filterable: false,\n            scrollable: true,\n            sortable: false,\n            selectable: false,\n            allowCopy: false,\n            allowPaste: false,\n            navigatable: false,\n            pageable: false,\n            persistSelection: false,\n            editable: false,\n            encodeTitles: false,\n            groupable: false,\n            rowTemplate: \"\",\n            altRowTemplate: \"\",\n            statusBarTemplate: null,\n            search: false,\n            noRecords: false,\n            dataSource: {},\n            height: null,\n            resizable: false,\n            reorderable: false,\n            columnMenu: false,\n            detailTemplate: null,\n            contextMenu: false,\n            columnResizeHandleWidth: 3,\n            size: \"medium\",\n            mobile: \"\",\n            loaderType: \"loadingPanel\",\n            messages: {\n                editable: {\n                    cancelDelete: CANCELDELETE,\n                    confirmation: DELETECONFIRM,\n                    confirmDelete: CONFIRMDELETE\n                },\n                commands: {\n                    create: defaultCommands.create.text,\n                    cancel: defaultCommands.cancel.text,\n                    save: defaultCommands.save.text,\n                    destroy: defaultCommands.destroy.text,\n                    edit: defaultCommands.edit.text,\n                    update: defaultCommands.update.text,\n                    canceledit: defaultCommands.canceledit.text,\n                    excel: defaultCommands.excel.text,\n                    pdf: defaultCommands.pdf.text,\n                    search: defaultCommands.search.text,\n                    columns: defaultCommands.columns.text,\n                    select: \"Select\",\n                    selectRow: \"Select Row\",\n                    selectAllRows: \"All rows\",\n                    clearSelection: \"Clear selection\",\n                    copySelection: \"Copy selection\",\n                    copySelectionNoHeaders: \"Copy selection (No Headers)\",\n                    paste: \"Paste (use CTRL/⌘ + V)\",\n                    reorderRow: \"Reorder row\",\n                    reorderRowUp: \"Up\",\n                    reorderRowDown: \"Down\",\n                    reorderRowTop: \"Top\",\n                    reorderRowBottom: \"Bottom\",\n                    exportPdf: \"Export to PDF\",\n                    exportExcel: \"Export to Excel\",\n                    exportToExcelAll: \"All\",\n                    exportToExcelSelection: \"Selection\",\n                    exportToExcelSelectionNoHeaders: \"Selection (No Headers)\",\n                    sortAsc: \"Sort Ascending\",\n                    sortDesc: \"Sort Descending\",\n                    moveGroupPrevious: \"Move previous\",\n                    moveGroupNext: \"Move next\",\n                },\n                noRecords: NORECORDS,\n                expandCollapseColumnHeader: \"\",\n                groupHeader: \"Press ctrl + space to group\",\n                ungroupHeader: \"Press ctrl + space to ungroup\",\n                itemsSelected: \"items selected\",\n                dragHandleLabel: \"Drag row\",\n                toolbarLabel: \"grid toolbar\",\n                groupingHeaderLabel: \"grid grouping header\",\n                filterCellTitle: \"filter cell\"\n            },\n            width: null\n        },\n\n        destroy: function() {\n            var that = this,\n                element,\n                reorderableInstance;\n\n            that._destroyColumnAttachments();\n\n            Widget.fn.destroy.call(that);\n\n            if (this._navigatableTables) {\n                this._navigatableTables.off(NS);\n                this._navigatableTables = null;\n                this._headertables = null;\n            }\n\n            if (that._resizeHandler) {\n                $(window).off(\"resize\" + NS, that._resizeHandler);\n            }\n\n            if (that.pager && that.pager.element) {\n                that.pager.destroy();\n            }\n\n            if (that.timer) {\n                clearTimeout(that.timer);\n            }\n\n            if (that._progressTimeOut) {\n                clearTimeout(that._progressTimeOut);\n            }\n\n            if (that._collapseGroupsTimeOut) {\n                clearTimeout(that._collapseGroupsTimeOut);\n            }\n\n            if (that._endlessFetchTimeOut) {\n                clearTimeout(that._endlessFetchTimeOut);\n            }\n\n            that.pager = null;\n\n            that._destroyGroupable();\n\n            reorderableInstance = that.wrapper.data(\"kendoReorderable\");\n            if (reorderableInstance) {\n                reorderableInstance.destroy();\n            }\n\n            reorderableInstance = that.tbody ? that.tbody.data(\"kendoReorderable\") : null;\n            if (reorderableInstance) {\n                reorderableInstance.destroy();\n            }\n\n            if (that.allowPaste) {\n                that.wrapper.off(\"paste\", that.pasteHandler);\n                that.unbind(that.pasteHandler);\n            }\n\n            if (that.pasteActionsDropDownList) {\n                that.pasteActionsDropDownList.destroy();\n                that.pasteActionsDropDownList = null;\n            }\n\n            if (that.selectable && that.selectable.element) {\n                that.selectable.destroy();\n\n                that.clearArea();\n                that._selectedIds = null;\n\n                if (that.copyHandler) {\n                    that.wrapper.off(\"keydown\", that.copyHandler);\n                    that.unbind(that.copyHandler);\n                }\n                if (that.updateClipBoardState) {\n                    that.unbind(that.updateClipBoardState);\n                    that.updateClipBoardState = null;\n                }\n                if (that.clearAreaHandler) {\n                    that.wrapper.off(\"keyup\", that.clearAreaHandler);\n                }\n            }\n\n            that.selectable = null;\n            that._selectableAggregatesOptions = null;\n\n            if (that.resizable) {\n                that.resizable.destroy();\n\n                if (that._resizeUserEvents) {\n                    if (that._resizeHandleDocumentClickHandler) {\n                        $(document).off(\"click\", that._resizeHandleDocumentClickHandler);\n                    }\n                    that._resizeUserEvents.destroy();\n                    that._resizeUserEvents = null;\n                }\n                that.resizable = null;\n            }\n\n            that._destroyRowResizing();\n\n            that._destroyVirtualScrollable();\n\n            if (that.editableUserEvents) {\n                that.editableUserEvents.destroy();\n                that.editableUserEvents = null;\n            }\n\n            if (that._lockedContentUserEvents) {\n                that._lockedContentUserEvents.destroy();\n                that._lockedContentUserEvents = null;\n            }\n\n            that._destroyEditable();\n\n            if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler)\n                           .unbind(PROGRESS, that._progressHandler)\n                           .unbind(ERROR, that._errorHandler)\n                           .unbind(SORT, that._clearSortClasses);\n\n                that._refreshHandler = that._progressHandler = that._errorHandler = that._sortHandler = null;\n            }\n\n            element = that.element\n                .add(that.wrapper)\n                .add(that.table)\n                .add(that.thead)\n                .add(that.wrapper.find(\">.k-grid-toolbar\"));\n\n            if (that.content) {\n                element = element\n                        .add(that.content)\n                        .add(that.content.find(\">.k-virtual-scrollable-wrap\"));\n            }\n\n            if (that.scrollables && that.scrollables.first()) {\n                element = element.add(that.scrollables.first());\n            }\n\n            if (that.lockedHeader) {\n                that._removeLockedContainers();\n            }\n\n            if (that.pane) {\n                that.pane.destroy();\n            }\n\n            if (that._isMobile) {\n                that.wrapper.off(\"transitionend\" + NS);\n                that.wrapper.off(\"contextmenu\" + NS);\n            }\n\n            if (that.minScreenResizeHandler) {\n                $(window).off(\"resize\", that.minScreenResizeHandler);\n            }\n\n            that._detachColumnMediaResizeHandler();\n\n            if (that._draggableInstance && that._draggableInstance.element) {\n                that._draggableInstance.destroy();\n            }\n\n            that._draggableInstance = null;\n\n            if (that._draggableRowsInstance && that._draggableRowsInstance.element) {\n                that._draggableRowsInstance.destroy();\n            }\n\n            if (that.tbodyContextMenu) {\n                that.tbodyContextMenu.destroy();\n            }\n\n            if (that.theadContextMenu) {\n                that.theadContextMenu.destroy();\n            }\n\n            that._draggableRowsInstance = null;\n\n            element.off(NS);\n\n            kendo.destroy(that.wrapper);\n\n            that.rowTemplate =\n            that.altRowTemplate =\n            that.lockedRowTemplate =\n            that.lockedAltRowTemplate =\n            that.detailTemplate =\n            that.footerTemplate =\n            that.groupFooterTemplate =\n            that.lockedGroupFooterTemplate =\n            that.noRecordsTemplate = null;\n\n            that.scrollables =\n            that.thead =\n            that.tbody =\n            that.element =\n            that.table =\n            that.content =\n            that.statusBar =\n            that.footer =\n            that.wrapper =\n            that.lockedTable =\n            that.lockedContent =\n            that.lockedHeader =\n            that.lockedFooter =\n            that._groupableClickHandler =\n            that._groupRows =\n            that._setContentWidthHandler = null;\n        },\n\n        getOptions: function() {\n            var options = this.options;\n            options.dataSource = null;\n\n            var result = extend(true, {}, this.options);\n            result.columns = kendo.deepExtend([], this.columns);\n\n            var dataSource = this.dataSource;\n\n            var initialData = dataSource.options.data && dataSource._data;\n            dataSource.options.data = null;\n\n            result.dataSource = $.extend(true, {}, dataSource.options);\n\n            dataSource.options.data = initialData;\n\n            result.dataSource.data = initialData;\n            result.dataSource.page = dataSource.page();\n            result.dataSource.filter = $.extend(true, {}, dataSource.filter());\n            result.dataSource.pageSize = dataSource.pageSize();\n            result.dataSource.sort = dataSource.sort();\n            result.dataSource.group = dataSource.group();\n            result.dataSource.aggregate = dataSource.aggregate();\n\n            if (result.dataSource.transport) {\n                result.dataSource.transport.dataSource = null;\n            }\n\n            if (result.pageable && result.pageable.pageSize) {\n                result.pageable.pageSize = dataSource.pageSize();\n            }\n\n            return result;\n        },\n\n        setOptions: function(options) {\n            var currentOptions = this.getOptions();\n            kendo.deepExtend(currentOptions, options);\n            if (!options.dataSource) {\n                currentOptions.dataSource = this.dataSource;\n            } else {\n              if (options.dataSource.filter) {\n                  currentOptions.dataSource.filter = options.dataSource.filter;\n              }\n            }\n            var wrapper = this.wrapper;\n            var events = this._events;\n            var element = this.element;\n\n            this.destroy();\n            this.options = null;\n            if (this._isMobile) {\n                var mobileWrapper = wrapper.closest(kendo.roleSelector(\"pane\")).parent();\n                mobileWrapper.after(wrapper);\n                mobileWrapper.remove();\n                wrapper.removeClass(\"k-grid-mobile\");\n            }\n            if (wrapper[0] !== element[0]) {\n                wrapper.before(element);\n                wrapper.remove();\n            }\n            element.empty();\n\n            this.init(element, currentOptions, events);\n            this._setEvents(currentOptions);\n        },\n\n        items: function() {\n            if (this.lockedContent) {\n                return this._items(this.tbody).add(this._items(this.lockedTable.children(\"tbody\")));\n            } else {\n                return this._items(this.tbody);\n            }\n        },\n\n        _items: function(container, includeGroupRows) {\n            return container.children().filter(function() {\n                var tr = $(this);\n                return (includeGroupRows ? !tr.hasClass(\"k-detail-row\") : !tr.hasClass(GROUPING_ROW)) && !tr.hasClass(\"k-detail-row\") && !tr.hasClass(\"k-group-footer\");\n            });\n        },\n\n        dataItems: function() {\n            var dataItems = kendo.ui.DataBoundWidget.fn.dataItems.call(this);\n            if (this.lockedContent) {\n                var n = dataItems.length, tmp = new Array(2 * n);\n                for (var i = n; --i >= 0;) {\n                    tmp[i] = tmp[i + n] = dataItems[i];\n                }\n                dataItems = tmp;\n            }\n\n            return dataItems;\n        },\n\n        _destroyColumnAttachments: function() {\n            var that = this;\n\n            that.resizeHandle = null;\n\n            if (!that.thead) {\n                return;\n            }\n\n            that.thead.add(that.lockedHeader).find(\"th\").each(function() {\n                var th = $(this),\n                    filterMenu = th.data(\"kendoFilterMenu\"),\n                    sortable = th.data(\"kendoColumnSorter\"),\n                    columnMenu = th.data(\"kendoColumnMenu\");\n\n                if (filterMenu) {\n                    filterMenu.destroy();\n                }\n\n                if (sortable) {\n                    sortable.destroy();\n                }\n\n                if (columnMenu) {\n                    columnMenu.destroy();\n                }\n            });\n        },\n\n        _attachCustomCommandsEvent: function() {\n            var that = this,\n                columns = leafColumns(that.columns || []),\n                command,\n                idx,\n                length;\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                command = columns[idx].command;\n\n                if (command) {\n                    attachCustomCommandEvent(that, that.wrapper, command);\n                }\n            }\n        },\n\n        _aria: function() {\n            var wrapper = this.wrapper,\n                gridRole = this._hasDetails() ? \"treegrid\" : this.options.navigatable ? \"grid\" : null,\n                table = this.table,\n                toolbar = wrapper.find(\".k-grid-toolbar\"),\n                groupingHeader = wrapper.find(\".k-grouping-header\"),\n                gridId = this._ariaGridId(),\n                tableTabindex = table.attr(TABINDEX),\n                tbodyId, headerGroupId, footerGroupId, tableOwned,\n                numberOfFixedRows = this.thead.find(TR).length + this.wrapper.find(\".k-grid-footer-wrap table tr\").length,\n                trailingColumns = this._trailingColumns(),\n                virtual = this.virtualScroll,\n                pageable = this.options.pageable,\n                rowsCount;\n\n            table.attr(TABINDEX, tableTabindex >= 0 ? tableTabindex : 0);\n\n            if (gridRole) {\n                table.attr(ROLE, gridRole);\n            }\n\n            table.find(\"tbody, thead, tfoot\").attr(ROLE, ROWGROUP);\n            table.find(TR).attr(ROLE, ROW);\n            table.find(\"th\").attr(ROLE, COLUMNHEADER);\n            table.find(\"td\").attr(ROLE, GRIDCELL);\n\n            if ((pageable && this.dataSource.totalPages() > 1) || (virtual && virtual.rows)) {\n                if (this._groups() > 0) {\n                    rowsCount = -1;\n                } else if (this._hasDetails()) {\n                    rowsCount = numberOfFixedRows + (this.dataSource.total() * 2);\n                } else {\n                    rowsCount = numberOfFixedRows + this.dataSource.total();\n                }\n\n                table.attr(ARIA_ROWCOUNT, rowsCount);\n            } else if (this._hasDetails()) {\n                if (this._groups() > 0) {\n                    rowsCount = -1;\n                } else {\n                    rowsCount = numberOfFixedRows + (this.dataSource.total() * 2);\n                }\n\n                table.attr(ARIA_ROWCOUNT, rowsCount);\n            }\n\n            if (rowsCount && rowsCount > 0) {\n                this._ariaRowIndex();\n            }\n\n            if ((virtual && virtual.columns) ||\n                (!table.attr(ARIA_COLCOUNT) &&\n                    (table.find(\"td:not([group-header-spanned-hidden]):hidden\").length > 0 ||\n                    wrapper.find(\".k-grid-content-locked td:not([group-header-spanned-hidden]):hidden\").length > 0))) {\n                        table.attr(ARIA_COLCOUNT, trailingColumns + leafColumns(this.columns).length);\n                        this._ariaColumnIndex();\n            }\n\n            if (this.pager) {\n                this.pager.element.attr(ARIA_CONTROLS, gridId);\n            }\n\n            toolbar.attr({\n                role: \"toolbar\",\n                \"aria-label\": this.options.messages.toolbarLabel,\n                \"aria-controls\": gridId\n            });\n\n            groupingHeader.attr({\n                role: \"toolbar\",\n                \"aria-label\": this.options.messages.groupingHeaderLabel,\n                \"aria-controls\": gridId\n            });\n\n            headerGroupId = this._ariaHeaderFooter(\"header\", \"thead\", \"th, td\", COLUMNHEADER);\n            footerGroupId = this._ariaHeaderFooter(\"footer\", \"tfoot\", \"td\", GRIDCELL);\n\n            if (wrapper.find(\".k-grid-content-locked\").length > 0) {\n                this._ariaLockedContent();\n            }\n\n            if (!!headerGroupId || !!footerGroupId) {\n                tbodyId = this.tbody.attr(ID) || kendo.guid();\n                tableOwned = [headerGroupId, tbodyId, footerGroupId].join(\" \");\n\n                this.tbody.attr(ID, tbodyId);\n                table.attr(ARIA_OWNS, tableOwned);\n            }\n\n            if (this.options.groupable) {\n                this._ariaGroupTitles();\n            }\n        },\n\n        _ariaColumnIndex: function() {\n            var trailingColumns = this._trailingColumns(),\n                dataVirtual = this.tbody.find(\">tr\").last().find(\"> td[data-virtual]\"),\n                headerRows = this.thead.find(\">tr\").not(\".k-filter-row\"),\n                lockedHeaderRows = this.wrapper.find(\".k-grid-header-locked thead > tr\").not(\".k-filter-row\"),\n                firstIndex = Number.MAX_VALUE,\n                lastIndex = 0,\n                lockedLastIndex = 0,\n                previousVirtual = 0,\n                nextVirtual = 0,\n                previousIndex, i, cells, dataIndex, cellsIndex,\n                eachHeaderCell = function(j, cell) {\n                    var current = cell.getAttribute(\"data-index\"),\n                        currentIndex = Number(current),\n                        lockedParent = $(cell).closest(\".k-grid-header-locked\");\n\n                    if (lockedParent.length === 0 && currentIndex < firstIndex) {\n                        firstIndex = currentIndex;\n                    }\n\n                    if (lockedParent.length > 0 && lockedLastIndex < currentIndex) {\n                        lockedLastIndex = currentIndex;\n                    }\n\n                    if (lockedParent.length === 0 && lastIndex < currentIndex) {\n                        lastIndex = currentIndex;\n                    }\n\n                    if (current !== null) {\n                        cell.setAttribute(ARIA_COLINDEX, Number(currentIndex) + 1);\n                        previousIndex = Number(currentIndex) + 1 + cell.getAttribute(\"colspan\");\n                    } else {\n                        cell.setAttribute(ARIA_COLINDEX, previousIndex + 1);\n                        previousIndex = previousIndex + cell.getAttribute(\"colspan\");\n                    }\n                };\n\n            if (dataVirtual.length === 2) {\n                previousVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n                nextVirtual = Number(dataVirtual[1].getAttribute(\"colspan\"));\n            } else if (dataVirtual.length === 1 && dataVirtual.prev().length === 0) {\n                previousVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n            } else if (dataVirtual.length === 1 && dataVirtual.prev().length === 1) {\n                nextVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n            }\n\n            for (i = 0; i < lockedHeaderRows.length; i++) {\n                previousIndex = 0;\n                lockedHeaderRows.eq(i).find(\"th\").each(eachHeaderCell);\n            }\n\n            for (i = 0; i < headerRows.length; i++) {\n                previousIndex = 0;\n                headerRows.eq(i).find(\"th\").each(eachHeaderCell);\n            }\n\n            for (i = 0; i <= lockedLastIndex; i++) {\n                dataIndex = i + trailingColumns;\n                cells = this.wrapper.find(\".k-grid-content-locked tbody > tr > td:nth-child(\" + (i + 1) + \")\");\n                cells.attr(ARIA_COLINDEX, dataIndex + 1);\n            }\n\n            for (i = previousVirtual; i <= lastIndex - firstIndex - nextVirtual; i++) {\n                if (previousVirtual === 0 ) {\n                    cellsIndex = i + 1;\n                } else {\n                    cellsIndex = i - previousVirtual + 2;\n                }\n\n                dataIndex = firstIndex + i + trailingColumns;\n\n                cells = this.tbody.find(\"> tr > td:nth-child(\" + cellsIndex + \")\");\n                cells.attr(ARIA_COLINDEX, dataIndex + 1);\n            }\n        },\n\n        _ariaGroupTitles: function() {\n            var that = this,\n                groups = that.dataSource.group(),\n                ths = that.wrapper.find(\".k-grid-header th\");\n\n            ths.each(function(i, el) {\n                if (el.getAttribute(\"title\") === that.options.messages.ungroupHeader) {\n                        el.setAttribute(\"title\", that.options.messages.groupHeader);\n                }\n            });\n\n            if (groups && groups.length > 0) {\n                groups.forEach(function(group) {\n                    var field = group.field,\n                        el = ths.filter(\"[\" + kendo.attr(\"field\") + \"='\" + field + \"']\");\n\n                    if (el.attr(\"title\") === that.options.messages.groupHeader) {\n                        el.attr(\"title\", that.options.messages.ungroupHeader);\n                    }\n                });\n            }\n        },\n\n        _ariaHeaderFooter: function(type, group, el, role) {\n            var that = this,\n                wrapper = that.wrapper,\n                table = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-wrap table\"),\n                lockedTable = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-locked table\"),\n                groupId = \"\",\n                rowGroup;\n\n            if (table.length > 0) {\n                rowGroup = table.find(group + \", tbody\");\n                groupId = rowGroup.attr(ID) || kendo.guid();\n\n                table.attr(ROLE, NONE);\n                table.find(TR).attr(ROLE, ROW);\n                table.find(el).attr(ROLE, role);\n                rowGroup.attr({\n                    role: ROWGROUP,\n                    id: groupId\n                });\n            }\n\n            if (lockedTable.length > 0) {\n                that._ariaLocked(type, group, el, role);\n            }\n\n            lockedTable.find(\"td\").attr(ROLE, GRIDCELL);\n            table.find(\"td\").attr(ROLE, GRIDCELL);\n\n            return groupId;\n        },\n\n        _ariaId: function() {\n            var id = this.element.attr(ID) || \"aria\";\n\n            if (id) {\n                this._cellId = id + \"_active_cell\";\n            }\n        },\n\n        _ariaGridId: function() {\n            var table = this.table,\n                gridId = table.attr(ID);\n\n            if (!gridId) {\n                gridId = kendo.guid();\n                table.attr(ID, gridId);\n            }\n\n            return gridId;\n        },\n\n        _ariaLocked: function(type, group, el, role) {\n            var that = this,\n                wrapper = that.wrapper,\n                table = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-wrap table\"),\n                lockedTable = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-locked table\"),\n                rows = table.find(TR),\n                lockedRows = lockedTable.find(TR);\n\n            lockedTable.attr(ROLE, NONE);\n            lockedTable.find(group + \", tbody\").attr(ROLE, NONE);\n            lockedRows.attr(ROLE, NONE);\n\n            lockedTable.find(el).attr(ROLE, role);\n\n            rows.each(function(i, row) {\n                var ownedCells = [];\n\n                ownedCells = that._cellsIds(lockedRows.eq(i).find(el), \"locked_\" + type, i);\n                ownedCells = ownedCells.concat(that._cellsIds($(row).find(el), type, i));\n\n                row.setAttribute(ARIA_OWNS, ownedCells.join(\" \"));\n            });\n        },\n\n        _ariaLockedContent: function() {\n            var that = this,\n                table = that.table,\n                tableRows = table.find(TR),\n                lockedTable = that.wrapper.find(\".k-grid-content-locked table\"),\n                lockedRows = lockedTable.find(TR);\n\n            lockedTable.attr(ROLE, NONE);\n            lockedTable.find(\"tbody\").attr(ROLE, NONE);\n            lockedRows.attr(ROLE, NONE);\n            lockedTable.find(\"td\").attr(ROLE, GRIDCELL);\n\n            tableRows.each(function(i, row) {\n                var ownedCells = [];\n\n                ownedCells = that._cellsIds(lockedRows.eq(i).find(\"td\"), \"locked_datacell\", i);\n                ownedCells = ownedCells.concat(that._cellsIds($(row).find(\"td\"), \"datacell\", i));\n\n                row.setAttribute(ARIA_OWNS, ownedCells.join(\" \"));\n            });\n        },\n\n        _ariaAddHiddenColIndex: function() {\n            var virtualScroll = this.virtualScroll || {},\n                columns = this.columns,\n                table = this.table,\n                leafColsCount = leafColumns(columns).length;\n\n            if (!virtualScroll.columns && !table.attr(ARIA_COLCOUNT)) {\n                this._ariaColumnIndex();\n\n                table.attr(ARIA_COLCOUNT, leafColsCount);\n            }\n        },\n\n        _ariaRemoveHiddenColIndex: function() {\n            var virtualScroll = this.virtualScroll || {},\n                columns = this.columns,\n                leafColsCount = leafColumns(columns).length;\n\n            if (!virtualScroll.columns && (leafColsCount === visibleLeafColumns(this.columns).length)) {\n                this.wrapper.find(\"td, th\").removeAttr(ARIA_COLINDEX);\n\n                this.table.removeAttr(ARIA_COLCOUNT);\n            }\n        },\n\n        _ariaRowIndex: function() {\n            var headerRows = this.thead.find(\">tr\"),\n                numberOfHeaderRows = headerRows.length,\n                bodyRows = this.tbody.find(\">tr\"),\n                footerRows = this.wrapper.find(\".k-grid-footer-wrap tfoot > tr\"),\n                totalNumberOfItems = this.dataSource.total(),\n                previousItems = this.dataSource.skip() || 0,\n                currentIndex = 1,\n                previousMaster = false,\n                i, currentRow;\n\n            if (this._hasDetails()) {\n                totalNumberOfItems = totalNumberOfItems * 2;\n                previousItems = previousItems * 2;\n            }\n\n            for (i = 0; i < numberOfHeaderRows; i++) {\n                headerRows.eq(i).attr(ARIA_ROWINDEX, currentIndex + i);\n            }\n\n            currentIndex = numberOfHeaderRows + previousItems;\n\n            for (i = 0; i < bodyRows.length; i++) {\n                currentRow = bodyRows.eq(i);\n\n                if (this._hasDetails() && currentRow.hasClass(\"k-master-row\")) {\n                    if (previousMaster) {\n                        currentIndex = currentIndex + 2;\n                    } else {\n                        currentIndex = currentIndex + 1;\n                    }\n\n                    previousMaster = true;\n                } else {\n                    currentIndex = currentIndex + 1;\n                    previousMaster = false;\n                }\n\n                currentRow.attr(ARIA_ROWINDEX, currentIndex);\n            }\n\n            currentIndex = numberOfHeaderRows + totalNumberOfItems + 1;\n\n            for (i = 0; i < footerRows.length; i++) {\n                footerRows.eq(i).attr(ARIA_ROWINDEX, currentIndex + i);\n            }\n        },\n\n        _cellsIds: function(elements, prefix, i) {\n            var ownedCells = [],\n            gridId = this._ariaGridId();\n\n            elements.each(function(j, cell) {\n                var id = cell.getAttribute(ID) || gridId + \"_\" + prefix + \"_\" + i + \"_\" + j;\n\n                cell.setAttribute(ID, id);\n\n                ownedCells.push(id);\n            });\n\n            return ownedCells;\n        },\n\n        _trailingColumns: function() {\n            return this._groups() + (this._hasDetails() ? 1 : 0);\n        },\n\n        _element: function() {\n            var that = this,\n                table = that.element;\n\n            if (!table.is(\"table\")) {\n                if (that.options.scrollable) {\n                    table = that.element.find(\"> .k-grid-content > table\");\n                } else {\n                    table = that.element.children(\"table\");\n                }\n\n                if (!table.length) {\n                    table = $(\"<table />\").appendTo(that.element);\n                }\n            }\n\n            table.addClass(\"k-grid-table k-table\");\n            table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n            that.table = table;\n\n            that._wrapper();\n        },\n\n        _createResizeHandle: function(container, th) {\n            var that = this;\n            var indicatorWidth = that.options.columnResizeHandleWidth;\n            var scrollable = that.options.scrollable;\n            var resizeHandle = that.resizeHandle;\n            var halfResizeHandle = (indicatorWidth * 3) / 2;\n            var rtlCorrection = 0;\n            var headerWrap;\n            var ieCorrection;\n            var webkitCorrection;\n            var firefoxCorrection;\n            var leftMargin;\n            var invisibleSpace;\n            var leftBorderWidth;\n            var scrollLeft;\n            var left;\n            var top;\n\n            if (resizeHandle && that.lockedContent && resizeHandle.data(\"th\")[0] !== th[0]) {\n                resizeHandle.off(NS).remove();\n                resizeHandle = null;\n            }\n\n            if (!resizeHandle) {\n                resizeHandle = that.resizeHandle = $('<div class=\"k-resize-handle\"><div class=\"k-resize-handle-inner\"></div></div>');\n                container.append(resizeHandle);\n            }\n\n            scrollLeft = kendo.scrollLeft(container);\n\n            if (isRtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeft = scrollLeft * -1;\n            }\n\n            leftBorderWidth = parseFloat(container.css(\"borderLeftWidth\"));\n\n            left = th.offset().left + scrollLeft - parseFloat(th.css(\"marginLeft\")) - (container.offset().left + leftBorderWidth);\n\n            if (!isRtl) {\n                left += th[0].offsetWidth;\n           } else {\n                if (scrollable) {\n                    rtlCorrection = (left <= scrollLeft ? halfResizeHandle : 0);// when shown on first column headers are misaligned due to the width of the resize handler\n                    headerWrap = th.closest(\".k-grid-header-wrap, .k-grid-header-locked\");\n                    invisibleSpace = headerWrap[0].scrollWidth - headerWrap[0].offsetWidth; // the difference between the entire width and the visible area\n                    leftMargin = parseFloat(headerWrap.css(\"marginLeft\"));\n                    ieCorrection = browser.msie ? 2 * kendo.scrollLeft(headerWrap) + leftBorderWidth - leftMargin - rtlCorrection : 0;\n                    webkitCorrection = -rtlCorrection;\n                    firefoxCorrection = browser.mozilla ? leftBorderWidth - leftMargin - rtlCorrection : 0;\n\n                    left -= webkitCorrection + firefoxCorrection + ieCorrection;\n                }\n            }\n\n            top = th.offset().top - parseFloat(th.css(\"marginTop\")) - (container.offset().top + parseFloat(container.css(\"borderTopWidth\")));\n\n            resizeHandle.css({\n                top: top, //scrollable ? 0 : heightAboveHeader(that.wrapper),\n                left: left - halfResizeHandle,\n                height: outerHeight(th),\n                width: indicatorWidth * 3 - rtlCorrection\n            })\n            .data(\"th\", th)\n            .show();\n\n            resizeHandle.off(DUBLECLICK + NS).on(DUBLECLICK + NS, function() {\n                that._autoFitLeafColumn(parseInt(th.attr(kendo.attr(\"index\")), 10));\n            });\n        },\n\n        _positionColumnResizeHandle: function() {\n            var that = this,\n                lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n\n            that.thead.add(lockedHead).on(MOUSEMOVE + NS, \"tr:not(.k-filter-row) > th\", function(e) {\n                var button = typeof e.buttons !== \"undefined\" ? e.buttons : (e.which || e.button);\n\n                var th = $(this);\n                if (th.hasClass(\"k-group-cell\") || th.hasClass(\"k-hierarchy-cell\")) {\n                    return;\n                }\n\n                if (typeof button !== \"undefined\" && button !== 0) {\n                    //do not create a new resize handle if a mouse button is still pressed\n                    //this happens during resizing or before UserEvents trigger \"start\"\n                    return;\n                }\n\n                if (th[0].hasAttribute(kendo.attr(COLSPAN))) {\n                    // resizing multi-column headers is not supported\n                    return;\n                }\n\n                that._createResizeHandle(th.closest(DIV), th);\n            });\n        },\n\n        _resizeHandleDocumentClick: function(e) {\n            if ($(e.target).closest(\".k-column-active\").length) {\n                return;\n            }\n\n            $(document).off(e);\n\n            this._resetResizeHandleHeader();\n            this._hideResizeHandle();\n        },\n\n        _resetResizeHandleHeader: function() {\n            var th;\n\n            if (!this.resizeHandle) {\n                return;\n            }\n\n            th = $(this.resizeHandle).data(\"th\");\n\n            if (th) {\n                th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS + \",\" + DOT + SVG_ICON_CLASS).show();\n                th.find(DOT + ORDER_CLASS).show();\n                th.find(DOT + HEADER_COLUMN_MENU_CLASS).show();\n                th.find(DOT + FILTER_MENU_CLASS).show();\n            }\n        },\n\n        _hideResizeHandle: function() {\n            if (this.resizeHandle) {\n                this.resizeHandle.data(\"th\")\n                    .removeClass(\"k-column-active\");\n\n                if (this.lockedContent && !this._isMobile) {\n                    this.resizeHandle.off(NS).remove();\n                    this.resizeHandle = null;\n                } else {\n                    this.resizeHandle.hide();\n                }\n            }\n        },\n\n        _positionColumnResizeHandleTouch: function() {\n            var that = this,\n                lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n\n            that._resizeUserEvents = new kendo.UserEvents(lockedHead.add(that.thead), {\n                filter: \"th:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                threshold: 10,\n                minHold: 500,\n                hold: function(e) {\n                    var th = $(e.target);\n\n                    e.preventDefault();\n\n                    if (that.resizeHandle) {\n                        that.resizeHandle.data(\"th\")\n                            .removeClass(\"k-column-active\");\n                        that._resetResizeHandleHeader();\n                    }\n\n                    th.addClass(\"k-column-active\");\n\n                    th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS + \",\" + DOT + SVG_ICON_CLASS).hide();\n                    th.find(DOT + ORDER_CLASS).hide();\n                    th.find(DOT + HEADER_COLUMN_MENU_CLASS).hide();\n                    th.find(DOT + FILTER_MENU_CLASS).hide();\n\n                    that._createResizeHandle(th.closest(DIV), th);\n\n                    if (!that._resizeHandleDocumentClickHandler) {\n                        that._resizeHandleDocumentClickHandler = that._resizeHandleDocumentClick.bind(that);\n                    }\n\n                    $(document).on(\"click\", that._resizeHandleDocumentClickHandler);\n                }\n            });\n        },\n\n        resizeColumn: function(column, columnWidth) {\n            var that = this;\n            var isLocked = !!column.locked;\n            var isHidden = !!column.hidden;\n            var options = this.options;\n            var scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n            var index = isLocked ? inArray(column, visibleLockedColumns(visibleLeafColumns(that.columns))) : inArray(column, visibleNonLockedColumns(visibleLeafColumns(that.columns)));\n            var contentTable = isLocked ? that.lockedTable : that.table;\n            var footer = that.footer || $();\n            var header = isLocked ? that.lockedHeader.find(\"table\") : that.thead.closest(\"table\");\n            var columnMinWidth = column.minResizableWidth || 10;\n            var gridWidth = isLocked ? outerWidth(contentTable.find(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n            var col;\n\n            if (isHidden) {\n                column.width = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n                return;\n            }\n\n            if (that.footer && that.lockedContent) {\n                footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n            }\n\n            if (options.scrollable) {\n\n                col = header.find(\"col:not(.k-group-col,.k-hierarchy-col)\").eq(index)\n                    .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                    .add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n            } else {\n                col = contentTable.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n            }\n\n            if (options.scrollable) {\n                var constrain = false;\n                var totalWidth = that.wrapper.width() - scrollbar;\n                var width = columnWidth = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n\n                if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                    width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                    if (width < 0) {\n                        width = columnWidth;\n                    }\n                    constrain = true;\n                }\n\n                if (width > 10 && width >= columnMinWidth) {\n                    col.css('width', width);\n\n                    if (gridWidth) {\n                        if (constrain) {\n                            width = totalWidth - scrollbar * 2;\n                        } else {\n                            width = gridWidth + (columnWidth - column.width);\n                        }\n\n                        contentTable\n                            .add(header)\n                            .add(footer)\n                            .css('width', width);\n\n                        if (!isLocked) {\n                            that._footerWidth = width;\n                        }\n                    }\n                }\n\n            that._scrollVirtualWrapperOnColumnResize();\n            } else if (columnWidth > 10 && columnWidth >= columnMinWidth) {\n                col.css('width', columnWidth);\n            }\n\n            column.width = columnWidth;\n\n            that._applyLockedContainersWidth();\n            that._syncLockedContentHeight();\n            that._syncLockedHeaderHeight();\n            that._updateStickyColumns();\n        },\n\n        _resizable: function() {\n            var that = this,\n                options = that.options,\n                container,\n                columnStart,\n                columnWidth,\n                columnMinWidth,\n                gridWidth,\n                isMobile = this._isMobile,\n                scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0,\n                isLocked,\n                col, th;\n\n            if (options.resizable === true || (options.resizable && options.resizable.columns === true)) {\n                container = options.scrollable ? that.wrapper.find(\".k-grid-header-wrap\").first() : that.wrapper;\n\n                if (isMobile) {\n                    that._positionColumnResizeHandleTouch(container);\n                } else {\n                    that._positionColumnResizeHandle(container);\n                }\n\n                if (that.resizable) {\n                    that.resizable.destroy();\n                }\n\n                that.resizable = new ui.Resizable(container.add(that.lockedHeader), {\n                    handle: (!!options.scrollable ? \"\" : \">\") + \".k-resize-handle\",\n                    hint: function(handle) {\n                        return $('<div class=\"k-grid-resize-indicator\" />').css({\n                            height: outerHeight(handle.data(\"th\")) + that.tbody.attr(\"clientHeight\")\n                        });\n                    },\n                    start: function(e) {\n                        th = $(e.currentTarget).data(\"th\");\n\n                        if (isMobile) {\n                            that._hideResizeHandle();\n                        }\n\n                        var header = th.closest(\"table\"),\n                            index = $.inArray(th[0], leafDataCells(th.closest(\"thead\")).filter(\":visible\"));\n\n                        isLocked = header.parent().hasClass(\"k-grid-header-locked\");\n\n                        var contentTable = isLocked ? that.lockedTable : that.table,\n                            footer = that.footer || $();\n\n                        if (that.footer && that.lockedContent) {\n                            footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n                        }\n\n                        cursor(that.wrapper, 'col-resize');\n\n                        if (options.scrollable) {\n                            col = header.find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index)\n                                .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                                .add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n                        } else {\n                            col = contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n                        }\n\n                        var columns = $.map(that.columns, function(a) {\n                            return !a.hidden && ((isLocked && a.locked) || ((!isLocked && !a.locked))) ? a : null;\n                        });\n\n                        columnStart = e.x.location;\n                        columnWidth = outerWidth(th);\n                        columnMinWidth = leafColumns(columns)[index].minResizableWidth || 10;\n                        gridWidth = isLocked ? outerWidth(contentTable.children(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n\n                        // fix broken UI in Chrome38+\n                        if (browser.webkit) {\n                            that.wrapper.addClass(\"k-grid-column-resizing\");\n                        }\n                    },\n                    resize: function(e) {\n                        var rtlMultiplier = isRtl ? -1 : 1,\n                            currentWidth = columnWidth + (e.x.location * rtlMultiplier) - (columnStart * rtlMultiplier);\n\n                        if (options.scrollable) {\n                            var footer;\n                            if (isLocked && that.lockedFooter) {\n                                footer = that.lockedFooter.children(\"table\");\n                            } else if (that.footer) {\n                                footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                            }\n                            if (!footer || !footer[0]) {\n                                footer = $();\n                            }\n                            var header = th.closest(\"table\");\n                            var contentTable = isLocked ? that.lockedTable : that.table;\n                            var constrain = false;\n                            var totalWidth = that.wrapper.width() - scrollbar;\n                            var width = currentWidth;\n\n                            if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                                width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                                if (width < 0) {\n                                    width = currentWidth;\n                                }\n                                constrain = true;\n                            }\n\n                            if (width > 10 && width >= columnMinWidth) {\n                                col.css('width', width);\n\n                                if (gridWidth) {\n                                    if (constrain) {\n                                        width = totalWidth - scrollbar * 2;\n                                    } else {\n                                        width = gridWidth + (e.x.location * rtlMultiplier) - (columnStart * rtlMultiplier);\n                                    }\n\n                                    contentTable\n                                        .add(header)\n                                        .add(footer)\n                                        .css('width', width);\n\n                                    if (!isLocked) {\n                                        that._footerWidth = width;\n                                    }\n                                }\n                            }\n\n                            that._scrollVirtualWrapperOnColumnResize();\n                        } else if (currentWidth > 10 && currentWidth >= columnMinWidth) {\n                            col.css('width', currentWidth);\n                        }\n                    },\n                    resizeend: function() {\n                        var newWidth = outerWidth(th),\n                            column,\n                            header;\n\n                        cursor(that.wrapper, \"\");\n\n                        if (browser.webkit) {\n                            that.wrapper.removeClass(\"k-grid-column-resizing\");\n                        }\n\n                        if (th && columnWidth != newWidth) {\n                            header = that.lockedHeader ? that.lockedHeader.find(\"thead\").first().find(TR).first().add(that.thead.find(TR).first()) : th.parent();\n\n                            var index = th.attr(kendo.attr(\"index\"));\n                            if (!index) {\n                                index = header.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").index(th);\n                            }\n                            column = leafColumns(that.columns)[index];\n\n                            column.width = newWidth;\n\n                            that.trigger(COLUMNRESIZE, {\n                                column: column,\n                                oldWidth: columnWidth,\n                                newWidth: newWidth\n                            });\n\n                            that._applyLockedContainersWidth();\n                            that._syncLockedContentHeight();\n                            that._syncLockedHeaderHeight();\n                            that._updateStickyColumns();\n                        }\n\n                        that._resetResizeHandleHeader();\n                        that._hideResizeHandle();\n                        th = null;\n                    }\n                });\n\n            }\n        },\n\n        // Row resizing functionality below\n        _addLockedRowResizing: function(tr) {\n            var index = tr.index();\n\n            return this.lockedTable.find(TR).eq(index)\n                .add(this.tbody.find(TR).eq(index));\n        },\n\n        _getMinRowHeight: function(row) {\n            var minHeight = 0;\n\n            row.each((i, el) => {\n                var currentMinHeight;\n\n                el.style.height = '';\n                currentMinHeight = outerHeight(el);\n\n                if (currentMinHeight > minHeight) {\n                    minHeight = currentMinHeight;\n                }\n            });\n\n            return minHeight;\n        },\n\n        _cacheRowHeight: function(rows, height) {\n            var that = this;\n\n            if (!that._cachedRowsHeight) {\n                that._cachedRowsHeight = {};\n            }\n\n            rows.each((i, el) => {\n                var uid = el.getAttribute(\"data-uid\");\n\n                that._cachedRowsHeight[uid] = height;\n            });\n        },\n\n        _clearCachedRowsHeight: function(rows) {\n            var that = this;\n\n            if (rows && that._cachedRowsHeight) {\n                rows.each((i, el) => {\n                    var uid = el.getAttribute(\"data-uid\");\n\n                    delete that._cachedRowsHeight[uid];\n                });\n            } else {\n                that._cachedRowsHeight = null;\n            }\n        },\n\n        _mapCachedRowsHeight: function(method, target) {\n            var input = this._cachedRowsHeight,\n                ds = this.dataSource,\n                output = {};\n\n            Object.keys(input).forEach((key) => {\n                var item = ds[method](key);\n\n                output[item[target]] = input[key];\n            });\n\n            this._cachedRowsHeight = output;\n        },\n\n        _rowResizerDblClick: function() {\n            var that = this,\n                resizer = that.rowResizer,\n                row = resizer.data(TR),\n                oldHeight = outerHeight(row),\n                newHeight, rows;\n\n            if (row.hasClass(SELECTED)) {\n                rows = that.select();\n            } else {\n                rows = row;\n            }\n\n            if (that.lockedTable) {\n                row = that._addLockedRowResizing(row);\n\n                if (row.hasClass(SELECTED)) {\n                    rows = that.lockedTable.find(DOT + SELECTED);\n                } else {\n                    rows = that.lockedTable.find(TR).eq(row.index());\n                }\n\n                rows.each((i, el) => {\n                    var rowIndex = el.rowIndex,\n                        rowPair = $(el).add(that.tbody.find(TR).eq(rowIndex)),\n                        pairMinHeight = that._getMinRowHeight(rowPair);\n\n                    rowPair.css(HEIGHT, pairMinHeight);\n                });\n            } else {\n                rows.css(HEIGHT, AUTO);\n            }\n\n            that._clearCachedRowsHeight(rows);\n\n            resizer.removeClass(HOVER);\n            resizer.removeClass(ACTIVE);\n\n            newHeight = outerHeight(row);\n\n            if (oldHeight != newHeight) {\n                that.trigger(ROWRESIZE, {\n                    row,\n                    rows,\n                    oldHeight,\n                    newHeight\n                });\n            }\n        },\n\n        _setupRowResizer(resizer, row, top) {\n            resizer\n                .data(TR, row)\n                .css({\n                    top: top\n                });\n        },\n\n        _attachRowResizerEvents: function() {\n            var rowResizer = this.rowResizer,\n                delay = 200,\n                isIn = false;\n\n            rowResizer\n                .on(MOUSEDOWN + NS, (e) => {\n                    if (e.button === 0) {\n                        rowResizer.removeClass(HOVER);\n                        rowResizer.addClass(ACTIVE);\n                    }\n                })\n                .on(MOUSEUP + NS, (e) => {\n                    if (e.button === 0) {\n                        rowResizer.removeClass(ACTIVE);\n                        rowResizer.addClass(HOVER);\n                    }\n                })\n                .on(MOUSEENTER + NS, () => {\n                    isIn = true;\n\n                    setTimeout(() => {\n                        if (isIn) {\n                            rowResizer.addClass(HOVER);\n                        }\n                    }, delay);\n                })\n                .on(MOUSELEAVE + NS, () => {\n                    isIn = false;\n                    rowResizer.removeClass(HOVER);\n                });\n        },\n\n        _getResizerTop: function(tr, container) {\n            var resizer = this.rowResizer,\n                inner = resizer.find(DOT + ROW_RESIZER)[0],\n                paddingTop = parseInt(getComputedStyle(resizer[0]).paddingTop);\n\n            return tr.offset().top -\n                parseFloat(tr.css(\"marginTop\")) -\n                (container.offset().top + parseFloat(container.css(\"borderTopWidth\"))) -\n                inner.clientHeight -\n                paddingTop +\n                container.scrollTop();\n        },\n\n        _getResizerContainer: function() {\n            var container = this.tbody.closest(DIV);\n\n            if (this.lockedTable) {\n                container = container.closest(DOT + \"k-grid-container\");\n            }\n\n            return container;\n        },\n\n        _createRowResizer: function(e) {\n            var that = this,\n                tr = $(e.currentTarget),\n                targetHeight = e.currentTarget.clientHeight,\n                positionIntarget = e.offsetY,\n                rowResizer = that.rowResizer,\n                previousRow = tr.prev(TR + \":visible\"),\n                container = that._getResizerContainer(),\n                top;\n\n            if (!rowResizer) {\n                rowResizer = that.rowResizer = $('<div class=\"k-resizer-wrap\"><div class=\"k-row-resizer\"></div></div>');\n                container.append(rowResizer);\n                that._attachRowResizerEvents();\n\n                rowResizer.off(DUBLECLICK + NS).on(DUBLECLICK + NS, that._rowResizerDblClick.bind(that));\n            }\n\n            top = that._getResizerTop(tr, container);\n\n            if (previousRow.length !== 0 && targetHeight / 2 > positionIntarget) {\n                if (!previousRow.hasClass(GROUPING_ROW)) {\n                    that._setupRowResizer(rowResizer, previousRow, top);\n                }\n            } else {\n                if (!tr.hasClass(GROUPING_ROW)) {\n                    that._setupRowResizer(rowResizer, tr, top + targetHeight);\n                }\n            }\n        },\n\n        _detachRowResizerEvents: function() {\n            var rowResizer = this.rowResizer;\n\n            rowResizer\n                .off(MOUSEDOWN + NS)\n                .off(MOUSEUP + NS)\n                .off(MOUSEENTER + NS)\n                .off(MOUSELEAVE + NS);\n        },\n\n        _mapResizedRows: function(rows, multiSelectionLocked, newHeight) {\n            var that = this;\n\n            rows.each((i, el) => {\n                var minHeight;\n\n                if (multiSelectionLocked) {\n                    var rowIndex = el.rowIndex,\n                        pairNew = newHeight,\n                        pairMin = 0,\n                        rowPair = $(el).add(that.tbody.find(TR).eq(rowIndex));\n\n                    rowPair.each((i, r) => {\n                        var currentMinHeight;\n\n                        r.style.height = '';\n                        currentMinHeight = outerHeight(r);\n\n                        if (currentMinHeight > pairMin) {\n                            pairMin = currentMinHeight;\n                        }\n                    });\n\n                    if (pairNew < pairMin) {\n                        pairNew = pairMin;\n\n                        that._clearCachedRowsHeight(rowPair.eq(0));\n                    } else {\n                        that._cacheRowHeight(rowPair.eq(0), pairNew);\n                    }\n\n                    rowPair.css(HEIGHT, pairNew);\n                } else {\n                    el.style.height = '';\n                    minHeight = outerHeight(el);\n\n                    if (newHeight > minHeight) {\n                        el.style.height = newHeight + PX;\n\n                        that._cacheRowHeight($(el), newHeight);\n                    } else {\n                        that._clearCachedRowsHeight($(el));\n                    }\n                }\n            });\n        },\n\n        _rowResizing: function() {\n            var that = this,\n                options = that.options,\n                container, rowStart, rowHeight, tr;\n\n            if (options.resizable && options.resizable.rows === true) {\n                that.tbody\n                    .parent()\n                    .add(that.lockedTable)\n                    .on(MOUSEMOVE + NS, \".k-grid-footer tr, .k-table-tbody tr\", that._createRowResizer.bind(that));\n\n                if (that.rowResizing) {\n                    that.rowResizing.destroy();\n                }\n\n                container = that._getResizerContainer();\n\n                that.rowResizing = new ui.Resizable(container, {\n                    handle: DOT + ROW_RESIZER_WRAP,\n                    start: function(e) {\n                        tr = $(e.currentTarget).data(TR);\n\n                        if (that.lockedTable) {\n                            tr = that._addLockedRowResizing(tr);\n                        }\n\n                        tr.addClass(HOVER);\n\n                        that._detachRowResizerEvents();\n\n                        rowStart = e.y.location;\n                        rowHeight = outerHeight(tr);\n                    },\n                    resize: function(e) {\n                        var newHeight = rowHeight + e.y.location - rowStart,\n                            minHeight = 0;\n\n                        if (tr.length > 1) {\n                            minHeight = that._getMinRowHeight(tr);\n                        }\n\n                        if (newHeight < minHeight) {\n                            newHeight = minHeight;\n                        }\n\n                        tr.css('height', newHeight);\n\n                        that._setupRowResizer(that.rowResizer, tr, that._getResizerTop(tr, container) + newHeight);\n                    },\n                    resizeend: function() {\n                        var newHeight = outerHeight(tr),\n                            multiSelectionLocked = false,\n                            rows;\n\n                        if (tr.hasClass(SELECTED)) {\n                            rows = that.select();\n\n                            if (tr.length > 1 && rows.length > tr.length) {\n                                rows = that.lockedTable.find(DOT + SELECTED).not(tr);\n                                multiSelectionLocked = true;\n                            }\n                        } else {\n                            rows = tr;\n                        }\n\n                        that._mapResizedRows(rows, multiSelectionLocked, newHeight);\n\n                        tr.removeClass(HOVER);\n\n                        that.rowResizer.removeClass(ACTIVE);\n                        that.rowResizer.addClass(HOVER);\n                        that._attachRowResizerEvents();\n\n                        if (multiSelectionLocked) {\n                            rows = that.select();\n                        }\n\n                        if (rowHeight != newHeight) {\n                            that.trigger(ROWRESIZE, {\n                                row: tr,\n                                rows,\n                                oldHeight: rowHeight,\n                                newHeight\n                            });\n                        }\n\n                        tr = null;\n                    }\n                });\n            }\n        },\n\n        _draggable: function() {\n            var that = this,\n                reorderable = that.options.reorderable;\n\n            if (reorderable === true || (reorderable && reorderable.columns)) {\n\n                if (that._draggableInstance) {\n                    that._draggableInstance.destroy();\n                }\n\n                var header = that.wrapper.children(\".k-grid-header\");\n\n                that._draggableInstance = that.wrapper.kendoDraggable({\n                    group: kendo.guid(),\n                    autoScroll: true,\n                    filter: that.content ? \".k-grid-header:first \" + HEADERCELLS : \"table:first>.k-grid-header \" + HEADERCELLS,\n                    dragstart: function() {\n                        header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\").on(\"scroll\" + NS + \"scrolling\", function(e) {\n                            if (that.virtualScrollable) {\n                                kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\"), this.scrollLeft);\n                            } else {\n                                kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                            }\n                        });\n                    },\n                    dragend: function() {\n                        that._resetResizeHandleHeader();\n                        header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\");\n                    },\n                    drag: function() {\n                        that._hideResizeHandle();\n                    },\n                    hint: function(target) {\n                        var title = target.attr(kendo.attr(\"title\"));\n                        if (title) {\n                            title = kendo.htmlEncode(title);\n                        }\n                        return $('<div class=\"k-reorder-clue k-drag-clue\" />')\n                            .html(title || target.attr(kendo.attr(\"field\")) || target.text())\n                            .prepend(kendo.ui.icon({ icon: \"cancel\", iconClass: \"k-drag-status\" }));\n                    }\n                }).data(\"kendoDraggable\");\n            }\n        },\n\n        _reorderable: function() {\n            var that = this,\n                reorderable = that.options.reorderable;\n\n            if (reorderable === true || (reorderable && reorderable.columns)) {\n                if (that.wrapper.data(\"kendoReorderable\")) {\n                    that.wrapper.data(\"kendoReorderable\").destroy();\n                }\n\n                that.wrapper.kendoReorderable({\n                    draggable: that._draggableInstance,\n                    dropFilter: HEADERCELLS,\n                    dragOverContainers: function(sourceIndex, targetIndex) {\n                        var columns = flatColumnsInDomOrder(that.columns);\n                        return columns[sourceIndex].lockable !== false && targetParentContainerIndex(columns, that.columns, sourceIndex, targetIndex) > -1;\n                    },\n                    inSameContainer: function(e) {\n                        var sourceParent = $(e.source).parent()[0],\n                            targetParent = $(e.target).parent()[0];\n\n                        /* If there are locked columns, check if the grid header is the same instead.\n                        Otherwise the locked/unlocked headers are treated as separate(in the case of column reordering they shouldn't be). */\n                        if (that._isLocked()) {\n                            sourceParent = $(e.source.closest(\".k-grid-header\"))[0];\n                            targetParent = $(e.target.closest(\".k-grid-header\"))[0];\n                        }\n\n                        return sourceParent === targetParent && targetParentContainerIndex(flatColumnsInDomOrder(that.columns), that.columns, e.sourceIndex, e.targetIndex) > -1;\n                    },\n                    change: function(e) {\n                        var columns = flatColumnsInDomOrder(that.columns);\n                        var column = columns[e.oldIndex];\n                        var newIndex = targetParentContainerIndex(columns, that.columns, e.oldIndex, e.newIndex);\n\n                        that.trigger(COLUMNREORDER, {\n                            newIndex: newIndex,\n                            oldIndex: inArray(column, columns),\n                            column: column\n                        });\n\n                        that.reorderColumn(newIndex, column, e.position === \"before\");\n                    }\n                });\n            }\n        },\n\n        _reorderHeader: function(sources, target, before, container) {\n            var that = this;\n            var sourcePosition = columnPosition(sources[0], that.columns);\n            var destPosition = columnPosition(target, that.columns);\n            var action;\n            var ths;\n\n            var leafs = [];\n            for (var idx = 0; idx < sources.length; idx++) {\n                if (sources[idx].columns) {\n                    leafs = leafs.concat(sources[idx].columns);\n                }\n            }\n            if (container) {\n                ths = elements(container, container, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n            } else {\n                ths = elements(that.lockedHeader, that.thead, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n            }\n\n            var sourceLockedColumns = lockedColumns(sources).length;\n            var targetLockedColumns = lockedColumns([target]).length;\n\n            if (leafs.length) {\n                if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                    action = \"prepend\";\n                    moveCellsBetweenContainers(sources, target, leafs, that.columns, that.lockedHeader.find(\"thead\"), that.thead, this._groups(), action);\n                } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                    action = destPosition.cell === 0 && sources[0].columns && !target.columns && !that._group ? \"prepend\" : \"append\";\n                    moveCellsBetweenContainers(sources, target, leafs, nonLockedColumns(that.columns), that.thead, that.lockedHeader.find(\"thead\"), this._groups(), action);\n                }\n\n                if (target.columns || sourcePosition.cell - destPosition.cell > 1 || destPosition.cell - sourcePosition.cell > 1) {\n                    target = findReorderTarget(that.columns, target, sources[0], before, that.columns);\n                    if (target) {\n                        if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                            that._reorderHeader(leafs, target, before, that.thead);\n                        } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                            that._reorderHeader(leafs, target, before, that.lockedHead);\n                        } else {\n                            that._reorderHeader(leafs, target, before);\n                        }\n                    }\n                }\n            } else if (sourceLockedColumns !== targetLockedColumns) { // move between containers\n                updateCellRowSpan(ths[sourcePosition.cell], that.columns, sourceLockedColumns);\n            }\n\n            reorder(ths, sourcePosition.cell, destPosition.cell, before, sources.length);\n        },\n\n        _reorderContent: function(sources, destination, before) {\n            var that = this;\n            var lockedRows = $();\n            var source = sources[0];\n            var visibleSources = visibleColumns(sources);\n            var sourceIndex = inArray(source, leafColumns(that.columns));\n            var destIndex = inArray(destination, leafColumns(that.columns));\n\n            var colSourceIndex = inArray(visibleSources[0], visibleLeafColumns(that.columns));\n            var colDest = inArray(destination, visibleLeafColumns(that.columns));\n            var lockedCount = lockedColumns(that.columns).length;\n            var isLocked = !!destination.locked;\n            var footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n            var headerCol, footerCol, beforeVisibleColumn;\n            headerCol = footerCol = colDest;\n\n            if (destination.hidden) {\n                var columnsArray = isLocked ? lockedColumns(that.columns) : nonLockedColumns(that.columns);\n\n                if (visibleColumns(columnsArray).length > 0) {\n                    headerCol = footerCol = colDest = this._findClosestVisibleColumnIndex(columnsArray, destIndex);\n                    beforeVisibleColumn = visibleColumns(columnsArray.slice(destIndex)).length > 0;\n                }\n                else {\n                    if (isLocked) {\n                        colDest = that.lockedTable.find(\"colgroup\");\n                        headerCol = that.lockedHeader.find(\"colgroup\");\n                        footerCol = $(that.lockedFooter).find(\">table>colgroup\");\n                    } else {\n                        colDest = that.tbody.prev();\n                        headerCol = that.thead.prev();\n                        footerCol = footer.find(\".k-grid-footer-wrap\").find(\">table>colgroup\");\n                    }\n                }\n            }\n\n            if (that._hasFilterRow()) {\n                reorder(that.wrapper.find(\".k-filter-row td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n            }\n\n            if (colSourceIndex >= 0) {\n                reorder(elements(that.lockedHeader, that.thead.prev(), COLGROUP), colSourceIndex, headerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n            }\n\n            if (that.options.scrollable) {\n                if (colSourceIndex >= 0 && !that._hasVirtualColumns()) {\n                    reorder(elements(that.lockedTable, that.tbody.prev(), COLGROUP), colSourceIndex, colDest, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                }\n            }\n\n            if (footer && footer.length) {\n                if (colSourceIndex >= 0) {\n                    reorder(elements(that.lockedFooter, footer.find(\".k-grid-footer-wrap\"), \">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)\"), colSourceIndex, footerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                }\n                reorder(footer.find(\".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n            }\n\n            var rows = that.tbody.children(\":not(.k-grouping-row,.k-detail-row)\");\n            if (that.lockedTable) {\n                if (lockedCount > destIndex) {\n                    if (lockedCount <= sourceIndex) {\n                        updateColspan(\n                            that.lockedTable.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                            that.table.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                            sources.length\n                        );\n                    }\n                } else if (lockedCount > sourceIndex) {\n                    updateColspan(\n                        that.table.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                        that.lockedTable.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                        sources.length\n                    );\n                }\n\n                lockedRows = that.lockedTable.find(\">tbody>tr:not(.k-grouping-row,.k-detail-row)\");\n            }\n\n            for (var idx = 0, length = rows.length; idx < length; idx += 1) {\n                reorder(elements(lockedRows[idx], rows[idx], \">td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n            }\n        },\n\n        _findClosestVisibleColumnIndex: function(columns, columnIndex) {\n            var columnsArray = visibleColumns(columns.slice(columnIndex)).length > 0 ? columns.slice(columnIndex) : columns.slice(0, columnIndex + 1).reverse(),\n                closestVisibleColumn = visibleColumns(columnsArray)[0];\n\n            return inArray(closestVisibleColumn, visibleColumns(this.columns));\n        },\n\n        _autoFitLeafColumn: function(leafIndex) {\n            this.autoFitColumn(leafColumns(this.columns)[leafIndex]);\n        },\n\n        _hasReorderableRows: function() {\n            return this._hasDragHandleColumn || (this.options.reorderable && this.options.reorderable.rows);\n        },\n\n        _draggableRows: function() {\n            var that = this,\n                selectable = that._checkBoxSelection ||\n                    (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell),\n                clickMoveClick = false,\n                isMobile = !!(that._isMobile || kendo.support.mobileOS);\n\n            if (that._draggableRowsInstance) {\n                that._draggableRowsInstance.destroy();\n            }\n\n            if (this.options.reorderable.rows.clickMoveClick !== false && this._hasDragHandleColumn) {\n                clickMoveClick = true;\n            }\n\n            that._draggableRowsInstance = that.tbody.kendoDraggable({\n                holdToDrag: isMobile,\n                showHintOnHold: isMobile,\n                preventOsHoldFeatures: isMobile,\n                group: \"row-draggable\",\n                autoScroll: true,\n                filter: (selectable ? \" > .k-selected\" : \" > \" + ITEMROW) + (that._hasDragHandleColumn ? \" > .k-drag-cell\" : \"\"),\n                hint: function(target) {\n                    var hint = $('<div class=\"k-reorder-clue k-drag-clue\">' + kendo.ui.icon({ icon: \"cancel\", iconClass: \"k-drag-status\" }) + '</div>');\n\n                    if (selectable && that.select().length > 1) {\n                        hint.append(\"<span>\" + that.select().length + \" \" + encode(that.options.messages.itemsSelected) + \"</span>\");\n                    } else {\n                        var clone = target.closest(ITEMROW).clone();\n                        clone.find(\"td.k-command-cell\").remove();\n                        clone.find(\"td\").each(function(index, elm) {\n                            hint.append(\"<span>\" + elm.innerText + \"&nbsp;</span>\");\n                        });\n                    }\n\n                    return hint;\n                },\n                clickMoveClick: clickMoveClick,\n                cursorOffset: { top: 0, left: 0 }\n            }).data(\"kendoDraggable\");\n        },\n\n        _reorderableRows: function() {\n            var that = this,\n                selectable = that._checkBoxSelection ||\n                            (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n            if (that.tbody.data(\"kendoReorderable\")) {\n                that.tbody.data(\"kendoReorderable\").destroy();\n            }\n\n            that.tbody.kendoReorderable({\n                smartPosition: false,\n                draggable: that._draggableRowsInstance,\n                dragOverContainers: function(sourceIndex, targetIndex) {\n                    var result = true,\n                        target = $(ITEMROW, that.content).eq(targetIndex);\n\n                    if (selectable) {\n                        result = !target.is(\".k-selected\");\n                    }\n\n                    return result;\n                },\n                inSameContainer: function(e) {\n                    if (selectable) {\n                        return !$(e.target).is(\".k-selected\");\n                    }\n\n                    return true;\n                },\n                dropFilter: \"> \" + ITEMROW,\n                allowIcon: \"insert-middle\",\n                orientation: \"vertical\",\n                reorderDropCue: $('<div class=\"k-drop-hint k-drop-hint-h\"><div class=\"k-drop-hint-start\"></div><div class=\"k-drop-hint-line\"></div></div>'),\n                positionDropCue: function(reorderDropCue, dropTarget) {\n                    var firstCellLeft = kendo.getOffset(dropTarget.children(DATA_CELL).eq(0)).left;\n                    reorderDropCue.css({\n                        transform: \"translate(0,-50%)\",\n                        left: firstCellLeft\n                    });\n                },\n                externalDraggable: function(e) {\n                    var draggable = e.draggable;\n\n                    if (draggable) {\n                        return draggable;\n                    }\n                },\n                change: function(e) {\n                    that._triggerRowRorder(e);\n                }\n            });\n        },\n\n        _triggerRowRorder: function(e) {\n            var that = this,\n                args = {\n                    newIndex: e.position === \"after\" ? e.newIndex + 1 : e.newIndex,\n                    oldIndex: e.oldIndex\n                },\n                row = e.element,\n                selectable = that._checkBoxSelection ||\n                (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n            if (selectable && that.select().length > 1) {\n                args = extend(args, {\n                    rows: that.select()\n                });\n            } else {\n                args = extend(args, {\n                    row: row\n                });\n            }\n\n            if (!that.trigger(ROWREORDER, args)) {\n                that.reorderRows(selectable ? that.select() : row, args.newIndex);\n            }\n        },\n\n        reorderRowTo: function(row, index) {\n            var that = this,\n                item = that.dataItem(row),\n                oldIndex = row.index();\n\n            if (index < 0 || index === oldIndex) {\n                return;\n            }\n\n            if (!that.trigger(ROWREORDER, {\n                row: row,\n                oldIndex: row.index(),\n                newIndex: index\n            })) {\n                that.dataSource.pushMove(index, [item]);\n            }\n        },\n\n        reorderRows: function(rows, index) {\n            var that = this,\n                dataSource = that.dataSource,\n                rowsLength = that.tbody.children(ITEMROW).length,\n                targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(index)),\n                items = rows.toArray().map(function(row) {\n                    return that.dataItem(row);\n                });\n\n            if (!targetItem) {\n                // If index is after last row dataItem wouldn't exist\n                targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(rowsLength - 1));\n                index = dataSource.indexOf(targetItem) + 1;\n            } else {\n                index = dataSource.indexOf(targetItem);\n            }\n\n            if (index >= 0) {\n                that._rowDropping = true;\n                dataSource.pushMove(index, items);\n                that._rowDropping = false;\n            }\n        },\n\n        autoFitColumns: function(columns) {\n            var that = this;\n\n            columns = columns || that.columns;\n\n            for (var i = 0; i < columns.length; i++) {\n                var column = columns[i];\n\n                if (column.columns) {\n                    that.autoFitColumns(column.columns);\n                } else {\n                    that.autoFitColumn(column);\n                }\n            }\n        },\n\n        autoFitColumn: function(column) {\n            var that = this,\n                options = that.options,\n                columns = that.columns,\n                index,\n                th,\n                headerTable,\n                leafCols,\n                isLocked,\n                visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                col,\n                minWidth,\n                contentDiv, scrollLeft,\n                notGroupOrHierarchyCol = \"col:not(.k-group-col):not(.k-hierarchy-col)\",\n                notGroupOrHierarchyVisibleCell = \"td:visible:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                menu,\n                thWidth;\n\n            //  retrieve the column object, depending on the method argument\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else if (isPlainObject(column)) {\n                column = grep(flatColumns(columns), function(item) {\n                    return item === column;\n                })[0];\n            } else {\n                column = grep(flatColumns(columns), function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !isVisible(column)) {\n                return;\n            }\n\n            leafCols = leafColumns(columns);\n            minWidth = column.minResizableWidth;\n            index = inArray(column, leafCols);\n            isLocked = column.locked;\n\n            if (isLocked) {\n                headerTable = that.lockedHeader.children(\"table\");\n            } else {\n                headerTable = that.thead.parent();\n            }\n\n            th = headerTable.find(\"[data-index='\" + index + \"']\");\n            menu = th.find('a.k-grid-column-menu, a.k-grid-filter-menu');\n\n            var contentTable = isLocked ? that.lockedTable : that.table,\n                footer = that.footer || $();\n\n            if (that.footer && that.lockedContent) {\n                footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n            }\n\n            var footerTable = footer.find(\"table\").first();\n\n            if (that.lockedHeader && !isLocked) {\n                index -= visibleLocked;\n            }\n\n            // adjust column index, depending on previous hidden columns\n            for (var j = 0; j < leafCols.length; j++) {\n                if (leafCols[j] === column) {\n                    break;\n                } else {\n                    if (leafCols[j].hidden) {\n                        index--;\n                    }\n                }\n            }\n\n            // get col elements\n            if (options.scrollable) {\n                col = headerTable.find(notGroupOrHierarchyCol).eq(index)\n                    .add(contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index))\n                    .add(footerTable.find(\"colgroup\").find(notGroupOrHierarchyCol).eq(index));\n\n                if (!isLocked) {\n                    contentDiv = contentTable.parent();\n                    scrollLeft = kendo.scrollLeft(contentDiv);\n                }\n            } else {\n                col = contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index);\n            }\n\n            var tables = headerTable.add(contentTable).add(footerTable);\n\n            if (browser.safari) {\n                th.css(\"white-space\", \"initial\");\n            }\n\n            var oldColumnWidth = outerWidth(th);\n\n            // reset the table and autofitted column widths\n            // if scrolling is disabled, we need some additional repainting of the table\n            col.width(\"\");\n            tables.css(\"table-layout\", \"fixed\");\n            col.width(AUTO);\n            tables.addClass(\"k-autofitting\");\n            tables.css(\"table-layout\", \"\");\n\n            thWidth = menu.length ? outerWidth(menu) + outerWidth(th) : outerWidth(th);\n\n            // +1 is required by IE, regardless of the border widths, otherwise unexpected wrapping may occur with hyphenated text\n            var newColumnWidth = Math.ceil(Math.max(\n                thWidth,\n                outerWidth(contentTable.find(\"tr:not(.k-grouping-row)\").eq(0).children(notGroupOrHierarchyVisibleCell).eq(index)),\n                outerWidth(footerTable.find(TR).eq(0).children(notGroupOrHierarchyVisibleCell).eq(index))\n            )) + 1;\n\n            if (minWidth && minWidth > newColumnWidth) {\n                newColumnWidth = minWidth;\n            }\n\n            col.width(newColumnWidth);\n            column.width = newColumnWidth;\n\n            if (browser.safari) {\n                th.css(\"white-space\", \"\");\n            }\n\n            // if all visible columns have widths, the table needs a pixel width as well\n            if (options.scrollable) {\n                var cols = headerTable.find(\"col\"),\n                    colWidth,\n                    totalWidth = 0;\n                for (var idx = 0, length = cols.length; idx < length; idx += 1) {\n                    colWidth = cols[idx].style.width;\n                    if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                        totalWidth += parseInt(colWidth, 10);\n                    } else if (cols.eq(idx).hasClass(\"k-group-col\")) {\n                        totalWidth += parseInt(cols.eq(idx).width(), 10);\n                    } else {\n                        totalWidth = 0;\n                        break;\n                    }\n                }\n\n                if (totalWidth) {\n                    tables.each(function() {\n                        this.style.width = totalWidth + PX;\n                    });\n                }\n            }\n\n            tables.removeClass(\"k-autofitting\");\n\n            if (scrollLeft) {\n                kendo.scrollLeft(contentDiv, scrollLeft);\n            }\n\n            that.trigger(COLUMNRESIZE, {\n                column: column,\n                oldWidth: oldColumnWidth,\n                newWidth: newColumnWidth\n            });\n\n            that._applyLockedContainersWidth();\n            that._syncLockedContentHeight();\n            that._syncLockedHeaderHeight();\n            that._updateStickyColumns();\n        },\n\n        reorderColumn: function(destIndex, column, before) {\n            var that = this,\n                parent = columnParent(column, that.columns),\n                columns = parent ? parent.columns : that.columns,\n                sourceIndex = inArray(column, columns),\n                destColumn = columns[destIndex],\n                virtualScroll = that.virtualScroll || {},\n                lockChanged,\n                isLocked = !!destColumn.locked,\n                lockedCount = lockedColumns(that.columns).length,\n                groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (sourceIndex === destIndex) {\n                return;\n            }\n\n            if (!column.locked && isLocked && nonLockedColumns(that.columns).length == 1) {\n                return;\n            }\n\n            if (column.locked && !isLocked && lockedCount == 1) {\n                return;\n            }\n\n            that._hideResizeHandle();\n\n            if (before === undefined$1) {\n                before = destIndex < sourceIndex;\n            }\n\n            var sourceColumns = [column];\n\n            that._reorderHeader(sourceColumns, destColumn, before);\n\n            if (that.lockedHeader) {\n                removeEmptyRows(that.thead);\n                removeEmptyRows(that.lockedHeader);\n            }\n\n            if (destColumn.columns) {\n                destColumn = leafColumns(destColumn.columns);\n                destColumn = destColumn[before ? 0 : destColumn.length - 1];\n            }\n\n            if (column.columns) {\n                sourceColumns = leafColumns(column.columns);\n            }\n\n            that._reorderContent(sourceColumns, destColumn, before);\n\n            lockChanged = !!column.locked;\n            lockChanged = lockChanged != isLocked;\n            column.locked = isLocked;\n\n            columns.splice(before ? destIndex : destIndex + 1, 0, column);\n            columns.splice(sourceIndex < destIndex ? sourceIndex : sourceIndex + 1, 1);\n\n            that._updateLockedCols();\n            that._updateCols();\n            that._templates();\n\n            that._updateColumnCellIndex();\n            that._updateColumnSorters();\n\n            if (groupHeaderColumnTemplateColumns.length > 0) {\n                that._renderGroupRows();\n            }\n            that._updateTablesWidth();\n            that._applyLockedContainersWidth();\n            that._syncLockedHeaderHeight();\n            that._syncLockedContentHeight();\n            that._updateFirstColumnClass();\n            that._updateStickyColumns();\n\n            if (virtualScroll.columns) {\n                that.refresh();\n            }\n\n            if (!lockChanged) {\n                return;\n            }\n\n            if (isLocked) {\n                that.trigger(COLUMNLOCK, {\n                    column: column\n                });\n            } else {\n                that.trigger(COLUMNUNLOCK, {\n                    column: column\n                });\n            }\n        },\n\n        _updateColumnCellIndex: function() {\n            var header;\n            var offset = 0;\n\n            if (this.lockedHeader) {\n                header = this.lockedHeader.find(\"thead\");\n                offset = updateCellIndex(header, lockedColumns(this.columns));\n            }\n            updateCellIndex(this.thead, nonLockedColumns(this.columns), offset);\n        },\n\n        lockColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || column.locked || column.hidden) {\n                return;\n            }\n\n            if (column.sticky) {\n                this.unstickColumn(columns.indexOf(column));\n            }\n\n            var index = lockedColumns(columns).length - 1;\n            this.reorderColumn(index, column, false);\n        },\n\n        unlockColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !column.locked || column.hidden) {\n                return;\n            }\n\n            var index = lockedColumns(columns).length;\n            this.reorderColumn(index, column, true);\n        },\n\n        stickColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || column.sticky || column.hidden) {\n                return;\n            }\n\n            if (column.locked) {\n                this.unlockColumn(columns.indexOf(column));\n\n                if (column.locked) {\n                    return;\n                }\n            }\n\n            column.sticky = true;\n            this._updateStickyColumns();\n        },\n\n        unstickColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !column.sticky || column.locked || column.hidden) {\n                return;\n            }\n\n            this._removeStickyAttributes([column]);\n            this._removeStickyStyles(stickyColumns(columns));\n\n            column.sticky = false;\n            this._updateStickyColumns();\n\n            if (this._anyStickyColumns() === 0) {\n                this._templates();\n                if (this._hasFilterRow()) {\n                    this._updateStickyFilterCells();\n                }\n            }\n        },\n\n        cellIndex: function(td) {\n            var lockedColumnOffset = 0;\n\n            if (this.lockedTable && !$.contains(this.lockedTable[0], td[0])) {\n                lockedColumnOffset = leafColumns(lockedColumns(this.columns)).length;\n            }\n\n            return $(td).parent().children('td:not(.k-group-cell,.k-hierarchy-cell)').index(td) + lockedColumnOffset;\n        },\n\n        _modelForContainer: function(container) {\n            container = $(container);\n\n            if (!container.is(TR) && this._editMode() !== \"popup\") {\n                container = container.closest(TR);\n            }\n\n            var id = container.attr(kendo.attr(\"uid\")) || container.find(\".k-popup-edit-form\").attr(kendo.attr(\"uid\"));\n\n            return this.dataSource.getByUid(id);\n        },\n\n        _calculateColumnIndex: function(cell) {\n            var cellIndex = this.cellIndex(cell);\n            var virtualOffset = 0;\n\n            if (this._hasVirtualColumns()) {\n                virtualOffset = parseInt($(cell).closest(TR).find(\"td\").first().attr(\"colspan\"), 10);\n                virtualOffset = (virtualOffset > 1 ? virtualOffset - 1 : 0);\n            }\n\n            return cellIndex + virtualOffset;\n        },\n\n        _editable: function() {\n            var that = this,\n                editable = that.options.editable,\n                handler = function() {\n                    var target = activeElement(),\n                        cell = that._editContainer;\n\n                    if (cell && cell[0] && !$.contains(cell[0], target) && cell[0] !== target && !$(target).closest(\".k-animation-container\").length) {\n                        if (that.editable.end()) {\n                            that.closeCell();\n                        } else {\n                            that._scrollVirtualWrapper();\n                        }\n                    }\n                },\n                useDoubleTapEditing = !!(that._isMobile || kendo.support.mobileOS);\n\n            if (editable) {\n                this.wrapper.addClass(\"k-editable\");\n\n                var mode = that._editMode();\n                if (mode === \"incell\") {\n                    that.table.add(that.lockedTable)\n                        .on(MOUSEDOWN + NS, NAVROW + \">\" + NAVCELL, function(e) {\n                            var target = $(e.target);\n                            if (that._editMode() === \"incell\" && target.hasClass(\"k-checkbox\") && target.prev().attr(kendo.attr(\"bind\"))) {\n                                e.preventDefault();\n                            }\n                        });\n\n                    if (editable.update !== false) {\n                        if (isMac) {\n                            that.wrapper\n                                .on(CLICK + NS, \".k-edit-cell > input[type='checkbox']\", function(e) {\n                                    // checking /unchecking a checkbox does not change the document.activeElement to be the checkbox\n                                    // this is necessary for the \"focusout\" event to be fired\n                                    $(e.target).trigger(\"focus\");\n                                })\n                                .on(CLICK + NS, \".k-edit-cell\", function(e) {\n                                    if (!$(e.target).is(\"input\")) {\n                                        $(e.currentTarget).find(\"input[type='checkbox']\").trigger(\"focus\");\n                                    }\n                                })\n                                .on(MOUSEDOWN + NS, \"tr:not(.k-grouping-row) > td\", function(e) {\n                                    var editContainer = that._editContainer;\n\n                                    if (editContainer && editContainer[0] && ($.contains(editContainer[0], e.target) || editContainer[0] === e.target)) {\n                                        that._mousedownOnEditCell = true;\n                                    } else {\n                                        that._mousedownOnEditCell = false;\n                                    }\n                                });\n                        }\n\n                        that.editableUserEvents = new kendo.UserEvents(that.wrapper, {\n                            filter: \"tr:not(.k-grouping-row) > td\",\n                            allowSelection: true,\n                            supportDoubleTap: useDoubleTapEditing,\n                            fastTap: useDoubleTapEditing,\n                            [useDoubleTapEditing ? 'doubleTap' : 'tap']: function(e) {\n                                var td = $(e.target),\n                                isLockedCell = that.lockedTable && td.closest(\"table\")[0] === that.lockedTable[0];\n\n                                that._mousedownOnEditCell = false;\n\n                                if (td.hasClass(\"k-hierarchy-cell\") ||\n                                    td.hasClass(\"k-detail-cell\") ||\n                                    td.hasClass(\"k-group-cell\") ||\n                                    td.hasClass(\"k-edit-cell\") ||\n                                    td.has(\".k-grid-remove-command\").length ||\n                                    (td.closest(\"tbody\")[0] !== that.tbody[0] && !isLockedCell) ||\n                                    $(e.target).is(\":input\")) {\n                                    return;\n                                }\n\n                                if (that.editable) {\n                                    if (that.editable.end()) {\n                                        $(activeElement()).trigger(\"blur\");\n                                        that.closeCell();\n                                        that.editCell(td);\n                                    } else {\n                                        that._scrollVirtualWrapper();\n                                    }\n                                } else {\n                                    that.editCell(td);\n                                }\n                            }\n                        });\n\n                        that.wrapper.on(\"focusin\" + NS, function() {\n                            // fix focus issue in IE\n                            if (!$.contains(this, activeElement())) {\n                                clearTimeout(that.timer);\n                                that.timer = null;\n                            }\n                        })\n                        .on(\"focusout\" + NS, function(e) {\n                            var shouldCloseCell = true;\n\n                            if ((isMac && that._mousedownOnEditCell) || that._virtualColScroll) {\n                                shouldCloseCell = false;\n                            }\n\n                            that._mousedownOnEditCell = false;\n\n                            if (shouldCloseCell) {\n                                that.timer = setTimeout(function() {\n                                    handler(e);\n                                }, 1);\n                            }\n                        });\n                    }\n                } else {\n                    if (editable.update !== false) {\n                        that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit-command\", function(e) {\n                            var element = $(this);\n                            if (!that._belongsToGrid(element)) {\n                                return;\n                            }\n                            e.preventDefault();\n                            that.editRow(element.closest(TR));\n                        });\n\n                        if (that._isVirtualInlineEditable()) {\n                            that.wrapper.on(\"focusout\" + NS, \"tr:not(.k-grouping-row) > td\", function() {\n                                if (that.editable && !that.editable.end()) {\n                                    that._scrollVirtualWrapper();\n                                }\n                            });\n                        }\n                    }\n                }\n\n                if (editable.destroy !== false) {\n                    that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command\", function(e) {\n                        var element = $(this);\n                        if (!that._belongsToGrid(element)) {\n                            return;\n                        }\n                        e.preventDefault();\n                        e.stopPropagation();\n                        that.removeRow(element.closest(TR));\n                    });\n                } else {\n                    //Required for the MVC server wrapper delete button\n                    that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command\", function(e) {\n                        if (!that._belongsToGrid($(this))) {\n                            return;\n                        }\n                        e.stopPropagation();\n\n                        if (!that._confirmation()) {\n                            e.preventDefault();\n                        }\n                    });\n                }\n            }\n        },\n\n        editCell: function(cell) {\n            cell = $(cell);\n\n            var that = this,\n            column = leafColumns(that.columns)[that._calculateColumnIndex(cell)],\n                model = that._modelForContainer(cell);\n\n            that.closeCell();\n\n            if (model && isColumnEditable(column, model) && !column.command) {\n                if (that.trigger(BEFOREEDIT, { model: model })) {\n                    return;\n                }\n\n                that._attachModelChange(model);\n\n                that._editContainer = cell;\n\n                if (that._shouldClearEditableState) {\n                    that._clearEditableState();\n                }\n                that.editable = cell.addClass(\"k-edit-cell\")\n                    .kendoEditable({\n                        fields: editField(column),\n                        model: model,\n                        size: that.options.size,\n                        target: that,\n                        change: function(e) {\n                            if (that.trigger(SAVE, { values: e.values, container: cell, model: model } )) {\n                                e.preventDefault();\n                            }\n                        },\n                        skipFocus: (that._isVirtualIncellEditable() || that._hasVirtualColumns()) && that._editableState ? true : false\n\n                    }).data(\"kendoEditable\");\n\n                var tr = cell.parent().addClass(\"k-grid-edit-row\");\n\n                if (that.lockedContent) {\n                    adjustRowHeight(tr[0], that._relatedRow(tr).addClass(\"k-grid-edit-row\")[0]);\n                    that._syncLockedScroll();\n                }\n\n                that.trigger(EDIT, { container: cell, model: model });\n            }\n        },\n\n        _adjustLockedHorizontalScrollBar: function() {\n            var table = this.table,\n                content = table.parent();\n\n            var scrollbar = table[0].offsetWidth > content[0].clientWidth ? kendo.support.scrollbar() : 0;\n            this.lockedContent.height(content[0].offsetHeight - scrollbar);\n        },\n\n        _syncLockedScroll: function() {\n            this.lockedContent[0].scrollTop = this.content[0].scrollTop;\n            if (this.virtualScrollable) {\n                this.lockedContent[0].scrollTop = this.wrapper.find(\".k-virtual-scrollable-wrap\")[0].scrollTop;\n            }\n        },\n\n        _syncLockedContentHeight: function() {\n            if (this.lockedTable) {\n                if (!this.touchScroller) {\n                    this._adjustLockedHorizontalScrollBar();\n                }\n                this._adjustRowsHeight(this.table, this.lockedTable);\n            }\n        },\n\n        _syncLockedHeaderHeight: function() {\n            if (this.lockedHeader) {\n                var lockedTable = this.lockedHeader.children(\"table\");\n                var table = this.thead.parent();\n\n                this._adjustRowsHeight(lockedTable, table);\n\n                syncTableHeight(lockedTable, table);\n            }\n        },\n\n        _syncLockedFooterHeight: function() {\n            if (this.lockedFooter && this.footer && this.footer.length) {\n                this._adjustRowsHeight(this.lockedFooter.children(\"table\"), this.footer.find(\".k-grid-footer-wrap > table\"));\n            }\n        },\n\n        _destroyEditable: function() {\n            var that = this;\n\n            var destroy = function() {\n                if (that.editable) {\n\n                    var container = that.editView ? that.editView.element : that._editContainer;\n                    var window = that._editContainer.data(\"kendoWindow\");\n\n                    if (container) {\n                        container.off(CLICK + NS, \".k-grid-cancel-command\", that._editCancelClickHandler);\n                        container.off(CLICK + NS, \".k-grid-save-command\", that._editUpdateClickHandler);\n                    }\n\n                    that._detachModelChange();\n                    that.editable.destroy();\n                    that.editable = null;\n                    if (window) {\n                        window.destroy();\n                    }\n                    that._editContainer = null;\n                    that._destroyEditView();\n                    that._editableIsClosing = null;\n                }\n            };\n\n            if (that.editable) {\n                if (that._editMode() === \"popup\" && !that._isMobile) {\n                    if (that._editableIsClosing) {\n                        that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy);\n                    }\n                    else {\n                        that._editableIsClosing = true;\n                        that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy).close();\n                    }\n                } else {\n                    destroy();\n                }\n            }\n            if (that._confirmDialog) {\n                that._confirmDialog.close();\n                that._confirmDialog.destroy();\n                that._confirmDialog = null;\n            }\n        },\n\n        _destroyEditView: function() {\n            if (this.editView) {\n                this.editView.purge();\n                this.editView = null;\n                this.pane.navigate(\"\");\n            }\n        },\n\n        _attachModelChange: function(model) {\n            var that = this;\n\n            that._modelChangeHandler = function(e) {\n                that._modelChange({ field: e.field, model: this });\n            };\n\n            model.bind(\"change\", that._modelChangeHandler);\n        },\n\n        _detachModelChange: function() {\n            var that = this,\n                container = that._editContainer,\n                model = that._modelForContainer(container);\n\n            if (model) {\n                model.unbind(CHANGE, that._modelChangeHandler);\n            }\n        },\n\n        closeCell: function(isCancel) {\n            var that = this,\n                cell = that._editContainer,\n                column,\n                tr,\n                model;\n\n            if (!cell) {\n                return;\n            }\n\n            model = that._modelForContainer(cell);\n\n            if (isCancel && that.trigger(\"cancel\", { container: cell, model: model })) {\n                return;\n            }\n\n            that.trigger(CELLCLOSE, { type: isCancel ? \"cancel\" : \"save\", model: model, container: cell });\n\n            cell.removeClass(\"k-edit-cell\");\n            column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n            if (isCancel && model.dirtyFields && model.dirtyFields[column.field]) {\n                delete model.dirtyFields[column.field];\n            }\n\n            tr = cell.parent().removeClass(\"k-grid-edit-row\");\n\n            if (that.lockedContent) {\n                that._relatedRow(tr).removeClass(\"k-grid-edit-row\");\n            }\n\n            that._destroyEditable(); // editable should be destroyed before content of the container is changed\n\n            that._displayCell(cell, column, model);\n\n            if (that._shouldClearEditableState) {\n                that._clearEditableState();\n            }\n\n            that.trigger(\"itemChange\", { item: tr, data: model, ns: ui });\n\n            if (that.lockedContent) {\n                adjustRowHeight(tr.css(HEIGHT, \"\")[0], that._relatedRow(tr).css(HEIGHT, \"\")[0]);\n            }\n        },\n\n        _displayCell: function(cell, column, dataItem) {\n            var that = this,\n                state = { storage: {}, count: 0 },\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n            if (state.count > 0) {\n                tmpl = tmpl.bind(state.storage);\n            }\n\n            cell.empty().html(tmpl(dataItem));\n        },\n\n        removeRow: function(row) {\n            if (!this._confirmation(row)) {\n                return;\n            }\n\n            this._removeRow(row);\n        },\n\n        _removeRow: function(row) {\n            var that = this,\n                model,\n                modelId,\n                key,\n                schema,\n                mode = that._editMode();\n\n            if (mode !== \"incell\") {\n                that.cancelRow();\n            }\n\n            row = $(row);\n\n            if (that.lockedContent) {\n                row = row.add(that._relatedRow(row));\n            }\n\n            row = row.hide();\n            if (that.dataSource._isGroupPaged()) {\n                that._removeGroupIfEmpty(row);\n            }\n\n            model = that._modelForContainer(row);\n\n            if (model && !that.trigger(REMOVE, { row: row, model: model })) {\n                schema = that.dataSource.options.schema;\n                if (that._selectedIds && schema && schema.model) {\n                    modelId = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n                    key = model[modelId];\n                    delete that._selectedIds[key];\n                }\n\n                that.dataSource.remove(model);\n\n                if (mode === \"inline\" || mode === \"popup\") {\n                    that.dataSource.sync();\n                }\n            } else if (mode === \"incell\") {\n                that._destroyEditable();\n            }\n        },\n\n        _editMode: function() {\n            var mode = \"incell\",\n                editable = this.options.editable;\n\n            if (editable !== true) {\n                if (typeof editable == \"string\") {\n                    mode = editable;\n                } else {\n                    mode = editable.mode || mode;\n                }\n            }\n\n            return mode;\n        },\n\n        editRow: function(row) {\n            var model;\n            var that = this;\n\n            if (row instanceof ObservableObject) {\n                model = row;\n            } else {\n                row = $(row);\n                model = that._modelForContainer(row);\n            }\n\n            var mode = that._editMode();\n            var container;\n\n            that.cancelRow();\n\n            if (model) {\n                row = that.tbody.children(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\");\n                that._attachModelChange(model);\n\n                if (mode === \"popup\") {\n                    that._createPopupEditor(model);\n                } else if (mode === \"inline\") {\n                    that._createInlineEditor(row, model);\n                } else if (mode === \"incell\") {\n                    $(row).children(DATA_CELL).each(function() {\n                        var cell = $(this);\n                        var column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                        model = that._modelForContainer(cell);\n\n                        if (model && (!model.editable || model.editable(column.field)) && column.field && !column.selectable) {\n                            that.editCell(cell);\n                            return false;\n                        }\n                    });\n                }\n\n\n                container = that.editView ? that.editView.element : that._editContainer;\n\n                if (container) {\n                    if (!this._editCancelClickHandler) {\n                        this._editCancelClickHandler = this._editCancelClick.bind(this);\n                    }\n\n                    container.on(CLICK + NS, \".k-grid-cancel-command\", this._editCancelClickHandler);\n\n                    if (!this._editUpdateClickHandler) {\n                        this._editUpdateClickHandler = this._editUpdateClick.bind(this);\n                    }\n\n                    container.on(CLICK + NS, \".k-grid-save-command\", this._editUpdateClickHandler);\n                }\n            }\n        },\n\n        _editUpdateClick: function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            this.saveRow();\n        },\n\n        _editCancelClick: function(e) {\n            var that = this;\n            var navigatable = that.options.navigatable;\n            var model = that.editable.options.model;\n            var container = that.editView ? that.editView.element : that._editContainer;\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            if (that.trigger(\"cancel\", { container: container, model: model })) {\n                return;\n            }\n\n            var currentIndex = that.items().index($(that.current()).parent());\n\n            that.cancelRow();\n\n            if (navigatable) {\n                that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                focusTable(that.table, true);\n            }\n        },\n\n        _editFields: function(columns, model) {\n            var fields = [];\n            var column;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                column = columns[idx];\n                if (column.selectable || column.command) {\n                    continue;\n                }\n                if (isColumnEditable(column, model)) {\n                    fields.push(editField(column));\n                }\n            }\n            return fields;\n        },\n\n        _createPopupEditor: function(model) {\n            var that = this;\n            var html = '<div ' + kendo.attr(\"uid\") + '=\"' + model.uid + '\" class=\"k-popup-edit-form\"><' + (that._isMobile ? 'ul class=\"k-edit-form-container k-listgroup k-listgroup-flush\">' : 'div class=\"k-edit-form-container\">');\n            var column;\n            var command;\n            var idx;\n            var length;\n            var tmpl;\n            var updateText;\n            var cancelText;\n            var updateIconClass;\n            var cancelIconClass;\n            var tempCommand;\n            var columns = leafColumns(that.columns);\n            var attr;\n            var editMenuGuid = kendo.guid();\n            var editable = that.options.editable;\n            var template = editable.template;\n            var options = isPlainObject(editable) ? editable.window : {};\n            var settings = extend({}, kendo.Template, that.options.templateSettings);\n            var state;\n            var container;\n            var buttonsHTML;\n\n            if (that.trigger(BEFOREEDIT, { model: model })) {\n                return;\n            }\n\n            options = options || {};\n\n            if (template) {\n                if (typeof template === STRING) {\n                    template = kendo.unescape(template);\n                }\n\n                html += (kendo.template(template, settings))(model);\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.command) {\n                        tempCommand = getCommand(column.command, \"edit\");\n                        if (tempCommand) {\n                            command = tempCommand;\n                        }\n                    }\n                }\n            } else {\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.selectable) {\n                        continue;\n                    }\n                    if (!column.command) {\n                        if (that._isMobile) {\n                            html += '<li class=\"k-item k-listgroup-item\">';\n\n                            if (isColumnEditable(column, model)) {\n                                html += '<label class=\"k-label k-listgroup-form-row\">';\n                                html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                                html += '<div class=\"k-listgroup-form-field-wrapper\" id=\"' + column.field + '_' + editMenuGuid + '\" ' + kendo.attr(\"container-for\") + '=\"' + column.field + '\"></div>';\n                                html += '</label>';\n                            } else {\n                                state = { storage: {}, count: 0 };\n\n                                tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n                                if (state.count > 0) {\n                                    tmpl = tmpl.bind(state.storage);\n                                }\n\n                                html += '<label class=\"k-label k-listgroup-form-row k-no-click\">';\n                                html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                                html += '<span class=\"k-no-editor k-listgroup-form-field-wrapper\">' + tmpl(model) + '</span>';\n                                html += '</label>';\n                            }\n\n                            html += \"</li>\";\n                        }\n                    } else if (column.command) {\n                        tempCommand = getCommand(column.command, \"edit\");\n                        if (tempCommand) {\n                            command = tempCommand;\n                        }\n                    }\n                }\n            }\n\n            if (command) {\n                if (isPlainObject(command)) {\n                    if (isPlainObject(command.text)) {\n                        updateText = command.text.update;\n                        cancelText = command.text.cancel;\n                    }\n                    if (isPlainObject(command.iconClass)) {\n                        updateIconClass = command.iconClass.update;\n                        cancelIconClass = command.iconClass.cancel;\n                    }\n\n                   if (command.attr) {\n                       attr = command.attr;\n                   }\n                }\n            }\n\n            if (!that._isMobile) {\n                buttonsHTML = '<div class=\"k-edit-buttons k-actions-start\">';\n                buttonsHTML += that._createButton({ name: \"update\", text: updateText, attr: attr, iconClass: updateIconClass, size: \"medium\" }) + that._createButton({ name: \"canceledit\", text: cancelText, attr: attr, iconClass: cancelIconClass, size: \"medium\" });\n                buttonsHTML += '</div>';\n\n                html += template ? buttonsHTML + '</div>' : '</div>';\n\n                container = that._editContainer = $(html)\n                .appendTo(that.wrapper).eq(0)\n                .kendoWindow(extend({\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: that.options.messages.commands.edit || \"Edit\",\n                    visible: false,\n                    close: function(e) {\n                        if (e.userTriggered) {\n                            //The bellow line is required due to: draggable window in IE, change event will be triggered while the window is closing\n                            e.sender.element.trigger(\"focus\");\n                            if (that.trigger(\"cancel\", { container: container, model: model })) {\n                                e.preventDefault();\n                                return;\n                            }\n\n                            var currentIndex = that.items().index($(that.current()).parent());\n\n                            that._editableIsClosing = true;\n                            that.cancelRow();\n                            if (that.options.navigatable) {\n                                that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                                focusTable(that.table, true);\n                            }\n                        }\n                    }\n                }, options));\n            } else {\n                html += \"</ul></div>\";\n                that.editView = that.pane.append(\n                    '<div data-' + kendo.ns + 'role=\"view\" class=\"k-grid-edit-form\">' +\n                        '<div data-' + kendo.ns + 'role=\"header\" class=\"k-header\">' +\n                            '<a href=\"\\\\#\" class=\"k-header-cancel k-link k-grid-cancel-command\" title=\"#=messages.cancel#\" ' +\n                            'aria-label=\"#=messages.cancel#\">' + kendo.ui.icon(\"chevron-left\") + '</a>' +\n                            encode(that.options.messages.commands.edit || \"Edit\") +\n                            '<a href=\"\\\\#\" class=\"k-header-done k-link k-grid-save-command\" title=\"#=messages.done#\" ' +\n                            'aria-label=\"#=messages.done#\">' + kendo.ui.icon(\"check\") + '</a>' +\n                        '</div>' +\n                        '<div data-' + kendo.ns + 'role=\"content\" class=\"' + classNames.content + '\">' +\n                            html +\n                        '</div>' +\n                    '</div>');\n                container = that._editContainer = that.editView.element.find(\".k-popup-edit-form\");\n            }\n\n            if (!template && !that._isMobile) {\n                that.editable = new ui.Form(that._editContainer.find(\".k-edit-form-container\"), {\n                    items: that._editFields(columns, model),\n                    buttonsTemplate: () => '',\n                    formData: model\n                }).editable;\n                that._editContainer.append(buttonsHTML);\n            } else {\n                that.editable = that._editContainer\n                .kendoEditable({\n                    fields: (that._isMobile && !template) ? that._editFields(columns, model) : null,\n                    model: model,\n                    clearContainer: false,\n                    target: that,\n                    skipFocus: true\n                }).data(\"kendoEditable\");\n            }\n\n            that._openPopUpEditor();\n\n            that.trigger(EDIT, { container: container, model: model });\n        },\n\n        _openPopUpEditor: function() {\n            var that = this;\n            var windowEditor = that._editContainer ? that._editContainer.data(\"kendoWindow\") : null;\n            var windowOptions = (that.options.editable || {}).window || {};\n\n            if (!this._isMobile) {\n                if (windowEditor) {\n                    if (!windowOptions.position) {\n                        windowEditor.center();\n                    }\n\n                    windowEditor.open();\n                }\n            } else {\n                this.pane.navigate(this.editView, this._editAnimation);\n            }\n        },\n\n        _createInlineEditor: function(row, model) {\n            var that = this;\n            var column;\n            var cell;\n            var command;\n            var fields = [];\n\n            if (that.trigger(BEFOREEDIT, { model: model })) {\n                return;\n            }\n\n            if (that.lockedContent) {\n                row = row.add(that._relatedRow(row));\n            }\n\n            row.children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function() {\n                cell = $(this);\n                column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                if (!column.command && isColumnEditable(column, model)) {\n                    fields.push(editField(column));\n                    cell.attr(kendo.attr(\"container-for\"), column.field);\n                    cell.empty();\n                } else if (column.command) {\n                    command = getCommand(column.command, \"edit\");\n                    if (command) {\n                        cell.empty();\n\n                        var updateText,\n                            cancelText,\n                            updateIconClass,\n                            cancelIconClass,\n                            attr;\n\n                        if (isPlainObject(command)) {\n                                if (isPlainObject(command.text)) {\n                                    updateText = command.text.update;\n                                    cancelText = command.text.cancel;\n                                }\n                                if (isPlainObject(command.iconClass)) {\n                                    updateIconClass = command.iconClass.update;\n                                    cancelIconClass = command.iconClass.cancel;\n                                }\n\n                            if (command.attr) {\n                                attr = command.attr;\n                            }\n                        }\n\n                        $(that._createButton({ name: \"update\", text: updateText, attr: attr, iconClass: updateIconClass }) +\n                            that._createButton({ name: \"canceledit\", text: cancelText, attr: attr, iconClass: cancelIconClass })).appendTo(cell);\n                    }\n                }\n            });\n\n            that._editContainer = row;\n            that._editContainer.addClass(\"k-grid-edit-row\");\n\n            if (that._shouldClearEditableState) {\n                that._clearEditableState();\n            }\n\n            that.editable = new kendo.ui.Editable(that._editContainer, {\n                target: that,\n                fields: fields,\n                size: that.options.size,\n                model: model,\n                skipFocus: (that._isVirtualInlineEditable() && that._editableState && (that._editableState.field ? true : false)) || that._hasVirtualColumns(),\n                clearContainer: false\n            });\n\n            if (row.length > 1) {\n\n                adjustRowHeight(row[0], row[1]);\n                that._applyLockedContainersWidth();\n            }\n\n            that.trigger(EDIT, { container: row, model: model });\n        },\n\n        cancelRow: function(notify) {\n            var that = this,\n                container = that._editContainer,\n                model;\n\n            if (container) {\n                model = that._modelForContainer(container);\n\n                if (!model || (notify && that.trigger(\"cancel\", { container: container, model: model }))) {\n                    return;\n                }\n\n                that._destroyEditable();\n\n                that.dataSource.cancelChanges(model);\n\n                that._clearEditableState();\n\n                if (that._editMode() !== \"popup\") {\n                    that._displayRow(container);\n                } else {\n                    that._displayRow(that.tbody.find(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"));\n                }\n\n                that._aria();\n            }\n        },\n\n        saveRow: function() {\n            var that = this;\n            var container = this._editContainer;\n            var model = this._modelForContainer(container);\n            var deferred = $.Deferred();\n            var valid;\n\n            if (!container || !this.editable) {\n                return deferred.resolve().promise();\n            }\n\n            valid = that.editable && that.editable.end();\n\n            if (!valid || this.trigger(SAVE, { container: container, model: model })) {\n                if (!valid) {\n                    that._scrollVirtualWrapper();\n                }\n\n                return deferred.reject().promise();\n            }\n\n            that._clearEditableState();\n\n            return this.dataSource.sync();\n        },\n\n        _displayRow: function(row) {\n                var that = this,\n                model = that._modelForContainer(row),\n                related,\n                newRow,\n                nextRow,\n                isSelected = row.hasClass(SELECTED),\n                isAlt = row.hasClass(\"k-alt\");\n\n            if (model) {\n\n                if (that.lockedContent) {\n                    related = $((isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model));\n                    kendo.applyStylesFromKendoAttributes(related, [\"display\"]);\n                    that._relatedRow(row.last()).replaceWith(related);\n                }\n\n                newRow = $((isAlt ? that.altRowTemplate : that.rowTemplate)(model));\n                if (!row.is(\":visible\")) {\n                    newRow.hide();\n                }\n\n                kendo.applyStylesFromKendoAttributes(newRow, [\"display\"]);\n                row.replaceWith(newRow);\n\n                that.trigger(\"itemChange\", { item: newRow, data: model, ns: ui });\n\n                if (related && related.length) {\n                    that.trigger(\"itemChange\", { item: related, data: model, ns: ui });\n                }\n\n                if (isSelected && (that.options.selectable || that._checkBoxSelection)) {\n                    that.select(newRow.add(related));\n                }\n\n                if (related) {\n                    adjustRowHeight(newRow[0], related[0]);\n                }\n\n                nextRow = newRow.next();\n                if (nextRow.hasClass(\"k-detail-row\") && nextRow.is(\":visible\")) {\n                    kendo.ui.icon(newRow.find(\".k-hierarchy-cell .k-icon,.k-hierarchy-cell .k-svg-icon\"), { icon: \"caret-alt-down\" });\n                }\n            }\n        },\n\n        _showMessage: function(messages, row) {\n            var that = this;\n\n            if (!that._isMobile) {\n                // eslint-disable-next-line no-alert\n                return window.confirm(messages.title);\n            }\n\n            var confirmDialog = that._confirmDialog = new kendo.ui.Confirm($(\"<div />\").appendTo(document.body), {\n                modal: {\n                    preventScroll: true\n                },\n                closable: false,\n                title: false,\n                content: messages.title,\n                messages: {\n                    okText: messages.confirmDelete,\n                    cancel: messages.cancelDelete\n                },\n                open: function() {\n                    if (that.content) {\n                        that.content.data(OVERFLOW, that.content.css(OVERFLOW));\n                        that.content.css(OVERFLOW, HIDDEN);\n                    }\n                },\n                close: function() {\n                    if (that.content) {\n                        that.content.css(OVERFLOW, that.content.data(OVERFLOW));\n                    }\n                }\n            });\n\n            confirmDialog.result\n                .done(function() {\n                    that._removeRow(row);\n                })\n                .fail(function() {\n                    var confirmDialog = that._confirmDialog;\n\n                    if (confirmDialog) {\n                        confirmDialog.close();\n                        confirmDialog.destroy();\n                    }\n                });\n\n            return false;\n        },\n\n        _confirmation: function(row) {\n            var that = this,\n                editable = that.options.editable,\n                confirmation = (editable === true || typeof editable === STRING) ? that.options.messages.editable.confirmation : editable.confirmation;\n\n            if (isPlainObject(editable) && typeof editable.mode === STRING && typeof confirmation !== FUNCTION && typeof confirmation !== STRING && confirmation !== false) {\n                confirmation = that.options.messages.editable.confirmation;\n            }\n\n            if (confirmation !== false && confirmation != null) {\n\n                if (typeof confirmation === FUNCTION) {\n                    confirmation = confirmation(that._modelForContainer(row));\n                }\n\n                return that._showMessage({\n                        confirmDelete: editable.confirmDelete || that.options.messages.editable.confirmDelete,\n                        cancelDelete: editable.cancelDelete || that.options.messages.editable.cancelDelete,\n                        title: confirmation === true ? that.options.messages.editable.confirmation : confirmation\n                    }, row);\n            }\n\n            return true;\n        },\n\n        cancelChanges: function() {\n            var that = this;\n\n            if (that._cachedRowsHeight) {\n                that._mapCachedRowsHeight(\"getByUid\", \"id\");\n                that._shouldMapHights = true;\n            }\n\n            that.dataSource.cancelChanges();\n\n            if (that._isVirtualEditable()) {\n                that._virtualPageToTop(function() {\n                    that.virtualScrollable.scrollToTop();\n                });\n            }\n        },\n\n        saveChanges: function() {\n            var that = this;\n            var valid = that.editable && that.editable.end();\n\n            if ((valid || !that.editable) && !that.trigger(SAVECHANGES)) {\n                that.dataSource.sync();\n            } else if (!valid) {\n                that._scrollVirtualWrapper();\n            }\n        },\n\n        addRow: function() {\n            var that = this,\n                index,\n                dataSource = that.dataSource,\n                mode = that._editMode(),\n                createAt = that.options.editable.createAt || \"\",\n                pageSize = dataSource.pageSize(),\n                view = dataSource.view() || [];\n            var createAtBottom = createAt.toLowerCase() === BOTTOM;\n            var model;\n            var virtualEditable = that._isVirtualEditable();\n\n            if ((that.editable && that.editable.end()) || !that.editable) {\n                if (mode != \"incell\") {\n                    that.cancelRow();\n                }\n\n                index = dataSource.indexOf(view[0]);\n\n                if (createAtBottom) {\n                    index += view.length;\n\n                    if (pageSize && !dataSource.options.serverPaging && pageSize <= view.length) {\n                        index -= 1;\n                    }\n                }\n\n                if (index < 0) {\n                    if (dataSource.page() > dataSource.totalPages()) {\n                        index = (dataSource.page() - 1) * pageSize;\n                    } else {\n                        index = 0;\n                    }\n                }\n\n                if (that.options.navigatable && mode == \"incell\") {\n                    that._removeCurrent();\n                }\n\n                if (virtualEditable) {\n                    that._virtualAddRow();\n                } else {\n                    model = dataSource.insert(index, {});\n                    that._editModel(model);\n                }\n            } else {\n                that._scrollVirtualWrapper();\n            }\n        },\n\n        _editModel: function(model) {\n            var that = this;\n            var createAt = that.options.editable.createAt || \"\";\n            var mode = that._editMode();\n\n            if (model) {\n                var id = model.uid,\n                    table = that.lockedContent ? that.lockedTable : that.table,\n                    row = table.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + id + \"]\"),\n                    cell = row.children(\"td:not(.k-group-cell,.k-hierarchy-cell)\").eq(that._firstEditableColumnIndex(row));\n\n                if (mode === \"inline\" && row.length) {\n                    that.editRow(row);\n                } else if (mode === \"popup\") {\n                    that.editRow(model);\n                } else if (cell.length) {\n                    that.editCell(cell);\n                }\n\n                if (createAt.toLowerCase() == \"bottom\" && that.lockedContent) {\n                    //scroll the containers to the bottom\n                    that.lockedContent[0].scrollTop = that.content[0].scrollTop = that.table[0].offsetHeight;\n                }\n            }\n        },\n\n        _virtualAddRow: function() {\n            var that = this;\n            var createAtBottom = (that.options.editable.createAt || \"\").toLowerCase() === BOTTOM;\n\n            that._clearEditableState();\n\n            if (createAtBottom) {\n                that._virtualAddRowAtBottom();\n            } else {\n                that._virtualAddRowAtTop();\n            }\n        },\n\n        _virtualAddRowAtTop: function() {\n            var that = this;\n            var dataSource = that.dataSource;\n            var virtualScrollable = that.virtualScrollable;\n            var model;\n\n            if (dataSource.page() === 1) {\n                model = dataSource.insert(0, {});\n                that._editModel(model);\n                virtualScrollable.scrollToTop();\n            } else {\n                that._virtualPageToTop(function() {\n                    model = dataSource.insert(0, {});\n                    that._editModel(model);\n                    virtualScrollable.scrollToTop();\n                });\n            }\n        },\n\n        _virtualAddRowAtBottom: function() {\n            var that = this;\n            var dataSource = that.dataSource;\n            var virtualScrollable = that.virtualScrollable;\n            var index = dataSource.total();\n            var model;\n\n            if (dataSource.at(index - 1) instanceof ObservableObject) {\n                model = dataSource.insert(index, {});\n\n                that._virtualPageToBottom(function() {\n                    that._editModel(model);\n                    virtualScrollable.scrollToBottom();\n                });\n            } else {\n                that._virtualPageToBottom(function() {\n                    model = dataSource.insert(index, {});\n                    that._editModel(model);\n                    virtualScrollable.scrollToBottom();\n                });\n            }\n        },\n\n        _virtualPageToTop: function(callback) {\n            var that = this;\n\n            that._virtualPage(0, that.dataSource.take(), function() {\n                callback();\n            });\n        },\n\n        _virtualPageToBottom: function(callback) {\n            var that = this;\n            var dataSource = that.dataSource;\n            var take = dataSource.take();\n            var total = dataSource.total();\n            var skip = total > take ? (total - take) : 0;\n\n            that._virtualPage(skip, take, function() {\n                callback();\n            });\n        },\n\n        _virtualPage: function(skip, take, callback) {\n            var that = this;\n\n            if (that._isVirtualEditable()) {\n                that.virtualScrollable._preventScroll = true;\n                that.virtualScrollable._page(skip, take, callback);\n            }\n        },\n\n        _firstEditableColumnIndex: function(container) {\n            var that = this,\n                column,\n                columns = leafColumns(that.columns),\n                idx,\n                length,\n                model = that._modelForContainer(container);\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                column = columns[idx];\n\n                if (model && (!model.editable || model.editable(column.field)) && !column.command && column.field && column.hidden !== true) {\n                    return idx;\n                }\n            }\n            return -1;\n        },\n\n        _clickAdd: function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            this.addRow();\n        },\n\n        _clickCancel: function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            this.cancelChanges();\n        },\n\n        _clickExcel: function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            this.saveAsExcel();\n        },\n\n        _clickPdf: function(e) {\n            var that = this;\n\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            var promise = that.saveAsPDF();\n\n            if (promise) {\n                promise.done(function() {\n                    that._pdfInitialized = false;\n                });\n            }\n        },\n\n        _clickSave: function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            this.saveChanges();\n        },\n\n        _searchInput: function(e) {\n            var that = this,\n                input = e.currentTarget;\n\n            clearTimeout(that._searchTimeOut);\n\n            that._searchTimeOut = setTimeout(function() {\n                that._searchTimeOut = null;\n\n                var options = that.options;\n                var searchFields = options.search ? options.search.fields : null;\n                var expression = { filters: [], logic: \"or\" };\n                var value = input.value;\n\n                if (!searchFields) {\n                    searchFields = getColumnsFields(options.columns);\n                }\n\n                if (that.dataSource.options.endless) {\n                    that.dataSource.options.endless = null;\n                    that._endlessPageSize = that.dataSource.options.pageSize;\n                }\n\n                if (value) {\n                    for (var i = 0; i < searchFields.length; i++) {\n                        that._pushExpression(expression.filters, searchFields[i], value);\n                    }\n                } else {\n                    expression = {};\n                }\n\n                that.dataSource.filter(expression);\n            }, 300);\n        },\n\n        _pasteToolbarDropDown: function() {\n            var that = this;\n\n            if (that.wrapper.find(\".k-grid-paste-action\").length) {\n                that.pasteActionsDropDownList = that.wrapper\n                    .find(\".k-grid-paste-action\")\n                    .kendoDropDownList({\n                        dataSource: [{ value: \"insert\", text: \"Paste (Insert)\" }, { value: \"replace\", text: \"Paste (Replace)\" }],\n                        dataTextField: \"text\",\n                        dataValueField: \"value\",\n                        _allowFilterPaste: false,\n                    }).data(\"kendoDropDownList\");\n            }\n        },\n\n        _pushExpression: function(filters, field, value) {\n            var that = this,\n                isServerFiltering = that.dataSource.options.serverFiltering,\n                defaultOperators = {\n                    string: \"contains\",\n                    number: \"gte\",\n                    date: \"gte\",\n                    enums: \"eq\",\n                    boolean: \"eq\"\n                },\n                name = field.name || field,\n                operator = field.operator,\n                modelInfo = that.dataSource.reader.model && that.dataSource.reader.model.fields,\n                fieldInfo = modelInfo && modelInfo[name],\n                parseFn = fieldInfo && fieldInfo.parse,\n                expression = {\n                    field: name,\n                    operator: operator || defaultOperators.string,\n                    value: value\n                };\n\n            if ((operator || isServerFiltering) && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) !== null) {\n                extend(expression, {\n                    operator: operator || defaultOperators[fieldInfo.type],\n                    value: parseFn(value)\n                });\n            }\n\n            if (isServerFiltering && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) === null) {\n                return;\n            }\n\n            filters.push(expression);\n        },\n\n        _toolbar: function() {\n            var that = this,\n                wrapper = that.wrapper,\n                toolbar = that.options.toolbar,\n\n                container, items;\n\n            if (toolbar) {\n                that._createClickHandler = that._addClickHandler = that._clickAdd.bind(that);\n                that._cancelClickHandler = that._clickCancel.bind(that);\n                that._saveClickHandler = that._clickSave.bind(that);\n                that._excelClickHandler = that._clickExcel.bind(that);\n                that._pdfClickHandler = that._clickPdf.bind(that);\n                that._serachHandler = that._searchInput.bind(that);\n\n                container = that.wrapper.find(\".k-grid-toolbar\");\n\n                if (!container.length) {\n                    container = $('<div class=\"k-grid-toolbar k-toolbar\" />')\n                        .prependTo(wrapper);\n\n                    if (typeof toolbar === STRING || isFunction(toolbar)) {\n                        if (typeof toolbar === STRING) {\n                            toolbar = kendo.template(toolbar).bind(that);\n                        }\n\n                        container.html(toolbar({ grid: that }));\n                        that._attachToolbarClicks();\n                    } else if (isArray(toolbar)) {\n                        items = that._processItems(toolbar);\n\n                        container.kendoToolBar({\n                            navigateOnTab: !that.options.navigatable,\n                            size: that.options.size,\n                            items: items\n                        });\n                    }\n                } else {\n                    that._attachToolbarClicks();\n                }\n\n                container.on(INPUT + NS, \".k-grid-search input\", this._serachHandler);\n            }\n        },\n\n        _attachToolbarClicks: function() {\n            var editable = this.options.editable,\n                container = this.wrapper.find(\".k-grid-toolbar\");\n\n            if (editable && editable.create !== false) {\n                container.on(CLICK + NS, \".k-grid-add\", this._createClickHandler)\n                    .on(CLICK + NS, \".k-grid-cancel-changes\", this._cancelClickHandler)\n                    .on(CLICK + NS, \".k-grid-save-changes\", this._saveClickHandler);\n            }\n\n            container.on(CLICK + NS, \".k-grid-excel\", this._excelClickHandler);\n            container.on(CLICK + NS, \".k-grid-pdf\", this._pdfClickHandler);\n        },\n\n        _processItems: function(tools) {\n            var that = this,\n                options = that.options,\n                items = [],\n                messages = this.options.messages.commands,\n                itemsCollectionHasSpacer = false;\n\n            tools.map(t => {\n                var command, searchText, icon, className, inputSize, template = \"\";\n\n                if (typeof t === 'string') {\n                    command = t.toLowerCase();\n                    t = {};\n                    t.text = messages[command] || command;\n                } else {\n                    command = (t.name || t.text || \"\").toLowerCase();\n                    t.text = t.text || messages[command] || command;\n                }\n\n                if (!itemsCollectionHasSpacer && (command === \"search\" || command === \"columns\")) {\n                    itemsCollectionHasSpacer = true;\n                    items.push({\n                        type: \"spacer\"\n                    });\n                }\n\n                if (command === \"search\") {\n                    searchText = t.text || messages.search;\n                    icon = t.icon || t.iconClass || \"search\";\n\n                    inputSize = kendo.getValidCssClass(\"k-input-\", \"size\", that.options.size);\n                    template += `<span class='k-searchbox k-input ${inputSize} k-rounded-md k-input-solid k-grid-search'>`;\n                    template += kendo.ui.icon({ icon: icon, iconClass: \"k-input-icon\" });\n                    template += \"<input autocomplete='off' placeholder='\" + searchText + \"' title='\" + searchText + \"' aria-label='\" + searchText + \"' class='k-input-inner' />\";\n                    template += \"</span>\";\n\n                    items.push({\n                        name: \"search\",\n                        overflow: \"never\",\n                        template: template\n                    });\n                } else if (command === \"paste\" && options.allowPaste) {\n                    items.push({\n                        template: \"<input class='k-grid-paste-action' />\"\n                    });\n                } else {\n                    if (!command && !(isPlainObject(t) && t.template)) {\n                        throw new Error(\"Custom commands should have name specified\");\n                    }\n\n                    t = extend({ type: \"button\" }, defaultCommands[command], t);\n                    className = t.className || \"k-grid-\" + (command || \"\").replace(/\\s/g, \"\");\n                    t.spriteCssClass = t.icon ? null : t.iconClass;\n\n                    t.attributes = that._processAttr(t.attr);\n                    delete t.attr;\n\n                    if (!!className) {\n                        if (t.attributes[\"class\"] === undefined$1) {\n                            t.attributes[\"class\"] = \"\";\n                        }\n\n                        t.attributes[\"class\"] += (\" \" + className);\n                    }\n\n                    if (t.template) {\n                        delete t.type;\n                    }\n\n                    if (!!that[\"_\" + command + \"ClickHandler\"]) {\n                        t.click = that[\"_\" + command + \"ClickHandler\"];\n                    }\n\n                    items.push(t);\n                }\n            });\n\n            return items;\n        },\n\n        _processAttr: function(attr) {\n            var attributes = {},\n                attrArray;\n\n            if (typeof attr === STRING && attr.length > 0) {\n                attrArray = attr.split(\" \");\n                attrArray.map(a => {\n                    var keyValue = a.split(\"=\");\n\n                    if (keyValue.length === 2) {\n                        attributes[keyValue[0]] = keyValue[1].replaceAll('\"', \"\").replaceAll(\"'\", \"\");\n                    }\n                });\n            } else if (isPlainObject(attr)) {\n                attributes = attr;\n            }\n\n            return attributes;\n        },\n\n        _createButton: function(command) {\n            var button,\n                template = command.template || COMMANDBUTTONTMPL,\n                commandName = typeof command === STRING ? command : command.name || command.text,\n                className = defaultCommands[commandName] ? defaultCommands[commandName].className : \"k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"),\n                options = { className: className, text: commandName, attr: \"\", iconClass: \"\", size: command.size || this.options.size },\n                messages = this.options.messages.commands,\n                attributeClassMatch;\n\n            if (!commandName && !(isPlainObject(command) && command.template)) {\n                throw new Error(\"Custom commands should have name specified\");\n            }\n\n            if (isPlainObject(command)) {\n                command = extend(true, {}, command);\n\n                if (command.className && inArray(options.className, command.className.split(\" \")) < 0) {\n                    command.className += \" \" + options.className;\n                } else if (command.className === undefined$1) {\n                    command.className = options.className;\n                }\n\n                if (command.className.indexOf(\"k-primary\") > -1) {\n                    command.className = command.className.replace(\"k-primary\", \"\");\n                    command.themeColor = \"primary\";\n                }\n\n                if (commandName === \"edit\") {\n                    command = extend(true, {}, command);\n                    command.text = isPlainObject(command.text) ? command.text.edit : command.text;\n                    command.iconClass = isPlainObject(command.iconClass) ? command.iconClass.edit : command.iconClass;\n                }\n\n                if (command.attr) {\n                    if (isPlainObject(command.attr)) {\n                        command.attr = stringifyAttributes(command.attr);\n                    }\n\n                    if (typeof command.attr === STRING) {\n                        attributeClassMatch = command.attr.match(/class=\"(.+?)\"/);\n\n                        if (attributeClassMatch && inArray(attributeClassMatch[1], command.className.split(\" \")) < 0) {\n                            command.className += \" \" + attributeClassMatch[1];\n                        }\n                    }\n                }\n\n                options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] }, command);\n            } else {\n                options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] });\n            }\n\n            button = kendo.template(template)(options);\n\n            if (!command.template) {\n                return kendo.html.renderButton($(button), options);\n            } else {\n                return button;\n            }\n        },\n\n        _hasFooters: function() {\n            return !!this.footerTemplate ||\n                !!this.groupFooterTemplate ||\n                (this.footer && this.footer.length > 0) ||\n                this.wrapper.find(\".k-grid-footer\").length > 0;\n        },\n\n        _groupable: function() {\n            var that = this;\n\n            if (that._groupableClickHandler) {\n                that.table.add(that.lockedTable).off(CLICK + NS, that._groupableClickHandler);\n            } else {\n                that._groupableClickHandler = function(e) {\n                    var element = $(this),\n                    groupRow = element.closest(TR);\n\n                    var group = that._groupRows ? that._groupRows[that.wrapper.find(DOT + GROUPING_ROW).index(groupRow)] : { };\n\n                    if (element.is(CARET_ALT_DOWN)) {\n                        if (!that.trigger(\"groupCollapse\", { group: group, element: groupRow })) {\n                            that.collapseGroup(groupRow);\n                        }\n                    } else {\n                        if (!that.trigger(\"groupExpand\", { group: group, element: groupRow })) {\n                            that.expandGroup(groupRow);\n                        }\n                    }\n                    e.preventDefault();\n                    e.stopPropagation();\n                };\n            }\n\n            if (that._isLocked()) {\n                that.lockedTable.on(CLICK + NS, \".k-grouping-row \" + CARET_ALT_RIGHT + \", .k-grouping-row \" + CARET_ALT_DOWN, that._groupableClickHandler);\n            } else {\n                that.table.on(CLICK + NS, \".k-grouping-row \" + CARET_ALT_RIGHT + \", .k-grouping-row \" + CARET_ALT_DOWN, that._groupableClickHandler);\n            }\n\n            that._attachGroupable();\n        },\n\n        _attachGroupable: function() {\n            var that = this,\n                wrapper = that.wrapper,\n                groupable = that.options.groupable,\n                draggables = HEADERCELLS + \"[\" + kendo.attr(\"field\") + \"]\",\n                filter = that.content ? \".k-grid-header:first \" + draggables : \"table:first>.k-grid-header \" + draggables;\n\n            if (groupable && groupable.enabled !== false) {\n                if (!wrapper.has(\"div.k-grouping-header\")[0]) {\n                    $(\"<div/>\").addClass(\"k-grouping-header\").prependTo(wrapper);\n                }\n\n                if (that.groupable) {\n                    that._destroyGroupable();\n                }\n\n                if (browser.chrome) {\n                    wrapper.find(\"div.k-grouping-header\").css(\"touch-action\", NONE);\n                    wrapper.find(filter).css(\"touch-action\", NONE);\n                }\n\n                that.groupable = new ui.Groupable(wrapper, extend({}, groupable, {\n                    draggable: that._draggableInstance,\n                    groupContainer: \">div.k-grouping-header\",\n                    dataSource: that.dataSource,\n                    draggableElements: filter,\n                    filter: filter,\n                    size: that.options.size,\n                    allowDrag: that.options.reorderable,\n                    enableContextMenu: !!that.options.contextMenu,\n                    removeGroup: function(e) {\n                        that._showUngroupedColumn(e);\n                    },\n                    change: function(e) {\n                        if (that.trigger(\"group\", { groups: e.groups })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            that._hideGroupedColumns(e.groups);\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    }\n                }));\n\n                that._addGroupableOptionsToHeader();\n            }\n        },\n\n        _showUngroupedColumn: function(group) {\n            var columns = leafColumns(this.columns);\n            var i;\n\n            for (i = 0; i < columns.length; i++) {\n                if (columns[i].uid == group.colID && columns[i].hideOnGroup) {\n                    this.showColumn(columns[i]);\n                }\n            }\n        },\n\n        _hideGroupedColumns: function(groups) {\n            if (!groups) {\n                return;\n            }\n            var columns = leafColumns(this.columns);\n            var fields = [];\n            var i;\n\n            for (i = 0; i < groups.length; i++) {\n                if (groups[i].colID) {\n                    fields.push(groups[i].colID);\n                }\n            }\n\n            for (i = 0; i < columns.length; i++) {\n                if (fields.indexOf(columns[i].uid) >= 0 && columns[i].hideOnGroup) {\n                    this.hideColumn(columns[i]);\n                }\n            }\n        },\n\n        _resetEndless: function() {\n            var that = this;\n            that.dataSource.options.endless = null;\n            that._endlessPageSize = that.dataSource.options.pageSize;\n            that.dataSource._skip = 0;\n            that.dataSource._pageSize = that.dataSource._take = that._endlessPageSize;\n            that.dataSource._page = 1;\n        },\n\n        _addGroupableOptionsToHeader: function() {\n            var that = this;\n            var columns = flatColumns(that.columns);\n            var columnFieldMap = {};\n            var field = \"\";\n            var headerCells = that._headerCells();\n            var cellFieldAttr = \"\";\n            var headerCell;\n            var columnOptions;\n            var i;\n\n            for (i = 0; i < columns.length; i++) {\n                field = columns[i].field;\n                columnFieldMap[columns[i].field] = columns[i];\n            }\n\n            for (i = 0; i < headerCells.length; i++) {\n                headerCell = headerCells.eq(i);\n                cellFieldAttr = headerCell.attr(kendo.attr(FIELD));\n                columnOptions = columnFieldMap[cellFieldAttr];\n\n                if (columnOptions && columnOptions.groupable && columnOptions.groupable.sort) {\n                    headerCell.data(GROUP_SORT, columnOptions.groupable.sort);\n                }\n            }\n        },\n\n        _destroyGroupable: function() {\n            var that = this;\n\n            if (that.groupable && that.groupable.element) {\n                that.groupable.element.kendoGroupable(\"destroy\");\n            }\n\n            that.groupable = null;\n\n            that._removeGroupableOptionsFromHeader();\n        },\n\n        _removeGroupableOptionsFromHeader: function() {\n            var that = this;\n            var headerCells = that._headerCells();\n\n            for (var i = 0; i < headerCells.length; i++) {\n                headerCells.eq(i).removeData(GROUP_SORT);\n            }\n        },\n\n        _continuousItems: function(filter, cell) {\n            if (!this.lockedContent) {\n                return;\n            }\n\n            var that = this;\n\n            var elements = that.table.add(that.lockedTable);\n\n            var lockedItems = $(filter, elements[0]);\n            var nonLockedItems = $(filter, elements[1]);\n            var columns = cell ? lockedColumns(leafColumns(that.columns)).length : 1;\n            var nonLockedColumns = cell ? leafColumns(that.columns).length - columns : 1;\n            var result = [];\n\n            for (var idx = 0; idx < lockedItems.length; idx += columns) {\n                push.apply(result, lockedItems.slice(idx, idx + columns));\n                push.apply(result, nonLockedItems.splice(0, nonLockedColumns));\n            }\n\n            return result;\n        },\n\n        _selectable: function() {\n            var that = this,\n                multi,\n                cell,\n                notString = [],\n                isLocked = that._isLocked(),\n                selectable = that.options.selectable;\n\n            if (selectable && !selectable.checkboxSelection) {\n\n                if (that.selectable) {\n                    that.selectable.destroy();\n                }\n\n                that._selectedIds = {};\n\n                selectable = kendo.ui.Selectable.parseOptions(selectable);\n\n                multi = selectable.multiple;\n                cell = selectable.cell;\n\n                if (that._hasDetails()) {\n                    notString[notString.length] = \".k-detail-row\";\n                }\n                if (that.options.groupable || that._hasFooters() || that._groups()) {\n                    notString[notString.length] = \".k-grouping-row,.k-group-footer\";\n                }\n\n                notString = notString.join(\",\");\n\n                if (notString !== \"\") {\n                    notString = \":not(\" + notString + \")\";\n                }\n\n                var elements = that.table;\n                if (isLocked) {\n                    elements = elements.add(that.lockedTable);\n                }\n\n                var filter = \">\" + (cell ? SELECTION_CELL_SELECTOR : \"tbody>tr\" + notString);\n                that.selectable = new kendo.ui.Selectable(elements, {\n                    filter: filter,\n                    aria: true,\n                    multiple: multi,\n                    holdToDrag: !!(that._isMobile || kendo.support.mobileOS),\n                    toggleable: !!(that._isMobile || kendo.support.mobileOS),\n                    dragToSelect: that.options.selectable && that.options.selectable.dragToSelect,\n                    changing: function(e) {\n                        if (that.trigger(CHANGING, { target: e.target, originalEvent: e.originalEvent })) {\n                            e.preventDefault();\n                        }\n                    },\n                    change: function(e) {\n                        var selectedValues;\n                        if (!cell) {\n                            that._persistSelectedRows();\n                        }\n\n                        if (that._checkBoxSelection) {\n                            selectedValues = that.selectable.value();\n                            that._uncheckCheckBoxes();\n                            that._checkRows(selectedValues);\n                            if (selectedValues.length && selectedValues.length === that.items().length) {\n                                that._toggleHeaderCheckState(true);\n                            } else {\n                                that._toggleHeaderCheckState(false);\n                            }\n                        }\n\n                        that._calculateAggregatesForSelected();\n\n                        if (e.event) {\n                            that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n                        }\n                    },\n                    useAllItems: isLocked && multi && cell,\n                    relatedTarget: function(items) {\n                        if (cell || !isLocked) {\n                            return;\n                        }\n\n                        var related;\n                        var result = $();\n                        for (var idx = 0, length = items.length; idx < length; idx ++) {\n                            related = that._relatedRow(items[idx]);\n\n                            if (inArray(related[0], items) < 0) {\n                                result = result.add(related);\n                            }\n                        }\n\n                        return result;\n                    },\n                    continuousItems: function() {\n                        return that._continuousItems(filter, cell);\n                    },\n                    ignoreOverlapped: that.options.selectable && that.options.selectable.ignoreOverlapped,\n                    addIdToRanges: true\n                });\n\n                if (that.options.navigatable) {\n                    elements.on(\"keydown\" + NS, function(e) {\n                        var current = that.current();\n                        var target = e.target;\n                        var eventObject = { event: e };\n                        var triggerChange;\n                        var triggerChanging;\n                        var lastSelection;\n                        if (!current) {\n                            return;\n                        }\n                        if (e.keyCode === keys.SPACEBAR && !e.shiftKey && $.inArray(target, elements) > -1 &&\n                            !current.is(\".k-edit-cell,.k-header\") &&\n                            current.parent().is(\":not(.k-grouping-row,.k-detail-row,.k-group-footer)\")) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                current = cell ? current : current.parent();\n                                triggerChange = !current.hasClass(SELECTED) || that.selectable.value().length > 1;\n                                triggerChanging = triggerChange || (multi && current.hasClass(SELECTED) && e.ctrlKey);\n\n                                if (triggerChanging && that.trigger(CHANGING, { target: current, originalEvent: e })) {\n                                    return;\n                                }\n\n                                if (isLocked && !cell) {\n                                    current = current.add(that._relatedRow(current));\n                                }\n\n                                if (multi) {\n                                    if (!e.ctrlKey) {\n                                        that.selectable.clear();\n                                    } else {\n                                        if (current.hasClass(SELECTED)) {\n                                            that._deselectCheckRows(current);\n                                            that._calculateAggregatesForSelected();\n                                            that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n                                            return;\n                                        }\n                                    }\n                                } else {\n                                    that.selectable.clear();\n                                }\n                                if (!cell) {\n                                    that.selectable._lastActive = current;\n                                }\n                                that.selectable.value(current);\n                                if (triggerChange) {\n                                    that._calculateAggregatesForSelected();\n                                    that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n                                }\n                        } else if (!cell &&\n                            ($(target).is(\"td\") || ($(target).is(\"table\") && inArray(target, this._navigatableTables))) &&\n                          ((e.shiftKey && e.keyCode == keys.LEFT) ||\n                           (e.shiftKey && e.keyCode == keys.RIGHT) ||\n                           (e.shiftKey && e.keyCode == keys.UP) ||\n                           (e.shiftKey && e.keyCode == keys.DOWN) ||\n                           (e.keyCode === keys.SPACEBAR && e.shiftKey))) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            current = current.parent();\n\n                            if (that.trigger(CHANGING, { target: current, originalEvent: e })) {\n                                return;\n                            }\n\n                            lastSelection = that.selectable.value();\n\n                            if (isLocked) {\n                                current = current.add(that._relatedRow(current));\n                            }\n\n                            if (multi) {\n                                if (!that.selectable._lastActive) {\n                                    that.selectable._lastActive = current;\n                                }\n                                that.selectable.selectRange(that.selectable._firstSelectee(), current);\n\n                                if (!compareElements(lastSelection, that.selectable.value())) {\n                                    that.trigger(CHANGE, eventObject);\n                                }\n                            } else if (!current.hasClass(SELECTED)) {\n                                that.selectable.clear();\n                                that.selectable.value(current);\n                                that._calculateAggregatesForSelected();\n                                that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n                            }\n                        }\n                    });\n                }\n            }\n        },\n\n        _pasteReplaceHandler: function(plain) {\n            var that = this,\n                rows,\n                current,\n                currentRow,\n                currentRowUid,\n                currentField,\n                uids = [];\n\n            current = that.select().first();\n\n            if (!current.length) {\n                return;\n            }\n\n            if (current.is(TR)) {\n                current = current.children(TD).first();\n            }\n\n            rows = plain.split(\"\\n\").filter(f => f);\n            currentRow = current.closest(\"tr\");\n            currentField = that.thead.find(\"th:eq(\" + current.index() + \")\").data(\"field\");\n            currentRowUid = currentRow.data(\"uid\");\n\n            uids.push(currentRowUid);\n\n            currentRow.nextAll(ITEMROW).slice(0, rows.length - 1).each((i, item) => {\n                uids.push($(item).data(\"uid\"));\n            });\n\n            that._executePaste(rows, uids, null, currentField);\n        },\n\n        _pasteInsertHandler: function(plain) {\n            var that = this,\n                dataSource = that.dataSource,\n                rows,\n                current,\n                currentRow,\n                dataItemIndex,\n                dataItem;\n\n            current = that.select().first();\n\n            if (!current.length) {\n                return;\n            }\n\n            if (current.is(TR)) {\n                current = current.children(TD).first();\n            }\n\n            rows = plain.split(\"\\n\").filter(f => f);\n            currentRow = current.closest(\"tr\");\n            dataItem = that.dataItem(currentRow);\n            dataItemIndex = dataSource.indexOf(dataItem) + 1;\n\n            that._executePaste(rows, null, dataItemIndex, null);\n        },\n\n        _executePaste: function(rows, uids, index, currentField) {\n            var that = this,\n                dataSource = that.dataSource,\n                update = uids || false,\n                dataItem,\n                row,\n                cells,\n                cell,\n                column,\n                field,\n                selectedUids = that._getSelectedRowUids(),\n                selectedColumnFields = that._getSelectedColumnFields(),\n                changedItems = [],\n                visibleColumns = visibleLeafColumns(that.columns).filter(col => !col.selectable && !col.draggable & !col.command),\n                startingIndex = currentField && visibleColumns.map(c => c.field).indexOf(currentField);\n\n            // If only one value is copied and multiple cells are selected, replace all values in all selected cells with the copied value.\n            if (rows.length === 1 && rows[0].split(\"\\t\").length === 1 && update) {\n                for (let j = 0; j < selectedUids.length; j++) {\n                    const uid = selectedUids[j];\n                    dataItem = dataSource.getByUid(uid);\n                    cell = rows[0].split(\"\\t\")[0];\n\n                    for (let j = 0; j < selectedColumnFields.length; j++) {\n                        field = selectedColumnFields[j];\n                        if (dataItem && cell) {\n                            dataItem.set(field, cell);\n                        }\n                    }\n\n                    if (dataItem && dataItem.dirty) {\n                        changedItems.push(dataItem);\n                    }\n                }\n            } else {\n                // If more than one value is copied, proceed with the standard replace.\n                for (let i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    cells = row.split(\"\\t\");\n                    dataItem = update ? dataSource.getByUid(uids[i]) : dataSource.insert(index + i, {});\n\n                    for (let j = 0; j < cells.length; j++) {\n                        cell = cells[j].replace(/\\r/, \"\");\n                        column = visibleColumns[j + startingIndex || 0];\n\n                        if (column && dataItem && cell) {\n                            field = column.field;\n                            dataItem.set(field, cell);\n                        }\n                    }\n\n                    if (dataItem && dataItem.dirty) {\n                        changedItems.push(dataItem);\n                    }\n                }\n            }\n            that.trigger(PASTE, { items: changedItems, type: update ? \"replace\" : \"insert\" });\n        },\n\n        _pasteKeyboardHandler: function(e) {\n            var that = this,\n                current = that.current(),\n                clipBoardData = e.originalEvent.clipboardData,\n                operation = (that.pasteActionsDropDownList && that.pasteActionsDropDownList.value()) || \"insert\",\n                rowUid,\n                cellIndex,\n                plain;\n\n            if ($(e.target).is(\".k-edit-cell input:visible\")) {\n                return;\n            }\n\n            if (clipBoardData) {\n                e.preventDefault();\n                plain = clipBoardData.getData(\"text\").trimEnd();\n\n                // If the copied value consists only of white spaces or new lines, reduce it to a single white space.\n                if (isEmptyString(plain)) {\n                    plain = \" \";\n                }\n\n                if (current && current.length) {\n                    cellIndex = current.index();\n                    rowUid = current.closest(TR).data(\"uid\");\n                }\n\n                if (operation === \"replace\") {\n                    that._pasteReplaceHandler(plain);\n                }\n\n                if (operation === \"insert\") {\n                    that._pasteInsertHandler(plain);\n                }\n\n                // Restore the focus to the last focused cell.\n                if (cellIndex && rowUid) {\n                    that._currentRowIndex = that.wrapper.find(TR + \"[data-uid='\" + rowUid + \"']\").index();\n                    that._restoreCurrent(cellIndex);\n                }\n            }\n        },\n\n        _paste: function() {\n            var that = this,\n                options = that.options,\n                selectable = options.selectable,\n                allowPaste = options.allowPaste;\n\n            if (allowPaste && selectable) {\n                that.pasteHandler = that._pasteKeyboardHandler.bind(that);\n                that.wrapper.on(\"paste\", that.pasteHandler);\n\n                if (that.options.toolbar) {\n                    that._pasteToolbarDropDown();\n                }\n            }\n        },\n\n        _clipboard: function() {\n            var options = this.options;\n            var selectable = options.selectable;\n\n            if (selectable && options.allowCopy) {\n                var grid = this;\n                if (!options.navigatable) {\n                    grid.table.attr(TABINDEX, 0);\n\n                    grid.table.add(grid.lockedTable)\n                        .on(MOUSEDOWN + NS + \" keydown\" + NS, \".k-detail-cell\", function(e) {\n                            if (e.target !== e.currentTarget) {\n                                e.stopImmediatePropagation();\n                            }\n                        })\n                        .on(MOUSEDOWN + NS, NAVROW + \">\" + NAVCELL, tableClick.bind(grid));\n                }\n                grid.copyHandler = grid.copySelection.bind(grid);\n                grid.updateClipBoardState = function() {\n                    if (grid.areaClipBoard) {\n                        grid.areaClipBoard.val(grid.getTSV()).trigger(\"focus\").select();\n                    }\n                };\n                grid.bind(\"change\",grid.updateClipBoardState);\n                grid.wrapper.on(\"keydown\", grid.copyHandler);\n                grid.clearAreaHandler = grid.clearArea.bind(grid);\n                grid.wrapper.on(\"keyup\", grid.clearAreaHandler);\n            }\n        },\n\n        copySelectionToClipboard: function(includeHeaders) {\n            this._createAreaClipBoard();\n            this.areaClipBoard.val(this.getTSV(includeHeaders)).trigger(\"focus\").select();\n            document.execCommand('copy');\n        },\n\n        copySelection: function(e) {\n            if ((e instanceof jQuery.Event && !(e.ctrlKey || e.metaKey)) ||\n                !(e.keyCode === 67 && (e.ctrlKey || e.metaKey)) ||\n                $(e.target).is(\"input:visible,textarea:visible\") ||\n                (window.getSelection && window.getSelection().toString()) ||\n                (document.selection && document.selection.createRange().text) ) {\n                return;\n            }\n\n            this._createAreaClipBoard();\n            this.areaClipBoard.val(this.getTSV()).trigger(\"focus\").select();\n        },\n\n        _createAreaClipBoard: function() {\n            if (!this.areaClipBoard) {\n                this.areaClipBoard =\n                    $(\"<textarea />\")\n                    .css({\n                        position: \"fixed\",\n                        top: \"50%\",\n                        left: \"50%\",\n                        opacity: 0,\n                        width: 0,\n                        height: 0\n                    })\n                    .appendTo(this.wrapper);\n            }\n        },\n\n        getTSV: function(includeHeaders) {\n            var grid = this;\n            var selected = grid.select();\n            var delimeter = \"\\t\";\n            var allowCopy = grid.options.allowCopy;\n            var onlyVisible = true;\n            var hasLockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n\n            if ($.isPlainObject(allowCopy) && allowCopy.delimeter) {\n                delimeter = allowCopy.delimeter;\n            }\n            var text = \"\";\n            if (selected.length) {\n                if (selected.eq(0).is(TR)) {\n                    selected = selected.find(\"td:not(.k-group-cell)\");\n                }\n                if (onlyVisible) {\n                    selected.filter(\":visible\");\n                }\n\n                var result = [];\n                var cellsOffset = this.columns.length;\n                var lockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n                var inLockedArea = true;\n                var fields = [];\n                var field;\n                var columns = visibleLeafColumns(this.columns);\n\n                $.each(selected, function(idx, cell) {\n                    cell = $(cell);\n                    field = grid._getCellField(cell, hasLockedCols);\n\n                    var tr = cell.closest(TR);\n                    var rowIndex = tr.index();\n                    var cellIndex = cell.index();\n                    if (onlyVisible) {\n                        cellIndex -= cell.prevAll(\":hidden\").length;\n                    }\n                    if (lockedCols && inLockedArea) {\n                        inLockedArea = $.contains(grid.lockedTable[0], cell[0]);\n                    }\n                    if (grid._groups() && inLockedArea) {\n                        cellIndex -= grid._groups();\n                    }\n                    cellIndex = inLockedArea ? cellIndex : (cellIndex + lockedCols );\n                    if (field) {\n                        fields[cellIndex] = field;\n                    }\n                    if (cellsOffset > cellIndex) {\n                        cellsOffset = cellIndex;\n                    }\n                    var cellText = cell.text();\n                    if (!result[rowIndex]) {\n                        result[rowIndex] = [];\n                    }\n                    result[rowIndex][cellIndex] = cellText;\n                });\n\n                var rowsOffset = result.length;\n                result = $.each(result, function(idx, val) {\n                    if (val) {\n                        result[idx] = val.slice(cellsOffset);\n                        if (rowsOffset > idx) {\n                            rowsOffset = idx;\n                        }\n                    }\n                });\n\n                if (includeHeaders && fields.length) {\n                    result.splice(rowsOffset, 0, fields.map(function(field) {\n                        return getTitle(field, columns);\n                    }));\n\n                    var headerIndex = result.findIndex(function(el) {\n                        return el !== undefined$1;\n                    });\n\n                    result[headerIndex] = result[headerIndex].slice(cellsOffset);\n                }\n\n                $.each(result.slice(rowsOffset), function(idx, val) {\n                    if (val) {\n                        text += val.join(delimeter) + \"\\r\\n\";\n                    } else {\n                        text += \"\\r\\n\";\n                    }\n                });\n            }\n            return text;\n        },\n\n        clearArea: function(e) {\n            if (this.areaClipBoard && e && e.target === this.areaClipBoard[0]) {\n                focusTable(this.table, true);\n            }\n\n            if (this.areaClipBoard) {\n                this.areaClipBoard.remove();\n                this.areaClipBoard = null;\n            }\n        },\n\n        _adaptiveColumns: function() {\n            var that = this;\n\n            if (that._anyColumnHasMediaQuery()) {\n                that._setColumnsMediaVisibility(that.columns);\n                that._attachColumnMediaResizeHandler();\n            }\n        },\n\n        _anyColumnHasMediaQuery: function() {\n            return this._columnsWithMediaQuery().length;\n        },\n\n        _columnsWithMediaQuery: function() {\n            return columnsWithMedia(this.columns);\n        },\n\n        _attachColumnMediaResizeHandler: function() {\n            var that = this;\n\n            that._detachColumnMediaResizeHandler();\n            that._columnMediaResizeHandler = that._onColumnMediaResize.bind(that);\n            $(window).on(RESIZE + NS, that._columnMediaResizeHandler);\n        },\n\n        _detachColumnMediaResizeHandler: function() {\n            var that = this;\n\n            if (that._columnMediaResizeHandler) {\n                $(window).off(RESIZE + NS, that._columnMediaResizeHandler);\n            }\n        },\n\n        _onColumnMediaResize: function() {\n            var that = this;\n            that._setColumnsMediaVisibility(that.columns);\n            that._setContentMediaWidth();\n        },\n\n        _setColumnsMediaVisibility: function(columns) {\n            var cols = columns || [];\n\n            for (var i = 0; i < cols.length; i++) {\n                this._setColumnMediaVisibility(cols[i]);\n            }\n        },\n\n        _setColumnMediaVisibility: function(column) {\n            var that = this;\n\n            if (isUndefined(column.media)) {\n                that._setColumnsMediaVisibility(column.columns);\n            } else {\n                if (columnMatchesMedia(column)) {\n                    that._showColumnByMedia(column);\n\n                    if (!column.hidden) {\n                        that._setColumnsMediaVisibility(column.columns);\n                    }\n                } else {\n                    that._hideColumnByMedia(column);\n                }\n            }\n        },\n\n        _showColumnByMedia: function(column) {\n            if (!column.hidden) {\n                // \"hidden\" has a priority over \"matchesMedia\"\n                this.showColumn(column);\n            }\n\n            setColumnMatchesMedia(column);\n        },\n\n        _hideColumnByMedia: function(column) {\n            var initiallyHidden = column.hidden;\n\n            if (!initiallyHidden) {\n                column._hideByMedia = true;\n                this.hideColumn(column);\n                column._hideByMedia = false;\n\n                // hiding is tracked in \"matchesMedia\" instead of \"hidden\" flag\n                column.hidden = initiallyHidden;\n            }\n\n            setColumnMatchesMedia(column);\n        },\n\n        _setContentMediaWidth: function() {\n            var that = this;\n            var options = that.options;\n            var isLocked = that._isLocked();\n            var footer;\n\n            if (options.scrollable && (options.resizable === true || (options.resizable && options.resizable.columns === true))) {\n                if (isLocked && that.lockedFooter) {\n                    footer = that.lockedFooter.children(\"table\");\n                } else if (that.footer) {\n                    footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                }\n\n                if (!footer || !footer[0]) {\n                    footer = $();\n                }\n\n                var header = isLocked ? that.wrapper.find(\".k-grid-header-locked\").find(\"table\") : that.wrapper.find(\".k-grid-header\").find(\"table\");\n                var contentTable = isLocked ? that.lockedTable : that.table;\n\n                var headerColumns = header.find(\"th\");\n                var headerColgroup = header.find(\"colgroup\");\n\n                var headerColumnsCount = headerColumns.length;\n                var visibleHeaderColumnsCount = headerColumns.filter(isCellVisible).length;\n                var hiddenHeaderColumnsCount = headerColumns.length - visibleHeaderColumnsCount;\n\n                var totalHeaderWidth = 0;\n\n                if (header[0].style.width !== \"\" && parseFloat(header[0].style.width) !== totalHeaderWidth) {\n                    var currentHeaderWidth = header.css(WIDTH);\n\n                    for (var i = 0; i < headerColumnsCount; i++) {\n                        if (isElementVisible(headerColumns[i])) {\n                            var columnWidth;\n                            var cellIndex = Math.max(i, (i - hiddenHeaderColumnsCount));\n                            var colgroupChild = headerColgroup.children()[cellIndex];\n                            var columnStyleWidth = colgroupChild ? colgroupChild.style.width : \"\";\n\n                            if (columnStyleWidth !== \"\") {\n                                columnWidth = parseFloat(columnStyleWidth);\n                            } else {\n                                // remove the header width to calculate the height of a column without fixed width\n                                header.css(WIDTH, AUTO);\n                                columnWidth = outerWidth(headerColumns.eq(i));\n                                header.css(WIDTH, currentHeaderWidth);\n                            }\n\n                            totalHeaderWidth += columnWidth;\n                        }\n                    }\n\n                    contentTable.css('width', totalHeaderWidth - 1); // subtract 1 to remove the horizontal scroll\n                    header.css('width', totalHeaderWidth);\n                    footer.css('width', totalHeaderWidth);\n                    that._updateStickyColumns();\n                }\n            }\n        },\n\n        _minScreenSupport: function() {\n            var any = this.hideMinScreenCols();\n\n            if (any) {\n                this.minScreenResizeHandler = this.hideMinScreenCols.bind(this);\n                $(window).on(\"resize\", this.minScreenResizeHandler);\n            }\n        },\n\n        hideMinScreenCols: function() {\n            var cols = this.columns,\n                screenWidth = (window.innerWidth > 0) ? window.innerWidth : screen.width;\n\n            return this._iterateMinScreenCols(cols, screenWidth);\n        },\n\n        _iterateMinScreenCols: function(cols, screenWidth) {\n            var any = false;\n\n            for (var i = 0; i < cols.length; i++) {\n                var col = cols[i];\n                var minWidth = col.minScreenWidth;\n                if (minWidth !== undefined$1 && minWidth !== null) {\n                    any = true;\n                    if (minWidth > screenWidth) {\n                        this.hideColumn(col);\n                    } else {\n                        this.showColumn(col);\n                    }\n                }\n                if (!col.hidden && col.columns) {\n                    any = this._iterateMinScreenCols(col.columns, screenWidth) || any;\n                }\n            }\n            return any;\n        },\n\n        _stickyColumns: function() {\n            var that = this;\n\n            if (that._anyStickyColumns()) {\n                that._setStickyColumns(false);\n            }\n        },\n\n        _updateStickyColumns: function() {\n            var that = this;\n            var groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (that._anyStickyColumns()) {\n                that._setStickyColumns(true);\n                that._templates();\n\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n\n                if (that._hasFilterRow()) {\n                    that._updateStickyFilterCells();\n                }\n            }\n        },\n\n        _updateStickyFilterCells: function() {\n            var that = this;\n            var filterCells = that.thead.find(\".k-filter-row\").find(\"td:not(.k-group-cell,.k-hierarchy-cell)\");\n            if (filterCells.length) {\n                filterCells.each(function() {\n                    var th = $(this);\n                    var column = th.data(\"column\");\n\n                    if (column.sticky) {\n                        if (isPlainObject(column.stickyStyle)) {\n                            th.css({\n                                left: column.stickyStyle.left || \"\",\n                                right: column.stickyStyle.right || \"\"\n                            });\n                        }\n\n                        th.addClass(STICKY_HEADER_CLASS);\n                    } else {\n                        th.css({\n                            left: \"\",\n                            right: \"\"\n                        });\n\n                        th.removeClass(STICKY_HEADER_CLASS);\n                    }\n                });\n            }\n        },\n\n        _anyStickyColumns: function() {\n            var that = this;\n\n            return stickyColumns(that.columns).length;\n        },\n\n        _setStickyColumns: function(updateStyles) {\n            var that = this;\n            var columns = stickyColumns(that.columns);\n            var visibleColumns = visibleStickyColumns(that.columns);\n            var stickyWidths = that._calculateStickyWidths(visibleColumns);\n\n            that._removeStickyAttributes(columns);\n            that._setStickyClassAttributes(columns);\n            that._setStickyStyleAttributes(visibleColumns, stickyWidths, updateStyles);\n\n            if (updateStyles) {\n                that._setStickyStyles(visibleColumns, stickyWidths);\n            }\n        },\n\n        _calculateStickyWidths: function(columns, initialLeftWidth, initialRightWidth) {\n            var that = this;\n            var i;\n            var column;\n            var columnWidth;\n            var nextColumnLeft;\n            var nextColumnRight;\n            var left = isRtl ? \"right\" : \"left\";\n            var right = isRtl ? \"left\" : \"right\";\n            var stickyWidths = {\n                left: new Array(columns.length).fill(initialLeftWidth ? initialLeftWidth : 0),\n                right: new Array(columns.length).fill(initialRightWidth ? initialRightWidth : 0)\n            };\n\n            for (i = 0; i < columns.length - 1; i++) {\n                column = columns[i];\n                columnWidth = that._sumColumnWidth(column);\n                nextColumnLeft = columnWidth + stickyWidths[left][i];\n\n                stickyWidths[left][i + 1] = nextColumnLeft;\n            }\n\n            for (i = columns.length - 1; i > 0; i--) {\n                column = columns[i];\n                columnWidth = that._sumColumnWidth(column);\n                nextColumnRight = columnWidth + stickyWidths[right][i];\n\n                stickyWidths[right][i - 1] = nextColumnRight;\n            }\n\n            return stickyWidths;\n        },\n\n        _setStickyClassAttributes: function(columns, masterIndex) {\n            var that = this;\n            var i;\n            var column;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n\n                if (column.columns) {\n                    if (!masterIndex && i) {\n                        masterIndex = i;\n                    }\n\n                    that._setStickyClassAttributes(childColumns([column]), masterIndex);\n                }\n\n                if (masterIndex) {\n                    addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_NO_BORDER_CLASS);\n                }\n                addColumnAttribute(column, \"attributes\", \"class\", STICKY_CELL_CLASS);\n                addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_CLASS);\n                addColumnAttribute(column, \"footerAttributes\", \"class\", STICKY_FOOTER_CLASS);\n            }\n        },\n\n        _setStickyStyleAttributes: function(columns, stickyWidths, updateStyles) {\n            var that = this;\n            var i;\n            var column;\n            var stickyLeft;\n            var stickyRight;\n            var stickyStyle;\n            var childCols;\n            var childStickyWidths;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                stickyLeft = stickyWidths.left[i];\n                stickyRight = stickyWidths.right[i];\n                stickyStyle = { left: stickyLeft + \"px\", right: stickyRight + \"px\" };\n\n                if (column.columns) {\n                    childCols = visibleChildColumns([column]);\n                    childStickyWidths = that._calculateStickyWidths(childCols, stickyLeft, stickyRight);\n\n                    that._setStickyStyleAttributes(childCols, childStickyWidths, updateStyles);\n\n                    if (updateStyles) {\n                        that._setStickyStyles(childCols, childStickyWidths);\n                    }\n                }\n\n                addColumnAttribute(column, \"attributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                addColumnAttribute(column, \"attributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n                addColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                addColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n                addColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                addColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n\n                column.stickyStyle = stickyStyle;\n            }\n        },\n\n        _removeStickyAttributes: function(columns) {\n            var that = this;\n            var i;\n            var cellClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_CELL_CLASS + \")*\", \"ig\");\n            var headerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_CLASS + \")*\", \"ig\");\n            var footerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_FOOTER_CLASS + \")*\", \"ig\");\n            var headerClassNoBorderRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_NO_BORDER_CLASS + \")*\", \"ig\");\n            var column;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n\n                if (column.columns) {\n                    that._removeStickyAttributes(childColumns([column]));\n                }\n\n                removeColumnAttribute(column, \"attributes\", \"class\", cellClassRegExp);\n                removeColumnAttribute(column, \"attributes\", kendo.attr(\"style-left\"), '', true);\n                removeColumnAttribute(column, \"attributes\", kendo.attr(\"style-right\"), '', true);\n\n                removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassRegExp);\n                removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassNoBorderRegExp);\n                removeColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-left\"), '', true);\n                removeColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-right\"), '', true);\n\n                removeColumnAttribute(column, \"footerAttributes\", \"class\", footerClassRegExp);\n                removeColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-left\"), '', true);\n                removeColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-right\"), '', true);\n            }\n        },\n\n        _setStickyStyles: function(columns, stickyWidths) {\n            var that = this;\n            var i;\n            var j;\n            var leafsCols = leafColumns(nonLockedColumns(that.columns));\n            var rows = that.tbody.children(\":not(.k-detail-row)\");\n            var row;\n            var column;\n            var columnIndex;\n            var left;\n            var right;\n            var header;\n            var footer;\n            var groupHeader;\n            var cell;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                left = stickyWidths.left[i];\n                right = stickyWidths.right[i];\n                columnIndex = leafsCols.indexOf(column);\n                header = that._getColumnHeader(column);\n\n                header.addClass(STICKY_HEADER_CLASS);\n                if (column.headerAttributes[\"class\"] && column.headerAttributes[\"class\"].indexOf(STICKY_HEADER_NO_BORDER_CLASS) !== -1) {\n                    header.addClass(STICKY_HEADER_NO_BORDER_CLASS);\n                }\n                setLeftAndRightStyles(header, left, right);\n\n                if (column.columns) {\n                    continue;\n                }\n\n                if (that.footer) {\n                    footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                    footer.addClass(STICKY_FOOTER_CLASS);\n                    setLeftAndRightStyles(footer, left, right);\n                }\n\n                for (j = 0; j < rows.length; j++) {\n                    row = $(rows[j]);\n\n                    if (row.hasClass(GROUPING_ROW)) {\n                        groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n\n                        groupHeader.addClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(groupHeader, left, right);\n                    } else {\n                        cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                        cell.addClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(cell, left, right);\n                    }\n                }\n            }\n        },\n\n        _removeStickyStyles: function(columns) {\n            var that = this;\n            var i;\n            var j;\n            var leafsCols = leafColumns(nonLockedColumns(that.columns));\n            var rows = that.tbody.children(\":not(.k-detail-row)\");\n            var row;\n            var column;\n            var columnIndex;\n            var header;\n            var footer;\n            var groupHeader;\n            var cell;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                columnIndex = leafsCols.indexOf(column);\n                header = that._getColumnHeader(column);\n\n                header.removeClass(STICKY_HEADER_CLASS);\n                header.removeClass(STICKY_HEADER_NO_BORDER_CLASS);\n                setLeftAndRightStyles(header, \"\", \"\");\n\n                if (column.columns) {\n                    that._removeStickyStyles(column.columns);\n                    continue;\n                }\n\n                if (column.footerTemplate && that.footer) {\n                    footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                    footer.removeClass(STICKY_FOOTER_CLASS);\n                    setLeftAndRightStyles(footer, \"\", \"\");\n                }\n\n                for (j = 0; j < rows.length; j++) {\n                    row = $(rows[j]);\n\n                    if (row.hasClass(GROUPING_ROW)) {\n                        groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n\n                        groupHeader.removeClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(groupHeader, \"\", \"\");\n                    } else {\n                        cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                        cell.removeClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(cell, \"\", \"\");\n                    }\n                }\n            }\n        },\n\n        _getColumnHeader: function(column) {\n            var that = this;\n            var header = $(\"#\" + column.headerAttributes.id).length ? $(\"#\" + column.headerAttributes.id) : $(\"#\" + that._cellId);\n\n            return header;\n        },\n\n        _sumColumnWidth: function(column) {\n            var that = this;\n            var width = 0;\n\n            if (column.columns) {\n                width = that._sumCurrentWidths(leafColumns([column]));\n            } else {\n                width = that._sumCurrentWidths([column]);\n            }\n\n            return width;\n        },\n\n        _sumCurrentWidths: function(cols) {\n            var that = this;\n            var width = 0;\n            var colWidth = 0;\n            var col;\n            var header;\n            var i;\n            var length = cols.length;\n\n            for (i = 0; i < length; i++) {\n                col = cols[i];\n                header = that._getColumnHeader(col);\n\n                if (!col.hidden && columnMatchesMedia(col)) {\n                    colWidth = header.is(\":visible\") ? header.outerWidth() : col.width;\n\n                    width += colWidth ? parseInt(colWidth, 10) : 0;\n                }\n            }\n\n            return width;\n        },\n\n        _belongsToGrid: function(element) {\n            return this.wrapper[0] === element.closest(WRAPPER)[0];\n        },\n\n        getSelectedData: function() {\n            var that = this;\n            var selectedRanges = that.selectable.selectedRanges();\n            var selectedRangeNames = Object.keys(selectedRanges);\n            var selectedSingleItems = that.selectable.selectedSingleItems();\n            var result = [];\n            var visibleColumns = visibleLeafColumns(that.columns);\n\n            for (var idx = 0; idx < selectedRangeNames.length; idx++) {\n                result = result.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns, null, true));\n            }\n\n            if (selectedSingleItems.length) {\n                result = result.concat(that._mapSelectionToData(selectedSingleItems, visibleColumns, null, true));\n            }\n\n            return result;\n        },\n\n        getSelectedDataByKeys: function() {\n            var that = this,\n                dataSource = that.dataSource,\n                keys = that.selectedKeyNames(),\n                visibleColumns = visibleLeafColumns(that.columns),\n                key,\n                dataItem,\n                result = {};\n\n            var columnMapHandler = function(col) {\n                var result = {};\n\n                if (!col.field) {\n                    return;\n                }\n\n                result[col.field] = dataItem[col.field];\n                return result;\n            };\n\n            for (let i = 0; i < keys.length; i++) {\n                key = keys[i];\n                dataItem = dataSource.get(key);\n\n                if (dataItem) {\n                    result[dataItem.uid] = $.extend.apply(null, visibleColumns.map(columnMapHandler));\n                }\n            }\n\n            return Object.keys(result).map(function(id) {\n                return result[id];\n            });\n        },\n\n        exportSelectedToExcel: function(includeHeaders) {\n            if (!kendo.excel || !kendo.ooxml) {\n                throw new Error(\"The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.\");\n            }\n\n            var that = this;\n            var excel = this.options.excel || {};\n            var visibleColumns = visibleLeafColumns(that.columns);\n            var exporter = new kendo.excel.ExcelExporter({});\n            var columnHandler = function() {return { autoWidth: true };};\n            var book = {\n                sheets: [{\n                    columns: Array.apply(0, Array(visibleColumns.length)).map(columnHandler),\n                    rows: [],\n                    freezePane: {},\n                    filter: false\n                }]\n            };\n            var selectedRanges = that.selectable.selectedRanges();\n            var selectedRangeNames = Object.keys(selectedRanges);\n            var selectedSingleItems = that.selectable.selectedSingleItems();\n            var idx;\n            var exportData = [];\n            var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n            var sortHandler = exportDataSort.bind(that);\n\n            for (idx = 0; idx < selectedRangeNames.length; idx++) {\n                exportData = exportData.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns, isExcelExportableColumn));\n            }\n\n            if (exportData.length) {\n                that._addRangeSelectionRows(book, exporter, exportData, includeHeaders);\n\n            }\n            exportData = selectedSingleItems.length ? that._mapSelectionToData(selectedSingleItems, visibleColumns, isExcelExportableColumn) : [];\n\n            if (exportData.length) {\n                if (hasLockedCols) {\n                    exportData = exportData.sort(sortHandler);\n                }\n                that._addSingleSelectionRows(book, exporter, exportData, includeHeaders);\n            }\n\n            if (book.sheets[0].rows.length) {\n                var workbook = new kendo.ooxml.Workbook(book);\n\n                if (!workbook.options) {\n                    workbook.options = {};\n                }\n                workbook.options.skipCustomHeight = true;\n\n                workbook.toDataURLAsync().then(function(dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: book.fileName || excel.fileName,\n                        proxyURL: excel.proxyURL,\n                        forceProxy: excel.forceProxy\n                    });\n                });\n            }\n        },\n\n        _addSingleSelectionRows: function(book, exporter, data, includeHeaders) {\n            var idx = 0;\n            var visibleColumns = visibleLeafExportColumns(this.columns);\n            var item;\n\n            for (idx = 0; idx < data.length; idx++) {\n                item = data[idx];\n                exporter.data = [item];\n                this._setExporterColumns(exporter, visibleColumns, item);\n                this._createExportRows(book, exporter, includeHeaders);\n            }\n        },\n\n        _addRangeSelectionRows: function(book, exporter, data, includeHeaders) {\n            var visibleColumns = visibleLeafExportColumns(this.columns);\n\n            exporter.data = data;\n            this._setExporterColumns(exporter, visibleColumns, data[0]);\n            this._createExportRows(book, exporter, includeHeaders);\n        },\n\n        _createExportRows: function(book, exporter, includeHeaders) {\n            book.sheets[0].rows = book.sheets[0].rows.concat(includeHeaders ? exporter._rows() : exporter._dataRows(exporter.data, 0));\n        },\n\n        _setExporterColumns: function(exporter, columns, item) {\n            exporter.columns = exporter.options.columns = $.map(columns.filter(function(col) {\n                return Object.keys(item).indexOf(col.field) >= 0;\n            }), exporter._prepareColumn);\n        },\n\n        _mapSelectionToData: function(elements, visibleColumns, columnsFilter, ignoreOffset) {\n            var that = this;\n            var elementType = elements[0][0].nodeName;\n            var isRowSelection = elementType === 'TR';\n            var dataItem;\n            var result = {};\n            var element;\n            var curr;\n            var field;\n            var columnMapHandler = function(col) {\n                var result = {};\n\n                if (!col.field || (columnsFilter && !columnsFilter(col))) {\n                    return;\n                }\n\n                result[col.field] = dataItem[col.field];\n                return result;\n            };\n            var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n            var column;\n\n            for (var i = 0; i < elements.length; i++) {\n                element = elements[i];\n                dataItem = that.dataItem(isRowSelection ? element : element.parent());\n\n                if (isRowSelection) {\n                    result[dataItem.uid] = $.extend.apply(null, visibleColumns.map(columnMapHandler));\n                } else {\n                    field = that._getCellField(element, hasLockedCols, ignoreOffset);\n\n                    if (!field) {\n                        continue;\n                    }\n\n                    curr = result[dataItem.uid];\n\n                    if (!curr) {\n                        curr = result[dataItem.uid] = {};\n                    }\n\n                    column = findColumnByField(visibleColumns, field);\n\n                    if (!column || (columnsFilter && !columnsFilter(column))) {\n                        continue;\n                    }\n\n                    curr[field] = dataItem[field];\n                }\n            }\n\n            return Object.keys(result).map(function(id) {\n                result[id].uid = id;\n                return result[id];\n            });\n        },\n\n        _getCellField: function(cell, hasLockedCols, ignoreOffset) {\n            var grid = this;\n            var inLockedArea = hasLockedCols && $.contains(grid.lockedTable[0], cell[0]);\n            var fieldAttr = kendo.attr('field');\n            var index = kendo.attr('index');\n            var indexOffset = 0;\n\n            if (ignoreOffset) {\n                indexOffset = grid._trailingColumns();\n            }\n\n            if (hasLockedCols) {\n                return grid.element.find(\".k-grid-header-\" + (inLockedArea ? \"locked\" : \"wrap\") + \" th[\" + index + \"='\" + cell.index() + \"']\").attr(fieldAttr);\n            } else {\n                return grid.thead.find(\"th[\" + index + \"='\" + (cell.index() - indexOffset) + \"']\").attr(fieldAttr);\n            }\n        },\n\n        _relatedRow: function(row) {\n            var lockedTable = this.lockedTable;\n            row = $(row);\n\n            if (!lockedTable) {\n                return row;\n            }\n\n            var table = row.closest(this.table.add(this.lockedTable));\n            var index = table.find(\">tbody>tr\").index(row);\n\n            table = table[0] === this.table[0] ? lockedTable : this.table;\n\n            return table.find(\">tbody>tr\").eq(index);\n        },\n\n        _relatedCell: function(cell) {\n            var lockedTable = this.lockedTable;\n\n            cell = $(cell);\n\n            if (!lockedTable) {\n                return cell;\n            }\n\n            var table = cell.closest(this.table.add(this.lockedTable));\n            var index = table.find(\">tbody>tr>td\").index(cell);\n\n            table = table[0] === this.table[0] ? lockedTable : this.table;\n\n            return table.find(\">tbody>tr>td\").index(index);\n        },\n\n        clearSelection: function() {\n            var that = this;\n\n            if (that.selectable && !that._checkBoxSelection) {\n                that.selectable.clear();\n            }\n\n            if (that._checkBoxSelection) {\n                that._deselectCheckRows(that.select());\n                return;\n            }\n\n            if (that.options.persistSelection) {\n                that._persistSelectedRows();\n            } else {\n                that._selectedIds = {};\n            }\n        },\n\n        select: function(items) {\n            var that = this,\n                selectable = that.selectable,\n                selectableoptions = kendo.ui.Selectable.parseOptions(this.options.selectable),\n                cell = selectableoptions.cell;\n\n            items = that.table.add(that.lockedTable).find(items);\n            if (items.length) {\n                if (selectable && !selectable.options.multiple) {\n                    selectable.clear();\n                    items = items.first();\n                }\n\n                if (that._isLocked()) {\n                    items = items.add(items.map(function() {\n                        if (cell) {\n                            return that._relatedCell(this);\n                        }\n                        else {\n                            return that._relatedRow(this);\n                        }\n                    }));\n                }\n\n                if (selectable && !that._checkBoxSelection) {\n                    selectable.value(items);\n                } else {\n                    that._checkRows(items);\n                    if (that.select().length === that.items().length) {\n                        that._toggleHeaderCheckState(true);\n                    }\n                }\n\n                if (!cell) {\n                    that._persistSelectedRows();\n                }\n\n                return;\n            }\n\n            return selectable ? selectable.value() : that.items().filter(\".\" + SELECTED);\n        },\n\n        _initSelectableAggregates: function() {\n            var that = this;\n\n            if (!that.options.selectable) {\n                return;\n            }\n\n            if (!that._selectableAggregatesOptions) {\n                that._selectableAggregatesOptions = that._parseSelectableAggregatesOptions();\n            }\n\n            if (that._selectableAggregatesOptions.count) {\n                that._cellAggregates = {\n                    count: 0\n                };\n            }\n        },\n\n        _calculateAggregatesForSelected: function() {\n            var that = this,\n                options = that.options,\n                selectedData = that.getSelectedDataByKeys(),\n                selectable = that.options.selectable,\n                cellAggregates = selectable.cellAggregates,\n                cellsLength = visibleLeafColumns(that.columns).filter(col => !col.selectable && !col.draggable & !col.command).length,\n                columnFields = getColumnsFields(options.columns),\n                isCellSelection = kendo.ui.Selectable.parseOptions(selectable).cell,\n                dataItem,\n                type,\n                value,\n                numberAggregates = [],\n                dateAggregates = [],\n                booleanAggregates = [],\n                count, min, max, sum, average, earliest, latest, isTrue, isFalse;\n\n            if (!cellAggregates) {\n                return;\n            }\n\n            // getSelectedDataByKeys won't work for cell selection.\n            if (isCellSelection) {\n                selectedData = that.getSelectedData();\n            }\n\n            cellAggregates = that._selectableAggregatesOptions;\n\n            for (let i = 0; i < selectedData.length; i++) {\n                dataItem = selectedData[i];\n\n                for (let j = 0; j < columnFields.length; j++) {\n                    value = dataItem[columnFields[j]];\n                    type = getType(value);\n\n                    switch (type) {\n                        case \"number\":\n                            numberAggregates.push(value);\n                            break;\n                        case \"date\":\n                            dateAggregates.push(value);\n                            break;\n                        case \"boolean\":\n                            booleanAggregates.push(value);\n                            break;\n                        default:\n                            break;\n                    }\n                }\n            }\n\n            if (cellAggregates.count) {\n                count = isCellSelection ? cellsExcludingSpecialColumns(that.select()).length : selectedData.length * cellsLength;\n            }\n\n            if (numberAggregates.length) {\n                max = cellAggregates.max ? numberAggregates.reduce((acc, current) => Math.max(acc, current)) : null;\n                min = cellAggregates.min ? numberAggregates.reduce((acc, current) => Math.min(acc, current)) : null;\n                sum = cellAggregates.sum ? numberAggregates.reduce((acc, current) => acc + current) : null;\n                average = cellAggregates.average ? numberAggregates.reduce((acc, current) => (acc + current)) / numberAggregates.length : null;\n            }\n\n            if (dateAggregates.length) {\n                earliest = cellAggregates.earliest ? dateAggregates.reduce((acc, current) => new Date(Math.min(acc, current))) : null;\n                latest = cellAggregates.latest ? dateAggregates.reduce((acc, current) => new Date(Math.max(acc, current))) : null;\n            }\n\n            if (booleanAggregates.length) {\n                isTrue = cellAggregates.isTrue ? booleanAggregates.filter(b => b === true).length : null;\n                isFalse = cellAggregates.isFalse ? booleanAggregates.filter(b => b === false).length : null;\n            }\n\n            that._cellAggregates = {\n                count: count,\n                max: max,\n                min: min,\n                sum: sum,\n                average: average,\n                earliest: earliest,\n                latest: latest,\n                isTrue: isTrue,\n                isFalse: isFalse\n            };\n\n            if (that.statusBar) {\n                that._statusBar();\n            }\n        },\n\n        _parseSelectableAggregatesOptions: function() {\n            var that = this,\n                cellAggregates = that.options.selectable.cellAggregates,\n                result = {};\n\n            if (isArray(cellAggregates)) {\n                for (let i = 0; i < cellAggregates.length; i++) {\n                    result[cellAggregates[i]] = true;\n                }\n                return result;\n            }\n\n            // If the value of cellAggregates is 'true' -> all aggregates must be enabled.\n            return {\n                count: true,\n                min: true,\n                max: true,\n                sum: true,\n                average: true,\n                earliest: true,\n                latest: true,\n                isTrue: true,\n                isFalse: true\n            };\n        },\n\n        _toggleHeaderCheckState: function(checked) {\n            var that = this;\n            if (checked) {\n                that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                    .prop(\"checked\", true).attr(ARIA_CHECKED, true)\n                    .attr(ARIA_LABEL, \"Deselect all rows\");\n            } else {\n                that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                    .prop(\"checked\", false).attr(ARIA_CHECKED, false)\n                    .attr(ARIA_LABEL, \"Select all rows\");\n            }\n        },\n\n        _uncheckCheckBoxes: function() {\n            var that = this;\n            var tables = that.table.add(that.lockedTable);\n\n            tables.find(\"tbody \" + CHECKBOXINPUT).attr(ARIA_CHECKED, false)\n                .prop(\"checked\", false).attr(ARIA_LABEL, \"Select row\");\n\n        },\n\n        _deselectCheckRows: function(items) {\n            var that = this,\n            rangeSelectedAttr = kendo.attr(\"range-selected\");\n            items = that.table.add(that.lockedTable).find(items);\n\n            if (that._isLocked()) {\n                items = items.add(items.map(function() {\n                    return that._relatedRow(this);\n                }));\n            }\n\n            items.each(function() {\n                $(this).removeClass(SELECTED).removeAttr(rangeSelectedAttr).find(CHECKBOXINPUT).attr(ARIA_CHECKED, false)\n                    .prop(\"checked\", false).attr(ARIA_LABEL, \"Select row\");\n            });\n            that._toggleHeaderCheckState(false);\n\n            that._persistSelectedRows();\n\n        },\n\n        _checkRows: function(items) {\n            items.each(function() {\n                $(this).addClass(SELECTED).find(CHECKBOXINPUT)\n                    .prop(\"checked\", true)\n                    .attr(ARIA_LABEL, \"Deselect row\")\n                    .attr(ARIA_CHECKED, true);\n            });\n        },\n\n        _persistSelectedRows: function() {\n            var that = this,\n                key,\n                dataItem,\n                allRows = that.items(),\n                dataSourceOptions = that.dataSource.options,\n                schema = dataSourceOptions.schema,\n                modelId,\n                selectedViewIds = {};\n\n            if (!schema || !schema.model || !that._data) {\n                return;\n            }\n\n            modelId = isFunction(schema.model) ? schema.model.fn.idField : schema.model.id;\n\n            if (!modelId) {\n                return;\n            }\n\n            if (!kendo.ui.Selectable.parseOptions(that.options.selectable).multiple && !that._checkBoxSelection) {\n                that._selectedIds = {};\n            }\n\n            that.select().each(function() {\n                dataItem = that.dataItem(this);\n                selectedViewIds[dataItem[modelId]] = true;\n            });\n\n            for (var i = 0; i < allRows.length; i ++) {\n                dataItem = that.dataItem(allRows[i]);\n                key = dataItem[modelId];\n                if (selectedViewIds[key]) {\n                    that._selectedIds[key] = true;\n                } else {\n                    delete that._selectedIds[key];\n                }\n            }\n        },\n\n        selectedKeyNames: function() {\n            var that = this,\n                ids = [];\n            for (var property in that._selectedIds) {\n                ids.push(property);\n            }\n            ids.sort();\n            return ids;\n        },\n\n        _updateCurrentAttr: function(current, next) {\n            var headerId = $(current).data(\"headerId\");\n            var nextId;\n            var descId;\n\n            $(current).removeClass(FOCUSED);\n            this.table.removeAttr(ARIA_ACTIVEDESCENDANT);\n\n            if (headerId) {\n                headerId = headerId.replace(this._cellId, \"\");\n                $(current).attr(ID, headerId);\n            } else {\n                $(current).removeAttr(ID);\n            }\n\n            nextId = next.attr(ID);\n\n            if (nextId != this._cellId) {\n                next.data(\"headerId\", nextId);\n            }\n\n            if (!!nextId) {\n                descId = nextId;\n            } else {\n                next.attr(ID, this._cellId);\n            }\n\n            next.addClass(FOCUSED);\n            this.table.attr(ARIA_ACTIVEDESCENDANT, descId || this._cellId);\n\n            this._current = next;\n        },\n\n        _scrollCurrent: function() {\n            var current = this._current;\n            var scrollable = this.options.scrollable;\n\n            if (!current || !scrollable) {\n                return;\n            }\n\n            var row = current.parent();\n            var tableContainer = row.closest(\"table\").parent();\n\n            var isInLockedContainer = tableContainer.is(\".k-grid-content-locked,.k-grid-header-locked\");\n            var isInContent = tableContainer.is(\".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap\");\n\n            var scrollableContainer = $(this.content).find(\">.k-virtual-scrollable-wrap\").addBack().last()[0];\n\n            //adjust scroll vertically\n            if (isInContent) {\n                if (this.virtualScroll) {\n                    var rowIndex = Math.max(inArray(row[0], this._items(row.parent())), 0);\n                    if (this.virtualScroll.rows) {\n                        this._rowVirtualIndex = this.virtualScrollable.itemIndex(rowIndex);\n                        this.virtualScrollable.scrollIntoView(row);\n                    } else {\n                        this._rowVirtualIndex = rowIndex;\n                        this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                    }\n                } else {\n                    this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                }\n            }\n\n            if (this.lockedContent) {\n                //sync locked and non-locked content scrollTop\n                this.lockedContent[0].scrollTop = scrollableContainer.scrollTop;\n            }\n\n            //adjust scroll horizontally, if not inside locked tables\n            if (!isInLockedContainer) {\n                this._scrollTo(current[0], scrollableContainer);\n            }\n        },\n\n        current: function(next) {\n            return this._setCurrent(next, true);\n        },\n\n        _setCurrent: function(next, preventTrigger, preventScroll) {\n            var current = this._current;\n\n            next = $(next);\n\n            if (current && next && current.length && next.length && current.closest(\".k-filter-row\").length > 0 && next.closest(\".k-filter-row\").length === 0) {\n                this._filterFocusable().attr(TABINDEX, -1);\n            }\n\n            if (next.length) {\n                if (!current || current[0] !== next[0]) {\n                    var parent = next.parent();\n                    var siblings = parent.children(DATA_CELL);\n                    var colspan = parseInt(parent.children().first().attr(\"colspan\"), 10);\n\n                    if (this._hasVirtualColumns()) {\n                        this._virtualCellIndex = (colspan > 1 ? colspan : 0) + siblings.index(next);\n                    }\n                    this._updateCurrentAttr(current, next);\n\n                    if (!preventScroll) {\n                        this._scrollCurrent();\n                    }\n\n                    if (!preventTrigger) {\n                        this.trigger(NAVIGATE, {\n                            element: next\n                        });\n                    }\n                }\n            }\n\n            if (next && next.length) {\n                this._lastCellIndex = next.parent().children(\".k-group-cell,\" + DATA_CELL_HIDDENINCLUDED).index(next);\n            }\n\n            this._updateSelctCheckbox(current, next);\n\n            return this._current;\n        },\n\n        _removeCurrent: function() {\n            if (this._current) {\n                this._current.removeClass(FOCUSED);\n                this._current = null;\n            }\n        },\n\n        _updateSelctCheckbox: function(current, next) {\n            var nextCheckbox;\n\n            if (next && next.length) {\n                nextCheckbox = next.find(\".k-select-checkbox\");\n\n                if (nextCheckbox.length > 0) {\n                    nextCheckbox.focus();\n                } else if (current && current.find(\".k-select-checkbox\").length > 0) {\n                    focusTable(this.table, true);\n                }\n            }\n        },\n\n        _scrollTo: function(element, container) {\n            var elementToLowercase = element.tagName.toLowerCase();\n            var isHorizontal = elementToLowercase === \"td\" || elementToLowercase === \"th\";\n            var table = $(element).closest(\"table\")[0];\n            var elementOffsetDir = element[isHorizontal ? \"offsetWidth\" : \"offsetHeight\"];\n            var containerScroll = container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"];\n            var containerOffsetDir = container[isHorizontal ? \"clientWidth\" : \"clientHeight\"];\n            var elementOffset = $(element).css(\"position\") === \"relative\" && isRtl && isHorizontal ? Math.abs(table.offsetLeft - element.offsetLeft) : element[isHorizontal ? \"offsetLeft\" : \"offsetTop\"];\n            var bottomDistance = elementOffset + elementOffsetDir;\n            var result = 0;\n            var ieCorrection = 0;\n            var firefoxCorrection = 0;\n\n            if (isRtl && isHorizontal) {\n                if (browser.msie || browser.edge) {\n                    ieCorrection = table.offsetLeft;\n                } else if (browser.mozilla || (browser.webkit && (browser.version > 85))) {\n                    firefoxCorrection = table.offsetLeft - kendo.support.scrollbar();\n                }\n            }\n\n            containerScroll = Math.abs(containerScroll + ieCorrection - firefoxCorrection);\n\n            if (containerScroll > elementOffset) {\n                result = elementOffset;\n            } else if (bottomDistance > (containerScroll + containerOffsetDir)) {\n                if (elementOffsetDir <= containerOffsetDir) {\n                    result = (bottomDistance - containerOffsetDir);\n                } else {\n                    result = elementOffset;\n                }\n            } else {\n                result = containerScroll;\n            }\n\n            result = Math.abs(result + ieCorrection) + firefoxCorrection;\n\n            container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"] = result;\n        },\n\n        _navigatable: function() {\n            var that = this;\n\n            if (!that.options.navigatable) {\n                return;\n            }\n\n            //data tables - locked and non-locked\n            var dataTables = that.table.add(that.lockedTable);\n            //header tables - locked and non-locked\n            var headerTables = that.thead.parent().add($(\">table\", that.lockedHeader));\n\n            //the over wich keys will be handled\n            var tables = dataTables;\n\n            if (that.options.scrollable) {\n                //add the header table when the widget is scrollable\n                tables = tables.add(headerTables);\n            }\n\n            this._navigatableTables = tables;\n            this._headertables = headerTables;\n\n            //dettach all previous events\n            tables.off(MOUSEDOWN + NS + \" focus\" + NS + \" focusout\" + NS + \" keydown\" + NS);\n\n            headerTables\n                .find(\"a.k-link\").attr(\"tabIndex\", -1);\n\n            //prevent propagation when clicked inside detail grid\n            dataTables\n                .on(\"keydown\" + NS, \".k-detail-cell\", function(e) {\n                    if (e.target !== e.currentTarget) {\n                        e.stopImmediatePropagation();\n                    }\n                });\n\n            tables\n                //handle click on tables, will attempt to focus the table\n                .on((kendo.support.touch ? \"touchstart\" + NS : MOUSEDOWN + NS), NAVROW + \">\" + NAVCELL, tableClick.bind(that))\n                .on(\"focus\" + NS, that._tableFocus.bind(that))\n                .on(\"focusout\" + NS, that._tableBlur.bind(that))\n                .on(\"keydown\" + NS, that, that._tableKeyDown.bind(that));\n\n            that._filterFocusable().on(\"focus\", that._filterFocus.bind(that));\n        },\n\n        _filterFocus: function(e) {\n            var header = e.target.closest(\"th\");\n\n            this._filterFocusable().attr(TABINDEX, 0);\n            this._setCurrent(header);\n            $(header).removeClass(FOCUSED);\n        },\n\n        _tableFocus: function() {\n            var current = this.current();\n            var table = this.lockedTable ? this.lockedTable : this.table;\n\n            //if there is already current, highlighted it\n            //otherwise highlight the first possible cell\n            if (current && current.is(\":visible\")) {\n                current.addClass(FOCUSED);\n            } else {\n                if (this._virtualColScroll) {\n                    this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first(), true, true);\n                } else {\n                    this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first());\n                }\n            }\n\n            this.table.attr(TABINDEX, 0);\n        },\n\n        _tableBlur: function() {\n            var current = this.current();\n\n            if (current) {\n                current.removeClass(FOCUSED);\n            }\n        },\n\n        _findCellIndex: function(columns, startIndex, reversed) {\n            var cellIndex;\n            var i;\n\n            if (reversed) {\n                for (i = startIndex; i >= 0; i--) {\n                    cellIndex = i;\n                    if (!columns[i].hidden) {\n                        break;\n                    }\n                }\n            } else {\n                for (i = startIndex; i < columns.length; i++) {\n                    cellIndex = i;\n                    if (!columns[i].hidden) {\n                        break;\n                    }\n                }\n            }\n\n            return cellIndex;\n        },\n\n        _scrollToColumn: function(key, e) {\n            if (this._virtualCellIndex === undefined$1) {\n                return false;\n            }\n\n            var that = this;\n            var cellIndex = that._virtualCellIndex;\n            var leafsCols = leafColumns(nonLockedColumns(that.columns));\n            var scrollWidth = 0;\n\n            if (key == (isRtl ? keys.LEFT : keys.RIGHT) && (cellIndex !== leafsCols.length - 1)) {\n                cellIndex = that._findCellIndex(leafsCols, cellIndex + 1);\n            } else if (key == (isRtl ? keys.RIGHT : keys.LEFT) && cellIndex) {\n                cellIndex = that._findCellIndex(leafsCols,cellIndex - 1, true);\n            } else if (key == keys.HOME) {\n                cellIndex = that._findCellIndex(leafsCols, 0);\n            } else if (key == keys.END) {\n                cellIndex = that._findCellIndex(leafsCols, leafsCols.length - 1, true);\n            }\n\n            for (var i = 0; i < cellIndex; i++) {\n                scrollWidth += leafsCols[i].width;\n            }\n\n            that._virtualCellIndex = cellIndex;\n            if (e) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n            kendo.scrollLeft(that.content, scrollWidth);\n            return true;\n        },\n\n        _tableKeyDown: function(e) {\n            var current = this.current();\n            var virtualScroll = this.virtualScroll || {};\n            var requestInProgress = this.virtualScrollable && this.virtualScrollable.fetching();\n            var target = $(e.target);\n            var canHandle = !e.isDefaultPrevented() && !target.is(\":button,a,:input:not(.k-select-checkbox),a>.k-icon,a>.k-svg-icon\");\n\n            if (e.altKey && e.keyCode == keys.DOWN) {\n                this.current().find(\".k-grid-filter-menu, .k-grid-column-menu\").click();\n                e.stopImmediatePropagation();\n                return;\n            }\n\n            // do not handle key down if request in progress\n            // or there isn't current set\n            if (requestInProgress) {\n                // swallow key events while in progress\n                e.preventDefault();\n                return;\n            }\n\n            if (virtualScroll.columns && (!current || !document.body.contains(current[0])) && (this._scrollToColumn(e.keyCode, e))) {\n                return;\n            }\n\n            if (!current) {\n                current = $(this.lockedTable).add(this.options.scrollable ? this.table : this.tbody).find(NAVROW).first().children(NAVCELL).first();\n            }\n\n            if (!current.length) {\n                return;\n            }\n\n            var handled = false;\n\n            if (!e.isDefaultPrevented() && e.keyCode === keys.F10) {\n                handled = this._focusToolbar();\n            }\n\n            if (canHandle && e.keyCode == keys.UP) {\n                handled = this._moveUp(current, e.shiftKey, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == keys.DOWN) {\n                handled = this._moveDown(current, e.shiftKey, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == (isRtl ? keys.LEFT : keys.RIGHT)) {\n                handled = this._moveRight(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n            }\n\n            if (canHandle && e.keyCode == (isRtl ? keys.RIGHT : keys.LEFT)) {\n                handled = this._moveLeft(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n            }\n\n            if (canHandle && e.keyCode == keys.PAGEDOWN) {\n                handled = this._handlePageDown();\n            }\n\n            if (canHandle && e.keyCode == keys.PAGEUP) {\n                handled = this._handlePageUp();\n            }\n\n            if (canHandle && e.keyCode == keys.HOME) {\n                handled = this._handleHome(current, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == keys.END) {\n                handled = this._handleEnd(current, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == keys.SPACEBAR) {\n                handled = this._handleSpaceKey(current, e.ctrlKey);\n            }\n\n            if (e.keyCode == keys.ENTER || e.keyCode == keys.F2) {\n                handled = this._handleEnterKey(current, e.currentTarget, target);\n            }\n\n            if (e.keyCode == keys.ESC) {\n                handled = this._handleEscKey(current, e.currentTarget);\n            }\n\n            if (e.keyCode == keys.TAB) {\n                handled = this._handleTabKey(current, e.currentTarget, e.shiftKey, target);\n            }\n\n            if (handled) {\n                //prevent scrolling while pressing the keys\n                e.preventDefault();\n                //required in hierarchy\n                e.stopPropagation();\n            }\n        },\n\n        _focusToolbar: function() {\n            var focusable = this.wrapper.find(\".k-grid-toolbar [tabindex=0]\");\n\n            if (focusable.length > 0) {\n                focusable.first().addClass(\".k-focus\").trigger(\"focus\");\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _moveLeft: function(current, altKey, shiftKey, ctrlKey, currentTable) {\n            var next, index;\n            var row = current.parent();\n            //thead or tbody\n            var container = row.parent();\n\n            if (altKey) {\n                if (row.hasClass(GROUPING_ROW)) {\n                    this.collapseGroup(row);\n                } else {\n                    this.collapseRow(row);\n                }\n            } else if (ctrlKey && current.is(DOT + HEADER_CLASS) && this.options.reorderable) {\n               this._moveColumn(current, true);\n            } else {\n                index = container.find(NAVROW).index(row);\n                next = this._prevHorizontalCell(container, current, index);\n\n                if (!next[0]) {\n                    if (shiftKey) {\n                        if (this.lockedTable) {\n                            next = this._relatedRow(row);\n                            if ($.contains(this.lockedTable[0], row[0])) {\n                                next = next.prevAll(ITEMROW).first();\n                            }\n                            next = next.children(DATA_CELL).last();\n                        } else {\n                            next = this._tabNext(current, currentTable, true);\n                        }\n                    } else {\n                        container = this._horizontalContainer(container);\n\n                        next = this._prevHorizontalCell(container, current, index);\n\n                        if (next[0] !== current[0]) {\n                            focusTable(this.table, true);\n                        }\n                    }\n                }\n\n                this._setCurrent(next);\n            }\n\n            return true;\n        },\n\n        _moveRight: function(current, altKey, shiftKey, ctrlKey, currentTable) {\n            var next, index;\n            var row = current.parent();\n            //thead or tbody\n            var container = row.parent();\n\n            if (altKey) {\n                if (row.hasClass(GROUPING_ROW)) {\n                    this.expandGroup(row);\n                } else {\n                    this.expandRow(row);\n                }\n             } else if (ctrlKey && current.is(DOT + HEADER_CLASS) && this.options.reorderable) {\n                this._moveColumn(current, false);\n            } else {\n                index = container.find(NAVROW).index(row);\n                next = this._nextHorizontalCell(container, current, index);\n\n                if (!next[0]) {\n                    if (shiftKey) {\n                       if (this.lockedTable) {\n                            next = this._relatedRow(row);\n                            if ($.contains(this.table[0], row[0])) {\n                                next = next.nextAll(ITEMROW).first();\n                            }\n                            next = next.children(DATA_CELL).first();\n                        } else {\n                            next = this._tabNext(current, currentTable, false);\n                        }\n                    } else {\n                        container = this._horizontalContainer(container, true);\n\n                        next = this._nextHorizontalCell(container, current, index);\n\n                        if (next[0] !== current[0]) {\n                            focusTable(this.table, true);\n                        }\n                    }\n                }\n\n                this._setCurrent(next);\n            }\n\n            return true;\n        },\n\n        _moveUp: function(current, shiftKey, ctrlKey) {\n            //thead or tbody\n            var container = current.parent().parent();\n            var next, cellIndex, index, oldIndex;\n\n            if (shiftKey) {\n               next = current.parent();\n               next = next.prevAll(ITEMROW).first();\n               next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).last();\n            } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                cellIndex = current.index();\n                next = current.parent();\n                next = next.prevAll(ITEMROW).first();\n                index = this.tbody.children(ITEMROW).index(next);\n                oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                if (index >= 0 && !this.trigger(ROWREORDER, { oldIndex: oldIndex, newIndex: index, row: current.parent() })) {\n                    this.reorderRows(current.parent(), index);\n                    next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                }\n            } else {\n               next = this._prevVerticalCell(container, current);\n               if (!next[0]) {\n                  this._lastCellIndex = 0;\n                  container = this._verticalContainer(container, true);\n\n                  next = this._prevVerticalCell(container, current);\n\n                  if (next[0]) {\n                      focusTable(this.table, true);\n                  }\n               }\n            }\n\n            var tmp = this._lastCellIndex || 0;\n            this._setCurrent(next);\n            this._lastCellIndex = tmp;\n\n            return true;\n        },\n\n        _moveDown: function(current, shiftKey, ctrlKey) {\n            //thead or tbody\n            var container = current.parent().parent();\n            var next, cellIndex, index, oldIndex;\n\n            if (shiftKey) {\n                next = current.parent();\n                next = next.nextAll(ITEMROW).first();\n                next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).first();\n            } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                cellIndex = current.index();\n                next = current.parent();\n                next = next.nextAll(ITEMROW).first();\n                index = this.tbody.children(ITEMROW).index(next);\n                oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                if (index >= 0 && !this.trigger(ROWREORDER, { oldIndex: oldIndex, newIndex: index, row: current.parent() })) {\n                    this.reorderRows(current.parent(), index + 1);\n                    next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                }\n            } else {\n                next = this._nextVerticalCell(container, current);\n                if (!next[0]) {\n                    this._lastCellIndex = 0;\n                    container = this._verticalContainer(container);\n\n                    next = this._nextVerticalCell(container, current);\n                    if (next[0]) {\n                        focusTable(this.table, true);\n                    }\n                }\n            }\n            var tmp = this._lastCellIndex || 0;\n            this._setCurrent(this._findVisibleCell(next));\n            this._lastCellIndex = tmp;\n            return true;\n        },\n\n        _moveColumn: function(current, isLeft) {\n            var elements = this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter + \":visible\");\n\n            var columns = visibleColumns(flatColumnsInDomOrder(this.columns));\n            var oldIndex = elements.index($(current));\n            var offset = isLeft ? - 1 : 1;\n            var column = columns[oldIndex];\n            var newIndex = targetParentContainerIndex(columns, this.columns, oldIndex, oldIndex + offset);\n            if (newIndex >= 0) {\n                this.reorderColumn(newIndex, column, isLeft);\n                this.trigger(COLUMNREORDER, {\n                    newIndex: newIndex,\n                    oldIndex: oldIndex,\n                    column: column\n                });\n            }\n        },\n\n        _handleHome: function(current, ctrl) {\n            var row = current.parent();\n            var rowContainer = row.parent();\n            var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n            var isInBody = rowContainer[0] === this.tbody[0];\n            var prev;\n\n            if (this._hasVirtualColumns()) {\n                this._scrollToColumn(keys.HOME);\n                return true;\n            }\n\n            if (ctrl) {\n                if (this.lockedTable) {\n                    prev = this.lockedTable.find(ITEMROW).first().children(NAVCELL).first();\n                } else {\n                    prev = this.table.find(ITEMROW).first().children(NAVCELL).first();\n                }\n            } else if (isInBody || isInLockedTable) {\n                if (isInBody && this.lockedTable) {\n                    row = this._relatedRow(row);\n                }\n                prev = row.children(DATA_CELL).first();\n            }\n\n            if (prev && prev.length) {\n                this._setCurrent(prev);\n                return true;\n            }\n        },\n\n        _handleEnd: function(current, ctrl) {\n            var row = current.parent();\n            var rowContainer = row.parent();\n            var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n            var isInBody = rowContainer[0] === this.tbody[0];\n            var next;\n\n            if (this._hasVirtualColumns()) {\n                this._scrollToColumn(keys.END);\n                return true;\n            }\n\n            if (ctrl) {\n                next = this.table.find(ITEMROW).last().children(NAVCELL).last();\n            } else if (isInBody || isInLockedTable) {\n                if (!isInBody && this.lockedTable) {\n                    row = this._relatedRow(row);\n                }\n                next = row.children(DATA_CELL).last();\n            }\n\n            if (next && next.length) {\n                this._setCurrent(next);\n                return true;\n            }\n        },\n\n        _handlePageDown: function() {\n            if (!this.options.pageable) {\n                return false;\n            }\n\n            this.dataSource.page(this.dataSource.page() + 1);\n\n            return true;\n        },\n\n        _handlePageUp: function() {\n            if (!this.options.pageable) {\n                return false;\n            }\n\n            this.dataSource.page(this.dataSource.page() - 1);\n\n            return true;\n        },\n\n        _handleTabKey: function(current, currentTable, shiftKey, target) {\n            var isInCell = this.options.editable && this._editMode() == \"incell\";\n            var cell, filterFocusable;\n\n            if (!isInCell ||\n                current.is(\"th\") ||\n                (this.options.scrollable ? this._headertables.filter(currentTable).length : this.thead.filter(target).length)) {\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        filterFocusable = this._filterFocusable();\n\n                        if (!shiftKey && filterFocusable[filterFocusable.length - 1] === document.activeElement) {\n                            filterFocusable.first().trigger(\"focus\");\n\n                            return true;\n                        } else if (shiftKey && filterFocusable[0] === document.activeElement) {\n                            filterFocusable.last().trigger(\"focus\");\n\n                            return true;\n                        }\n                    }\n\n                    return false;\n            }\n\n            cell = $(activeElement()).closest(\".k-edit-cell\");\n\n            if (cell[0] && cell[0] !== current[0]) {\n                current = cell;\n            }\n\n            cell = this._tabNext(current, currentTable, shiftKey);\n\n            if (cell[0] === current[0]) {\n                return false;\n            }\n\n            if (cell.length) {\n                this._handleEditing(current, cell, cell.closest(\"table\"));\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _handleEscKey: function(current) {\n            var active = activeElement();\n            var isInCell = this._editMode() == \"incell\";\n\n            if (!isInEdit(current)) {\n                if (current.has(active).length) {\n                    // return focus back to the table\n                    focusTable(this.table, true);\n\n                    return true;\n                }\n\n                if (current.parent().hasClass(\"k-filter-row\")) {\n                    this._filterFocusable().attr(TABINDEX, -1);\n                    focusTable(this.table, true);\n\n                    return true;\n                }\n\n                return false;\n            }\n\n            if (isInCell) {\n                this.closeCell(true);\n            } else {\n                var currentIndex = $(current).parent().index();\n                if (active) {\n                    active.blur();\n                }\n                this.cancelRow(true);\n                if (currentIndex >= 0) {\n                    this._setCurrent(this.items().eq(currentIndex).children(NAVCELL).first());\n                }\n            }\n\n            focusTable(this.table, true);\n\n            return true;\n        },\n\n        _toggleCurrent: function(current, editable, hasDetails) {\n            var row = current.parent();\n\n            if (current.is(\".k-command-cell\")) {\n                return false;\n            }\n\n            if (row.is(\".k-filter-row\")) {\n                return false;\n            }\n\n            if (row.is(DOT + GROUPING_ROW)) {\n                row.find(\".k-icon,.k-svg-icon\").first().click();\n\n                return true;\n            }\n\n            if (!editable && hasDetails) {\n                row.find(\".k-icon,.k-svg-icon\").first().click();\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _handleSpaceKey: function(current, ctrlKey) {\n            var that = this;\n\n            if (!ctrlKey || !that.groupable || !current.hasClass(HEADER_CLASS)) {\n                return;\n            }\n\n            var descriptors = that.groupable.descriptors();\n            var field = current.attr(kendo.attr(\"field\"));\n            var aggregates = that.groupable.aggregates();\n\n            if (that.groupable._canDrag(current)) {\n                descriptors.push({\n                    field: field,\n                    dir: \"asc\",\n                    aggregates: aggregates || []\n                });\n            } else {\n                descriptors = $.grep(descriptors, function(item)\n                {\n                    return item.field !== field;\n                });\n            }\n\n            that.dataSource.group(descriptors);\n\n            return true;\n        },\n\n        _handleEnterKey: function(current, currentTable, target) {\n            var editable = this.options.editable && this.options.editable.update !== false;\n            var container = target.closest(\"td\");\n            var hasDetails = this._hasDetails();\n            var link, filterFocusable;\n\n            if (!target.is(\"table\") && !$.contains(current[0], target[0])) {\n                current = container;\n            }\n\n            if (current.is(\"th\")) {\n                // sort the column, if possible\n                link = current.find(\".k-link\");\n\n                if (current.has($(activeElement())).length > 0) {\n                    return false;\n                } else if (link.length) {\n                    link.click();\n                } else if (current.parent().hasClass(\"k-filter-row\")) {\n                    filterFocusable = this._filterFocusable();\n                    filterFocusable.attr(TABINDEX, 0);\n                    current.find(\":kendoFocusable\").first().focus();\n                } else {\n                    current.find(CHECKBOXINPUT).trigger(\"focus\");\n                }\n\n                return true;\n            }\n            if (this._toggleCurrent(current, editable, hasDetails)) {\n                return true;\n            }\n\n            var focusable = current.find(\":kendoFocusable\").first();\n            if (focusable[0] && !current.hasClass(\"k-edit-cell\") && current.hasClass(\"k-focus\")) {\n                focusable.trigger(\"focus\");\n\n                return true;\n            }\n\n            if (editable && !target.is(\":button,.k-button,textarea\")) {\n                if (!container[0]) {\n                    container = current;\n                }\n\n                this._handleEditing(container, false, currentTable);\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _nextHorizontalCell: function(table, current, originalIndex) {\n            var cells = current.nextAll(DATA_CELL);\n\n            if (!cells.length) {\n                var rows = table.find(NAVROW);\n                var rowIndex = rows.index(current.parent());\n\n                //no sibling cells are found and we've changed the table\n                if (rowIndex == -1) {\n                    if (current.hasClass(HEADER_CLASS)) {\n                        var headerRows = [];\n                        mapColumnToCellRows([lockedColumns(this.columns)[0]], childColumnsCells(rows.eq(0).children(\":visible\").first()), headerRows, 0, 0);\n\n                        if (headerRows[originalIndex]) {\n                            return headerRows[originalIndex][0];\n                        }\n\n                        return current;\n                    }\n\n                    //current is in filter row\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        return rows.last().children(DATA_CELL).first();\n                    }\n\n                    //get the same row index in the new table\n                    return this._findVisibleCell(rows.eq(originalIndex).children(DATA_CELL_HIDDENINCLUDED).first());\n                }\n            }\n\n            return this._findVisibleCell(current.nextAll(DATA_CELL + \",[hidden]\").eq(0));\n        },\n\n        _prevHorizontalCell: function(table, current, originalIndex) {\n            var cells = current.prevAll(DATA_CELL);\n\n            if (!cells.length) {\n                var rows = table.find(NAVROW);\n                var rowIndex = rows.index(current.parent());\n\n                //no sibling cells are found and we've changed the table\n                if (rowIndex == -1) {\n                    if (current.hasClass(HEADER_CLASS)) {\n                        var headerRows = [];\n                        var columns = lockedColumns(this.columns);\n                        mapColumnToCellRows([columns[columns.length - 1]], childColumnsCells(rows.eq(0).children().last()), headerRows, 0, 0);\n\n                        if (headerRows[originalIndex]) {\n                            return headerRows[originalIndex][0];\n                        }\n\n                        return current;\n                    }\n\n                    //current is in filter row\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        return rows.last().children(DATA_CELL).last();\n                    }\n\n                    //get the same row index in the new table\n                    return rows.eq(originalIndex).children(DATA_CELL).last();\n                }\n            }\n\n            cells = current.prevAll(DATA_CELL + \",[hidden]\");\n            let cellToFocus = this._findVisibleCell(cells.first());\n            if (cellToFocus.is(\".k-group-cell\")) {\n                return cellToFocus.next(DATA_CELL);\n            }\n\n            return cellToFocus;\n        },\n\n        _currentDataIndex: function(table, current) {\n            var index = current.attr(\"data-index\");\n\n            if (!index) {\n                return undefined$1;\n            }\n\n            var lockedColumnsCount = lockedColumns(this.columns).length;\n            if (lockedColumnsCount && !table.closest(DIV).hasClass(\"k-grid-content-locked\")[0]) {\n                return index - lockedColumnsCount;\n            }\n\n            return index;\n        },\n\n        _findVisibleCell: function($cell) {\n            var col = $cell.index();\n            var row = $cell.closest('tr').index();\n            var $newFocus;\n\n            if ($cell.is('[hidden]')) {\n                $newFocus = $cell.prevAll(':not([hidden])').first();\n                var hiddenCount = $cell.prevUntil(':not([hidden])', '[hidden]').length;\n                if (!$newFocus.attr('colspan') || ($newFocus.attr('colspan') > 1 && $newFocus.attr('colspan') <= hiddenCount + 1)) {\n                    $newFocus = $cell.prevAll('[hidden]').last();\n                    if ($newFocus.length === 0) {\n                        return $cell.closest('tr').prevAll().find(`td:nth-of-type(${col + 1}):visible`).last();\n                    }\n\n                    while (!$newFocus.attr('rowspan') && !($newFocus.attr('rowspan') > 1 && $newFocus.attr('rowspan') != row - $newFocus.closest('tr').index()) && Math.abs($newFocus.index() - col) != $newFocus.attr('colspan')) {\n                        $newFocus = $newFocus.closest('tr').prevAll().find('td, th').eq(col).first();\n                        if ($newFocus.length === 0) {\n                            $newFocus = $cell;\n                            break;\n                        }\n                    }\n                }\n            } else {\n                $newFocus = $cell;\n            }\n\n            return $newFocus;\n        },\n\n        _prevVerticalCell: function(container, current) {\n            var cells;\n            var row = current.parent();\n            var rows = container.children(NAVROW);\n            var rowIndex = rows.index(row);\n            //get data-index in case of last level of multi-level columns\n            var index = this._currentDataIndex(container, current);\n\n            //current is in the header, but not at the last level of multi-level columns\n            if (index || current.hasClass(HEADER_CLASS)) {\n                cells = parentColumnsCells(current);\n                return cells.eq(cells.length - 2);\n            }\n\n            //check this out\n            index = Math.max(row.children(DATA_CELL_HIDDENINCLUDED).index(current), this._lastCellIndex || 0);\n\n            //if current is inside filter row\n            if (row.hasClass(\"k-filter-row\")) {\n                let offset = rows.last().children(\".k-group-cell\").length;\n\n                return leafDataCells(container).filter(isCellVisible).eq(Math.max(0, index - offset));\n            }\n\n            //move up to header container\n            if (rowIndex == -1) {\n                if (this._hasVirtualColumns()) {\n                    index = this._virtualCellIndex;\n                }\n                //is there filter row in the header container\n                row = container.find(\"tr.k-filter-row:visible\");\n                if (!row[0]) {\n                    // in hierarchical grid we need to correct the index\n                    // since the k-hierarchy cell is navigatable\n                    if ((this._hasDetails() || current.parent().find('.k-hierarchy-cell').length) && index) {\n                        index--;\n                    }\n\n                    let offset = 0;\n                    if (current.parent().is(\".k-table-group-row\")) {\n                        offset = rows.last().children(\".k-group-cell\").length;\n                    }\n\n                    return leafDataCells(container).eq(Math.max(0, index - offset));\n                } else {\n                    if (this._hasDetails()) {\n                        index--;\n                    }\n                }\n            } else {\n                row = rowIndex === 0 ? $() : rows.eq(rowIndex - 1);\n            }\n\n            cells = row.children(DATA_CELL_HIDDENINCLUDED);\n            if (cells.length > index) {\n                let nextCell = cells.eq(index);\n                if (nextCell.is(\".k-group-cell\")) {\n                    nextCell = nextCell.nextAll(DATA_CELL_HIDDENINCLUDED + \":not(.k-group-cell)\").first();\n                }\n\n                return this._findVisibleCell(nextCell);\n            }\n\n            return cells.eq(0);\n        },\n\n        _nextVerticalCell: function(container, current) {\n            var cells;\n            var originalRow;\n            var row = originalRow = current.parent();\n            var rows = container.children(NAVROW);\n            var rowIndex = rows.index(row);\n            //get data-index in case of last level of multi-level columns\n            var index = this._currentDataIndex(container, current);\n            var virtualScroll = this.virtualScroll || {};\n            var colspan;\n            //current is in the header, but not at the last level of multi-level columns\n            //and we are not changing the table\n            if (rowIndex != -1 && index === undefined$1 && current.hasClass(HEADER_CLASS)) {\n                return childColumnsCells(current).eq(1);\n            }\n\n            index = index ? parseInt(index, 10) : row.children(DATA_CELL_HIDDENINCLUDED).index(current);\n            index = Math.max(index, this._lastCellIndex || 0);\n\n            //move down to data container\n            if (rowIndex == -1) {\n                row = rows.eq(0);\n                if (virtualScroll.columns) {\n                    colspan = parseInt(row.children().first().attr(\"colspan\"), 10);\n                    index = this._virtualCellIndex - (colspan > 1 ? colspan : 0);\n                }\n                // in hierarchical grid we need to correct the index\n                // since the k-hierarchy cell is navigatable\n                if (this._hasDetails() || row.find('.k-hierarchy-cell').length) {\n                    index++;\n                }\n\n                if (row.hasClass(\"k-table-group-row\")) {\n                    index += originalRow.children(\".k-group-cell\").length;\n                }\n            } else {\n                row = rows.eq(rowIndex + current[0].rowSpan);\n            }\n\n            cells = row.children(\".k-group-cell,\" + DATA_CELL_HIDDENINCLUDED);\n\n            let cellToFocus = cells.eq(0);\n            if (cells.length > index) {\n                cellToFocus = cells.eq(index);\n            }\n\n            if (cellToFocus.is(\".k-group-cell\")) {\n                cellToFocus = cellToFocus.next(\":not(k-group-cell):not([hidden])\");\n            }\n\n            return cellToFocus;\n        },\n\n        _verticalContainer: function(container, up) {\n            var table = container.parent();\n            var length = this._navigatableTables.length;\n            var step = Math.floor(length / 2);\n            var index = inArray(table[0], this._navigatableTables);\n\n            if (up) {\n                step *= -1;\n            }\n            index += step;\n\n            if (index >= 0 || index < length) {\n                table = this._navigatableTables.eq(index);\n            }\n\n            return table.find(up ? \">thead\" : \">tbody\");\n        },\n\n        _filterFocusable: function() {\n            return this.wrapper.find(\".k-filter-row\").find(\".k-dropdownlist, .k-input .k-input-inner:visible, input[type='radio']:visible, input[type='checkbox']:visible\");\n        },\n\n        _horizontalContainer: function(container, right) {\n            var length = this._navigatableTables.length;\n            if (length <= 2) {\n                return container;\n            }\n\n            var table = container.parent();\n            var index = inArray(table[0], this._navigatableTables);\n\n            index += right ? 1 : -1;\n\n            if (right && (index == 2 || index == length)) {\n                return container;\n            }\n\n            if (!right && (index == 1 || index < 0)) {\n                return container;\n            }\n\n            return this._navigatableTables.eq(index).find(\"thead, tbody\");\n        },\n\n        _tabNext: function(current, currentTable, back) {\n            var switchRow = true;\n            var next = back ? current.prevAll(DATA_CELL).first() : current.nextAll(\":visible\").first();\n\n            if (!next.length) {\n                next = current.parent();\n                if (this.lockedTable) {\n                    switchRow = (back && currentTable == this.lockedTable[0]) || (!back && currentTable == this.table[0]);\n                    next = this._relatedRow(next);\n                }\n\n                if (switchRow) {\n                    if (this._hasVirtualColumns()) {\n                        return current;\n                    }\n                    next = next[back ? \"prevAll\" : \"nextAll\"](\"tr:not(.k-grouping-row):not(.k-detail-row):visible\").first();\n                }\n                if (back) {\n                    next = next.children(DATA_CELL).last();\n                } else {\n                    next = next.children(DATA_CELL).first();\n                }\n            }\n\n            return next;\n        },\n\n        _handleEditing: function(current, next, table) {\n            var that = this,\n                active = $(activeElement()),\n                mode = that._editMode(),\n                isIE = browser.msie,\n                editContainer = that._editContainer,\n                focusable,\n                editable = that.options.editable && that.options.editable.update !== false,\n                isEdited;\n\n            table = $(table);\n            if (mode == \"incell\") {\n                isEdited = current.hasClass(\"k-edit-cell\");\n            } else {\n                isEdited = current.parent().hasClass(\"k-grid-edit-row\");\n            }\n\n            if (that.editable) {\n                if ($.contains(editContainer[0], active[0])) {\n                    active.trigger(\"blur\");\n                    if (isIE) {\n                        //IE10 with jQuery 1.9.x does not trigger blur handler\n                        //numeric textbox does trigger change\n                        active.trigger(\"blur\");\n                    }\n                }\n\n                if (!that.editable) {\n                    focusTable(that.table);\n                    return;\n                }\n\n                if (that.editable.end()) {\n                    if (mode == \"incell\") {\n                        that.closeCell();\n                    } else {\n                        that.saveRow();\n                        isEdited = true;\n                    }\n                } else {\n                    if (mode == \"incell\") {\n                        that._setCurrent(editContainer);\n                    } else {\n                        that._setCurrent(editContainer.children().filter(DATA_CELL).first());\n                    }\n                    focusable = editContainer.find(\":kendoFocusable\").first()[0];\n                    if (focusable) {\n                        focusable.focus();\n                    }\n                    return;\n                }\n            }\n\n            if (next) {\n                that._setCurrent(next);\n            }\n\n            focusTable(that.table, true);\n\n            if (!editable) {\n                return;\n            }\n\n            if ((!isEdited && !next) || next) {\n                if (mode === INCELL) {\n                    if (!$(that.current()).hasClass(HIERARCHY_CELL_CLASS)) {\n                        that.editCell(that.current());\n                    }\n                } else {\n                    that.editRow(that.current().parent());\n                }\n            }\n        },\n\n        _wrapper: function() {\n            var that = this,\n                table = that.table,\n                height = that.options.height,\n                width = that.options.width,\n                wrapper = that.element;\n\n            if (!wrapper.is(DIV)) {\n               wrapper = wrapper.wrap(\"<div/>\").parent();\n            }\n\n            that.wrapper = wrapper.addClass(\"k-grid \" + kendo.getValidCssClass(\"k-grid-\", \"size\", that.options.size));\n\n            if (height) {\n                that.wrapper.css(HEIGHT, height);\n                table.css(HEIGHT, AUTO);\n            }\n\n            if (width) {\n                that.wrapper.css(WIDTH, width);\n            }\n\n            that._initMobile();\n        },\n\n        _initContextMenu: function() {\n            var that = this,\n                options = that.options,\n                groupsContextMenu = isPlainObject(options.contextMenu) && isArray(options.contextMenu.groups) ? { items: options.contextMenu.groups } : { items: defaultGroupsContextMenu },\n                tbodyContextMenu = isPlainObject(options.contextMenu) && isArray(options.contextMenu.body) ? { items: options.contextMenu.body } : { items: defaultBodyContextMenu },\n                theadContextMenu = isPlainObject(options.contextMenu) && isArray(options.contextMenu.head) ? { items: options.contextMenu.head } : { items: defaultHeadContextMenu };\n\n            var mainOptions = isPlainObject(options.contextMenu) ? options.contextMenu : {};\n\n            tbodyContextMenu = extend({}, {\n                messages: options.messages,\n                target: that.tbody,\n                filter: \".k-table-td\",\n                action: that._action.bind(that),\n                states: that._buildStates()\n            }, mainOptions, tbodyContextMenu);\n\n            theadContextMenu = extend({}, {\n                messages: options.messages,\n                target: that.thead,\n                filter: \".k-table-th\",\n                action: that._action.bind(that),\n                states: that._buildStates()\n            }, mainOptions, theadContextMenu);\n\n            if (that.groupable) {\n                groupsContextMenu = extend({}, {\n                    showOn: \"click\",\n                    target: that.groupable.groupContainer,\n                    filter: \".k-groupable-context-menu\",\n                    messages: options.messages,\n                    action: that._action.bind(that),\n                    states: that._buildStates()\n                }, mainOptions, groupsContextMenu);\n            }\n\n\n            that.tbodyContextMenu = new ui.grid.ContextMenu(\"<ul></ul>\", tbodyContextMenu);\n            that.theadContextMenu = new ui.grid.ContextMenu(\"<ul></ul>\", theadContextMenu);\n            that.groupsContextMenu = !!that.groupable && new ui.grid.ContextMenu(\"<ul></ul>\", groupsContextMenu);\n        },\n\n        _buildStates: function() {\n            var that = this;\n\n            return {\n                isEditable: that.options.editable,\n                isSelectable: that.options.selectable,\n                isSortable: that.options.sortable,\n                isRowReorderable: isPlainObject(that.options.reorderable) ? that.options.reorderable.rows : that.options.reorderable,\n                isGroupable: that.options.groupable,\n                allowPaste: that.options.allowPaste,\n                alwaysDisabled: false,\n                hasSelection: () => (this.select() ? this.select().length > 0 : false),\n                isSorted: () => !(this.dataSource.sort() ? this.dataSource.sort().length > 0 : false),\n                canMoveGroupPrev: (target) =>{\n                    var group = $(target).closest(\".k-chip\");\n\n                    return group.index() > 0;\n                },\n                canMoveGroupNext: (target) =>{\n                    var length = $(target).closest(\".k-chip-list\").children().length - 1;\n                    var group = $(target).closest(\".k-chip\");\n\n                    return group.index() < length;\n                }\n            };\n        },\n\n        _action: function(args) {\n            var commandName = args.command,\n                commandOptions = extend({ grid: this }, args.options),\n                command = new ui.grid.commands[commandName](commandOptions);\n\n            return command.exec();\n        },\n\n        _initMobile: function() {\n            var options = this.options;\n            var that = this;\n\n            this._isMobile = (options.mobile === true && kendo.support.mobileOS) ||\n                                options.mobile === \"phone\" ||\n                                options.mobile === \"tablet\";\n\n            if (this._isMobile) {\n                var html = this.wrapper.addClass(\"k-grid-mobile\").wrap(\n                    '<div data-' + kendo.ns + 'stretch=\"true\" data-' + kendo.ns + 'role=\"view\" ' +\n                    'data-' + kendo.ns + 'init-widgets=\"false\"></div>'\n                )\n                .parent();\n\n                this.pane = this._createPane(html);\n                this.view = this.pane.view();\n\n                if (options.height) {\n                    this.pane.element.parent().css(HEIGHT, options.height);\n                } else {\n                    this.pane.element.parent().css(HEIGHT, this.wrapper[0].style.height);\n                }\n\n                this._editAnimation = \"slide\";\n\n                // Grid transitions should not propagate to the view\n                that.wrapper.on(\"transitionend\" + NS, function(e) {\n                    e.stopPropagation();\n                });\n\n                that.wrapper.on(\"contextmenu\" + NS, \"th a\", function(e) {\n                    e.preventDefault();\n                    return false;\n                });\n\n                this.view.bind(\"showStart\", function() {\n                    if (that._isLocked()) {\n                        that._updateTablesWidth();\n                        that._applyLockedContainersWidth();\n                        that._syncLockedContentHeight();\n                        that._syncLockedHeaderHeight();\n                        that._syncLockedFooterHeight();\n                    }\n                });\n            }\n        },\n\n        _createPane: function(html) {\n            var pane = kendo.Pane.wrap(html, {\n                viewEngine: {\n                    viewOptions: {\n                        renderOnInit: true,\n                        wrap: false,\n                        wrapInSections: true,\n                        detachOnHide: false,\n                        detachOnDestroy: false\n                    }\n                }\n            });\n\n            return pane;\n        },\n\n        _tbody: function() {\n            var that = this,\n                table = that.table,\n                tbody;\n\n            tbody = table.find(\">tbody\");\n\n            if (!tbody.length) {\n                tbody = $(\"<tbody/>\").appendTo(table);\n            }\n\n            tbody.addClass('k-table-tbody');\n            that.tbody = tbody;\n        },\n\n        _scrollable: function() {\n            var that = this,\n                header,\n                table,\n                options = that.options,\n                scrollable = options.scrollable,\n                hasVirtualScroll = scrollable !== true && scrollable.virtual,\n                virtualScroll = hasVirtualScroll ? parseVirtualSettings(scrollable.virtual) : null,\n                scrollbar = !kendo.support.kineticScrollNeeded || (virtualScroll && virtualScroll.rows) ? kendo.support.scrollbar() : 0,\n                headerWrap;\n\n            if (scrollable) {\n                header = that.wrapper.children(\".k-grid-header\");\n\n                if (!header[0]) {\n                    header = $('<div class=\"k-grid-header\" />').insertBefore(that.table);\n                }\n\n                // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n                header.css((isRtl ? \"padding-left\" : \"padding-right\"), scrollable.virtual ? scrollbar + 1 : scrollbar);\n                table = $('<table role=\"none\" class=\"k-grid-header-table k-table\"/>');\n                table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", options.size));\n\n                table.width(that.table[0].style.width);\n\n                table.append(that.thead);\n                header.empty().append($('<div class=\"k-grid-header-wrap k-auto-scrollable\" />').append(table));\n\n\n                that.content = that.table.parent();\n                that.virtualScroll = virtualScroll;\n\n                if (that.content.is(\".k-virtual-scrollable-wrap, \" + DOT + classNames.scrollContainer)) {\n                    that.content = that.content.parent();\n                }\n\n                if (!that.content.is(\".k-grid-content, .k-virtual-scrollable-wrap\")) {\n                    that.content = that.table.wrap('<div class=\"k-grid-content k-auto-scrollable\" />').parent();\n                }\n\n                if (!that.content.parent().hasClass(\"k-grid-container\")) {\n                    that.content.wrap(\"<div class='k-grid-container' />\").parent();\n                }\n\n                if (virtualScroll && virtualScroll.rows && !that.virtualScrollable) {\n                    that._createVirtualScrollable();\n                }\n\n                if (virtualScroll && virtualScroll.columns) {\n\n                    that.table.css({\n                        width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n                    });\n                }\n\n                headerWrap = header.children(\".k-grid-header-wrap\");\n\n                that.scrollables = headerWrap.add(that.content);\n\n                // the footer may exists if rendered from the server\n                var footer = that.wrapper.find(\".k-grid-footer\");\n\n                if (footer.length) {\n                    that.scrollables = that.scrollables.add(footer.children(\".k-grid-footer-wrap\"));\n                }\n\n                headerWrap.off(\"scroll\" + NS).on(\"scroll\" + NS, function(e) {\n                    if (that._scrollLeft !== this.scrollLeft) {\n                        kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                    }\n                });\n\n                if (virtualScroll && virtualScroll.rows) {\n                    that.content.find(\">.k-virtual-scrollable-wrap\").off(\"scroll\" + NS).on(\"scroll\" + NS, function() {\n                        var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                        that._scrollLeft = this.scrollLeft;\n                        kendo.scrollLeft(that.scrollables, this.scrollLeft);\n                        if (that.lockedContent) {\n                            that.lockedContent[0].scrollTop = this.scrollTop;\n                        }\n                        if (virtualScroll.columns && isScrollingLeft) {\n                            that.refresh();\n                        }\n                    });\n                } else {\n                    var endless = scrollable.endless;\n                    var originalPageSize = that.dataSource.options.pageSize;\n                    if (endless) {\n                        that._endlessPageSize = originalPageSize;\n                    }\n                    that.content.off(\"scroll\" + NS).on(\"scroll\" + NS, function(e) {\n                        var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                        that._scrollLeft = this.scrollLeft;\n                        kendo.scrollLeft(that.scrollables.not(e.currentTarget), that._scrollLeft);\n                        if (that.lockedContent && e.currentTarget == that.content[0]) {\n                            that.lockedContent[0].scrollTop = this.scrollTop;\n                        }\n                        if (endless) {\n                            if ((this.scrollTop + this.clientHeight - this.scrollHeight >= -10) &&\n                                !that._endlessFetchInProgress &&\n                                that._endlessPageSize < that.dataSource.total()) {\n                                that._skipRerenderItemsCount = that._endlessPageSize;\n                                that._endlessPageSize = that._endlessPageSize + originalPageSize;\n                                that.dataSource.options.endless = true;\n                                that._endlessFetchInProgress = true;\n                                that.dataSource.pageSize(that._endlessPageSize);\n                            }\n                        }\n\n                        if (virtualScroll && virtualScroll.columns && isScrollingLeft) {\n                              that._virtualColScroll = true;\n                              that._cacheEditableState();\n                              that.refresh();\n                              that._restoreEditableState();\n                              that._virtualColScroll = false;\n                        }\n\n                        if (that.rowResizer) {\n                            that.rowResizer.css(\"left\", e.currentTarget.scrollLeft + \"px\");\n                        }\n                    });\n\n                    var touchScroller = that.content.data(\"kendoTouchScroller\");\n                    if (touchScroller) {\n                        touchScroller.destroy();\n                    }\n\n                    touchScroller = kendo.touchScroller(that.content);\n                    if (touchScroller && touchScroller.movable) {\n                        that.touchScroller = touchScroller;\n                        touchScroller.movable.bind(\"change\", function(e) {\n                            kendo.scrollLeft(that.scrollables, -e.sender.x);\n                            if (that.lockedContent) {\n                                that.lockedContent.scrollTop(-e.sender.y);\n                            }\n                        });\n\n                        that.one(DATABOUND, function(e) {\n                            e.sender.wrapper.addClass(\"k-grid-backface\");\n                        });\n                    }\n                }\n            }\n        },\n\n        _createVirtualScrollable: function() {\n            var that = this;\n\n            if (that.virtualScrollable) {\n                that.virtualScrollable.destroy();\n            }\n\n            that.virtualScrollable = new VirtualScrollable(that.content, {\n                dataSource: that.dataSource,\n                itemHeight: function() { return that._averageRowHeight(); },\n                page: function() {\n                    that._restoreEditableState();\n                },\n                scroll: function() {\n                    that._focusEditable();\n                },\n                loadStart: function() {\n                    that._progress(true);\n                },\n                loadEnd: function() {\n                    that._progress(false);\n                }\n            });\n\n            that.virtualScrollable.bind(PAGING, that._onVirtualPaging.bind(that));\n        },\n\n        _onVirtualPaging: function() {\n            var that = this;\n\n            that._cacheEditableState();\n\n            if (that._isVirtualIncellEditable()) {\n                that._shouldClearEditableState = false;\n                that.closeCell();\n                that._shouldClearEditableState = true;\n            }\n        },\n\n        _isVirtualEditable: function() {\n            return this._isVirtualIncellEditable() || this._isVirtualInlineEditable() || this._isVirtualPopupEditable();\n        },\n\n        _isVirtualInlineEditable: function() {\n            return (this.virtualScrollable) && this._editMode() === INLINE;\n        },\n\n        _isVirtualIncellEditable: function() {\n            return (this.virtualScrollable) && this._editMode() === INCELL;\n        },\n\n        _isVirtualPopupEditable: function() {\n            return this.virtualScrollable && this._editMode() === \"popup\";\n        },\n\n        _hasVirtualColumns: function() {\n            return (this.virtualScroll || {}).columns ? true : false;\n        },\n\n        _scrollVirtualWrapper: function() {\n            var that = this;\n            var scrollable = that.virtualScrollable;\n\n            if (that._isVirtualInlineEditable() || that._isVirtualIncellEditable()) {\n                if (scrollable._isScrolledToBottom()) {\n                    scrollable._scrollWrapperToBottom();\n                } else if (scrollable._isScrolledToTop()) {\n                    scrollable._scrollWrapperToTop();\n                }\n            }\n        },\n\n        _scrollVirtualWrapperOnColumnResize: function() {\n            var virtualScrollable = this.virtualScrollable;\n\n            if (virtualScrollable) {\n                virtualScrollable._scrollWrapperOnColumnResize();\n            }\n        },\n\n        _restoreEditableState: function() {\n            var that = this;\n            var editableState = that._editableState || {};\n            var editedModel = editableState.model;\n            var dataSource = that.dataSource;\n            var inlineMode = that._isVirtualInlineEditable();\n            var incellMode = that._isVirtualIncellEditable();\n            var virtualColumns = that._hasVirtualColumns();\n            var row;\n            var cell;\n\n            if ((inlineMode || incellMode || virtualColumns) && editedModel && dataSource._getByUid(editedModel.uid, dataSource.view())) {\n                if (that._editMode() === INLINE) {\n                    that._shouldClearEditableState = false;\n                    that.editRow(editedModel);\n                    if (!virtualColumns) {\n                        that._focusEditable();\n                    }\n                } else if (that._editMode() === INCELL) {\n                    row = that.tbody.children(attrEquals(UNIQUE_ID, editedModel.uid));\n                    cell = $(row).children(attrEquals(FIELD, editableState.field));\n\n                    if (cell[0]) {\n                        that._shouldClearEditableState = false;\n                        that.editCell(cell);\n                        if (!virtualColumns) {\n                            that._focusEditable();\n                        }\n                    }\n                }\n            }\n\n            that._shouldClearEditableState = true;\n        },\n\n        _focusEditable: function() {\n            var that = this;\n            var editedField = (that._editableState || {}).field;\n            var editContainer = that._editContainer;\n\n            if (editContainer && editContainer.length && !contains(editContainer[0], activeElement()) && that._canFocusEditable()) {\n                if (that._isVirtualInlineEditable() || that._hasVirtualColumns()) {\n                    editContainer.find(attrEquals(CONTAINER_FOR, editedField)).find(FOCUSABLE).eq(0).trigger(\"focus\");\n                } else if (that._isVirtualIncellEditable() || that._hasVirtualColumns()) {\n                    editContainer.find(FOCUSABLE).eq(0).trigger(\"focus\");\n                }\n            }\n        },\n\n        _canFocusEditable: function() {\n            var that = this;\n            var result = ((that._isVirtualIncellEditable() || that._isVirtualInlineEditable() || that._hasVirtualColumns()) &&\n            (isElementVisibleInWrapper((that.virtualScrollable || {}).wrapper, that._editContainer) || isElementVisibleInWrapper(that.content, that._editContainer)));\n\n            return result;\n        },\n\n        _cacheEditableState: function() {\n            var that = this;\n            var editContainer = that._editContainer;\n            var editedModel = editContainer ? that._modelForContainer(editContainer) : null;\n            var inlineMode = that._isVirtualInlineEditable();\n            var incellMode = that._isVirtualIncellEditable();\n            var virtualColumns = that._hasVirtualColumns();\n            var active;\n            var widget;\n            var value;\n\n            if ((inlineMode || incellMode || virtualColumns) && editedModel) {\n                that._clearEditableState();\n                active = $(activeElement());\n\n                if (editContainer && active[0] && contains(editContainer[0], active[0])) {\n                    //change event is not fired if the editable container is scrolled\n                    //out of the virtual view with the mousewheel right after editing\n                    active.change();\n\n                    widget = kendo.widgetInstance(active, kendo.ui);\n\n                    if (widget && isFunction(widget.value) && active.is(INPUT)) {\n                        value = active.val();\n\n                        if (active.is(\"[type='checkbox'\")) {\n                            value = active.is(\":checked\");\n                        }\n\n                        widget.value(value);\n                        widget.trigger(CHANGE);\n                    }\n                }\n\n                if (that._editMode() === INLINE) {\n                    that._editableState = {\n                        model: editedModel,\n                        field: active.closest(\"[\" + kendo.attr(CONTAINER_FOR) + \"]\").attr(kendo.attr(CONTAINER_FOR))\n                    };\n                } else if (that._editMode() === INCELL) {\n                    that._editableState = {\n                        model: editedModel,\n                        field: editContainer.attr(kendo.attr(FIELD))\n                    };\n                }\n            }\n        },\n\n        _clearSortClasses: function() {\n            var that = this,\n                content = that.content || that.table,\n                lockedContent = that.lockedContent;\n\n            if (content) {\n                content.find(COLGROUP).removeClass(SORTED_CLASS);\n            }\n\n            if (lockedContent) {\n                lockedContent.find(COLGROUP).removeClass(SORTED_CLASS);\n            }\n        },\n\n        _clearEditableState: function() {\n            var that = this;\n\n            if (that.virtualScrollable || (that.virtualScroll && that._hasVirtualColumns())) {\n                that._editableState = null;\n            }\n        },\n\n        _destroyVirtualScrollable: function() {\n            var that = this;\n\n            that._clearEditableState();\n\n            if (that.virtualScrollable && that.virtualScrollable.element) {\n                that.virtualScrollable.destroy();\n            }\n\n            that.virtualScrollable = null;\n        },\n\n        _destroyRowResizing: function() {\n            if (this.rowResizing) {\n                this.rowResizing.destroy();\n\n                this.rowResizing = null;\n            }\n\n            if (this.rowResizer) {\n                this._detachRowResizerEvents();\n                this.rowResizer.off(DUBLECLICK + NS);\n                this.rowResizer = null;\n                this._clearCachedRowsHeight();\n            }\n        },\n\n        _renderNoRecordsContent: function() {\n            var that = this;\n\n            if (that.options.noRecords) {\n                var noRecordsElement = that.table.parent().children('.' + NORECORDSCLASS);\n\n                if (noRecordsElement.length) {\n                    noRecordsElement.remove();\n                }\n\n                if (!that.dataSource || !that.dataSource.view().length) {\n                    noRecordsElement = $(that.noRecordsTemplate({ grid: that }));\n                    kendo.applyStylesFromKendoAttributes(noRecordsElement, [\"margin\", \"position\"]);\n                    noRecordsElement.insertAfter(that.table);\n                }\n            }\n        },\n\n        _setContentWidth: function(scrollLeft) {\n            var that = this,\n                hiddenDivClass = 'k-grid-content-expander',\n                hiddenDiv = '<div class=\"' + hiddenDivClass + '\"></div>',\n                resizable = that.resizable,\n                expander;\n\n            if (that.options.scrollable && that.wrapper.is(\":visible\")) {\n                expander = that.table.parent().children('.' + hiddenDivClass);\n                that._setContentWidthHandler = that._setContentWidth.bind(that);\n                if (!that.dataSource || !that.dataSource.view().length) {\n                    if (!expander[0]) {\n                        expander = $(hiddenDiv).appendTo(that.table.parent());\n                        if (resizable) {\n                            resizable.bind(\"resize\", that._setContentWidthHandler);\n                        }\n                    }\n                    if (that.thead) {\n                        expander.width(that.thead.width());\n                        if (!isNaN(parseFloat(scrollLeft, 10))) {\n                            kendo.scrollLeft(that.content, scrollLeft);\n                        }\n                    }\n                } else if (expander[0]) {\n                    expander.remove();\n                    if (resizable) {\n                        resizable.unbind(\"resize\", that._setContentWidthHandler);\n                    }\n                }\n\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n\n                // workaround IE does not show vertical scrollbar for elements without width\n                if (that.lockedHeader && that.table[0].clientWidth === 0) {\n                    that.table[0].style.width = \"1px\";\n                }\n            }\n        },\n\n        _applyLockedContainersWidth: function() {\n            if (this.options.scrollable && this.lockedHeader) {\n                var headerTable = this.thead.parent(),\n                    headerWrap = headerTable.parent(),\n                    contentWidth = this.wrapper[0].clientWidth,\n                    groups = this._groups(),\n                    scrollbar = kendo.support.scrollbar(),\n                    cols = this.lockedHeader.find(\">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                    nonLockedCols = headerTable.find(\">colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                    width = columnsWidth(cols),\n                    nonLockedColsWidth = columnsWidth(nonLockedCols),\n                    footerWrap;\n\n                if (groups > 0) {\n                    width += outerWidth(this.lockedHeader.find(\".k-group-cell\").first()) * groups;\n                }\n\n                if (width >= contentWidth) {\n                    width = contentWidth - 3 * scrollbar;\n                }\n\n                this.lockedHeader\n                    .add(this.lockedContent)\n                    .width(width);\n\n                headerWrap[0].style.width = headerWrap.parent().width() - width - 2 + PX;\n\n                headerTable.add(this.table).width(nonLockedColsWidth);\n\n                //https://github.com/telerik/kendo-ui-core/issues/377\n                if (this.virtualScrollable && !isIE11) {\n                    contentWidth -= scrollbar;\n                }\n\n                this.content[0].style.width = contentWidth - width - 1 + PX;\n\n                if (this.lockedFooter && this.lockedFooter.length) {\n                    this.lockedFooter.width(width);\n                    footerWrap = this.footer.find(\".k-grid-footer-wrap\");\n                    footerWrap[0].style.width = headerWrap[0].clientWidth + PX;\n                    footerWrap.children().first().width(nonLockedColsWidth);\n                }\n            }\n        },\n\n        _setContentHeight: function() {\n            var that = this,\n                options = that.options,\n                height,\n                header = that.wrapper.children(\".k-grid-header\"),\n                scrollbar = kendo.support.scrollbar();\n            var scrollableHeight = (options.scrollable || {}).height;\n\n            if (options.scrollable && that.wrapper.is(\":visible\")) {\n                if (scrollableHeight && that.content[0].style.height === \"\") {\n                    // fallback to client-side setting as ASP.NET MVC Core wrapper does not provide server rendering of the content\n                    that.content[0].style.height = scrollableHeight;\n                }\n\n                height = that.wrapper.innerHeight();\n\n                height -= outerHeight(header);\n\n                if (that.pager && that.pager.element.is(\":visible\")) {\n                    height -= outerHeight(that.pager.element);\n                }\n\n                if (options.groupable) {\n                    height -= outerHeight(that.wrapper.children(\".k-grouping-header\"));\n                }\n\n                if (options.toolbar) {\n                    height -= outerHeight(that.wrapper.children(\".k-grid-toolbar\"));\n                }\n\n                if (that.footerTemplate) {\n                    height -= outerHeight(that.wrapper.children(\".k-grid-footer\"));\n                }\n\n                if (that.statusBar) {\n                    height -= outerHeight(that.wrapper.children(\".k-selection-aggregates\"));\n                }\n\n                var isGridHeightSet = function(el) {\n                    var initialHeight, newHeight;\n                    if (el[0].style.height) {\n                        return true;\n                    } else {\n                        initialHeight = el.height();\n                    }\n\n                    el.height(AUTO);\n                    newHeight = el.height();\n\n                    if (initialHeight != newHeight) {\n                        el.height(\"\");\n                        return true;\n                    }\n                    el.height(\"\");\n                    return false;\n                };\n\n                if (isGridHeightSet(that.wrapper)) { // set content height only if needed\n                    if (height > scrollbar * 2) { // do not set height if proper scrollbar cannot be displayed\n                        if (that.lockedContent) {\n                            scrollbar = that.table[0].offsetWidth > that.table.parent()[0].clientWidth ? scrollbar : 0;\n                            that.lockedContent.height(height - scrollbar);\n                        }\n\n                        that.content.height(height);\n                    } else {\n                        that.content.height(scrollbar * 2 + 1);\n                    }\n                }\n            }\n        },\n\n        _averageRowHeight: function() {\n            var that = this,\n                itemsCount = that._items(that.tbody, true).length,\n                rowHeight = that._rowHeight;\n\n            if (itemsCount === 0) {\n                return rowHeight;\n            }\n\n            if (!that._rowHeight) {\n                that._rowHeight = rowHeight = outerHeight(that.table) / itemsCount;\n                that._sum = rowHeight;\n                that._measures = 1;\n            }\n\n            var currentRowHeight = outerHeight(that.table) / itemsCount;\n\n            if (rowHeight !== currentRowHeight) {\n                that._measures ++;\n                that._sum += currentRowHeight;\n                that._rowHeight = that._sum / that._measures;\n            }\n            return rowHeight;\n        },\n\n        _dataSource: function() {\n            var that = this,\n                options = that.options,\n                pageable,\n                dataSource = options.dataSource;\n\n            dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            if (isPlainObject(dataSource)) {\n                extend(dataSource, { table: that.table, fields: that.columns });\n\n                pageable = options.pageable;\n\n                if (isPlainObject(pageable) && pageable.pageSize !== undefined$1) {\n                    dataSource.pageSize = pageable.pageSize;\n                }\n            }\n\n            if (that.dataSource && that._refreshHandler) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler)\n                                .unbind(PROGRESS, that._progressHandler)\n                                .unbind(ERROR, that._errorHandler)\n                                .unbind(SORT, that._sortHandler);\n            } else {\n                that._refreshHandler = that.refresh.bind(that);\n                that._progressHandler = that._requestStart.bind(that);\n                that._errorHandler = that._error.bind(that);\n                that._sortHandler = that._clearSortClasses.bind(that);\n            }\n\n            that.dataSource = DataSource.create(dataSource)\n                                .bind(CHANGE, that._refreshHandler)\n                                .bind(PROGRESS, that._progressHandler)\n                                .bind(ERROR, that._errorHandler)\n                                .bind(SORT, that._sortHandler);\n        },\n\n        _error: function() {\n            this._progress(false);\n        },\n\n        _requestStart: function() {\n            this._progress(true);\n        },\n\n        _modelChange: function(e) {\n            var that = this,\n                tbody = that.tbody,\n                model = e.model,\n                row = that.tbody.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"),\n                relatedRow,\n                cell,\n                column,\n                isAlt = row.hasClass(\"k-alt\"),\n                tmp,\n                idx = that._items(tbody).index(row),\n                isLocked = that.lockedContent,\n                selectable,\n                selectableRow,\n                childCells,\n                originalCells,\n                length;\n\n            if (isLocked) {\n                relatedRow = that._relatedRow(row);\n            }\n\n            if (row.add(relatedRow).children(\".k-edit-cell\").length && !that.options.rowTemplate) {\n                row.add(relatedRow).children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function() {\n                    cell = $(this);\n                    column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                    if (column.field === e.field) {\n                        if (!cell.hasClass(\"k-edit-cell\")) {\n                            that._displayCell(cell, column, model);\n                        } else {\n                            cell.addClass(\"k-dirty-cell\");\n                        }\n                    }\n                });\n\n            } else if (!row.hasClass(\"k-grid-edit-row\")) {\n\n                selectableRow = $().add(row);\n\n                if (isLocked) {\n                    tmp = (isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model);\n\n                    selectableRow = selectableRow.add(relatedRow);\n\n                    relatedRow.replaceWith(tmp);\n                }\n\n                tmp = (isAlt ? that.altRowTemplate : that.rowTemplate)(model);\n\n                let tmpResult = $(tmp);\n                kendo.applyStylesFromKendoAttributes(tmpResult, [\"display\"]);\n                row.replaceWith(tmpResult);\n\n                tmp = that._items(tbody).eq(idx);\n\n                if (isLocked) {\n                    row = row.add(relatedRow);\n\n                    relatedRow = that._relatedRow(tmp)[0];\n                    adjustRowHeight(tmp[0], relatedRow);\n\n                    tmp = tmp.add(relatedRow);\n                }\n\n                selectable = that.options.selectable;\n                if ((selectable || that._checkBoxSelection) && row.hasClass(SELECTED)) {\n                   that.select(tmp);\n                }\n\n                originalCells = selectableRow.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n                childCells = tmp.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n                for (idx = 0, length = that.columns.length; idx < length; idx++) {\n                    column = that.columns[idx];\n\n                    cell = childCells.eq(idx);\n                    if (selectable && originalCells.eq(idx).hasClass(SELECTED)) {\n                        cell.addClass(SELECTED);\n                    }\n                }\n\n                that.trigger(\"itemChange\", { item: tmp, data: model, ns: ui });\n            }\n        },\n\n        _pageable: function() {\n            var that = this,\n                pagerWrap,\n                pageable = that.options.pageable,\n                size = that.options.size,\n                navigatable = that.options.navigatable;\n\n            if (pageable) {\n                pagerWrap = that.wrapper.children(\"div.k-grid-pager\");\n\n                if (!pagerWrap.length) {\n                    pagerWrap = $('<div class=\"k-pager k-grid-pager\"/>');\n                }\n\n                if (pageable.position === \"top\") {\n                    pagerWrap.prependTo(that.wrapper).addClass(\"k-grid-pager-top\");\n                } else {\n                    pagerWrap.appendTo(that.wrapper);\n                }\n\n                if (that.pager) {\n                    that.pager.destroy();\n                }\n\n                if (typeof pageable === \"object\" && pageable instanceof kendo.ui.Pager) {\n                    that.pager = pageable;\n                } else {\n                    if (that.dataSource._groupPaging) {\n                        that.pager = new GroupsPager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource, navigatable: navigatable, size: size }));\n                    } else {\n                        that.pager = new kendo.ui.Pager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource, navigatable: navigatable, size: size }));\n                    }\n                }\n\n                that.pager.bind(\"pageChange\", function(e) {\n                    if (that.trigger(\"page\", { page: e.index })) {\n                        e.preventDefault();\n                    }\n                });\n\n                that._togglePagerVisibility();\n            }\n        },\n\n        _statusBar: function() {\n            var that = this,\n                options = that.options,\n                wrapper = that.wrapper,\n                statusBarTemplate = options.statusBarTemplate,\n                content = \"\";\n\n            if (statusBarTemplate) {\n                if (!that.statusBar) {\n                    content += '<div class=\"k-selection-aggregates k-grid-selection-aggregates\">';\n\n                    content += statusBarTemplate({ aggregates: that._cellAggregates });\n\n                    content += '</div>';\n\n                    if (options.scrollable) {\n                        that.statusBar = $(content).insertAfter(wrapper.find(DOT + \"k-grid-container\"));\n                    } else {\n                        that.statusBar = $(content).insertAfter(wrapper.find(DOT + \"k-grid-table\"));\n                    }\n                } else {\n                    that.statusBar.html(statusBarTemplate({ aggregates: that._cellAggregates }));\n                }\n            }\n        },\n\n        _footer: function() {\n            var that = this,\n                aggregates = that.dataSource.aggregates(),\n                html = \"\",\n                footerTemplate = that.footerTemplate,\n                options = that.options,\n                footerWrap,\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n            if (footerTemplate) {\n                html = $(that._wrapFooter(footerTemplate(aggregates)));\n                kendo.applyStylesFromKendoAttributes(html, [\"display\", \"left\", \"right\"]);\n\n                if (footer.length) {\n                    var tmp = html;\n\n                    footer.replaceWith(tmp);\n                    footer = that.footer = tmp;\n                } else {\n                    if (options.scrollable) {\n                        if (that.statusBar) {\n                            that.footer = html.insertBefore(that.statusBar);\n                        } else if (options.pageable && options.pageable.position !== \"top\") {\n                            that.footer = html.insertBefore(that.wrapper.children(\"div.k-grid-pager\"));\n                        } else {\n                            that.footer = html.appendTo(that.wrapper);\n                        }\n                        footer = that.footer;\n                    } else {\n                        footer = that.footer = html.insertAfter(that.tbody);\n                    }\n                }\n            } else if (footer && !that.footer) {\n                that.footer = footer;\n            }\n\n            if (footer.length) {\n                if (options.scrollable) {\n                    footerWrap = footer.attr(TABINDEX, -1).children(\".k-grid-footer-wrap\");\n\n                    that.scrollables = $(\n                        that.scrollables\n                            .filter(function() { return !$(this).is(\".k-grid-footer-wrap\"); })\n                            .toArray()\n                    ).add(footerWrap);\n                }\n\n                if (that._footerWidth) {\n                    footer.find(\"table\").css('width', that._footerWidth);\n                }\n\n                if (footerWrap) {\n                    var offset = kendo.scrollLeft(that.content);\n\n                    if (options.scrollable !== true && that.virtualScroll && that.virtualScroll.rows) {\n                        offset = kendo.scrollLeft(that.wrapper.find('.k-virtual-scrollable-wrap'));\n                    }\n                    kendo.scrollLeft(footerWrap, offset);\n                }\n            }\n\n            if (that.lockedContent) {\n                that._appendLockedColumnFooter();\n                that._applyLockedContainersWidth();\n                that._syncLockedFooterHeight();\n            }\n        },\n\n        _wrapFooter: function(footerRow) {\n            var that = this,\n                html = \"\",\n                table,\n                scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n\n            if (that.options.scrollable) {\n                html = $('<div class=\"k-grid-footer\"><div class=\"k-grid-footer-wrap\"><table class=\"k-table k-grid-footer-table\"><tfoot class=\"k-table-tfoot\">' + footerRow + '</tfoot></table></div></div>');\n                table = html.find(\"table\");\n                table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n                that._appendCols(table);\n                html.css((isRtl ? \"padding-left\" : \"padding-right\"), scrollbar); // Update inner fix.\n\n                return html;\n            }\n\n            return '<tfoot class=\"k-grid-footer k-table-tfoot\">' + footerRow + '</tfoot>';\n        },\n\n        _globalColumnsMenu: function(cell) {\n            var that = this,\n                menu,\n                columns = leafColumns(that.columns),\n                options = that.options,\n                columnMenu = options.columnMenu,\n                menuOptions,\n                initCallback = function(e) {\n                    that.trigger(COLUMNMENUINIT, { field: e.field, container: e.container });\n                },\n                openCallback = function(e) {\n                    that.trigger(COLUMNMENUOPEN, { field: e.field, container: e.container });\n                },\n                closeCallback = function() {\n                    cell.trigger(\"focus\");\n                };\n\n            if (columnMenu) {\n                if (typeof columnMenu == \"boolean\") {\n                    columnMenu = {};\n                }\n\n                that._setColumnsMediaVisibility(columns);\n\n                let toggleable = !!(columnMenu.autoSize || columnMenu.clearAllFilters);\n\n                menu = cell.data(\"kendoColumnMenu\");\n                if (menu) {\n                    menu.destroy();\n                }\n\n                let columnsExpanderOptions = {\n                    toggleable: toggleable,\n                    expanded: columnMenu.expanded || true,\n                    animation: false,\n                    hideExpanderIndicator: !toggleable\n                };\n\n                menuOptions = {\n                    dataSource: that.dataSource,\n                    columns: columnMenu.columns,\n                    sortable: false,\n                    filterable: false,\n                    clearAllFilters: columnMenu.clearAllFilters,\n                    messages: columnMenu.messages,\n                    hideAutoSizeColumn: true,\n                    owner: that,\n                    closeCallback: closeCallback,\n                    init: initCallback,\n                    open: openCallback,\n                    pane: that.pane,\n                    autoSize: columnMenu.autoSize,\n                    encodeTitles: that.options.encodeTitles,\n                    componentType: \"modern\",\n                    columnsExpanderOptions: columnsExpanderOptions\n                };\n\n                cell.kendoColumnMenu(menuOptions);\n            }\n        },\n\n        _columnMenu: function() {\n            var that = this,\n                menu,\n                columns = leafColumns(that.columns),\n                column,\n                options = that.options,\n                columnMenu = options.columnMenu,\n                menuOptions,\n                sortable,\n                filterable,\n                cells,\n                hasMultiColumnHeaders = grep(that.columns, function(item) {\n                    return item.columns !== undefined$1;\n                }).length > 0,\n                hasLockableColumns = grep(that.columns, function(item) {\n                    return item.lockable !== false;\n                }).length > 0,\n                hasStickableColumns = grep(that.columns, function(item) {\n                    return item.stickable === true;\n                }).length > 0,\n                isMobile = this._isMobile,\n                initCallback = function(e) {\n                    that.trigger(COLUMNMENUINIT, { field: e.field, container: e.container });\n                },\n                openCallback = function(e) {\n                    that.trigger(COLUMNMENUOPEN, { field: e.field, container: e.container });\n                },\n                closeCallback = function() {\n                    focusTable(that.table, true);\n                },\n                stickCallback = function(e) {\n                    that.trigger(COLUMNSTICK, { column: e.column });\n                },\n                unstickCallback = function(e) {\n                    that.trigger(COLUMNUNSTICK, { column: e.column });\n                },\n                sortHandler = function(e) {\n                    if (that.trigger(\"sort\", { sort: e.sort })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                },\n                filterHandler = function(e) {\n                    if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                };\n\n            if (columnMenu) {\n                if (typeof columnMenu == \"boolean\") {\n                    columnMenu = {};\n                }\n\n                that._setColumnsMediaVisibility(columns);\n\n                cells = leafDataCells(that.thead);\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n                    var cell = cells.eq(idx);\n\n                    if (column.columnMenu !== false && !column.command && (column.field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                        menu = cell.data(\"kendoColumnMenu\");\n                        if (menu) {\n                            menu.destroy();\n                        }\n\n                        sortable = column.sortable !== false && columnMenu.sortable !== false && options.sortable !== false ? extend({}, options.sortable, {\n                            compare: (column.sortable || {}).compare\n                        }) : false;\n\n                        filterable = options.filterable && column.filterable !== false && columnMenu.filterable !== false ? extend({ pane: that.pane }, options.filterable, column.filterable) : false;\n\n                        if (column.filterable && column.filterable.dataSource) {\n                            filterable.forceUnique = false;\n                            filterable.checkSource = column.filterable.dataSource;\n                        }\n\n                        if (filterable) {\n                            filterable.format = column.format;\n                        }\n\n                        menuOptions = {\n                            dataSource: that.dataSource,\n                            values: column.values,\n                            columns: columnMenu.columns,\n                            sortable: sortable,\n                            filterable: filterable,\n                            messages: columnMenu.messages,\n                            owner: that,\n                            closeCallback: closeCallback,\n                            init: initCallback,\n                            open: openCallback,\n                            stick: stickCallback,\n                            unstick: unstickCallback,\n                            pane: that.pane,\n                            sort: sortHandler,\n                            filtering: filterHandler,\n                            filter: isMobile ? \":not(.k-column-active)\" : \"\",\n                            autoSize: columnMenu.autoSize,\n                            hasLockableColumns: lockedColumns(columns).length > 0 && hasLockableColumns && !hasMultiColumnHeaders,\n                            hasStickableColumns: hasStickableColumns && !hasMultiColumnHeaders,\n                            encodeTitles: that.options.encodeTitles,\n                            componentType: columnMenu.componentType,\n                            appendTo: DOT + classNames.headerCellInner,\n                            reorderable: options.reorderable === true || (options.reorderable && options.reorderable.columns),\n                            groupable: that.options.groupable && that.options.groupable.enabled !== false && column.groupable !== false\n                        };\n\n                        cell.kendoColumnMenu(menuOptions);\n                    }\n                }\n            }\n        },\n\n        _headerCells: function() {\n            return $(this.thead).find(\"th\").filter(function() {\n                var th = $(this);\n                return !th.hasClass(\"k-group-cell\") && !th.hasClass(\"k-hierarchy-cell\");\n            });\n        },\n\n        _hasFilterMenu: function() {\n            var filterable = this.options.filterable;\n            if (filterable && typeof filterable.mode == STRING && filterable.mode.indexOf(\"menu\") == -1) {\n                return false;\n            }\n\n            return filterable;\n        },\n\n        _filterable: function() {\n            var that = this,\n                columns = leafColumns(that.columns),\n                filterMenu,\n                cells,\n                cell,\n                filterInit = function(e) {\n                    that.trigger(FILTERMENUINIT, { field: e.field, container: e.container });\n                },\n                closeCallback = function() {\n                    focusTable(that.table, true);\n                },\n                filterHandler = function(e) {\n                    if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                },\n                filterOpen = function(e) {\n                    that.trigger(FILTERMENUOPEN, { field: e.field, container: e.container });\n                },\n                filterable = that._hasFilterMenu();\n\n            if (filterable && !that.options.columnMenu) {\n                cells = leafDataCells(that.thead);//that._headerCells();\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    cell = cells.eq(idx);\n\n                    if (columns[idx].filterable !== false && !columns[idx].command && (columns[idx].field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                        filterMenu = cell.data(\"kendoFilterMenu\");\n\n                        if (filterMenu) {\n                            filterMenu.destroy();\n                        }\n\n                        filterMenu = cell.data(\"kendoFilterMultiCheck\");\n                        if (filterMenu) {\n                           filterMenu.destroy();\n                        }\n\n                        var columnFilterable = columns[idx].filterable;\n\n                        var options = extend({},\n                            filterable,\n                            columnFilterable,\n                            {\n                                dataSource: that.dataSource,\n                                values: columns[idx].values,\n                                format: columns[idx].format,\n                                closeCallback: closeCallback,\n                                title: columns[idx].title || columns[idx].field,\n                                init: filterInit,\n                                open: filterOpen,\n                                pane: that.pane,\n                                change: filterHandler,\n                                appendTo: DOT + classNames.headerCellInner\n                            }\n                        );\n\n                        if (columnFilterable && columnFilterable.messages) {\n                            options.messages = extend(true, {}, filterable.messages, columnFilterable.messages);\n                        }\n                        if (columnFilterable && columnFilterable.dataSource) {\n                            options.forceUnique = false;\n                            options.checkSource = columnFilterable.dataSource;\n                        }\n\n                        if (columnFilterable && columnFilterable.multi) {\n                            cell.kendoFilterMultiCheck(options);\n                        } else {\n                            cell.kendoFilterMenu(options);\n                        }\n                    }\n                }\n            }\n        },\n\n        _filterRow: function() {\n            var that = this;\n            if (!that._hasFilterRow()) {\n               return;\n            }\n\n            var settings;\n            var columns = leafColumns(that.columns),\n                filterable = that.options.filterable,\n                rowheader = that.thead.find(\".k-filter-row\"),\n                filterHandler = function(e) {\n                    if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                };\n\n\n            this._updateHeader(that._groups());\n\n            for (var i = 0; i < columns.length; i++) {\n                var suggestDataSource,\n                    col = columns[i],\n                    operators = that.options.filterable.operators,\n                    customDataSource = false,\n                    td = $(\"<td class='k-table-td' title='\" + that.options.messages.filterCellTitle + \"'/>\"),\n                    field = col.field;\n\n                if (col.hidden) {\n                    td.hide();\n                }\n                rowheader.append(td);\n                if (field && col.filterable !== false) {\n                    var cellOptions = col.filterable && col.filterable.cell || {};\n\n                    suggestDataSource = that.options.dataSource;\n                    if (suggestDataSource instanceof DataSource) {\n                        suggestDataSource = that.options.dataSource.options;\n                    }\n\n                    var messages = extend(true, {}, filterable.messages);\n                    if (col.filterable) {\n                        extend(true, messages, col.filterable.messages);\n                    }\n\n                    if (cellOptions.enabled === false) {\n                        td.html(\"&nbsp;\");\n                        continue;\n                    }\n                    if (cellOptions.dataSource) {\n                        suggestDataSource = cellOptions.dataSource;\n                        customDataSource = true;\n                    }\n                    if (col.filterable && col.filterable.operators) {\n                        operators = col.filterable.operators;\n                    }\n\n                    settings = {\n                        column: col,\n                        dataSource: that.dataSource,\n                        suggestDataSource: suggestDataSource,\n                        customDataSource: customDataSource,\n                        field: field,\n                        messages: messages,\n                        size: that.options.size,\n                        values: col.values,\n                        template: cellOptions.template,\n                        delay: cellOptions.delay,\n                        inputWidth: cellOptions.inputWidth,\n                        suggestionOperator: cellOptions.suggestionOperator,\n                        minLength: cellOptions.minLength,\n                        dataTextField: cellOptions.dataTextField,\n                        operator: cellOptions.operator,\n                        operators: operators,\n                        showOperators: cellOptions.showOperators,\n                        change: filterHandler\n                    };\n\n                    $(\"<span/>\").attr(kendo.attr(\"field\"), field)\n                        .appendTo(td)\n                        .kendoFilterCell(settings);\n                } else {\n                    td.html(\"&nbsp;\");\n                }\n                td.data(\"column\", col);\n            }\n\n            this._filterFocusable().attr(TABINDEX, -1);\n        },\n\n        _sortable: function() {\n            var that = this,\n                columns = leafColumns(that.columns),\n                column,\n                sorterInstance,\n                cell,\n                sortable = that.options.sortable,\n                sortHandler = function(e) {\n                    if (that.trigger(\"sort\", { sort: e.sort })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                    }\n                };\n\n\n            if (sortable) {\n                var cells = leafDataCells(that.thead);\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n\n                    if (column.sortable !== false && !column.command && column.field) {\n                        cell = cells.eq(idx);\n\n                        sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                        if (sorterInstance) {\n                            sorterInstance.destroy();\n                        }\n\n                        cell.attr(\"data-\" + kendo.ns + \"field\", column.field)\n                            .kendoColumnSorter(\n                                extend({}, sortable, column.sortable, {\n                                    dataSource: that.dataSource,\n                                    aria: true,\n                                    filter: \":not(.k-column-active)\",\n                                    change: sortHandler\n                                })\n                            );\n                    }\n                }\n                cells = null;\n            }\n        },\n\n        _columns: function(columns) {\n            var that = this,\n                table = that.table,\n                encoded,\n                cols = table.find(\"col\"),\n                lockedCols,\n                headerRows = that.element.find('thead tr'),\n                dataSource = that.options.dataSource,\n                draggableColumns;\n\n            // using HTML5 data attributes as a configuration option e.g. <th data-field=\"foo\">Foo</foo>\n            columns = columns.length ? columns : map(table.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\"), function(th, idx) {\n                th = $(th);\n                var sortable = th.attr(kendo.attr(\"sortable\")),\n                    filterable = th.attr(kendo.attr(\"filterable\")),\n                    type = th.attr(kendo.attr(\"type\")),\n                    groupable = th.attr(kendo.attr(\"groupable\")),\n                    field = th.attr(kendo.attr(\"field\")),\n                    title = th.attr(kendo.attr(\"title\")),\n                    columnMenu = th.attr(kendo.attr(\"column-menu\")),\n                    menu = th.attr(kendo.attr(\"menu\"));\n\n                if (!field) {\n                   field = th.text().replace(/\\s|[^A-z0-9]/g, \"\");\n                }\n\n                return {\n                    field: field,\n                    type: type,\n                    title: title,\n                    sortable: sortable !== \"false\",\n                    filterable: filterable !== \"false\",\n                    groupable: groupable !== \"false\",\n                    menu: menu !== \"false\",\n                    columnMenu: columnMenu !== \"false\",\n                    template: th.attr(kendo.attr(\"template\")),\n                    width: cols.eq(idx).css(WIDTH)\n                };\n            });\n\n            encoded = !(that.table.find(\"tbody tr\").length > 0 && (!dataSource || !dataSource.transport));\n\n            if (that.options.scrollable) {\n                var initialColumns = columns;\n                lockedCols = lockedColumns(columns);\n                columns = nonLockedColumns(columns);\n\n                if (lockedCols.length > 0 && columns.length === 0) {\n                    throw new Error(\"There should be at least one non locked column\");\n                }\n\n                normalizeHeaderCells(that.element.find(\"tr:has(th)\").first(), initialColumns);\n                columns = lockedCols.concat(columns);\n            }\n\n            if (headerRows.length && columns.length) {\n                that._updateColumnIDs(columns, headerRows.first());\n            }\n\n            that.columns = normalizeColumns(columns, encoded);\n\n            if ($.grep(leafColumns(that.columns), function(col) { return col.selectable;}).length) {\n                that._selectedIds = {};\n                that._checkBoxSelection = true;\n                that.wrapper.on(CLICK + NS, \"tbody > tr \" + CHECKBOXINPUT, that._checkboxClick.bind(that));\n                that.wrapper.on(CLICK + NS, \"thead > tr \" + CHECKBOXINPUT, that._headerCheckboxClick.bind(that));\n            }\n\n            draggableColumns = $.grep(leafColumns(that.columns), function(col) { return col.draggable;});\n\n            if (draggableColumns.length) {\n                that._hasDragHandleColumn = true;\n\n                for (var i = 0; i < draggableColumns.length; i++) {\n                    draggableColumns[i].headerAttributes = $.extend({\n                        \"aria-label\": that.options.messages.dragHandleLabel\n                    }, draggableColumns[i].headerAttributes);\n                }\n            }\n\n            that._foreignKeyBindings(that.columns);\n        },\n\n        _foreignKeyBindings: function(columns) {\n            var that = this;\n            var length = columns.length;\n            var column;\n\n            for (var i = 0; i < length; i++) {\n                column = columns[i];\n\n                if (column.dataSource) {\n                    that._fetchForeignKeyValues(column);\n                }\n            }\n        },\n\n        _fetchForeignKeyValues: function(column) {\n            var that = this;\n            var promise = $.Deferred();\n\n            that._hasBoundForeignKey = true;\n            column.dataSource = DataSource.create(column.dataSource);\n\n            if (!that._foreignKeyPromises) {\n                that._foreignKeyPromises = [];\n            }\n\n            that._foreignKeyPromises.push(promise);\n            column.dataSource.fetch().then(function() {\n                var data = column.dataSource.data();\n                column.values = data.map(function(item) {\n                    return {\n                        value: item[column.dataValueField],\n                        text: item[column.dataTextField]\n                    };\n                });\n                promise.resolve();\n            });\n\n        },\n\n        _updateColumnIDs: function(columns, tr) {\n\n            if (!columns.length) {\n                return;\n            }\n\n            var ths = tr.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\");\n            var id;\n            for (var i = 0; i < columns.length; i++) {\n                id = ths.eq(i).attr(ID);\n                if (id) {\n                    columns[i].headerAttributes = extend(columns[i].headerAttributes, { id: id });\n                }\n            }\n\n            this._updateColumnIDs(childColumns(columns), tr.next());\n        },\n\n        _headerCheckboxClick: function(e) {\n            var that = this,\n                checkBox = $(e.target),\n                checked = checkBox.prop(\"checked\");\n\n            if (!that._belongsToGrid(checkBox)) {\n                return;\n            }\n\n            if (that.trigger(CHANGING, { target: checkBox, originalEvent: e })) {\n                e.preventDefault();\n                return;\n            }\n\n            if (checked) {\n                that.select(that.items());\n            } else {\n                that.clearSelection();\n            }\n\n            that._calculateAggregatesForSelected();\n            that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n        },\n\n        _checkboxClick: function(e) {\n            var that = this,\n                row = $(e.target).closest(TR),\n                isSelecting = !row.hasClass(SELECTED);\n\n            if (!that._belongsToGrid(row)) {\n                return;\n            }\n\n            if (that.trigger(CHANGING, { target: row, originalEvent: e })) {\n                e.preventDefault();\n                return;\n            }\n\n            if (isSelecting) {\n                that.select(row);\n            } else {\n                that._deselectCheckRows(row);\n            }\n            that._calculateAggregatesForSelected();\n            that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n        },\n\n        _groups: function() {\n            var group = this.dataSource.group();\n\n            return group ? group.length : 0;\n        },\n\n        _tmpl: function(rowTemplate, columns, alt, skipGroupCells) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                idx,\n                length = columns.length,\n                template,\n                state = { storage: {}, count: 0 },\n                column,\n                type,\n                hasDetails = that._hasDetails(),\n                groups = that._groups();\n\n            var fieldAttr = kendo.attr(\"field\");\n            var field;\n            var classAttribute;\n            var compiledAttributes;\n            let rowTemplateFunc;\n\n            if (!rowTemplate) {\n                rowTemplateFunc = (data) => {\n                    var uid = length ? ` ${kendo.attr(\"uid\")}=\"${kendo.getter(\"uid\")(data)}\"` : '';\n                    var rowTemplateResult = `<tr class=\"${alt ? 'k-alt k-table-row k-table-alt-row ' : 'k-table-row '}k-master-row\"${uid}>`;\n\n                    if (groups > 0 && !skipGroupCells) {\n                        rowTemplateResult += groupCells(groups);\n                    }\n\n                    if (hasDetails) {\n                        rowTemplateResult += '<td class=\"k-hierarchy-cell k-table-td\" aria-expanded=\"false\">' + kendo.ui.icon($(`<a href=\"#\" ${ARIA_LABEL}=\"${EXPAND}\" tabindex=\"-1\"></a>`), { icon: `caret-alt-${isRtl ? \"left\" : \"right\"}` }) + '</td>';\n                    }\n\n                    for (idx = 0; idx < length; idx++) {\n                        column = columns[idx];\n                        template = column.template;\n                        type = typeof template;\n                        field = column.field;\n                        compiledAttributes = {};\n\n                        let dirtyCellTemplate;\n\n                        if (that._editMode() && field) {\n                            column.attributes = column.attributes || {};\n\n                            if (that.virtualScroll) {\n                                column.attributes[fieldAttr] = field;\n                            }\n\n                            dirtyCellTemplate = that._dirtyCellTemplate(field)(data);\n                        }\n\n                        if (column.colSpan && column.colSpan > 0 && hasHiddenStyle(column.attributes)) { //virtual cell should be visible at all times\n                            column.attributes = removeHiddenStyle(column.attributes);\n                        } else if (!column.colSpan && column.hidden) {\n                            column.attributes = addHiddenStyle(column.attributes);\n                        }\n\n                        if (column.command) {\n                            column.attributes = column.attributes || {};\n                            classAttribute = column.attributes[\"class\"];\n\n                            if (typeof classAttribute !== \"undefined\") {\n                                if (classAttribute.indexOf(\"k-command-cell\") < 0) {\n                                    column.attributes[\"class\"] += \" k-command-cell\";\n                                }\n                            } else {\n                                column.attributes[\"class\"] = \"k-command-cell\";\n                            }\n                        }\n\n                        if (column.draggable) {\n                            column.attributes = column.attributes || {};\n                            if (typeof column.attributes[\"class\"] !== \"undefined\") {\n                                if (column.attributes[\"class\"].indexOf(\"k-drag-cell k-touch-action-none\") < 0) {\n                                    column.attributes[\"class\"] += \" k-drag-cell k-touch-action-none\";\n                                }\n                            } else {\n                                column.attributes[\"class\"] = \"k-drag-cell k-touch-action-none\";\n                            }\n\n                            if (typeof column.attributes[ARIA_LABEL] === \"undefined\") {\n                                column.attributes[ARIA_LABEL] = that.options.messages.dragHandleLabel;\n                            }\n\n                            if (typeof column.attributes.style !== \"undefined\") {\n                                if (column.attributes.style.indexOf(\"cursor: move;\") < 0) {\n                                    column.attributes.style += \" cursor: move;\";\n                                }\n                            } else {\n                                column.attributes.style = \"cursor: move;\";\n                            }\n                        }\n\n                        if (column._attributesFunction) {\n                            compiledAttributes = column._attributesFunction(data);\n                        }\n\n                        let attributes = extend({}, column.attributes, compiledAttributes);\n                        if (dirtyCellTemplate) {\n                            attributes[\"class\"] = (attributes[\"class\"] || \"\");\n                            attributes[\"class\"] += dirtyCellTemplate;\n                        }\n                        let columnAttributes = stringifyAttributes(attributes);\n                        let colSpanAttributes = '';\n\n                        if (column.colSpan) {\n                            if (column.colSpan > 1) {\n                                colSpanAttributes += \" \" + kendo.attr(\"virtual\");\n                            }\n                            colSpanAttributes += ` colSpan=\"${column.colSpan}\"`;\n                        }\n                        rowTemplateResult += decorateCellWithClass(`<td${columnAttributes}${colSpanAttributes}>`);\n                        rowTemplateResult += column.selectable ? kendo.template(SELECTCOLUMNTMPL)({ size: kendo.getValidCssClass(\"k-checkbox-\", \"size\", that.options.size) }) : that._cellTmpl(column, state)(data);\n                        rowTemplateResult += \"</td>\";\n                    }\n\n                    rowTemplateResult += \"</tr>\";\n                    return rowTemplateResult;\n                };\n            }\n\n            rowTemplate = kendo.template(rowTemplate || rowTemplateFunc, settings);\n\n            if (state.count > 0) {\n                return rowTemplate.bind(state.storage);\n            }\n\n            return rowTemplate;\n        },\n\n        _dirtyCellTemplate: function(field) {\n            return (data) => {\n                if (field && data && data.dirty && data.dirtyFields) {\n                    let dirtyField = field.charAt(0) === \"[\" ? kendo.getter(field)(data.dirtyFields) : data.dirtyFields[field];\n                    return dirtyField ? ' k-dirty-cell' : '';\n                }\n\n                return \"\";\n            };\n        },\n\n        _headerCellText: function(column) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                template = column.headerTemplate,\n                type = typeof(template),\n                text = column.title && (that.options.encodeTitles ? htmlEncode(column.title) : column.title) || column.field || \"\";\n\n            if (type === FUNCTION) {\n                text = kendo.template(template, settings)({});\n            } else if (type === STRING) {\n                text = template;\n            }\n            return text;\n        },\n\n        _cellTmpl: function(column, state) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                template = column.template,\n                field = column.field,\n                // html = \"\",\n                idx,\n                length,\n                format = column.format,\n                type = typeof template,\n                columnValues = column.values;\n\n            if (column.command) {\n                if (isArray(column.command)) {\n                    return (data) => {\n                        let html = \"\";\n                        for (idx = 0, length = column.command.length; idx < length; idx++) {\n                            if (column.command[idx].visible) {\n                                html += column.command[idx].visible(data) ? that._createButton(column.command[idx]) : '';\n                            } else {\n                                html += that._createButton(column.command[idx]);\n                            }\n                        }\n                        return html;\n                    };\n                }\n                return () => that._createButton(column.command);\n            }\n\n            if (column.selectable) {\n                return SELECTCOLUMNTMPL;\n            }\n\n            if (column.draggable) {\n                return DRAGHANDLECOLUMNTMPL;\n            }\n\n            return (data) => {\n                let html = that._dirtyIndicatorTemplate(field)(data);\n\n                if (type === FUNCTION) {\n                    state.storage[\"tmpl\" + state.count] = template;\n                    html += template(data);\n                    state.count++;\n                } else if (type === STRING) {\n                    html += kendo.template(template, settings)(data);\n                } else if (columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0] && field) {\n                    var v = convertToObject(columnValues);\n                    var f = v[settings.useWithBlock ? kendo.getter(field)(data) : field];\n                    html += encode(f != null ? f : '');\n                } else {\n                    let fieldValue = '';\n                    if (field) {\n                        field = kendo.getter(field)(data);\n                        fieldValue = field == null ? '' : field;\n                    }\n\n                    if (format) {\n                        fieldValue = kendo.format(format.replace(formatRegExp, \"$1\"), fieldValue);\n                    }\n\n                    html += column.encoded ? encode(fieldValue) : fieldValue;\n                }\n\n                return html;\n            };\n        },\n\n        _dirtyIndicatorTemplate: function(field) {\n            return (data) => {\n                if (field && data && data.dirty && data.dirtyFields) {\n                    let dirtyField = field.charAt(0) === \"[\" ? kendo.getter(field)(data.dirtyFields) : data.dirtyFields[field];\n                    return dirtyField ? '<span class=\\\"k-dirty\\\"></span>' : '';\n                }\n\n                return \"\";\n            };\n        },\n\n        _virtualCols: function(columns) {\n            var that = this;\n            var widths = $.map(columns, function(c) { return c.hidden ? 0 : parseInt(c.width, 10); });\n            var scrollLeft = that.virtualScrollable ? kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\")) : kendo.scrollLeft(that.content);\n            var tableWidth = outerWidth(that.content);\n            var sumOfWidths = sumWidths(columns);\n            var colsToRender = [];\n            var firstColspan = 0;\n            var lastColspan = 0;\n            var hiddenColumns = 0;\n            var idx = 0;\n            var widthOfHiddenColumns = 0;\n            var considerNext;\n\n            for (idx = 0; idx < columns.length; idx++) {\n                considerNext = (idx < widths.length - 1) ? widths[idx + 1] : 0;\n                if (widthOfHiddenColumns + widths[idx] + 2 * considerNext < scrollLeft) {\n                    if (widths[idx]) {\n                        hiddenColumns++;\n                    }\n                    widthOfHiddenColumns += widths[idx];\n                } else {\n                    firstColspan = 1 + hiddenColumns;\n                    break;\n                }\n            }\n\n            hiddenColumns = 0;\n            widthOfHiddenColumns = 0;\n\n            for (var i = columns.length - 1; i >= 0; i--) {\n                if (widthOfHiddenColumns + 3 * widths[i] < sumOfWidths - tableWidth - scrollLeft) {\n                    if (widths[i]) {\n                        hiddenColumns++;\n                    }\n                    widthOfHiddenColumns += widths[i];\n                } else {\n                    lastColspan = 1 + hiddenColumns;\n                    for (var j = idx; j <= i; j++) {\n                        if (columns[j].locked) {\n                            continue;\n                        }\n                        colsToRender.push(columns[j]);\n                        if (columns[j].colSpan) {\n                            delete columns[j].colSpan;\n                        }\n                    }\n                    colsToRender[0].colSpan = firstColspan;\n                    colsToRender[colsToRender.length - 1].colSpan = lastColspan;\n                    break;\n                }\n            }\n\n            if (colsToRender[0].hidden) {\n                colsToRender[0].colSpan--;\n            }\n\n            that.virtualCols = colsToRender;\n\n            return colsToRender;\n        },\n\n        _templates: function() {\n            var that = this,\n                options = that.options,\n                dataSource = that.dataSource,\n                groups = dataSource.group(),\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                aggregates = dataSource.aggregate(),\n                columnLeafs = leafColumns(that.columns),\n                columnsLocked = leafColumns(lockedColumns(that.columns)),\n                leafsCols = options.scrollable ? leafColumns(nonLockedColumns(that.columns)) : columnLeafs,\n                columns = (that.virtualScroll || {}).columns ? that._virtualCols(leafsCols) : leafsCols,\n                groupHeaderColumnTemplateLockedColumns = grep(visibleColumns(columnsLocked), function(column, index) { return column.groupHeaderColumnTemplate && index !== 0; }),\n                groupHeaderColumnTemplateNonLockedColumns = grep(visibleColumns(columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (options.scrollable && columnsLocked.length) {\n                if (options.rowTemplate || options.altRowTemplate) {\n                    throw new Error(\"Having both row template and locked columns is not supported\");\n                }\n\n                that.rowTemplate = that._tmpl(options.rowTemplate, columns, false, true);\n                that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true, true);\n\n                that.lockedRowTemplate = that._tmpl(options.rowTemplate, columnsLocked);\n                that.lockedAltRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columnsLocked, true);\n            } else {\n                that.rowTemplate = that._tmpl(options.rowTemplate, columns);\n                that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true);\n            }\n\n            if (that._hasDetails()) {\n                that.detailTemplate = that._detailTmpl(options.detailTemplate || (() => \"\"));\n            }\n\n            if ((that._group && !isEmptyObject(aggregates)) || (!isEmptyObject(aggregates) && !footer.length) ||\n                grep(columnLeafs, function(column) { return column.footerTemplate; }).length) {\n\n                that.footerTemplate = that._footerTmpl(columnLeafs, aggregates, \"footerTemplate\", \"k-footer-template k-table-row\");\n            }\n\n            if (groups && grep(columnLeafs, function(column) { return column.groupFooterTemplate; }).length) {\n                aggregates = $.map(groups, function(g) { return g.aggregates; });\n\n                that.groupFooterTemplate = that._footerTmpl(columns, aggregates, \"groupFooterTemplate\", \"k-group-footer k-table-row\", columnsLocked.length);\n\n                if (options.scrollable && columnsLocked.length) {\n                    that.lockedGroupFooterTemplate = that._footerTmpl(columnsLocked, aggregates, \"groupFooterTemplate\", \"k-group-footer k-table-row\");\n                }\n            }\n\n            if (groups && (groupHeaderColumnTemplateLockedColumns.length || groupHeaderColumnTemplateNonLockedColumns.length)) {\n                aggregates = $.map(groups, function(g) { return g.aggregates; });\n\n                that.groupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columns), aggregates, \"groupHeaderColumnTemplate\", \"k-table-group-row k-grouping-row k-table-row\", columnsLocked.length, groupHeaderColumnTemplateNonLockedColumns);\n\n                if (options.scrollable && columnsLocked.length) {\n                    that.lockedGroupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columnsLocked), aggregates, \"groupHeaderColumnTemplate\", \"k-table-group-row k-grouping-row k-table-row\", 0, groupHeaderColumnTemplateLockedColumns);\n                }\n            } else {\n                that.groupHeaderColumnTemplate = null;\n                that.lockedGroupHeaderColumnTemplate = null;\n            }\n\n            if (that.options.noRecords) {\n                that.noRecordsTemplate = that._noRecordsTmpl();\n            }\n        },\n\n        _noRecordsTmpl: function() {\n            var wrapper = '<div class=\"{0}\">{1}</div>';\n            var defaultTemplate = '<div class=\"k-grid-norecords-template\"{1}>{0}</div>';\n            var scrollableNoGridHeightStyles = (this.options.scrollable && !this.wrapper[0].style.height) ? ` ${kendo.attr(\"style-margin\")}=\"0 auto\" ${kendo.attr(\"style-position\")}=\"static\"` : '';\n            var state = { storage: {}, count: 0 };\n            var settings = $.extend({}, kendo.Template, this.options.templateSettings);\n            var paramName = settings.paramName;\n            var template;\n            // var html = \"\";\n            var type;\n            var tmpl;\n            let resultTemplate;\n\n            if (this.options.noRecords.template) {\n                template = this.options.noRecords.template;\n            } else {\n                template = kendo.format(defaultTemplate, this.options.messages.noRecords, scrollableNoGridHeightStyles);\n            }\n\n            type = typeof template;\n            if (type === \"function\") {\n                let currentCustomTemplate = state.storage[\"tmpl\" + state.count] = template;\n                state.count++;\n                resultTemplate = (data) => kendo.format(wrapper, NORECORDSCLASS, currentCustomTemplate(data));\n\n            } else if (type === \"string\") {\n                resultTemplate = this.options.noRecords.template ?\n                    kendo.format(wrapper, NORECORDSCLASS, template)\n                    : () => kendo.format(wrapper, NORECORDSCLASS, template);\n            }\n\n            tmpl = kendo.template(resultTemplate, settings);\n\n            if (state.count > 0) {\n                tmpl = tmpl.bind(state.storage);\n            }\n\n            return tmpl;\n        },\n\n        _footerTmpl: function(columns, aggregates, templateName, rowClass, skipGroupCells) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                // html = \"\",\n                idx,\n                length,\n                template,\n                type,\n                storage = {},\n                count = 0,\n                scope = {},\n                groups = that._groups(),\n                fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                column;\n\n            let footerTemplateFunction = (data) => {\n                let html = '<tr class=\"' + rowClass + '\">';\n\n                if (groups > 0 && !skipGroupCells) {\n                    html += groupCells(groups);\n                }\n\n                if (that._hasDetails()) {\n                    html += '<td class=\"k-hierarchy-cell k-table-td\">&nbsp;</td>';\n                }\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    template = column[templateName];\n                    type = typeof template;\n\n                    html += decorateCellWithClass(\"<td\" + stringifyAttributes(column.footerAttributes) + \">\");\n\n                    if (template) {\n                        if (type !== FUNCTION) {\n                            scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + \"['\" + column.field + \"']\" }) : {};\n                            template = kendo.template(template, scope);\n                        }\n\n                        storage[\"tmpl\" + count] = template;\n                        html += template(data);\n                        count++;\n                    } else {\n                        html += \"&nbsp;\";\n                    }\n\n                    html += \"</td>\";\n                }\n\n                html += '</tr>';\n                return html;\n            };\n\n            let resultTemplate = kendo.template(footerTemplateFunction, settings);\n\n            if (count > 0) {\n                return resultTemplate.bind(storage);\n            }\n\n            return resultTemplate;\n        },\n\n        _groupHeaderTmpl: function(columns, aggregates, templateName, rowClass, skipGroupCells, groupHeaderColumnTemplateColumns) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                html = \"\",\n                idx,\n                length,\n                template,\n                type,\n                storage = {},\n                count = 0,\n                scope = {},\n                fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                column,\n                headerTemplateIndex = groupHeaderColumnTemplateColumns.length ? inArray(groupHeaderColumnTemplateColumns[0], columns) : -1,\n                groupHeaderColumnTemplateClass;\n\n            if (headerTemplateIndex < 0) {\n                return;\n            }\n            var groupHeaderTemplFunc = (data) => {\n                var resultHtml = '<tr data-group-uid=\"' + data.uid + '\" class=\"' + rowClass + '\">';\n\n                if (!skipGroupCells) {\n                    for (var i = 0; i < data.groupCells; i++) {\n                        resultHtml += '<td class=\"k-table-td k-group-cell\">&nbsp;</td>';\n                    }\n                }\n\n                if (that._hasDetails()) {\n                    resultHtml += '<td class=\"k-table-td k-hierarchy-cell\">&nbsp;</td>';\n                }\n\n                if (headerTemplateIndex < MINCOLSPANVALUE && groupHeaderColumnTemplateColumns.length <= 1 && !skipGroupCells) {\n                    resultHtml += !skipGroupCells ? groupCellBuilder(columns.length)(data) : '';\n                    return resultHtml;\n                    // return kendo.template(resultHtml, settings);\n                }\n\n                if (headerTemplateIndex < MINCOLSPANVALUE) {\n                    headerTemplateIndex = !skipGroupCells ? 1 : 0;\n                    resultHtml += !skipGroupCells ? groupCellBuilder(headerTemplateIndex)(data) : '';\n                }\n                else {\n                    resultHtml += !skipGroupCells ? groupCellBuilder(headerTemplateIndex)(data) : groupCellLockedContentBuilder(headerTemplateIndex);\n                }\n\n                for (idx = headerTemplateIndex, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    template = column[templateName];\n                    type = typeof template;\n\n                    if (column.sticky) {\n                        let stickyAttributes = '';\n                        groupHeaderColumnTemplateClass = (column.groupHeaderColumnTemplateClass || '');\n\n                        if (!groupHeaderColumnTemplateClass) {\n                            groupHeaderColumnTemplateClass = column.groupHeaderColumnTemplateClass = \"group-header-column-template-\" + kendo.guid();\n                        }\n\n                        if (isPlainObject(column.stickyStyle)) {\n                            let stickyLeft = column.stickyStyle.left ? `${kendo.attr(\"style-left\")}=\"${column.stickyStyle.left}\"` : '';\n                            let stickyRight = column.stickyStyle.right ? `${kendo.attr(\"style-right\")}=\"${column.stickyStyle.right}\"` : '';\n                            stickyAttributes = `${stickyLeft} ${stickyRight}`;\n                        }\n\n                        resultHtml += `<td class=\"k-table-td ${STICKY_CELL_CLASS} ${groupHeaderColumnTemplateClass}\" ${stickyAttributes}>`;\n                    } else {\n                        resultHtml += \"<td class='k-table-td'>\";\n                    }\n\n                    if (template) {\n                        if (type !== FUNCTION) {\n                            scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + \"['\" + column.field + \"']\" }) : {};\n                            template = kendo.template(template, scope);\n                        }\n\n                        storage[\"tmpl\" + count] = template;\n                        resultHtml += storage[\"tmpl\" + count](data);\n                        count++;\n                    } else {\n                        resultHtml += \"&nbsp;\";\n                    }\n\n                    resultHtml += \"</td>\";\n                }\n\n                resultHtml += '</tr>';\n\n                return resultHtml;\n            };\n\n            html = kendo.template(groupHeaderTemplFunc, settings);\n\n            if (count > 0) {\n                return html.bind(storage);\n            }\n\n            return html;\n        },\n\n        _detailTmpl: function(template) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                templateFunctionStorage = {},\n                templateFunctionCount = 0,\n                groups = that._groups(),\n                colspan = visibleColumns(leafColumns(that.columns)).length,\n                type = typeof template;\n\n            let detailTemplateFunction = (data) => {\n                let html = '<tr role=\"row\" class=\"k-detail-row k-table-row\">';\n                if (groups > 0) {\n                    html += groupCells(groups);\n                }\n\n                html += `<td role=\"gridcell\" class=\"k-hierarchy-cell k-table-td\"></td><td role=\"gridcell\" class=\"k-table-td k-detail-cell\"${colspan ? ` colspan=\"${colspan}\"` : ''}>`;\n                if (type === FUNCTION) {\n                    templateFunctionStorage[\"tmpl\" + templateFunctionCount] = template;\n                    html += template(data);\n                    templateFunctionCount++;\n                } else {\n                    html += kendo.template(template, settings)(data);\n                }\n\n                html += \"</td></tr>\";\n                return html;\n            };\n\n            let resultTemplate = kendo.template(detailTemplateFunction, settings);\n\n            if (templateFunctionCount > 0) {\n                return resultTemplate.bind(templateFunctionStorage);\n            }\n\n            return resultTemplate;\n        },\n\n        _hasDetails: function() {\n            var that = this;\n\n            return that.options.detailTemplate !== null || (that._events[DETAILINIT] || []).length;\n        },\n        _hasFilterRow: function() {\n            var filterable = this.options.filterable;\n            var hasFiltering = filterable &&\n                    typeof filterable.mode == STRING &&\n                    filterable.mode.indexOf(ROW) != -1;\n            var columns = this.columns;\n            var columnsWithoutFiltering = $.grep(columns, function(col) {\n                return col.filterable === false;\n            });\n\n            if (columns.length && columnsWithoutFiltering.length == columns.length) {\n                hasFiltering = false;\n            }\n\n            return hasFiltering;\n        },\n\n        _details: function() {\n            var that = this;\n\n            if (that.options.scrollable && that._hasDetails() && lockedColumns(that.columns).length) {\n                throw new Error(\"Having both detail template and locked columns is not supported\");\n            }\n\n            that.table.on(CLICK + NS, \".k-hierarchy-cell \" + CARET_ALT_RIGHT + \", .k-hierarchy-cell \" + CARET_ALT_DOWN, function(e) {\n                var button = $(this);\n\n                that._toggleDetails(button);\n                e.preventDefault();\n                return false;\n            });\n        },\n\n        _toggleDetails: function(button, omitAnimation) {\n            var that = this,\n            cell = button.closest(\"td.k-hierarchy-cell\"),\n            expanding = button.is(CARET_ALT_RIGHT),\n            masterRow = button.closest(\"tr.k-master-row\"),\n            masterRowIndex = masterRow.attr(ARIA_ROWINDEX),\n            detailRow,\n            detailTemplate = that.detailTemplate,\n            data,\n            hasDetails = that._hasDetails(),\n            ariaLabelText = expanding ? COLLAPSE : EXPAND,\n            ariaExpandText = expanding ? true : false;\n\n            if (!expanding) {\n                kendo.ui.icon(button, { icon: `caret-alt-${isRtl ? 'left' : 'right'}` });\n            } else {\n                kendo.ui.icon(button, { icon: \"caret-alt-down\" });\n            }\n\n            button.attr(ARIA_LABEL, ariaLabelText);\n\n            cell.attr(ARIA_EXPANDED, ariaExpandText);\n\n            detailRow = masterRow.next();\n\n            if (detailRow.hasClass(\"k-hidden\")) {\n                detailRow.removeClass(\"k-hidden\");\n            }\n\n            if (hasDetails && !detailRow.hasClass(\"k-detail-row\")) {\n                data = that.dataItem(masterRow);\n\n                detailRow = $(detailTemplate(data))\n                    .addClass(masterRow.hasClass(\"k-alt\") ? \"k-alt\" : \"\")\n                    .insertAfter(masterRow);\n\n                if (masterRowIndex || masterRowIndex === 0) {\n                    detailRow.attr(ARIA_ROWINDEX, Number(masterRowIndex) + 1);\n                }\n\n                that.trigger(DETAILINIT, { masterRow: masterRow, detailRow: detailRow, data: data, detailCell: detailRow.find(\".k-detail-cell\") });\n            }\n\n            that.trigger(expanding ? DETAILEXPAND : DETAILCOLLAPSE, { masterRow: masterRow, detailRow: detailRow });\n\n            if (omitAnimation) {\n                toggleRow(detailRow, expanding);\n            } else {\n                detailRow.toggle(expanding);\n            }\n        },\n\n        dataItem: function(tr) {\n            tr = $(tr)[0];\n            if (!tr) {\n                return null;\n            }\n\n            var rows = this.tbody.children(),\n                classesRegEx = /k-grouping-row|k-detail-row|k-group-footer/,\n                idx = tr.sectionRowIndex,\n                j, correctIdx;\n\n            correctIdx = idx;\n\n            for (j = 0; j < idx; j++) {\n                if (classesRegEx.test(rows[j].className)) {\n                    correctIdx--;\n                }\n            }\n\n            return this._data[correctIdx];\n        },\n\n        expandRow: function(tr, omitAnimation) {\n            var button = $(tr).find('> td ' + CARET_ALT_RIGHT);\n\n            if (button.length) {\n                this._toggleDetails(button, omitAnimation);\n            }\n        },\n\n        collapseRow: function(tr, omitAnimation) {\n            var button = $(tr).find('> td ' + CARET_ALT_DOWN);\n\n            if (button.length) {\n                this._toggleDetails(button, omitAnimation);\n            }\n        },\n\n        _createHeaderCells: function(columns, rowSpan) {\n            var that = this,\n                idx,\n                th,\n                text,\n                html = \"\",\n                length,\n                title,\n                columnMenu = that.options.columnMenu,\n                sortable = that.options.sortable,\n                filterable = that._hasFilterMenu(),\n                messages = that.options.messages,\n                leafs = leafColumns(that.columns),\n                groups = that.dataSource.group(),\n                field;\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                th = columns[idx].column || columns[idx];\n                text = that._headerCellText(th);\n                title = th.title;\n                field = \"\";\n\n                let index = inArray(th, leafs);\n                let currentTh = \"\";\n\n                if (th.selectable) {\n                    currentTh += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        currentTh += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (index > -1) {\n                        currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n                    text = th.headerTemplate ? text : kendo.template(SELECTCOLUMNHEADERTMPL)({ size: kendo.getValidCssClass(\"k-checkbox-\", \"size\", that.options.size) });\n                    currentTh += \">\" + text + \"</th>\";\n                } else if (th.draggable) {\n                    currentTh += \"<th class='k-header k-drag-cell' scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        currentTh += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (index > -1) {\n                        currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n                    text = th.headerTemplate ? text : \"\";\n                    currentTh += \">\" + text + \"</th>\";\n                } else if (th.command) {\n                    currentTh += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        currentTh += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (index > -1) {\n                        currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n\n                    currentTh += \">\" + ((!text || text === \"&nbsp;\") ? text : kendo.template(DEFAULTHEADERTEMPLATE)({ text: text })) + \"</th>\";\n                } else {\n                    if (th.field) {\n                        field = kendo.attr(\"field\") + \"='\" + th.field + \"' \";\n                    }\n\n                    currentTh += \"<th scope='col' \" + field;\n                    if ((columnMenu && th.field && th.menu !== false)) {\n                        currentTh += \" aria-haspopup='menu'\";\n                    } else if (filterable && th.filterable !== false && !th.command) {\n                        currentTh += \" aria-haspopup='dialog'\";\n                    }\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        currentTh += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (columns[idx].colSpan > 1) {\n                        currentTh += 'colspan=\"' + (columns[idx].colSpan - hiddenLeafColumnsCount(th.columns)) + '\" ';\n                        currentTh += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                    } else if (columns[idx].colSpan === 1) {\n                        currentTh += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                    }\n\n                    if (title) {\n                        title = title && (that.options.encodeTitles ? htmlEncode(title, true) : title);\n                        currentTh += kendo.attr(\"title\") + '=\"' + title + '\" ';\n                    }\n\n                    if (th.groupable !== undefined$1) {\n                        currentTh += kendo.attr(\"groupable\") + \"='\" + th.groupable + \"' \";\n                    }\n\n                    if (isColumnGroupable(that, th) && (!th.headerAttributes || !th.headerAttributes.title)) {\n                        currentTh += \"title='\";\n                        currentTh += isGroupedBy(groups, th.field) ? messages.ungroupHeader : messages.groupHeader;\n                        currentTh += \"' \";\n                    }\n\n                    if (th.aggregates && th.aggregates.length) {\n                        currentTh += kendo.attr(\"aggregates\") + \"='\" + th.aggregates + \"'\";\n                    }\n\n                    if (index > -1) {\n                        currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n\n                    currentTh += stringifyAttributes(th.headerAttributes);\n\n                    text = kendo.template(DEFAULTHEADERTEMPLATE)({ text: text });\n\n                    currentTh += \">\" + text + \"</th>\";\n                }\n                html += $(currentTh).addClass(\"k-table-th\")[0].outerHTML;\n            }\n            return html;\n        },\n\n        _appendLockedColumnContent: function() {\n            var columns = this.columns,\n                idx,\n                colgroup = this.table.find(\"colgroup\"),\n                cols = colgroup.find(COLGROUP),\n                length,\n                lockedCols = $(),\n                skipHiddenCount = 0,\n                container,\n                colSpan,\n                spanIdx,\n                colOffset = 0;\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                if (columns[idx].locked) {\n\n                    if (isVisible(columns[idx])) {\n                        colSpan = 1;\n\n                        if (columns[idx].columns) {\n                            colSpan = leafColumns(columns[idx].columns).length - hiddenLeafColumnsCount(columns[idx].columns);\n                        }\n\n                        colSpan = colSpan || 1;\n                        for (spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                            lockedCols = lockedCols.add(cols.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                        }\n                        colOffset += colSpan - 1;\n                    } else {\n                        skipHiddenCount ++;\n                    }\n                }\n            }\n\n            container = $('<div class=\"k-grid-content-locked\"><table class=\"k-grid-table k-table\"><colgroup></colgroup><tbody class=\"k-table-tbody\"></tbody></table></div>');\n            // detach is required for IE8, otherwise it switches to compatibility mode\n            colgroup.detach();\n            container.find(\"colgroup\").append(lockedCols);\n            colgroup.insertBefore(this.table.find(\"tbody\"));\n\n            this.lockedContent = container.insertBefore(this.content);\n            this.lockedTable = container.children(\"table\");\n            this.lockedTable.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", this.options.size));\n        },\n\n        _appendLockedColumnFooter: function() {\n            var that = this;\n            var footer = that.footer;\n            var cells = footer.find(\".k-footer-template>td\");\n            var cols = footer.find(\".k-grid-footer-wrap>table>colgroup>col\");\n            var html = $('<div class=\"k-grid-footer-locked\"><table class=\"k-grid-footer-table k-table\"><colgroup></colgroup><tfoot class=\"k-table-tfoot\"><tr class=\"k-footer-template k-table-row\"></tr></tfoot></table></div>');\n            var idx, length;\n            var groups = that._groups();\n            var lockedCells = $(), lockedCols = $();\n\n            html.find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", this.options.size));\n\n            lockedCells = lockedCells.add(cells.filter(\".k-group-cell\"));\n            for (idx = 0, length = leafColumns(lockedColumns(that.columns)).length; idx < length; idx++) {\n                lockedCells = lockedCells.add(cells.eq(idx + groups));\n            }\n\n            lockedCols = lockedCols.add(cols.filter(\".k-group-col\"));\n            for (idx = 0, length = visibleColumns(leafColumns(visibleLockedColumns(that.columns))).length; idx < length; idx++) {\n                lockedCols = lockedCols.add(cols.eq(idx + groups));\n            }\n\n            lockedCells.appendTo(html.find(TR));\n            lockedCols.appendTo(html.find(\"colgroup\"));\n            that.lockedFooter = html.prependTo(footer);\n        },\n\n        _appendLockedColumnHeader: function(container) {\n            var that = this,\n                columns = this.columns,\n                idx,\n                html,\n                length,\n                colgroup,\n                tr,\n                trFilter,\n                table,\n                header,\n                filtercellCells,\n                rows = [],\n                skipHiddenCount = 0,\n                cols = $(),\n                hasFilterRow = that._hasFilterRow(),\n                filterCellOffset = 0,\n                filterCells = $(),\n                cell,\n                leafColumnsCount = 0,\n                cells = $();\n\n            colgroup = that.thead.prev().find(COLGROUP);\n            header = that.thead.find(TR).first().find(\".k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n            filtercellCells = that.thead.find(\".k-filter-row\").find(\"td:not(.k-group-cell,.k-hierarchy-cell)\");\n\n            var colOffset = 0;\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                if (columns[idx].locked) {\n                    cell = header.eq(idx);\n                    leafColumnsCount = leafColumns(columns[idx].columns || []).length;\n\n                    if (isVisible(columns[idx])) {\n                        var colSpan = null;\n\n                        if (columns[idx].columns) {\n                            colSpan = leafColumnsCount - hiddenLeafColumnsCount(columns[idx].columns);\n                        }\n\n                        colSpan = colSpan || 1;\n                        for (var spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                            cols = cols.add(colgroup.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                        }\n                        colOffset += colSpan - 1;\n                    }\n\n                    mapColumnToCellRows([columns[idx]], childColumnsCells(cell), rows, 0, 0);\n\n                    leafColumnsCount = leafColumnsCount || 1;\n                    for (var j = 0; j < leafColumnsCount; j++) {\n                        filterCells = filterCells.add(filtercellCells.eq(filterCellOffset + j));\n                    }\n                    filterCellOffset += leafColumnsCount;\n                }\n\n                if (columns[idx].columns) {\n                    skipHiddenCount += hiddenLeafColumnsCount(columns[idx].columns);\n                }\n\n                if (!isVisible(columns[idx])) {\n                    skipHiddenCount++;\n                }\n            }\n\n            if (rows.length) {\n                html = '<div class=\"k-grid-header-locked\"><table class=\"k-grid-header-table k-table\"><colgroup></colgroup><thead class=\"k-table-thead\">';\n                html += new Array(rows.length + 1).join(\"<tr class='k-table-row'></tr>\");\n                html += (hasFilterRow ? '<tr class=\"k-filter-row k-table-row\"></tr>' : '') + '</thead></table></div>';\n\n                table = $(html);\n\n                table.find('.k-grid-header-locked').css('width', '1px');\n\n                table.find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n                colgroup = table.find(\"colgroup\");\n                colgroup.append(that.thead.prev().find(\"col.k-group-col\").add(cols));\n\n                tr = table.find(\"thead tr:not(.k-filter-row)\");\n                for (idx = 0, length = rows.length; idx < length; idx++) {\n                    cells = toJQuery(rows[idx]);\n                    tr.eq(idx).append(that.thead.find(TR).eq(idx).find(\".k-group-cell\").add(cells));\n                }\n\n                var count = removeEmptyRows(this.thead);\n                if (rows.length < count) {\n                    removeRowSpanValue(table, count - rows.length);\n                }\n\n                trFilter = table.find(\".k-filter-row\");\n                trFilter.append(that.thead.find(\".k-filter-row .k-group-cell\").add(filterCells));\n\n                this.lockedHeader = table.prependTo(container);\n                this.thead.find(\".k-group-cell\").remove();\n\n                return true;\n            }\n            return false;\n        },\n\n        _removeLockedContainers: function() {\n            var elements = this.lockedHeader\n                .add(this.lockedContent)\n                .add(this.lockedFooter);\n\n            kendo.destroy(elements);\n            elements.off(NS).remove();\n\n            this.lockedHeader = this.lockedContent = this.lockedFooter = null;\n            this.selectable = null;\n        },\n\n        _thead: function() {\n            var that = this,\n                columns = that.columns,\n                hasDetails = that._hasDetails() && columns.length,\n                hasFilterRow = that._hasFilterRow(),\n                idx,\n                html = \"\",\n                thead = that.table.find(\">thead\"),\n                hasTHead = that.element.find(\"thead\").first().length > 0,\n                headerContent = that.options.messages.expandCollapseColumnHeader,\n                tr;\n\n            if (!thead.length) {\n                thead = $(\"<thead/>\").insertBefore(that.tbody);\n            }\n\n            thead.addClass(\"k-table-thead\").attr(\"role\", \"rowgroup\");\n\n            if (that.lockedHeader && that.thead) {\n                tr = that.thead.find(\"tr:has(th):not(.k-filter-row)\").html(\"\");\n                tr.remove();\n                tr = $();\n\n                that._removeLockedContainers();\n            } else if (hasTHead) {\n                tr = that.element.find(\"thead\").first().find(\"tr:has(th):not(.k-filter-row)\");\n            } else {\n                tr = that.element.find(\"tr:has(th)\").first();\n            }\n\n            if (!tr.length) {\n                tr = thead.children().first();\n                if (!tr.length) {\n                   var rows = [{ rowSpan: 1, cells: [], index: 0 }];\n                   that._prepareColumns(rows, columns);\n\n                   for (idx = 0; idx < rows.length; idx++) {\n                       html += \"<tr class='k-table-row'>\";\n                       if (hasDetails) {\n                           html += '<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">' + headerContent + '</th>';\n                       }\n                       html += that._createHeaderCells(rows[idx].cells, rows[idx].rowSpan);\n                       html += \"</tr>\";\n                   }\n\n                   tr = $(html);\n                   kendo.applyStylesFromKendoAttributes(tr, [\"display\", \"left\", \"right\"]);\n                }\n            } else {\n                for (idx = 0; idx < columns.length; idx++) {\n\t\t\t\t\tvar columnIndex = inArray(columns[idx], leafColumns(columns));\n\t\t\t\t\tvar cell = leafDataCells(tr.parent()).filter(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(columnIndex);\n                    cell.addClass(\"k-table-th\");\n\t\t\t\t\tif (columns[idx].hidden && columnIndex >= 0) {\n\t\t\t\t\t\tcell[0].style.display = NONE;\n\t\t\t\t\t}\n               }\n\n               that._updateHeadersAttr(childColumns(columns));\n\t\t\t}\n\n            if (hasFilterRow) {\n                var filterRow = $(\"<tr/>\");\n                filterRow.addClass(\"k-filter-row k-table-row\");\n                if (hasDetails || tr.find(\".k-hierarchy-cell\").length) { // handles server side detail template\n                    filterRow.prepend('<td class=\"k-table-td k-hierarchy-cell\">&nbsp;</td>');\n                }\n\n                var existingFilterRow = (that.thead || thead).find(\".k-filter-row\");\n                if (existingFilterRow.length) {\n                    kendo.destroy(existingFilterRow);\n                    existingFilterRow.remove();\n                }\n\n                thead.append(filterRow);\n            }\n\n            if (!tr.children().length) {\n                html = \"\";\n                if (hasDetails) {\n                    html += '<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">&nbsp;</th>';\n                }\n\n                html += that._createHeaderCells(columns);\n\n                tr.html(html);\n            } else if (hasDetails && !tr.find(\".k-hierarchy-cell\")[0]) {\n                tr.prepend('<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">' + (headerContent ? headerContent : '&nbsp;') + '</th>');\n            }\n\n            tr.find(\"th\").addClass(HEADER_CLASS);\n\n            if (!that.options.scrollable) {\n                thead.addClass(\"k-grid-header\");\n            }\n\n            tr.find(\"script\").remove().end().prependTo(thead);\n\n            if (that.thead) {\n                that._destroyColumnAttachments();\n            }\n\n            that.thead = thead;\n\n            that._sortable();\n\n            that._filterable();\n\n            that._filterRow();\n\n            that._scrollable();\n\n            that._columnMenu();\n\n            var syncHeight;\n            var hasLockedColumns = this.options.scrollable && lockedColumns(this.columns).length;\n\n            if (hasLockedColumns) {\n\n                syncHeight = that._appendLockedColumnHeader(that.thead.closest(\".k-grid-header\"));\n\n                that._appendLockedColumnContent();\n\n                that.lockedContent.on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n\n                if (kendo.support.touch) {\n                    that._lockedContentUserEvents = new kendo.UserEvents(that.lockedContent, {\n                        move: function(e) {\n                            that.content.scrollTop(that.content.scrollTop() + (-e.y.delta));\n                            e.preventDefault();\n                        }\n                    });\n                }\n\n                that._updateLockedCols();\n            }\n\n            that._updateCols();\n\n            that._updateColumnCellIndex();\n\n            that._updateFirstColumnClass();\n\n            that._resizable();\n\n            that._draggable();\n\n            that._reorderable();\n\n            that._updateHeader(that._groups());\n\n            that._updateStickyColumns();\n\n            if (hasLockedColumns) {\n                if (syncHeight) {\n                    that._syncLockedHeaderHeight();\n                }\n\n                that._applyLockedContainersWidth();\n            }\n        },\n\n        _retrieveFirstColumn: function(columns, rows) {\n            var result = $();\n\n            if (rows.length && columns[0]) {\n                var column = columns[0];\n\n                while (column.columns && column.columns.length) {\n                    column = column.columns[0];\n                    rows = rows.filter(\":not(:first)\");\n                }\n\n                result = result.add(rows);\n            }\n\n            return result;\n        },\n\n        _updateFirstColumnClass: function() {\n            var that = this,\n                columns = that.columns || [],\n                hasDetails = that._hasDetails() && columns.length;\n\n            if (!hasDetails && !that._groups()) {\n                var tr = that.thead.find(\">tr:not(.k-filter-row):not(:first)\");\n                columns = nonLockedColumns(columns);\n\n                var rows = that._retrieveFirstColumn(columns, tr);\n\n                if (that._isLocked()) {\n                    tr = that.lockedHeader.find(\"thead>tr:not(.k-filter-row):not(:first)\");\n                    columns = lockedColumns(that.columns);\n\n                    rows = rows.add(that._retrieveFirstColumn(columns, tr));\n                }\n\n                rows.each(function() {\n                    var ths = $(this).find(\"th\");\n                    ths.removeClass(\"k-first\");\n                    ths.eq(0).addClass(\"k-first\");\n                });\n            }\n        },\n\n        _prepareColumns: function(rows, columns, parentCell, parentRow) {\n            var row = parentRow || rows[rows.length - 1];\n\n            var childRow = rows[row.index + 1];\n            var totalColSpan = 0;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                var cell = { column: columns[idx], colSpan: 0 };\n                row.cells.push(cell);\n\n                if (columns[idx].columns && columns[idx].columns.length) {\n                    if (!childRow) {\n                        childRow = { rowSpan: 0, cells: [], index: rows.length };\n                        rows.push(childRow);\n                    }\n                    cell.colSpan = columns[idx].columns.length;\n                    this._prepareColumns(rows, columns[idx].columns, cell, childRow);\n                    totalColSpan += cell.colSpan - 1;\n                    row.rowSpan = rows.length - row.index;\n                }\n            }\n            if (parentCell) {\n                parentCell.colSpan += totalColSpan;\n            }\n        },\n\n        _wheelScroll: function(e) {\n            if (e.ctrlKey) {\n                return;\n            }\n\n            var content = this.content;\n\n            if (this.virtualScroll && this.virtualScroll.rows) {\n                content = this.virtualScrollable.verticalScrollbar;\n            }\n\n            var scrollTop = content.scrollTop(),\n                delta = kendo.wheelDeltaY(e);\n\n            if (delta) {\n                if (content[0].scrollHeight > content[0].clientHeight &&\n                    (content[0].scrollTop < content[0].scrollHeight - content[0].clientHeight && delta < 0 ||\n                    content[0].scrollTop > 0 && delta > 0)) {\n                    e.preventDefault();\n                }\n\n                content.scrollTop(scrollTop + (-delta));\n            }\n        },\n\n        _isLocked: function() {\n            return this.lockedHeader != null;\n        },\n\n        _updateHeaderCols: function() {\n            var table = this.thead.parent().add(this.table);\n\n            if (this._isLocked()) {\n                normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n            } else {\n                normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), 0);\n            }\n        },\n\n        _updateColumnSorters: function() {\n            var that = this;\n            var cells = leafDataCells(that.thead);\n            var columns = leafColumns(that.columns);\n            var column;\n            var cell;\n            var sorterInstance;\n\n            if (!that.options.sortable) {\n                return;\n            }\n\n            for (var idx = 0, length = cells.length; idx < length; idx++) {\n                column = columns[idx];\n\n                if (column.sortable !== false && !column.command && column.field) {\n                    cell = cells.eq(idx);\n\n                    sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                    if (sorterInstance) {\n                        sorterInstance.refresh();\n                    }\n                }\n            }\n        },\n\n        _updateHeadersAttr: function(columns) {\n            if (!columns.length) {\n                return;\n            }\n\n            var that = this;\n\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].headerAttributes) {\n                    var th = that.element.find(\"[id='\" + columns[i].headerAttributes.id + \"']\");\n                    th.attr(\"headers\", columns[i].headerAttributes.headers);\n                }\n            }\n\n            that._updateHeadersAttr(childColumns(columns));\n        },\n\n        _updateCols: function(table) {\n            table = table || this.thead.parent().add(this.table);\n\n            this._appendCols(table, this._isLocked());\n        },\n\n        _updateLockedCols: function(table) {\n            if (this._isLocked()) {\n                table = table || this.lockedHeader.find(\"table\").add(this.lockedTable);\n\n                normalizeCols(table, visibleLeafColumns(visibleLockedColumns(this.columns)), this._hasDetails(), this._groups());\n            }\n        },\n\n        _appendCols: function(table, locked) {\n            if (locked) {\n                normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0, this.options.resizable);\n            } else {\n                normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), this._groups(), this.options.resizable);\n            }\n        },\n\n        _autoColumns: function(schema) {\n            if (schema && schema.toJSON) {\n                var that = this,\n                    field,\n                    encoded;\n\n                schema = schema.toJSON();\n\n                encoded = !(that.table.find(\"tbody tr\").length > 0 && (!that.dataSource || !that.dataSource.transport));\n\n                for (field in schema) {\n                    that.columns.push({ field: field, encoded: encoded, headerAttributes: { id: kendo.guid() } });\n                }\n\n                that._thead();\n\n                that._templates();\n            }\n        },\n\n        _setRowCachedHeight: function(row, uid) {\n            var cachedHeights = this._cachedRowsHeight,\n                cachedHeight = cachedHeights[uid],\n                $row;\n\n            if (cachedHeight) {\n                $row = $(row);\n                $row[0].style.height = cachedHeight + \"px\";\n                row = $row.prop(\"outerHTML\");\n            }\n\n            return row;\n        },\n\n        _rowsHtml: function(data, templates) {\n            var that = this,\n                html = \"\",\n                idx,\n                rowTemplate = templates.rowTemplate,\n                altRowTemplate = templates.altRowTemplate,\n                cachedHeights = that._cachedRowsHeight,\n                length, row;\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if (that._skipRerenderItemsCount > 0) {\n                    that._skipRerenderItemsCount--;\n                } else {\n                    if (idx % 2) {\n                        row = altRowTemplate(data[idx]);\n                    } else {\n                        row = rowTemplate(data[idx]);\n                    }\n\n                    if (cachedHeights) {\n                        row = that._setRowCachedHeight(row, data[idx].uid);\n                    }\n\n                    html += row;\n                }\n                that._data.push(data[idx]);\n            }\n\n            return html;\n        },\n\n        _groupData: function(group, skipFooter, firstColumn) {\n            var that = this,\n                footerDefaults = that._groupAggregatesDefaultObject || {},\n                groupItems = group.items,\n                aggregates = extend({}, footerDefaults, group.aggregates),\n                headerData = extend({}, {\n                    field: group.field,\n                    value: group.value,\n                    items: groupItems,\n                    aggregates: aggregates\n                }, group.aggregates[firstColumn ? firstColumn.field : group.field]),\n                footerData = {};\n\n            if (!skipFooter) {\n                for (var aggregate in aggregates) {\n                    footerData[aggregate] = extend({}, aggregates[aggregate],\n                        { group: { field: group.field, value: group.value, items: groupItems } }\n                    );\n                }\n            }\n            return extend({}, footerData, headerData);\n        },\n\n        _removeGroupIfEmpty: function(row) {\n            var that = this,\n                itemsCount,\n                subgroupsCount,\n                length = that.dataSource._group.length;\n\n            for (var i = 0; i < length; i++) {\n                row = row.prev();\n                itemsCount = +row.attr('data-group-item-count');\n                subgroupsCount = +row.attr('data-sub-group-count');\n\n                if (itemsCount == 1 || subgroupsCount == 1) {\n                    row.hide();\n                }\n\n            }\n        },\n\n        _groupRowHtml: function(group, colspan, level, groupHeaderBuilder, templates, skipColspan, skipLastGroup, isLockedTable) {\n            var that = this,\n                html = \"\",\n                idx,\n                length,\n                isLocked = that.lockedContent != null,\n                field = group.field,\n                column = grep(leafColumns(that.columns), function(column) { return column.field == field; })[0] || { },\n                firstColumn = visibleColumns(that.columns)[0],\n                firstVisibleColumnGroupHeaderTemplate = firstColumn ? firstColumn.groupHeaderColumnTemplate : null,\n                template = column.groupHeaderTemplate ? column.groupHeaderTemplate : firstVisibleColumnGroupHeaderTemplate,\n                text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded),\n                groupItems = group.currentItems || group.items,\n                groups = that._groups(),\n                groupFooterTemplate = templates.groupFooterTemplate,\n                groupHeaderColumnTemplate = templates.groupHeaderColumnTemplate,\n                groupData,\n                isGroupPaged = that.dataSource._isGroupPaged(),\n                expanded = isGroupPaged ? that.dataSource._groupsState[group.uid] : true;\n\n            if (that.options.editable && group.items && group.items[0] && group.items[0].isNew && group.items[0].isNew()) {\n                expanded = true;\n            }\n\n            if (templates.groupFooterTemplate || templates.groupHeaderColumnTemplate || column.groupHeaderTemplate) {\n                groupData = that._groupData(group, false, !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false);\n            }\n            if (template && !skipColspan) {\n                text = typeof template === FUNCTION ? template(groupData) : kendo.template(template)(groupData);\n            }\n\n            if (!that._skipRerenderItemsCount) {\n                if (!group.excludeHeader) {\n                    html += groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, groups - level, groupData, level, text, expanded, group, isGroupPaged);\n                } else if (isLocked) {\n                    group.excludeHeader = isLockedTable ? false : true;\n                } else {\n                    group.excludeHeader = false;\n                }\n            } else {\n                groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged);\n            }\n\n            if (expanded) {\n                if (group.hasSubgroups) {\n                    for (idx = 0, length = groupItems.length; idx < length; idx++) {\n                        html += that._groupRowHtml(groupItems[idx], skipColspan ? colspan : colspan - 1, level + 1, groupHeaderBuilder, templates, skipColspan, skipLastGroup && idx === groupItems.length - 1, isLockedTable);\n                    }\n                } else {\n                    html += that._rowsHtml(groupItems, templates);\n                }\n            }\n\n            if (groupFooterTemplate) {\n\n                if (skipLastGroup) {\n                    if (!inArray(group.value, that._skippedGroups)) {\n                        that._skippedGroups.push(group.value);\n                    }\n                } else {\n                    if (that._skippedGroups.length && that._skippedGroups[0] === group.value) {\n                        that._skippedGroups.shift();\n                    }\n                    if (!that._skipRerenderItemsCount) {\n                        html += groupFooterTemplate(groupData);\n                    }\n                }\n            }\n            return html;\n        },\n\n        collapseGroup: function(group) {\n            var level,\n                that = this,\n                groupToCollapse = group,\n                groupable = this.options.groupable,\n                showFooter = groupable.showFooter,\n                footerCount = showFooter ? 0 : 1,\n                offset,\n                relatedGroup = $(),\n                idx,\n                length,\n                tr;\n\n            group = $(group);\n            level = group.find(\".k-group-cell\").length;\n\n            if (this.dataSource._isGroupPaged()) {\n                var groupUid = group.attr(\"data-group-uid\");\n                var groupObject = that.dataSource._getGroupByUid(groupUid);\n                var currentGroupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                var groupCountAfterCollapse;\n\n                that.dataSource._groupsState[groupUid] = false;\n                groupCountAfterCollapse = that.dataSource._calculateGroupsTotal([groupObject], true);\n                that.dataSource._serverGroupsTotal -= currentGroupCount - groupCountAfterCollapse;\n                that._progress(true);\n                that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function() {\n                    that._progress(false);\n                }, \"collapseGroup\");\n                return;\n            }\n\n            if (this._isLocked()) {\n                if (!group.closest(DIV).hasClass(\"k-grid-content-locked\")) {\n                    relatedGroup = group.nextAll(TR);\n                    group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                } else {\n                    relatedGroup = this.tbody.children(TR).eq(group.index()).nextAll(TR);\n                }\n            }\n\n            if (group.find(CARET_ALT_DOWN).length) {\n                kendo.ui.icon(group.find(CARET_ALT_DOWN), { icon: `caret-alt-${isRtl ? 'left' : 'right'}` });\n            }\n\n            group.find(\"td[aria-expanded='true']\").first().attr(ARIA_EXPANDED, false)\n                .find(\"a\").attr(ARIA_LABEL, EXPAND);\n\n            group = group.nextAll(TR);\n\n            var toHide = [];\n\n            for (idx = 0, length = group.length; idx < length; idx ++ ) {\n                tr = group.eq(idx);\n                offset = tr.find(\".k-group-cell\").length;\n\n                if (tr.hasClass(GROUPING_ROW)) {\n                    footerCount++;\n                } else if (tr.hasClass(\"k-group-footer\")) {\n                    footerCount--;\n                }\n\n                if (offset <= level || (tr.hasClass(\"k-group-footer\") && footerCount < 0)) {\n                    break;\n                }\n\n                if (relatedGroup.length) {\n                    toHide.push(relatedGroup[idx]);\n                }\n                toHide.push(tr[0]);\n            }\n\n            $(toHide).hide();\n\n            if (this.options.scrollable.endless && this.content) {\n                clearTimeout(that._collapseGroupsTimeOut);\n                that._collapseGroupsTimeOut = setTimeout(function() {\n                    that.content.scroll();\n                    that._groupToCollapse = groupToCollapse;\n                });\n            }\n        },\n\n        expandGroup: function(group) {\n                group = $(group);\n\n            var that = this,\n                showFooter = that.options.groupable.showFooter,\n                level,\n                tr,\n                offset,\n                relatedGroup = $(),\n                idx,\n                length,\n                footersVisibility = [],\n                groupsCount = 1;\n\n                level = group.find(\".k-group-cell\").length;\n\n            if (this.dataSource._isGroupPaged()) {\n                var groupUid = group.attr(\"data-group-uid\");\n                var groupObject = that.dataSource._getGroupByUid(groupUid);\n                var groupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                var groupCountAfterExpand;\n\n                that.dataSource._groupsState[groupUid] = true;\n                if (groupObject.items && groupObject.items.length) {\n                    groupCountAfterExpand = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    that.dataSource._serverGroupsTotal += groupCountAfterExpand - groupCount;\n                }\n\n                that._progress(true);\n                that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function() {\n                    that._progress(false);\n                }, \"expandGroup\");\n                return;\n            }\n\n            if (this._isLocked()) {\n                if (!group.closest(DIV).hasClass(\"k-grid-content-locked\")) {\n                    relatedGroup = group.nextAll(TR);\n                    group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                } else {\n                    relatedGroup = this.tbody.children(TR).eq(group.index()).nextAll(TR);\n                }\n            }\n\n            if (group.find(CARET_ALT_RIGHT).length) {\n                kendo.ui.icon(group.find(CARET_ALT_RIGHT), { icon: \"caret-alt-down\" });\n            }\n\n            group.find(\"td[aria-expanded='false']\").first().attr(ARIA_EXPANDED, true)\n                .find(\"a\").attr(ARIA_LABEL, COLLAPSE);\n            group = group.nextAll(TR);\n\n            for (idx = 0, length = group.length; idx < length; idx ++ ) {\n                tr = group.eq(idx);\n                offset = tr.find(\".k-group-cell\").length;\n                if (offset <= level) {\n                    break;\n                }\n\n                if (offset == level + 1 && !tr.hasClass(\"k-detail-row\")) {\n                    tr.show();\n                    relatedGroup.eq(idx).show();\n\n                    if (tr.hasClass(GROUPING_ROW) && tr.find(\".k-icon,.k-svg-icon\").is(CARET_ALT_DOWN)) {\n                        that.expandGroup(tr);\n                    }\n\n                    if (tr.hasClass(\"k-master-row\") && tr.find(\".k-icon,.k-svg-icon\").is(CARET_ALT_DOWN)) {\n                        tr.next().show();\n                        relatedGroup.eq(idx + 1).show();\n                    }\n                }\n\n                if (tr.hasClass(GROUPING_ROW)) {\n                    if (showFooter) {\n                        footersVisibility.push(tr.is(\":visible\"));\n                    }\n                    groupsCount ++;\n                }\n\n                if (tr.hasClass(\"k-group-footer\")) {\n                    if (showFooter) {\n                        var toggleVisibility = footersVisibility.pop();\n                        tr.toggle(toggleVisibility);\n                        relatedGroup.eq(idx).toggle(toggleVisibility);\n                    }\n                    if (groupsCount == 1) {\n                        tr.show();\n                        relatedGroup.eq(idx).show();\n                    } else {\n                        groupsCount --;\n                    }\n                }\n            }\n\n            if ((level === 0 && that.options.scrollable.endless && this._isLocked()) ||\n            (!that.options.scrollable.endless && this._isLocked())) {\n                that._syncLockedContentHeight();\n            }\n        },\n\n        _updateHeader: function(groups) {\n            var that = this,\n                container = that._isLocked() ? that.lockedHeader.find(\"thead\") : that.thead,\n                filterCells = container.find(\"tr.k-filter-row\").find(\"td.k-group-cell\").length,\n                length = container.find(TR).first().find(\"th.k-group-cell\").length,\n                rows = container.children(\"tr:not(:first)\").filter(function() {\n                    return !$(this).children(\":visible\").length;\n                });\n\n            if (groups > length) {\n                $(new Array(groups - length + 1).join('<th class=\"k-group-cell k-header k-table-th\" scope=\"col\">' + encode(that.options.messages.expandCollapseColumnHeader) + '</th>')).prependTo(container.children(\"tr:not(.k-filter-row)\"));\n                if (that.element.is(\":visible\")) {\n                    rows.find(\"th.k-group-cell\").hide();\n                }\n            } else if (groups < length) {\n                container.find(TR).each(function() {\n                    $(this).find(\".k-group-cell\").eq(groups).remove();\n                    $(this).find(\".k-group-cell\").slice(groups).remove();\n                });\n            }\n            if (groups > filterCells) {\n                $(new Array(groups - filterCells + 1).join('<td class=\"k-group-cell k-table-td\">&nbsp;</td>')).prependTo(container.find(\".k-filter-row\"));\n            }\n        },\n\n        _firstDataItem: function(data, grouped) {\n            if (data && grouped) {\n                if (data.hasSubgroups) {\n                    data = this._firstDataItem(data.items[0], grouped);\n                } else {\n                    data = data.items[0];\n                }\n            }\n            return data;\n        },\n\n        _updateTablesWidth: function() {\n            var that = this,\n                tables;\n\n            if (!that._isLocked()) {\n                return;\n            }\n\n            tables =\n                $(\">.k-grid-footer>.k-grid-footer-wrap>table\", that.wrapper)\n                .add(that.thead.parent())\n                .add(that.table);\n\n            that._footerWidth = tableWidth(tables.eq(0));\n            tables.width(that._footerWidth);\n\n            tables =\n                $(\">.k-grid-footer>.k-grid-footer-locked>table\", that.wrapper)\n                .add(that.lockedHeader.find(\">table\"))\n                .add(that.lockedTable);\n\n            tables.width(tableWidth(tables.eq(0)));\n        },\n\n        hideColumn: function(column) {\n            var that = this,\n                cell,\n                tables,\n                idx,\n                cols,\n                colWidth,\n                position,\n                width = 0,\n                headerCellIndex,\n                length,\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                virtualScroll = that.virtualScroll || {},\n                columns = that.columns,\n                visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                columnIndex,\n                groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else if (isPlainObject(column)) {\n                column = grep(flatColumns(columns), function(item) {\n                    return item === column;\n                })[0];\n            } else {\n                column = grep(flatColumns(columns), function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !isVisible(column)) {\n                return;\n            }\n\n            var setColumnVisibility = that._columnVisibilitySetter(column);\n\n            if (column.columns && column.columns.length) {\n                position = columnVisiblePosition(column, columns);\n\n                setColumnVisibility(column, false);\n\n                setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, false);\n\n                for (idx = 0; idx < column.columns.length; idx++) {\n                   this.hideColumn(column.columns[idx]);\n                }\n\n                that._ariaAddHiddenColIndex();\n                that.trigger(COLUMNHIDE, { column: column });\n\n                return;\n            }\n\n            columnIndex = inArray(column, visibleColumns(leafColumns(columns)));\n\n            setColumnVisibility(column, false);\n\n            that._setParentsVisibility(column, false);\n\n            that._templates();\n\n            that._updateCols();\n            that._updateLockedCols();\n\n            var container = that.thead;\n\n            headerCellIndex = columnIndex;\n            if (that.lockedHeader && visibleLocked > columnIndex) {\n                container = that.lockedHeader.find(\">table>thead\");\n            } else {\n                headerCellIndex -= visibleLocked;\n            }\n\n            cell = leafDataCells(container).filter(isCellVisible).eq(headerCellIndex);\n            cell[0].style.display = NONE;\n\n            setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>td\"), columnIndex, false);\n            if (footer[0]) {\n                that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n                that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n                setCellVisibility(footer.find(\".k-footer-template>td\"), columnIndex, false);\n            }\n\n            if (virtualScroll.columns && !column.locked) {\n                that._updateContentWidth();\n                that.trigger(COLUMNHIDE, { column: column });\n                return;\n            }\n\n            if (that.lockedTable && visibleLocked > columnIndex) {\n                hideColumnCells(that.lockedTable.find(\">tbody>tr\"), columnIndex);\n            } else {\n                hideColumnCells(that.tbody.children(), columnIndex - visibleLocked);\n            }\n\n            if (that.lockedTable) {\n                that._updateTablesWidth();\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n                that._syncLockedFooterHeight();\n            } else {\n                cols = that.thead.prev().find(\"col\");\n                for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                    colWidth = cols[idx].style.width;\n\n                    if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                        width += outerWidth(cols[idx]);\n                        continue;\n                    }\n\n                    if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                        width += outerWidth(cols[idx]);\n                        continue;\n                    }\n\n                    if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                        width += parseInt(colWidth, 10);\n                    } else {\n                        width = 0;\n                        break;\n                    }\n                }\n\n                tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                that._footerWidth = null;\n\n                if (width) {\n                    tables.each(function() {\n                        this.style.width = width + PX;\n                    });\n\n                    that._footerWidth = width;\n                    that._setContentWidth();\n                }\n            }\n\n            that._updateFirstColumnClass();\n            that._updateStickyColumns();\n            if (groupHeaderColumnTemplateColumns.length > 0) {\n                that._renderGroupRows();\n            }\n            that._ariaAddHiddenColIndex();\n            that.trigger(COLUMNHIDE, { column: column });\n        },\n\n        _setParentsVisibility: function(column, visible) {\n            var that = this;\n            var columns = that.columns;\n            var idx;\n            var parents = [];\n            var parent;\n            var position;\n            var cell;\n            var colSpan;\n            var setColumnVisibility = that._columnVisibilitySetter(column);\n\n            var predicate = visible ?\n                function(p) { return visibleColumns(p.columns).length && p.hidden; } :\n                function(p) { return !visibleColumns(p.columns).length && !p.hidden; };\n\n\n            if (columnParents(column, columns, parents) && parents.length) {\n                for (idx = parents.length - 1; idx >= 0; idx--) {\n                    parent = parents[idx];\n                    position = columnPosition(parent, columns);\n                    cell = elements($(\">table>thead\", this.lockedHeader), this.thead, \">tr:eq(\" + position.row + \")>th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(position.cell);\n\n                    if (predicate(parent)) {\n                        setColumnVisibility(parent, visible);\n                        cell[0].style.display = visible ? \"\" : NONE;\n                    }\n\n                    if (cell.filter(\"[\" + kendo.attr(\"colspan\") + \"]\").length) {\n                        colSpan = parseInt(cell.attr(kendo.attr(\"colspan\")), 10);\n                        cell[0].colSpan = (colSpan - hiddenLeafColumnsCount(parent.columns)) || 1;\n                    }\n                }\n            }\n        },\n\n        _updateContentWidth: function() {\n            var that = this;\n            var tables = that.table.add(that.thead.parent());\n\n            tables.css({\n                width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n            });\n            that.refresh();\n        },\n\n        showColumn: function(column) {\n            var that = this,\n                idx,\n                length,\n                cell,\n                tables,\n                width,\n                headerCellIndex,\n                position,\n                colWidth,\n                cols,\n                columns = that.columns,\n                virtualScroll = that.virtualScroll || {},\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                lockedColumnsCount = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).length : 0,\n                columnIndex,\n                originalColumn,\n                columnLeafIndex,\n                groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (typeof column == \"number\") {\n                columnIndex = column;\n                column = columns[column];\n            } else if (isPlainObject(column)) {\n                $.each(flatColumns(columns), function(index, item) {\n                    if (item === column) {\n                        column = item;\n                        columnIndex = index;\n                        return false;\n                    }\n                });\n            } else {\n                $.each(flatColumns(columns), function(index, item) {\n                    if (item.field === column) {\n                        column = item;\n                        columnIndex = index;\n                        return false;\n                    }\n                });\n            }\n\n            if (!column || isVisible(column)) {\n                return;\n            }\n\n            var setColumnVisibility = that._columnVisibilitySetter(column);\n\n            if (column.columns && column.columns.length) {\n                position = columnPosition(column, columns);\n                originalColumn = flatColumns(that.options.columns)[columnIndex];\n\n                setColumnVisibility(column, true);\n\n                setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, true);\n\n                for (idx = 0; idx < column.columns.length; idx++) {\n                    if (!originalColumn.columns[idx].hidden) {\n                        this.showColumn(column.columns[idx]);\n                    }\n                }\n\n                that._ariaRemoveHiddenColIndex();\n                that.trigger(COLUMNSHOW, { column: column });\n\n                return;\n            }\n\n            columnLeafIndex = inArray(column, leafColumns(columns));\n\n            setColumnVisibility(column, true);\n\n            that._setParentsVisibility(column, true);\n\n            that._templates();\n            that._updateCols();\n            that._updateLockedCols();\n\n            var container = that.thead;\n\n            headerCellIndex = columnLeafIndex;\n            if (that.lockedHeader && lockedColumnsCount > columnLeafIndex) {\n                container = that.lockedHeader.find(\">table>thead\");\n            } else {\n                headerCellIndex -= lockedColumnsCount;\n            }\n\n            cell = leafDataCells(container).eq(headerCellIndex);\n            cell[0].style.display = \"\";\n            cell[0].classList.remove(\"k-hidden\");\n\n            setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>td\"), columnLeafIndex, true);\n            if (footer[0]) {\n                that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n                that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n                setCellVisibility(footer.find(\".k-footer-template>td\"), columnLeafIndex, true);\n            }\n\n            if (virtualScroll.columns && !column.locked) {\n                that._updateContentWidth();\n                that.trigger(COLUMNSHOW, { column: column });\n                return;\n            }\n\n            if (that.lockedTable && lockedColumnsCount > columnLeafIndex) {\n                showColumnCells(that.lockedTable.find(\">tbody>tr\"), columnLeafIndex);\n            } else {\n                showColumnCells(that.tbody.children(), columnLeafIndex - lockedColumnsCount);\n            }\n\n            if (that.lockedTable) {\n                that._updateTablesWidth();\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n            } else {\n                tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                if (!column.width) {\n                    tables.width(\"\");\n                } else {\n                    width = 0;\n                    cols = that.thead.prev().find(\"col\");\n                    for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n\n                        if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n\n                        if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n\n                        if (colWidth.indexOf(\"%\") > -1) {\n                            width = 0;\n                            break;\n                        }\n                        width += parseInt(colWidth, 10);\n                    }\n\n                    that._footerWidth = null;\n                    if (width) {\n                        tables.each(function() {\n                            this.style.width = width + PX;\n                        });\n                        that._footerWidth = width;\n                        that._setContentWidth();\n                    }\n                }\n            }\n\n            that._updateFirstColumnClass();\n            that._updateStickyColumns();\n            if (groupHeaderColumnTemplateColumns.length > 0) {\n                that._renderGroupRows();\n            }\n            that._ariaRemoveHiddenColIndex();\n            that.trigger(COLUMNSHOW, { column: column });\n        },\n\n        _columnVisibilitySetter: function(column) {\n            var col = column || {};\n\n            if (isUndefined(col.media)) {\n                return setColumnVisibility;\n            } else {\n                return setColumnMediaVisibility;\n            }\n        },\n\n\n        _buildSkeleton: function() {\n            var visibleColumns = this.virtualCols ? this.virtualCols : visibleLeafColumns(this.columns);\n            var pageSize = this.dataSource.pageSize() || this.dataSource.total();\n            var loaderHTML = \"\";\n            var colspan;\n            var groups = this._groups();\n            var columnsCount = visibleColumns.length + groups;\n\n            if (this._hasDetails()) {\n                columnsCount++;\n            }\n\n            if (this._hasVirtualColumns()) {\n                colspan = parseInt(this.content.find(TR).first().find(\"td\").first().attr(\"colspan\"), 10);\n            }\n\n            for (var i = 0; i < pageSize; i++) {\n                loaderHTML += \"<tr class='k-table-row'>\";\n                for (var j = 0; j < columnsCount; j++) {\n                    if (colspan && !j) {\n                        loaderHTML += \"<td colspan='\" + colspan + \"'><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>\";\n                    } else {\n                        loaderHTML += \"<td><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>\";\n                    }\n                }\n                loaderHTML += \"</tr>\";\n            }\n            return loaderHTML;\n        },\n\n        _progress: function(toggle) {\n            var element = this.element;\n            var endless = this.options.scrollable && this.options.scrollable.endless;\n            var loaderType = this.options.loaderType;\n            var isVirtualization = this.options.scrollable && this.options.scrollable.virtual;\n            var skeleton;\n\n            if (isVirtualization) {\n                element = this.content;\n            } else if (this._editContainer && this._editMode() === \"popup\") {\n                element = this._editContainer;\n            } else if (this.lockedContent || endless) {\n                element = this.wrapper;\n            } else if (this.element.is(\"table\")) {\n                element = this.element.parent();\n            } else if (this.content && this.content.length) {\n                element = this.content;\n            }\n\n            if (loaderType == \"skeleton\") {\n                if (toggle) {\n                    skeleton = this._buildSkeleton();\n                        element.find(\"tbody\")\n                         .empty()\n                         .append(skeleton);\n                } else {\n                    element.find(\".k-skeleton\").closest(\"tbody\").empty();\n                }\n            } else {\n                if (endless && toggle) {\n                    kendo.ui.progress(element, toggle, { height: this.content.height(), top: this.content.parent()[0].offsetTop, opacity: true });\n                } else {\n                    kendo.ui.progress(element, toggle);\n                }\n            }\n        },\n\n        _resize: function(size, force) {\n\n            this._syncLockedContentHeight();\n            this._syncLockedHeaderHeight();\n\n            if (this.content) {\n                this._setContentWidth();\n                this._setContentHeight();\n            }\n\n            if (this.lockedTable) {\n                this._syncLockedScroll();\n            }\n\n            if (this.virtualScrollable && (force || this._rowHeight)) {\n                if (force) {\n                    this._rowHeight = null;\n                }\n                this.virtualScrollable.repaintScrollbar();\n            }\n\n            if (this.pager && this.pager.element) {\n                this.pager.resize(force);\n            }\n\n            if (this._anyStickyColumns()) {\n                this._updateStickyColumns(false);\n            }\n        },\n\n        _isActiveInTable: function() {\n            var active = activeElement();\n\n            if (!active) { return false; }\n\n            return this.table[0] === active ||\n                $.contains(this.table[0], active) ||\n                (this._isLocked() &&\n                    (this.lockedTable[0] === active || $.contains(this.lockedTable[0], active))\n                );\n        },\n\n        refresh: function(e) {\n            var that = this,\n                data = that.dataSource.view(),\n                navigatable = that.options.navigatable,\n                virtualScroll = that.virtualScroll || {},\n                currentIndex,\n                current = $(that.current()),\n                isCurrentInHeader = false,\n                groups = that._groups(),\n                colspan = groups + visibleLeafColumns(visibleColumns(that.columns)).length,\n                contentScrollLeft,\n                cachedItemsToSkip;\n\n            if (e && e.action === \"itemchange\" && (that.editable || that.options.scrollable.endless)) { // skip rebinding if editing is in progress\n                if (this._editMode() != \"popup\" || this._editMode() === \"popup\" && !that._editableIsClosing) { // popup editing animation has not finished yet and the editable is not destoyed\n                    return;\n                }\n            }\n\n            if (that._shouldMapHights) {\n                that._mapCachedRowsHeight(\"get\", \"uid\");\n                that._shouldMapHights = false;\n            }\n\n            if (virtualScroll.columns) {\n                that._templates();\n            }\n\n            //someone remove the edited item\n            if (e && e.action === \"remove\" && that.editable &&\n                that.editable.options.model && inArray(that.editable.options.model, e.items) > -1) {\n                that.editable.options.model.unbind(CHANGE, that._modelChangeHandler);\n            }\n\n            e = e || {};\n\n            if (that.trigger(\"dataBinding\", { action: e.action || \"rebind\", index: e.index, items: e.items })) {\n                return;\n            }\n\n            if (e.action === SYNC && that._isVirtualEditable()) {\n                that._destroyEditable();\n                that._clearEditableState();\n            }\n\n            if (!that._endlessFetchInProgress) {\n                if (navigatable && (that._isActiveInTable() || (that._editContainer && that._editContainer.data(\"kendoWindow\")))) {\n                    isCurrentInHeader = current.is(\"th\");\n                    currentIndex = isCurrentInHeader ? current.parent().children(\":not(.k-group-cell)\").index(current[0]) : Math.max(that.cellIndex(current), 0);\n                }\n                that._destroyEditable();\n            }\n\n            if (that.options.scrollable && that.options.scrollable.endless && !that._pdfInitialized) {\n                clearTimeout(that._progressTimeOut);\n                that._progressTimeOut = setTimeout(function() {\n                    if (!that._endlessFetchInProgress) {\n                        that._progress(false);\n                    }\n                }, 250);\n            } else {\n                 that._progress(false);\n            }\n\n            if (current.length) {\n                that._currentRowIndex = current.parent().index();\n            }\n\n            that._hideResizeHandle();\n\n            that._data = [];\n\n            if (!that.columns.length) {\n                that._autoColumns(that._firstDataItem(data[0], groups));\n                colspan = groups + that.columns.length;\n            }\n\n            that._group = groups > 0 || that._group;\n\n            if (that._group) {\n                that._templates();\n                that._updateCols();\n                that._updateLockedCols();\n                if (!that._virtualColScroll) {\n                    that._updateHeader(groups);\n                }\n                that._group = groups > 0;\n                that._groupRows = groupRows(data);\n            }\n\n            if (that.content) {\n                contentScrollLeft = kendo.scrollLeft(that.content);\n            }\n            cachedItemsToSkip = that._skipRerenderItemsCount;\n            that._renderContent(data, colspan, groups);\n            if (that.options.scrollable && that.options.scrollable.endless && this.lockedContent) {\n                that._skipRerenderItemsCount = cachedItemsToSkip;\n            }\n            that._renderLockedContent(data, colspan, groups);\n\n            if (!that._virtualColScroll) {\n                that._footer();\n\n                that._renderNoRecordsContent();\n\n                that._togglePagerVisibility();\n\n                that._setContentHeight();\n\n                that._setContentWidth(that.content && contentScrollLeft);\n            }\n\n            if (that.lockedTable) {\n                //requires manual trigger of scroll to sync both tables\n                if (virtualScroll.rows) {\n                    that.content.find(\">.k-virtual-scrollable-wrap\").trigger(\"scroll\");\n                } else if (that.touchScroller) {\n                    that.touchScroller.movable.trigger(\"change\");\n                } else {\n                    that.wrapper.one(\"scroll\", function(e) { e.stopPropagation(); });\n                    that.content.trigger(\"scroll\");\n                }\n            }\n\n            if (!that._endlessFetchInProgress && !that._rowDropping) {\n                that._restoreCurrent(currentIndex, isCurrentInHeader);\n            }\n\n            if (that.touchScroller) {\n                that.touchScroller.contentResized();\n            }\n\n            if (that.selectable) {\n                that.selectable.resetTouchEvents();\n            }\n\n            if (that._checkBoxSelection) {\n                that._toggleHeaderCheckState(false);\n            }\n\n            if (that.options.persistSelection &&\n                ((that.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell) || that._checkBoxSelection) &&\n                (that.items().length || that.dataSource._isGroupPaged())) {\n                that._restoreSelection();\n            }\n\n            if (!that.options.persistSelection) {\n                that._selectedIds = {};\n            }\n\n            if (that._hasReorderableRows()) {\n                that._draggableRows();\n                that._reorderableRows();\n            }\n\n            if (that.options.selectable && that.options.selectable.cellAggregates) {\n                that._calculateAggregatesForSelected();\n            }\n\n            that._aria();\n\n            that.trigger(DATABOUND);\n       },\n\n        _restoreCurrent: function(currentIndex, isCurrentInHeader) {\n            if (currentIndex === undefined$1 || currentIndex < 0) {\n                return;\n            }\n\n            this._removeCurrent();\n\n            if (isCurrentInHeader) {\n                this._setCurrent(this.thead.find(\"th:not(.k-group-cell)\").eq(currentIndex), false, this._hasVirtualColumns());\n            } else {\n                var rowIndex = 0;\n                var virtualScroll = this.virtualScroll || {};\n\n                if (this._rowVirtualIndex) {\n                    if (virtualScroll.rows) {\n                        rowIndex = this.virtualScrollable.position(this._rowVirtualIndex);\n                    } else {\n                        rowIndex = this._rowVirtualIndex;\n                    }\n                } else if (this._currentRowIndex) {\n                    rowIndex = this._currentRowIndex;\n                } else {\n                    currentIndex = 0;\n                }\n\n                var row = $();\n                var colspan;\n\n                if (this.lockedTable) {\n                    row = this.lockedTable.find(\">tbody>tr\").eq(rowIndex);\n                }\n                row = row.add(this.tbody.children().eq(rowIndex));\n\n                if (this._hasVirtualColumns()) {\n                    colspan = parseInt(row.find(\"td\").first().attr(\"colspan\"), 10);\n                    currentIndex = this._virtualCellIndex - (colspan > 1 ? colspan - 1 : 0);\n                }\n\n\n                var td = row.find(\">td:not(.k-group-cell):not(.k-hierarchy-cell)\")\n                    .eq(currentIndex);\n\n                if (!td.length || currentIndex < 0) {\n                    return;\n                }\n\n                if (this._hasVirtualColumns()) {\n                    this._setCurrent(td, true, true);\n                } else {\n                    this._setCurrent(td);\n                }\n\n            }\n\n            if (this._current) {\n                focusTable(this.table, true);\n            }\n        },\n\n        _restoreSelection: function() {\n            var that = this,\n                allRows = that.items(),\n                selectedRows,\n                id = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n\n            selectedRows = grep(allRows, function(row) {\n                 var dataItemKey = that.dataItem(row)[id];\n                 if (that._selectedIds[dataItemKey]) {\n                    return row;\n                 }\n            });\n\n            that.select(selectedRows);\n        },\n\n        _getSelectedRowUids: function() {\n            var that = this,\n                selected = that.select(),\n                row,\n                uid,\n                result = [];\n\n            for (let i = 0; i < selected.length; i++) {\n                row = $(selected[i]);\n\n                if (kendo.ui.Selectable.parseOptions(that.options.selectable).cell) {\n                    row = row.closest(TR);\n                }\n\n                uid = row.data(\"uid\");\n\n                if (result.indexOf(uid) === -1) {\n                    result.push(uid);\n                }\n            }\n\n            return result;\n        },\n\n        _getSelectedColumnFields: function() {\n            var that = this,\n                selected = that.select(),\n                field,\n                index,\n                visibleColumns = visibleLeafColumns(that.columns).filter(col => !col.selectable && !col.draggable & !col.command),\n                result = [];\n\n            // If the mode is in row selection, then return all of the visible columns.\n            if (!kendo.ui.Selectable.parseOptions(that.options.selectable).cell) {\n                return visibleColumns.map(vc => vc.field);\n            }\n\n            for (let i = 0; i < selected.length; i++) {\n                index = $(selected[i]).index();\n\n                field = that.thead.find(\"th:eq(\" + index + \")\").data(\"field\");\n\n                if (result.indexOf(field) === -1) {\n                    result.push(field);\n                }\n            }\n\n            return result;\n        },\n\n       _cleanupDetailItems: function() {\n           var that = this;\n\n           if (that._hasDetails()) {\n               that.tbody.find(\".k-detail-cell\").empty();\n           }\n       },\n\n       _renderContent: function(data, colspan, groups) {\n            var that = this,\n                idx,\n                length,\n                html = \"\",\n                isLocked = that.lockedContent != null,\n                endlessAppend = null,\n                skipLastGroup,\n                flatViewLength,\n                scrollable = that.options.scrollable,\n                templates = {\n                        rowTemplate: that.rowTemplate,\n                        altRowTemplate: that.altRowTemplate,\n                        groupFooterTemplate: that.groupFooterTemplate,\n                        groupHeaderColumnTemplate: that.groupHeaderColumnTemplate\n                    };\n            if (scrollable && scrollable.endless && !that.dataSource.options.endless) {\n                that._skipRerenderItemsCount = 0;\n                if (that.content) {\n                    that.content[0].scrollTop = 0;\n                }\n            }\n            endlessAppend = that._skipRerenderItemsCount > 0;\n            colspan = isLocked ? colspan - visibleLeafColumns(visibleLockedColumns(that.columns)).length : colspan;\n            if (groups > 0) {\n\n                colspan = isLocked ? colspan - groups : colspan;\n\n                if (that.detailTemplate) {\n                    colspan++;\n                }\n\n                if (that.groupFooterTemplate) {\n                    that._groupAggregatesDefaultObject = that.dataSource.aggregates();\n                }\n                if (that.options.scrollable.endless) {\n                    flatViewLength = that.dataSource.flatView().length;\n                }\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    if (!that._skippedGroups) {\n                        that._skippedGroups = [];\n                    }\n                    skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== that.dataSource.total();\n                    html += that._groupRowHtml(data[idx], colspan, 0, isLocked ? groupRowLockedContentBuilder : groupRowBuilder, templates, isLocked, skipLastGroup, false);\n                }\n            } else {\n                html += that._rowsHtml(data, templates);\n            }\n\n            if (endlessAppend) {\n                that.tbody.append(html);\n                kendo.applyStylesFromKendoAttributes(that.tbody, [\"display\", \"left\", \"right\"]);\n                clearTimeout(that._endlessFetchTimeOut);\n                that._endlessFetchTimeOut = setTimeout(function() {\n                    if (that._groupToCollapse) {\n                        that.collapseGroup(that._groupToCollapse);\n                        that._groupToCollapse = null;\n                    }\n                });\n                that._endlessFetchInProgress = null;\n            } else {\n                that.tbody = appendContent(that.tbody, that.table, html, this.options.size);\n            }\n       },\n\n       _renderGroupRows: function() {\n        var that = this,\n        data = that._groupRows,\n        groupRows = that.wrapper.find(DOT + GROUPING_ROW),\n        groups = that._groups(),\n        groupRowBuilderFunc,\n        isLocked = that.lockedContent != null,\n        columns,\n        colspan,\n        group,\n        field,\n        column,\n        template,\n        text,\n        groupHeaderData,\n        tableContainer,\n        isInLockedContainer,\n        prevElement,\n        newGroupRowElement,\n        currentRow,\n        level,\n        groupHeaderColumnTemplate,\n        firstColumnGroupData;\n\n        groupRows.each(function(index, row) {\n            currentRow = $(row);\n            tableContainer = currentRow.closest(\"table\").parent();\n            isInLockedContainer = tableContainer.is(\".\" + CONTENTRLOCKEDCONTAINER);\n            columns = isInLockedContainer ? visibleLeafColumns(visibleColumns(lockedColumns(that.columns))) : visibleLeafColumns(visibleColumns(nonLockedColumns(that.columns)));\n            level = currentRow.find(\".\" + GROUPCELLCLASS).length;\n            if (isLocked) {\n                groupRowBuilderFunc = isInLockedContainer ? groupRowBuilder : groupRowLockedContentBuilder;\n                colspan = isInLockedContainer ? columns.length + groups - level : columns.length;\n            }\n            else {\n                groupRowBuilderFunc = groupRowBuilder;\n                colspan = columns.length + groups - level;\n            }\n\n            group = index >= data.length ? data[index - data.length] : data[index];\n            field = group.field;\n            column = grep(leafColumns(that.columns), function(column) { return column.field == field; })[0] || { };\n            firstColumnGroupData = !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false;\n            template = column.groupHeaderTemplate ? column.groupHeaderTemplate : visibleColumns(that.columns)[0].groupHeaderColumnTemplate;\n            text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded);\n            groups = groups;\n            groupHeaderData = that._groupData(group, false, firstColumnGroupData);\n            groupHeaderColumnTemplate = isInLockedContainer ? that.lockedGroupHeaderColumnTemplate : that.groupHeaderColumnTemplate;\n\n            if (template) {\n                text = typeof template === FUNCTION ? template(groupHeaderData) : kendo.template(template)(groupHeaderData);\n            }\n\n            prevElement = currentRow.prev().length ? currentRow.prev() : currentRow.parent();\n\n            newGroupRowElement = $(groupHeaderColumnTemplate ?\n                groupHeaderColumnTemplate(extend({}, groupHeaderData, { groupCells: level, colspan: groups - level, text: text })) :\n                groupRowBuilderFunc(colspan, level, text, null, null, null, isRtl)\n            );\n\n            kendo.applyStylesFromKendoAttributes(newGroupRowElement, [\"display\", \"left\", \"right\"]);\n\n            if (prevElement.is(\"tbody\")) {\n                prevElement.prepend(newGroupRowElement);\n            }\n            else {\n                prevElement.after(newGroupRowElement);\n            }\n                currentRow.remove();\n           });\n       },\n\n       _renderLockedContent: function(data, colspan, groups) {\n           var html = \"\",\n               idx,\n               length,\n               skipLastGroup,\n               endlessAppend = null,\n               flatViewLength,\n               templates = {\n                   rowTemplate: this.lockedRowTemplate,\n                   altRowTemplate: this.lockedAltRowTemplate,\n                   groupFooterTemplate: this.lockedGroupFooterTemplate,\n                   groupHeaderColumnTemplate: this.lockedGroupHeaderColumnTemplate\n               };\n\n           if (this.lockedContent) {\n\n               var table = this.lockedTable;\n               endlessAppend = this._skipRerenderItemsCount > 0;\n\n               if (groups > 0) {\n                   colspan = colspan - visibleColumns(leafColumns(nonLockedColumns(this.columns))).length;\n                   if (this.options.scrollable.endless) {\n                     flatViewLength = this.dataSource.flatView().length;\n                   }\n                   for (idx = 0, length = data.length; idx < length; idx++) {\n                    skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== this.dataSource.total();\n                    html += this._groupRowHtml(data[idx], colspan, 0, groupRowBuilder, templates, false, skipLastGroup, true);\n                   }\n               } else {\n                   html = this._rowsHtml(data, templates);\n               }\n\n               if (endlessAppend) {\n                   table.children(\"tbody\").append(html);\n               } else {\n                   appendContent(table.children(\"tbody\"), table, html, this.options.size);\n               }\n\n               this._syncLockedContentHeight();\n           }\n       },\n\n       _togglePagerVisibility: function() {\n           if (this.options.pageable.alwaysVisible === false) {\n                this.wrapper.find(\".k-grid-pager\").toggle(this.dataSource.total() >= this.dataSource.pageSize());\n            }\n       },\n\n       _adjustRowsHeight: function(table1, table2) {\n           var rows = table1[0].rows,\n               length = rows.length,\n               idx,\n               rows2 = table2[0].rows,\n               containers = table1.add(table2),\n               containersLength = containers.length,\n               heights = [];\n\n           for (idx = 0; idx < length; idx++) {\n               if (!rows2[idx]) {\n                   break;\n               }\n\n               if (rows[idx].style.height) {\n                   rows[idx].style.height = rows2[idx].style.height = \"\";\n               }\n           }\n\n           for (idx = 0; idx < length; idx++) {\n               if (!rows2[idx]) {\n                   break;\n               }\n\n               var offsetHeight1 = rows[idx].offsetHeight;\n               var offsetHeight2 = rows2[idx].offsetHeight;\n               var height = 0;\n\n               if (offsetHeight1 > offsetHeight2) {\n                   height = offsetHeight1;\n               } else if (offsetHeight1 < offsetHeight2) {\n                   height = offsetHeight2;\n               }\n\n               heights.push(height);\n           }\n\n           for (idx = 0; idx < containersLength; idx++) {\n               containers[idx].style.display = NONE;\n           }\n\n           for (idx = 0; idx < length; idx++) {\n               if (heights[idx]) {\n                   //add one to resolve row misalignment in IE\n                   rows[idx].style.height = rows2[idx].style.height = (heights[idx] + 1) + PX;\n               }\n           }\n\n           for (idx = 0; idx < containersLength; idx++) {\n               containers[idx].style.display = \"\";\n           }\n       }\n   });\n\n   if (kendo.ExcelMixin) {\n       kendo.ExcelMixin.extend(Grid.prototype);\n   }\n\n   if (kendo.PDFMixin) {\n       kendo.PDFMixin.extend(Grid.prototype);\n\n       Grid.prototype._drawPDF_autoPageBreak = function(progress) {\n           var grid = this;\n           var result = new $.Deferred();\n           var dataSource = grid.dataSource;\n           var allPages = grid.options.pdf.allPages;\n           var origBody = grid.wrapper.find('> table > tbody, .k-grid-content > table > tbody').first();\n           var cont = $(\"<div>\")\n               .css({ position: \"absolute\", left: -10000, top: -10000 });\n           var clone;\n\n           grid.toggleUnexportableColumns(grid.columns);\n           clone = grid.wrapper.clone().css({\n               height: AUTO, width: AUTO\n           }).appendTo(cont);\n           clone.find(\".k-grid-content\").css({ height: AUTO, width: AUTO, overflow: \"visible\" });\n           clone.find('> table, .k-grid-content > table, .k-grid-footer table').css({ height: AUTO, width: \"100%\", overflow: \"visible\" });\n           clone.find(\".k-grid-pager, .k-grid-toolbar, .k-grouping-header\").remove();\n           clone.find(\".k-grid-header, .k-grid-footer, .k-auto-scrollable\").css({ paddingRight: 0 });\n\n           this._initPDFProgress(progress);\n\n           var body = clone.find('> table > tbody, .k-grid-content > table > tbody').first().empty();\n           var startingPage = dataSource.page();\n\n           function resolve() {\n               if (allPages && startingPage !== undefined$1) {\n                   dataSource.one(\"change\", draw);\n                   dataSource.page(startingPage);\n               } else {\n                   grid.refresh();\n                   draw();\n               }\n           }\n\n           function draw() {\n               cont.appendTo(document.body);\n               var options = $.extend({}, grid.options.pdf, {\n                   _destructive: true,\n                   progress: function(p) {\n                       progress.notify({\n                           page: p.page,\n                           pageNumber: p.pageNum,\n                           progress: 0.5 + p.pageNum / p.totalPages / 2,\n                           totalPages: p.totalPages\n                       });\n                   }\n               });\n               kendo.drawing.drawDOM(clone, options)\n                   .always(function() {\n                       cont.remove();\n                   })\n                   .then(function(group) {\n                       result.resolve(group);\n                       grid.toggleUnexportableColumns(grid.columns, true);\n                   })\n                   .fail(function(err) {\n                       result.reject(err);\n                   });\n           }\n\n           function renderPage() {\n               var pageNum = dataSource.page();\n               var totalPages = allPages ? dataSource.totalPages() : 1;\n               body.append(origBody.children(\"tr:not(.k-detail-row)\"));\n               if (pageNum < totalPages) {\n                   dataSource.page(pageNum + 1);\n               } else {\n                   dataSource.unbind(\"change\", renderPage);\n                   resolve();\n               }\n           }\n\n           if (allPages) {\n               dataSource.bind(\"change\", renderPage);\n               dataSource.page(1);\n           } else {\n               renderPage();\n           }\n\n           return result.promise();\n       };\n\n       Grid.prototype.toggleUnexportableColumns = function(columns, restore) {\n           var length = columns.length;\n           var column;\n           var exportable;\n           var visibleInExport;\n           var visibleInExportOnly;\n\n           for (var i = 0; i < length; i++) {\n               column = columns[i];\n               exportable = column.exportable;\n               if (!restore) {\n                   if (typeof column.exportable === \"object\") {\n                       exportable = column.exportable.pdf;\n                   }\n\n                   visibleInExport = !column.hidden && exportable !== false;\n                   visibleInExportOnly = column.hidden && exportable === true;\n                   exportable = visibleInExport || visibleInExportOnly;\n\n                   if (!exportable && !column.hidden) {\n                       column._toggledDuringExport = true;\n                       this.hideColumn(column);\n                   } else if (exportable && column.hidden) {\n                       column._toggledDuringExport = true;\n                       this.showColumn(column);\n                   } else if (exportable && column.columns) {\n                       this.toggleUnexportableColumns(column.columns);\n                   }\n               } else {\n                   if (column._toggledDuringExport) {\n                       column._toggledDuringExport = false;\n\n                       if (column.hidden) {\n                           this.showColumn(column);\n                       } else {\n                           this.hideColumn(column);\n                       }\n                   } else if (column.columns) {\n                       this.toggleUnexportableColumns(column.columns, restore);\n                   }\n               }\n           }\n       };\n\n       Grid.prototype._drawPDF = function(progress) {\n           var grid = this;\n\n           if (grid.options.pdf.paperSize && grid.options.pdf.paperSize != AUTO) {\n               return grid._drawPDF_autoPageBreak(progress);\n           }\n\n           var result = new $.Deferred();\n           var dataSource = grid.dataSource;\n           var allPages = grid.options.pdf.allPages;\n\n           this._initPDFProgress(progress);\n\n           // This group will be our document containing all pages\n           var doc = new kendo.drawing.Group();\n           var startingPage = dataSource.page();\n\n           function resolve() {\n               if (allPages && startingPage !== undefined$1) {\n                   dataSource.unbind(\"change\", exportPage);\n                   dataSource.one(\"change\", function() {\n                       result.resolve(doc);\n                   });\n\n                   dataSource.page(startingPage);\n               } else {\n                   result.resolve(doc);\n               }\n           }\n\n           function exportPage() {\n                grid.toggleUnexportableColumns(grid.columns);\n                grid._drawPDFShadow({\n                    width: grid.wrapper.width()\n                }, {\n                    avoidLinks: grid.options.pdf.avoidLinks\n                })\n                .done(function(group) {\n                    var pageNum = dataSource.page();\n                    var totalPages = allPages ? dataSource.totalPages() : 1;\n\n                    var args = {\n                        page: group,\n                        pageNumber: pageNum,\n                        progress: pageNum / totalPages,\n                        totalPages: totalPages\n                    };\n\n                    grid.toggleUnexportableColumns(grid.columns, true);\n                    progress.notify(args);\n                    doc.append(args.page);\n\n                    if (pageNum < totalPages) {\n                        dataSource.page(pageNum + 1);\n                    } else {\n                        resolve();\n                    }\n                })\n                .fail(function(err) {\n                    result.reject(err);\n                });\n            }\n\n            if (allPages) {\n                dataSource.bind(\"change\", exportPage);\n                dataSource.page(1);\n            } else {\n                exportPage();\n            }\n\n            return result.promise();\n        };\n\n        Grid.prototype._initPDFProgress = function(deferred) {\n           var loading = $(\"<div class='k-loading-pdf-mask'><div class='k-loading-color'></div></div>\");\n           loading.prepend(this.wrapper.clone().css({\n               position: \"absolute\", top: 0, left: 0\n           }));\n\n           this._pdfInitialized = true;\n           this.wrapper.append(loading);\n\n           var pb = $(\"<div class='k-loading-pdf-progress'>\")\n           .appendTo(loading)\n           .kendoProgressBar({\n               type: \"chunk\",\n               chunkCount: 10,\n               min: 0,\n               max: 1,\n               value: 0\n           }).data(\"kendoProgressBar\");\n\n           deferred.progress(function(e) {\n               pb.value(e.progress);\n           })\n           .always(function() {\n               kendo.destroy(loading);\n               loading.remove();\n           });\n        };\n   }\n\n   function syncTableHeight(table1, table2) {\n       table1 = table1[0];\n       table2 = table2[0];\n\n       if (table1.rows.length !== table2.rows.length) {\n           var lockedHeigth = table1.offsetHeight;\n           var tableHeigth = table2.offsetHeight;\n\n           var row;\n           var diff;\n           if (lockedHeigth > tableHeigth) {\n               row = table2.rows[table2.rows.length - 1];\n\n               if (filterRowRegExp.test(row.className)) {\n                   row = table2.rows[table2.rows.length - 2];\n               }\n\n               diff = lockedHeigth - tableHeigth;\n           } else {\n               row = table1.rows[table1.rows.length - 1];\n\n               if (filterRowRegExp.test(row.className)) {\n                   row = table1.rows[table1.rows.length - 2];\n               }\n\n               diff = tableHeigth - lockedHeigth;\n           }\n           row.style.height = row.offsetHeight + diff + PX;\n       }\n   }\n\n   function adjustRowHeight(row1, row2) {\n       var height;\n       var offsetHeight1 = row1.offsetHeight;\n       var offsetHeight2 = row2.offsetHeight;\n\n       if (offsetHeight1 > offsetHeight2) {\n           height = offsetHeight1 + PX;\n       } else if (offsetHeight1 < offsetHeight2) {\n           height = offsetHeight2 + PX;\n       }\n\n       if (height) {\n           row1.style.height = row2.style.height = height;\n       }\n   }\n\n   function getCommand(commands, name) {\n       var idx, length, command;\n\n       if (typeof commands === STRING && commands === name) {\n          return commands;\n       }\n\n       if (isPlainObject(commands) && commands.name === name) {\n           return commands;\n       }\n\n       if (isArray(commands)) {\n           for (idx = 0, length = commands.length; idx < length; idx++) {\n               command = commands[idx];\n\n               if ((typeof command === STRING && command === name) || (command.name === name)) {\n                   return command;\n               }\n           }\n       }\n       return null;\n   }\n\n   function compareElements(element, toCompare) {\n       if (element.length !== toCompare.length) {\n           return false;\n       }\n\n       for (var i = 0; i < element.length; i++) {\n           if (element[i] !== toCompare[i]) {\n               return false;\n           }\n       }\n\n       return true;\n   }\n\n   function focusTable(table, direct) {\n       if (!table || table.length === 0) {\n           return;\n       }\n\n       if (direct === true) {\n           table = $(table);\n           var scrollLeft = kendo.scrollLeft(table.parent());\n\n            kendo.focusElement(table);\n            kendo.scrollLeft(table.parent(), scrollLeft);\n        } else {\n            $(table).one(\"focusin\", function(e) { e.preventDefault(); }).trigger(\"focus\");\n        }\n    }\n\n   function isColumnGroupable(grid, column) {\n       return grid.options.groupable && (column.groupable || column.groupable === undefined$1);\n   }\n\n   function isGroupedBy(groups, field) {\n       return !!$.grep(groups, function(item) {\n           return item.field === field;\n       }).length;\n   }\n\n   function isColumnEditable(column, model) {\n       if (!column.field || column.selectable) {\n           return false;\n       }\n       if (model.editable && !model.editable(column.field)) {\n           return false;\n       }\n       if (column.editable && !column.editable(model)) {\n           return false;\n       }\n       return true;\n   }\n\n   function isInputElement(element) {\n       return $(element).is(\":button,a,:input,a>.k-icon,a>.k-svg-icon,textarea,span.k-select,span.k-icon,span.k-svg-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdownlist,.k-switch-thumb,.k-switch-track,.k-switch-label-off,.k-switch-label-on\");\n   }\n\n    function tableClick(e) {\n        var that = this,\n            currentTarget = $(e.currentTarget),\n            isHeader = currentTarget.is(\"th\"),\n            table = this.table.add(this.lockedTable),\n            headerTable = this.thead.parent().add($(\">table\", this.lockedHeader)),\n            isInput = isInputElement(e.target),\n            preventScroll = $(e.target).is('.k-checkbox'),\n            target = $(e.target),\n            currentTable = currentTarget.closest(\"table\")[0];\n\n        if (isInput && currentTarget.find(kendo.roleSelector(\"filtercell\")).length) {\n            this._setCurrent(currentTarget);\n            return;\n        }\n\n        if (currentTable !== table[0] && currentTable !== table[1] && currentTable !== headerTable[0] && currentTable !== headerTable[1]) {\n            return;\n        }\n\n        if (target.is(CARET_ALT_RIGHT + \",\" + CARET_ALT_DOWN)) {\n            return;\n        }\n\n        if (this.options.navigatable) {\n            this._setCurrent(currentTarget, false, preventScroll);\n        }\n\n        if (isHeader || !isInput) {\n            setTimeout(function() {\n                var activeEl = $(kendo._activeElement());\n                if ((activeEl.hasClass(\"k-widget\") || activeEl.hasClass(\"k-dropdownlist\")) && !activeEl.hasClass(\"k-grid-pager\")) {\n                    return;\n                }\n\n                //Only if input element is not selected yet and it is not descendant of the grid's table\n                if (that.table && (activeEl.is(CHECKBOXINPUT) || !isInputElement(kendo._activeElement()) || !$.contains(currentTable, kendo._activeElement()))) {\n                    //DOMElement.focus() only for header, because IE doesn't really focus the table\n                    focusTable(that.table[0], true);\n                }\n            });\n        }\n\n        if (isHeader && !kendo.support.touch) {\n            e.preventDefault(); //if any problem occurs, call preventDefault only for the clicked header links\n        }\n    }\n\n   function leftMostPosition(element, rtl) {\n       if (!rtl) {\n           return 0;\n       }\n\n       var result = 0;\n\n       if (kendo.support.browser.webkit) {\n           result = element.width();\n       }\n\n       return result;\n   }\n\n   function parseVirtualSettings(options) {\n        var asLowerString;\n\n        if (typeof options === \"string\") {\n            asLowerString = options.toLowerCase();\n            if (asLowerString === \"true\") {\n                return {\n                    rows: true\n                };\n            } else {\n                return {\n                    rows: asLowerString.indexOf(\"rows\") > -1,\n                    columns: asLowerString.indexOf(\"columns\") > -1\n                };\n            }\n\n        } else if (options === true) {\n            return {\n                rows: true\n            };\n        }\n   }\n\n   function isElementVisibleInWrapper(wrapper, element) {\n       var offsetTop;\n       var halfHeight;\n\n       if (!wrapper) {\n         return false;\n       }\n\n       element = $(element);\n\n       if (element[0] && contains(wrapper[0], element[0])) {\n           offsetTop = element.offset().top - wrapper.offset().top;\n           halfHeight = element.outerHeight() / 2;\n\n           if ((offsetTop >= 0 || math.abs(offsetTop) <= halfHeight) && (math.floor(offsetTop + halfHeight) <= wrapper.height())) {\n               return true;\n           }\n       }\n\n       return false;\n   }\n\n   function isInEdit(cell) {\n       return cell &&\n           (cell.hasClass(\"k-edit-cell\") ||\n            cell.parent().hasClass(\"k-grid-edit-row\"));\n   }\n\n    function groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, templateColspan, groupData, level, text, expanded, group, isGroupPaged) {\n        var html;\n\n        if (groupHeaderColumnTemplate) {\n            html = groupHeaderColumnTemplate(extend({}, groupData, {\n                groupCells: level,\n                colspan: templateColspan,\n                text: text,\n                expanded: expanded,\n                isRtl: isRtl,\n                uid: group.uid\n            }));\n        } else {\n            html = groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged);\n        }\n\n        return html;\n    }\n\n   function groupCellBuilder(headerTemplateIndex) {\n    return ({ colspan, text, expanded, isRtl }) => `<td class=\"k-table-td\" colspan=\"${colspan + headerTemplateIndex}\">` +\n    '<p class=\"k-reset\">' +\n        kendo.ui.icon($(`<a href=\"\\\\#\" tabindex=\"-1\" ${ARIA_LABEL}=\"${(expanded ? COLLAPSE : EXPAND)}\"></a>`), { icon: (expanded ? 'caret-alt-down' : `caret-alt-${isRtl ? 'left' : 'right'}`) }) + text +\n    `</p></td>${new Array(colspan + headerTemplateIndex).join(\"<td hidden group-header-spanned-hidden></td>\")}`;\n   }\n\n   function groupCellLockedContentBuilder(headerTemplateIndex) {\n    return '<td class=\"k-table-td\" colspan=\"' + headerTemplateIndex + '\">' +\n    `<p class=\"k-reset\">&nbsp;</p></td>${new Array(headerTemplateIndex).join(\"<td hidden group-header-spanned-hidden></td>\")}`;\n   }\n\n   function groupRowBuilder(colspan, level, text, expanded, uid, includeAdditionalData, isRtl) {\n    return '<tr ' + (includeAdditionalData ? 'data-group-uid=\"' + uid + '\"' : '') + 'class=\"k-table-group-row k-grouping-row k-table-row\">' + groupCells(level) +\n        '<td class=\"k-table-td\" colspan=\"' + colspan + '\" aria-expanded=\"' + !!expanded + '\">' +\n        '<p class=\"k-reset\">' +\n        kendo.ui.icon($('<a href=\"#\" tabindex=\"-1\" ' + ARIA_LABEL + '=\"' + (expanded ? COLLAPSE : EXPAND) + '\"></a>'), { icon: (expanded ? 'caret-alt-down' : `caret-alt-${isRtl ? 'left' : 'right'}`) }) + text +\n    `</p></td>${new Array(colspan).join(\"<td hidden group-header-spanned-hidden></td>\")}</tr>`;\n   }\n\n   function groupRowLockedContentBuilder(colspan) {\n    return '<tr class=\"k-table-group-row k-grouping-row k-table-row\">' +\n        '<td class=\"k-table-td\" colspan=\"' + colspan + '\" aria-expanded=\"true\">' +\n        `<p class=\"k-reset\">&nbsp;</p></td>${new Array(colspan).join(\"<td hidden group-header-spanned-hidden></td>\")}</tr>`;\n   }\n\n   function toggleRow(row, visible) {\n       row = $(row)[0];\n       if (visible) {\n           row.style.display = \"\";\n       } else {\n           row.style.display = NONE;\n       }\n   }\n\n   function htmlEncode(value, backslashEscapeQuotes) {\n       var ampRegExp = /&/g,\n           ltRegExp = /</g,\n           quoteRegExp = /\"/g,\n           aposRegExp = /'/g,\n           gtRegExp = />/g;\n\n       return (\"\" + value)\n           .replace(ampRegExp, \"&amp;\")\n           .replace(ltRegExp, \"&lt;\")\n           .replace(gtRegExp, \"&gt;\")\n           .replace(quoteRegExp, function(match) {\n               if (backslashEscapeQuotes) {\n                   return \"\\\\\" + match;\n               }\n               return \"&quot;\";\n           })\n           .replace(aposRegExp, \"&#39;\");\n   }\n\n   function isEmptyString(value) {\n        return !/\\S/.test(value);\n   }\n\n   function getTitle(field, columns) {\n        return columns.filter(function(col) {\n            return col.field === field;\n        })[0].title || field;\n    }\n\n    function exportDataSort(a, b) {\n        return this.dataSource.indexOf(this.dataSource.getByUid(a.uid)) - this.dataSource.indexOf(this.dataSource.getByUid(b.uid));\n    }\n\n    function isExcelExportableColumn(column) {\n        return !(column.exportable === false || (column.exportable && column.exportable.excel === false));\n    }\n\n   ui.plugin(Grid);\n   ui.plugin(VirtualScrollable);\n\n   extend(kendo.ui.grid, {\n       defaultBodyContextMenu: defaultBodyContextMenu,\n       defaultHeadContextMenu: defaultHeadContextMenu,\n       defaultGroupsContextMenu: defaultGroupsContextMenu\n   });\n\n})(window.kendo.jQuery);\nvar kendo$1 = kendo;\n\nexport { kendo$1 as default };\n"]}