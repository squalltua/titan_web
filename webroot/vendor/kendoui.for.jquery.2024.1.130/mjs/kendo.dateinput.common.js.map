{"version":3,"file":"kendo.dateinput.common.js","names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","this","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__esDecorate","ctor","descriptorIn","contextIn","initializers","extraInitializers","accept","f","_","kind","descriptor","name","done","context","access","addInitializer","push","result","get","set","init","unshift","__runInitializers","thisArg","value","useValue","__propKey","x","concat","__setFunctionName","prefix","description","configurable","__metadata","metadataKey","metadataValue","metadata","__awaiter","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","then","__generator","body","y","g","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","pop","__createBinding","o","m","k","k2","undefined","__esModule","writable","enumerable","__exportStar","__values","__read","ar","error","__spread","__spreadArrays","il","a","j","jl","__spreadArray","to","from","pack","l","slice","__await","__asyncGenerator","asyncIterator","q","resume","fulfill","settle","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__setModuleDefault","__importStar","mod","__importDefault","default","__classPrivateFieldGet","receiver","state","has","__classPrivateFieldSet","__classPrivateFieldIn","Direction","tslib_es6","cloneDate","date","Date","getTime","adjustDST","hour","newDate","getHours","setHours","addDays","offset","setDate","getDate","createDate","year","month","day","hours","minutes","seconds","milliseconds","setFullYear","getFullYear","lastDayOfMonth","getMonth","getMinutes","getSeconds","getMilliseconds","MONTHS_LENGTH","normalize","expectedMonth","addMonths","diff","setMonth","setYear","candidate","addYears","addCenturies","addDecades","addWeeks","MS_PER_MINUTE$1","MS_PER_HOUR","MS_PER_DAY","Day","dayOfWeek","weekDay","direction","Forward","newDay","getDay","normalizeYear","firstDecadeOfCentury","durationInCenturies","start","end","firstYearOfDecade","durationInDecades","durationInMonths","durationInYears","firstDayInWeek","weekStartDay","Sunday","first","firstDayOfMonth","firstMonthOfYear","isEqual","expected","isEqualDate","lastDecadeOfCentury","lastMonthOfYear","lastYearOfDecade","nextDayOfWeek","prevDayOfWeek","Backward","timezones","rules","titles","zones","MONTHS","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","DAYS","Sun","Mon","Tue","Wed","Thu","Fri","Sat","MS_PER_MINUTE","ruleToDate","rule","zoneOffset","on","time","ruleOffset","isNaN","UTC","targetDay","substr","ourDay","getUTCDay","setUTCDate","getUTCDate","CURRENT_UTC_TIME","findRule","zoneRule","utcTime","split","Number","getUTCFullYear","filter","currentRule","sort","NO_TZ_INFO","INVALID_TZ_STRUCTURE","formatRegExp","flatten","arr","reduce","formatMessage","message","values","_i","flattenValues","replace","index","parseInt","getZoneRules","timezone","Error","zoneRules","findZone","idx","until","zone","zoneAndRule","abbrTimezone","_a","base","loadTimezone","tzInfo","getTimezoneOffset","parseFloat","timezoneGroupNames","groups","keys","tmp","group","timezoneNames","timezoneTitle","long","toLocalDate","getUTCMonth","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","addMinutes","addHours","dayAbbr","monthAbbr","datePrefix","utcDate","padNumber","num","len","Math","abs","join","isZoneMissingHour","currentOffset","prevHour","shiftZoneMissingHour","dstOffset","convertTimezoneUTC","utcLocal","fromTimezone","toTimezone","fromOffset","toOffset","baseDiff","midDate","midOffset","formatOffset","tzOffset","sign","floor","DateInputInteractionMode","ZonedDate","_utcDate","timezoneOffset","localDate","_localDate","fromLocalDate","shiftZone","fixedOffset","adjDate","fromUTCDate","toUTCDate","clone","days","addTime","utcMid","setTime","utcResult","stripTime","ticks","setMilliseconds","ms","setUTCMilliseconds","setSeconds","sec","setUTCSeconds","setMinutes","min","setUTCMinutes","setUTCHours","setUTCMonth","setUTCFullYear","toISOString","toJSON","toString","dateString","timeString","toTimeString","toDateString","abbrev","toLocaleString","locales","options","toLocaleDateString","toLocaleTimeString","toUTCString","toPrimitive","hint","valueOf","getVarDate","format","formatUTC","zonesPerGroup","title","moveDateToWeekStart","Monday","calcWeekInYear","firstWeekInYear","diffInMS","weekInYear","prevWeekDate","nextWeekDate","weekNumber","Mask","symbols","partMap","Constants","formatSeparator","twoDigitYearMax","defaultDateFormat","defaultLocaleId","Key","DELETE","BACKSPACE","TAB","ENTER","ESCAPE","ARROW_LEFT","ARROW_UP","ARROW_RIGHT","ARROW_DOWN","SPACE","END","HOME","PAGE_UP","PAGE_DOWN","padZero","max","fill","unpadZero","approximateStringMatching","oldText","newText","formatPattern","selectionStart","isInCaretMode","keyEvent","oldTextSeparator","oldSegmentText","substring","newSegmentText","deletedSymbol","symbol","dateSymbolMap","map","part","pattern","type","isInRange","isObject","isArray","isHtmlElement","element","HTMLElement","dateSetter","method","isPresent","isDocumentAvailable","document","isNumber","parseToInt","clamp","extend","args","deepExtend","_b","sources","source","noop","isFunction","fn","cropTwoDigitYear","setYears","millisecondDigitsInFormat","match","millisecondStepFor","digits","pow","areDatePartsEqualTo","isValidDate","PREVIOUS_CENTURY_BASE","CURRENT_CENTURY_BASE","SHORT_PATTERN_LENGTH_REGEXP","MONTH_PART_WITH_WORDS_THRESHOLD","MONTH_SYMBOL","JS_MONTH_OFFSET","DateObject","intlService","formatPlaceholder","cycleTime","_c","_d","_e","autoCorrectParts","dayperiod","leadingZero","typedMonthPart","knownParts","E","H","M","h","S","_value","_partiallyInvalidDate","startDate","invalidDateParts","startDateOffset","setOptions","sampleFormat","dateFormatString","setExisting","resetInvalidDate","localeId","cldrKeys","intl","cldr","calendar","numbers","monthNames","allFormattedMonths","dayPeriods","allDayPeriods","setValue","modifyExisting","hasValue","_this","splitDateFormat","getExisting","getValue","getFormattedDate","formatDate","getTextAndFormat","customFormat","text","mask","partiallyInvalidText","formattedDate","formattedDates","getFormattedInvalidDates","getInvalidDatePartValue","partsForSegment","getPartsForSegment","datePartText","merge","formattedDatesForSymbol","forEach","getInvalidDatePart","formattedInvalidDate","modifyPart","invalidDateFound","newValue","timeModified","isMonth","isDay","symbolExists","invalidDatePartValue","resetInvalidDateSymbol","monthValue","dayValue","dateCandidate","newValueCandidate","modifyDateSymbolWithValue","dateCandidateExists","markDatePartsAsExisting","setInvalidDatePart","shouldNormalizeCentury","normalizeCentury","parsePart","currentChar","resetSegmentValue","cycleSegmentValue","rawInputValue","rawTextValue","isDeleting","originalFormat","dateParts","datePartsLiterals","datePartIndex","literal","flatDateParts","datePart","parseResult","switchToNext","resetPart","some","hasInvalidDatePart","resetLeadingZero","rawValueStartsWithLiteral","startsWith","rawValueEndsWithLiteral","endsWith","rawValueHasConsecutiveLiterals","baseDate","baseFormat","replaced","current","basePrefix","baseSuffix","suffix","convertedBaseFormat","hasFixedFormat","datePartStartIndex","segmentLength","lastIndexOf","formatToTextLengthDiff","parsedDate","matchMonth","dayPeriod","matchDayPeriod","isZeroCurrentChar","isAbbrMonth","incrementLeadingZero","partPattern","patternValue","patternLength","currentMaxLength","tryParse","middle","middleNumber","candidateDateString","parseDate","autoCorrectedPrefixAndSuffix","isCurrentCharParsable","monthNumber","peekedValue","peek","peekedDateString","peekedDate","patternSatisfied","datePartValue","textToParse","parsedValue","month_1","valueCandidate","symbolMap","hasLeadingZero","setLeadingZero","getLeadingZero","twoDigitYear","centuryBase","getNormalizedCenturyBase","parts","names","peekValue","typedChar","toLowerCase","monthAsNum","lowerChart","am","pm","locale","dateFormatParts","dateFormatNames","test","partLength","returnValue","resultText","resultFormat","processTextSymbolsEnded","ignoreFormatSymbolsCount","formatSymbolIndex","formatSymbolIndexModifier","dateFieldName","nameType","resetInvalidDatePart","shouldResetInvalidDate","modifyDateSymbolWithOffset","partIndex","segmentPart","maskPartIndex","KeyCode","defaultOptions","events","Observable","destroy","trigger","eventName","eventData","defaultPrevented","preventDefault","sender","DEFAULT_SEGMENT_STEP","DRAG_START","DROP","TOUCH_START","MOUSE_DOWN","MOUSE_UP","CLICK","INPUT","KEY_DOWN","FOCUS","BLUR","PASTE","MOUSE_SCROLL","MOUSE_WHEEL","VALUE_CHANGE","INPUT_END","BLUR_END","FOCUS_END","CHANGE","defaultDateInputOptions","hasPlaceholder","placeholder","steps","millisecond","second","minute","selectNearestSegmentOnFocus","selectPreviousSegmentOnBackspace","enableMouseWheel","allowCaretMode","autoSwitchParts","autoSwitchKeys","autoFill","DateInput","_super","dateObject","currentText","currentFormat","interactionMode","None","previousElementSelection","dateValue","formattedValue","createDateObject","setTextAndFormat","bindEvents","forceUpdate","unbindEvents","onElementDragStart","bind","addEventListener","onElementDrop","onElementClick","onElementMouseDown","onElementMouseUp","onElementInput","onElementKeyDown","onElementFocus","onElementBlur","onElementChange","onElementPaste","onElementMouseWheel","removeEventListener","refresh","setDateObjectOptions","newOptions","getDateObjectOptions","resetLocale","Caret","focus","selectNearestSegment","mouseDownStarted","focusedPriorToMouseDown","isActive","switchedPartOnPreviousKeyAction","selection","detail","selectionPresent","selectionEnd","placeholderToggled","caret","setSelection","selectionByIndex","triggerInput","event","isPasteInProgress","updateOnPaste","keyDownEvent","isBackspaceKey","keyCode","isDeleteKey","originalInteractionMode","Selection","hasCaret","restorePreviousInputEventState","oldExistingDateValue","oldDateValue","previousElementValue","elementValue","navigationOnly","parsePartsResults","switchPart","parsePartResult","symbolForSelection","lastParseResult","lastParseResultHasNoValue","parsingFailedOnDelete","newExistingDateValue","hasExistingDateValueChanged","newDateValue","currentSelection","diffChar","forceUpdateWithSelection","switchDateSegment","selectionBySymbol","data","tryTriggerValueChange","oldValue","triggerInputEnd","triggerFocus","refreshElementValue","triggerFocusEnd","triggerBlur","triggerBlurEnd","triggerChange","triggerKeyDown","keyEventMatchesAutoSwitchKeys","isTabKey","shiftKey","getStepFromSymbol","shouldPreventDefault","altKey","ctrlKey","metaKey","modifyDateSegmentValue","triggerMouseWheel","wheelDelta","stopPropagation","inputFormat","oldDateObjectValue","writeValue","displayFormat","activeElement","setSelectionRange","currentSymbol","symbolCandidate","previousFormatSymbol","readonly","msDigits","triggerValueChange","elementValueLength","selectionOffset","setElementValue","restorePreviousElementValue","restorePreviousElementSelection","verifyValue","getDateObject","showPlaceholder","newElementValue","isPosition","disabled","selectDateSegment","begin","keyObject","trim","currentDate","__meta__","id","category","depends","window","kendo","jQuery","ui","DateInputCommon","kendo$1"],"sources":["kendo.dateinput.common.js"],"mappings":"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","sourcesContent":["import './kendo.core.js';\n\n/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  };\n  return __assign.apply(this, arguments);\n};\n\nfunction __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nfunction __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nfunction __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nfunction __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nfunction __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nfunction __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nfunction __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nfunction __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nfunction __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nvar __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nfunction __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nfunction __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nfunction __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nfunction __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nfunction __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nfunction __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nfunction __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nfunction __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nfunction __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nfunction __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nfunction __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nfunction __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nfunction __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nfunction __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nvar tslib_es6 = {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n};\n\n/**\n * A function that clones the passed date. The parameter could be `null`.\n *\n * @param date - The initial date value.\n * @returns - A new `Date` instance.\n *\n * @example\n * ```ts-no-run\n * cloneDate(new Date(2016, 0, 1)); // returns new Date(2016, 0, 1);\n * cloneDate(null); // returns null\n * ```\n */\nvar cloneDate = function (date) { return date ? new Date(date.getTime()) : null; };\n\n/**\n * @hidden\n */\nvar adjustDST = function (date, hour) {\n    var newDate = cloneDate(date);\n    if (hour === 0 && newDate.getHours() === 23) {\n        newDate.setHours(newDate.getHours() + 2);\n    }\n    return newDate;\n};\n\n/**\n * A function that adds and subtracts days from a `Date` object.\n *\n * @param date - The initial date value.\n * @param offset - The number of days to add and subtract from the date.\n * @returns - A new `Date` instance.\n *\n * @example\n * ```ts-no-run\n * addDays(new Date(2016, 0, 1), 5); // 2016-1-6\n * addDays(new Date(2016, 0, 1), -5); // 2015-12-26\n * ```\n */\nvar addDays = function (date, offset) {\n    var newDate = cloneDate(date);\n    newDate.setDate(newDate.getDate() + offset);\n    return adjustDST(newDate, date.getHours());\n};\n\n/**\n * A function which returns a new `Date` instance.\n *\n * @param year - The year value.\n * @param month - The month value.\n * @param day - The day value.\n * @param hours - The hours value.\n * @param minutes - The minutes value.\n * @param seconds - The seconds value.\n * @param milliseconds - milliseconds value.\n * @returns The date instance.\n *\n * @example\n * ```ts-no-run\n * createDate(2016, 0, 15); // 2016-01-15 00:00:00\n * createDate(2016, 0, 15, 22, 22, 20); // 2016-01-15 22:22:20\n * ```\n */\nvar createDate = function (year, month, day, hours, minutes, seconds, milliseconds) {\n    if (hours === void 0) { hours = 0; }\n    if (minutes === void 0) { minutes = 0; }\n    if (seconds === void 0) { seconds = 0; }\n    if (milliseconds === void 0) { milliseconds = 0; }\n    var date = new Date(year, month, day, hours, minutes, seconds, milliseconds);\n    if (year > -1 && year < 100) {\n        date.setFullYear(date.getFullYear() - 1900);\n    }\n    return adjustDST(date, hours);\n};\n\n/**\n * A function which returns the last date of the month.\n *\n * @param date - The initial date.\n * @returns - The last date of the initial date month.\n *\n * @example\n * ```ts-no-run\n * lastDayOfMonth(new Date(2016, 0, 15)); // 2016-01-31\n * ```\n */\nvar lastDayOfMonth = function (date) {\n    var newDate = createDate(date.getFullYear(), date.getMonth() + 1, 1, date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds());\n    return addDays(newDate, -1);\n};\n\nvar MONTHS_LENGTH = 12;\nvar normalize = function (date, expectedMonth) { return (date.getMonth() !== expectedMonth ? lastDayOfMonth(addMonths(date, -1)) : date //tslint:disable-line:no-use-before-declare\n); };\n/**\n * A function that adds and subtracts months from a `Date` object.\n *\n * @param date - The initial date value.\n * @param offset - The number of months to add or subtract from the date.\n * @returns - A new `Date` instance.\n *\n * @example\n * ```ts-no-run\n * addMonths(new Date(2016, 5, 1), 5); // 2016-11-1\n * addMonths(new Date(2016, 5, 1), -5); // 2015-1-1\n * ```\n */\nvar addMonths = function (date, offset) {\n    var newDate = cloneDate(date);\n    var diff = (newDate.getMonth() + offset) % MONTHS_LENGTH;\n    var expectedMonth = (MONTHS_LENGTH + diff) % MONTHS_LENGTH;\n    newDate.setMonth(newDate.getMonth() + offset);\n    return normalize(adjustDST(newDate, date.getHours()), expectedMonth);\n};\n\n/**\n * @hidden\n */\nvar setYear = function (value, year) {\n    var month = value.getMonth();\n    var candidate = createDate(year, month, value.getDate(), value.getHours(), value.getMinutes(), value.getSeconds(), value.getMilliseconds());\n    return candidate.getMonth() === month ? candidate : lastDayOfMonth(addMonths(candidate, -1));\n};\n\n/**\n * A function that adds and subtracts years from a `Date` object.\n *\n * @param date - The initial date value.\n * @param offset - The number of years to add or subtract from the date.\n * @returns - A new `Date` instance.\n *\n * @example\n * ```ts-no-run\n * addYears(new Date(2016, 5, 1), 5); // 2011-6-1\n * addYears(new Date(2016, 5, 1), -5); // 2021-6-1\n * ```\n */\nvar addYears = function (value, offset) {\n    return adjustDST(setYear(value, value.getFullYear() + offset), value.getHours());\n};\n\n/**\n * A function that adds and subtracts centuries from a `Date` object.\n *\n * @param date - The initial date value.\n * @param offset - The number of centuries to add or subtract from the date.\n * @returns - A new `Date` instance.\n *\n * @example\n * ```ts-no-run\n * addCenturies(new Date(2016, 5, 1), 5); // 2516-6-1\n * addCenturies(new Date(2016, 5, 1), -5); // 1516-6-1\n * ```\n */\nvar addCenturies = function (value, offset) {\n    return addYears(value, 100 * offset);\n};\n\n/**\n * A function that adds and subtracts decades from a `Date` object.\n *\n * @param date - The initial date value.\n * @param offset - The number of decades to add or subtract from the date.\n * @returns - A new `Date` instance.\n *\n * @example\n * ```ts-no-run\n * addDecades(new Date(2016, 5, 1), 5); // 2066-6-1\n * addDecades(new Date(2016, 5, 1), -5); // 1966-6-1\n * ```\n */\nvar addDecades = function (value, offset) {\n    return addYears(value, 10 * offset);\n};\n\n/**\n * A function that adds and subtracts weeks from a Date object.\n *\n * @param date - The initial date value.\n * @param offset - The number of weeks to add/subtract from the date.\n * @returns - A new `Date` instance.\n *\n * @example\n * ```ts-no-run\n * addWeeks(new Date(2016, 5, 1), 3); // 2016-6-22\n * addWeeks(new Date(2016, 5, 1), -3); // 2015-5-11\n * ```\n */\nvar addWeeks = function (date, offset) {\n    return addDays(date, offset * 7);\n};\n\n/**\n * The number of milliseconds in one minute.\n */\nvar MS_PER_MINUTE$1 = 60000;\n/**\n * The number of milliseconds in one hour.\n */\nvar MS_PER_HOUR = 3600000;\n/**\n * The number of milliseconds in one standard day.\n */\nvar MS_PER_DAY = 86400000;\n\n// tslint:disable:max-line-length\n/**\n * An enumeration which represents the horizontal direction. The `Forward` option moves forward. The `Backward` option moves backward.\n */\nvar Direction;\n(function (Direction) {\n    /**\n     * The `Forward` value with an underlying `1` number value.\n     */\n    Direction[Direction[\"Forward\"] = 1] = \"Forward\";\n    /**\n     * The `Backward` value with an underlying `-1` (minus one) number value.\n     */\n    Direction[Direction[\"Backward\"] = -1] = \"Backward\";\n})(Direction || (Direction = {}));\n// tslint:enable:max-line-length\n\n/**\n * @hidden\n *\n * A function which returns the next or previous date for a specific week day. For example, `Day.Monday`.\n *\n * @param date - The date to calculate from.\n * @param weekDay - The `Day` enum specifying the desired week day.\n * @param direction - The `Direction` enum specifying the calculation direction.\n * @returns - A `Date` instance.\n *\n * @example\n * ```ts-no-run\n * dayOfWeek(new Date(2016, 0, 1), Day.Wednesday, Direction.Forward); // 2016-01-06, Wednesday\n * dayOfWeek(new Date(2016, 0, 1), Day.Wednesday, Direction.Backward); // 2015-12-30, Wednesday\n * ```\n */\nvar dayOfWeek = function (date, weekDay, direction) {\n    if (direction === void 0) { direction = Direction.Forward; }\n    var newDate = cloneDate(date);\n    var newDay = ((weekDay - newDate.getDay()) + (7 * direction)) % 7;\n    newDate.setDate(newDate.getDate() + newDay);\n    return adjustDST(newDate, date.getHours());\n};\n\n/**\n * Enumeration which represents the week days.\n */\nvar Day;\n(function (Day) {\n    /**\n     * The Sunday value with an underlying `0` number value.\n     */\n    Day[Day[\"Sunday\"] = 0] = \"Sunday\";\n    /**\n     * The Monday value with an underlying `1` number value.\n     */\n    Day[Day[\"Monday\"] = 1] = \"Monday\";\n    /**\n     * The Tuesday value with an underlying `2` number value.\n     */\n    Day[Day[\"Tuesday\"] = 2] = \"Tuesday\";\n    /**\n     * The Wednesday value with an underlying `3` number value.\n     */\n    Day[Day[\"Wednesday\"] = 3] = \"Wednesday\";\n    /**\n     * The Thursday value with an underlying `4` number value.\n     */\n    Day[Day[\"Thursday\"] = 4] = \"Thursday\";\n    /**\n     * The Friday value with an underlying `5` number value.\n     */\n    Day[Day[\"Friday\"] = 5] = \"Friday\";\n    /**\n     * The Saturday value with an underlying `6` number value.\n     */\n    Day[Day[\"Saturday\"] = 6] = \"Saturday\";\n})(Day || (Day = {}));\n\n/**\n * @hidden\n */\nvar normalizeYear = function (value, year) { return (setYear(value, year(value.getFullYear()))); };\n\n/**\n * A function that returns a `Date` object of the first decade in a century.\n *\n * @param date - The start date value.\n * @returns - The first year in a century.\n *\n * @example\n * ```ts-no-run\n * firstDecadeOfCentury(new Date(2017, 0, 1)); // 2000-1-1\n * firstDecadeOfCentury(new Date(2007, 10, 22)); // 2000-11-22\n * firstDecadeOfCentury(new Date(2126, 0, 1)); // 2100-1-1\n * ```\n */\nvar firstDecadeOfCentury = function (value) { return (normalizeYear(value, function (y) { return y - (y % 100); })); };\n\n/**\n * A function that calculates duration in centuries between two `Date` objects.\n *\n * @param start - The start date value.\n * @param end - The end date value.\n * @returns - The duration in months.\n *\n * @example\n * ```ts-no-run\n * durationInCenturies(new Date(2016, 0, 1), new Date(3216, 0, 1)); // 12\n * durationInCenturies(new Date(2016, 6, 1), new Date(2617, 0, 1)); // 6\n * durationInCenturies(new Date(2016, 0, 1), new Date(2016, 0, 1)); // 0\n * ```\n */\nvar durationInCenturies = function (start, end) { return ((firstDecadeOfCentury(end).getFullYear() - firstDecadeOfCentury(start).getFullYear()) / 100); };\n\n/**\n * A function that returns a `Date` object of the first year in a decade.\n *\n * @param date - The start date value.\n * @returns - The first year in a decade.\n *\n * @example\n * ```ts-no-run\n * firstYearOfDecade(new Date(2017, 0, 1)); // 2010-1-1\n * firstYearOfDecade(new Date(2007, 10, 22)); // 2000-11-22\n * firstYearOfDecade(new Date(2026, 0, 1)); // 2020-1-1\n * ```\n */\nvar firstYearOfDecade = function (value) { return (normalizeYear(value, function (y) { return y - (y % 10); })); };\n\n/**\n * A function that calculates duration in decades between two `Date` objects.\n *\n * @param start - The start date value.\n * @param end - The end date value.\n * @returns - The duration in months.\n *\n * @example\n * ```ts-no-run\n * durationInDecades(new Date(2016, 0, 1), new Date(2136, 0, 1)); // 12\n * durationInDecades(new Date(2016, 0, 1), new Date(2016, 0, 1)); // 0\n * ```\n */\nvar durationInDecades = function (start, end) { return ((firstYearOfDecade(end).getFullYear() - firstYearOfDecade(start).getFullYear()) / 10); };\n\n/**\n * A function that calculates duration in months between two `Date` objects.\n *\n * @param start - The start date value.\n * @param end - The end date value.\n * @returns - The duration in months.\n *\n * @example\n * ```ts-no-run\n * durationInMonths(new Date(2016, 0, 1), new Date(2017, 0, 1)); // 12\n * durationInMonths(new Date(2016, 6, 1), new Date(2017, 0, 1)); // 6\n * durationInMonths(new Date(2016, 0, 1), new Date(2016, 0, 1)); // 0\n * ```\n */\nvar durationInMonths = function (start, end) { return (((end.getFullYear() - start.getFullYear())) * 12 + (end.getMonth() - start.getMonth())); };\n\n/**\n * A function that calculates duration in years between two `Date` objects.\n *\n * @param start - The start date value.\n * @param end - The end date value.\n * @returns - The duration in years.\n *\n * @example\n * ```ts-no-run\n * durationInYears(new Date(2016, 0, 1), new Date(2028, 0, 1)); // 12\n * durationInYears(new Date(2016, 0, 1), new Date(2022, 0, 1)); // 6\n * durationInYears(new Date(2016, 0, 1), new Date(2016, 0, 1)); // 0\n * ```\n */\nvar durationInYears = function (start, end) { return (end.getFullYear() - start.getFullYear()); };\n\n/**\n *  A function which returns the first date of the current week.\n *\n * @param date - The initial date.\n * @param weekStartDay [default: Day.Sunday] - The first day of the week.\n * @returns - The first date of the current week.\n *\n * @example\n * ```ts-no-run\n * firstDayInWeek(new Date(2016, 0, 15)); // 2016-01-10\n * firstDayInWeek(new Date(2016, 0, 15), Day.Monday); // 2016-01-11\n * ```\n */\nvar firstDayInWeek = function (date, weekStartDay) {\n    if (weekStartDay === void 0) { weekStartDay = Day.Sunday; }\n    var first = cloneDate(date);\n    while (first.getDay() !== weekStartDay) {\n        first.setDate(first.getDate() - 1);\n    }\n    return first;\n};\n\n/**\n * A function which returns the first date of the month.\n *\n * @param date - The initial date.\n * @returns - The first date of the initial date month.\n *\n * @example\n * ```ts-no-run\n * firstDayOfMonth(new Date(2016, 0, 15)); // 2016-01-01\n * ```\n */\nvar firstDayOfMonth = function (date) {\n    return createDate(date.getFullYear(), date.getMonth(), 1, date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds());\n};\n\n/**\n * @hidden\n */\nvar setMonth = function (value, month) {\n    var day = value.getDate();\n    var candidate = createDate(value.getFullYear(), month, day, value.getHours(), value.getMinutes(), value.getSeconds(), value.getMilliseconds());\n    return candidate.getDate() === day ? candidate : lastDayOfMonth(addMonths(candidate, -1));\n};\n\n/**\n * A function that returns a `Date` object of the first month in a year.\n *\n * @param date - The start date value.\n * @returns - The first month in a year.\n *\n * @example\n * ```ts-no-run\n * firstMonthOfYear(new Date(2017, 11, 1)); // 2017-1-1\n * firstMonthOfYear(new Date(2017, 0, 1)); // 2017-1-1\n * ```\n */\nvar firstMonthOfYear = function (value) { return setMonth(value, 0); };\n\n/**\n * A function which returns the passed date with a midnight time portion.\n *\n * @param date - The initial date.\n * @returns - The date with a midnight time portion.\n *\n * @example\n * ```ts-no-run\n * getDate(new Date(2016, 0, 15, 14, 30, 30)); // 2016-01-15 00:00:00\n * ```\n */\nvar getDate = function (date) {\n    return createDate(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0);\n};\n\n/**\n * A function that compares two dates. The comparison also includes the time portion.\n *\n * @param candidate - The candidate date.\n * @param expected - The expected date.\n * @returns - A Boolean value indicating whether the values are equal.\n *\n * @example\n * ```ts-no-run\n * isEqual(new Date(2016, 0, 1), new Date(2016, 0, 1)); // true\n * isEqual(new Date(2016, 0, 1), new Date(2016, 0, 2)); // false\n * isEqual(new Date(2016, 0, 1, 10), new Date(2016, 0, 1, 20)); // false\n * ```\n */\nvar isEqual = function (candidate, expected) {\n    if (!candidate && !expected) {\n        return true;\n    }\n    return candidate && expected && candidate.getTime() === expected.getTime();\n};\n\n/**\n * A function that compares the date portions of 2 dates.\n *\n * @param candidate - The candidate date.\n * @param expected - The expected date.\n * @returns - A Boolean value whether the values are equal.\n *\n * @example\n * ```ts-no-run\n * isEqualDate(new Date(2016, 0, 1, 10), new Date(2016, 0, 1, 20)); // true\n * isEqualDate(new Date(2016, 0, 1, 10), new Date(2016, 0, 2, 10)); // false\n * ```\n */\nvar isEqualDate = function (candidate, expected) {\n    if (!candidate && !expected) {\n        return true;\n    }\n    return candidate && expected && isEqual(getDate(candidate), getDate(expected));\n};\n\n/**\n * A function that returns a `Date` object of the last decade in a century.\n *\n * @param date - The start date value.\n * @returns - The last year in a decade.\n *\n * @example\n * ```ts-no-run\n * lastDecadeOfCentury(new Date(2017, 0, 1)); // 2090-1-1\n * lastDecadeOfCentury(new Date(2007, 10, 22)); // 2090-11-22\n * lastDecadeOfCentury(new Date(2126, 0, 1)); // 2190-1-1\n * ```\n */\nvar lastDecadeOfCentury = function (value) { return (normalizeYear(value, function (y) { return y - (y % 100) + 90; })); };\n\n/**\n * A function that returns a `Date` object of the last month in a year.\n *\n * @param date - The start date value.\n * @returns - The last month in a year.\n *\n * @example\n * ```ts-no-run\n * lastMonthOfYear(new Date(2017, 5, 3)); // 2017-12-3\n * lastMonthOfYear(new Date(2017, 11, 3)); // 2017-12-3\n * ```\n */\nvar lastMonthOfYear = function (value) { return setMonth(value, 11); };\n\n/**\n * A function that returns a `Date` object of the last year in a decade.\n *\n * @param date - The start date value.\n * @returns - The last year in a decade.\n *\n * @example\n * ```ts-no-run\n * lastYearOfDecade(new Date(2017, 0, 1)); // 2019-1-1\n * lastYearOfDecade(new Date(2007, 10, 22)); // 2009-11-22\n * lastYearOfDecade(new Date(2026, 0, 1)); // 2029-1-1\n * ```\n */\nvar lastYearOfDecade = function (value) { return (normalizeYear(value, function (y) { return y - (y % 10) + 9; })); };\n\n/**\n * A function which returns a date by a specific week name. For example, `Day.Monday`.\n *\n * @param date - The date to calculate from.\n * @param weekDay - The `Day` enum specifying the desired week day.\n * @returns - A `Date` instance.\n *\n * @example\n * ```ts-no-run\n * nextDayOfWeek(new Date(2016, 0, 1), Day.Wednesday); // 2016-01-06, Wednesday\n * ```\n */\nvar nextDayOfWeek = function (date, weekDay) {\n    return dayOfWeek(date, weekDay, Direction.Forward);\n};\n\n/**\n * A function which returns a date by a specific week name. For example, `Day.Monday`.\n *\n * @param date - The date to calculate from.\n * @param weekDay - The `Day` enum specifying the desired week day.\n * @returns - A `Date` instance.\n *\n * @example\n * ```ts-no-run\n * prevDayOfWeek(new Date(2016, 0, 1), Day.Wednesday); // 2015-12-30, Wednesday\n * ```\n */\nvar prevDayOfWeek = function (date, weekDay) {\n    return dayOfWeek(date, weekDay, Direction.Backward);\n};\n\n/**\n * @hidden\n *\n * An object which contains the information about the cities within the timezone.\n */\nvar timezones = {\n    rules: {},\n    titles: {},\n    zones: {}\n};\n\nvar MONTHS = { Jan: 0, Feb: 1, Mar: 2, Apr: 3, May: 4, Jun: 5, Jul: 6, Aug: 7, Sep: 8, Oct: 9, Nov: 10, Dec: 11 };\nvar DAYS = { Sun: 0, Mon: 1, Tue: 2, Wed: 3, Thu: 4, Fri: 5, Sat: 6 };\nvar MS_PER_MINUTE = 60000;\n/**\n * @hidden\n *\n * A function that finds zone rules which become applicable after a specific time.\n *\n * @param year - The value of the year.\n * @param rule - A specific zone rule.\n * @param zone - The definition of the zone.\n *\n * @return - Returns an extended rule.\n *\n * @example\n * ```ts-no-run\n * ruleToDate(2018, rule); // A rule that contains {'2018': |2018 DST date| }\n * ```\n */\nvar ruleToDate = function (year, rule, zoneOffset) {\n    var month = rule[3];\n    var on = rule[4];\n    var time = rule[5];\n    var date;\n    var ruleOffset = time[3] === 'u' ? -zoneOffset * MS_PER_MINUTE : 0;\n    if (!isNaN(on)) {\n        date = new Date(Date.UTC(year, MONTHS[month], on, time[0], time[1], time[2]) + ruleOffset);\n    }\n    else if (on.indexOf('last') === 0) {\n        date = new Date(Date.UTC(year, MONTHS[month] + 1, 1, time[0] - 24, time[1], time[2]) + ruleOffset);\n        var targetDay = DAYS[on.substr(4, 3)];\n        var ourDay = date.getUTCDay();\n        date.setUTCDate(date.getUTCDate() + targetDay - ourDay - (targetDay > ourDay ? 7 : 0));\n    }\n    else if (on.indexOf('>=') >= 0) {\n        date = new Date(Date.UTC(year, MONTHS[month], on.substr(5), time[0], time[1], time[2], 0) + ruleOffset);\n        var targetDay = DAYS[on.substr(0, 3)];\n        var ourDay = date.getUTCDay();\n        date.setUTCDate(date.getUTCDate() + targetDay - ourDay + (targetDay < ourDay ? 7 : 0));\n    }\n    return date;\n};\n\nvar CURRENT_UTC_TIME = (new Date()).getTime();\n/**\n * @hidden\n *\n * A function that finds zone rules which become applicable after a specific time.\n *\n * @param timezone - The timezone name. For example, `America/Chicago`, `Europe/Sofia`.\n * @param utcTime - The UTC time boundary for a zone rule. Defaults to the current UTC time.\n *\n * @return - Returns a zone rule for the specific zone name.\n *\n * @example\n * ```ts-no-run\n * findZone('Europe/Sofia'); //[-120,\"EU\",\"EE%sT\",null]\n * ```\n */\nvar findRule = function (zoneRule, utcTime, zoneOffset) {\n    if (utcTime === void 0) { utcTime = CURRENT_UTC_TIME; }\n    if (zoneOffset === void 0) { zoneOffset = 0; }\n    var rules = timezones.rules[zoneRule];\n    if (!rules) {\n        var time = zoneRule.split(\":\");\n        var offset = 0;\n        if (time.length > 1) {\n            offset = time[0] * 60 + Number(time[1]);\n        }\n        return [-1000000, 'max', '-', 'Jan', 1, [0, 0, 0], offset, '-'];\n    }\n    var year = new Date(utcTime).getUTCFullYear();\n    rules = rules.filter(function (currentRule) {\n        var from = currentRule[0];\n        var to = currentRule[1];\n        return from <= year && (to >= year || (from === year && to === \"only\") || to === \"max\");\n    });\n    rules.push(utcTime);\n    rules.sort(function (a, b) {\n        if (typeof a !== \"number\") {\n            a = Number(ruleToDate(year, a, zoneOffset));\n        }\n        if (typeof b !== \"number\") {\n            b = Number(ruleToDate(year, b, zoneOffset));\n        }\n        return a - b;\n    });\n    var rule = rules[rules.indexOf(utcTime) - 1] || rules[rules.length - 1];\n    return isNaN(rule) ? rule : null;\n};\n\n/** @hidden */\nvar NO_TZ_INFO = 'The required {0} timezone information is not provided!';\n/** @hidden */\nvar INVALID_TZ_STRUCTURE = 'The provided timezone information has invalid stucture!';\nvar formatRegExp = /\\{(\\d+)}?\\}/g;\nvar flatten = function (arr) { return arr.reduce(function (a, b) { return a.concat(b); }, []); };\n/** @hidden */\nvar formatMessage = function (message) {\n    var values = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        values[_i - 1] = arguments[_i];\n    }\n    var flattenValues = flatten(values);\n    return message.replace(formatRegExp, function (_, index) { return flattenValues[parseInt(index, 10)]; });\n};\n\n/**\n * @hidden\n *\n * A function that gets all zone rules for a specific zone.\n *\n * @param timezone - The timezone name. For example, `America/Chicago`, `Europe/Sofia`.\n *\n * @return - Returns all zone rules for the specific zone name.\n *\n * @example\n * ```ts-no-run\n * findZone('Europe/Sofia'); //[[-120,\"E-Eur\",\"EE%sT\",883526400000], [-120,\"EU\",\"EE%sT\",null]]\n * ```\n */\nvar getZoneRules = function (timezone) {\n    var zones = timezones.zones;\n    if (!zones) {\n        throw new Error(formatMessage(NO_TZ_INFO, timezone));\n    }\n    var zoneRules = zones[timezone];\n    var result = typeof zoneRules === \"string\" ? zones[zoneRules] : zoneRules;\n    if (!result) {\n        throw new Error(formatMessage(NO_TZ_INFO, timezone));\n    }\n    return result;\n};\n\n/**\n * @hidden\n *\n * A function that finds zone rules which become applicable after specific time.\n */\nvar findZone = function (timezone, utcTime) {\n    if (utcTime === void 0) { utcTime = new Date().getTime(); }\n    if (timezone === 'Etc/UTC' || timezone === 'Etc/GMT') {\n        return [0, \"-\", \"UTC\", null];\n    }\n    var zoneRules = getZoneRules(timezone);\n    var idx = zoneRules.length - 1;\n    for (; idx >= 0; idx--) {\n        var until = zoneRules[idx][3];\n        if (until && utcTime > until) {\n            break;\n        }\n    }\n    var zone = zoneRules[idx + 1];\n    if (!zone) {\n        throw new Error(formatMessage(NO_TZ_INFO, timezone));\n    }\n    return zone;\n};\n\n/**\n * @hidden\n *\n * A function that gets the information about the zone and the rule for a specific timezone.\n *\n */\nvar zoneAndRule = function (timezone, date) {\n    var utcTime = date.getTime();\n    var zone = findZone(timezone, utcTime);\n    return {\n        rule: findRule(zone[1], utcTime, zone[0]),\n        zone: zone\n    };\n};\n\n// tslint:disable:max-line-length\n/**\n * A function which returns the abbreviated name of the timezone. You can specify an optional date for returning the timezone name at a different point in time. The corresponding UTC date is used for locating the relevant rule. Timezone names change both historically and when they reflect the Daylight Savings Time rules.\n *\n * @param timezone - The timezone name. For example, `America/Chicago`, `Europe/Sofia`.\n * @param date - A date for which to locate the zone rule. By default, the current time is used.\n *\n * @return - The abbreviated name of the timezone at the specified date or, if not set, returns now.\n *\n * @example\n * ```ts-no-run\n * import { abbrTimezone } from '@progress/kendo-date-math';\n * import '@progress/kendo-date-math/tz/Europe/Sofia';\n *\n * const dstDate = new Date('2018-04-01T00:00:00Z');\n * console.log(abbrTimezone('Europe/Sofia', dstDate)); // EEST\n *\n * const date = new Date('2018-01-01T00:00:00Z');\n * console.log(abbrTimezone('Europe/Sofia', date)); // EET\n * ```\n */\n// tslint:enable:max-line-length\nvar abbrTimezone = function (timezone, date) {\n    if (date === void 0) { date = new Date(); }\n    if (timezone === \"Etc/UTC\") {\n        return 'UTC';\n    }\n    if (timezone === \"Etc/GMT\") {\n        return 'GMT';\n    }\n    if (timezone === '') {\n        return '';\n    }\n    var _a = zoneAndRule(timezone, date), zone = _a.zone, rule = _a.rule;\n    var base = zone[2];\n    if (base.indexOf(\"/\") >= 0) {\n        return base.split(\"/\")[rule && +rule[6] ? 1 : 0];\n    }\n    else if (base.indexOf(\"%s\") >= 0) {\n        return base.replace(\"%s\", (!rule || rule[7] === \"-\") ? '' : rule[7]);\n    }\n    return base;\n};\n\n// tslint:disable:max-line-length\n/**\n * A function that loads the information about the provided timezone. The details for the loaded timezone will be available to all functions that are related to the manipulation of the timezone.\n *\n * @param timezoneInfo - The information about the timezone that will be loaded.\n *\n * @example\n * ```ts-no-run\n * loadTimezone({ zones: [...], rules: [...]});\n * ```\n */\n// tslint:enable:max-line-length\nvar loadTimezone = function (tzInfo) {\n    if (!tzInfo) {\n        throw new Error(formatMessage(NO_TZ_INFO, ''));\n    }\n    var rules = tzInfo.rules, titles = tzInfo.titles, zones = tzInfo.zones;\n    if (rules === undefined || zones === undefined) {\n        throw new Error(INVALID_TZ_STRUCTURE);\n    }\n    Object.assign(timezones.rules, rules);\n    Object.assign(timezones.titles, titles || {});\n    Object.assign(timezones.zones, zones);\n};\n\n/**\n * @hidden\n *\n * A function that calculates the time offset based on zone name.\n *\n * @param timezone - The timezone name. For example, `America/Chicago`, `Europe/Sofia`.\n * @param date - A date for which the zone rule will be located.\n *\n * @return - Returns the timezone offset in minutes at the specified time.\n */\nvar offset = function (timezone, date) {\n    if (date === void 0) { date = new Date(); }\n    if (timezone === 'Etc/UTC' || timezone === 'Etc/GMT') {\n        return 0;\n    }\n    if (timezone === '') {\n        return date.getTimezoneOffset();\n    }\n    var _a = zoneAndRule(timezone, date), rule = _a.rule, zone = _a.zone;\n    return parseFloat(rule ? zone[0] - rule[6] : zone[0]);\n};\n\n/**\n * A function that returns a list of grouped timezone names.\n *\n * @return - Returns a list of grouped timezone names.\n *\n * @example\n * ```ts-no-run\n * import '@progress/kendo-date-math/timezones/europe-berlin';\n * import '@progress/kendo-date-math/timezones/europe-sofia';\n *\n * timezoneGroupNames(); // ['(GMT+01:00) Amsterdam, Berlin, ...', '(GMT+02:00) Sofia, Tallinn...']\n * ```\n */\nvar timezoneGroupNames = function () {\n    var groups = Object.keys(timezones.titles).reduce(function (tmp, t) {\n        var group = timezones.titles[t].group;\n        tmp[group] = group;\n        return tmp;\n    }, {});\n    return Object.keys(groups);\n};\n\n/**\n * A function that returns the list of all timezones that are loaded.\n *\n * @return - Returns the list of all timezones that are loaded.\n *\n * @example\n * ```ts-no-run\n * import '@progress/kendo-date-math/timezones/europe-berlin';\n * import '@progress/kendo-date-math/timezones/europe-sofia';\n *\n * timezoneNames(); // ['Europe/Berlin', 'Europe/Sofia']\n * ```\n */\nvar timezoneNames = function () { return Object.keys(timezones.zones); };\n\n/**\n * A function that returns the full name of the timezone.\n *\n * @param timezone - The timezone name. For example, `America/Chicago`, `Europe/Sofia`.\n *\n * @return - Returns the full names of the timezone and the group.\n *\n * @example\n * ```ts-no-run\n * timezoneTitle('America/Chicago'); // Central Standard Time\n * ```\n */\nvar timezoneTitle = function (timezone) {\n    var titles = timezones.titles;\n    var info = titles[timezone] || {};\n    return info.long || timezone;\n};\n\n/**\n * A function that creates a local date from the UTC date parts of the input.\n *\n * @param date - The date value that will be converted. Only the UTC date parts are read.\n * @return Date - A local date with the UTC time parts of the supplied date.\n *\n * @example\n * ```ts-no-run\n * import { toLocalDate } from '@progress/kendo-date-math'\n *\n * const date = new Date('2016-11-05');\n * const local = toLocalDate(date);\n *\n * // For example, if the browser is in GMT+0200,\n * // the local date will be shifted 2 hours back:\n * //\n * // \"Fri Nov 04 2016 22:00:00 GMT+0200\"\n * console.log(local);\n *\n * // This is the same as the UTC parts of the input date:\n * //\n * // \"2016-11-05T22:00:00.000Z\"\n * console.log(date.toISOString());\n * ```\n */\nfunction toLocalDate(date) {\n    return new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds(), date.getUTCMilliseconds());\n}\n\nvar addMinutes = function (date, minutes) { return new Date(date.getTime() + minutes * MS_PER_MINUTE$1); };\nvar addHours = function (date, hours) { return new Date(date.getTime() + hours * MS_PER_HOUR); };\nvar dayAbbr = [\n    'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'\n];\nvar monthAbbr = [\n    'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dev'\n];\nvar datePrefix = function (utcDate) {\n    return dayAbbr[utcDate.getUTCDay()] + ' ' + monthAbbr[utcDate.getUTCMonth()];\n};\nvar padNumber = function (num, len) {\n    if (len === void 0) { len = 2; }\n    var sign = num < 0 ? '-' : '';\n    return sign + new Array(len).concat([Math.abs(num)]).join('0').slice(-len);\n};\nfunction isZoneMissingHour(date, timezone) {\n    var currentOffset = offset(timezone, date);\n    var prevHour = addHours(date, -1);\n    var prevOffset = offset(timezone, prevHour);\n    return currentOffset < prevOffset;\n}\nfunction shiftZoneMissingHour(utcDate, timezone) {\n    // Adjust for missing hour during DST transition in timezone.\n    var dstOffset = isZoneMissingHour(utcDate, timezone) ? 1 : 0;\n    return addHours(utcDate, dstOffset);\n}\nfunction convertTimezoneUTC(utcLocal, fromTimezone, toTimezone) {\n    if (fromTimezone === toTimezone) {\n        return utcLocal;\n    }\n    var fromOffset = offset(fromTimezone, utcLocal);\n    var toOffset = offset(toTimezone, utcLocal);\n    var baseDiff = fromOffset - toOffset;\n    var midDate = addMinutes(utcLocal, baseDiff);\n    var midOffset = offset(toTimezone, midDate);\n    var dstDiff = toOffset - midOffset;\n    return addMinutes(utcLocal, baseDiff + dstDiff);\n}\nfunction formatOffset(tzOffset) {\n    var sign = tzOffset <= 0 ? '+' : '-';\n    var value = Math.abs(tzOffset);\n    var hours = padNumber(Math.floor(value / 60));\n    var minutes = padNumber(value % 60);\n    return \"GMT\" + sign + hours + minutes;\n}\n/**\n * Represents a local date in a specified timezone.\n *\n * The following example demonstrates how to convert a local date to the specified timezone.\n *\n * @example\n * ```ts-no-run\n * import { ZonedDate } from '@progress/kendo-date-math';\n * import '@progress/kendo-date-math/tz/America/New_York';\n *\n * const date = new Date('2018-03-13T00:00:00Z');\n * const tzDate = ZonedDate.fromLocalDate(date, 'America/New_York');\n *\n * // If you run this example in GMT+0200,\n * // the output will be '2018-03-12T22:00:00.000Z'.\n * console.log(tzDate.toISOString());\n * ```\n *\n * The following example demonstrates how to convert between timezones.\n *\n * @example\n * ```ts-no-run\n * import { ZonedDate } from '@progress/kendo-date-math';\n * import '@progress/kendo-date-math/tz/America/New_York';\n * import '@progress/kendo-date-math/tz/America/Los_Angeles';\n *\n * // Note the \"Z\" suffix for UTC dates.\n * const date = new Date('2018-03-12T22:00:00Z');\n *\n * const tzDate = ZonedDate.fromLocalDate(date, 'America/New_York');\n * const result = tzDate.toTimezone('America/Los_Angeles');\n *\n * // Regardless of the browser timezone\n * // the output will be '2018-03-12T15:00:00.000Z'.\n * console.log(tzDate.toUTCDate());\n * ```\n */\nvar ZonedDate = /** @class */ (function () {\n    // The constructor is aliased as a static fromUTCDate method\n    // to clarify the meaning of the utcDate parameter.\n    //\n    // It can be confused for a local date time while it is in fact\n    // treated as a UTC date that represents the local date in the timezone.\n    function ZonedDate(utcDate, timezone) {\n        this._utcDate = cloneDate(utcDate);\n        this.timezone = timezone;\n        var tzOffset = offset(timezone, utcDate);\n        this.timezoneOffset = tzOffset;\n        var localDate = shiftZoneMissingHour(utcDate, timezone);\n        this._localDate = convertTimezoneUTC(localDate, timezone, 'Etc/UTC');\n    }\n    Object.defineProperty(ZonedDate.prototype, \"cachedLocalDate\", {\n        /**\n         * Returns a cached local date that denotes the exact time in the set timezone.\n         *\n         * @return Date - A local date that denotes the exact time in the set timezone.\n         *\n         * This property is an alternative to `toLocalDate()` that returns a cached value instead of cloning it.\n         *\n         * > Modifying the returned instance will corrupt the `ZonedDate` state.\n         */\n        get: function () {\n            return this._localDate;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ZonedDate.prototype, \"cachedUTCDate\", {\n        /**\n         * Returns a cached `Date` instance with UTC date parts that are set to the local time in the set timezone.\n         *\n         * @returns Date - A `Date` with UTC date parts that are set to the local time in the set timezone.\n         *\n         * This property is an alternative to `toUTCDate()` that returns a cached value instead of cloning it.\n         *\n         * > Modifying the returned instance will corrupt the `ZonedDate` state.\n         */\n        get: function () {\n            return this._utcDate;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // tslint:disable:max-line-length\n    /**\n     * Converts an existing date to a specified timezone.\n     *\n     * If the `timezone` parameter is omitted, the `ZonedDate` defaults to the timezone of the browser. This concept is known as \"floating date\" because it does not represent a particular moment in time. Instead, its actual value depends on the current timezone of the browser.\n     *\n     * @param date - The local date that represents the actual time instance.\n     * @param timezone - The ID of the timezone that will be assumed. For example, `Europe/Sofia`.\n     * @return ZonedDate - The date in the specified timezone.\n     *\n     * @example\n     * ```ts-no-run\n     * import { ZonedDate } from '@progress/kendo-date-math';\n     * import '@progress/kendo-date-math/tz/America/New_York';\n     *\n     * const date = new Date('2018-03-13T00:00:00');\n     * const tzDate = ZonedDate.fromLocalDate(date, 'America/New_York');\n     *\n     * // If you run this example in GMT+0200,\n     * // the output will be 'Mon Mar 12 2018 18:00:00 GMT+0200 (EET)'.\n     * console.log(tzDate.toString());\n     *\n     * // If you run this example in UTC,\n     * // the output will be '2018-03-12T22:00:00.000Z'.\n     * console.log(tzDate.toISOString());\n     * ```\n     */\n    // tslint:enable:max-line-length\n    ZonedDate.fromLocalDate = function (date, timezone) {\n        if (timezone === void 0) { timezone = ''; }\n        var utcDate = convertTimezoneUTC(date, 'Etc/UTC', timezone);\n        var shiftZone = isZoneMissingHour(utcDate, timezone);\n        var zoneOffset = offset(timezone, utcDate);\n        var fixedOffset = 0;\n        if (shiftZone) {\n            // Adjust for the missing hour during the DST transition in the timezone.\n            fixedOffset = zoneOffset > 0 ? -1 : 1;\n        }\n        var adjDate = addHours(utcDate, fixedOffset);\n        return ZonedDate.fromUTCDate(adjDate, timezone);\n    };\n    // tslint:disable:max-line-length\n    /**\n     * Creates a date in a specific timezone from the UTC date parts of the supplied `Date`.\n     *\n     * If the `timezone` parameter is omitted, the `ZonedDate` defaults to the timezone of the browser. This concept is known as \"floating date\" because it does not represent a particular moment in time. Instead, its actual value depends on the current timezone of the browser.\n     *\n     * @param date - The UTC date that represents the time in the target zone. This time is not the actual time instant in UTC.\n     * @param timezone - The ID of the timezone that will be assumed. For example, `Europe/Sofia`.\n     * @return ZonedDate - The date in the specified timezone.\n     *\n     * @example\n     * ```ts-no-run\n     * import { ZonedDate } from '@progress/kendo-date-math';\n     * import '@progress/kendo-date-math/tz/America/New_York';\n     *\n     * // Note the \"Z\" suffix for UTC dates.\n     * const date = new Date('2018-03-12T18:00:00Z');\n     *\n     * // Alternative syntax using Date.UTC\n     * // const date = new Date(Date.UTC(2018, 2, 12, 18, 0));\n     *\n     * const tzDate = ZonedDate.fromUTCDate(date, 'America/New_York');\n     *\n     * // Regardless of the browser timezone\n     * // the output will be 'Mon Mar 12 2018 18:00:00 GMT+0200 (EET)'.\n     * console.log(tzDate.toString());\n     *\n     * // Regardless of the browser timezone\n     * // the output in UTC will be '2018-03-12T22:00:00.000Z'.\n     * console.log(tzDate.toISOString());\n     * ```\n     */\n    // tslint:enable:max-line-length\n    ZonedDate.fromUTCDate = function (utcDate, timezone) {\n        if (timezone === void 0) { timezone = ''; }\n        return new ZonedDate(utcDate, timezone);\n    };\n    /**\n     * Returns a local date that denotes the exact time in the set timezone.\n     *\n     * @return Date - A local date that denotes the exact time in the set timezone.\n     *\n     * @example\n     * ```ts-no-run\n     * import { ZonedDate } from '@progress/kendo-date-math';\n     * import '@progress/kendo-date-math/tz/America/New_York';\n     *\n     * // Note the \"Z\" suffix for UTC dates.\n     * const date = new Date('2018-03-12T18:00:00Z');\n     * const tzDate = ZonedDate.fromUTCDate(date, 'America/New_York');\n     *\n     * // The local date represents the same moment in time as the ZonedDate:\n     * // `2018-03-12T22:00:00.000Z`.\n     * console.log(tzDate.toLocalDate().toISOString());\n     *\n     * // The local date will apply the timezone of the browser. For example,\n     * // `Tue Mar 13 2018 00:00:00 GMT+0200 (Eastern European Standard Time)`.\n     * console.log(tzDate.toLocalDate().toString())\n     * ```\n     */\n    ZonedDate.prototype.toLocalDate = function () {\n        return cloneDate(this._localDate);\n    };\n    /**\n     * Returns a `Date` instance with UTC date parts that are set to the local time in the set timezone.\n     *\n     * @returns Date - A `Date` with UTC date parts that are set to the local time in the set timezone.\n     *\n     * @example\n     * ```ts-no-run\n     * import { ZonedDate } from '@progress/kendo-date-math';\n     * import '@progress/kendo-date-math/tz/America/New_York';\n     *\n     * // Note the \"Z\" suffix for UTC dates.\n     * const date = new Date('2018-03-12T18:00:00Z');\n     * const tzDate = ZonedDate.fromUTCDate(date, 'America/New_York');\n     *\n     * // Regardless of the browser timezone\n     * // the output will be '2018-03-12T18:00:00.000Z'.\n     * console.log(tzDate.toUTCDate());\n     * ```\n     */\n    ZonedDate.prototype.toUTCDate = function () {\n        return cloneDate(this._utcDate);\n    };\n    /**\n     * Converts the date to the specified timezone.\n     *\n     * @param toTimezone - The timezone to which the values will be converted. For example, `America/Los_Angeles`.\n     * @returns ZonedDate - The resulting zoned date.\n     *\n     * @example\n     * ```ts-no-run\n     * import { ZonedDate } from '@progress/kendo-date-math';\n     * import '@progress/kendo-date-math/tz/America/New_York';\n     * import '@progress/kendo-date-math/tz/America/Los_Angeles';\n     *\n     * // Note the \"Z\" suffix for UTC dates.\n     * const date = new Date('2018-03-12T22:00:00Z');\n     *\n     * const tzDate = ZonedDate.fromLocalDate(date, 'America/New_York');\n     * const result = tzDate.toTimezone('America/Los_Angeles');\n     *\n     * // Regardless of the browser timezone\n     * // the output will be '2018-03-12T15:00:00.000Z'.\n     * console.log(tzDate.toUTCDate());\n     * ```\n     */\n    ZonedDate.prototype.toTimezone = function (toTimezone) {\n        if (this.timezone === toTimezone) {\n            return this.clone();\n        }\n        var tzOffset = offset(this.timezone, this._utcDate);\n        var date = addMinutes(this._utcDate, tzOffset);\n        return ZonedDate.fromLocalDate(date, toTimezone);\n    };\n    /**\n     * Returns a new instance that represents the same date.\n     *\n     * @returns Date - A copy of the instance of the current zoned date.\n     */\n    ZonedDate.prototype.clone = function () {\n        return ZonedDate.fromUTCDate(this._utcDate, this.timezone);\n    };\n    // tslint:disable:max-line-length\n    /**\n     * Adds the specified number of days and returns a new instance with the resulting date in the same timezone.\n     *\n     * @param days - The number of days that will be added.\n     * @returns ZonedDate - The resulting date.\n     */\n    // tslint:enable:max-line-length\n    ZonedDate.prototype.addDays = function (days) {\n        var newDate = new Date(this._utcDate.getTime());\n        newDate.setUTCDate(newDate.getUTCDate() + days);\n        return ZonedDate.fromUTCDate(newDate, this.timezone);\n    };\n    // tslint:disable:max-line-length\n    /**\n     * Adds the specified number of milliseconds and returns a new instance with the resulting date in the same timezone.\n     *\n     * The method compensates for DST transitions and ensures that the resulting date occurs exactly after the set amount of time in the timezone.\n     *\n     * @param milliseconds - The number of days that will be added.\n     * @returns ZonedDate - The resulting date.\n     */\n    // tslint:enable:max-line-length\n    ZonedDate.prototype.addTime = function (milliseconds) {\n        var utcDate = new Date(this._utcDate.getTime());\n        var utcMid = shiftZoneMissingHour(utcDate, this.timezone);\n        utcMid.setTime(utcMid.getTime() + milliseconds);\n        var utcResult = shiftZoneMissingHour(utcMid, this.timezone);\n        return ZonedDate.fromUTCDate(utcResult, this.timezone);\n    };\n    // tslint:disable:max-line-length\n    /**\n     * Returns a new instance of the same zoned date having its time parts set to `00:00:00.000`.\n     *\n     * @returns ZonedDate - The same date having its time parts set to `00:00:00.000`.\n     */\n    // tslint:enable:max-line-length\n    ZonedDate.prototype.stripTime = function () {\n        var date = this._utcDate;\n        var ticks = Date.UTC(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), 0, 0, 0);\n        return ZonedDate.fromUTCDate(new Date(ticks), this.timezone);\n    };\n    /**\n     * @hidden\n     */\n    ZonedDate.prototype.getTime = function () {\n        return this._localDate.getTime();\n    };\n    /**\n     * @hidden\n     */\n    ZonedDate.prototype.getTimezoneOffset = function () {\n        return this.timezoneOffset;\n    };\n    /**\n     * @hidden\n     */\n    ZonedDate.prototype.getFullYear = function () {\n        return this._utcDate.getUTCFullYear();\n    };\n    /**\n     * @hidden\n     */\n    ZonedDate.prototype.getMonth = function () {\n        return this._utcDate.getUTCMonth();\n    };\n    /**\n     * @hidden\n     */\n    ZonedDate.prototype.getDate = function () {\n        return this._utcDate.getUTCDate();\n    };\n    /**\n     * @hidden\n     */\n    ZonedDate.prototype.getDay = function () {\n        return this._utcDate.getUTCDay();\n    };\n    /**\n     * @hidden\n     */\n    ZonedDate.prototype.getHours = function () {\n        return this._utcDate.getUTCHours();\n    };\n    /**\n     * @hidden\n     */\n    ZonedDate.prototype.getMinutes = function () {\n        return this._utcDate.getUTCMinutes();\n    };\n    /**\n     * @hidden\n     */\n    ZonedDate.prototype.getSeconds = function () {\n        return this._utcDate.getUTCSeconds();\n    };\n    /**\n     * @hidden\n     */\n    ZonedDate.prototype.getMilliseconds = function () {\n        return this._utcDate.getUTCMilliseconds();\n    };\n    // The local date UTC parts represent actual UTC time\n    /**\n     * @hidden\n     */\n    ZonedDate.prototype.getUTCDate = function () {\n        return this._localDate.getUTCDate();\n    };\n    /**\n     * @hidden\n     */\n    ZonedDate.prototype.getUTCDay = function () {\n        return this._localDate.getUTCDay();\n    };\n    /**\n     * @hidden\n     */\n    ZonedDate.prototype.getUTCFullYear = function () {\n        return this._localDate.getUTCFullYear();\n    };\n    /**\n     * @hidden\n     */\n    ZonedDate.prototype.getUTCHours = function () {\n        return this._localDate.getUTCHours();\n    };\n    /**\n     * @hidden\n     */\n    ZonedDate.prototype.getUTCMilliseconds = function () {\n        return this._localDate.getUTCMilliseconds();\n    };\n    /**\n     * @hidden\n     */\n    ZonedDate.prototype.getUTCMinutes = function () {\n        return this._localDate.getUTCMinutes();\n    };\n    /**\n     * @hidden\n     */\n    ZonedDate.prototype.getUTCMonth = function () {\n        return this._localDate.getUTCMonth();\n    };\n    /** @hidden */\n    ZonedDate.prototype.getUTCSeconds = function () {\n        return this._localDate.getUTCSeconds();\n    };\n    /** @hidden */\n    ZonedDate.prototype.setTime = function (time) {\n        throw new Error(\"Method not implemented.\");\n    };\n    /** @hidden */\n    ZonedDate.prototype.setMilliseconds = function (ms) {\n        throw new Error(\"Method not implemented.\");\n    };\n    /** @hidden */\n    ZonedDate.prototype.setUTCMilliseconds = function (ms) {\n        throw new Error(\"Method not implemented.\");\n    };\n    /** @hidden */\n    ZonedDate.prototype.setSeconds = function (sec, ms) {\n        throw new Error(\"Method not implemented.\");\n    };\n    /** @hidden */\n    ZonedDate.prototype.setUTCSeconds = function (sec, ms) {\n        throw new Error(\"Method not implemented.\");\n    };\n    /** @hidden */\n    ZonedDate.prototype.setMinutes = function (min, sec, ms) {\n        throw new Error(\"Method not implemented.\");\n    };\n    /** @hidden */\n    ZonedDate.prototype.setUTCMinutes = function (min, sec, ms) {\n        throw new Error(\"Method not implemented.\");\n    };\n    /** @hidden */\n    ZonedDate.prototype.setHours = function (hours, min, sec, ms) {\n        throw new Error(\"Method not implemented.\");\n    };\n    /** @hidden */\n    ZonedDate.prototype.setUTCHours = function (hours, min, sec, ms) {\n        throw new Error(\"Method not implemented.\");\n    };\n    /** @hidden */\n    ZonedDate.prototype.setDate = function (date) {\n        throw new Error(\"Method not implemented.\");\n    };\n    /** @hidden */\n    ZonedDate.prototype.setUTCDate = function (date) {\n        throw new Error(\"Method not implemented.\");\n    };\n    /** @hidden */\n    ZonedDate.prototype.setMonth = function (month, date) {\n        throw new Error(\"Method not implemented.\");\n    };\n    /** @hidden */\n    ZonedDate.prototype.setUTCMonth = function (month, date) {\n        throw new Error(\"Method not implemented.\");\n    };\n    /** @hidden */\n    ZonedDate.prototype.setFullYear = function (year, month, date) {\n        throw new Error(\"Method not implemented.\");\n    };\n    /** @hidden */\n    ZonedDate.prototype.setUTCFullYear = function (year, month, date) {\n        throw new Error(\"Method not implemented.\");\n    };\n    /**\n     * @hidden\n     */\n    ZonedDate.prototype.toISOString = function () {\n        return this._localDate.toISOString();\n    };\n    /**\n     * @hidden\n     */\n    ZonedDate.prototype.toJSON = function () {\n        return this._localDate.toJSON();\n    };\n    /**\n     * @hidden\n     */\n    ZonedDate.prototype.toString = function () {\n        var dateString = datePrefix(this._utcDate);\n        var timeString = this.toTimeString();\n        return dateString + \" \" + this.getDate() + \" \" + this.getFullYear() + \" \" + timeString;\n    };\n    /** @hidden */\n    ZonedDate.prototype.toDateString = function () {\n        return toLocalDate(this._utcDate).toDateString();\n    };\n    /** @hidden */\n    ZonedDate.prototype.toTimeString = function () {\n        var hours = padNumber(this.getHours());\n        var minutes = padNumber(this.getMinutes());\n        var seconds = padNumber(this.getSeconds());\n        var time = hours + \":\" + minutes + \":\" + seconds;\n        var tzOffset = formatOffset(this.timezoneOffset);\n        var abbrev = abbrTimezone(this.timezone, this._utcDate);\n        if (abbrev) {\n            abbrev = \" (\" + abbrev + \")\";\n        }\n        return time + \" \" + tzOffset + abbrev;\n    };\n    ZonedDate.prototype.toLocaleString = function (locales, options) {\n        return this._localDate.toLocaleString(locales, options);\n    };\n    ZonedDate.prototype.toLocaleDateString = function (locales, options) {\n        return this._localDate.toLocaleDateString(locales, options);\n    };\n    ZonedDate.prototype.toLocaleTimeString = function (locales, options) {\n        return this._localDate.toLocaleTimeString(locales, options);\n    };\n    /** @hidden */\n    ZonedDate.prototype.toUTCString = function () {\n        return this.toTimezone('Etc/UTC').toString();\n    };\n    ZonedDate.prototype[Symbol.toPrimitive] = function (hint) {\n        if (hint === 'string' || hint === 'default') {\n            return this.toString();\n        }\n        return this._localDate.getTime();\n    };\n    /** @hidden */\n    ZonedDate.prototype.valueOf = function () {\n        return this.getTime();\n    };\n    /** @hidden */\n    ZonedDate.prototype.getVarDate = function () {\n        throw new Error('Not implemented.');\n    };\n    /** @hidden */\n    ZonedDate.prototype.format = function (_) {\n        throw new Error('Not implemented.');\n    };\n    /** @hidden */\n    ZonedDate.prototype.formatUTC = function (_) {\n        throw new Error('Not implemented.');\n    };\n    return ZonedDate;\n}());\n\n/**\n * A function that returns all timezones which match the title of the zone.\n *\n * @param group - The fully qualified zone title. For example, Central Standard Time.\n *\n * @return - Returns the list of all matching timezone names. For example, `[America/Chicago, ...]`.\n *\n * @example\n * ```ts-no-run\n * zonesPerGroup('(GMT+01:00) Amsterdam, Berlin'); // ['Europe/Amsterdam', 'Europe/Berlin'...]\n * ```\n */\nvar zonesPerGroup = function (group) {\n    var titles = timezones.titles;\n    return Object.keys(titles).reduce(function (result, title) {\n        var info = titles[title] || {};\n        return info.group === group ? result.concat(title.split(' ')) : result;\n    }, []);\n};\n\nvar moveDateToWeekStart = function (date, weekStartDay) {\n    if (weekStartDay !== Day.Monday) {\n        return addDays(prevDayOfWeek(date, weekStartDay), 4);\n    }\n    return addDays(date, (4 - (date.getDay() || 7)));\n};\nvar calcWeekInYear = function (date, weekStartDay) {\n    var firstWeekInYear = createDate(date.getFullYear(), 0, 1, -6);\n    var newDate = moveDateToWeekStart(date, weekStartDay);\n    var diffInMS = newDate.getTime() - firstWeekInYear.getTime();\n    var days = Math.floor(diffInMS / MS_PER_DAY);\n    return 1 + Math.floor(days / 7);\n};\n/**\n * A function that returns the number of the week within a year, which is calculated in relation to the date.\n *\n * For more information, refer to the [**ISO week date**](https://en.wikipedia.org/wiki/ISO_week_date) article.\n *\n * @param date - The date used for the week number calculation.\n * @param weekStartDay - The first day of the week. By default, the first week day is Monday.\n * @returns - The number of the week within the year.\n *\n * @example\n * ```ts-no-run\n * weekInYear(new Date(2016, 0, 1)); // Week 53, 2015\n * weekInYear(new Date(2016, 0, 5)); // Week 1, 2016\n * weekInYear(new Date(2017, 0, 1)); // Week 52, 2016\n * weekInYear(new Date(2017, 0, 2)); // Week 1, 2017\n * ```\n */\nvar weekInYear = function (date, weekStartDay) {\n    if (weekStartDay === void 0) { weekStartDay = Day.Monday; }\n    date = getDate(date);\n    var prevWeekDate = addDays(date, -7);\n    var nextWeekDate = addDays(date, 7);\n    var weekNumber = calcWeekInYear(date, weekStartDay);\n    if (weekNumber === 0) {\n        return calcWeekInYear(prevWeekDate, weekStartDay) + 1;\n    }\n    if (weekNumber === 53 && calcWeekInYear(nextWeekDate, weekStartDay) > 1) {\n        return 1;\n    }\n    return weekNumber;\n};\n\nvar Mask = /** @class */ (function () {\n    function Mask() {\n        this.symbols = '';\n        this.partMap = [];\n    }\n    return Mask;\n}());\n\nvar Constants = {\n    formatSeparator: \"_\",\n    twoDigitYearMax: 68,\n    defaultDateFormat: \"d\",\n    defaultLocaleId: \"en\"\n};\n\nvar Key = {\n    DELETE: \"Delete\",\n    BACKSPACE: \"Backspace\",\n    TAB: \"Tab\",\n    ENTER: \"Enter\",\n    ESCAPE: \"Escape\",\n    ARROW_LEFT: \"ArrowLeft\",\n    ARROW_UP: \"ArrowUp\",\n    ARROW_RIGHT: \"ArrowRight\",\n    ARROW_DOWN: \"ArrowDown\",\n    SPACE: \" \",\n    END: \"End\",\n    HOME: \"Home\",\n    PAGE_UP: \"PageUp\",\n    PAGE_DOWN: \"PageDown\"\n};\n\n/**\n * @hidden\n */\nvar padZero = function (length) { return new Array(Math.max(length, 0)).fill('0').join(''); };\n/**\n * @hidden\n */\nvar unpadZero = function (value) { return value.replace(/^0*/, ''); };\n/**\n * @hidden\n */\nvar approximateStringMatching = function (_a) {\n    /*\n      Remove the right part of the cursor.\n      oldFormat = oldFormat.substring(0, caret + oldText.length - newText.length);\n    */\n    var oldText = _a.oldText, newText = _a.newText, formatPattern = _a.formatPattern, selectionStart = _a.selectionStart, isInCaretMode = _a.isInCaretMode, keyEvent = _a.keyEvent;\n    var oldTextSeparator = oldText[selectionStart + oldText.length - newText.length];\n    var oldSegmentText = oldText.substring(0, selectionStart + oldText.length - newText.length);\n    var newSegmentText = newText.substring(0, selectionStart);\n    var diff = [];\n    /* Handle the typing of a single character over the same selection. */\n    if (oldSegmentText === newSegmentText && selectionStart > 0) {\n        diff.push([formatPattern[selectionStart - 1], newSegmentText[selectionStart - 1]]);\n        return diff;\n    }\n    if (oldSegmentText.indexOf(newSegmentText) === 0 && (isInCaretMode &&\n        (keyEvent.key === Key.DELETE || keyEvent.key === Key.BACKSPACE)) ||\n        (oldSegmentText.indexOf(newSegmentText) === 0 && !isInCaretMode &&\n            (newSegmentText.length === 0 ||\n                formatPattern[newSegmentText.length - 1] !== formatPattern[newSegmentText.length]))) {\n        /* Handle Delete/Backspace. */\n        var deletedSymbol = '';\n        /*\n            The whole text is replaced by the same character.\n            A nasty patch is required to keep the selection in the first segment.\n        */\n        if (!isInCaretMode && newSegmentText.length === 1) {\n            diff.push([formatPattern[0], newSegmentText[0]]);\n        }\n        for (var i = newSegmentText.length; i < oldSegmentText.length; i++) {\n            if (formatPattern[i] !== deletedSymbol && formatPattern[i] !== Constants.formatSeparator) {\n                deletedSymbol = formatPattern[i];\n                diff.push([deletedSymbol, '']);\n            }\n        }\n        return diff;\n    }\n    /*\n        Handle the insertion of the text (the new text is longer than the previous one).\n        Handle the typing over a literal as well.\n    */\n    if ((isInCaretMode &&\n        (newSegmentText.indexOf(oldSegmentText) === 0 ||\n            formatPattern[selectionStart - 1] === Constants.formatSeparator)) ||\n        (!isInCaretMode &&\n            (newSegmentText.indexOf(oldSegmentText) === 0 ||\n                formatPattern[selectionStart - 1] === Constants.formatSeparator))) {\n        var symbol = formatPattern[0];\n        for (var i = Math.max(0, oldSegmentText.length - 1); i < formatPattern.length; i++) {\n            if (formatPattern[i] !== Constants.formatSeparator) {\n                symbol = formatPattern[i];\n                break;\n            }\n        }\n        return [[symbol, newSegmentText[selectionStart - 1]]];\n    }\n    /* Handle the entering of a space or a separator for navigating to the next item. */\n    if ((newSegmentText[newSegmentText.length - 1] === ' ') ||\n        (newSegmentText[newSegmentText.length - 1] === oldTextSeparator)) {\n        return [[formatPattern[selectionStart - 1], Constants.formatSeparator]];\n    }\n    /* Handle typing over a correctly selected part. */\n    var result = [[formatPattern[selectionStart - 1], newSegmentText[selectionStart - 1]]];\n    return result;\n};\n/**\n * @hidden\n */\nvar dateSymbolMap = function (map, part) {\n    map[part.pattern[0]] = part.type;\n    return map;\n};\n/**\n * @hidden\n */\nvar isInRange = function (candidate, min, max) { return (candidate === null || !((min && min > candidate) || (max && max < candidate))); };\n\nvar isObject = function (value) { return value && typeof (value) === \"object\" && !Array.isArray(value); };\nvar isHtmlElement = function (element) { return element instanceof HTMLElement; };\nvar dateSetter = function (method) { return function (date, value) {\n    var clone = cloneDate(date);\n    clone[method](value);\n    return clone;\n}; };\n/**\n * @hidden\n */\nvar isPresent = function (value) { return value !== undefined && value !== null; };\n/**\n * @hidden\n */\nvar isDocumentAvailable = function () { return !!document; };\n/**\n * @hidden\n */\nvar isNumber = function (value) { return isPresent(value) && typeof (value) === \"number\" && !Number.isNaN(value); };\n/**\n * @hidden\n */\nvar parseToInt = function (value) { return parseInt(value, 10); };\n/**\n * @hidden\n */\nvar clamp = function (value, min, max) { return Math.min(max, Math.max(min, value)); };\n/**\n * @hidden\n */\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nvar extend = function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    return Object.assign.apply(Object, args);\n};\n/**\n * @hidden\n */\nvar deepExtend = function (target) {\n    var _a, _b;\n    var sources = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        sources[_i - 1] = arguments[_i];\n    }\n    if (!sources.length) {\n        return target;\n    }\n    var source = sources.shift();\n    if (isObject(target) && isObject(source)) {\n        for (var key in source) {\n            if (isHtmlElement(source[key])) {\n                target[key] = source[key];\n            }\n            else if (isObject(source[key]) && !(source[key] instanceof Date)) {\n                if (!target[key] || !isObject(target[key])) {\n                    extend(target, (_a = {}, _a[key] = {}, _a));\n                }\n                deepExtend(target[key], source[key]);\n            }\n            else {\n                extend(target, (_b = {}, _b[key] = source[key], _b));\n            }\n        }\n    }\n    return deepExtend.apply(void 0, [target].concat(sources));\n};\n/**\n * @hidden\n */\nvar noop = function () { };\n/**\n * @hidden\n */\nvar isFunction = function (fn) { return typeof (fn) === \"function\"; };\n/**\n * @hidden\n */\nvar cropTwoDigitYear = function (date) {\n    if (!isPresent(date) || isNaN(date.getTime())) {\n        return 0;\n    }\n    return Number(date\n        .getFullYear()\n        .toString()\n        .slice(-2));\n};\n/**\n * @hidden\n */\nvar setYears = dateSetter('setFullYear');\n/**\n * @hidden\n */\nvar millisecondDigitsInFormat = function (format) {\n    var result = format && format.match(/S+(\\1)/);\n    return result ? result[0].length : 0;\n};\n/**\n * @hidden\n */\nvar millisecondStepFor = function (digits) {\n    return Math.pow(10, 3 - digits);\n};\n/**\n * @hidden\n */\nvar areDatePartsEqualTo = function (date, year, month, day, hour, minutes, seconds, milliseconds) {\n    if (date &&\n        date.getFullYear() === year &&\n        date.getMonth() === month &&\n        date.getDate() === day &&\n        date.getHours() === hour &&\n        date.getMinutes() === minutes &&\n        date.getSeconds() === seconds &&\n        date.getMilliseconds() === milliseconds) {\n        return true;\n    }\n    return false;\n};\n/**\n * @hidden\n */\nvar isValidDate = function (value) { return isPresent(value) && value.getTime && isNumber(value.getTime()); };\n\nvar PREVIOUS_CENTURY_BASE = 1900;\nvar CURRENT_CENTURY_BASE = 2000;\nvar SHORT_PATTERN_LENGTH_REGEXP = /d|M|H|h|m|s/;\nvar MONTH_PART_WITH_WORDS_THRESHOLD = 2;\nvar MONTH_SYMBOL = \"M\";\n// JS months start from 0 (January) instead of 1 (January)\nvar JS_MONTH_OFFSET = 1;\nvar DateObject = /** @class */ (function () {\n    function DateObject(_a) {\n        var intlService = _a.intlService, formatPlaceholder = _a.formatPlaceholder, format = _a.format, _b = _a.cycleTime, cycleTime = _b === void 0 ? false : _b, _c = _a.twoDigitYearMax, twoDigitYearMax = _c === void 0 ? Constants.twoDigitYearMax : _c, _d = _a.value, value = _d === void 0 ? null : _d, _e = _a.autoCorrectParts, autoCorrectParts = _e === void 0 ? true : _e;\n        this.year = true;\n        this.month = true;\n        this.date = true;\n        this.hours = true;\n        this.minutes = true;\n        this.seconds = true;\n        this.milliseconds = true;\n        this.dayperiod = true;\n        this.leadingZero = null;\n        this.typedMonthPart = '';\n        this.knownParts = 'adHhmMsEyS';\n        this.symbols = {\n            'E': 'E',\n            'H': 'H',\n            'M': 'M',\n            'a': 'a',\n            'd': 'd',\n            'h': 'h',\n            'm': 'm',\n            's': 's',\n            'y': 'y',\n            'S': 'S'\n        };\n        this._value = getDate(new Date());\n        this.cycleTime = false;\n        this._partiallyInvalidDate = {\n            startDate: null,\n            invalidDateParts: {\n                'E': { value: null, date: null, startDateOffset: 0 },\n                'H': { value: null, date: null, startDateOffset: 0 },\n                'M': { value: null, date: null, startDateOffset: 0 },\n                'a': { value: null, date: null, startDateOffset: 0 },\n                'd': { value: null, date: null, startDateOffset: 0 },\n                'h': { value: null, date: null, startDateOffset: 0 },\n                'm': { value: null, date: null, startDateOffset: 0 },\n                's': { value: null, date: null, startDateOffset: 0 },\n                'y': { value: null, date: null, startDateOffset: 0 },\n                'S': { value: null, date: null, startDateOffset: 0 }\n            }\n        };\n        this.setOptions({\n            intlService: intlService,\n            formatPlaceholder: formatPlaceholder,\n            format: format,\n            cycleTime: cycleTime,\n            twoDigitYearMax: twoDigitYearMax,\n            value: value,\n            autoCorrectParts: autoCorrectParts\n        });\n        if (!value) {\n            this._value = getDate(new Date());\n            var sampleFormat = this.dateFormatString(this.value, this.format).symbols;\n            for (var i = 0; i < sampleFormat.length; i++) {\n                this.setExisting(sampleFormat[i], false);\n            }\n        }\n        else {\n            this._value = cloneDate(value);\n        }\n    }\n    Object.defineProperty(DateObject.prototype, \"value\", {\n        get: function () {\n            return this._value;\n        },\n        set: function (value) {\n            if (value && !(value instanceof Date)) {\n                // throw new Error(\"The 'value' should be a valid JavaScript Date instance.\");\n                return;\n            }\n            this._value = value;\n            this.resetInvalidDate();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DateObject.prototype, \"localeId\", {\n        get: function () {\n            var localeId = Constants.defaultLocaleId;\n            var cldrKeys = Object.keys(this.intl.cldr);\n            for (var i = 0; i < cldrKeys.length; i++) {\n                var key = cldrKeys[i];\n                var value = this.intl.cldr[key];\n                if (value.name && value.calendar && value.numbers &&\n                    value.name !== Constants.defaultLocaleId) {\n                    localeId = value.name;\n                    break;\n                }\n            }\n            return localeId;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @hidden\n     */\n    DateObject.prototype.setOptions = function (options) {\n        this.intl = options.intlService;\n        this.formatPlaceholder = options.formatPlaceholder || 'wide';\n        this.format = options.format;\n        this.cycleTime = options.cycleTime;\n        this.monthNames = this.allFormattedMonths(this.localeId);\n        this.dayPeriods = this.allDayPeriods(this.localeId);\n        this.twoDigitYearMax = options.twoDigitYearMax;\n        this.autoCorrectParts = options.autoCorrectParts;\n    };\n    DateObject.prototype.setValue = function (value) {\n        if (!value) {\n            this._value = getDate(new Date());\n            this.modifyExisting(false);\n        }\n        else if (!isEqual(value, this._value)) {\n            this._value = cloneDate(value);\n            this.modifyExisting(true);\n        }\n        this.resetInvalidDate();\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.hasValue = function () {\n        var _this = this;\n        var pred = function (a, p) { return a || p.type !== 'literal' && p.type !== 'dayperiod' && _this.getExisting(p.pattern[0]); };\n        return this.intl.splitDateFormat(this.format, this.localeId).reduce(pred, false);\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.getValue = function () {\n        for (var i = 0; i < this.knownParts.length; i++) {\n            if (!this.getExisting(this.knownParts[i])) {\n                return null;\n            }\n        }\n        return cloneDate(this.value);\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.getFormattedDate = function (format) {\n        return this.intl.formatDate(this.getValue(), format, this.localeId);\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.getTextAndFormat = function (customFormat) {\n        if (customFormat === void 0) { customFormat = \"\"; }\n        var format = customFormat || this.format;\n        var text = this.intl.formatDate(this.value, format, this.localeId);\n        var mask = this.dateFormatString(this.value, format);\n        if (!this.autoCorrectParts && this._partiallyInvalidDate.startDate) {\n            var partiallyInvalidText = \"\";\n            var formattedDate = this.intl.formatDate(this.value, format, this.localeId);\n            var formattedDates = this.getFormattedInvalidDates(format);\n            for (var i = 0; i < formattedDate.length; i++) {\n                var symbol = mask.symbols[i];\n                if (mask.partMap[i].type === \"literal\") {\n                    partiallyInvalidText += text[i];\n                }\n                else if (this.getInvalidDatePartValue(symbol)) {\n                    var partsForSegment = this.getPartsForSegment(mask, i);\n                    if (symbol === \"M\") {\n                        var datePartText = (parseToInt(this.getInvalidDatePartValue(symbol)) + JS_MONTH_OFFSET).toString();\n                        if (partsForSegment.length > MONTH_PART_WITH_WORDS_THRESHOLD) {\n                            partiallyInvalidText += formattedDates[symbol][i];\n                        }\n                        else {\n                            if (this.getInvalidDatePartValue(symbol)) {\n                                var formattedDatePart = padZero(partsForSegment.length - datePartText.length) + datePartText;\n                                partiallyInvalidText += formattedDatePart;\n                                // add -1 as the first character in the segment is at index i\n                                i += partsForSegment.length - 1;\n                            }\n                            else {\n                                partiallyInvalidText += formattedDates[symbol][i];\n                            }\n                        }\n                    }\n                    else {\n                        if (this.getInvalidDatePartValue(symbol)) {\n                            var datePartText = this.getInvalidDatePartValue(symbol).toString();\n                            var formattedDatePart = padZero(partsForSegment.length - datePartText.length) + datePartText;\n                            partiallyInvalidText += formattedDatePart;\n                            // add -1 as the first character in the segment is at index i\n                            i += partsForSegment.length - 1;\n                        }\n                        else {\n                            partiallyInvalidText += formattedDates[symbol][i];\n                        }\n                    }\n                }\n                else {\n                    partiallyInvalidText += text[i];\n                }\n            }\n            text = partiallyInvalidText;\n        }\n        var result = this.merge(text, mask);\n        return result;\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.getFormattedInvalidDates = function (customFormat) {\n        var _this = this;\n        if (customFormat === void 0) { customFormat = \"\"; }\n        var format = customFormat || this.format;\n        var formattedDatesForSymbol = {\n            'E': '',\n            'H': '',\n            'M': '',\n            'a': '',\n            'd': '',\n            'h': '',\n            'm': '',\n            's': '',\n            'y': '',\n            'S': ''\n        };\n        Object.keys(this._partiallyInvalidDate.invalidDateParts).forEach(function (key) {\n            var date = _this.getInvalidDatePart(key).date;\n            if (date) {\n                var formattedInvalidDate = _this.intl.formatDate(date, format, _this.localeId);\n                formattedDatesForSymbol[key] = formattedInvalidDate;\n            }\n        });\n        return formattedDatesForSymbol;\n    };\n    DateObject.prototype.modifyExisting = function (value) {\n        var sampleFormat = this.dateFormatString(this.value, this.format).symbols;\n        for (var i = 0; i < sampleFormat.length; i++) {\n            this.setExisting(sampleFormat[i], value);\n        }\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.getExisting = function (symbol) {\n        switch (symbol) {\n            case 'y': return this.year;\n            case 'M':\n            case 'L': return this.month;\n            case 'd': return this.date;\n            case 'E': return this.date && this.month && this.year;\n            case 'h':\n            case 'H': return this.hours;\n            case 't':\n            case 'a': return this.dayperiod;\n            case 'm': return this.minutes;\n            case 's': return this.seconds;\n            case \"S\": return this.milliseconds;\n            default:\n                return true;\n        }\n    };\n    DateObject.prototype.setExisting = function (symbol, value) {\n        switch (symbol) {\n            case 'y':\n                // allow 2/29 dates\n                this.year = value;\n                if (value === false) {\n                    this._value.setFullYear(2000);\n                }\n                break;\n            case 'M':\n                // make sure you can type 31 in the day part\n                this.month = value;\n                if (value === false) {\n                    if (this.autoCorrectParts) {\n                        this._value.setMonth(0);\n                    }\n                }\n                break;\n            case 'd':\n                this.date = value;\n                break;\n            case 'h':\n            case 'H':\n                this.hours = value;\n                break;\n            case 't':\n            case 'a':\n                this.dayperiod = value;\n                break;\n            case 'm':\n                this.minutes = value;\n                break;\n            case 's':\n                this.seconds = value;\n                break;\n            case \"S\":\n                this.milliseconds = value;\n                break;\n            default:\n                break;\n        }\n        if (this.getValue()) {\n            this.resetInvalidDate();\n        }\n    };\n    DateObject.prototype.modifyPart = function (symbol, offset) {\n        if (!isPresent(symbol) || !isPresent(offset) || offset === 0) {\n            return;\n        }\n        var newValue = cloneDate(this.value);\n        var timeModified = false;\n        var invalidDateFound;\n        var isMonth = symbol === \"M\";\n        var isDay = symbol === \"d\" || symbol === \"E\";\n        var symbolExists = this.getExisting(symbol);\n        if (!this.autoCorrectParts && (isDay || isMonth)) {\n            var invalidDateParts = this._partiallyInvalidDate.invalidDateParts || {};\n            var invalidDatePartValue = this.getInvalidDatePartValue(symbol);\n            var year = invalidDateParts.y.value || newValue.getFullYear();\n            var month = invalidDateParts.M.value || newValue.getMonth();\n            var day = invalidDateParts.d.value || invalidDateParts.E.value || newValue.getDate();\n            var hour = invalidDateParts.h.value || invalidDateParts.H.value || newValue.getHours();\n            var minutes = invalidDateParts.m.value || newValue.getMinutes();\n            var seconds = invalidDateParts.s.value || newValue.getSeconds();\n            var milliseconds = invalidDateParts.S.value || newValue.getMilliseconds();\n            switch (symbol) {\n                case 'y':\n                    year += offset;\n                    break;\n                case 'M':\n                    month += offset;\n                    break;\n                case 'd':\n                case 'E':\n                    day += offset;\n                    break;\n                // case 'h':\n                // case 'H': hour += offset; break;\n                // case 'm': minutes += offset; break;\n                // case 's': seconds += offset; break;\n                // case 'S': milliseconds += offset; break;\n                default: break;\n            }\n            if (symbol === \"M\") {\n                if ((month < 0 || month > 11)) {\n                    if (symbolExists) {\n                        this.setExisting(symbol, false);\n                        this.resetInvalidDateSymbol(symbol);\n                        return;\n                    }\n                }\n                if (!symbolExists) {\n                    if (month < 0) {\n                        month = clamp(11 + ((month % 11) + 1), 0, 11);\n                    }\n                    else {\n                        var monthValue = isPresent(invalidDatePartValue) ?\n                            month :\n                            ((offset - JS_MONTH_OFFSET) % 12);\n                        month = clamp(monthValue, 0, 11);\n                    }\n                    month = clamp(month, 0, 11);\n                }\n                month = clamp(month, 0, 11);\n            }\n            else if (symbol === \"d\") {\n                if (symbolExists) {\n                    if (day <= 0 || day > 31) {\n                        this.setExisting(symbol, false);\n                        this.resetInvalidDateSymbol(symbol);\n                        return;\n                    }\n                }\n                else if (!symbolExists) {\n                    if (isPresent(invalidDatePartValue)) {\n                        if (day <= 0 || day > 31) {\n                            this.setExisting(symbol, false);\n                            this.resetInvalidDateSymbol(symbol);\n                            return;\n                        }\n                    }\n                    if (offset < 0) {\n                        var dayValue = isPresent(invalidDatePartValue) ? day : 1 + (31 - Math.abs(offset % 31));\n                        day = clamp(dayValue, 1, 31);\n                    }\n                    else {\n                        var dayValue = isPresent(invalidDatePartValue) ? day : offset % 31;\n                        day = clamp(dayValue, 1, 31);\n                    }\n                    day = clamp(day, 1, 31);\n                }\n            }\n            var dateCandidate = createDate(year, month, day, hour, minutes, seconds, milliseconds);\n            var newValueCandidate = isMonth || isDay ?\n                this.modifyDateSymbolWithValue(newValue, symbol, isMonth ? month : day) :\n                null;\n            var dateCandidateExists = areDatePartsEqualTo(dateCandidate, year, month, day, hour, minutes, seconds, milliseconds);\n            if (this.getValue() && areDatePartsEqualTo(dateCandidate, year, month, day, hour, minutes, seconds, milliseconds)) {\n                newValue = cloneDate(dateCandidate);\n                this.markDatePartsAsExisting();\n            }\n            else if (isMonth && newValueCandidate) {\n                if (newValueCandidate.getMonth() === month) {\n                    if (this.getExisting(\"d\")) {\n                        if (dateCandidateExists) {\n                            newValue = cloneDate(dateCandidate);\n                            this.resetInvalidDateSymbol(symbol);\n                        }\n                        else {\n                            invalidDateFound = true;\n                            this.setInvalidDatePart(symbol, {\n                                value: month,\n                                date: cloneDate(newValueCandidate),\n                                startDateOffset: offset,\n                                startDate: cloneDate(this.value)\n                            });\n                            this.setExisting(symbol, false);\n                        }\n                    }\n                    else if (dateCandidateExists) {\n                        this.resetInvalidDateSymbol(symbol);\n                        newValue = cloneDate(dateCandidate);\n                        if (this.getExisting(\"M\") && this.getExisting(\"y\")) {\n                            // changing from 28/Feb to 29/Feb to 29/March\n                            this.setExisting(\"d\", true);\n                            this.resetInvalidDateSymbol(\"d\");\n                        }\n                    }\n                    else {\n                        this.resetInvalidDateSymbol(symbol);\n                        newValue = cloneDate(newValueCandidate);\n                    }\n                }\n                else {\n                    invalidDateFound = true;\n                    this.setInvalidDatePart(symbol, {\n                        value: month,\n                        date: cloneDate(newValueCandidate),\n                        startDateOffset: offset,\n                        startDate: cloneDate(this.value)\n                    });\n                    this.setExisting(symbol, false);\n                }\n            }\n            else if (isDay && newValueCandidate) {\n                if (newValueCandidate.getDate() === day) {\n                    if (this.getExisting(\"M\")) {\n                        if (dateCandidateExists) {\n                            newValue = cloneDate(dateCandidate);\n                            this.resetInvalidDateSymbol(symbol);\n                        }\n                        else {\n                            invalidDateFound = true;\n                            this.setInvalidDatePart(symbol, {\n                                value: day,\n                                date: cloneDate(newValueCandidate),\n                                startDateOffset: offset,\n                                startDate: cloneDate(this.value)\n                            });\n                            this.setExisting(symbol, false);\n                        }\n                    }\n                    else if (dateCandidateExists) {\n                        newValue = cloneDate(dateCandidate);\n                        this.resetInvalidDateSymbol(symbol);\n                        if (this.getExisting(\"d\") && this.getExisting(\"y\")) {\n                            // changing from 31/Jan to 31/Feb to 28/Feb\n                            this.setExisting(\"M\", true);\n                            this.resetInvalidDateSymbol(\"M\");\n                        }\n                    }\n                    else {\n                        this.resetInvalidDateSymbol(symbol);\n                        newValue = cloneDate(newValueCandidate);\n                    }\n                }\n                else {\n                    invalidDateFound = true;\n                    this.setInvalidDatePart(symbol, {\n                        value: day,\n                        date: cloneDate(this.value),\n                        startDateOffset: offset,\n                        startDate: cloneDate(this.value)\n                    });\n                    this.setExisting(symbol, false);\n                }\n            }\n        }\n        else {\n            switch (symbol) {\n                case 'y':\n                    newValue.setFullYear(newValue.getFullYear() + offset);\n                    break;\n                case 'M':\n                    newValue = addMonths(this.value, offset);\n                    break;\n                case 'd':\n                case 'E':\n                    newValue.setDate(newValue.getDate() + offset);\n                    break;\n                case 'h':\n                case 'H':\n                    newValue.setHours(newValue.getHours() + offset);\n                    timeModified = true;\n                    break;\n                case 'm':\n                    newValue.setMinutes(newValue.getMinutes() + offset);\n                    timeModified = true;\n                    break;\n                case 's':\n                    newValue.setSeconds(newValue.getSeconds() + offset);\n                    timeModified = true;\n                    break;\n                case \"S\":\n                    newValue.setMilliseconds(newValue.getMilliseconds() + offset);\n                    break;\n                case 'a':\n                    newValue.setHours(newValue.getHours() + (12 * offset));\n                    timeModified = true;\n                    break;\n                default: break;\n            }\n        }\n        if (this.shouldNormalizeCentury()) {\n            newValue = this.normalizeCentury(newValue);\n        }\n        if (timeModified && !this.cycleTime && newValue.getDate() !== this._value.getDate()) {\n            // todo: blazor has this fix, but this fails a unit test\n            // newValue.setDate(this._value.getDate());\n            // newValue.setMonth(this._value.getMonth());\n            // newValue.setFullYear(this._value.getFullYear());\n        }\n        if (!invalidDateFound) {\n            this.setExisting(symbol, true);\n            this._value = newValue;\n            if (this.getValue()) {\n                this.resetInvalidDate();\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.parsePart = function (_a) {\n        var symbol = _a.symbol, currentChar = _a.currentChar, resetSegmentValue = _a.resetSegmentValue, cycleSegmentValue = _a.cycleSegmentValue, rawInputValue = _a.rawTextValue, isDeleting = _a.isDeleting, originalFormat = _a.originalFormat;\n        var isInCaretMode = !cycleSegmentValue;\n        var dateParts = this.dateFormatString(this.value, this.format);\n        var datePartsLiterals = dateParts.partMap\n            .filter(function (x) { return x.type === \"literal\"; })\n            .map(function (x, index) {\n            return {\n                datePartIndex: index,\n                type: x.type,\n                pattern: x.pattern,\n                literal: \"\"\n            };\n        });\n        var flatDateParts = dateParts.partMap\n            .map(function (x) {\n            return {\n                type: x.type,\n                pattern: x.pattern,\n                text: \"\"\n            };\n        });\n        for (var i = 0; i < datePartsLiterals.length; i++) {\n            var datePart = datePartsLiterals[i];\n            for (var j = 0; j < datePart.pattern.length; j++) {\n                if (datePartsLiterals[i + j]) {\n                    datePartsLiterals[i + j].literal = datePart.pattern[j];\n                }\n            }\n            i += datePart.pattern.length - 1;\n        }\n        for (var i = 0; i < flatDateParts.length; i++) {\n            var datePart = flatDateParts[i];\n            for (var j = 0; j < datePart.pattern.length; j++) {\n                if (flatDateParts[i + j]) {\n                    flatDateParts[i + j].text = datePart.pattern[j];\n                }\n            }\n            i += datePart.pattern.length - 1;\n        }\n        var shouldResetPart = isInCaretMode && symbol === \"M\" && dateParts.partMap\n            .filter(function (x) { return x.type === \"month\"; })\n            .some(function (x) { return x.pattern.length > MONTH_PART_WITH_WORDS_THRESHOLD; });\n        var parseResult = {\n            value: null,\n            switchToNext: false,\n            resetPart: shouldResetPart,\n            hasInvalidDatePart: false\n        };\n        if (!currentChar) {\n            if (isInCaretMode) {\n                for (var i = 0; i < datePartsLiterals.length; i++) {\n                    var literal = datePartsLiterals[i].literal;\n                    var rawValueStartsWithLiteral = rawInputValue.startsWith(literal);\n                    var rawValueEndsWithLiteral = rawInputValue.endsWith(literal);\n                    var rawValueHasConsecutiveLiterals = rawInputValue.indexOf(literal + literal) >= 0;\n                    if (rawValueStartsWithLiteral || rawValueEndsWithLiteral || rawValueHasConsecutiveLiterals) {\n                        this.resetLeadingZero();\n                        this.setExisting(symbol, false);\n                        this.resetInvalidDateSymbol(symbol);\n                        return extend(parseResult, { value: null, switchToNext: false });\n                    }\n                }\n            }\n            else {\n                this.resetLeadingZero();\n                this.setExisting(symbol, false);\n                this.resetInvalidDateSymbol(symbol);\n                return extend(parseResult, { value: null, switchToNext: false });\n            }\n        }\n        var baseDate = this.intl.formatDate(this.value, this.format, this.localeId);\n        var baseFormat = dateParts.symbols;\n        var replaced = false;\n        var prefix = '';\n        var current = '';\n        var datePartText = '';\n        var basePrefix = '';\n        var baseSuffix = '';\n        var suffix = '';\n        var convertedBaseFormat = \"\";\n        for (var i = 0; i < flatDateParts.length; i++) {\n            convertedBaseFormat += flatDateParts[i].text;\n        }\n        var hasFixedFormat = (this.format === baseFormat) ||\n            (this.format === convertedBaseFormat) ||\n            (this.format === originalFormat) ||\n            (this.format.length === originalFormat.length);\n        var datePartStartIndex = (hasFixedFormat ? convertedBaseFormat : originalFormat).indexOf(symbol);\n        var datePartEndIndex = (hasFixedFormat ? convertedBaseFormat : originalFormat).lastIndexOf(symbol);\n        var segmentLength = datePartEndIndex - datePartStartIndex + 1;\n        var formatToTextLengthDiff = originalFormat.length - rawInputValue.length;\n        if (isInCaretMode || (!isInCaretMode && !this.autoCorrectParts)) {\n            for (var i = 0; i < baseDate.length; i++) {\n                if (baseFormat[i] === symbol) {\n                    var existing = this.getExisting(symbol);\n                    current += existing ? baseDate[i] : '0';\n                    if (formatToTextLengthDiff > 0) {\n                        if (datePartText.length + formatToTextLengthDiff < segmentLength) {\n                            datePartText += rawInputValue[i] || \"\";\n                        }\n                    }\n                    else {\n                        datePartText += rawInputValue[i] || \"\";\n                    }\n                    replaced = true;\n                }\n                else if (!replaced) {\n                    prefix += baseDate[i];\n                    basePrefix += baseDate[i];\n                }\n                else {\n                    suffix += baseDate[i];\n                    baseSuffix += baseDate[i];\n                }\n            }\n            if (hasFixedFormat) {\n                if (convertedBaseFormat.length < rawInputValue.length) {\n                    datePartText += currentChar;\n                }\n                else if (!isDeleting && originalFormat.length > rawInputValue.length) {\n                    // let the parsing to determine if the incomplete value is valid\n                }\n                if (datePartText.length > segmentLength) {\n                    return extend(parseResult, { value: null, switchToNext: false });\n                }\n            }\n            if (!hasFixedFormat || (hasFixedFormat && !this.autoCorrectParts)) {\n                current = \"\";\n                datePartText = \"\";\n                prefix = \"\";\n                suffix = \"\";\n                replaced = false;\n                for (var i = 0; i < originalFormat.length; i++) {\n                    if (originalFormat[i] === symbol) {\n                        var existing = this.getExisting(symbol);\n                        current += existing ? baseDate[i] || \"\" : '0';\n                        if (formatToTextLengthDiff > 0) {\n                            if (datePartText.length + formatToTextLengthDiff < segmentLength) {\n                                datePartText += rawInputValue[i] || \"\";\n                            }\n                        }\n                        else {\n                            datePartText += rawInputValue[i] || \"\";\n                        }\n                        replaced = true;\n                    }\n                    else if (!replaced) {\n                        prefix += rawInputValue[i] || \"\";\n                    }\n                    else {\n                        suffix += rawInputValue[i - formatToTextLengthDiff] || \"\";\n                    }\n                }\n                if (originalFormat.length < rawInputValue.length) {\n                    datePartText += currentChar;\n                }\n            }\n        }\n        if (!isInCaretMode) {\n            if (this.autoCorrectParts) {\n                current = \"\";\n                datePartText = \"\";\n                prefix = \"\";\n                suffix = \"\";\n                replaced = false;\n                for (var i = 0; i < baseDate.length; i++) {\n                    if (baseFormat[i] === symbol) {\n                        var existing = this.getExisting(symbol);\n                        current += existing ? baseDate[i] : '0';\n                        replaced = true;\n                    }\n                    else if (!replaced) {\n                        prefix += baseDate[i];\n                    }\n                    else {\n                        suffix += baseDate[i];\n                    }\n                }\n            }\n            else {\n                current = resetSegmentValue ? datePartText : current;\n            }\n        }\n        var parsedDate = null;\n        var month = this.matchMonth(currentChar);\n        var dayPeriod = this.matchDayPeriod(currentChar, symbol);\n        var isZeroCurrentChar = currentChar === '0';\n        var leadingZero = this.leadingZero || {};\n        if (isZeroCurrentChar) {\n            if (datePartText === \"0\") {\n                datePartText = current;\n            }\n            var valueNumber = parseToInt(resetSegmentValue ?\n                currentChar :\n                (isInCaretMode ? datePartText : current) + currentChar);\n            if (valueNumber === 0 && !this.isAbbrMonth(dateParts.partMap, symbol)) {\n                this.incrementLeadingZero(symbol);\n            }\n        }\n        else {\n            this.resetLeadingZero();\n        }\n        var partPattern = this.partPattern(dateParts.partMap, symbol);\n        var patternValue = partPattern ? partPattern.pattern : null;\n        var patternLength = this.patternLength(patternValue) || patternValue.length;\n        if (isInCaretMode) {\n            if (isDeleting && !datePartText) {\n                this.setExisting(symbol, false);\n                return extend(parseResult, { value: null, switchToNext: false });\n            }\n        }\n        var currentMaxLength = current.length - 3;\n        var tryParse = true;\n        var middle = isInCaretMode ? datePartText : current;\n        for (var i = Math.max(0, currentMaxLength); i <= current.length; i++) {\n            if (!tryParse) {\n                break;\n            }\n            middle = resetSegmentValue ?\n                currentChar :\n                isInCaretMode ?\n                    datePartText :\n                    (current.substring(i) + currentChar);\n            if (isInCaretMode || !this.autoCorrectParts) {\n                tryParse = false;\n                middle = unpadZero(middle);\n                // middle = padZero(segmentLength - middle.length) + middle;\n                middle = padZero(patternLength - middle.length) + middle;\n            }\n            var middleNumber = parseInt(middle, 10);\n            var candidateDateString = prefix + middle + suffix;\n            parsedDate = this.intl.parseDate(candidateDateString, this.format, this.localeId);\n            var autoCorrectedPrefixAndSuffix = false;\n            if (isInCaretMode && !isValidDate(parsedDate)) {\n                // if part of the date is not available, e.g. \"d\"\n                // but an expanded format like \"F\" is used\n                // the element value can be \"EEEE, February 1, 2022 3:04:05 AM\"\n                // which is not parsable by intl\n                // use the base prefix and suffix, e.g. convert the candidate date string\n                // to \"Thursday, February 1, 2022 3:04:05 AM\"\n                // as \"EEEE, February...\" is not parsable\n                if (this.autoCorrectParts) {\n                    parsedDate = this.intl.parseDate(basePrefix + middle + baseSuffix, this.format, this.localeId);\n                    autoCorrectedPrefixAndSuffix = true;\n                }\n            }\n            var isCurrentCharParsable = !isNaN(parseInt(currentChar, 10)) || (isInCaretMode && isDeleting && currentChar === \"\");\n            if (!parsedDate && !isNaN(middleNumber) && isCurrentCharParsable && this.autoCorrectParts) {\n                if (symbol === MONTH_SYMBOL && !month) {\n                    // JS months start from 0 (January) instead of 1 (January)\n                    var monthNumber = middleNumber - JS_MONTH_OFFSET;\n                    if (monthNumber > -1 && monthNumber < 12) {\n                        parsedDate = cloneDate(this.value);\n                        parsedDate.setMonth(monthNumber);\n                        if (parsedDate.getMonth() !== monthNumber) {\n                            parsedDate = lastDayOfMonth(addMonths(parsedDate, -1));\n                        }\n                    }\n                }\n                if (symbol === 'y') {\n                    parsedDate = createDate(parseInt(middle, 10), this.month ? this.value.getMonth() : 0, this.date ? this.value.getDate() : 1, this.hours ? this.value.getHours() : 0, this.minutes ? this.value.getMinutes() : 0, this.seconds ? this.value.getSeconds() : 0, this.milliseconds ? this.value.getMilliseconds() : 0);\n                    if (((isInCaretMode && isValidDate(parsedDate)) ||\n                        (!isInCaretMode && parsedDate)) && this.date && parsedDate.getDate() !== this.value.getDate()) {\n                        parsedDate = lastDayOfMonth(addMonths(parsedDate, -1));\n                    }\n                }\n            }\n            if ((isInCaretMode && isValidDate(parsedDate)) || (!isInCaretMode && parsedDate)) {\n                // move to next segment if the part will overflow with next char\n                // when start from empty date (01, then 010), padded zeros should be trimmed\n                var peekedValue = this.peek(middle, patternValue);\n                var peekedDateString = autoCorrectedPrefixAndSuffix ?\n                    \"\" + basePrefix + peekedValue + baseSuffix :\n                    \"\" + prefix + peekedValue + suffix;\n                var peekedDate = this.intl.parseDate(peekedDateString, this.format, this.localeId);\n                var leadingZeroOffset = (this.leadingZero || {})[symbol] || 0;\n                var patternSatisfied = (leadingZeroOffset + unpadZero(middle).length) >= patternLength;\n                var switchToNext = peekedDate === null ||\n                    (leadingZero[symbol] ?\n                        patternValue.length <= middle.length :\n                        patternSatisfied);\n                if (this.shouldNormalizeCentury()) {\n                    parsedDate = this.normalizeCentury(parsedDate);\n                }\n                this._value = parsedDate;\n                this.setExisting(symbol, true);\n                this.resetInvalidDateSymbol(symbol);\n                if (!this.autoCorrectParts) {\n                    if (symbol === \"M\") {\n                        if (this.getExisting(\"M\") && this.getExisting(\"y\")) {\n                            // changing from 28/Feb to 29/Feb to 29/March\n                            this.setExisting(\"d\", true);\n                            this.resetInvalidDateSymbol(\"d\");\n                        }\n                    }\n                    else if (symbol === \"d\") {\n                        if (this.getExisting(\"d\") && this.getExisting(\"y\")) {\n                            // changing from 31/Jan to 31/Feb to 28/Feb\n                            this.setExisting(\"M\", true);\n                            this.resetInvalidDateSymbol(\"M\");\n                        }\n                    }\n                    if (!this.hasInvalidDatePart()) {\n                        this.markDatePartsAsExisting();\n                    }\n                }\n                return extend(parseResult, { value: this.value, switchToNext: switchToNext });\n            }\n        }\n        if (month) {\n            parsedDate = this.intl.parseDate(prefix + month + suffix, this.format, this.localeId);\n            if (parsedDate) {\n                this._value = parsedDate;\n                this.setExisting(symbol, true);\n                return extend(parseResult, { value: this.value, switchToNext: false });\n            }\n        }\n        if (dayPeriod) {\n            parsedDate = this.intl.parseDate(prefix + dayPeriod + suffix, this.format);\n            if (parsedDate) {\n                this._value = parsedDate;\n                return extend(parseResult, { value: this.value, switchToNext: true });\n            }\n        }\n        if (isZeroCurrentChar) {\n            this.setExisting(symbol, false);\n        }\n        if (!this.autoCorrectParts) {\n            var datePartValue = void 0;\n            var textToParse = isInCaretMode ? datePartText : middle;\n            var parsedValue = parseToInt(textToParse);\n            if (isNumber(parsedValue)) {\n                if ((symbol === \"d\" && (parsedValue <= 0 || parsedValue > 31)) ||\n                    (symbol === \"M\" && (parsedValue < 0 || parsedValue > 11))) {\n                    return extend(parseResult, { value: null, switchToNext: false });\n                }\n                datePartValue = symbol === \"M\" ?\n                    parsedValue - JS_MONTH_OFFSET :\n                    parsedValue;\n                var isMonth = symbol === \"M\";\n                var isDay = symbol === \"d\";\n                var newValue = cloneDate(this._value);\n                var invalidDateParts = this._partiallyInvalidDate.invalidDateParts || {};\n                var year = invalidDateParts.y.value || newValue.getFullYear();\n                /* tslint:disable:no-shadowed-variable */\n                var month_1 = isMonth ? datePartValue : invalidDateParts.M.value || newValue.getMonth();\n                /* tslint:enable:no-shadowed-variable */\n                var day = isDay ? datePartValue : invalidDateParts.d.value || invalidDateParts.E.value || newValue.getDate();\n                var hour = invalidDateParts.h.value || invalidDateParts.H.value || newValue.getHours();\n                var minutes = invalidDateParts.m.value || newValue.getMinutes();\n                var seconds = invalidDateParts.s.value || newValue.getSeconds();\n                var milliseconds = invalidDateParts.S.value || newValue.getMilliseconds();\n                var dateCandidate = createDate(year, month_1, day, hour, minutes, seconds, milliseconds);\n                var dateCandidateExists = areDatePartsEqualTo(dateCandidate, year, month_1, day, hour, minutes, seconds, milliseconds);\n                var newValueCandidate = isMonth || isDay ?\n                    this.modifyDateSymbolWithValue(newValue, symbol, isMonth ? month_1 : day) :\n                    null;\n                var invalidDateFound = false;\n                if (isMonth && newValueCandidate) {\n                    if (newValueCandidate.getMonth() === month_1) {\n                        if (this.getExisting(\"d\")) {\n                            if (dateCandidateExists) {\n                                newValue = cloneDate(dateCandidate);\n                                this.resetInvalidDateSymbol(symbol);\n                            }\n                            else {\n                                invalidDateFound = true;\n                                this.setInvalidDatePart(symbol, {\n                                    value: month_1,\n                                    date: cloneDate(newValueCandidate),\n                                    startDate: cloneDate(this.value)\n                                });\n                                this.setExisting(symbol, false);\n                            }\n                        }\n                        else if (dateCandidateExists) {\n                            this.resetInvalidDateSymbol(symbol);\n                            newValue = cloneDate(dateCandidate);\n                            if (this.getExisting(\"M\") && this.getExisting(\"y\")) {\n                                // changing from 28/Feb to 29/Feb to 29/March\n                                this.setExisting(\"d\", true);\n                                this.resetInvalidDateSymbol(\"d\");\n                            }\n                        }\n                        else {\n                            this.resetInvalidDateSymbol(symbol);\n                            newValue = cloneDate(newValueCandidate);\n                        }\n                    }\n                    else {\n                        invalidDateFound = true;\n                        this.setInvalidDatePart(symbol, {\n                            value: month_1,\n                            date: cloneDate(newValueCandidate),\n                            startDate: cloneDate(this.value)\n                        });\n                        this.setExisting(symbol, false);\n                    }\n                }\n                else if (isDay && newValueCandidate) {\n                    if (newValueCandidate.getDate() === day) {\n                        if (this.getExisting(\"M\")) {\n                            if (dateCandidateExists) {\n                                newValue = cloneDate(dateCandidate);\n                                this.resetInvalidDateSymbol(symbol);\n                            }\n                            else {\n                                invalidDateFound = true;\n                                this.setInvalidDatePart(symbol, {\n                                    value: day,\n                                    date: cloneDate(newValueCandidate),\n                                    startDate: cloneDate(this.value)\n                                });\n                                this.setExisting(symbol, false);\n                            }\n                        }\n                        else if (dateCandidateExists) {\n                            newValue = cloneDate(dateCandidate);\n                            this.resetInvalidDateSymbol(symbol);\n                            if (this.getExisting(\"d\") && this.getExisting(\"y\")) {\n                                // changing from 31/Jan to 31/Feb to 28/Feb\n                                this.setExisting(\"M\", true);\n                                this.resetInvalidDateSymbol(\"M\");\n                            }\n                        }\n                        else {\n                            this.resetInvalidDateSymbol(symbol);\n                            newValue = cloneDate(newValueCandidate);\n                        }\n                    }\n                    else {\n                        invalidDateFound = true;\n                        this.setInvalidDatePart(symbol, {\n                            value: day,\n                            date: cloneDate(this.value),\n                            startDate: cloneDate(this.value)\n                        });\n                        this.setExisting(symbol, false);\n                    }\n                }\n                if (!invalidDateFound) {\n                    this.setExisting(symbol, true);\n                    if (isInCaretMode && !isValidDate(parsedDate)) {\n                        var valueCandidate = this.intl.parseDate(basePrefix + middle + baseSuffix, this.format, this.localeId);\n                        if (isValidDate(valueCandidate)) {\n                            this._value = valueCandidate;\n                        }\n                    }\n                    else {\n                        this._value = newValue;\n                    }\n                    if (this.getValue()) {\n                        this.resetInvalidDate();\n                    }\n                }\n                var switchToNext = false;\n                if (symbol === \"M\") {\n                    if (parsedValue >= 2 || textToParse.length >= 2) {\n                        switchToNext = true;\n                    }\n                    else {\n                        switchToNext = false;\n                    }\n                }\n                else {\n                    switchToNext = hasFixedFormat ?\n                        textToParse.length === segmentLength :\n                        textToParse.length > segmentLength;\n                }\n                return extend(parseResult, {\n                    value: null,\n                    switchToNext: switchToNext,\n                    hasInvalidDatePart: invalidDateFound\n                });\n            }\n        }\n        return extend(parseResult, { value: null, switchToNext: false });\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.symbolMap = function (symbol) {\n        return this.intl.splitDateFormat(this.format, this.localeId).reduce(dateSymbolMap, {})[symbol];\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.resetLeadingZero = function () {\n        var hasLeadingZero = this.leadingZero !== null;\n        this.setLeadingZero(null);\n        return hasLeadingZero;\n    };\n    DateObject.prototype.setLeadingZero = function (leadingZero) {\n        this.leadingZero = leadingZero;\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.getLeadingZero = function () {\n        return this.leadingZero || {};\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.normalizeCentury = function (date) {\n        if (!isPresent(date)) {\n            return date;\n        }\n        var twoDigitYear = cropTwoDigitYear(date);\n        var centuryBase = this.getNormalizedCenturyBase(twoDigitYear);\n        var normalizedDate = setYears(date, centuryBase + twoDigitYear);\n        return normalizedDate;\n    };\n    DateObject.prototype.incrementLeadingZero = function (symbol) {\n        var leadingZero = this.leadingZero || {};\n        leadingZero[symbol] = (leadingZero[symbol] || 0) + 1;\n        this.leadingZero = leadingZero;\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.isAbbrMonth = function (parts, symbol) {\n        var pattern = this.partPattern(parts, symbol);\n        return pattern.type === 'month' && pattern.names;\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.partPattern = function (parts, symbol) {\n        return parts.filter(function (part) { return part.pattern.indexOf(symbol) !== -1; })[0];\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.peek = function (value, pattern) {\n        var peekValue = value.replace(/^0*/, '') + '0';\n        return padZero(pattern.length - peekValue.length) + peekValue;\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.matchMonth = function (typedChar) {\n        this.typedMonthPart += typedChar.toLowerCase();\n        if (this.monthNames.length === 0) {\n            return '';\n        }\n        while (this.typedMonthPart.length > 0) {\n            for (var i = 0; i < this.monthNames.length; i++) {\n                if (this.monthNames[i].toLowerCase().indexOf(this.typedMonthPart) === 0) {\n                    return this.monthNames[i];\n                }\n            }\n            var monthAsNum = parseInt(this.typedMonthPart, 10);\n            /* ensure they exact match */\n            if (monthAsNum >= 1 && monthAsNum <= 12 && monthAsNum.toString() === this.typedMonthPart) {\n                return this.monthNames[monthAsNum - 1];\n            }\n            this.typedMonthPart = this.typedMonthPart.substring(1, this.typedMonthPart.length);\n        }\n        return '';\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.matchDayPeriod = function (typedChar, symbol) {\n        var lowerChart = typedChar.toLowerCase();\n        if (symbol === 'a' && this.dayPeriods) {\n            if (this.dayPeriods.am.toLowerCase().startsWith(lowerChart)) {\n                return this.dayPeriods.am;\n            }\n            else if (this.dayPeriods.pm.toLowerCase().startsWith(lowerChart)) {\n                return this.dayPeriods.pm;\n            }\n        }\n        return '';\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.allFormattedMonths = function (locale) {\n        if (locale === void 0) { locale = \"en\"; }\n        var dateFormatParts = this.intl.splitDateFormat(this.format, this.localeId);\n        for (var i = 0; i < dateFormatParts.length; i++) {\n            if (dateFormatParts[i].type === 'month' && dateFormatParts[i].names) {\n                return this.intl.dateFormatNames(locale, dateFormatParts[i].names);\n            }\n        }\n        return [];\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.allDayPeriods = function (locale) {\n        if (locale === void 0) { locale = \"en\"; }\n        var dateFormatParts = this.intl.splitDateFormat(this.format);\n        for (var i = 0; i < dateFormatParts.length; i++) {\n            if (dateFormatParts[i].type === \"dayperiod\" && dateFormatParts[i].names) {\n                return this.intl.dateFormatNames(locale, dateFormatParts[i].names);\n            }\n        }\n        return null;\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.patternLength = function (pattern) {\n        if (pattern[0] === 'y') {\n            return 4;\n        }\n        if (SHORT_PATTERN_LENGTH_REGEXP.test(pattern)) {\n            return 2;\n        }\n        return 0;\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.dateFormatString = function (date, format) {\n        var dateFormatParts = this.intl.splitDateFormat(format, this.localeId);\n        var parts = [];\n        var partMap = [];\n        for (var i = 0; i < dateFormatParts.length; i++) {\n            var partLength = this.intl.formatDate(date, { pattern: dateFormatParts[i].pattern }, this.localeId).length;\n            while (partLength > 0) {\n                parts.push(this.symbols[dateFormatParts[i].pattern[0]] || Constants.formatSeparator);\n                partMap.push(dateFormatParts[i]);\n                partLength--;\n            }\n        }\n        var returnValue = new Mask();\n        returnValue.symbols = parts.join('');\n        returnValue.partMap = partMap;\n        return returnValue;\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.merge = function (text, mask) {\n        // Important: right to left.\n        var resultText = '';\n        var resultFormat = '';\n        var format = mask.symbols;\n        var processTextSymbolsEnded = false;\n        var ignoreFormatSymbolsCount = 0;\n        var formattedDates = this.getFormattedInvalidDates(format);\n        for (var formatSymbolIndex = format.length - 1; formatSymbolIndex >= 0; formatSymbolIndex--) {\n            var partsForSegment = this.getPartsForSegment(mask, formatSymbolIndex);\n            if (this.knownParts.indexOf(format[formatSymbolIndex]) === -1 || this.getExisting(format[formatSymbolIndex])) {\n                if (this.autoCorrectParts) {\n                    resultText = text[formatSymbolIndex] + resultText;\n                }\n                else {\n                    if (text.length !== format.length) {\n                        if (processTextSymbolsEnded) {\n                            resultText = text[formatSymbolIndex] + resultText;\n                        }\n                        else if (ignoreFormatSymbolsCount > 0) {\n                            resultText = text[formatSymbolIndex] + resultText;\n                            ignoreFormatSymbolsCount--;\n                            if (ignoreFormatSymbolsCount <= 0) {\n                                processTextSymbolsEnded = true;\n                            }\n                        }\n                        else {\n                            resultText = (text[formatSymbolIndex + text.length - format.length] || \"\") + resultText;\n                        }\n                    }\n                    else {\n                        resultText = text[formatSymbolIndex] + resultText;\n                    }\n                }\n                resultFormat = format[formatSymbolIndex] + resultFormat;\n            }\n            else {\n                var symbol = format[formatSymbolIndex];\n                var formatSymbolIndexModifier = 0;\n                if (this.autoCorrectParts || (!this.autoCorrectParts && !this.getInvalidDatePartValue(symbol))) {\n                    while (formatSymbolIndex >= 0 && symbol === format[formatSymbolIndex]) {\n                        formatSymbolIndex--;\n                    }\n                    formatSymbolIndex++;\n                }\n                if (this.leadingZero && this.leadingZero[symbol]) {\n                    resultText = '0' + resultText;\n                }\n                else {\n                    if (!this.autoCorrectParts && this.getInvalidDatePartValue(symbol)) {\n                        var datePartText = this.getInvalidDatePartValue(symbol).toString();\n                        if (symbol === \"M\") {\n                            datePartText = (parseToInt(this.getInvalidDatePartValue(symbol)) + JS_MONTH_OFFSET).toString();\n                            if (partsForSegment.length > MONTH_PART_WITH_WORDS_THRESHOLD) {\n                                resultText = formattedDates[symbol][formatSymbolIndex] + resultText;\n                            }\n                            else {\n                                datePartText = (parseToInt(this.getInvalidDatePartValue(symbol)) + JS_MONTH_OFFSET).toString();\n                                var formattedDatePart = padZero(partsForSegment.length - datePartText.length) + datePartText;\n                                resultText = formattedDatePart + resultText;\n                                formatSymbolIndexModifier = partsForSegment.length - 1;\n                                ignoreFormatSymbolsCount = datePartText.length - partsForSegment.length;\n                            }\n                        }\n                        else {\n                            var formattedDatePart = padZero(partsForSegment.length - datePartText.length) + datePartText;\n                            resultText = formattedDatePart + resultText;\n                            formatSymbolIndexModifier = partsForSegment.length - 1;\n                            ignoreFormatSymbolsCount = datePartText.length - partsForSegment.length;\n                        }\n                    }\n                    else {\n                        resultText = this.dateFieldName(mask.partMap[formatSymbolIndex]) + resultText;\n                    }\n                }\n                while (resultFormat.length < resultText.length) {\n                    resultFormat = format[formatSymbolIndex] + resultFormat;\n                }\n                if (formatSymbolIndexModifier !== 0) {\n                    formatSymbolIndex = (formatSymbolIndex - formatSymbolIndexModifier) + (text.length - format.length);\n                }\n            }\n        }\n        return { text: resultText, format: resultFormat };\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.dateFieldName = function (part) {\n        var formatPlaceholder = this.formatPlaceholder || 'wide';\n        if (formatPlaceholder[part.type]) {\n            return formatPlaceholder[part.type];\n        }\n        if (formatPlaceholder === 'formatPattern') {\n            return part.pattern;\n        }\n        return this.intl.dateFieldName(Object.assign(part, { nameType: formatPlaceholder }));\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.getNormalizedCenturyBase = function (twoDigitYear) {\n        return twoDigitYear > this.twoDigitYearMax ?\n            PREVIOUS_CENTURY_BASE :\n            CURRENT_CENTURY_BASE;\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.shouldNormalizeCentury = function () {\n        return this.intl.splitDateFormat(this.format).some(function (part) { return part.pattern === 'yy'; });\n    };\n    DateObject.prototype.resetInvalidDate = function () {\n        var _this = this;\n        this._partiallyInvalidDate.startDate = null;\n        Object.keys(this._partiallyInvalidDate.invalidDateParts).forEach(function (key) {\n            _this.resetInvalidDatePart(key);\n        });\n    };\n    DateObject.prototype.resetInvalidDateSymbol = function (symbol) {\n        var _this = this;\n        this.resetInvalidDatePart(symbol);\n        var shouldResetInvalidDate = true;\n        Object.keys(this._partiallyInvalidDate.invalidDateParts).forEach(function (key) {\n            if (_this._partiallyInvalidDate.invalidDateParts[key] &&\n                isPresent(_this._partiallyInvalidDate.invalidDateParts[key].value)) {\n                shouldResetInvalidDate = false;\n            }\n        });\n        if (shouldResetInvalidDate) {\n            this.resetInvalidDate();\n        }\n    };\n    DateObject.prototype.resetInvalidDatePart = function (symbol) {\n        if (this._partiallyInvalidDate.invalidDateParts[symbol]) {\n            this._partiallyInvalidDate.invalidDateParts[symbol] = {\n                value: null,\n                date: null,\n                startDateOffset: 0\n            };\n        }\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.getInvalidDatePart = function (symbol) {\n        var invalidDatePart = this._partiallyInvalidDate.invalidDateParts[symbol];\n        return invalidDatePart || {};\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.getInvalidDatePartValue = function (symbol) {\n        var invalidDatePart = this._partiallyInvalidDate.invalidDateParts[symbol];\n        return (invalidDatePart || {}).value;\n    };\n    DateObject.prototype.setInvalidDatePart = function (symbol, _a) {\n        var _b = _a.value, value = _b === void 0 ? null : _b, _c = _a.date, date = _c === void 0 ? null : _c, _d = _a.startDateOffset, startDateOffset = _d === void 0 ? 0 : _d, _e = _a.startDate, startDate = _e === void 0 ? null : _e;\n        if (this._partiallyInvalidDate.invalidDateParts[symbol]) {\n            this._partiallyInvalidDate.invalidDateParts[symbol].value = value;\n            this._partiallyInvalidDate.invalidDateParts[symbol].date = date;\n            this._partiallyInvalidDate.invalidDateParts[symbol].startDateOffset = startDateOffset;\n            this._partiallyInvalidDate.startDate = startDate;\n        }\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.hasInvalidDatePart = function () {\n        var _this = this;\n        var hasInvalidDatePart = false;\n        Object.keys(this._partiallyInvalidDate.invalidDateParts).forEach(function (key) {\n            if (_this._partiallyInvalidDate.invalidDateParts[key] &&\n                isPresent(_this._partiallyInvalidDate.invalidDateParts[key].value)) {\n                hasInvalidDatePart = true;\n            }\n        });\n        return hasInvalidDatePart;\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.modifyDateSymbolWithOffset = function (date, symbol, offset) {\n        var newValue = cloneDate(date);\n        var timeModified = false;\n        switch (symbol) {\n            case 'y':\n                newValue.setFullYear(newValue.getFullYear() + offset);\n                break;\n            case 'M':\n                newValue = addMonths(this.value, offset);\n                break;\n            case 'd':\n            case 'E':\n                newValue.setDate(newValue.getDate() + offset);\n                break;\n            case 'h':\n            case 'H':\n                newValue.setHours(newValue.getHours() + offset);\n                timeModified = true;\n                break;\n            case 'm':\n                newValue.setMinutes(newValue.getMinutes() + offset);\n                timeModified = true;\n                break;\n            case 's':\n                newValue.setSeconds(newValue.getSeconds() + offset);\n                timeModified = true;\n                break;\n            case \"S\":\n                newValue.setMilliseconds(newValue.getMilliseconds() + offset);\n                break;\n            case 'a':\n                newValue.setHours(newValue.getHours() + (12 * offset));\n                timeModified = true;\n                break;\n            default: break;\n        }\n        return {\n            date: newValue,\n            timeModified: timeModified\n        };\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.modifyDateSymbolWithValue = function (date, symbol, value) {\n        var newValue = cloneDate(date);\n        switch (symbol) {\n            case 'y':\n                newValue.setFullYear(value);\n                break;\n            case 'M':\n                newValue = addMonths(date, value - date.getMonth());\n                break;\n            case 'd':\n            case 'E':\n                newValue.setDate(value);\n                break;\n            case 'h':\n            case 'H':\n                newValue.setHours(value);\n                break;\n            case 'm':\n                newValue.setMinutes(value);\n                break;\n            case 's':\n                newValue.setSeconds(value);\n                break;\n            case \"S\":\n                newValue.setMilliseconds(value);\n                break;\n            case 'a':\n                newValue.setHours(value);\n                break;\n            default: break;\n        }\n        return newValue;\n    };\n    DateObject.prototype.markDatePartsAsExisting = function () {\n        this.modifyExisting(true);\n    };\n    /**\n     * @hidden\n     */\n    DateObject.prototype.getPartsForSegment = function (mask, partIndex) {\n        var segmentPart = mask.partMap[partIndex];\n        var partsForSegment = [];\n        for (var maskPartIndex = partIndex; maskPartIndex < mask.partMap.length; maskPartIndex++) {\n            var part = mask.partMap[maskPartIndex];\n            if (segmentPart.type === part.type && segmentPart.pattern === part.pattern) {\n                partsForSegment.push(part);\n            }\n            else {\n                break;\n            }\n        }\n        for (var maskPartIndex = partIndex - 1; maskPartIndex >= 0; maskPartIndex--) {\n            var part = mask.partMap[maskPartIndex];\n            if (segmentPart.type === part.type && segmentPart.pattern === part.pattern) {\n                partsForSegment.unshift(part);\n            }\n            else {\n                break;\n            }\n        }\n        return partsForSegment;\n    };\n    return DateObject;\n}());\n\nvar KeyCode = {\n    BACKSPACE: 8,\n    DELETE: 46,\n    TAB: 9,\n    ENTER: 13,\n    ESCAPE: 27,\n    ARROW_LEFT: 37,\n    ARROW_UP: 38,\n    ARROW_RIGHT: 39,\n    ARROW_DOWN: 40,\n    SPACE: 32,\n    END: 35,\n    HOME: 36,\n    PAGE_UP: 33,\n    PAGE_DOWN: 34\n};\n\nvar defaultOptions = {\n    events: {}\n};\nvar Observable = /** @class */ (function () {\n    function Observable(options) {\n        this.options = deepExtend({}, defaultOptions, options);\n    }\n    Observable.prototype.destroy = function () {\n    };\n    /**\n     * @hidden\n     */\n    Observable.prototype.trigger = function (eventName, args) {\n        if (args === void 0) { args = {}; }\n        var eventData = {\n            defaultPrevented: false,\n            preventDefault: function () {\n                eventData.defaultPrevented = true;\n            }\n        };\n        if (isFunction(this.options.events[eventName])) {\n            this.options.events[eventName](extend(eventData, args, {\n                sender: this\n            }));\n            return eventData.defaultPrevented;\n        }\n        return false;\n    };\n    return Observable;\n}());\n\nvar DateInputInteractionMode;\n(function (DateInputInteractionMode) {\n    DateInputInteractionMode[\"None\"] = \"none\";\n    DateInputInteractionMode[\"Caret\"] = \"caret\";\n    DateInputInteractionMode[\"Selection\"] = \"selection\";\n})(DateInputInteractionMode || (DateInputInteractionMode = {}));\n\nvar _a;\nvar DEFAULT_SEGMENT_STEP = 1;\nvar DRAG_START = \"dragStart\";\nvar DROP = \"drop\";\nvar TOUCH_START = \"touchstart\";\nvar MOUSE_DOWN = \"mousedown\";\nvar MOUSE_UP = \"mouseup\";\nvar CLICK = \"click\";\nvar INPUT = \"input\";\nvar KEY_DOWN = \"keydown\";\nvar FOCUS = \"focus\";\nvar BLUR = \"blur\";\nvar PASTE = \"paste\";\nvar MOUSE_SCROLL = \"DOMMouseScroll\";\nvar MOUSE_WHEEL = \"mousewheel\";\nvar VALUE_CHANGE = \"valueChange\";\nvar INPUT_END = \"inputEnd\";\nvar BLUR_END = \"blurEnd\";\nvar FOCUS_END = \"focusEnd\";\nvar CHANGE = \"change\";\nvar defaultDateInputOptions = {\n    format: \"d\",\n    hasPlaceholder: false,\n    placeholder: null,\n    cycleTime: true,\n    locale: null,\n    steps: {\n        millisecond: DEFAULT_SEGMENT_STEP,\n        second: DEFAULT_SEGMENT_STEP,\n        minute: DEFAULT_SEGMENT_STEP,\n        hour: DEFAULT_SEGMENT_STEP,\n        day: DEFAULT_SEGMENT_STEP,\n        month: DEFAULT_SEGMENT_STEP,\n        year: DEFAULT_SEGMENT_STEP\n    },\n    formatPlaceholder: null,\n    events: (_a = {},\n        _a[VALUE_CHANGE] = null,\n        _a[INPUT] = null,\n        _a[INPUT_END] = null,\n        _a[FOCUS] = null,\n        _a[FOCUS_END] = null,\n        _a[BLUR] = null,\n        _a[BLUR_END] = null,\n        _a[KEY_DOWN] = null,\n        _a[MOUSE_WHEEL] = null,\n        _a[CHANGE] = null,\n        _a),\n    selectNearestSegmentOnFocus: false,\n    selectPreviousSegmentOnBackspace: false,\n    enableMouseWheel: false,\n    allowCaretMode: false,\n    autoSwitchParts: true,\n    autoSwitchKeys: [],\n    twoDigitYearMax: Constants.twoDigitYearMax,\n    autoCorrectParts: true,\n    autoFill: false\n};\nvar DateInput = /** @class */ (function (_super) {\n    __extends(DateInput, _super);\n    function DateInput(element, options) {\n        var _this = _super.call(this, options) || this;\n        _this.dateObject = null;\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        _this.currentText = '';\n        _this.currentFormat = '';\n        _this.interactionMode = DateInputInteractionMode.None;\n        _this.previousElementSelection = { start: 0, end: 0 };\n        _this.init(element, options);\n        return _this;\n    }\n    Object.defineProperty(DateInput.prototype, \"value\", {\n        get: function () {\n            return this.dateObject && this.dateObject.getValue();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DateInput.prototype.init = function (element, options) {\n        var dateValue = isValidDate(this.options.value) ? cloneDate(this.options.value) : new Date(options.formattedValue);\n        if (!isValidDate(dateValue)) {\n            dateValue = null;\n        }\n        this.element = element;\n        // this.element._kendoWidget = this;\n        this.options = deepExtend({}, defaultDateInputOptions, options);\n        this.intl = this.options.intlService;\n        this.dateObject = this.createDateObject();\n        this.dateObject.setValue(dateValue);\n        this.setTextAndFormat();\n        this.bindEvents();\n        this.resetSegmentValue = true;\n        this.interactionMode = DateInputInteractionMode.None;\n        this.forceUpdate();\n    };\n    DateInput.prototype.destroy = function () {\n        this.unbindEvents();\n        this.dateObject = null;\n        _super.prototype.destroy.call(this);\n    };\n    DateInput.prototype.bindEvents = function () {\n        this.onElementDragStart = this.onElementDragStart.bind(this);\n        this.element.addEventListener(DRAG_START, this.onElementDragStart);\n        this.onElementDrop = this.onElementDrop.bind(this);\n        this.element.addEventListener(DROP, this.onElementDrop);\n        this.onElementClick = this.onElementClick.bind(this);\n        this.element.addEventListener(CLICK, this.onElementClick);\n        this.onElementMouseDown = this.onElementMouseDown.bind(this);\n        this.element.addEventListener(MOUSE_DOWN, this.onElementMouseDown);\n        this.element.addEventListener(TOUCH_START, this.onElementMouseDown);\n        this.onElementMouseUp = this.onElementMouseUp.bind(this);\n        this.element.addEventListener(MOUSE_UP, this.onElementMouseUp);\n        this.onElementInput = this.onElementInput.bind(this);\n        this.element.addEventListener(INPUT, this.onElementInput);\n        this.onElementKeyDown = this.onElementKeyDown.bind(this);\n        this.element.addEventListener(KEY_DOWN, this.onElementKeyDown);\n        this.onElementFocus = this.onElementFocus.bind(this);\n        this.element.addEventListener(FOCUS, this.onElementFocus);\n        this.onElementBlur = this.onElementBlur.bind(this);\n        this.element.addEventListener(BLUR, this.onElementBlur);\n        this.onElementChange = this.onElementChange.bind(this);\n        this.element.addEventListener(CHANGE, this.onElementChange);\n        this.onElementPaste = this.onElementPaste.bind(this);\n        this.element.addEventListener(PASTE, this.onElementPaste);\n        this.onElementMouseWheel = this.onElementMouseWheel.bind(this);\n        this.element.addEventListener(MOUSE_SCROLL, this.onElementMouseWheel);\n        this.element.addEventListener(MOUSE_WHEEL, this.onElementMouseWheel);\n    };\n    DateInput.prototype.unbindEvents = function () {\n        this.element.removeEventListener(DRAG_START, this.onElementDragStart);\n        this.element.removeEventListener(DROP, this.onElementDrop);\n        this.element.removeEventListener(TOUCH_START, this.onElementMouseDown);\n        this.element.removeEventListener(MOUSE_DOWN, this.onElementMouseDown);\n        this.element.removeEventListener(MOUSE_UP, this.onElementMouseUp);\n        this.element.removeEventListener(CLICK, this.onElementClick);\n        this.element.removeEventListener(INPUT, this.onElementInput);\n        this.element.removeEventListener(KEY_DOWN, this.onElementKeyDown);\n        this.element.removeEventListener(FOCUS, this.onElementFocus);\n        this.element.removeEventListener(BLUR, this.onElementBlur);\n        this.element.removeEventListener(CHANGE, this.onElementChange);\n        this.element.removeEventListener(PASTE, this.onElementPaste);\n        this.element.removeEventListener(MOUSE_SCROLL, this.onElementMouseWheel);\n        this.element.removeEventListener(MOUSE_WHEEL, this.onElementMouseWheel);\n    };\n    DateInput.prototype.setOptions = function (options, refresh) {\n        if (refresh === void 0) { refresh = false; }\n        this.options = deepExtend({}, this.options, options);\n        this.setDateObjectOptions();\n        if (refresh) {\n            this.unbindEvents();\n            this.init(this.element, this.options);\n        }\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.setDateObjectOptions = function () {\n        if (this.dateObject) {\n            var newOptions = this.getDateObjectOptions();\n            this.dateObject.setOptions(newOptions);\n        }\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.resetLocale = function () {\n        this.unbindEvents();\n        this.init(this.element, this.options);\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.isInCaretMode = function () {\n        return this.interactionMode === DateInputInteractionMode.Caret;\n    };\n    DateInput.prototype.focus = function () {\n        this.element.focus();\n        if (this.options.selectNearestSegmentOnFocus) {\n            this.selectNearestSegment(0);\n        }\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.onElementDragStart = function (e) {\n        e.preventDefault();\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.onElementDrop = function (e) {\n        e.preventDefault();\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.onElementMouseDown = function () {\n        this.mouseDownStarted = true;\n        this.focusedPriorToMouseDown = this.isActive;\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.onElementMouseUp = function (e) {\n        this.mouseDownStarted = false;\n        e.preventDefault();\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.onElementClick = function (e) {\n        this.mouseDownStarted = false;\n        this.switchedPartOnPreviousKeyAction = false;\n        var selection = this.selection;\n        if (this.isInCaretMode()) {\n            // explicitly refresh the input element value\n            // caret mode can change the number of symbols in the element\n            // thus clicking on a segment can result in incorrect selection\n            this.forceUpdate();\n        }\n        if (e.detail === 3) {\n            // when 3 clicks occur, leave the native event to handle the change\n            // this results in selecting the whole element value\n        }\n        else {\n            if (this.isActive && this.options.selectNearestSegmentOnFocus) {\n                var selectionPresent = this.element.selectionStart !== this.element.selectionEnd;\n                var placeholderToggled = isPresent(this.options.placeholder) &&\n                    !this.dateObject.hasValue() &&\n                    !this.focusedPriorToMouseDown;\n                // focus first segment if the user hasn't selected something during mousedown and if the placeholder was just toggled\n                var selectFirstSegment = !selectionPresent && placeholderToggled;\n                var index = selectFirstSegment ? 0 : this.caret()[0];\n                this.selectNearestSegment(index);\n            }\n            else {\n                this.setSelection(this.selectionByIndex(selection.start));\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.onElementInput = function (e) {\n        this.triggerInput({ event: e });\n        if (!this.element || !this.dateObject) {\n            return;\n        }\n        var switchedPartOnPreviousKeyAction = this.switchedPartOnPreviousKeyAction;\n        if (this.isPasteInProgress) {\n            if (this.options.allowCaretMode) {\n                // pasting should leave the input with caret\n                // thus allow direct input instead of selection mode\n                this.resetSegmentValue = false;\n            }\n            this.updateOnPaste(e);\n            this.isPasteInProgress = false;\n            return;\n        }\n        var keyDownEvent = this.keyDownEvent || {};\n        var isBackspaceKey = keyDownEvent.keyCode === KeyCode.BACKSPACE || keyDownEvent.key === Key.BACKSPACE;\n        var isDeleteKey = keyDownEvent.keyCode === KeyCode.DELETE || keyDownEvent.key === Key.DELETE;\n        var originalInteractionMode = this.interactionMode;\n        if (this.options.allowCaretMode &&\n            originalInteractionMode !== DateInputInteractionMode.Caret &&\n            !isDeleteKey && !isBackspaceKey) {\n            this.resetSegmentValue = true;\n        }\n        if (this.options.allowCaretMode) {\n            this.interactionMode = DateInputInteractionMode.Caret;\n        }\n        else {\n            this.interactionMode = DateInputInteractionMode.Selection;\n        }\n        var hasCaret = this.isInCaretMode();\n        if (hasCaret && this.keyDownEvent.key === Key.SPACE) {\n            // do not allow custom \"holes\" in the date segments\n            this.restorePreviousInputEventState();\n            return;\n        }\n        var oldExistingDateValue = this.dateObject && this.dateObject.getValue();\n        var oldDateValue = this.dateObject ? this.dateObject.value : null;\n        var _a = this.dateObject.getTextAndFormat(), currentText = _a.text, currentFormat = _a.format;\n        this.currentFormat = currentFormat;\n        var oldText = \"\";\n        if (hasCaret) {\n            if (isBackspaceKey || isDeleteKey) {\n                oldText = this.previousElementValue;\n            }\n            else if (originalInteractionMode === DateInputInteractionMode.Caret) {\n                oldText = this.previousElementValue;\n            }\n            else {\n                oldText = currentText;\n            }\n        }\n        else {\n            oldText = currentText;\n        }\n        var newText = this.elementValue;\n        var diff = approximateStringMatching({\n            oldText: oldText,\n            newText: newText,\n            formatPattern: this.currentFormat,\n            selectionStart: this.selection.start,\n            isInCaretMode: hasCaret,\n            keyEvent: this.keyDownEvent\n        });\n        if (diff && diff.length && diff[0] && diff[0][1] !== Constants.formatSeparator) {\n            this.switchedPartOnPreviousKeyAction = false;\n        }\n        if (hasCaret && (!diff || diff.length === 0)) {\n            this.restorePreviousInputEventState();\n            return;\n        }\n        else if (hasCaret && diff.length === 1) {\n            if (!diff[0] || !diff[0][0]) {\n                this.restorePreviousInputEventState();\n                return;\n            }\n            else if (hasCaret && diff[0] &&\n                (diff[0][0] === Constants.formatSeparator || diff[0][1] === Constants.formatSeparator)) {\n                this.restorePreviousInputEventState();\n                return;\n            }\n        }\n        var navigationOnly = (diff.length === 1 && diff[0][1] === Constants.formatSeparator);\n        var parsePartsResults = [];\n        var switchPart = false;\n        var error = null;\n        if (!navigationOnly) {\n            for (var i = 0; i < diff.length; i++) {\n                var parsePartResult = this.dateObject.parsePart({\n                    symbol: diff[i][0],\n                    currentChar: diff[i][1],\n                    resetSegmentValue: this.resetSegmentValue,\n                    cycleSegmentValue: !this.isInCaretMode(),\n                    rawTextValue: this.element.value,\n                    isDeleting: isBackspaceKey || isDeleteKey,\n                    originalFormat: this.currentFormat\n                });\n                parsePartsResults.push(parsePartResult);\n                if (!parsePartResult.value) {\n                    error = { type: \"parse\" };\n                }\n                switchPart = parsePartResult.switchToNext;\n            }\n        }\n        if (!this.options.autoSwitchParts) {\n            switchPart = false;\n        }\n        this.resetSegmentValue = false;\n        var hasFixedFormat = this.options.format === this.currentFormat ||\n            // all not fixed formats are 1 symbol, e.g. \"d\"\n            (isPresent(this.options.format) && this.options.format.length > 1);\n        var lastParseResult = parsePartsResults[parsePartsResults.length - 1];\n        var lastParseResultHasNoValue = lastParseResult && !isPresent(lastParseResult.value);\n        var parsingFailedOnDelete = (hasCaret && (isBackspaceKey || isDeleteKey) && lastParseResultHasNoValue);\n        var resetPart = lastParseResult ? lastParseResult.resetPart : false;\n        var newExistingDateValue = this.dateObject.getValue();\n        var hasExistingDateValueChanged = !isEqual(oldExistingDateValue, newExistingDateValue);\n        var newDateValue = this.dateObject.value;\n        var symbolForSelection;\n        var currentSelection = this.selection;\n        if (hasCaret) {\n            var diffChar = diff && diff.length > 0 ? diff[0][0] : null;\n            var hasLeadingZero = this.dateObject.getLeadingZero()[diffChar];\n            if (diff.length && diff[0][0] !== Constants.formatSeparator) {\n                if (switchPart) {\n                    this.forceUpdateWithSelection();\n                    this.switchDateSegment(1);\n                }\n                else if (resetPart) {\n                    symbolForSelection = this.currentFormat[currentSelection.start];\n                    if (symbolForSelection) {\n                        this.forceUpdate();\n                        this.setSelection(this.selectionBySymbol(symbolForSelection));\n                    }\n                    else {\n                        this.restorePreviousInputEventState();\n                    }\n                }\n                else if (parsingFailedOnDelete) {\n                    this.forceUpdate();\n                    if (diff.length && diff[0][0] !== Constants.formatSeparator) {\n                        this.setSelection(this.selectionBySymbol(diff[0][0]));\n                    }\n                }\n                else if (lastParseResultHasNoValue) {\n                    if (e.data === \"0\" && hasLeadingZero) {\n                        // do not reset element value on a leading zero\n                        // wait for consecutive input to determine the value\n                    }\n                    else if (isPresent(oldExistingDateValue) && !isPresent(newExistingDateValue)) {\n                        this.restorePreviousInputEventState();\n                    }\n                    else if (!isPresent(oldExistingDateValue) && isPresent(newExistingDateValue)) {\n                        this.forceUpdateWithSelection();\n                    }\n                    else if (isPresent(oldExistingDateValue) && isPresent(newExistingDateValue)) {\n                        if (hasExistingDateValueChanged) {\n                            this.forceUpdateWithSelection();\n                        }\n                        else {\n                            this.restorePreviousInputEventState();\n                        }\n                    }\n                    else if (!isPresent(oldExistingDateValue) && !isPresent(newExistingDateValue)) {\n                        this.forceUpdateWithSelection();\n                    }\n                    else if (oldDateValue !== newDateValue) {\n                        // this can happen on auto correct when no valid value is parsed\n                    }\n                    else {\n                        this.restorePreviousInputEventState();\n                    }\n                }\n                else if (!lastParseResultHasNoValue) {\n                    // the user types a valid but incomplete date (e.g. year \"123\" with format \"yyyy\")\n                    // let them continue typing, but refresh for not fixed formats\n                    if (!hasFixedFormat) {\n                        this.forceUpdateWithSelection();\n                    }\n                }\n            }\n            else {\n                if (!this.options.autoSwitchParts && diff[0][1] === Constants.formatSeparator) {\n                    // do not change the selection when a separator is pressed\n                    // this should happen only if autoSwitchKeys contains the separator explicitly\n                }\n                else {\n                    this.setSelection(this.selectionBySymbol(diff[0][0]));\n                }\n            }\n        }\n        else if (!hasCaret) {\n            this.forceUpdate();\n            if (diff.length && diff[0][0] !== Constants.formatSeparator) {\n                this.setSelection(this.selectionBySymbol(diff[0][0]));\n            }\n            if (this.options.autoSwitchParts) {\n                if (navigationOnly) {\n                    this.resetSegmentValue = true;\n                    if (!switchedPartOnPreviousKeyAction) {\n                        this.switchDateSegment(1);\n                    }\n                    this.switchedPartOnPreviousKeyAction = true;\n                }\n                else if (switchPart) {\n                    this.switchDateSegment(1);\n                    this.switchedPartOnPreviousKeyAction = true;\n                }\n            }\n            else {\n                if (lastParseResult && lastParseResult.switchToNext) {\n                    // the value is complete and should be switched, but the \"autoSwitchParts\" option prevents this\n                    // ensure that the segment value can be reset on next input\n                    this.resetSegmentValue = true;\n                }\n                else if (navigationOnly) {\n                    this.resetSegmentValue = true;\n                    if (!switchedPartOnPreviousKeyAction) {\n                        this.switchDateSegment(1);\n                    }\n                    this.switchedPartOnPreviousKeyAction = true;\n                }\n            }\n            if (isBackspaceKey && this.options.selectPreviousSegmentOnBackspace) {\n                // kendo angular have this UX\n                this.switchDateSegment(-1);\n            }\n        }\n        this.tryTriggerValueChange({\n            oldValue: oldExistingDateValue,\n            event: e\n        });\n        this.triggerInputEnd({ event: e, error: error });\n        if (hasCaret) {\n            // a format like \"F\" can dynamically change the resolved format pattern based on the value, e.g.\n            // \"Tuesday, February 1, 2022 3:04:05 AM\" becomes\n            // \"Wednesday, February 2, 2022 3:04:05 AM\" giving a diff of 2 (\"Tuesday\".length - \"Wednesday\".length)\n            this.setTextAndFormat();\n        }\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.onElementFocus = function (e) {\n        if (this.triggerFocus({ event: e })) {\n            return;\n        }\n        this.isActive = true;\n        this.interactionMode = DateInputInteractionMode.None;\n        this.switchedPartOnPreviousKeyAction = false;\n        this.refreshElementValue();\n        if (!this.mouseDownStarted) {\n            this.caret(0, this.elementValue.length);\n        }\n        this.mouseDownStarted = false;\n        this.triggerFocusEnd({ event: e });\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.onElementBlur = function (e) {\n        this.resetSegmentValue = true;\n        this.isActive = false;\n        if (this.triggerBlur({ event: e })) {\n            return;\n        }\n        if (this.options.autoFill) {\n            this.autoFill();\n        }\n        this.interactionMode = DateInputInteractionMode.None;\n        this.switchedPartOnPreviousKeyAction = false;\n        this.refreshElementValue();\n        this.triggerBlurEnd({ event: e });\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.onElementChange = function (e) {\n        this.triggerChange({ event: e });\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.onElementKeyDown = function (e) {\n        if (this.triggerKeyDown({ event: e })) {\n            return;\n        }\n        var _a = this.selection, start = _a.start, end = _a.end;\n        this.keyDownEvent = e;\n        this.previousElementValue = this.element.value;\n        this.previousElementSelection = { start: start, end: end };\n        if (this.keyEventMatchesAutoSwitchKeys(e)) {\n            var isTabKey = e.keyCode === KeyCode.TAB;\n            if (isTabKey) {\n                var _b = this.selection, selectionStart = _b.start, selectionEnd = _b.end;\n                if (e.shiftKey && isTabKey) {\n                    this.switchDateSegment(-1);\n                }\n                else {\n                    this.switchDateSegment(1);\n                }\n                if (selectionStart !== this.selection.start || selectionEnd !== this.selection.end) {\n                    // when the selection changes, prevent the default Tab behavior\n                    e.preventDefault();\n                    return;\n                }\n            }\n            else {\n                // do not allow the \"input\" event to be triggered\n                e.preventDefault();\n                this.switchDateSegment(1);\n                return;\n            }\n        }\n        var symbol = this.currentFormat[this.selection.start];\n        var step = this.getStepFromSymbol(symbol);\n        var shouldPreventDefault = false;\n        if (e.altKey || e.ctrlKey || e.metaKey || e.keyCode === KeyCode.TAB) {\n            return;\n        }\n        switch (e.keyCode) {\n            case KeyCode.ARROW_LEFT:\n                this.switchDateSegment(-1);\n                shouldPreventDefault = true;\n                this.switchedPartOnPreviousKeyAction = false;\n                break;\n            case KeyCode.ARROW_UP:\n                this.modifyDateSegmentValue(step, symbol, event);\n                shouldPreventDefault = true;\n                this.switchedPartOnPreviousKeyAction = false;\n                break;\n            case KeyCode.ARROW_RIGHT:\n                this.switchDateSegment(1);\n                shouldPreventDefault = true;\n                this.switchedPartOnPreviousKeyAction = false;\n                break;\n            case KeyCode.ARROW_DOWN:\n                this.modifyDateSegmentValue(-step, symbol, event);\n                shouldPreventDefault = true;\n                this.switchedPartOnPreviousKeyAction = false;\n                break;\n            case KeyCode.ENTER:\n                // todo: handle \"change\" event\n                break;\n            case KeyCode.HOME:\n                this.selectNearestSegment(0);\n                shouldPreventDefault = true;\n                this.switchedPartOnPreviousKeyAction = false;\n                this.resetSegmentValue = true;\n                break;\n            case KeyCode.END:\n                this.selectNearestSegment(this.elementValue.length);\n                shouldPreventDefault = true;\n                this.switchedPartOnPreviousKeyAction = false;\n                this.resetSegmentValue = true;\n                break;\n            default:\n                // allow the \"input\" event to handle the change\n                return;\n        }\n        if (shouldPreventDefault) {\n            e.preventDefault();\n        }\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.onElementPaste = function () {\n        this.isPasteInProgress = true;\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.onElementMouseWheel = function (e) {\n        if (!this.options.enableMouseWheel || this.triggerMouseWheel({ event: e })) {\n            return;\n        }\n        if (!this.isActive) {\n            return;\n        }\n        var event = e;\n        if (event.shiftKey) {\n            this.switchDateSegment((event.wheelDelta || -event.detail) > 0 ? -1 : 1);\n        }\n        else {\n            this.modifyDateSegmentValue((event.wheelDelta || -event.detail) > 0 ? 1 : -1);\n        }\n        event.returnValue = false;\n        if (event.preventDefault) {\n            event.preventDefault();\n        }\n        if (event.stopPropagation) {\n            event.stopPropagation();\n        }\n    };\n    DateInput.prototype.updateOnPaste = function (e) {\n        var value = this.intl.parseDate(this.elementValue, this.inputFormat) || this.value;\n        if (isPresent(value) && this.dateObject.shouldNormalizeCentury()) {\n            value = this.dateObject.normalizeCentury(value);\n        }\n        var oldDateObjectValue = this.dateObject && this.dateObject.getValue();\n        this.writeValue(value);\n        this.tryTriggerValueChange({\n            oldValue: oldDateObjectValue,\n            event: e\n        });\n    };\n    Object.defineProperty(DateInput.prototype, \"elementValue\", {\n        get: function () {\n            return (this.element || {}).value || '';\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DateInput.prototype, \"inputFormat\", {\n        get: function () {\n            if (!this.options.format) {\n                return Constants.defaultDateFormat;\n            }\n            if (typeof this.options.format === 'string') {\n                return this.options.format;\n            }\n            else {\n                return this.options.format.inputFormat;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DateInput.prototype, \"displayFormat\", {\n        get: function () {\n            if (!this.options.format) {\n                return Constants.defaultDateFormat;\n            }\n            if (typeof this.options.format === 'string') {\n                return this.options.format;\n            }\n            else {\n                return this.options.format.displayFormat;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DateInput.prototype, \"selection\", {\n        get: function () {\n            var returnValue = { start: 0, end: 0 };\n            if (this.element !== null && this.element.selectionStart !== undefined) {\n                returnValue = {\n                    start: this.element.selectionStart,\n                    end: this.element.selectionEnd\n                };\n            }\n            return returnValue;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DateInput.prototype.setSelection = function (selection) {\n        if (this.element && document.activeElement === this.element) {\n            this.element.setSelectionRange(selection.start, selection.end);\n            if (selection.start !== selection.end) {\n                this.interactionMode = DateInputInteractionMode.Selection;\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.selectionBySymbol = function (symbol) {\n        var start = -1;\n        var end = 0;\n        for (var i = 0; i < this.currentFormat.length; i++) {\n            if (this.currentFormat[i] === symbol) {\n                end = i + 1;\n                if (start === -1) {\n                    start = i;\n                }\n            }\n        }\n        if (start < 0) {\n            start = 0;\n        }\n        if (!this.options.autoCorrectParts && this.currentFormat.length !== this.currentText.length) {\n            if (this.currentFormat.length < this.currentText.length) {\n                end += this.currentText.length - this.currentFormat.length;\n            }\n            else {\n                end = Math.max(0, end - (this.currentFormat.length - this.currentText.length));\n            }\n        }\n        return { start: start, end: end };\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.selectionByIndex = function (index) {\n        var selection = { start: index, end: index };\n        for (var i = index, j = index - 1; i < this.currentFormat.length || j >= 0; i++, j--) {\n            if (i < this.currentFormat.length && this.currentFormat[i] !== Constants.formatSeparator) {\n                selection = this.selectionBySymbol(this.currentFormat[i]);\n                break;\n            }\n            if (j >= 0 && this.currentFormat[j] !== Constants.formatSeparator) {\n                selection = this.selectionBySymbol(this.currentFormat[j]);\n                break;\n            }\n        }\n        return selection;\n    };\n    DateInput.prototype.switchDateSegment = function (offset) {\n        var selection = this.selection;\n        if (this.isInCaretMode()) {\n            var start = selection.start;\n            var currentSymbol = this.currentFormat[start - 1];\n            var symbol = \"\";\n            var symbolCandidate = \"\";\n            if (offset < 0) {\n                for (var i = start + offset; i >= 0; i--) {\n                    symbolCandidate = this.currentFormat[i];\n                    if (symbolCandidate !== Constants.formatSeparator &&\n                        symbolCandidate !== currentSymbol) {\n                        start = i;\n                        symbol = symbolCandidate;\n                        break;\n                    }\n                }\n            }\n            else {\n                for (var i = start + offset; i < this.currentFormat.length; i++) {\n                    symbolCandidate = this.currentFormat[i];\n                    if (symbolCandidate !== Constants.formatSeparator &&\n                        symbolCandidate !== currentSymbol) {\n                        start = i;\n                        symbol = symbolCandidate;\n                        break;\n                    }\n                }\n            }\n            if (symbol) {\n                this.forceUpdate();\n                this.setSelection(this.selectionBySymbol(symbol));\n                this.interactionMode = DateInputInteractionMode.Selection;\n                return;\n            }\n        }\n        this.interactionMode = DateInputInteractionMode.None;\n        var _a = this.selection, selectionStart = _a.start, selectionEnd = _a.end;\n        if (selectionStart < selectionEnd &&\n            this.currentFormat[selectionStart] !== this.currentFormat[selectionEnd - 1]) {\n            this.setSelection(this.selectionByIndex(offset > 0 ? selectionStart : selectionEnd - 1));\n            this.resetSegmentValue = true;\n            this.interactionMode = DateInputInteractionMode.None;\n            return;\n        }\n        var previousFormatSymbol = this.currentFormat[selectionStart];\n        var a = selectionStart + offset;\n        while (a > 0 && a < this.currentFormat.length) {\n            if (this.currentFormat[a] !== previousFormatSymbol &&\n                this.currentFormat[a] !== Constants.formatSeparator) {\n                break;\n            }\n            a += offset;\n        }\n        if (this.currentFormat[a] === Constants.formatSeparator) {\n            // no known symbol is found\n            return;\n        }\n        var b = a;\n        while (b >= 0 && b < this.currentFormat.length) {\n            if (this.currentFormat[b] !== this.currentFormat[a]) {\n                break;\n            }\n            b += offset;\n        }\n        if (a > b && (b + 1 !== selectionStart || a + 1 !== selectionEnd)) {\n            this.setSelection({ start: b + 1, end: a + 1 });\n            this.resetSegmentValue = true;\n        }\n        else if (a < b && (a !== selectionStart || b !== selectionEnd)) {\n            this.setSelection({ start: a, end: b });\n            this.resetSegmentValue = true;\n        }\n        this.interactionMode = DateInputInteractionMode.None;\n    };\n    DateInput.prototype.modifyDateSegmentValue = function (offset, symbol, event) {\n        if (symbol === void 0) { symbol = \"\"; }\n        if (event === void 0) { event = {}; }\n        if (!this.dateObject || this.options.readonly) {\n            return;\n        }\n        var oldValue = this.value;\n        var step = DEFAULT_SEGMENT_STEP * offset;\n        var caret = this.caret();\n        symbol = symbol || this.currentFormat[caret[0]];\n        if (symbol === \"S\" && !this.options.steps.millisecond) {\n            var msDigits = millisecondDigitsInFormat(this.inputFormat);\n            step = millisecondStepFor(msDigits);\n        }\n        this.dateObject.modifyPart(symbol, step);\n        this.tryTriggerValueChange({\n            oldValue: oldValue,\n            event: event\n        });\n        this.forceUpdate();\n        this.setSelection(this.selectionBySymbol(symbol));\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.tryTriggerValueChange = function (args) {\n        if (args === void 0) { args = { oldValue: null, event: {} }; }\n        if (!isEqual(this.value, args.oldValue)) {\n            return this.triggerValueChange(args);\n        }\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.triggerValueChange = function (args) {\n        if (args === void 0) { args = { oldValue: null, event: {} }; }\n        return this.trigger(VALUE_CHANGE, extend(args, {\n            value: this.value\n        }));\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.triggerInput = function (args) {\n        if (args === void 0) { args = { event: {} }; }\n        return this.trigger(INPUT, extend(args, {\n            value: this.value\n        }));\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.triggerInputEnd = function (args) {\n        if (args === void 0) { args = { event: {}, error: null }; }\n        return this.trigger(INPUT_END, extend(args, {\n            value: this.value\n        }));\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.triggerFocus = function (args) {\n        if (args === void 0) { args = { event: {} }; }\n        return this.trigger(FOCUS, extend({}, args));\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.triggerFocusEnd = function (args) {\n        if (args === void 0) { args = { event: {} }; }\n        return this.trigger(FOCUS_END, extend({}, args));\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.triggerBlur = function (args) {\n        if (args === void 0) { args = { event: {} }; }\n        return this.trigger(BLUR, extend({}, args));\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.triggerBlurEnd = function (args) {\n        if (args === void 0) { args = { event: {} }; }\n        return this.trigger(BLUR_END, extend({}, args));\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.triggerChange = function (args) {\n        if (args === void 0) { args = { event: {} }; }\n        return this.trigger(CHANGE, extend(args, {\n            value: this.value\n        }));\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.triggerKeyDown = function (args) {\n        if (args === void 0) { args = { event: {} }; }\n        return this.trigger(KEY_DOWN, extend({}, args));\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.triggerMouseWheel = function (args) {\n        if (args === void 0) { args = { event: {} }; }\n        return this.trigger(MOUSE_WHEEL, extend({}, args));\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.forceUpdate = function () {\n        this.setTextAndFormat();\n        this.refreshElementValue();\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.forceUpdateWithSelection = function () {\n        var _a = this.selection, start = _a.start, end = _a.end;\n        var elementValueLength = this.elementValue.length;\n        this.forceUpdate();\n        var selectionOffset = this.elementValue.length - elementValueLength;\n        this.setSelection({\n            start: start + selectionOffset,\n            end: end + selectionOffset\n        });\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.setTextAndFormat = function () {\n        var _a = this.dateObject.getTextAndFormat(), currentText = _a.text, currentFormat = _a.format;\n        this.currentFormat = currentFormat;\n        this.currentText = currentText;\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.setElementValue = function (value) {\n        this.element.value = value;\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.getStepFromSymbol = function (symbol) {\n        /* eslint-disable no-fallthrough */\n        switch (symbol) {\n            case \"S\":\n                return Number(this.options.steps.millisecond);\n            case \"s\":\n                return Number(this.options.steps.second);\n            case \"m\":\n                return Number(this.options.steps.minute);\n            // represents hour as value from 01 through 12\n            case \"h\":\n            // represents hour as value from 01 through 23\n            case \"H\":\n                return Number(this.options.steps.hour);\n            case \"M\":\n                return Number(this.options.steps.month);\n            // there is no 'D' format specifier for day\n            case \"d\":\n            // used for formats such as \"EEEE, MMMM d, yyyy\",\n            // where \"EEEE\" stands for full name of the day e.g. Monday\n            case \"E\":\n                return Number(this.options.steps.day);\n            // there is no 'Y' format specifier for year\n            case \"y\":\n                return Number(this.options.steps.year);\n            default:\n                return DEFAULT_SEGMENT_STEP;\n        }\n        /* eslint-enable no-fallthrough */\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.restorePreviousInputEventState = function () {\n        this.restorePreviousElementValue();\n        this.restorePreviousElementSelection();\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.restorePreviousElementValue = function () {\n        this.setElementValue(this.previousElementValue || '');\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.restorePreviousElementSelection = function () {\n        var _a = this.previousElementSelection, start = _a.start, end = _a.end;\n        this.setSelection({ start: start || 0, end: end || 0 });\n    };\n    DateInput.prototype.writeValue = function (value) {\n        this.verifyValue(value);\n        this.dateObject = this.getDateObject(value);\n        this.refreshElementValue();\n    };\n    DateInput.prototype.verifyValue = function (value) {\n        if (value && !isValidDate(value)) {\n            throw new Error(\"The 'value' should be a valid JavaScript Date instance.\");\n        }\n    };\n    DateInput.prototype.refreshElementValue = function () {\n        var start = this.caret()[0];\n        var element = this.element;\n        var format = this.isActive ? this.inputFormat : this.displayFormat;\n        var _a = this.dateObject.getTextAndFormat(format), currentText = _a.text, currentFormat = _a.format;\n        this.currentFormat = currentFormat;\n        this.currentText = currentText;\n        var hasPlaceholder = this.options.hasPlaceholder || isPresent(this.options.placeholder);\n        var showPlaceholder = !this.isActive &&\n            hasPlaceholder &&\n            !this.dateObject.hasValue();\n        if (hasPlaceholder && isPresent(this.options.placeholder)) {\n            element.placeholder = this.options.placeholder;\n        }\n        var newElementValue = showPlaceholder ? \"\" : currentText;\n        this.previousElementValue = this.elementValue;\n        this.setElementValue(newElementValue);\n        if (this.isActive && !this.options.allowCaretMode && this.options.selectNearestSegmentOnFocus) {\n            this.selectNearestSegment(start);\n        }\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.caret = function (start, end) {\n        if (end === void 0) { end = start; }\n        var isPosition = start !== undefined;\n        var returnValue = [start, start];\n        var element = this.element;\n        if (isPosition && (this.options.disabled || this.options.readonly)) {\n            return undefined;\n        }\n        try {\n            if (element.selectionStart !== undefined) {\n                if (isPosition) {\n                    if (isDocumentAvailable() && document.activeElement !== element) {\n                        element.focus();\n                    }\n                    element.setSelectionRange(start, end);\n                }\n                returnValue = [element.selectionStart, element.selectionEnd];\n            }\n        }\n        catch (e) {\n            returnValue = [];\n        }\n        return returnValue;\n    };\n    DateInput.prototype.selectNearestSegment = function (index) {\n        // Finds the nearest (in both directions) known part.\n        for (var i = index, j = index - 1; i < this.currentFormat.length || j >= 0; i++, j--) {\n            if (i < this.currentFormat.length && this.currentFormat[i] !== \"_\") {\n                this.selectDateSegment(this.currentFormat[i]);\n                return;\n            }\n            if (j >= 0 && this.currentFormat[j] !== \"_\") {\n                this.selectDateSegment(this.currentFormat[j]);\n                return;\n            }\n        }\n    };\n    DateInput.prototype.selectDateSegment = function (symbol) {\n        var begin = -1;\n        var end = 0;\n        for (var i = 0; i < this.currentFormat.length; i++) {\n            if (this.currentFormat[i] === symbol) {\n                end = i + 1;\n                if (begin === -1) {\n                    begin = i;\n                }\n            }\n        }\n        if (begin < 0) {\n            begin = 0;\n        }\n        this.caret(0, 0);\n        this.caret(begin, end);\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.getDateObject = function (value) {\n        var leadingZero = ((this.dateObject || {}) || null).leadingZero;\n        this.options.value = value;\n        var dateObject = this.createDateObject();\n        dateObject.setLeadingZero(this.isActive ? leadingZero : null);\n        return dateObject;\n    };\n    /* tslint:disable:align */\n    /**\n     * @hidden\n     */\n    DateInput.prototype.createDateObject = function () {\n        var defaultOptions = this.getDateObjectOptions();\n        var dateObject = new DateObject(extend({}, defaultOptions));\n        return dateObject;\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.getDateObjectOptions = function () {\n        var newOptions = {\n            intlService: this.options.intlService,\n            formatPlaceholder: this.options.formatPlaceholder ? this.options.formatPlaceholder : 'formatPattern',\n            format: this.inputFormat,\n            cycleTime: this.options.cycleTime,\n            twoDigitYearMax: this.options.twoDigitYearMax,\n            autoCorrectParts: this.options.autoCorrectParts,\n            value: this.options.value\n        };\n        return newOptions;\n    };\n    /* tslint:enable:align */\n    /**\n     * @hidden\n     */\n    DateInput.prototype.keyEventMatchesAutoSwitchKeys = function (keyObject) {\n        var autoSwitchKeys = (this.options.autoSwitchKeys || [])\n            .map(function (x) { return x.toString().toLowerCase().trim(); });\n        if (autoSwitchKeys.indexOf(keyObject.keyCode.toString()) >= 0 ||\n            autoSwitchKeys.indexOf(keyObject.keyCode) >= 0 ||\n            autoSwitchKeys.indexOf(keyObject.key.toLowerCase().trim()) >= 0) {\n            return true;\n        }\n        return false;\n    };\n    /**\n     * @hidden\n     */\n    DateInput.prototype.autoFill = function () {\n        var dateObject = this.dateObject, currentDate = new Date(), day, month, year, hours, minutes, seconds;\n        if (dateObject.date || dateObject.month || dateObject.year || dateObject.hours || dateObject.minutes || dateObject.seconds) {\n            year = dateObject.year ? dateObject.value.getFullYear() : currentDate.getFullYear(),\n                month = dateObject.month ? dateObject.value.getMonth() : currentDate.getMonth(),\n                day = dateObject.date ? dateObject.value.getDate() : currentDate.getDate(),\n                hours = dateObject.hours ? dateObject.value.getHours() : currentDate.getHours(),\n                minutes = dateObject.minutes ? dateObject.value.getMinutes() : currentDate.getMinutes(),\n                seconds = dateObject.seconds ? dateObject.value.getSeconds() : currentDate.getSeconds();\n            dateObject.setValue(new Date(year, month, day, hours, minutes, seconds));\n            this.refreshElementValue();\n            this.triggerChange();\n        }\n    };\n    return DateInput;\n}(Observable));\n\nvar __meta__ = {\n    id: \"dateinputcommon\",\n    name: \"DateInputCommon\",\n    category: \"web\",\n    description: \"This is the common package for date editing accross all kendo flavours\",\n    depends: [\"core\"]\n};\n\n(function($, undefined$1) {\n    kendo.ui.DateInputCommon = DateInput;\n})(window.kendo.jQuery);\nvar kendo$1 = kendo;\n\nexport { kendo$1 as default };\n"]}