{"version":3,"file":"kendo.editor.js","names":["kendo","UndoRedoStack","Observable","extend","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","$","undefined$1","window","Class","Widget","ui","os","support","mobileOS","browser","keys","outerWidth","_outerWidth","outerHeight","_outerHeight","SELECT","SELECT_OVERLAY_SELECTOR","PLACEHOLDER_CLASS","PLACEHOLDER_TAG_ID","NATIVE_TOOLS","EditorUtils","editorWrapperTemplate","formatByName","name","format","i","inArray","tags","getToolCssClass","icon","cssClass","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","insertUpperRomanList","insertLowerRomanList","import","indent","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","mergeCellsHorizontally","mergeCellsVertically","splitCellHorizontally","splitCellVertically","tableProperties","tableCellProperties","tableWizardInsert","tableAlignLeft","tableAlignCenter","tableAlignRight","cleanFormatting","copyFormat","applyFormat","pdf","nameToKebab","replace","toLowerCase","registerTool","toolName","tool","Editor","defaultTools","registerFormat","formatName","formats","cacheComments","content","comments","index","retrieveComments","supportedContentEditable","document","documentElement","toolGroups","basic","scripts","alignment","links","lists","dent","tablesWizard","tablesInsert","tablesAddDelete","tablesMerge","tablesPosition","formatPainter","element","toolbarContainer","type","domElement","that","editorNS","editor","dom","Dom","_registerHandler","closest","update","bind","_setupType","_initToolbar","_setupHeight","_resizable","_initializeContentElement","_setupKeyboard","clipboard","Clipboard","undoRedoStack","_populateValue","mousedown","_endTyping","mouseup","e","_mouseup","_initializeImmutables","_ariaLabel","wrapper","find","toolbar","resize","notify","_showWatermarkOverlay","messages","auto","bold","italic","underline","strikethrough","fitToCell","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","style","emptyFolder","editAreaTitle","uploadFile","overflowAnchor","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","fileText","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableWizard","tableTab","cellTab","accessibilityTab","caption","summary","width","height","units","cellSpacing","cellPadding","cellMargin","captionAlignment","position","background","tableBackground","id","border","borderStyle","borderWidth","borderColor","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","applyToColumn","applyToRow","exportAs","print","headerRows","headerColumns","tableSummaryPlaceholder","associateNone","associateScope","associateIds","borderNone","placeholder","nonce","unsafeInline","encoded","domain","resizable","deserialization","custom","serialization","entities","semantic","optimizeTags","keepEOL","pasteCleanup","all","css","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","stylesheets","dialogOptions","modal","draggable","animation","imageBrowser","fileBrowser","navigateOnTab","text","value","tools","destroy","_deregisterHandlers","clearTimeout","_spellCorrectTimeout","_focusOutside","windowInstance","tablePopup","_destroyUploadWidget","_destroyResizings","setOptions","_setOptionsTools","_initializePlaceholder","createRange","RangeUtils","encodedValue","encode","exec","params","range","Error","body","getAttribute","keyboard","isTypingInProgress","_focusBody","selectRange","_range","getRange","Object","map","key","immutables","test","execCommand","async","change","_selectionChange","managesUndoRedo","focus","restoreSelection","selection","getSelection","rangeCount","getRangeAt","doc","startContainer","endContainer","startOffset","endOffset","setStart","collapse","SelectionUtils","selectionFromDocument","paste","html","InsertHtmlCommand","refresh","textarea","val","remove","selectionRestorePoint","toRange","saveSelection","container","commonAncestorContainer","contains","RestorePoint","selectedHtml","Serializer","domToXhtml","cloneContents","removeAllRanges","addRange","state","textNodes","finder","collapsed","getFormat","isFormatted","_togglePlaceholder","trim","_oldValue","currentHtml","htmlToDom","_refreshTools","_bindTools","unbind","filter","el","each","initialize","_blur","old","_containsRange","isAncestorOrSelf","_createContentElement","iframe","wnd","lang","specifiedDomain","domainScript","src","hide","title","frameBorder","addClass","attr","tabIndex","insertBefore","location","hostname","contentWindow","contentDocument","one","_decorateFormatting","getElementsByTagName","open","write","isRtl","ios","edge","chrome","href","join","close","_deleteSavedRange","component","dataSource","items","tag","className","formattingElement","getKendoDropDownList","data","list","getEffectiveBackground","inlineStyle","handlers","_handlers","h","off","handler","_uploadWidget","endTyping","scrollTop","activeElement","_activeElement","scrollHeight","clientHeight","msie","left","top","opacity","appendTo","_handleToolbarClick","target","_immutablesContext","Immutables","immutablesContext","editableTextNodes","blurTrigger","mousedownTrigger","createElement","setAttribute","appendChild","interval","setInterval","last","clearInterval","setTimeout","_mousedown","touch","keydown","_spellCorrect","parentElement","nodeName","_cachedHeight","restoreHeight","keyCode","BACKSPACE","DELETE","F10","first","preventPopupHide","preventDefault","LEFT","RIGHT","offset","next","nextChar","nodeType","nodeValue","toolFromShortcut","toolOptions","keyPressCommand","_runPostContentKeyCommands","keypress","_showElementResizeHandles","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","_refreshInterval","click","selectNode","focusin","hasAttribute","_showWindow","focusout","active","popup","toolbarContainerElement","get","_toolbarFocused","hasClass","removeClass","_hideWindow","_initializeColumnResizing","_initializeRowResizing","_initializeElementResizing","$head","head","append","defaults","toolbarOptions","_processToolbarItems","_setNativeTools","parentMessages","toggle","evaluateTemplates","ToolBar","on","is","_initToolbarWindow","toolbarEl","wrap","parent","prepend","kendoWindow","dragHandle","effects","minHeight","visible","autoFocus","actions","dragend","_moved","_selectionStarted","parents","stopPropagation","gecko","which","tagName","defaultValue","deserializedRoot","getAllComments","innerHTML","_resetGroups","current","result","optionsTools","j","t","guidGroupName","flatDefaultTools","processedObject","currentGroups","Array","isArray","guid","_processToolOptions","gr","includes","values","group","g","to","_processDefaultTool","isPlainObject","view","shortcuts","uiOptions","originalOptions","palette","template","showText","showIcon","tooltip","attributes","ColorTool","componentOptions","views","preview","input","buttons","_shortcutSequence","nodes","filterBy","htmlIndentSpace","_updateImmutablesState","eventNames","NS","hasOwnProperty","applyEventMap","split","toolsFromShortcut","o","changesContent","empty","heightStyle","expectedHeight","parseInt","actualHeight","indexOf","isNaN","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","_wrapTextarea","res","ctrl","shift","alt","beforeCorrection","falseTrigger","contextmenu","mozilla","_finishUpdate","show","$body","toggleClass","overflowPopup","uiElement","trackImmutables","toolsToBeUpdated","w","editorWrap","editArea","draggableElement","insertAfter","kendoResizable","start","currentTarget","initialSize","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","getKendoResizable","ignore","_destroyElementResizing","ElementResizingFactory","dispose","_destroyRowResizing","RowResizing","_destroyColumnResizing","ColumnResizing","create","_showElementResizeHandlesProxy","elementResizing","parentNode","showResizeHandles","columnResizing","rowResizing","_getWindowWidth","editorElement","_overlapsWindow","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","boxOffset","boxOffsetLeft","boxOffsetTop","editorOffset","plugin","Tool","commandArguments","noop","UndoTool","enable","removeAttr","emptyElementContent","emptyTableCellContent","PDFMixin","prototype","_drawPDF","drawing","drawDOM","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","proxyTarget","forceProxy","resolve","fail","err","reject","jQuery","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","makeMap","len","obj","nonListBlockElements","blockElements","concat","block","selfClosing","inlineElements","inline","fillAttrs","nonEmptyNonTextContentElements","normalize","node","version","firstChild","prev","nextSibling","persistedScrollTop","whitespace","emptyspace","rgb","bom","whitespaceOrBom","cssAttributes","htmlRe","entityRe","entityTable","findNodeIndex","skipText","previousSibling","isDataNode","isAncestorOf","findClosestAncestor","rootElem","iterator","createNodeIterator","NodeFilter","SHOW_COMMENT","FILTER_ACCEPT","curNode","nextNode","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","deleteData","attrEquals","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","significantChildNodes","isWhitespace","lastTextNode","lastChild","isMarker","allowsTextContent","every","allWhitespaceContent","isEmptyspace","sibling","direction","isBlock","isPrevBlock","isNextBlock","isSelfClosing","isEmpty","isInline","isImg","isBr","scrollContainer","compatMode","scrollingElement","scrollTo","toStart","elementTop","elementHeight","marker","windowHeight","innerHeight","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","undefined","insertAt","newElement","referenceElement","removeChildren","removeTextSiblings","closestBy","condition","rootCondition","ofType","changeTag","skipAttributes","attribute","specified","cssText","editableParent","contentEditable","unwrap","isChildOfBaseContainer","createEmptyNode","removeAttribute","mergeAttributes","origin","traverseCss","unstyle","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","count","arguments","paths","minPathLength","output","reverse","closestSplittableParent","apply","editableParents","editableAncestor","closestEditable","types","editable","closestEditableOfType","invert","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","reMapTableColumns","table","colAttr","_mapColIndices","clearTableMappings","registeredColumns","rowIndex","cells","colIndex","cellIndex","cell","rowSpan","_mapColspan","colSpan","ci","ri","associateWithIds","theadRows","numberOfTheadRows","tableRows","numberOfTableRows","theadMatrix","tbodyMatrix","tHead","_getNumberOfHeaderRows","_generateIdsForColumns","_generateIdsForRows","_assignIds","col","colspan","rowspan","k","l","timestamp","Date","getTime","row","headers","pushHeaderId","forEach","_onlyUnique","_getNumberOfColumns","currentIndex","numberOfCols","Number","_getNumberOfHeaderColumns","numberOfHeaderRows","number","self","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","bomSpan","div","supportsLeadingWhitespace","isFunction","toEditableHtml","_toEditableImmutables","immutable","prependTo","_fillEmptyElements","p","children","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","_preventScriptExecution","attributesToRemove","deserialize","semanticFilter","mapStart","tagMap","end","skipEncoding","canOptimize","semanticAttributes","specifiedAttributes","textDecoration","font","fontFamily","size","inlineStyles","ignoredStylePrefixes","prop","startsWith","strong","em","b","u","item","styleObj","splice","face","styleAttr","properties","property","lastIndex","cssProperties","$node","htmlEncode","skip","childNode","mapper","previous","jqNode","serialize","shouldOptimize","isEmptyBomNode","runCustom","script","childrenCount","textOnly","selectionFromWindow","W3CSelection","selectionFromRange","rangeDocument","documentFromRange","W3CRange","updateRangeProperties","fixIvalidRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","RangeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","startAncestor","endAncestor","compareBoundaries","ex","isInvalidRange","fromNode","_current","_next","_end","hasNext","traverse","callback","inStartContainer","inEndContainer","nodeIndex","getSubRange","subRange","textRange","createTextRange","adoptContainer","select","duplicate","right","textRangeContainer","adoptEndPoint","compareEndPoints","movedStart","movedEnd","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","moveToElementText","setEndPoint","comparison","appended","RangeEnumerator","enumerate","visit","ImmutablesRangeIterator","ImmutablesRangeEnumerator","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","Marker","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","isExpandable","rangeBoundary","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","isBomSelected","charAt","collapsedToStart","startParent","endParent","startIndex","endIndex","boundary","immutableParent","image","stringify","partition","partitionRange","contents","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","startEditable","endEditable","isEnd","beforeCaret","afterCaret","search","substring","complexBlocks","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","randomId","chars","round","random","updateToolOptions","_initOptions","_toHtml","replaceWith","isDeleting","_cancelDeleting","_cancelTyping","typingInProgress","isTypingKey","backspace","del","cancelDeleting","nextImmutable","closestSelectionLi","closestImmutableLi","_removeImmutable","forwards","commonContainer","_nextNode","startRestorePoint","expandImmutablesIn","startImmutableParent","endImmutableParent","serialized","Command","restorePoint","formatter","lockRange","releaseRange","point","createDialog","_actionButtonsTemplate","insertButtonIcon","cancelButtonIcon","renderButton","themeColor","GenericCommand","endRestorePoint","ViewHtmlCommand","cmd","dialog","_footerTemplate","_footerMessages","center","FormatCommand","FormatTool","getKendoToolBar","getKendoToggleButton","MOUSEDOWN_NS","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","activate","formatNode","formatNodes","consolidate","outerMostInline","pop","GreedyInlineFormatFinder","greedyProperty","fontAttr","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parentsUntil","addBack","toArray","GreedyInlineFormatter","toCamelCase","action","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","widget","setDataSource","sender","newRange","ENTER","_widget","getKendoColorPicker","storedRange","_inputFocused","_popup","unselectable","_value","toCssRgba","fontWeight","togglable","fontStyle","overflow","toolIcon","commandOn","closeOnSelect","dataValueField","dataTextField","valuePrimitive","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","a","ref","UnlinkCommand","LinkCommand","url","_initialText","img","minWidth","_close","_form","_createForm","_apply","_keydown","linkUrl","_dialog","formElement","form","kendoForm","renderButtons","field","label","editorOptions","after","ESC","textInput","anchor","AutoLinkCommand","detectedLink","detectLink","linkMarker","linkRange","_ensureWebProtocol","startNode","traverser","LeftDomTextTraverser","cancelAtNode","DomTextLinkDetection","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","isLink","DomPos","_detectEnd","blank","clone","_detectStart","_isLinkDetected","puntuationOptions","extendOptions","RightDomTextTraverser","_skipStartPuntuation","lastIndexOfRegExp","ii","r","str","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","SPACEBAR","BlockFormatFinder","candidate","suitable","f","_resolveListsItems","until","ImmutablesNS","BlockFormatter","ancestor","_handleImmutables","images","imageAttributes","nonImages","applyFormatting","immutableFormat","namedFormat","GreedyBlockFormatter","formatTag","ListFormatter","blockFormatter","BlockFormatTool","listElements","textAlign","float","display","marginLeft","marginRight","listStylePosition","ListFormatFinder","altAttr","matchesType","isList","unwrapTag","li","isImmutable","containsAny","_parentLists","merge","breakable","findSuitableNode","applyOnSection","section","pushAncestor","listStyleType","lastSection","lastNodes","sections","addLastSection","ul","fragment","ListCommand","ListTool","FormattingTool","toFormattingItem","dot","context","decorate","optionLabel","dataItem","toJSON","dataBound","getFormattingValue","n","selectBox","_ancestor","operator","CleanFormatCommand","tagsToClean","clean","listFormatter","unwrapListItem","highlightFirst","autoWidth","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onload","onerror","applied","isIE","showBrowser","ImageBrowser","transport","read","_imageBrowser","ev","selected","dialogHeight","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","upload","kendoUpload","success","_onUploadSuccess","_onUploadProgress","_onUploadSelect","error","_onUploadError","complete","_onUploadComplete","showFileList","multiple","saveUrl","autoUpload","saveField","validation","allowedExtensions","maxFileSize","getKendoUpload","_trigger","clearAllFiles","_removeLoadingOverlay","response","files","validationErrors","_initLoadingOverlay","eventType","uploadEvent","_iframeWrapper","_container","postProcess","genericCommand","InsertHtmlTool","initialValue","autoSize","ExportAsCommand","exportType","postToProxy","generateForm","submit","exportAsOptions","method","valueInput","exportTypeInput","fileNameInput","antiForgeryInput","csrf_param","ExportAsTool","changeHandler","_exec","itemTemplate","valueTemplate","iconClass","indentDirection","IndentFormatter","parentList","targets","mapImmutables","siblingList","nestedList","getListTypeAttr","targetIndex","styleType","targetNode","listParent","siblings","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","suitableNodes","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","tableNode","rng","emptyParagraphContent","parentChildrenLength","_insertParagraphAfter","NewLineCommand","filler","kbrParent","oldIE","KEDITORFILEURL","KEDITORFILETEXT","KEDITORFILETITLE","FileCommand","file","FileBrowser","_fileBrowser","ACTIVESTATE","SELECTEDSTATE","SCOPE","ROW","COL","ROWGROUP","COLGROUP","COLSPAN","ROWSPAN","TABLE","THEAD","TBODY","TR","TD","TH","getTouches","columnTemplate","tableFormatFinder","TableCommand","skipCleaners","_tableHtml","columnHtml","rowHeight","insertedTable","PopupTool","btn","popupTemplate","kendoPopup","copyAnchorStyles","_open","_activate","_toggle","_editor","TableWizardTool","TableWizardCommand","insertNewTable","kendoButton","_setTableSize","InsertTableTool","cols","cellWidth","cellHeight","firstCell","eq","lastCell","getOffset","tableFromLocation","floor","clientY","clientX","scrollLeft","offsetWidth","autoApplyNS","_valid","status","initiallyVisible","button","selectedRows","selectedColumns","changed","tableSize","stopImmediatePropagation","TableModificationCommand","_clearColIndexAttr","_findRowSpanCell","_resetElementResizing","_findNextTdInRow","td","lastTd","_adjustColgroups","colgroup","colElements","colgroupElements","numberOfCells","_associateHeaderIds","InsertRowCommand","cellCount","newRow","createdCell","_appendCell","newCell","InsertColumnCommand","columnIndex","_processForColSpan","_resizeCells","selectedCell","colSpanEffect","parsedWidth","unit","calculatedWidth","parseFloat","DeleteRowCommand","focusElement","rowParent","_focusElement","_handleRowSpanCells","adjacentCell","nextRow","firstRow","before","_reduceRowSpan","rowSpanValue","DeleteColumnCommand","columnCount","_handleColSpanCells","_reduceColSpan","colSpanValue","MergeCellsHorizontallyCommand","nextTd","_getColspan","MergeCellsVerticallyCommand","tr","targetRow","bottomTd","_getRowspan","SplitCellCommand","emptyTd","_splitCellHorizontally","_splitCellVertically","_getRowspanValue","_getColspanValue","tdToAdd","colSpanResult","rowSpanResult","TableModificationTool","commandsMap","insert","delete","column","TableFormatCommand","_showResizeHandles","TableFormatTool","isTable","align","nonSplittableTagsOnPaste","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","originalEvent","_insertImages","when","results","onpaste","clipboardNode","_decoreateClipboardNode","webkit","_moveToCaretPosition","clipboardRange","containers","ondragover","ondrop","dataTransfer","margin","padding","fontVariant","lineSpacing","lineHeight","nodeOffset","caretOffset","_caretOffset","translate","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","preventSplit","unwrapPasted","applicable","splitter","splittable","fragmentsHtml","elm","rangeEnd","focusedTable","siblingNodes","lastSiblingIndex","lastSibling","Cleaner","replacements","customReplacements","junkReplacements","convertFontMatch","$0","$1","closing","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","_checkForBullet","_getHtmlNoBullet","extractListLevels","level","_createList","rootMargin","rootIndex","lastRootLi","isLastRootLi","rootList","blockChildren","lastMargin","levels","acceptedNameTags","listIndex","levelType","removeAttributes","significantStyles","addSignificantStyles","isSignificantCss","removeAttributeNode","createColGroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeTextNodes","trs","currentNode","tables","longestRow","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","TextContainer","HtmlTextLines","separators","line","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","thead","tbody","cleaner","cellText","PREVIOUS_SIBLING","getSibling","tableCells","tableCellsWrappers","tableElements","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","getNext","evt","Event","isDefaultPrevented","deleteSelection","startTyping","_removeBomSpan","textContent","_addCaret","_restoreCaret","_handleDelete","caretPlaceholder","_merge","_cleanBomBefore","_handleBackspace","startAtLi","liIndex","startAtNonFirstLi","rangeStartNode","previousNode","_handleSelection","parentElementOrNode","_surroundFullyContent","_surroundFullySelectedAnchor","toLocaleLowerCase","_join","startImmutable","endImmutable","_moveMarker","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","systemCommandIsInProgress","createUndoCommand","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","toUpperCase","metaKey","found","matchKey","toolKey","onEndTyping","stopTyping","force","timeout","what","ExportPdfCommand","PrintCommand","CopyFormatCommand","blockStyles","collectStyles","rangeNodes","populateStyles","destination","styleValue","styleKey","attributeKey","styles","nodeStyles","ApplyFormatCommand","removeEmptyElementsFromRange","cleanInlineParents","applyBlockStyles","applyInlineStyles","emptyElements","blockParent","outerWrapper","previousNodes","nextNodes","prevWrapper","nextWrapper","listItems","currentStyle","createdNode","topNode","CopyFormatTool","ApplyFormatTool","global","math","REGEX_NUMBER_IN_PERCENTAGES","REGEX_NUMBER_IN_PIXELS","STRING","inPercentages","ResizingUtils","constrain","lowerBound","upperBound","getScrollBarWidth","scrollbar","calculatePercentageRatio","total","inPixels","toPercentages","toPixels","KEY_DOWN","MOUSE_LEAVE","MOUSE_UP","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","onResizeStart","onResize","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","COLATTR","COMMA","WIDTH","handleWidth","borderOffset","mousePosition","tableInnerElement","tBodies","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnOffsetLeft","innerElementOffsetTop","tableHead","tableBody","fullHeight","columnWidth","columnLeftOffset","adjacentColumnWidth","resizeHandleOffsetLeft","handleOffset","newWidth","initialAdjacentColumnWidth","initialColumnWidth","nextColumn","rtlModifier","initialDeltaX","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","innerElementWidth","currentColumnsWidths","topAndBottomColumns","innerTableElement","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","HEIGHT","handleHeight","rowOffsetLeft","rowOffsetTop","topInnerTableElement","$row","tableTopOffset","resizeHandleOffsetTop","currentRowHeight","initialTableHeight","tableHeadHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","ElementResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","HandlePositioningStrategy","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","HandleDraggingStrategy","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","applyScrollOffset","rootLeft","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","RESIZE_HANDLE_WRAPPER_CLASS","ELEMENT_RESIZING_CLASS","MOUSE_DOWN","ELEMENT_TYPES","isUndefined","ElementResizing","handles","_destroyResizeHandles","appendHandlesTo","_resizeWidth","_resizeHeight","_getMaxDimensionValue","dimension","dimensionLowercase","parentDimension","parentScrollOffset","_initResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_initialElementHeight","_initialElementWidth","_onResizeHandleDrag","_onResizeHandleDragEnd","TableResizing","_hasRowsInPixels","ratioValue","ratioTotalValue","constrainedWidth","styleWidth","currentWidth","parentWidth","maxWidth","_setColumnsWidth","constrainedHeight","styleHeight","currentHeight","parentHeight","maxHeight","hasRowsInPixels","parentColumn","columnsLength","isWidthInPercentages","ImageResizing","_onResizeHandleDragVertical","_onResizeHandleDragHorizontal","_onResizeHandleDragLocked","_getDeltas","initialWidth","initialHeight","MAX_SAFE_INTEGER","factory","hasImg","eventTarget","eventCurrentTarget","isResizeHandleOrChild","tableResizing","cellsFormatFinder","reUnit","COL_INDEX","isTableCellWizard","tableCellWizard","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","_ensureFocusableAfterTable","lastSelectedRow","cellProp","tableProp","_lastInCollection","_deleteTableRows","_addRows","_updateColumns","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","_updateHeadersWithThead","_updateHeadersNoThead","_updateHeaderAssociates","_isHeadingRow","_isHeadingCell","cellsWithHeadersAssociated","headingIds","checkHeader","header","headersArray","headersAttr","some","_insertCells","insertCell","createTHead","_createTableRows","createTBody","cellsWithHeaders","_addScopes","initialIndex","insertRow","cellsLength","newRowsCount","firstRowLastCell","numberOfColumns","lastCurrentCell","rowColumns","deleteCell","_getStylesData","captionContent","deleteCaption","createCaption","_getAlignmentData","verticalAlign","_swapToHeaderCells","deleteTHead","_removeScopes","_removeAssociates","headerCols","whiteSpace","widthUnit","heightUnit","backgroundColor","bgColor","borderCollapse","_getTablePositionData","tStyle","captionClone","tableAlignment","_getAlignment","tablePosition","_getTablePosition","numberOfHeaderColumns","tableJson","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","hAlign","vAlign","collection","TableWizardEditTool","TableCellWizardEditTool","numericTextBoxSettings","borderStyles","textWrapDropDownSettings","tablePositionDropDownSettings","tableAlignmentDropDownSettings","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","tablePropertiesDialogTemplate","cellPropertiesDialogTemplate","_openTablePropertiesDialog","tableData","closeHandler","_dialogTemplate","collectTableDialogValues","components","_initTabStripComponent","_tablePropertiesForm","_createTablePropertiesForm","_accessibilityPropertiesForm","_createAccessibilityPropertiesForm","_openCellPropertiesDialog","collectCellDialogValues","_cellPropertiesForm","_createCellPropertiesForm","isCellProperties","tabStrip","kendoTabStrip","_collectTableViewValues","_collectAccessibilityViewValues","_collectCellViewValues","tableView","check","cellView","wrapTextValue","accessibilityView","_addUnit","_initNumericTextbox","storage","settings","kendoNumericTextBox","_initDropDownList","kendoDropDownList","_setComponentValue","_initBorderStyleDropDown","_initTablePositionDropDown","_initPositionDropDown","_initTableAlignmentDropDown","_initAlignmentDropDown","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","_initTextWrapDropDown","_initAssociationDropDown","_initColorPicker","kendoColorPicker","clearButton","_initInput","kendoTextBox","_initCheckbox","kendoCheckBox","_initTextArea","kendoTextArea","_destroyComponents","dialogTemplate","_onColumnsNumberChange","headerColumnsNumeric","currentNumberOfColumnsHeaders","_onRowsNumberChange","headerRowsNumeric","currentNumberOfRowHeaders","numberOfRows","layout","grid","layoutWrapper","hint","optional","gutter","__meta__","category","description","depends","features","kendo$1"],"sources":["kendo.editor.js"],"mappings":"MAAO,4BACA,gCACA,6BACA,0BACA,+BACA,gCACA,kCACA,4BACA,wBACA,2BACA,yBACA,wBACA,+BACA,+BACA,+BACA,uBAEP,SAAUA,GACN,IAAIC,EAAgBD,EAAME,WAAWC,OAAO,CACxCC,KAAM,SAASC,GACXL,EAAME,WAAWI,GAAGF,KAAKG,KAAKC,KAAMH,GACpCG,KAAKC,OACT,EACAC,OAAQ,CAAE,OAAQ,QAClBC,KAAM,SAAUC,GACZJ,KAAKK,MAAQL,KAAKK,MAAMC,MAAM,EAAGN,KAAKO,oBAAsB,GAC5DP,KAAKO,oBAAsBP,KAAKK,MAAMF,KAAKC,GAAW,CAC1D,EACAI,KAAM,WACF,GAAIR,KAAKS,UAAW,CAChB,IAAIL,EAAUJ,KAAKK,MAAML,KAAKO,uBAC9BH,EAAQI,OACRR,KAAKU,QAAQ,OAAQ,CAAEN,QAASA,GACpC,CACJ,EACAO,KAAM,WACF,GAAIX,KAAKY,UAAW,CAChB,IAAIR,EAAUJ,KAAKK,QAAQL,KAAKO,qBAChCH,EAAQO,OACRX,KAAKU,QAAQ,OAAQ,CAAEN,QAASA,GACpC,CACJ,EACAH,MAAO,WACHD,KAAKK,MAAQ,GACbL,KAAKO,qBAAuB,CAChC,EACAE,QAAS,WACL,OAAOT,KAAKO,qBAAuB,CACvC,EACAK,QAAS,WACL,OAAOZ,KAAKO,qBAAuBP,KAAKK,MAAMQ,OAAS,CAC3D,IAGJrB,EAAMsB,WAAWtB,EAAO,CACpBuB,KAAM,CACFtB,cAAeA,IAG1B,CA1CD,CA0CGD,OAEH,SAAUwB,EAAEC,GAGR,IAAIzB,EAAQ0B,OAAO1B,MACf2B,EAAQ3B,EAAM2B,MACdC,EAAS5B,EAAM6B,GAAGD,OAClBE,EAAK9B,EAAM+B,QAAQC,SACnBC,EAAUjC,EAAM+B,QAAQE,QACxB9B,EAASqB,EAAErB,OACXmB,EAAatB,EAAMsB,WACnBY,EAAOlC,EAAMkC,KACbC,EAAanC,EAAMoC,YACnBC,EAAcrC,EAAMsC,aAGpBC,EAAS,SACTC,EAA0B,0BAC1BC,EAAoB,gBACpBC,EAAqB,cAIrBC,EAAe,CACf,kBACA,kBACA,OACA,OACA,YAGAC,EAAc,CACdC,sBAAuB,IACnB,sIAKJC,aAAc,SAASC,EAAMC,GACzB,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAO3B,OAAQ4B,IAC/B,GAAIzB,EAAE0B,QAAQH,EAAMC,EAAOC,GAAGE,OAAS,EACnC,OAAOH,EAAOC,EAG1B,EAEAG,gBAAiB,SAASL,EAAMM,GAC5B,IA4CIC,EA5CoB,CACpBC,YAAa,YACbC,UAAW,YACXC,YAAa,aACbC,cAAe,eACfC,aAAc,cACdC,YAAa,gBACbC,oBAAqB,iBACrBC,kBAAmB,eACnBC,qBAAsB,mBACtBC,qBAAsB,mBACtBC,OAAU,SACVC,OAAQ,SACRC,QAAS,UACTC,WAAY,OACZC,OAAQ,SACRC,YAAa,QACbC,WAAY,WACZC,SAAU,OACVC,UAAW,mBACXC,UAAW,UACXC,YAAa,YACbC,cAAe,2BACfC,eAAgB,4BAChBC,YAAa,yBACbC,YAAa,yBACbC,UAAW,mBACXC,aAAc,sBACdC,uBAAwB,2BACxBC,qBAAsB,yBACtBC,sBAAuB,0BACvBC,oBAAqB,wBACrBC,gBAAiB,mBACjBC,oBAAqB,wBACrBC,kBAAmB,eACnBC,eAAgB,uBAChBC,iBAAkB,wBAClBC,gBAAiB,qBACjBC,gBAAiB,YACjBC,WAAY,cACZC,YAAa,eACbC,IAAK,YAGwBhD,GAEjC,OAAIO,IAIAD,GAIGT,EAAYoD,YAAYjD,GACnC,EAEAiD,YAAa,SAASjD,GAClB,OAAOA,EAAKkD,QAAQ,kBAAmB,SAClCA,QAAQ,UAAW,KACnBC,aACT,EAEAC,aAAc,SAASC,EAAUC,GACxBA,EAAKtD,OACNsD,EAAKhG,QAAQ0C,KAAOqD,EACpBC,EAAKtD,KAAOqD,EAASF,eAGpBG,EAAKhG,QAAQwB,KACdwE,EAAKhG,QAAQwB,GAAK,CAAC,GAGvBwE,EAAKhG,QAAQwB,GAAGjB,QAAUwF,EAE1BE,EAAOC,aAAaH,GAAYC,CACpC,EAEAG,eAAgB,SAASC,EAAYzD,GACjCsD,EAAOhG,GAAGD,QAAQqG,QAAQD,GAAczD,CAC5C,EAEA2D,cAAe,SAASC,EAASC,GAC7B,IAAK,IAAIC,KAASD,EACdD,EAAUA,EAAQX,QAAQY,EAASC,GAAQ,IAAMA,EAAQ,KAE7D,OAAOF,CACX,EAEAG,iBAAkB,SAASH,EAASC,GAChC,IAAK,IAAIC,KAASD,EACdD,EAAUA,EAAQX,QAAQ,IAAMa,EAAQ,IAAKD,EAASC,IAE1D,OAAOF,CACX,GA2IAI,OAA+E,IAA7CC,SAASC,gBAA+B,gBAE1EC,EAAa,CACbC,MAAO,CAAC,OAAQ,SAAU,YAAa,iBACvCpG,KAAM,CAAC,OAAQ,QACfqG,QAAS,CAAC,YAAa,eACvBC,UAAW,CAAC,cAAe,gBAAiB,eAAgB,eAC5DC,MAAO,CAAC,cAAe,aAAc,aAAc,UACnDC,MAAO,CAAC,sBAAuB,oBAAqB,uBAAwB,wBAC5EC,KAAM,CAAC,SAAU,WACjBC,aAAc,CAAC,kBAAmB,uBAClCC,aAAc,CAAC,eACfC,gBAAiB,CAAE,gBAAiB,iBAAkB,cAAe,cAAe,YAAa,gBACjGC,YAAa,CAAE,yBAA0B,uBAAwB,wBAAyB,uBAC1FC,eAAgB,CAAE,iBAAkB,mBAAoB,mBACxDC,cAAe,CAAE,aAAc,gBAG/BzB,EAAS1E,EAAOzB,OAAO,CACvBC,KAAM,SAAS4H,EAAS3H,GACpB,IAGI4H,EACAC,EAAMC,EAJNC,EAAO5H,KACP6H,EAAWrI,EAAM6B,GAAGyG,OACpBC,EAAMF,EAASG,IAKdxB,IAILpF,EAAOtB,GAAGF,KAAKG,KAAK6H,EAAMJ,EAAS3H,GAEnC+H,EAAK/H,QAAUiB,EAAW,CAAC,EAAG8G,EAAK/H,QAASA,GAG5C8H,GADAH,EAAUI,EAAKJ,SACM,GACrBE,EAAOK,EAAIxF,KAAKoF,GAEhB3H,KAAKiI,iBACDT,EAAQU,QAAQ,QAAS,SAAUN,EAAKO,OAAOC,KAAKR,EAAM3G,IAG9DwG,EAAmBG,EAAKS,WAAWb,GAEnCI,EAAKU,aAAab,GAClBG,EAAKW,aAAab,GAClBE,EAAKY,aACLZ,EAAKa,0BAA0Bb,GAC/BA,EAAKc,iBAELd,EAAKe,UAAY,IAAId,EAASe,UAAU5I,MACxC4H,EAAKiB,cAAgB,IAAIrJ,EAAMuB,KAAKtB,cAEpCmI,EAAKkB,eAAejJ,EAAS8H,GAE7BC,EAAKK,iBAAiBxB,SAAU,CAC5BsC,UAAa,WAAanB,EAAKoB,YAAc,EAC7CC,QAAW,SAASC,GAAKtB,EAAKuB,SAASD,EAAI,IAG/CtB,EAAKwB,wBAEO,YAAR1B,GACAE,EAAKyB,WAAWzB,EAAK0B,QAAQC,KAAK,WAGtC3B,EAAK4B,QAAQC,SAEbjK,EAAMkK,OAAO9B,GAETA,EAAK+B,uBACL/B,EAAK+B,sBAAuB/B,EAAK0B,SAAW1B,EAAK0B,QAAQ,IAAO1B,EAAKJ,QAAQ,IAErF,EAEAtH,OAAQ,CACJ,SACA,SACA,UACA,QACA,QACA,UACA,SAGJL,QAAS,CACL0C,KAAM,SACNqH,SAhOO,CACXC,KAAM,OACNC,KAAM,OACNC,OAAQ,SACRC,UAAW,YACXC,cAAe,gBACflH,YAAa,cACbC,UAAW,YACXkH,UAAW,cACXhH,cAAe,cACfD,YAAa,kBACbE,aAAc,mBACdC,YAAa,UACbC,oBAAqB,wBACrBC,kBAAmB,sBACnBI,OAAQ,SACRC,QAAS,UACTC,WAAY,mBACZC,OAAQ,mBACRC,YAAa,eACbC,WAAY,cACZoG,WAAY,cACZnG,SAAU,YACVoG,SAAU,qBACVC,gBAAiB,mBACjBC,SAAU,mBACVC,gBAAiB,mBACjBC,YAAa,SACbC,WAAY,SACZxG,UAAW,QACXC,UAAW,mBACXwG,MAAO,SACPC,YAAa,eACbC,cAAe,wCACfC,WAAY,SACZC,eAAgB,aAChBC,QAAS,cACTC,YAAa,OACbC,YAAa,OACbC,gBAAiB,sEACjBC,WAAY,yCACZC,cAAe,+FACfC,kBAAmB,4CACnBC,gBAAiB,cACjBC,aAAc,iBACdC,WAAY,aACZC,YAAa,cACbC,eAAgB,cAChBC,UAAW,QACXC,SAAU,OACVC,eAAgB,cAChBC,SAAU,OACVC,YAAa,UACbC,oBAAqB,0BACrBC,aAAc,SACdC,aAAc,SACdC,SAAU,UACVC,aAAc,SACdhH,gBAAiB,mBACjBjB,YAAa,iBACbkI,gBAAiB,2BACjBjI,cAAe,yBACfC,eAAgB,0BAChBC,YAAa,gBACbC,YAAa,gBACbC,UAAW,aACXC,aAAc,gBACdC,uBAAwB,2BACxBC,qBAAsB,yBACtBC,sBAAuB,2BACvBC,oBAAqB,yBACrBI,eAAgB,mBAChBC,iBAAkB,qBAClBC,gBAAiB,oBACjBmH,YAAa,eACbxH,gBAAiB,mBACjBC,oBAAqB,kBACrBwH,SAAU,UACVC,QAAS,OACTC,iBAAkB,WAClBC,QAAS,UACTC,QAAS,UACTC,MAAO,QACPC,OAAQ,SACRC,MAAO,QACPC,YAAa,eACbC,YAAa,eACbC,WAAY,cACZnG,UAAW,YACXoG,iBAAkB,oBAClBC,SAAU,WACVC,WAAY,aACZC,gBAAiB,mBACjBvK,SAAU,YACVwK,GAAI,KACJC,OAAQ,SACRC,YAAa,eACbC,YAAa,eACbC,YAAa,eACbC,gBAAiB,mBACjBC,SAAU,YACVC,0BAA2B,oBAC3BC,UAAW,aACXC,YAAa,eACbC,WAAY,cACZC,aAAc,iBACdC,eAAgB,mBAChBC,cAAe,kBACfC,gBAAiB,oBACjBC,kBAAmB,sBACnBC,iBAAkB,qBAClBC,gBAAiB,oBACjBC,kBAAmB,sBACnBC,iBAAkB,qBAClBC,YAAa,mBACbC,QAAS,UACTC,KAAM,OACNC,eAAgB,qBAChBC,cAAe,kBACfC,WAAY,eACZC,SAAU,YACVvL,OAAU,SACVwL,MAAO,QACPC,WAAY,cACZC,cAAe,cACfC,wBAAyB,6CACzBC,cAAe,OACfC,eAAgB,oCAChBC,aAAc,sBACdlK,WAAY,cACZC,YAAa,eACbkK,WAAY,OACZhP,KAAM,OACNG,KAAM,QA4FF8O,YAAa,GACbC,MAAO,GACPC,cAAc,EACdzJ,QAAS,CAAC,EACV0J,SAAS,EACTC,OAAQ,KACRC,WAAW,EACXC,gBAAiB,CACbC,OAAQ,MAEZC,cAAe,CACXC,UAAU,EACVC,UAAU,EACVtJ,SAAS,EACTuJ,cAAc,EACdC,SAAS,GAEbC,aAAc,CACVC,KAAK,EACLC,KAAK,EACLR,OAAQ,KACRS,cAAc,EACdC,iBAAiB,EACjBC,gBAAgB,EAChBC,QAAQ,EACRC,MAAM,EACNC,MAAM,GAEVC,YAAa,GACbC,cAAe,CACXC,OAAO,EAAMnB,WAAW,EAAOoB,WAAW,EAC1CC,WAAW,GAEfC,aAAc,KACdC,YAAa,KACbC,eAAe,EACflH,SAAU,CACN,CAAEmH,KAAM,QAASC,MAAO,gCACxB,CAAED,KAAM,cAAeC,MAAO,qCAC9B,CAAED,KAAM,UAAWC,MAAO,kBAC1B,CAAED,KAAM,SAAUC,MAAO,gCACzB,CAAED,KAAM,iBAAkBC,MAAO,uCACjC,CAAED,KAAM,SAAUC,MAAO,8BACzB,CAAED,KAAM,kBAAmBC,MAAO,mCAClC,CAAED,KAAM,eAAgBC,MAAO,yCAC/B,CAAED,KAAM,UAAWC,MAAO,gCAE9BlH,SAAU,CACN,CAAEiH,KAAM,UAAWC,MAAO,YAC1B,CAAED,KAAM,WAAYC,MAAO,WAC3B,CAAED,KAAM,WAAYC,MAAO,SAC3B,CAAED,KAAM,WAAYC,MAAO,UAC3B,CAAED,KAAM,WAAYC,MAAO,SAC3B,CAAED,KAAM,WAAYC,MAAO,WAC3B,CAAED,KAAM,WAAYC,MAAO,aAE/BhH,YAAa,CACT,CAAE+G,KAAM,YAAaC,MAAO,KAC5B,CAAED,KAAM,YAAaC,MAAO,cAC5B,CAAED,KAAM,YAAaC,MAAO,MAC5B,CAAED,KAAM,YAAaC,MAAO,MAC5B,CAAED,KAAM,YAAaC,MAAO,MAC5B,CAAED,KAAM,YAAaC,MAAO,MAC5B,CAAED,KAAM,YAAaC,MAAO,MAC5B,CAAED,KAAM,YAAaC,MAAO,OAEhCC,MAAO,CACH,aACA,OACA,SACA,YACA,OACA,OACA,cACA,gBACA,eACA,aACA,cACA,sBACA,oBACA,SACA,UACA,aACA,SACA,cACA,kBACA,sBACA,cACA,cACA,cACA,gBACA,iBACA,YACA,eACA,yBACA,uBACA,wBACA,sBACA,iBACA,mBACA,oBAIRC,QAAS,WAGLtQ,EAAOtB,GAAG4R,QAAQ3R,KAAKC,MAEvBA,KAAKgJ,YAAW,GAEhBhJ,KAAK2R,sBAELC,aAAa5R,KAAK6R,sBAElB7R,KAAK8R,gBAEL9R,KAAKwJ,QAAQkI,UAET1R,KAAK+R,gBACL/R,KAAK+R,eAAeL,UAEpB1R,KAAKgS,YACLhS,KAAKgS,WAAWN,UAlBP1R,KAqBNiS,uBArBMjS,KAuBNkS,oBAEP1S,EAAMkS,QAAQ1R,KAAKsJ,QACvB,EAEA6I,WAAY,SAAStS,GAGjBuB,EAAOtB,GAAGqS,WAAWpS,KAFRC,KAEqBH,GAE9BA,EAAQ4R,OACRzR,KAAKoS,iBAAiBvS,EAAQ4R,OAGlCzR,KAAKqS,wBACT,EAEAC,YAAa,SAAS7L,GAClB,OAAOjH,EAAM6B,GAAGyG,OAAOyK,WAAWD,YAAY7L,GAAYzG,KAAKyG,SACnE,EAEA+L,aAAc,WACV,OAAOhT,EAAM6B,GAAGyG,OAAOE,IAAIyK,OAAOzS,KAAKwR,QAC3C,EAEAkB,KAAM,SAASnQ,EAAMoQ,GACjB,IAGIC,EAAO/M,EAHP+B,EAAO5H,KACPI,EAAU,KACV2F,EAAevG,EAAM6B,GAAGyE,OAAOC,aAGnC,IAAKxD,EACD,MAAM,IAAIsQ,MAAM,wDAGpB,GAAkD,SAA9CjL,EAAKkL,KAAKC,aAAa,oBACd,UAATxQ,GACS,QAATA,GACS,aAATA,EACA,OAAO,EAkBX,GAfKqF,EAAKoL,SAASC,uBACfrL,EAAKsL,aACLtL,EAAKuL,YAAYvL,EAAKwL,QAAUxL,EAAKyL,cAGzCxN,EAAO+B,EAAK6J,MAAMlP,IAASwD,EAAaxD,KAGpC+Q,OAAO5R,KAAKqE,GAAcwN,KAAIC,IACtBA,EAAI9N,gBAAkBnD,IACtBsD,EAAOE,EAAayN,GACxB,IAIJ3N,EAAM,CASN,GARA+M,EAAQhL,EAAKyL,WAETxN,EAAKzF,UACLA,EAAUyF,EAAKzF,QAAQT,EAAO,CAAEiT,MAAOA,EAAOE,KAAMlL,EAAKkL,KAAMW,aAAc7L,EAAK6L,YAAcd,KAGxF/K,EAAKlH,QAAQ,UAAW,CAAE6B,KAAMA,EAAMnC,QAASA,IAGvD,OAGJ,GAAI,iBAAiBsT,KAAKnR,GACtBqF,EAAKiB,cAActG,UAChB,GAAInC,IACPwH,EAAK+L,YAAYvT,GAEbA,EAAQwT,OAER,YADAxT,EAAQyT,OAASjM,EAAKkM,iBAAiB1L,KAAKR,IAKpDA,EAAKkM,kBACT,CACJ,EAEAH,YAAa,SAASvT,GACbA,EAAQ2T,iBACT/T,KAAK6I,cAAc1I,KAAKC,GAG5BA,EAAQ0H,OAAS9H,KACjBI,EAAQsS,MACZ,EAEAsB,MAAO,WACHhU,KAAKiU,kBACT,EAEAZ,SAAU,WACN,IAAIa,EAAYlU,KAAKmU,eACjBvB,EAAQsB,GAAaA,EAAUE,WAAa,EAAIF,EAAUG,WAAW,GAAKrU,KAAKsS,cAC/EgC,EAAMtU,KAAKyG,SAOf,OALImM,EAAM2B,gBAAkBD,GAAO1B,EAAM4B,cAAgBF,GAAQ1B,EAAM6B,aAAgB7B,EAAM8B,YACzF9B,EAAM+B,SAAS3U,KAAK8S,KAAM,GAC1BF,EAAMgC,UAAS,IAGZhC,CACX,EAEAuB,aAAc,WACV,OAAO3U,EAAM6B,GAAGyG,OAAO+M,eAAeC,sBAAsB9U,KAAKyG,SACrE,EAEAsO,MAAO,SAASC,EAAMnV,GAClBG,KAAKgU,QAEL,IAAI5T,EAAU,IAAIZ,EAAM6B,GAAGyG,OAAOmN,kBAAkBjU,EAAErB,OAAO,CACzDiT,MAAO5S,KAAKqT,WACZ2B,KAAMA,GACPnV,IAEHO,EAAQ0H,OAAS9H,KAEjBI,EAAQsS,MACZ,EAEAwC,QAAS,WACL,IAAItN,EAAO5H,KAEX,GAAI4H,EAAKuN,SAAU,CACfvN,EAAKsK,oBAGL,IAAIV,EAAQ5J,EAAK4J,QACjB5J,EAAKuN,SAASC,IAAI5D,GAClB5J,EAAK0B,QAAQC,KAAK,UAAU8L,SAC5BzN,EAAKa,0BAA0Bb,GAC/BA,EAAK4J,MAAMA,EACf,CACJ,EAEAyC,iBAAkB,WACdjU,KAAKkT,aAEDlT,KAAKsV,uBACLtV,KAAKmT,YAAYnT,KAAKsV,sBAAsBC,UAEpD,EAEAC,cAAe,SAAS5C,GAEpB,IAAI6C,GADJ7C,EAAQA,GAAS5S,KAAKqT,YACAqC,wBAClB5C,EAAO9S,KAAK8S,MAEZ2C,GAAa3C,GAAQ9R,EAAE2U,SAAS7C,EAAM2C,MACtCzV,KAAKsV,sBAAwB,IAAI9V,EAAM6B,GAAGyG,OAAO8N,aAAahD,EAAOE,GAE7E,EAEA+C,aAAc,WACV,OAAOrW,EAAM6B,GAAGyG,OAAOgO,WAAWC,WAAW/V,KAAKqT,WAAW2C,gBACjE,EAEA7C,YAAa,SAASP,GAClB5S,KAAKkT,aACL,IAAIgB,EAAYlU,KAAKmU,eACrBD,EAAU+B,kBACV/B,EAAUgC,SAAStD,GACnB5S,KAAKwV,cAAc5C,EACvB,EAEAuD,MAAO,SAASvQ,GACZ,IAGIgN,EAAOwD,EAHPvQ,EAAOrG,EAAM6B,GAAGyE,OAAOC,aAAaH,GACpCyQ,EAASxQ,IAASA,EAAKhG,QAAQwW,QAAUxQ,EAAKwQ,QAC9C9D,EAAa/S,EAAM6B,GAAGyG,OAAOyK,WAGjC,QAAI8D,IACAzD,EAAQ5S,KAAKqT,aAEb+C,EAAY7D,EAAW6D,UAAUxD,IAElB/R,QAAU+R,EAAM0D,YAC3BF,EAAY,CAACxD,EAAM2B,iBAGhB8B,EAAOE,UAAYF,EAAOE,UAAUH,GAAaC,EAAOG,YAAYJ,GAInF,EAEAjO,OAAQ,SAASqJ,GACbA,EAAQA,GAASxR,KAAKH,QAAQ+P,QAAU5P,KAAKwS,eAAiBxS,KAAKwR,QAE/DxR,KAAKmV,UACLnV,KAAKmV,SAASC,IAAI5D,GAClBxR,KAAKyW,oBAAoBjF,EAAMkF,SAE/B1W,KAAK2W,UAAYnF,CAEzB,EAEAA,MAAO,SAASwD,GACZ,IAAIlC,EAAO9S,KAAK8S,KACZjL,EAAWrI,EAAM6B,GAAGyG,OACpBjI,EAAUG,KAAKH,QACf+W,EAAc/O,EAASiO,WAAWC,WAAWjD,EAAMjT,EAAQoQ,eAE/D,GAAI+E,IAAS/T,EACT,OAAO2V,EAGP5B,GAAQ4B,IAIZ/O,EAASiO,WAAWe,UAAU7B,EAAMlC,EAAMjT,EAAQkQ,iBAElD/P,KAAKsV,sBAAwB,KAC7BtV,KAAKmI,SACLnI,KAAK8W,gBACT,EAEAC,WAAY,WACR,IAAInP,EAAO5H,KACP+F,EAAe/F,KAAKyR,MAExB7J,EAAKoP,OAAO,SAAUpP,EAAK4B,QAAQC,OAAOrB,KAAKR,EAAK4B,UAEpD5B,EAAK4B,QAAQhC,QAAQ+B,KAAK,kBACrB0N,QAAO,CAACxU,EAAGyU,IAA+C,IAAxClW,EAAEkW,GAAI3N,KAAK,kBAAkB1I,SAC/CsW,MAAK,CAAC1U,EAAGyU,KACN,IAAItR,EAAWsR,EAAGnE,aAAa,gBAC3BlN,EAAOE,EAAaH,GAEpBC,GAAQA,EAAKuR,YACbvR,EAAKuR,WAAWpW,EAAEkW,GAAKtP,EAC3B,IAGRA,EAAKQ,KAAK,SAAUR,EAAK4B,QAAQC,OAAOrB,KAAKR,EAAK4B,SACtD,EAEA6N,MAAO,WACH,IAAIlC,EAAWnV,KAAKmV,SAChBmC,EAAMnC,EAAWA,EAASC,MAAQpV,KAAK2W,UACvCnF,EAAQxR,KAAKH,QAAQ+P,QAAU5P,KAAKwS,eAAiBxS,KAAKwR,QAE9DxR,KAAKmI,SAEDgN,GACAA,EAASzU,QAAQ,QAGjB8Q,GAAS8F,IACTtX,KAAKU,QAAQ,UACTyU,GACAA,EAASzU,QAAQ,UAG7B,EAEA6W,eAAgB,SAAS3E,GACrB,IAAI7K,EAAMvI,EAAM6B,GAAGyG,OAAOE,IACtB8K,EAAO9S,KAAK8S,KAChB,OAAOF,GAAS7K,EAAIyP,iBAAiB1E,EAAMF,EAAM2B,iBAC7CxM,EAAIyP,iBAAiB1E,EAAMF,EAAM4B,aACzC,EAEAiD,sBAAuB,SAAS1G,GAC5B,IACI2G,EAAQC,EAAKrD,EAMbsD,EAPA9P,EAAS9H,KAETmV,EAAWrN,EAAOqN,SAClB0C,EAAkB/P,EAAOjI,QAAQgQ,OACjCA,EAASgI,GAAmBpR,SAASoJ,OACrCiI,EAAe,GACfC,EAAM,gBA0FV,OAvFA5C,EAAS6C,OAETN,EAAS1W,EAAE,aAAc,CAAEiX,MAAOnQ,EAAOjI,QAAQ+J,SAASgB,cAAesN,YAAa,MAAO,GAE7FlX,EAAE0W,GACGlH,IAAI,UAAW,IACf2H,SAAS,sBACTC,KAAK,WAAYjD,EAAS,GAAGkD,UAC7BC,aAAanD,IAId0C,GAAmBhI,GAAU0I,SAASC,YAGtCT,EAAM,+BADND,EAAe,WAAWhQ,EAAOjI,QAAQ6P,MAAQ,UAAU5H,EAAOjI,QAAQ6P,SAAW,uBAAwBG,gBACxD,KACrD6H,EAAOK,IAAMA,GAGZL,EAAOK,MACRL,EAAOK,IAAM,IAGjBJ,EAAMD,EAAOe,eAAiBf,EAC9BpD,EAAMqD,EAAIlR,UAAYiR,EAAOgB,gBAE7B1X,EAAE0W,GAAQiB,IAAI,QAAQ,WAClB7Q,EAAO8Q,oBAAoBtE,EAAIxB,KACnC,IAEA8E,EAAOnR,SAASoS,qBAAqB,QAAQ,GAAG9F,aAAa,SApxB9C,KAsxBfuB,EAAIwE,OACJxE,EAAIyE,MACA,8BAAgCnB,EAAhC,yEAGA,UAAU9P,EAAOjI,QAAQ6P,MAAQ,UAAU5H,EAAOjI,QAAQ6P,SAAW,ySAKhElQ,EAAM+B,QAAQyX,MAAM7D,GAAY,iBAAmB,KACnD7T,EAAG2X,IAAM,uBAAyB,KAClCxX,EAAQyX,MAAQzX,EAAQ0X,OAAS,eAAiB,IAVvD,+kEA6CArB,EACA9W,EAAEuS,IAAIxC,GAAa,SAASqI,GACxB,MAAO,gCAAgCA,MAAStR,EAAOjI,QAAQ6P,MAAQ,UAAU5H,EAAOjI,QAAQ6P,SAAW,KAC/G,IAAG2J,KAAK,IACR,wEAEJ/E,EAAIgF,QAEG3B,CACX,EAEA4B,kBAAmB,WACX,WAAYvZ,aACLA,KAAKoT,MAEpB,EAEAwF,oBAAqB,SAAS9F,GAC1B,IAEI0G,EAAWC,EAAYC,EAAOjX,EAAGkX,EAAKC,EAAWlP,EAFjDmP,EAAoB7Z,KAAKwJ,QAAQhC,QAAQ+B,KAAK,kCAC9CxB,EAAMvI,EAAM6B,GAAGyG,OAAOE,IAG1B,GAAI6R,EAAkBhZ,OAAQ,CAE1B,KADA2Y,EAAYK,EAAkBC,wBAE1B,OASJ,GANAJ,GADAD,EAAaD,EAAUC,YACJM,OAEfjH,GACA0G,EAAUQ,KAAKxJ,IAAI,mBAAoBzI,EAAIkS,uBAAuBjZ,EAAE8R,MAGtC,IAA9B9S,KAAKH,QAAQ8P,aAEb,IAAKlN,EAAI,EAAGA,EAAIiX,EAAM7Y,OAAQ4B,IAC1BkX,EAAMD,EAAMjX,GAAGkX,KAAO,OACtBC,EAAYF,EAAMjX,GAAGmX,UAGrBlP,GADAA,EAAQ3C,EAAImS,YAAYpH,EAAM6G,EAAK,CAAEC,UAAWA,KAClCnU,QAAQ,KAAM,KAE5BiU,EAAMjX,GAAGiI,MAAQA,EAAQ,wBAIjC+O,EAAW/Y,QAAQ,SACvB,CACJ,EAEAiR,oBAAqB,WAGjB,IAFA,IAAIwI,EAAWna,KAAKoa,UAEX3X,EAAI,EAAGA,EAAI0X,EAAStZ,OAAQ4B,IAAK,CACtC,IAAI4X,EAAIF,EAAS1X,GACjB4X,EAAE7S,QAAQ8S,IAAID,EAAE3S,KAAM2S,EAAEE,QAC5B,CAEAva,KAAKoa,UAAY,EACrB,EAEAnI,qBAAsB,WAClB,IAAInK,EAAS9H,KACT8H,EAAO0S,gBACP1S,EAAO0S,cAAc9I,UACrB5J,EAAO0S,cAAgB,KAE/B,EAEAxR,WAAY,WACR,IAAIgK,EAAWhT,KAAKgT,SAEpB,IACQA,EAASC,uBACTD,EAASyH,WAAU,GACnBza,KAAKwV,gBAEb,CAAE,MAAOtM,GAAK,CAClB,EAEAgK,WAAY,WACR,IAIIwH,EAJA5H,EAAO9S,KAAK8S,KACZ4E,EAAS1X,KAAKsJ,SAAWtJ,KAAKsJ,QAAQC,KAAK,UAAU,GACrD7C,EAAkB1G,KAAKyG,SAASC,gBAChCiU,EAAgBnb,EAAMob,kBAIrBlD,GAAU5E,EAAK+H,aAAe/H,EAAKgI,cACpCJ,EAAY5H,EAAK4H,UACjB5H,EAAKkB,QACLlB,EAAK4H,UAAYA,GAEVC,GAAiB7H,GAAQ6H,GAAiBjD,IACjDgD,EAAYhU,EAAgBgU,UAC5B5H,EAAKkB,QACLtN,EAAgBgU,UAAYA,EAEpC,EAEA5I,cAAe,WAEPtS,EAAM+B,QAAQE,QAAQsZ,MAAQ/a,KAAKmV,UACnBnU,EAAE,aACbwP,IAAI,CACDrD,SAAU,QACV6N,KAAM,MACNC,IAAK,MACLrO,MAAO,MACPC,OAAQ,MACR,YAAa,IACbU,OAAQ,IACR2N,QAAS,MAEhBC,SAAS1U,SAASqM,MAAMpS,QAAQ,SACvBA,QAAQ,QAAQ2U,QAElC,EAEA+F,oBAAqB,SAASlS,GAC1B,IAAItD,EAAWsD,EAAEmS,OAAOtB,KAAK,WAEzBnU,GAAyB,gBAAbA,GACZ5F,KAAK0S,KAAK9M,EAElB,EAEA0V,mBAAoB,SAAS1I,GACzB,IAAI/K,EAAWrI,EAAM6B,GAAGyG,OAExB,GAAI9H,KAAKH,QAAQ4T,WACb,OAAIb,EAAM0D,UACCzO,EAAS0T,WAAWC,kBAAkB5I,GAEkB,IAAxD/K,EAAS0K,WAAWkJ,kBAAkB7I,GAAO/R,MAGhE,EAEA4H,0BAA2B,WACvB,IACI6L,EACAoH,EACAC,EAHA7T,EAAS9H,KAKb,GAAI8H,EAAOqN,SAAU,CAMjB,GALArN,EAAO5G,OAAS4G,EAAO2P,sBAAsB3P,EAAOjI,QAAQkR,eAC5DuD,EAAMxM,EAAOrB,SAAWqB,EAAO5G,OAAOwX,iBAAmB5Q,EAAO5G,OAAOuF,UAI9DqM,KAAM,CACX,IAAIA,EAAOwB,EAAIsH,cAAc,QAC7B9I,EAAK+I,aAAa,kBAAmB,QACrC/I,EAAK+I,aAAa,cAAe,OACjCvH,EAAIuE,qBAAqB,QAAQ,GAAGiD,YAAYhJ,GAEhD,IAAIiJ,EAAWC,aAAY,WACnBhb,EAAE8G,EAAOrB,UAAU8C,KAAK,QAAQ1I,OAAS,IACzCG,EAAE8G,EAAOrB,UAAU8C,KAAK,QAAQ0S,OAAO5G,SACvCnU,OAAOgb,cAAcH,GAE7B,GAAE,GACN,CAEAjU,EAAOgL,KAAOwB,EAAIxB,KAElB4I,EAAc5T,EAAO5G,OACrBya,EAAmBrH,EAEnBtU,KAAKiI,iBAAiBqM,EAAK,UAAWtU,KAAKmJ,SAASf,KAAKpI,MAC7D,MACI8H,EAAO5G,OAASA,OAChBoT,EAAMxM,EAAOrB,SAAWA,SACxBqB,EAAOgL,KAAOhL,EAAON,QAAQ,GAE7BkU,EAAc5T,EAAOgL,KACrB6I,EAAmB7T,EAAOgL,KAE1BqJ,YAAW,KACPrU,EAAO8Q,oBAAoB9Q,EAAOgL,KAAK,IAI/C9S,KAAKiI,iBAAiByT,EAAa,OAAQ1b,KAAKqX,MAAMjP,KAAKpI,OAC3D8H,EAAOG,iBAAiB0T,EAAkB,OAAQ7T,EAAOsU,WAAWhU,KAAKN,IAEzE,IACIwM,EAAIX,YAAY,2BAA4B,MAAM,EACtD,CAAE,MAAOzK,GAAK,CAEV1J,EAAM+B,QAAQ8a,OACdrc,KAAKiI,iBAAiBqM,EAAK,CACvBgI,QAAW,WAEH9c,EAAMob,kBAAoBtG,EAAIxB,MAC9BhL,EAAO5G,OAAO8S,OAEtB,IAIRhU,KAAKqS,yBAELrS,KAAKuc,cAAczU,GAEnB9H,KAAKiI,iBAAiBH,EAAOrB,SAAU,CACnC,sBAAuB,SAASyC,GAC5B,IAAI2D,EAAS7L,EAAE8G,EAAOgL,MAAMjG,SACX7L,EAAE8G,EAAOgL,KAAK0J,eAAe3P,SAE7BA,GAA8C,SAApC3D,EAAEmS,OAAOoB,SAAS/W,gBACzCoC,EAAO4U,cAAgB,GAAK5U,EAAOgL,KAAKpI,MAAMmC,OAC9C/E,EAAOgL,KAAKpI,MAAMmC,OAAS,OAEnC,EACA,sCAAuC,SAAS3D,GAC5C,IAAIyT,EAAgB,WACZ7U,EAAO4U,gBAAkBzb,GAAeiI,EAAEmS,SAAWvT,EAAOgL,OAC5DhL,EAAOgL,KAAKpI,MAAMmC,OAAS/E,EAAO4U,qBAC3B5U,EAAO4U,cAEtB,EAEe,gBAAXxT,EAAExB,KACFyU,YAAW,WACPQ,GACJ,GAAG,IAEHA,GAGR,IAGJ3c,KAAKiI,iBAAiBH,EAAOgL,KAAM,CAC/BwJ,QAAW,SAASpT,GAChB,IAAI0J,EAEJ,IAAK1J,EAAE0T,UAAYlb,EAAKmb,WAAa3T,EAAE0T,UAAYlb,EAAKob,SAA2D,SAAhDhV,EAAOgL,KAAKC,aAAa,mBACxF,OAAO,EAGX,GAAI7J,EAAE0T,UAAYlb,EAAKqb,IAInB,OAHAjV,EAAO0B,QAAQhC,QAAQ+B,KAAK,gBAAgByT,QAAQtc,QAAQ,SAC5DoH,EAAO0B,QAAQyT,kBAAmB,OAClC/T,EAAEgU,iBAEC,GAAIhU,EAAE0T,SAAWlb,EAAKyb,MAAQjU,EAAE0T,SAAWlb,EAAK0b,MAAO,CAE1DxK,EAAQ9K,EAAOuL,WACf,IAAI2H,EAAO9R,EAAE0T,SAAWlb,EAAKyb,KACzB1H,EAAY7C,EAAMoI,EAAO,iBAAmB,gBAC5CqC,EAASzK,EAAMoI,EAAO,cAAgB,aAGtCsC,EAAOD,GAFKrC,GAAQ,EAAI,GAGxBuC,EAAWvC,EAAOsC,EAAOD,EAEH,GAAtB5H,EAAU+H,UAAkD,UAAjC/H,EAAUgI,UAAUF,KAC/C3K,EAAM+B,SAASc,EAAW6H,GAC1B1K,EAAMgC,UAAS,GACf9M,EAAOqL,YAAYP,GAE3B,CAEA,IAAInB,EAAQ3J,EAAO2J,MACf7L,EAAWkC,EAAOkL,SAAS0K,iBAAiBjM,EAAOvI,GACnDyU,EAAc/X,EAAW6L,EAAM7L,GAAU/F,QAAU,CAAC,EAExD,GAAI+F,IAAa+X,EAAYC,gBAWzB,OAVA1U,EAAEgU,iBAEG,gBAAgBxJ,KAAK9N,IACtBkC,EAAOkL,SAASyH,WAAU,GAG9B3S,EAAOpH,QAAQ,UAAWwI,GAC1BpB,EAAO4K,KAAK9M,GACZkC,EAAO+V,2BAA2B3U,IAE3B,EAGXpB,EAAOkL,SAASpB,eAEhB9J,EAAOkL,SAASsJ,QAAQpT,EAC5B,EACA4U,SAAY,SAAS5U,GACjBiT,YAAW,WACPrU,EAAO+V,2BAA2B3U,GAClCpB,EAAOiW,2BACX,GAAG,EACP,EACAC,MAAS,SAAS9U,GACd,IAAI+U,EAAiB,CAClBvc,EAAKmb,UACLnb,EAAKwc,IACLxc,EAAKyc,OACLzc,EAAK0c,SACL1c,EAAK2c,IACL3c,EAAK4c,KACL5c,EAAKyb,KACLzb,EAAK6c,GACL7c,EAAK0b,MACL1b,EAAK8c,KACL9c,EAAK+c,OACL/c,EAAKob,SAGJ9b,EAAE0B,QAAQwG,EAAE0T,QAASqB,IAAmB,GAAmB,IAAb/U,EAAE0T,SAAiB1T,EAAEwV,UAAYxV,EAAEyV,SAAWzV,EAAE0V,YAC9F1d,OAAO0Q,aAAa5R,KAAK6e,kBACzB7e,KAAK6e,iBAAmB3d,OAAOib,YAAW,WACtCrU,EAAOgM,kBACX,GAjoCG,MAooCPhM,EAAOkL,SAASgL,MAAM9U,EAC1B,EACA4V,MAAS,SAAS5V,GACd,IAA+B0J,EAEJ,QAFjBpT,EAAM6B,GAAGyG,OAAOE,IAElBzF,KAAK2G,EAAEmS,WACXzI,EAAQ9K,EAAOwK,eACTyM,WAAW7V,EAAEmS,QACnBvT,EAAOqL,YAAYP,GAE3B,EACA,+BAAgC,SAAS1J,GACrCpB,EAAOa,UAAU,KAAOO,EAAExB,MAAMwB,EACpC,EACA8V,QAAW,WACHlX,EAAOgL,KAAKmM,aAAa,qBACzBje,EAAEhB,MAAMmY,SAAS,YAEjBrQ,EAAOoX,cACPpX,EAAO2O,oBAAmB,GAElC,EACA0I,SAAY,WACRhD,YAAW,WACP,IAAIiD,EAAS5f,EAAMob,iBACf9H,EAAOhL,EAAOgL,KAEdtJ,EAAU1B,EAAO0B,QAErB,GAAIA,EAAQ3J,QAAQwf,MAAO,CACvB,IAAIC,EAA0BxX,EAAOiK,eAAevK,QAAQ+X,IAAI,GAC5DD,IAA6Bte,EAAE2U,SAAS2J,EAAyBF,IAAWE,GAA2BF,IACvG5V,EAAQyT,kBAAmB,EAEnC,CAEImC,GAAUtM,GAAS9R,EAAE2U,SAAS7C,EAAMsM,IAAYtX,EAAO0X,mBAAsBhW,EAAQyT,kBAAqBjc,EAAEoe,GAAQK,SAAS,oBAC7Hze,EAAE8R,GAAM4M,YAAY,YACpB5X,EAAO6X,eAGX7X,EAAO2O,oBAAoB3O,EAAO0J,QAAQkF,OAC9C,GAAG,GACP,IAGJ5O,EAAO8X,4BACP9X,EAAO+X,yBACP/X,EAAOgY,4BACX,EAEA1W,sBAAuB,WACnB,IAAIxB,EAAO5H,KACP6H,EAAWrI,EAAM6B,GAAGyG,OAEpBF,EAAK/H,QAAQ4T,aACb7L,EAAK6L,WAAa,IAAI5L,EAAS0T,WAAW3T,GAElD,EAEAyK,uBAAwB,WACpB,IAEI3H,EAAOqV,EAFPnY,EAAO5H,KACPyP,EAAc7H,EAAK/H,QAAQ4P,YAG1B7H,EAAKuN,UAAa1F,IAIvB/E,EAAQ,cAAcxI,MAAuB0F,EAAK/H,QAAQ6P,MAAQ,UAAU9H,EAAK/H,QAAQ6P,SAAW,QACxFzN,EAAoB,uBAAyBwN,EADjD,gBAIRsQ,EAAQ/e,EAAE4G,EAAKnB,SAASuZ,OAClBzW,KAAK,IAAMrH,GAAoBmT,SACrC0K,EAAME,OAAOvV,GAEb9C,EAAK6O,oBAAoB7O,EAAK4J,QAAQkF,QAC1C,EAEApO,aAAc,SAASb,GACnB,IACIgK,EAAOyO,EAAUC,EADjBvY,EAAO5H,KAGX4H,EAAK6J,MAAQ,IACZA,EAAOyO,GAAYtY,EAAKwY,qBAAqBxY,EAAK/H,QAAQ4R,OAC3D7J,EAAKyY,kBAELF,EAAiB,CACb1O,MAAOA,EACP1L,aAAcma,EACdI,eAAgB1Y,EAAK/H,QAAQ+J,SAC7BkG,UAAWlI,EAAK/H,QAAQiQ,WAAalI,EAAK/H,QAAQiQ,UAAUtG,QAC5D+W,OAAQ3Y,EAAKwT,oBAAoBhT,KAAKpI,MACtC8e,MAAOlX,EAAKwT,oBAAoBhT,KAAKpI,MACrCsR,cAAe1J,EAAK/H,QAAQyR,cAC5BkP,mBAAmB,GAGvB5Y,EAAK4B,QAAU,IAAIhK,EAAM6B,GAAGof,QAAQhZ,EAAkB0Y,GAEtDvY,EAAKmP,aACLnP,EAAKQ,KAAK,SAAUR,EAAKkP,cAAc1O,KAAKR,IAE5CH,EAAiBiZ,GAAG,wBAAkB,mBAAmB,SAASxX,GACzDlI,EAAEkI,EAAEmS,QAAQsF,GAAG,UAChBzX,EAAEgU,gBAEV,IAEKtV,EAAKuN,UACNvN,EAAKgZ,mBAAmBnZ,EAEhC,EAEAmZ,mBAAoB,SAASC,GACzB,IAAIjZ,EAAO5H,KAEXA,KAAK+R,eAAiB8O,EACjBC,KAAK,uDACLC,SACAC,QAAQ,4CAA8CxhB,EAAM6B,GAAGwB,KAAK,eAAiB,WACrFoe,YAAY,CACThJ,OAAO,EACPnI,WAAW,EACXoB,UAAW,CACPgQ,WAAY,+BAEhB/P,UAAW,CACP2H,KAAM,CAAEqI,QAAS,WACjB7H,MAAO,CAAE6H,QAAS,aAEtBC,UAAW,GACXC,SAAS,EACTC,WAAW,EACXC,QAAS,GACTC,QAAS,WACLxhB,KAAKyhB,QAAS,CAClB,IAEHf,GAAG,aAAa,SAASxX,GACjBlI,EAAEkI,EAAEmS,QAAQsF,GAAG,6BAChB/Y,EAAK4B,QAAQyT,kBAAmB,EAExC,IACCyD,GAAG,YAAY,WACZ9Y,EAAKJ,QAAQ2X,UACjB,IACCpF,KAAK,cACd,EAEAqC,WAAY,SAASlT,GACjB,IAAIpB,EAAS9H,KAQb,GAPA8H,EAAO4Z,mBAAoB,EAEvB1gB,EAAE8G,EAAOgL,MAAM6O,QAAQ,aAAa9gB,QACpCqI,EAAE0Y,mBAIFngB,EAAQogB,MAAZ,CAIA,IAAIxG,EAASra,EAAEkI,EAAEmS,QAAQnT,QAAQ,YAEjB,GAAXgB,EAAE4Y,OAA0B,GAAX5Y,EAAE4Y,OAAc5Y,EAAEwV,UAAarD,GAAUA,EAAOsF,GAAG,YACrEzf,OAAO4X,KAAKuC,EAAOjD,KAAK,QAAS,QAGjClP,EAAEmS,OAAO0G,SAA8C,SAAnC7Y,EAAEmS,OAAO0G,QAAQrc,eACrCyW,YAAW,WACPrU,EAAOgL,KAAKkB,OAChB,GAAG,EAXP,CAaJ,EAEA7K,SAAU,SAASD,GACf,IAAItB,EAAO5H,KAEPR,EAAM+B,QAAQC,SAASyX,KAAO/P,GAAKlI,EAAEkI,EAAEmS,QAAQsF,GAAG3e,IAIlD4F,EAAK8Z,mBACLvF,YAAW,WACPvU,EAAKkM,kBACT,GAAG,EAEX,EAEAhL,eAAgB,SAASjJ,EAAS8H,GAC9B,IAGI6J,EAAOnL,EAHPuB,EAAO5H,KACP6H,EAAWrI,EAAM6B,GAAGyG,OACpBC,EAAMF,EAASG,IAGnB,GAAInI,GAAWA,EAAQ2R,MACnBA,EAAQ3R,EAAQ2R,WACb,GAAI5J,EAAKuN,SAAU,EAEtB3D,EAAQ7J,EAAW6J,OAER/L,QAAQ,MAAO,IAAI5E,SAC1B2Q,EAAQA,EAAM/L,QAAQ,MAAO,KAI7BmC,EAAK/H,QAAQ+P,SAAWjI,EAAWqa,cAAgBra,EAAWqa,aAAatL,OAAO7V,SAClF2Q,EAAQ7J,EAAWqa,cAGvB,IAAIC,EAAmBpa,EAASiO,WAAWe,UAAUrF,EAAOxQ,EAAE,eAAe,GAAI4G,EAAK/H,QAAQkQ,iBAC9F1J,EAAW0B,EAAIma,eAAeD,GAE9BzQ,GADAA,EAAQpP,EAAY+D,cAAcqL,EAAOnL,IAC3BZ,QAAQ,mBAAoB,KAC1C+L,EAAQpP,EAAYmE,iBAAiBiL,EAAOnL,EAChD,MACImL,EAAQ7J,EAAWwa,UAGvBva,EAAK4J,MAAMA,GAAS,SACxB,EAEA4Q,aAAc,SAASC,GACnB,IAAIC,EAAS,CAAC,EAMd,OAJAhP,OAAO5R,KAAK2gB,GAAS9O,KAAIC,IACrB8O,EAAO9O,EAAM,KAAO6O,EAAQ7O,EAAI,IAG7B8O,CACX,EAEAlC,qBAAsB,SAASmC,GAC3B,IAII9f,EAAG+f,EAAGC,EAAGlgB,EAAMmgB,EAJfC,EAAmB,CAAC,EACpBC,EAAkB,CAAC,EAEnBC,EAAgB7hB,EAAErB,QAAO,EAAM,CAAC,EAAGgH,GAGvC,IAAKlE,EAAI,EAAGA,EAAI8f,EAAa1hB,OAAQ4B,IAGjC,GAFAggB,EAAIF,EAAa9f,GAEbqgB,MAAMC,QAAQN,GAGd,IAFAC,EAAgBljB,EAAMwjB,OAEjBR,EAAI,EAAGA,EAAIC,EAAE5hB,OAAQ2hB,KACrBG,EAAkBpgB,GAAQvC,KAAKijB,oBAAoBR,EAAED,GAAIG,GAErDpgB,IAILogB,EAAiBpgB,GAAM2gB,GAAKR,OAE7B,CAGH,IAFCC,EAAkBpgB,GAAQvC,KAAKijB,oBAAoBR,EAAGE,IAElDpgB,EACD,SACgB,cAATA,IACPsgB,EAAgB7iB,KAAKoiB,aAAaS,IAGtCvP,OAAO5R,KAAKmhB,GAAetP,KAAIC,IACfqP,EAAcrP,GAEhB2P,SAAS5gB,KACfogB,EAAiBpgB,GAAM2gB,GAAK1P,EAChC,GAER,CAmCJ,OAhCAF,OAAO8P,OAAOT,GAAkBpP,KAAK1N,IACjC,IAAIwd,EAAQxd,EAAKqd,UAEVrd,EAAKqd,GAERG,IAAUpiB,EACV2hB,EAAgB/c,EAAKtD,MAAQsD,GAExB+c,EAAgBS,KACjBT,EAAgBS,GAAS,IAG7BT,EAAgBS,GAAOljB,KAAK0F,GAChC,IAmBG,CAhBCyN,OAAO8P,OAAOR,GAAiBrP,KAAK+P,IACxC,IAAIhB,EAYJ,OAJsB,KALlBA,EADAgB,EAAEziB,OACOyiB,EAAE/P,KAAKgQ,GAAOA,EAAGhhB,OAEjB+gB,EAAE/gB,MAGJ1B,SACPyhB,EAASA,EAAO,IAGbA,CAAM,IAGFK,EACnB,EAEAa,oBAAqB,SAAS3d,EAAME,GAChC,IAEIlG,EAFA0C,EAAOsD,EAAKtD,KACZ+f,EAAS,CAAC,EAGd,GAAIthB,EAAEyiB,cAAc5d,GACZtD,GAAQwD,EAAaxD,IAErB+f,EAAS3iB,EAAO,CAAC,EAAGoG,EAAaxD,IACjC5C,EAAO2iB,EAAOziB,QAASgG,MAGvBhG,EAAUF,EAAO,CAAEkD,KAAM,OAAQ6E,KAAM,UAAY7B,IAEtCtD,OACT1C,EAAQ0C,KAAO,UAGnB1C,EAAQiD,SAAW,KAAOjD,EAAQ0C,KAElC+f,EAAS,CACLziB,QAASA,GAGb0C,EAAO1C,EAAQ0C,UAEhB,KAAIwD,EAAaF,GAIpB,OAAO,KAFPyc,EAASvc,EADTxD,EAAOsD,EAIX,CAIA,OAFA7F,KAAKyR,MAAMlP,GAAQ+f,EAEZA,CACX,EAEAW,oBAAqB,SAASR,EAAGE,GAC7B,IAEI9c,EAAMtD,EAAMmhB,EAAMC,EAAW9jB,EAAS+jB,EAAW/gB,EAAM8a,EAAakG,EAAiBC,EAFrFlc,EAAO5H,KACP+F,EAAevG,EAAMsB,WAAW,CAAC,EAAGtB,EAAM6B,GAAGyE,OAAOC,cAKxD,OAFAF,EAAO7F,KAAKwjB,oBAAoBf,EAAG1c,KAOnCxD,GADA1C,EAAUgG,EAAKhG,SACA0C,KACfqhB,EAAY/jB,EAAQwB,IAAM,CAAC,EAC3BwB,EAAOT,EAAYQ,gBAAgB/C,EAAQ0C,KAAM1C,EAAQgD,aAGzDghB,EAAkB7iB,EAAEyiB,cAAchB,GAAKzhB,EAAErB,OAAO,CAAC,EAAG8iB,GAAK,CAAC,GACnC/I,MAEvBiE,EAAc3c,EAAErB,OAAO,CACnB4C,KAAM1C,EAAQ0C,KACdnC,QAASP,EAAQO,QACjB2jB,SAAUlkB,EAAQkkB,SAClBrc,KAAM,SACN7E,KAAMA,EACNmhB,SAAU,WACVC,SAAU,QACXL,EAAWC,GAEVhkB,EAAQqkB,UACHvG,EAAYwG,aACbxG,EAAYwG,WAAa,CAAC,GAG9BxG,EAAYwG,WAAWlM,MAAQpY,EAAQqkB,SAEvCrkB,EAAQ6S,OACRiL,EAAYmB,MAAQjf,EAAQ6S,KAAKtK,KAAKR,UAC/B+V,EAAYjL,MAGO,gBAA1BiL,EAAYnE,YACR3Z,EAAQikB,UAAY7iB,GAAe2iB,EAAUE,UAAYtkB,EAAM6B,GAAGyG,OAAOsc,UAAUtkB,GAAGD,QAAQikB,UAC9FA,EAAUjkB,EAAQikB,SAAWtkB,EAAM6B,GAAGyG,OAAOsc,UAAUtkB,GAAGD,QAAQikB,QAClEJ,EAAO7jB,EAAQikB,UAAY7iB,GAAgBpB,EAAQikB,QAAuB,UAAb,WAC7DnG,EAAY0G,iBAAiBP,QAAmB,YAATJ,EAAqBI,EAAU7iB,EACtE0c,EAAY0G,iBAAiBC,MAAQ,CAACZ,GACtC/F,EAAY0G,iBAAiBE,QAAmB,aAATb,EACvC/F,EAAY0G,iBAAiBG,MAAiB,aAATd,EACrC/F,EAAY0G,iBAAiBI,QAAmB,aAATf,EAE1B,aAATA,UACO/F,EAAY0G,iBAAiB1V,SAG/B,YAAT+U,GAAsB7jB,EAAQ8O,UAC9BgP,EAAY0G,iBAAiB1V,QAAU9O,EAAQ8O,UAIzB,iBAA1BgP,EAAYnE,WAA0D,aAA1BmE,EAAYnE,YACnDmE,EAAY0G,mBACb1G,EAAY0G,iBAAmB,CAAC,GAG/B1G,EAAY0G,iBAAiB5K,aAC1B7R,EAAK/H,QAAQ0C,IAASugB,MAAMC,QAAQnb,EAAK/H,QAAQ0C,IACjDob,EAAY0G,iBAAiB5K,WAAa7R,EAAK/H,QAAQ0C,GAEvDob,EAAY0G,iBAAiB5K,WAAa5Z,EAAQ6Z,QAI1DiE,EAAYoG,iBACLpG,EAAYjW,KAKL,MAFlBic,EAAY3jB,KAAK0kB,kBAAkBniB,MAG1Bob,EAAYwG,aACbxG,EAAYwG,WAAa,CAAC,GAG9BxG,EAAYwG,WAAW,qBAAuBR,GAGlDhB,EAAiBpgB,GAAQob,EAElB,CAACgF,EAAkBpgB,IAlFf,CAACogB,EAAkB,KAmFlC,EAEA7L,cAAe,WACX,IAAIlP,EAAO5H,KACP4S,EAAQhL,EAAKyL,WACbxL,EAAWrI,EAAM6B,GAAGyG,OAEpB6c,EADa9c,EAAS0K,WACH6D,UAAUxD,GAC7Ba,EAAa7L,EAAK/H,QAAQ4T,WAC1B+H,EAAoB5T,EAAK0T,mBAAmB1I,GAC5C7M,EAAe6B,EAAK6J,OAExBkT,EAAQ9c,EAASG,IAAI4c,SAASD,EAAO9c,EAASG,IAAI6c,iBAAiB,IAExDhkB,SACP8jB,EAAQ,CAAC/R,EAAM2B,iBAGnB3M,EAAK4B,QAAQhC,QAAQ+B,KAAK,kBACrB0N,QAAO,CAACxU,EAAGyU,IAA+C,IAAxClW,EAAEkW,GAAI3N,KAAK,kBAAkB1I,SAC/CsW,MAAK,WACF,IAEI9V,EAFAuE,EAAW5F,KAAK+S,aAAa,gBAC7BlN,EAAOE,EAAaH,GAGpBC,IACAxE,EAAKL,EAAEhB,MAEH6F,EAAKsC,QACLtC,EAAKsC,OAAO9G,EAAIsjB,EAAO/c,EAAKiB,eAG5B4K,GACA7L,EAAKkd,uBAAuBjf,EAAMxE,EAAIma,GAGlD,GACR,EAEAvT,iBAAkB,SAAST,EAASE,EAAM6S,GACtC,IAEIwK,EACAtiB,EAFAuiB,EAAK,eAUT,GANAxd,EAAUxG,EAAEwG,GAEPxH,KAAKoa,YACNpa,KAAKoa,UAAY,IAGjB5S,EAAQ3G,OACR,GAAIG,EAAEyiB,cAAc/b,GAChB,IAAK,IAAI+a,KAAK/a,EACNA,EAAKud,eAAexC,IACpBziB,KAAKiI,iBAAiBT,EAASib,EAAG/a,EAAK+a,SAO/C,IAFAsC,EAAavlB,EAAM0lB,cAAcxd,GAAMyd,MAAM,KAExC1iB,EAAI,EAAGA,EAAIsiB,EAAWlkB,OAAQ4B,IAtB9BzC,KAuBMoa,UAAUja,KAAK,CAClBqH,QAASA,EACTE,KAAMqd,EAAWtiB,GAAKuiB,EACtBzK,QAASA,IAGb/S,EAAQkZ,GAAGqE,EAAWtiB,GAAKuiB,EAAIzK,EAI/C,EAEAsD,2BAA4B,SAAS3U,GAIjC,IAHA,IAAI0J,EAAQ5S,KAAKqT,WACb5B,EAAQzR,KAAKgT,SAASoS,kBAAkBplB,KAAKyR,MAAOvI,GAE/CzG,EAAI,EAAGA,EAAIgP,EAAM5Q,OAAQ4B,IAAK,CACnC,IAAIoD,EAAO4L,EAAMhP,GACb4iB,EAAIxf,EAAKhG,QACb,GAAKwlB,EAAEzH,gBAIG,IAAIyH,EAAEjlB,QAAQ,CAAEwS,MAAOA,IACzB0S,mBACJtlB,KAAKgT,SAASyH,WAAU,GACxBza,KAAK0S,KAAK7M,EAAKtD,MAEvB,CACJ,EAEAuR,iBAAkB,WACd9T,KAAK0hB,mBAAoB,EACzB1hB,KAAKwV,gBACLxV,KAAKU,QAAQ,SAAU,CAAC,EAC5B,EAEA0R,iBAAkB,SAASmQ,GACvB,IAGI9Q,EAAOyO,EAAUC,EAHjBvY,EAAO5H,KACPwJ,EAAU5B,EAAK4B,QACf/B,EAAmB+B,EAAQhC,QAG/BgC,EAAQkI,UACRjK,EAAiB8d,QAEjB3d,EAAK6J,MAAQ,IACZA,EAAOyO,GAAYtY,EAAKwY,qBAAqBmC,GAC9C3a,EAAKyY,kBAELF,EAAiB,CACb1O,MAAOA,EACP1L,aAAcma,EACdI,eAAgB1Y,EAAK/H,QAAQ+J,SAC7BkG,UAAWlI,EAAK/H,QAAQiQ,WAAalI,EAAK/H,QAAQiQ,UAAUtG,QAC5D+W,OAAQ3Y,EAAKwT,oBAAoBhT,KAAKpI,MACtC8e,MAAOlX,EAAKwT,oBAAoBhT,KAAKpI,OAGzC4H,EAAK4B,QAAU,IAAIhK,EAAM6B,GAAGof,QAAQhZ,EAAkB0Y,GAEtDvY,EAAKmP,YACT,EAEAsJ,gBAAiB,WACb,IACI5d,EADAsD,EAAevG,EAAMsB,WAAW,CAAC,EAAGtB,EAAM6B,GAAGyE,OAAOC,cAGxD,IAAKtD,EAAI,EAAGA,EAAIN,EAAatB,OAAQ4B,IAC5BzC,KAAKyR,MAAMtP,EAAaM,MACzBzC,KAAKyR,MAAMtP,EAAaM,IAAMsD,EAAa5D,EAAaM,IAGpE,EAEA8F,aAAc,SAASb,GACnB,IAAIE,EAAO5H,KAEC,YAAR0H,GACAyU,YAAW,WACP,IAAIqJ,EAAc5d,EAAK0B,QAAQ,GAAGoB,MAAMmC,OACpC4Y,EAAiBC,SAASF,EAAa,IACvCG,EAAe/d,EAAK0B,QAAQuD,SAC5B2Y,EAAYI,QAAQ,MAAQ,IAAMC,MAAMJ,IAAmBE,EAAeF,GAC1E7d,EAAK0B,QAAQuD,OAAO4Y,GAAkBE,EAAeF,GAE7D,GAER,EAEA/c,eAAgB,WACZ,IAAId,EAAO5H,KACP6H,EAAWrI,EAAM6B,GAAGyG,OAExBF,EAAKoL,SAAW,IAAInL,EAASie,SAAS,CAClC,IAAIje,EAASke,iBAAiBne,GAC9B,IAAIC,EAASme,cAAcpe,GAC3B,IAAIC,EAASoe,cAAcre,GAC3B,IAAIC,EAASqe,iBAAiBte,IAEtC,EAEAS,WAAY,SAASb,GACjB,IAGIC,EAHAE,EAAaH,EAAQ,GACrBE,EAAOlI,EAAM6B,GAAGyG,OAAOE,IAAIzF,KAAKoF,GAChC2F,EAAK3F,EAAW2F,GAmBpB,MAhBY,YAAR5F,GACA1H,KAAKmmB,gBAEL1e,EAAmBzH,KAAKsJ,QAAQC,KAAK,qBAEhC+D,IACDA,EAAK9N,EAAMwjB,OACXrb,EAAWkU,aAAa,KAAMvO,IAGlC7F,EAAiB2Q,KAAK,gBAAiB9K,KAEvCtN,KAAKwH,QAAQ4Q,KAAK,mBAAmB,GAAMD,SAAS,qCACpD1Q,EAAmBzG,EAAE,mCAAmCsX,aAAa9Q,IAGlEC,CACX,EAEAid,kBAAmB,SAASniB,GACxB,IAEI1C,EAFAgG,EAAOrG,EAAM6B,GAAGyE,OAAOC,aAAaxD,GACpC6jB,EAAM,GAGV,OAAKvgB,GAASA,EAAKhG,UAInBA,EAAUgG,EAAKhG,SAEHwmB,OACRD,GAAO,SAGPvmB,EAAQymB,QACRF,GAAO,UAGPvmB,EAAQ0mB,MACRH,GAAO,QAGPvmB,EAAQ2T,MACR4S,GAAOvmB,EAAQ2T,KAGZ4S,GArBIA,CAsBf,EAEA7J,cAAe,SAASzU,GACpB,IAAI0e,EACAC,GAAe,EAEnBzmB,KAAKiI,iBAAiBH,EAAOgL,KAAM,CAC/B4T,YAAe,WACX5e,EAAO6Q,IAAI,UAAU,WACjB6N,EAAmB,IACvB,IAEA1e,EAAO+J,qBAAuBsK,YAAW,WACrCqK,EAAmB,IAAIhnB,EAAM6B,GAAGyG,OAAO8N,aAAa9N,EAAOuL,WAAYvL,EAAOgL,MAC9E2T,GAAe,CACnB,GAAG,GACP,EACAjC,MAAS,WACAgC,KAIDhnB,EAAM+B,QAAQE,QAAQklB,SAAYF,EAKtCjnB,EAAM6B,GAAGyG,OAAO8e,cAAc9e,EAAQ0e,GAJlCC,GAAe,EAKvB,GAER,EAEAhQ,mBAAoB,SAASoQ,GACzB,IAAIjf,EAAO5H,KACP8S,EAAOlL,EAAKkL,KACZgU,EAAQ9lB,EAAE8R,GACVrD,EAAc7H,EAAK/H,QAAQ4P,YAE1B7H,EAAKuN,UAAa1F,IAIvBqX,EAAM1O,KAAK,cAAc,WACrB,OAAOyO,EAAOpX,EAAc,EAChC,IAEAqX,EAAMC,YAAY9kB,EAAmB4kB,GACzC,EAEArH,gBAAiB,WACb,IAAIJ,EAAS5f,EAAMob,iBACfyE,EAAQrf,KAAK+R,eACbiV,EAAgBhnB,KAAKgnB,cAEzB,OAAQ3H,GAASre,EAAEoe,GAAQlX,QAAQmX,EAAM/V,SAASzI,QAC7CmmB,GAAiBA,EAAc3F,SACxC,EAEAyD,uBAAwB,SAASjf,EAAMxE,EAAIma,GACvC,IAAIhS,EAAUxJ,KAAKwJ,QACfjH,EAAOsD,EAAKtD,KACZ0kB,EAAY5lB,EAAG6G,QAAQ,mBACvBgf,EAAkBrhB,EAAKhG,QAAQqnB,gBAC/Brf,EAAWrI,EAAM6B,GAAGyG,OAEpBof,IAAoBjmB,IACpBimB,EAAkBlmB,EAAE0B,QAAQH,EAAMsF,EAAS0T,WAAW4L,mBAAqB,GAG3ED,IACI1L,EACAhS,EAAQwO,KAAKiP,GAEbzd,EAAQqd,KAAKI,GAGzB,EAEAd,cAAe,WACX,IAAIve,EAAO5H,KACPmV,EAAWvN,EAAKJ,QAChB4f,EAAIjS,EAAS,GAAGzK,MAAMkC,MACtByN,EAAIlF,EAAS,GAAGzK,MAAMmC,OACtBkX,EAAW3hB,EAAYC,wBACvBglB,EAAarmB,EAAE+iB,GAAUzL,aAAanD,GACtCmS,EAAWD,EAAW9d,KAAK,oBAE/B8d,EAAW7W,IAAI,CACX5D,MAASwa,EACTva,OAAUwN,IAGdlF,EAASiD,KAAK,eAAgB,OACzB+C,SAASmM,GAAUnP,SAAS,2BAA2B3H,IAAI,UAAW,QAE3E5I,EAAKuN,SAAWA,EAChBvN,EAAK0B,QAAU+d,CACnB,EAGA7e,WAAY,WACR,IAAIsH,EAAY9P,KAAKH,QAAQiQ,UAG7B,IAFkB9O,EAAEyiB,cAAc3T,GAAcA,EAAU1J,UAAYnF,IAAqC,IAAtB6O,EAAU1J,QAAoB0J,IAEhG9P,KAAKmV,SAAU,CAC9B,IAAIoS,EAAmBvmB,EAAE,gCAAkCxB,EAAM6B,GAAGwB,KAAK,YAAc,UAClF2kB,YAAYxnB,KAAKmV,UA2BtB,GAzBAnV,KAAKsJ,QAAQ6O,SAAS,eAEtBnY,KAAKsJ,QAAQme,eAAe9nB,EAAO,CAAC,EAAGK,KAAKH,QAAQiQ,UAAW,CAC3DyX,iBAAkBA,EAClBG,MAAO,SAASxe,GACZ,IAAIpB,EAAS9H,KAAK8H,OAAS9G,EAAEkI,EAAEye,eAAezf,QAAQ,aACtDlI,KAAK4nB,YAAc9f,EAAO+E,SAC1B/E,EAAOyB,KAAK,oBAAoB0S,OAAOgE,OAAO,4BAClD,EACAxW,OAAQ,SAASP,GACb,IAAI2e,EAAQ3e,EAAE4e,EAAEC,aACZC,EAAUhoB,KAAK4nB,YAAcC,EAC7BI,EAAMjoB,KAAKH,QAAQooB,KAAO,EAC1BC,EAAMloB,KAAKH,QAAQqoB,KAAOC,IAE9BH,EAAUI,KAAKH,IAAIC,EAAKE,KAAKF,IAAID,EAAKD,IAEtChoB,KAAK8H,OAAO+E,OAAOmb,EACvB,EACAK,UAAW,WACProB,KAAK8H,OAAOyB,KAAK,cAAc8L,SAC/BrV,KAAK8H,OAAS,IAClB,KAGAtI,EAAM+B,QAAQC,SAASyX,IACDjZ,KAAKsJ,QAAQgf,oBACnBpX,UAAUrR,QAAQ0oB,OAASvmB,CAEnD,CACJ,EAEAkQ,kBAAmB,WACf,IAAIpK,EAAS9H,KAEb8H,EAAO0gB,0BACPhpB,EAAM6B,GAAGyG,OAAO2gB,uBAAuBpG,QAAQqG,QAAQ5gB,GACvDA,EAAO6gB,sBACPnpB,EAAM6B,GAAGyG,OAAO8gB,YAAYF,QAAQ5gB,GACpCA,EAAO+gB,yBACPrpB,EAAM6B,GAAGyG,OAAOghB,eAAeJ,QAAQ5gB,EAC3C,EAEAgY,2BAA4B,WACxB,IAAIhY,EAAS9H,KAEbR,EAAM6B,GAAGyG,OAAO2gB,uBAAuBpG,QAAQ0G,OAAOjhB,GAEtDA,EAAOkhB,+BAAiClhB,EAAOiW,0BAA0B3V,KAAKN,GAC9EA,EAAOM,KAAKrG,EAAQ+F,EAAOkhB,+BAC/B,EAEAR,wBAAyB,WACrB,IAAI1gB,EAAS9H,KACTipB,EAAkBnhB,EAAOmhB,gBAEzBA,IACAA,EAAgBvX,UAChB5J,EAAOmhB,gBAAkB,MAGzBnhB,EAAOkhB,gCACPlhB,EAAOkP,OAAOjV,EAAQ+F,EAAOkhB,+BAErC,EAEAjL,0BAA2B,WACvB,IACIkL,EADSjpB,KACgBipB,gBAEzBA,GAAmBA,EAAgBzhB,SAAWyhB,EAAgBzhB,QAAQ0hB,WACtED,EAAgBE,qBACTF,GAAqBA,EAAgBzhB,SAAYyhB,EAAgBzhB,QAAQ0hB,YALvElpB,KAMFwoB,yBAEf,EAEA5I,0BAA2B,WACvBpgB,EAAM6B,GAAGyG,OAAOghB,eAAeC,OAAO/oB,KAC1C,EAEA6oB,uBAAwB,WACpB,IAAI/gB,EAAS9H,KAET8H,EAAOshB,iBACPthB,EAAOshB,eAAe1X,UACtB5J,EAAOshB,eAAiB,KAEhC,EAEAvJ,uBAAwB,WACpBrgB,EAAM6B,GAAGyG,OAAO8gB,YAAYG,OAAO/oB,KACvC,EAEA2oB,oBAAqB,WACjB,IAAI7gB,EAAS9H,KAET8H,EAAOuhB,cACPvhB,EAAOuhB,YAAY3X,UACnB5J,EAAOuhB,YAAc,KAE7B,EAGAC,gBAAiB,WACb,IACIhgB,EADOtJ,KACQ+R,eAAezI,QAC9BigB,EAFOvpB,KAEcwH,QAEzB,OAAO7F,EAAW4nB,GAAiB7D,SAASpc,EAAQkH,IAAI,qBAAsB,IAAMkV,SAASpc,EAAQkH,IAAI,sBAAuB,GACpI,EAEAmP,YAAa,WACL3f,KAAK+R,gBACL/R,KAAK+R,eAAeuH,OAE5B,EAEAkQ,gBAAiB,SAASC,GACtB,IAAIC,EAAiB1pB,KAAK+R,eAAezI,QACrCqgB,EAAuBD,EAAerM,SACtCuM,EAAqBD,EAAqB3O,KAC1C6O,EAAoBF,EAAqB1O,IACzC6O,EAAYL,EAAIpM,SAChB0M,EAAgBD,EAAU9O,KAC1BgP,EAAeF,EAAU7O,IAE7B,QAAS8O,EAAgBN,EAAI7c,QAAUgd,GAC/BG,EAAgBH,EAAqBF,EAAe9c,SACpDod,EAAeP,EAAI5c,SAAWgd,GAC9BG,EAAeH,EAAoBH,EAAe7c,SAC9D,EAEAqS,YAAa,WACT,IAEI5V,EAASigB,EAAeU,EAFxBriB,EAAO5H,KACP+R,EAAiBnK,EAAKmK,eAEtBtQ,EAAUjC,EAAM+B,QAAQE,QAExBsQ,IACAzI,EAAUyI,EAAezI,QACzBigB,EAAgB3hB,EAAKJ,QAEhB8B,EAAQqX,GAAG,aAAgB/Y,EAAKmK,eAAelS,QAAQwhB,UAEnD/X,EAAQ,GAAGoB,MAAMkC,OAClBtD,EAAQsD,MAAM5M,KAAKspB,mBAIlBvX,EAAe0P,SAChBwI,EAAeV,EAAclM,SAC7B/T,EAAQkH,IAAI,CACRyK,IAAKmN,KAAKF,IAAI,EAAGxC,SAASuE,EAAahP,IAAK,IAAMpZ,EAAYyH,GAAWoc,SAAS9d,EAAKmK,eAAevK,QAAQgJ,IAAI,kBAAmB,KACrIwK,KAAMoN,KAAKF,IAAI,EAAGxC,SAASuE,EAAajP,KAAM,SAIjDvZ,EAAQsZ,MAAQtZ,EAAQyX,OAAStR,EAAK4hB,gBAAgBD,GACvDpN,YAAW,WACPpK,EAAe+G,MACnB,GAAG,GAEH/G,EAAe+G,QAI/B,IAGJhT,EAAOC,aAAe,CAAC,EAEvBvG,EAAM6B,GAAG6oB,OAAOpkB,GAEhB,IAAIqkB,EAAOhpB,EAAMxB,OAAO,CACpBC,KAAM,SAASC,GACXG,KAAKH,QAAUA,CACnB,EAEAO,QAAS,SAASgqB,GACd,OAAO,IAAIpqB,KAAKH,QAAQO,QAAQgqB,EACpC,EAEAjiB,OAAQnH,EAAEqpB,OAGdF,EAAKzX,KAAO,SAAS5K,EAAQvF,EAAMiP,GAC/B1J,EAAO4K,KAAKnQ,EAAM,CAAEiP,MAAOA,GAC/B,EAEA,IAAI8Y,EAAWH,EAAKxqB,OAAO,CACvBS,QAASY,EAAEqpB,KACXliB,OAAQ,SAAS9G,EAAIsjB,EAAO9b,GACxB,IACItG,EADOvC,KACKH,QAAQ0C,KACpBiH,EAAUnI,EAAG6G,QAAQ,cAAc6R,KAAK,gBAE5C,OAAQxX,GACJ,IAAK,OACDiH,EAAQ+gB,OAAOlpB,EAAIwH,EAAcpI,WACjC,MACJ,IAAK,OACD+I,EAAQ+gB,OAAOlpB,EAAIwH,EAAcjI,WAMzCS,EAAGmpB,WAAW,WAClB,IAGJpoB,EAAYuD,aAAa,YAAa,IAAIwkB,EAAK,CAAE9oB,GAAI,CAAEqG,KAAM,gBAC7DtF,EAAYuD,aAAa,OAAQ,IAAI2kB,EAAS,CAAE9W,IAAK,IAAK6S,MAAM,KAChEjkB,EAAYuD,aAAa,OAAQ,IAAI2kB,EAAS,CAAE9W,IAAK,IAAK6S,MAAM,KAIhE,IAAIoE,EAAsB,SACtBC,EAAwBD,GAExBhpB,EAAQsZ,MAAQtZ,EAAQyX,QACxBwR,EAAwBD,EAAsB,UAGlD9qB,EAAOH,EAAM6B,GAAI,CACbyG,OAAQ,CACJ1F,YAAaA,EACb+nB,KAAMA,EACNM,oBAAqBA,EACrBC,sBAAuBA,KAI3BlrB,EAAMmrB,WACNnrB,EAAMmrB,SAAShrB,OAAOmG,EAAO8kB,WAC7B9kB,EAAO8kB,UAAUC,SAAW,WACxB,OAAOrrB,EAAMsrB,QAAQC,QAAQ/qB,KAAK8S,KAAM9S,KAAKH,QAAQ0F,IACzD,EACAO,EAAO8kB,UAAUI,UAAY,WACzB,IAAIC,EAAW,IAAIjqB,EAAEkqB,SACjBC,EAAUF,EAASE,UACnBC,EAAO,CAAED,QAASA,GAEtB,IAAInrB,KAAKU,QAAQ,YAAa0qB,GAA9B,CAIA,IAAIvrB,EAAUG,KAAKH,QAAQ0F,IAoB3B,OAlBAvF,KAAK6qB,SAASI,GACbI,MAAK,SAASC,GACX,OAAO9rB,EAAMsrB,QAAQS,UAAUD,EAAMzrB,EACzC,IACC2rB,MAAK,SAASC,GACXjsB,EAAMksB,OAAO,CACTD,QAASA,EACTE,SAAU9rB,EAAQ8rB,SAClBC,SAAU/rB,EAAQ+rB,SAClBC,YAAahsB,EAAQgsB,YACrBC,WAAYjsB,EAAQisB,aAExBb,EAASc,SACb,IACCC,MAAK,SAASC,GACXhB,EAASiB,OAAOD,EACpB,IAEOd,CAtBP,CAuBJ,EAGP,CApqED,CAoqEGjqB,OAAO1B,MAAM2sB,QAEhB,SAAUnrB,GAEV,IAAIxB,EAAQ0B,OAAO1B,MACf+T,EAAMvS,EAAEuS,IACR5T,EAASqB,EAAErB,OACX8B,EAAUjC,EAAM+B,QAAQE,QACxB2qB,EAAQ,QACRC,EAAQ,QACRC,EAAW,WACXC,EAAa,aACbC,EAAQ,QACRC,EAAU,WAEd,SAASC,EAAQhT,GACb,IACIjX,EAAGkqB,EADHC,EAAM,CAAC,EAGX,IAAKnqB,EAAI,EAAGkqB,EAAMjT,EAAM7Y,OAAQ4B,EAAIkqB,EAAKlqB,IACrCmqB,EAAIlT,EAAMjX,KAAM,EAEpB,OAAOmqB,CACX,CAEA,IAAIrH,EAAQmH,EAAQ,6EAA6EvH,MAAM,MACnG0H,EAAuB,qQAAqQ1H,MAAM,KAClS2H,EAAgBD,EAAqBE,OAAO,CAAC,KAAK,KAAK,OACvDC,EAAQN,EAAQI,GAChBG,EAAcP,EAAQ,+FAA+FvH,MAAM,MAC3H+H,EAAiB,yNAAyN/H,MAAM,KAChPgI,EAAST,EAAQQ,GACjBE,EAAYV,EAAQ,yGAAyGvH,MAAM,MACnIkI,EAAiC,CAAC,SAAS,KAAK,KAAK,KAAK,SAAS,QAAQ,QAAQ,QAAQ,WAAW,QAAQ,QAAQ,QAAQ,KAAK,SAAS,YAE5IC,EAAY,SAASC,GACA,GAAjBA,EAAK/P,UACL+P,EAAKD,WAEb,EAEI7rB,EAAQsZ,MAAQtZ,EAAQ+rB,SAAW,IACnCF,EAAY,SAASvM,GACjB,GAAuB,GAAnBA,EAAOvD,UAAiBuD,EAAO0M,WAAY,CAC3C,IAAIC,EAAO3M,EAAO0M,WACdF,EAAOG,EAIX,IAFAJ,EAAUC,GAGNA,EAAOA,EAAKI,aAMZL,EAAUC,GAEW,GAAjBA,EAAK/P,UAAkC,GAAjBkQ,EAAKlQ,WAC3B+P,EAAK9P,UAAYiQ,EAAKjQ,UAAY8P,EAAK9P,UACvCzV,EAAIqN,OAAOqY,IAGfA,EAAOH,CAEf,CACJ,GAGJ,IAKIK,EALAC,EAAa,QACbC,EAAa,cACbC,EAAM,iDACNC,EAAM,UACNC,EAAkB,iBAElBC,EACO,gcAOE/I,MAAM,KACfgJ,EAAS,UACTC,EAAW,uBACXC,EAAc,CACN,GAAI,OAAQ,GAAI,MAAO,GAAI,OAAQ,GAAI,KAAM,GAAI,KACjD,IAAK,OAAQ,IAAK,QAAS,IAAK,OAAQ,IAAK,QAAS,IAAK,SAC3D,IAAK,MAAO,IAAK,SAAU,IAAK,OAAQ,IAAK,MAAO,IAAK,OACzD,IAAK,OAAQ,IAAK,QAAS,IAAK,MAAO,IAAK,MAAO,IAAK,MACxD,IAAK,OAAQ,IAAK,MAAO,IAAK,SAAU,IAAK,OAAQ,IAAK,OAC1D,IAAK,QAAS,IAAK,QAAS,IAAK,OAAQ,IAAK,SAAU,IAAK,QAC7D,IAAK,OAAQ,IAAK,OAAQ,IAAK,QAAS,IAAK,SAAU,IAAK,SAC5D,IAAK,SAAU,IAAK,SAAU,IAAK,SAAU,IAAK,SAAU,IAAK,QACjE,IAAK,SAAU,IAAK,OAAQ,IAAK,QAAS,IAAK,QAAS,IAAK,SAC7D,IAAK,SAAU,IAAK,SAAU,IAAK,QAAS,IAAK,OAAQ,IAAK,SAC9D,IAAK,SAAU,IAAK,QAAS,IAAK,OAAQ,IAAK,MAAO,IAAK,SAC3D,IAAK,SAAU,IAAK,SAAU,IAAK,QAAS,IAAK,SAAU,IAAK,OAChE,IAAK,QAAS,IAAK,SAAU,IAAK,SAAU,IAAK,SAAU,IAAK,QAChE,IAAK,OAAQ,IAAK,SAAU,IAAK,QAAS,IAAK,QAAS,IAAK,SAC7D,IAAK,SAAU,IAAK,QAAS,IAAK,SAAU,IAAK,OAAQ,IAAK,QAC9D,IAAK,QAAS,IAAK,SAAU,IAAK,SAAU,IAAK,SAAU,IAAK,QAChE,IAAK,OAAQ,IAAK,SAAU,IAAK,SAAU,IAAK,QAAS,IAAK,OAC9D,IAAK,MAAO,IAAK,SAAU,IAAK,SAAU,IAAK,SAAU,IAAK,QAC9D,IAAK,SAAU,IAAK,OAAQ,IAAK,SAAU,IAAK,SAAU,IAAK,SAC/D,IAAK,SAAU,IAAK,QAAS,IAAK,OAAQ,IAAK,SAAU,IAAK,QAC9D,IAAK,OAAQ,IAAK,OAAQ,IAAK,QAAS,IAAK,OAAQ,IAAK,QAC1D,IAAK,QAAS,IAAK,UAAW,IAAK,OAAQ,IAAK,MAAO,IAAK,QAC5D,IAAK,OAAQ,IAAK,QAAS,IAAK,SAAU,IAAK,KAAM,IAAK,KAC1D,IAAK,KAAM,IAAK,UAAW,IAAK,KAAM,IAAK,MAAO,IAAK,QACvD,IAAK,MAAO,IAAK,UAAW,IAAK,MAAO,IAAK,MAAO,IAAK,MACzD,IAAK,QAAS,IAAK,QAAS,IAAK,OAAQ,IAAK,QAAS,IAAK,QAC5D,IAAK,UAAW,IAAK,OAAQ,IAAK,MAAO,IAAK,QAAS,IAAK,OAC5D,IAAK,QAAS,IAAK,SAAU,IAAK,KAAM,IAAK,KAAM,IAAK,KACxD,IAAK,UAAW,IAAK,KAAM,IAAK,MAAO,IAAK,SAAU,IAAK,QAC3D,IAAK,MAAO,IAAK,UAAW,IAAK,MAAO,IAAK,MAAO,IAAK,MACzD,IAAK,QAAS,IAAK,WAAY,IAAK,QAAS,IAAK,MAAO,KAAM,OAC/D,KAAM,SAAU,KAAM,QAAS,KAAM,QAAS,KAAM,QAAS,KAAM,QACnE,KAAM,SAAU,KAAM,QAAS,KAAM,OAAQ,KAAM,QAAS,KAAM,UAClE,KAAM,OAAQ,KAAM,OAAQ,KAAM,OAAQ,KAAM,OAAQ,KAAM,OAC9D,KAAM,QAAS,KAAM,OAAQ,KAAM,OAAQ,KAAM,OAAQ,KAAM,OAC/D,KAAM,OAAQ,KAAM,SAAU,KAAM,OAAQ,KAAM,QAAS,KAAM,QACjE,KAAM,QAAS,KAAM,OAAQ,KAAM,QAAS,KAAM,KAAM,KAAM,OAC9D,KAAM,MAAO,KAAM,QAAS,KAAM,SAAU,KAAM,QAAS,KAAM,OACjE,KAAM,QAAS,KAAM,MAAO,KAAM,MAAO,KAAM,KAAM,KAAM,MAC3D,KAAM,MAAO,KAAM,MAAO,KAAM,SAAU,KAAM,MAAO,KAAM,OAC7D,KAAM,QAAS,KAAM,KAAM,KAAM,QAAS,KAAM,KAAM,KAAM,KAC5D,KAAM,MAAO,KAAM,MAAO,KAAM,OAAQ,KAAM,OAAQ,KAAM,OAC5D,KAAM,QAAS,KAAM,SAAU,KAAM,OAAQ,KAAM,OAAQ,KAAM,QACjE,KAAM,QAAS,KAAM,SAAU,KAAM,SAAU,KAAM,OAAQ,KAAM,OACnE,KAAM,MAAO,KAAM,SAAU,KAAM,QAAS,KAAM,SAAU,KAAM,QAClE,IAAK,QAAS,IAAK,QAAS,IAAK,SAAU,IAAK,SAAU,IAAK,OAC/D,IAAK,OAAQ,IAAK,QAAS,KAAM,OAAQ,KAAM,OAAQ,KAAM,SAC7D,KAAM,OAAQ,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,QAC3D,KAAM,QAAS,KAAM,QAAS,KAAM,QAAS,KAAM,QAAS,KAAM,QAClE,KAAM,QAAS,KAAM,QAAS,KAAM,SAAU,KAAM,SAAU,KAAM,SACpE,KAAM,SAAU,KAAM,SAAU,KAAM,QAG9CrmB,EAAM,CACNglB,MAAOA,EACPG,OAAQA,EAERmB,cAAe,SAASf,EAAMgB,GAC1B,IAAI9rB,EAAI,EAER,IAAK8qB,EACD,OAAQ,EAGZ,KACIA,EAAOA,EAAKiB,iBAMND,GAA6B,GAAjBhB,EAAK/P,UACnB/a,IAIR,OAAOA,CACX,EAEAgsB,WAAY,SAASlB,GACjB,OAAOA,GAA2B,OAAnBA,EAAK9P,WAAoC,OAAd8P,EAAKxT,IACnD,EAEA2U,aAAc,SAAS3N,EAAQwM,GAC3B,IACI,OAAQvlB,EAAIymB,WAAW1N,KAAY/f,EAAE2U,SAASoL,EAAQ/Y,EAAIymB,WAAWlB,GAAQA,EAAKrE,WAAaqE,IAASA,EAAKrE,YAAcnI,EAC/H,CAAE,MAAO7X,GACL,OAAO,CACX,CACJ,EAEAsO,iBAAkB,SAAS8T,EAAMiC,GAC7B,OAAOvlB,EAAI0mB,aAAapD,EAAMiC,IAASjC,GAAQiC,CACnD,EAEAoB,oBAAqB,SAASrD,EAAMiC,GAChC,GAAIvlB,EAAI0mB,aAAapD,EAAMiC,GACvB,KAAOA,GAAQA,EAAKrE,YAAcoC,GAC9BiC,EAAOA,EAAKrE,WAIpB,OAAOqE,CACX,EAEArL,eAAgB,SAAS0M,GAUrB,IATA,IAAIvoB,EAAW,GAEXwoB,EAAWpoB,SAASqoB,mBAAmBF,EACvCG,WAAWC,cACX,WACI,OAAOD,WAAWE,aACtB,IAAG,GAEHC,EAAUL,EAASM,WAChBD,GACH7oB,EAASlG,KAAK+uB,EAAQzR,WACtByR,EAAUL,EAASM,WAEvB,OAAO9oB,CACX,EAEA+oB,cAAe,SAAS7B,GACpB,OAAOvlB,EAAIymB,WAAWlB,GAAQA,EAAK1sB,OAAS0sB,EAAK8B,WAAWxuB,MAChE,EAEAyuB,cAAe,SAAS/B,EAAMlQ,GAM1B,IALA,IAGIkS,EAHAC,EAAUjC,EAAKkC,WAAU,GACzBC,EAAmB,GACnBb,EAAWtB,EAAKI,YAGbkB,GAAiC,GAArBA,EAASrR,UAAiBqR,EAASpR,WAClDiS,GAAoBb,EAASpR,UAC7B8R,EAAOV,EACPA,EAAWA,EAASlB,YACpB3lB,EAAIqN,OAAOka,GAGfhC,EAAKoC,WAAWtS,EAAQkQ,EAAK1sB,QAC7B2uB,EAAQG,WAAW,EAAGtS,GACtBmS,EAAQ/R,WAAaiS,EACrB1nB,EAAIwf,YAAYgI,EAASjC,EAC7B,EAEAqC,WAAY,SAASrC,EAAMpJ,GACvB,IAAK,IAAI3Q,KAAO2Q,EAAY,CACxB,IAAI3S,EAAQ+b,EAAK/Z,GAMjB,GAJIA,GAAO6Y,IACP7a,EAAQ+b,EAAK/tB,EAAM+B,QAAQsuB,SAAWvD,EAAWC,IAGjC,iBAAT/a,GACP,IAAKxJ,EAAI4nB,WAAWpe,EAAO2S,EAAW3Q,IAClC,OAAO,OAER,GAAIhC,GAAS2S,EAAW3Q,GAC3B,OAAO,CAEf,CAEA,OAAO,CACX,EAEAsc,kBAAmB,SAASvC,GACxB,OAAOvlB,EAAI+nB,aAAaxC,EAAMT,IAAkBS,EAAKyC,cAAcld,IACvE,EAEAmd,aAAc,SAAStL,GACnB,IACIliB,EAAGkqB,EADHuD,EAAS,GAGb,IAAKztB,EAAI,EAAGkqB,EAAMhI,EAAM9jB,OAAQ4B,EAAIkqB,EAAKlqB,IAAK,CAC1C,IAAIuqB,EAAQhlB,EAAI+nB,aAAapL,EAAMliB,GAAIuF,EAAI8kB,eACvCE,GAAShsB,EAAE0B,QAAQsqB,EAAOkD,GAAU,GACpCA,EAAO/vB,KAAK6sB,EAEpB,CAEA,OAAOkD,CACX,EAEAC,mBAAoB,SAAS1pB,GACzB,OAAOA,EAAS2pB,aAAe3pB,EAAS4pB,YAC5C,EAEA/C,UAAWA,EACXR,cAAeA,EACfD,qBAAsBA,EACtBK,eAAgBA,EAChB3H,MAAOA,EACP6H,UAAWA,EACXkD,UAAW,CACPC,aAAc,EACdC,eAAgB,EAChBC,UAAW,EACXC,mBAAoB,EACpBC,sBAAuB,EACvBC,YAAa,EACbC,4BAA6B,EAC7BC,aAAc,EACdC,cAAe,EACfC,mBAAoB,GACpBC,uBAAwB,GACxBC,cAAe,IAGnBC,MAAO,SAASC,GACZ,IAAIC,EAAUtD,EAAIrb,KAAK0e,GAEvB,OAAKC,EAIE,IAAM9d,EAAI8d,EAAQ/wB,MAAM,IAAI,SAASgxB,GAExC,OADAA,EAAI5L,SAAS4L,EAAG,IAAIC,SAAS,KACpB1wB,OAAS,EAAIywB,EAAI,IAAMA,CACpC,IAAGjY,KAAK,IANG+X,CAOf,EAEA3e,OAAQ,SAASjB,EAAO3R,GACpB,IAAI2xB,GAAmB3xB,GAAWA,EAAQqQ,SAAYke,EAAWD,EACjE,OAAO3c,EAAM/L,QAAQ+rB,GAAgB,SAASC,GAC1C,IAAIC,EAAWD,EAAEE,WAAW,GACxBC,EAASvD,EAAYqD,GACzB,OAAOE,EAAS,IAAMA,EAAS,IAAMH,CACzC,GACJ,EACAI,MAAO,SAAStE,GACZ,OAAOA,GAA0B,IAAlBA,EAAK/P,UAAkB,cAAc9J,KAAK6Z,EAAK9P,UAClE,EACAqU,SAAU,SAASvgB,GACf,OAAQA,GAAQ,IAAI9L,QAAQuoB,EAAK,GACrC,EAEA+D,aAAc,SAASxE,GACfvlB,EAAI6pB,MAAMtE,IACVA,EAAKrE,WAAW8I,YAAYzE,EAEpC,EAEA0E,cAAe,SAAS1E,GACpB,IAAInV,EAAOmV,EAAKpJ,WAEhB,MAAyB,YAAlBoJ,EAAK3T,WAA4B5R,EAAI2Y,GAAG4M,EAAM,QAA4B,QAAlBA,EAAK3T,WAAuBxB,EAAK8Z,YAAc9Z,EAAK+Z,yBAA6BnqB,EAAI2Y,GAAG4M,EAAM,SAA8B,QAAlBA,EAAK3T,SAClL,EACAwY,UAAW,SAAS7E,GAChB,OAAOvlB,EAAI2Y,GAAG4M,EAAM,OAASvlB,EAAI2Y,GAAG4M,EAAM,KAC9C,EACA8E,iBAAkB,SAAS1N,GACvB,OAAO3jB,EAAEsxB,KAAK3N,GAAO,SAAS4N,GAC1B,IAAIhwB,EAAOyF,EAAIzF,KAAKgwB,GAEpB,MAAY,MAARhwB,KAEOyF,EAAIiqB,cAAcM,MAElBvqB,EAAIwqB,cAAcD,MAEA,GAAlBA,EAAM/U,WAAkB+H,EAAMhjB,IAASyF,EAAIyqB,UAAUF,KAKpE,GACJ,EAEAC,cAAe,SAASjF,GACpB,OAAOA,GAAyB,GAAjBA,EAAK/P,UAAiByQ,EAAgBva,KAAK6Z,EAAK9P,UACnE,EAEAgV,UAAW,SAASlF,GAChB,OAAwB,GAAjBA,EAAK/P,WAAkBxV,EAAIqqB,iBAAiB9E,EAAK8B,YAAYxuB,MACxE,EAEA0B,KAAM,SAASgrB,GACX,OAAOA,EAAK9Q,SAAS/W,aACzB,EAEAgtB,sBAAuB,SAASnF,GAC5B,OAAOvsB,EAAEsxB,KAAK/E,EAAK8B,YAAY,SAASkD,GACpC,OAAyB,GAAlBA,EAAM/U,WAAkBxV,EAAI2qB,aAAaJ,EACpD,GACJ,EAEAK,aAAc,SAASrF,GACnB,IAAIjL,EAAS,KAEb,GAAqB,GAAjBiL,EAAK/P,SACL,OAAO+P,EAGX,IAAK,IAAIgF,EAAQhF,EAAKsF,UAAWN,EAAOA,EAAQA,EAAM/D,gBAGlD,GAFAlM,EAASta,EAAI4qB,aAAaL,GAGtB,OAAOjQ,EAIf,OAAOA,CACX,EAEA3B,GAAI,SAAS4M,EAAM9Q,GACf,OAAO8Q,GAAQvlB,EAAIzF,KAAKgrB,IAAS9Q,CACrC,EAEAqW,SAAU,SAASvF,GACf,OAAOA,EAAK3T,WAAa6S,CAC7B,EAEAkG,aAAc,SAASpF,GACnB,OAAOM,EAAWna,KAAK6Z,EAAK9P,UAChC,EAEAsV,kBAAmB,SAASxF,GACxB,IAAIjL,GAAS,EAWb,OATA+K,EAA+B2F,OAAM,SAASzwB,GAC1C,OAAIyF,EAAI2Y,GAAG4M,EAAMhrB,KACb+f,GAAS,GACF,EAIf,IAEOA,CACX,EAEA2Q,qBAAsB,SAAS1F,GAE3B,IADA,IAAIgF,EAAQhF,EAAKE,WACV8E,GAASvqB,EAAI2qB,aAAaJ,IAC7BA,EAAQA,EAAM5E,YAGlB,OAAQ4E,CACZ,EAEAW,aAAc,SAAS3F,GACnB,OAAOO,EAAWpa,KAAK6Z,EAAK9P,UAChC,EAEAoH,gBAAiB,SAAS0I,GACtB,IAAMvlB,EAAIymB,WAAWlB,KAASvlB,EAAI2qB,aAAapF,GAC3C,OAAO,EAGX,GAAIO,EAAWpa,KAAK6Z,EAAK9P,WACrB,OAAO,EAGX,IAAI0V,EAAU,SAASjc,EAAIkc,GACvB,KAAOlc,EAAGkc,IAEN,GADAlc,EAAKA,EAAGkc,GACJprB,EAAIqqB,iBAAiB,CAACnb,IAAKrW,OAAS,EACpC,OAAOqW,CAGnB,EAEI6J,EAASwM,EAAKrE,WACdwE,EAAOyF,EAAQ5F,EAAM,mBACrBjQ,EAAO6V,EAAQ5F,EAAM,eAEzB,GAAIS,EAAIta,KAAK6Z,EAAK9P,WACd,SAAUiQ,IAAQpQ,GAGtB,GAAItc,EAAE+f,GAAQJ,GAAG,oCACb,OAAO,EAGX,GAAI3Y,EAAIqrB,QAAQtS,IAAW/Y,EAAI2Y,GAAGI,EAAQ,QAAS,CAC/C,IAAIuS,EAAc5F,GAAQ1lB,EAAIqrB,QAAQ3F,GAClC6F,EAAcjW,GAAQtV,EAAIqrB,QAAQ/V,GACtC,IAAMA,GAAQgW,IAAkB5F,GAAQ6F,GAAiBD,GAAeC,EACpE,OAAO,CAEf,CAEA,OAAO,CACX,EAEAF,QAAS,SAAS9F,GACd,OAAOP,EAAMhlB,EAAIzF,KAAKgrB,GAC1B,EAEAiG,cAAe,SAASjG,GACpB,OAAON,EAAYjlB,EAAIzF,KAAKgrB,GAChC,EAEAkG,QAAS,SAASlG,GACd,OAAOhI,EAAMvd,EAAIzF,KAAKgrB,GAC1B,EAEAmG,SAAU,SAASnG,GACf,OAAOJ,EAAOnlB,EAAIzF,KAAKgrB,GAC3B,EAEAoG,MAAO,SAASpG,GACZ,MAAyB,OAAlBvlB,EAAIzF,KAAKgrB,EACpB,EAEAqG,KAAM,SAASrG,GACX,MAAyB,MAAlBvlB,EAAIzF,KAAKgrB,EACpB,EAEAvT,KAAM,SAASuT,GACX,IAAIhrB,EAAOgrB,EAAOvlB,EAAIzF,KAAKgrB,GAAQ,GACnC,MAAe,MAARhrB,GAAwB,MAARA,GAAwB,MAARA,CAC3C,EAEAsxB,gBAAiB,SAASvf,GACtB,IAAIqD,EAAM3P,EAAImoB,mBAAmB7b,GAC7Buf,GAAmBlc,EAAIc,eAAiBd,GAAKlR,UAAYkR,EAAIqY,eAAiBrY,EAQlF,OALIkc,EAD8B,cAA9BA,EAAgBC,WACED,EAAgB/gB,KAEhB+gB,EAAgBE,kBAAoBF,EAAgBntB,eAI9E,EAEAstB,SAAU,SAASzG,EAAM0G,GACrB,IAIIzsB,EAAS0sB,EAAYC,EAAeC,EAJpC9f,EAAMiZ,EAAKyC,cAEXqE,EADMrsB,EAAImoB,mBAAmB7b,GACVggB,YACnBT,EAAkB7rB,EAAI6rB,gBAAgBvf,GAGtCtM,EAAIymB,WAAWlB,GACX0G,GACAG,EAASpsB,EAAI+gB,OAAOzU,EAAK,OAAQ,CAAE6N,UAAa,aAChDna,EAAIsQ,aAAa8b,EAAQ7G,GACzB/lB,EAAUxG,EAAEozB,IAEZ5sB,EAAUxG,EAAEusB,EAAKrE,YAGrB1hB,EAAUxG,EAAEusB,GAGhB2G,EAAa1sB,EAAQ6V,SAASpC,IAC9BkZ,EAAgB3sB,EAAQ,GAAG+sB,cAEvBN,GAAYE,IACZA,EAAgBzO,SAASle,EAAQgJ,IAAI,eAAgB,KACrC4X,KAAKoM,KAAK,IAAM9O,SAASle,EAAQgJ,IAAI,aAAc,MACnD,IAGhB4jB,GACApsB,EAAIqN,OAAO+e,GAGXD,EAAgBD,EAAaL,EAAgBnZ,UAAY2Z,IACzDR,EAAgBnZ,UAAYyZ,EAAgBD,EAAaG,EAEjE,EAEAI,iBAAkB,SAASngB,GACvBsZ,EAAqB5lB,EAAI6rB,gBAAgBvf,GAAKoG,SAClD,EAEA2C,OAAQ,SAAShC,EAAQqZ,GAIrB,IAHA,IAAIpS,EAAS,CAAErH,IAAKI,EAAOsZ,UAAW3Z,KAAMK,EAAOuZ,YAC/C7T,EAAS1F,EAAOqZ,aAEb3T,KAAY2T,GAAgB1sB,EAAI0mB,aAAagG,EAAc3T,KAC9DuB,EAAOrH,KAAO8F,EAAO4T,UACrBrS,EAAOtH,MAAQ+F,EAAO6T,WACtB7T,EAASA,EAAO2T,aAGpB,OAAOpS,CACX,EAEAuS,iBAAkB,SAASvgB,GACU,iBAAtBsZ,IACP5lB,EAAI6rB,gBAAgBvf,GAAKoG,UAAYkT,EACrCA,OAAqBkH,EAE7B,EAEAC,SAAU,SAAShU,EAAQiU,EAAY7nB,GACnC4T,EAAOzI,aAAa0c,EAAYjU,EAAOsO,WAAWliB,IAAa,KACnE,EAEAmL,aAAc,SAAS0c,EAAYC,GAC/B,OAAIA,EAAiB/L,WACV+L,EAAiB/L,WAAW5Q,aAAa0c,EAAYC,GAErDA,CAEf,EAEAzN,YAAa,SAASwN,EAAYC,GAC9B,OAAOA,EAAiB/L,WAAW5Q,aAAa0c,EAAYC,EAAiBtH,YACjF,EAEAtY,OAAQ,SAASkY,GACTA,EAAKrE,YACLqE,EAAKrE,WAAW8I,YAAYzE,EAEpC,EAEA2H,eAAgB,SAAS3H,GACrB,KAAOA,EAAKE,YACRF,EAAKyE,YAAYzE,EAAKE,WAE9B,EAEA0H,mBAAoB,SAAS5H,GAGzB,IAFA,IAAIrE,EAAaqE,EAAKrE,WAEfqE,EAAKI,aAA4C,GAA7BJ,EAAKI,YAAYnQ,UACxC0L,EAAW8I,YAAYzE,EAAKI,aAGhC,KAAOJ,EAAKiB,iBAAoD,GAAjCjB,EAAKiB,gBAAgBhR,UAChD0L,EAAW8I,YAAYzE,EAAKiB,gBAEpC,EAEA9X,KAAM,SAASqK,GACX,IAAK,IAAIte,EAAIse,EAAOsO,WAAWxuB,OAAS,EAAG4B,GAAK,EAAGA,IAAK,CACpD,IAAI8qB,EAAOxM,EAAOsO,WAAW5sB,GACzBuF,EAAIymB,WAAWlB,GACVvlB,EAAI8pB,SAASvE,EAAK9P,WAAW5c,QAC9BmH,EAAIqN,OAAOkY,GAERA,EAAK3T,WAAa6S,IACzBzkB,EAAI0O,KAAK6W,KAEHvlB,EAAIyrB,QAAQlG,IAAoC,IAA3BA,EAAK8B,WAAWxuB,QACtCmH,EAAIqrB,QAAQ9F,IAASvlB,EAAIirB,qBAAqB1F,KAC/CvlB,EAAIqN,OAAOkY,GAGvB,CAEA,OAAOxM,CACX,EAEA7Y,QAAS,SAASqlB,EAAM5qB,GAKpB,IAJoB,iBAATA,IACPA,EAAO,CAACA,IAGL4qB,GAAQ5qB,EAAKijB,QAAQ5d,EAAIzF,KAAKgrB,IAAS,GAC1CA,EAAOA,EAAKrE,WAGhB,OAAOqE,CACX,EAEA6H,UAAW,SAAS7H,EAAM8H,EAAWC,GACjC,KAAO/H,IAAS8H,EAAU9H,IAAO,CAC7B,GAAI+H,GAAiBA,EAAc/H,GAC/B,OAAO,KAEXA,EAAOA,EAAKrE,UAChB,CACA,OAAOqE,CACX,EAEA4F,QAAS,SAAS5F,EAAM6F,GACpB,GACI7F,EAAOA,EAAK6F,SACP7F,GAAyB,GAAjBA,EAAK/P,UAEtB,OAAO+P,CACX,EAEAjQ,KAAM,SAASiQ,GACX,OAAOvlB,EAAImrB,QAAQ5F,EAAM,cAC7B,EAEAG,KAAM,SAASH,GACX,OAAOvlB,EAAImrB,QAAQ5F,EAAM,kBAC7B,EAEAwC,aAAc,SAASxC,EAAM5qB,GACzB,GACI4qB,EAAOA,EAAKrE,iBACPqE,IAAUvlB,EAAIutB,OAAOhI,EAAM5qB,IAEpC,OAAO4qB,CACX,EAEAgI,OAAQ,SAAShI,EAAM5qB,GACnB,OAAO3B,EAAE0B,QAAQsF,EAAIzF,KAAKgrB,GAAO5qB,IAAS,CAC9C,EAEA6yB,UAAW,SAASP,EAAkBlT,EAAS0T,GAC3C,IAEIhzB,EAAGkqB,EAAKpqB,EAAMiP,EAAOkkB,EAFrBV,EAAahtB,EAAI+gB,OAAOkM,EAAiBjF,cAAejO,GACxDoC,EAAa8Q,EAAiB9Q,WAGlC,IAAKsR,EACD,IAAKhzB,EAAI,EAAGkqB,EAAMxI,EAAWtjB,OAAQ4B,EAAIkqB,EAAKlqB,KAC1CizB,EAAYvR,EAAW1hB,IACTkzB,YAEVpzB,EAAOmzB,EAAUjZ,SACjBjL,EAAQkkB,EAAUjY,UACdlb,GAAQiqB,EACRwI,EAAWpb,UAAYpI,EAChBjP,GAAQ6pB,EACf4I,EAAWtqB,MAAMkrB,QAAUX,EAAiBvqB,MAAMkrB,QAElDZ,EAAWnZ,aAAatZ,EAAMiP,IAM9C,KAAOyjB,EAAiBxH,YACpBuH,EAAWlZ,YAAYmZ,EAAiBxH,YAK5C,OAFAzlB,EAAIsQ,aAAa0c,EAAYC,GAC7BjtB,EAAIqN,OAAO4f,GACJD,CACX,EAEAa,eAAgB,SAAStI,GACrB,KAAOA,IAA0B,GAAjBA,EAAK/P,UAA0C,SAAzB+P,EAAKuI,kBACvCvI,EAAOA,EAAKrE,WAGhB,OAAOqE,CACX,EAEAzM,KAAM,SAASyM,EAAMjkB,GAGjB,OAFAtB,EAAIsQ,aAAahP,EAASikB,GAC1BjkB,EAAQwS,YAAYyR,GACbjkB,CACX,EAEAysB,OAAQ,SAASxI,GAEb,IADA,IAAIxM,EAASwM,EAAKrE,WACXqE,EAAKE,YACR1M,EAAOzI,aAAaiV,EAAKE,WAAYF,GAGzCxM,EAAOiR,YAAYzE,EACvB,EAEAjkB,QAAS,SAASikB,GACd,IAAIjkB,EAAUtB,EAAIotB,UAAU7H,GAAM,SAASrW,GACvC,OAAOA,EAAGgS,YAAclhB,EAAIqqB,iBAAiBnb,EAAGgS,WAAWmG,YAAYxuB,OAAS,CACpF,IAEA,OAAOG,EAAEsI,GAASqX,GAAG,uBAAoBmU,EAAYxrB,CACzD,EAEA0sB,uBAAwB,SAASzI,GAC7B,OAAOvsB,EAAEusB,GAAMxM,SAASJ,GAAG,iBAC/B,EAEAoI,OAAQ,SAAStiB,EAAUsb,EAASoC,GAChC,OAAOnc,EAAIoQ,KAAK3R,EAASmV,cAAcmG,GAAUoC,EACrD,EAEA8R,gBAAiB,SAASxvB,EAAUsb,EAASoC,GACzC,IAAIoJ,EAAOvlB,EAAIoQ,KAAK3R,EAASmV,cAAcmG,GAAUoC,GAErD,OADAoJ,EAAKpL,UAAY,SACVoL,CACX,EAEAnV,KAAM,SAAS5Q,EAAS2c,GAQpB,IAAK,IAAI/L,KAPT+L,EAAaxkB,EAAO,CAAC,EAAGwkB,KAENiI,KAASjI,IACvBnc,EAAI0C,MAAMlD,EAAS2c,EAAWzZ,cACvByZ,EAAWzZ,OAGLyZ,EACY,OAArBA,EAAW/L,IACX5Q,EAAQ0uB,gBAAgB9d,UACjB+L,EAAW/L,IACH,aAARA,IACP5Q,EAAQ4Q,GAAQ+L,EAAW/L,IAInC,OAAOzY,EAAO6H,EAAS2c,EAC3B,EAEAgS,gBAAiB,SAASC,EAAQ/a,EAAQgb,GACjCD,EAAOjS,WAAWtjB,QAIvBG,EAAEmW,KAAKif,EAAOjS,YAAY,WACJ,oBAAdnkB,KAAKuC,MAAgC8zB,GAAer2B,KAAKuC,OAAS6pB,GAClEprB,EAAEqa,GAAQjD,KAAKpY,KAAKuC,KAAMvC,KAAKwR,OAG/B6kB,GAAer2B,KAAKuC,OAAS6pB,GAC7BprB,EAAEmW,KAAKif,EAAO1rB,OAAO,WACjB2Q,EAAO3Q,MAAM1K,MAAQo2B,EAAO1rB,MAAM1K,KACtC,GAER,GACJ,EAEA0K,MAAO,SAAS6iB,EAAM/b,GAClBxQ,EAAEusB,GAAM/c,IAAIgB,GAAS,CAAC,EAC1B,EAEA8kB,QAAS,SAAS/I,EAAM/b,GACpB,IAAK,IAAIgC,KAAOhC,EACRgC,GAAO6Y,IACP7Y,EAAMhU,EAAM+B,QAAQsuB,SAAWvD,EAAWC,GAG9CgB,EAAK7iB,MAAM8I,GAAO,GAGK,KAAvB+Z,EAAK7iB,MAAMkrB,SACXrI,EAAK2I,gBAAgB9J,EAE7B,EAEAlS,YAAa,SAASpH,EAAMvQ,EAAM4hB,GAC9B,IACIzZ,EADAoG,EAAO9P,EAAEgH,EAAI+gB,OAAOjW,EAAKkd,cAAeztB,EAAM4hB,IAelD,OAZArR,EAAKgJ,YAAYhL,EAAK,IAEtBpG,EAAQ6I,EAAI2a,GAAe,SAAS1c,GAChC,OAAI/P,EAAQsZ,MAAiB,eAATvJ,GAA6C,OAAnBV,EAAKN,IAAIgB,GAC5C,kBAEAA,EAAQ,IAAMV,EAAKN,IAAIgB,EAEtC,IAAG6H,KAAK,KAERvI,EAAKuE,SAEE3K,CACX,EAEAuP,uBAAwB,SAASzS,GAC7B,IAAI+uB,EAAkB/uB,EAAQgJ,IAAI,qBAAuB,GAEzD,OAAI+lB,EAAgB3Q,QAAQ,mBAAqB,GAAyB,gBAApB2Q,EAC3CA,EACqC,SAArC/uB,EAAQ,GAAGua,QAAQrc,cACnB,SAEAsC,EAAIiS,uBAAuBzS,EAAQuZ,SAElD,EAEAyV,UAAW,SAASjJ,GAChB,IAAIhc,EAAOgc,EAAKpL,UAIhB,OAFA5Q,GADAA,EAAOA,EAAK9L,QAAQ,oBAAqB,KAC7BA,QAAQ,mBAAoB,GAG5C,EAEAia,YAAa,SAAS6N,EAAMkJ,GACxB,IAEIh0B,EAAGkqB,EAFH/S,EAAY,IAAM2T,EAAK3T,UAAY,IACnC8c,EAAUD,EAAWtR,MAAM,KAG/B,IAAK1iB,EAAI,EAAGkqB,EAAM+J,EAAQ71B,OAAQ4B,EAAIkqB,EAAKlqB,IACvCmX,EAAYA,EAAUnU,QAAQ,IAAMixB,EAAQj0B,GAAK,IAAK,MAG1DmX,EAAYpa,EAAMkX,KAAKkD,IAET/Y,OACV0sB,EAAK3T,UAAYA,EAEjB2T,EAAK2I,gBAAgB1J,EAE7B,EAEAmK,eAAgB,WACZ,IAIIl0B,EAAGm0B,EAAWrJ,EAAMvQ,EAAOwF,EAJ3BqU,EAAQC,UAAUj2B,OAClBk2B,EAAQ,GACRC,EAAgB7O,IAChB8O,EAAS,KAGb,IAAKJ,EACD,OAAO,KAGX,GAAa,GAATA,EACA,OAAOC,UAAU,GAGrB,IAAKr0B,EAAI,EAAGA,EAAIo0B,EAAOp0B,IAAK,CAGxB,IAFAm0B,EAAY,GACZrJ,EAAOuJ,UAAUr0B,GACV8qB,GACHqJ,EAAUz2B,KAAKotB,GACfA,EAAOA,EAAKrE,WAEhB6N,EAAM52B,KAAKy2B,EAAUM,WACrBF,EAAgB5O,KAAKH,IAAI+O,EAAeJ,EAAU/1B,OACtD,CAEA,GAAa,GAATg2B,EACA,OAAOE,EAAM,GAAG,GAGpB,IAAKt0B,EAAI,EAAGA,EAAIu0B,EAAev0B,IAAK,CAGhC,IAFAua,EAAQ+Z,EAAM,GAAGt0B,GAEZ+f,EAAI,EAAGA,EAAIqU,EAAOrU,IACnB,GAAIxF,GAAS+Z,EAAMvU,GAAG/f,GAClB,OAAOw0B,EAIfA,EAASja,CACb,CACA,OAAOia,CACX,EAEAE,wBAAyB,SAASxS,GAC9B,IAAIrC,GAGAA,EADgB,GAAhBqC,EAAM9jB,OACGmH,EAAI+nB,aAAapL,EAAM,GAAI,CAAC,KAAK,OAEjC3c,EAAI2uB,eAAeS,MAAM,KAAMzS,MAIxCrC,EAASta,EAAI+nB,aAAapL,EAAM,GAAI,CAAC,IAAK,QAAUA,EAAM,GAAGqL,cAAcld,MAG3E9K,EAAI0rB,SAASpR,KACbA,EAASta,EAAI8nB,kBAAkBxN,IAGnC,IAAI+U,EAAkB9jB,EAAIoR,EAAO3c,EAAI6tB,gBACjCyB,EAAmBtvB,EAAI2uB,eAAeU,GAAiB,GAM3D,OAJIr2B,EAAE2U,SAAS2M,EAAQgV,KACnBhV,EAASgV,GAGNhV,CACX,EAEAiV,gBAAiB,SAAShK,EAAMiK,GAC5B,IAAItvB,EACAuvB,EAAWzvB,EAAI6tB,eAAetI,GAclC,QAXIrlB,EADAF,EAAIutB,OAAOhI,EAAMiK,GACPjK,EAEAvlB,EAAI+nB,aAAaxC,EAAMiK,KAGtBC,GAAYz2B,EAAE2U,SAASzN,EAASuvB,KAEnCvvB,GAAWuvB,KADnBvvB,EAAUuvB,GAKPvvB,CACX,EAEAwvB,sBAAuB,SAASnK,EAAMiK,GAClC,IAAIC,EAAWzvB,EAAIuvB,gBAAgBhK,EAAMiK,GAEzC,GAAIC,GAAYzvB,EAAIutB,OAAOkC,EAAUD,KAAWx2B,EAAEy2B,GAAU9W,GAAG,aAC3D,OAAO8W,CAEf,EAEAxgB,OAAQ,SAAS8K,EAAS4C,EAAOgT,GAK7B,OAAO3vB,EAAI4c,SAASD,GAJL,SAAS4I,GACpB,OAAOvlB,EAAIzF,KAAKgrB,IAASxL,CAC7B,GAEqC4V,EACzC,EAEA/S,SAAU,SAASD,EAAO0Q,EAAWsC,GAMjC,IALA,IAGIC,EAHAn1B,EAAI,EACJkqB,EAAMhI,EAAM9jB,OACZyhB,EAAS,GAGN7f,EAAIkqB,EAAKlqB,MACZm1B,EAAQvC,EAAU1Q,EAAMliB,OACTk1B,IAAaC,GAASD,IACjCrV,EAAOniB,KAAKwkB,EAAMliB,IAI1B,OAAO6f,CACX,EAEAuV,qBAAsB,SAAStK,GAC3B,IAAIuK,EAAW92B,EAAEusB,GAAMhkB,KAAK,WACxB1I,EAASi3B,EAASj3B,OAClB4B,EAAI,EAER,GAAI5B,EACA,KAAO4B,EAAI5B,EAAQ4B,IACfuF,EAAI+vB,oBAAoBD,EAASr1B,SAGrCuF,EAAI+vB,oBAAoBxK,EAEhC,EAEAyK,oBAAqB,SAASzK,GAC1BvsB,EAAEusB,GAAMhkB,KAAK,uBAAuB8L,QACxC,EAEA0iB,oBAAqB,SAASxK,GAC1BvlB,EAAIgwB,oBAAoBzK,GAExB,IAEI0K,EAFApF,EAAYtF,EAAKsF,UACjBtwB,EAAOswB,GAAa7qB,EAAIzF,KAAKswB,KAG5BtwB,GACQ,MAARA,GAAwB,OAARA,GACR,MAARA,GAAuC,QAAvBswB,EAAUjZ,cAC3Bqe,EAAK1K,EAAKyC,cAAcpU,cAAc,OACnChC,UAAY,OACf2T,EAAKzR,YAAYmc,GAEzB,EAIAC,kBAAmB,SAASC,EAAOC,GAC/BpwB,EAAIqwB,eAAeF,EAAOC,EAC9B,EAEAE,mBAAoB,SAASH,EAAOC,GAChCp3B,EAAEm3B,GAAO5uB,KAAK,IAAM6uB,EAAU,KAAK5N,WAAW4N,EAClD,EAEAC,eAAgB,SAASF,EAAOC,GAG5B,IAFA,IAAIG,EAAoB,CAAC,EAEhBC,EAAW,EAAGA,EAAWL,EAAMvpB,KAAK/N,OAAQ23B,IAGjD,IAFA,IAAIC,EAAQN,EAAMvpB,KAAK4pB,GAAUC,MAC7BC,EAAW,EACNC,EAAY,EAAGA,EAAYF,EAAM53B,OAAQ83B,IAAaD,IAAY,CACvE,IAAIE,EAAOH,EAAME,GAMjB,GAJIC,EAAKC,QAAU,GACf74B,KAAK84B,YAAYF,EAAMJ,EAAUE,EAAUH,GAG3CA,EAAkBC,GAClB,KAAOD,EAAkBC,GAAUE,IAC/BA,IAIRE,EAAK/c,aAAauc,EAASM,GAEvBE,EAAKG,QAAU,IACfL,EAAWA,EAAWE,EAAKG,QAAU,EAE7C,CAER,EAEAD,YAAa,SAASF,EAAMJ,EAAUE,EAAUH,GAK5C,IAJA,IAEIjyB,EAFAuyB,EAAUD,EAAKC,QACfE,EAAUH,EAAKG,QAGVC,EAAK,EAAGA,EAAKD,EAASC,IAAM,CACjC1yB,EAAQoyB,EAAWM,EAEnB,IAAK,IAAIC,EAAKT,EAAW,EAAGS,EAAKT,EAAWK,EAASI,IAAM,CAOvD,GALKV,EAAkBU,KACnBV,EAAkBU,GAAM,CAAC,EACzBV,EAAkBU,GAAIp4B,OAAS,GAG/B03B,EAAkBC,GAClB,KAAOD,EAAkBC,GAAUlyB,IAC/BA,IAIRiyB,EAAkBU,GAAI3yB,IAAS,EAC/BiyB,EAAkBU,GAAIp4B,QAC1B,CACJ,CAEJ,EAEAq4B,iBAAkB,SAASf,GACvB,IAMIgB,EAAW12B,EANXmF,EAAO5H,KACPo5B,EAAoB,EACpBC,EAAYlB,EAAMvpB,KAClB0qB,EAAoBD,EAAUx4B,OAC9B04B,EAAc,GACdC,EAAc,GAGlB,GAAIrB,EAAMsB,MAENL,GADAD,EAAYhB,EAAMsB,MAAM7qB,MACM/N,YAI9B,IAFAu4B,EAAoBxxB,EAAK8xB,uBAAuBvB,GAChDgB,EAAY,GACP12B,EAAI,EAAGA,EAAI22B,EAAmB32B,IAC/B02B,EAAUh5B,KAAKk5B,EAAU52B,IAGjC,IAAKA,EAAI,EAAGA,EAAI22B,EAAmB32B,IAC/B82B,EAAYp5B,KAAK,IAErB,IAAKsC,EAAI,EAAGA,EAAI62B,EAAmB72B,IAC/B+2B,EAAYr5B,KAAK,IAGrByH,EAAK+xB,uBAAuBJ,EAAaJ,GACzCvxB,EAAKgyB,oBAAoBL,EAAaC,EAAaJ,EAAmBC,GACtEzxB,EAAKiyB,WAAWN,EAAaC,EAAaJ,EAAmBC,EACjE,EAEAM,uBAAwB,SAASJ,EAAaJ,GAC1C,IAESV,EAAOG,EAAMkB,EAAKxsB,EAAIysB,EAASC,EAASv3B,EAAG+f,EAAGyX,EAAGC,EAFtDC,GAAY,IAAIC,MAAOC,UACvBjB,EAAoBD,EAAYA,EAAUt4B,OAAS,EAGvD,IAAK4B,EAAI,EAAGA,EAAI22B,EAAmB32B,IAK/B,IAHAg2B,EADMU,EAAU12B,GACJg2B,MACZqB,EAAM,EAEDtX,EAAI,EAAGA,EAAIiW,EAAM53B,OAAQ2hB,IAAK,CAO/B,IALAlV,EAAK,QAAU7K,EAAI+f,KAAO2X,GAD1BvB,EAAOH,EAAMjW,IAER3G,aAAa,KAAMvO,GACxBysB,EAAUnB,EAAK7lB,aAAa,YAAc,EAC1CinB,EAAUpB,EAAK7lB,aAAa,YAAc,EAEnCwmB,EAAY92B,GAAG+f,EAAIsX,IACtBA,GAAO,EAGX,IAAKG,EAAI,EAAGA,EAAID,EAASC,IACrB,IAAKC,EAAI,EAAGA,EAAIH,EAASG,IACrBX,EAAY92B,EAAIw3B,GAAGzX,EAAIsX,EAAMI,GAAK5sB,CAG9C,CAER,EAEAssB,oBAAqB,SAASL,EAAaC,EAAaJ,EAAmBC,GACvE,IAGIiB,EAAK7B,EAAOG,EAAMkB,EAAKxsB,EAAIysB,EAASC,EAASv3B,EAAG+f,EAAGyX,EAAGC,EAAGxB,EAAU6B,EAFnEJ,GAAY,IAAIC,MAAOC,UACvBf,EAAoBD,EAAUx4B,OAG9B25B,EAAe,SAASF,GACxBC,EAAQp6B,KAAKm6B,EAAI5B,GACrB,EAEA,IAAKj2B,EAAI22B,EAAmB32B,EAAI62B,EAAmB72B,IAK/C,IAJA63B,EAAMjB,EAAU52B,GAChBg2B,EAAQz3B,EAAEs5B,EAAI7B,OAAOxhB,OAAO,MAC5B6iB,EAAM,EAEDtX,EAAI,EAAGA,EAAIiW,EAAM53B,OAAQ2hB,IAAK,CAO/B,IALAlV,EAAK,QAAU7K,EAAI+f,KAAO2X,GAD1BvB,EAAOH,EAAMjW,IAER3G,aAAa,KAAMvO,GACxBysB,EAAUnB,EAAK7lB,aAAa,YAAc,EAC1CinB,EAAUpB,EAAK7lB,aAAa,YAAc,EAEnCymB,EAAY/2B,GAAG+f,EAAIsX,IACtBA,GAAO,EAGX,IAAKG,EAAI,EAAGA,EAAID,EAASC,IACrB,IAAKC,EAAI,EAAGA,EAAIH,EAASG,IACrBV,EAAY/2B,EAAIw3B,GAAGzX,EAAIsX,EAAMI,GAAK5sB,EAI1CorB,EAAWE,EAAK7lB,aAAa,aAC7BwnB,EAAU,GACVhB,EAAYkB,QAAQD,GACpBD,EAAUA,EAAQtjB,OAlCfjX,KAkC2B06B,aAC9B9B,EAAK/c,aAAa,UAAW0e,EAAQlhB,KAAK,KAAK3C,OACnD,CAER,EAEAmjB,WAAY,SAASN,EAAaC,EAAaJ,EAAmBC,GAC9D,IAEIiB,EAAK7B,EAAOG,EAAMn2B,EAAG+f,EAAGkW,EAAU6B,EADlCjB,EAAoBD,EAAUx4B,OAG9B25B,EAAe,SAASF,GACxBC,EAAQp6B,KAAKm6B,EAAI5B,GACrB,EAEA,IAAKj2B,EAAI22B,EAAmB32B,EAAI62B,EAAmB72B,IAI/C,IAHA63B,EAAMjB,EAAU52B,GAChBg2B,EAAQz3B,EAAEs5B,EAAI7B,OAAOxhB,OAAO,MAEvBuL,EAAI,EAAGA,EAAIiW,EAAM53B,OAAQ2hB,IAC1BoW,EAAOH,EAAMjW,GACbkW,EAAWE,EAAK7lB,aAAa,aAC7BwnB,EAAUf,EAAY/2B,GAAGnC,QAEzBi5B,EAAYkB,QAAQD,GACpBD,EAAUA,EAAQtjB,OAlBfjX,KAkB2B06B,aAC9B9B,EAAK/c,aAAa,UAAW0e,EAAQlhB,KAAK,KAAK3C,OAG3D,EAEAikB,oBAAqB,SAASxC,GAC1B,IAEIS,EAAMn2B,EAAGm4B,EAFTnC,EAAQz3B,EAAEm3B,GAAO5uB,KAAK,UACtBsxB,EAAe,EAGnB,IAAKp4B,EAAI,EAAGA,EAAIg2B,EAAM53B,OAAQ4B,IAC1Bm2B,EAAOH,EAAMh2B,IACbm4B,EAAeE,OAAOlC,EAAK7lB,aAAa,cAAgB,GACrC8nB,IACfA,EAAeD,GAIvB,OAAOC,CACX,EAEAE,0BAA2B,SAAS5C,EAAO6C,GACvC,IAEIJ,EAAcN,EAAK73B,EAAG+f,EAAGoW,EAFzBhqB,EAAOupB,EAAMvpB,KACbisB,EAAe,EAGnB,IAAKp4B,EAAIu4B,EAAoBv4B,EAAImM,EAAK/N,OAAQ4B,IAG1C,IAFA63B,EAAM1rB,EAAKnM,GAEN+f,EAAI,EAAGA,EAAI8X,EAAI7B,MAAM53B,OAAQ2hB,IAC9BoW,EAAO0B,EAAI7B,MAAMjW,GAEbxiB,KAAK2gB,GAAGiY,EAAM,QACdgC,EAAeE,OAAOlC,EAAK7lB,aAAa,cAAgB,GACrC8nB,IACfA,EAAeD,GAM/B,OAAOC,CACX,EAEAnB,uBAAwB,SAASvB,GAC7B,IAGI3V,EAAG8X,EAAK1B,EAAM/3B,EAHd+N,EAAOupB,EAAMvpB,KAEbqsB,EADQ9C,EAAMsB,OACItB,EAAMsB,MAAM7qB,KAAOupB,EAAMsB,MAAM7qB,KAAK/N,OAAS,EAGnE,GAAe,IAAXo6B,EAIA,IAFAp6B,GADAy5B,EAAM1rB,EAAK,IACE6pB,OAAS6B,EAAI7B,MAAM53B,OAEzBy5B,GAAOz5B,GAAUb,KAAK2gB,GAAG2Z,EAAI7B,MAAM,GAAI,OAAO,CACjD,IAAKjW,EAAI,EAAGA,EAAI3hB,EAAQ2hB,IACpBoW,EAAO0B,EAAMA,EAAI7B,MAAMjW,GAAK,KAEvBxiB,KAAK2gB,GAAGiY,EAAM,QACf0B,EAAM,MAIVA,IACAW,GAAU,EAEVp6B,GADAy5B,EAAMt6B,KAAKsd,KAAKgd,KACAA,EAAI7B,OAAS6B,EAAI7B,MAAM53B,OAE/C,CAGJ,OAAOo6B,CACX,EAIAP,YAAa,SAASlpB,EAAOlL,EAAO40B,GAChC,OAAOA,EAAKtV,QAAQpU,KAAWlL,CACnC,GAGJ9G,EAAM6B,GAAGyG,OAAOE,IAAMA,CAErB,CApxCD,CAoxCG9G,OAAO1B,MAAM2sB,QAEhB,SAAUnrB,EAAGC,GAGb,IAAIzB,EAAQ0B,OAAO1B,MACfsG,EAAStG,EAAM6B,GAAGyG,OAClBC,EAAMjC,EAAOkC,IACbrI,EAASqB,EAAErB,OAEXw7B,EAAmB,uDAAuDhW,MAAM,KAChFiW,EAAU,KACVC,EAAO,aACPC,EAAU,sBACVC,EAAW,uBACXC,EAAiB,qGACjBC,EAAa,eACbC,EAAa,cACbC,EAAY,gDACZ1D,EAAK,oBACL2D,EAAU,mCAEVC,EAAMp1B,SAASmV,cAAc,OACjCigB,EAAI1Z,UAAY,QAChB,IAAI2Z,EAAwD,IAA5BD,EAAIpO,WAAWjQ,SAC/Cqe,EAAM,KACN,IAAIE,EAAav8B,EAAMu8B,WAInBjmB,EAAa,CACbkmB,eAAgB,SAAShnB,GACrB,OAAQA,GAAQ,IACXvP,QAAQ,yBAA0B,4BAClCA,QAAQ,yBAA0B,kBAClCA,QAAQ,kBAAkB,SAASmyB,GAChC,OAAOA,EAAMnyB,QAAQk2B,EAAW,GACpC,IACCl2B,QAAQ,kCAAmC,MAC3CA,QAAQ,wBAAyBwyB,EAAK,OACtCxyB,QAAQ,yBAA0B,MAClCA,QAAQ,2BAA4B,QAAUwyB,EACvD,EAEAgE,sBAAuB,SAASnpB,GAM5B,IALA,IAAIopB,EAAYp2B,EAAOyV,WAAW2gB,UAC9B1J,EAAgBzqB,EAAIyqB,cACpBxV,EAAQlK,EAAK2a,WACbxR,EAAOnJ,EAAK+f,UAETL,EAAcxV,IACjBA,EAAQA,EAAM2Q,YAGlB,KAAO6E,EAAcvW,IACjBA,EAAOA,EAAKuS,gBAGZxR,GAASkf,EAAUlf,IACnBhc,EAAE46B,GAASO,UAAUrpB,GAGrBmJ,GAAQigB,EAAUjgB,IAClBjb,EAAE46B,GAASzgB,SAASrI,EAE5B,EAEAspB,mBAAoB,SAAStpB,GAEzB9R,EAAE8R,GAAMvJ,KAAK,QAAQ4N,MAAK,WACtB,IAAIklB,EAAIr7B,EAAEhB,MACV,GAAI,SAAS0T,KAAK2oB,EAAE9qB,UAAY8qB,EAAE9yB,KAAK,aAAa1I,OAAQ,CAExD,IADA,IAAI0sB,EAAOvtB,KACJutB,EAAK+O,SAAS,IAAmC,GAA7B/O,EAAK+O,SAAS,GAAG9e,UACxC+P,EAAOA,EAAK+O,SAAS,GAGJ,GAAjB/O,EAAK/P,UAAkBzV,EAAIwd,MAAMxd,EAAIxF,KAAKgrB,MACtCxlB,EAAI4Y,GAAG4M,EAAM,MACbA,EAAKpL,UAAY3iB,EAAM6B,GAAGyG,OAAO4iB,sBAGjC6C,EAAKpL,UAAY3iB,EAAM6B,GAAGyG,OAAO2iB,oBAG7C,CACJ,GACJ,EAEA8R,sBAAuB,SAASzpB,GAE5B9R,EAAE,qBAAsB8R,GAAMuC,QAClC,EAEAmnB,mBAAoB,SAASlR,GAEzB,IAA2C7oB,EAAGg6B,EAAIC,EAA9CC,EAAMrR,EAAKzS,qBAAqB,MAEpC,IAAKpW,EAAI,EAAGA,EAAIk6B,EAAI97B,OAAQ4B,IAExBi6B,GADAD,EAAKE,EAAIl6B,IACUsQ,aAAa,SAEhC0pB,EAAG5gB,aAAa,QAAS,GAErB6gB,EACAD,EAAG5gB,aAAa,QAAS6gB,GAEzBD,EAAGvG,gBAAgBwG,EAG/B,EAEAE,wBAAyB,SAAStR,GAC9BtqB,EAAEsqB,GAAM/hB,KAAK,KAAK4N,MAAK,WACnB,IACIue,EAAWjzB,EAAGy3B,EAAG33B,EADjB4hB,EAAankB,KAAKmkB,WAElB0Y,EAAqB,GAEzB,IAAKp6B,EAAI,EAAGy3B,EAAI/V,EAAWtjB,OAAQ4B,EAAIy3B,EAAGz3B,IAEtCF,GADAmzB,EAAYvR,EAAW1hB,IACNga,SAEbiZ,EAAUC,WAAa,OAAOjiB,KAAKnR,KACnCvC,KAAK6b,aAAa,YAActZ,EAAMmzB,EAAUlkB,OAChDqrB,EAAmB18B,KAAKoC,IAIhC,IAAKE,EAAI,EAAGy3B,EAAI2C,EAAmBh8B,OAAQ4B,EAAIy3B,EAAGz3B,IAC9CzC,KAAKk2B,gBAAgB2G,EAAmBp6B,GAEhD,GACJ,EAEAoU,UAAW,SAAS7B,EAAMsW,EAAMzrB,GAC5B,IACIkb,EADUvb,EAAM+B,QAAQE,QACTsZ,KACfsK,EAAIxlB,GAAW,CAAC,EAChB4T,EAAa4R,EAAE5R,WA+BnB,OA7BAuB,EAAOc,EAAWkmB,eAAehnB,GAE7B+mB,EAAW1W,EAAErV,UACbgF,EAAOqQ,EAAErV,OAAOgF,IAASA,GAE7BsW,EAAKnJ,UAAYnN,EAEbvB,GACAA,EAAWqpB,YAAYxR,GAGvBvQ,IAEAhT,EAAIulB,UAAUhC,GAEdxV,EAAW0mB,mBAAmBlR,IAGlCxV,EAAW8mB,wBAAwBtR,GAEnCxV,EAAWsmB,mBAAmB9Q,GAE9BxV,EAAWymB,sBAAsBjR,GAEjCxV,EAAWmmB,sBAAsB3Q,GAGjCtqB,EAAE,QAASsqB,GAAMnT,SAAS,WAEnBmT,CACX,EAEAvV,WAAY,SAASuV,EAAMzrB,GACvB,IAAIyiB,EAAS,GACT7O,EAAa5T,GAAWA,EAAQ4T,WAEpC,SAASspB,EAAe5Y,GACpB,OAAOnjB,EAAEsxB,KAAKnO,GAAY,SAAS/L,GAC/B,MAAoB,SAAbA,EAAK7V,IAChB,GACJ,CAEA,SAASy6B,EAASzP,EAAM5T,GACpB2I,EAAOniB,KAAK,IAAMwZ,GAClBvB,EAAKmV,GACLjL,EAAOniB,KAAK,IAChB,CAEA,IAAI88B,EAAS,CACTvlB,OAAQ,CACJgQ,MAAO,SAAS6F,GAAQyP,EAASzP,EAAM,SAAW,EAClD2P,IAAK,WAAa5a,EAAOniB,KAAK,YAAc,GAEhD,WAAY,CACRunB,MAAO,SAAS6F,GAAQyP,EAASzP,EAAM,SAAW,EAClD2P,IAAK,WAAa5a,EAAOniB,KAAK,aAAc,EAC5Cg9B,cAAc,GAElBrsB,KAAM,CACFssB,aAAa,EACbjtB,UAAU,EACVuX,MAAO,SAAS6F,GACZ,IAAI7iB,EAAQ6iB,EAAK7iB,MAGb2yB,EAAqBN,EADRO,EAAoB/P,IAGjC8P,EAAmBx8B,SACnByhB,EAAOniB,KAAK,SAAUiY,EAAKmV,EAAM8P,GAAqB/a,EAAOniB,KAAK,MAG1C,aAAxBuK,EAAM6yB,gBACNjb,EAAOniB,KAAK,OAGhB,IAAIq9B,EAAO,GASX,GARI9yB,EAAM0mB,OACNoM,EAAKr9B,KAAK,UAAY4H,EAAIopB,MAAMzmB,EAAM0mB,OAAS,KAG/C1mB,EAAM+yB,YACND,EAAKr9B,KAAK,SAAWuK,EAAM+yB,WAAa,KAGxC/yB,EAAMJ,SAAU,CAChB,IAAIozB,EAAO18B,EAAE0B,QAAQgI,EAAMJ,SAAU6wB,GACrCqC,EAAKr9B,KAAK,SAAWu9B,EAAO,IAChC,CAGA,IAAIC,EAAe,GACfC,EAAuB,CAAC,kBAAmB,QAAS,QAExD,IAAK,IAAIn7B,EAAI,EAAGA,EAAIiI,EAAM7J,OAAQ4B,IAAK,CACnC,IAAIyX,EAAcxP,EAAMjI,GAEpBm7B,EAAqB3mB,QAAO4mB,GAAQ3jB,EAAY4jB,WAAWD,KAAOh9B,QAAU,GAC5E88B,EAAax9B,KAAK,GAAG+Z,MAAgBxP,EAAMwP,KAEnD,CAEIyjB,EAAa98B,QACb28B,EAAKr9B,KAAK,UAAYw9B,EAAatkB,KAAK,KAAO,KAG/CmkB,EAAK38B,QACLyhB,EAAOniB,KAAK,SAAWq9B,EAAKnkB,KAAK,KAAO,IAEhD,EACA6jB,IAAK,SAAS3P,GACV,IAAI7iB,EAAQ6iB,EAAK7iB,OAEbA,EAAM0mB,OAAS1mB,EAAM+yB,YAAc/yB,EAAMJ,WACzCgY,EAAOniB,KAAK,WAGY,aAAxBuK,EAAM6yB,gBACNjb,EAAOniB,KAAK,QAGZ48B,EAAeO,EAAoB/P,IAAO1sB,QAC1CyhB,EAAOniB,KAAK,UAEpB,GAEJ49B,OAAQ,CACJ5tB,UAAU,EACVuX,MAAO,SAAS6F,GAAQyP,EAASzP,EAAM,IAAM,EAC7C2P,IAAK,WAAa5a,EAAOniB,KAAK,OAAS,GAE3C69B,GAAI,CACA7tB,UAAU,EACVuX,MAAO,SAAS6F,GAAQyP,EAASzP,EAAM,IAAM,EAC7C2P,IAAK,WAAa5a,EAAOniB,KAAK,OAAS,GAE3C89B,EAAG,CACC9tB,UAAU,EACVuX,MAAO,SAAS6F,GAAQyP,EAASzP,EAAM,SAAW,EAClD2P,IAAK,WAAa5a,EAAOniB,KAAK,YAAc,GAEhDsC,EAAG,CACC0N,UAAU,EACVuX,MAAO,SAAS6F,GAAQyP,EAASzP,EAAM,KAAO,EAC9C2P,IAAK,WAAa5a,EAAOniB,KAAK,QAAU,GAE5C+9B,EAAG,CACC/tB,UAAU,EACVuX,MAAO,SAAS6F,GACZjL,EAAOniB,KAAK,SAEZ,IAAIgkB,EAAamZ,EAAoB/P,GACjC7iB,EAAQ1J,EAAEmjB,GAAYlN,QAAO,SAASxU,EAAG07B,GAAQ,MAAoB,SAAbA,EAAK57B,IAAiB,IAAG,GACjF67B,EAAW,CAAE3hB,SAAU,QAASjL,MAAO,8BAEvC9G,IACA0zB,EAAS5sB,MAAQ9G,EAAM8G,MAClB,mBAAmBkC,KAAK0qB,EAAS5sB,SAClC4sB,EAAS5sB,MAAQ,6BAA+B4sB,EAAS5sB,OAE7D2S,EAAWka,OAAOr9B,EAAE0B,QAAQgI,EAAOyZ,GAAa,IAEpDA,EAAWhkB,KAAKi+B,GAEhBhmB,EAAKmV,EAAMpJ,GACX7B,EAAOniB,KAAK,IAChB,EACA+8B,IAAK,WAAa5a,EAAOniB,KAAK,UAAY,GAE9Cq9B,KAAM,CACFJ,aAAa,EACbjtB,UAAU,EACVuX,MAAO,SAAS6F,GACZjL,EAAOniB,KAAK,iBAEZ,IAAIixB,EAAQ7D,EAAKxa,aAAa,SAC1B2qB,EAAOvC,EAAiB5N,EAAKxa,aAAa,SAC1CurB,EAAO/Q,EAAKxa,aAAa,QAEzBqe,IACA9O,EAAOniB,KAAK,UACZmiB,EAAOniB,KAAK4H,EAAIopB,MAAMC,IACtB9O,EAAOniB,KAAK,MAGZm+B,IACAhc,EAAOniB,KAAK,gBACZmiB,EAAOniB,KAAKm+B,GACZhc,EAAOniB,KAAK,MAGZu9B,IACApb,EAAOniB,KAAK,cACZmiB,EAAOniB,KAAKu9B,GACZpb,EAAOniB,KAAK,MAGhBmiB,EAAOniB,KAAK,KAChB,EACA+8B,IAAK,WACD5a,EAAOniB,KAAK,UAChB,IAiDR,SAASo+B,EAAU3I,GACf,IACInzB,EADA+7B,EAtCR,SAAuB5I,GACnB,IAEIgC,EACA6G,EAAUjtB,EAHVkF,EAAOlX,EAAMkX,KACblG,EAAMkG,EAAKkf,GAGX4I,EAAa,GAIjB,IAFAhD,EAAekD,UAAY,EAGvB9G,EAAQ4D,EAAe9oB,KAAKlC,IAM5BiuB,EAAW/nB,EAAKkhB,EAAM,GAAGlyB,eACzB8L,EAAQkF,EAAKkhB,EAAM,IAEH,oBAAZ6G,GAA8C,gBAAZA,IAIlCA,EAAS7Y,QAAQ,UAAY,EAC7BpU,EAAQzJ,EAAIopB,MAAM3f,GACXitB,EAAS7Y,QAAQ,SAAW,EACnCpU,EAAQA,EAAM/L,QAAQ21B,EAAS,KACxB,WAAW1nB,KAAKlC,KACvBA,EAAQA,EAAM/L,QAAQ21B,EAAS,KAGnCoD,EAAWr+B,KAAK,CAAEs+B,SAAUA,EAAUjtB,MAAOA,KAGjD,OAAOgtB,CACX,CAGqBG,CAAc/I,GAG/B,IAAKnzB,EAAI,EAAGA,EAAI+7B,EAAW39B,OAAQ4B,IAC/B6f,EAAOniB,KAAKq+B,EAAW/7B,GAAGg8B,UAC1Bnc,EAAOniB,KAAK,KACZmiB,EAAOniB,KAAKq+B,EAAW/7B,GAAG+O,OAC1B8Q,EAAOniB,KAAK,IAEpB,CAEA,SAASm9B,EAAoB/P,GACzB,IAEImI,EAAWjzB,EAAGy3B,EACd33B,EAAMiP,EAAOmkB,EAHbrT,EAAS,GACT6B,EAAaoJ,EAAKpJ,WAItB,IAAK1hB,EAAI,EAAGy3B,EAAI/V,EAAWtjB,OAAQ4B,EAAIy3B,EAAGz3B,IAGtCF,GAFAmzB,EAAYvR,EAAW1hB,IAENga,SACjBjL,EAAQkkB,EAAUlkB,MAClBmkB,EAAYD,EAAUC,UAGV,SAARpzB,GAAmB,UAAWgrB,GAAQA,EAAK/b,OAE5B,QAARjP,GAA2B,QAATiP,EADzBmkB,GAAY,EAGG,SAARpzB,GAAoBiP,EAEpBiqB,EAAW/nB,KAAKnR,IAER,YAARA,GAEQ,WAARA,GAEQ,SAARA,GAAmBwF,EAAI4Y,GAAG4M,EAAM,OAExB,SAARhrB,GAAmBwF,EAAI4Y,GAAG4M,EAAM,OAAkB,KAAT/b,GAEzCjP,EAAKqjB,QAAQ,SAAW,EAT/B+P,GAAY,EAWL+F,EAAWhoB,KAAKnR,GACvBozB,IAAc91B,EAAQgH,QACP,aAARtE,GAAgC,aAATiP,IAAyBzJ,EAAI4Y,GAAG4M,EAAM,OAASxlB,EAAI4Y,GAAG4M,EAAM,SAC1FoI,GAAY,GAhBZA,GAAY,EAmBZA,GACArT,EAAOniB,KAAKu1B,GAIpB,OAAOpT,CACX,CAEA,SAASlK,EAAKmV,EAAMpJ,GAChB,IAAI1hB,EAAGy3B,EAAGxE,EAAWnzB,EAAMiP,EAI3B,GAFA2S,EAAaA,GAAcmZ,EAAoB/P,GAE3CxlB,EAAI4Y,GAAG4M,EAAM,OAAQ,CACrB,IAAI3gB,EAAQ2gB,EAAK7iB,MAAMkC,MACnBC,EAAS0gB,EAAK7iB,MAAMmC,OACpB+xB,EAAQ59B,EAAEusB,GAEV3gB,GAAS0uB,EAAQ5nB,KAAK9G,KACtBgyB,EAAMxmB,KAAK,QAASsN,SAAS9Y,EAAO,KACpC7E,EAAIuuB,QAAQ/I,EAAM,CAAE3gB,MAAO3L,KAG3B4L,GAAUyuB,EAAQ5nB,KAAK7G,KACvB+xB,EAAMxmB,KAAK,SAAUsN,SAAS7Y,EAAQ,KACtC9E,EAAIuuB,QAAQ/I,EAAM,CAAE1gB,OAAQ5L,IAEpC,CAEA,GAAKkjB,EAAWtjB,OAUhB,IAAK4B,EAAI,EAAGy3B,EAAI/V,EAAWtjB,OAAQ4B,EAAIy3B,EAAGz3B,IAEtCF,GADAmzB,EAAYvR,EAAW1hB,IACNga,SACjBjL,EAAQkkB,EAAUlkB,MAEN,SAARjP,GAA4B,WAATiP,IAIvBjP,EAAOA,EAAKkD,QAAQi2B,EAAY,IAEhCpZ,EAAOniB,KAAK,KACZmiB,EAAOniB,KAAKoC,GACZ+f,EAAOniB,KAAK,MAEA,SAARoC,EACAg8B,EAAU/sB,GAAS+b,EAAK7iB,MAAMkrB,SACf,OAARrzB,GAAyB,QAARA,EACxB+f,EAAOniB,KAAKX,EAAMq/B,WAAWtR,EAAKxa,aAAaxQ,EAAM,KAErD+f,EAAOniB,KAAK4H,EAAIqlB,UAAU7qB,GAAQA,EAAOiP,GAG7C8Q,EAAOniB,KAAK,KAEpB,CAEA,SAASm8B,EAAS/O,EAAMuR,EAAM3B,GAC1B,IAAK,IAAI4B,EAAYxR,EAAKE,WAAYsR,EAAWA,EAAYA,EAAUpR,YACnE4E,EAAMwM,EAAWD,EAAM3B,EAE/B,CAEA,SAAS5rB,EAAKgc,GACV,OAAOA,EAAK9P,UAAUhY,QAAQ,UAAW,GAC7C,CAsBA,SAAS8sB,EAAMhF,EAAMuR,EAAM3B,GACvB,IACIpb,EAASid,EACTje,EAAQvP,EAAOytB,EAAUC,EAFzB1hB,EAAW+P,EAAK/P,SAIpB,GAAI/J,GAAc3N,EAAOyV,WAAW2gB,UAAU3O,GAC1CjL,EAAOniB,KAAKsT,EAAW0rB,UAAU5R,SAC9B,GAAgB,GAAZ/P,EAAe,CAItB,GAHAuE,EAAUha,EAAIxF,KAAKgrB,IACnB2R,EAASl+B,EAAEusB,IAEA9N,SAAS,oCAAsCyf,EAAOzf,SAAS,mCAAqCyf,EAAOzf,SAAS,+BAC3H,OAGJ,IAAKsC,GAAWha,EAAIkqB,cAAc1E,GAC9B,OAGJ,IAAK1tB,EAAQgH,UAAuB,UAAXkb,GAAkC,YAAXA,GAC5C,OAKJ,GAFAid,EAAS/B,EAAOlb,GAEJ,CACR,GAAIid,EAAO5B,aACPv9B,EAAQuQ,cA2ExB,SAAwBmd,GACpB,OAAkC,IAA3BA,EAAKpJ,WAAWtjB,MAC3B,CA5EgBu+B,CAAe7R,GAEf,YADI+O,EAAS/O,GAAM,EAAOyR,EAAO7B,cAIrC,QAA8B,IAAnB6B,EAAO7uB,UACbtQ,EAAQsQ,SAAW6uB,EAAO7uB,SAI3B,OAHA6uB,EAAOtX,MAAM6F,GACb+O,EAAS/O,GAAM,EAAOyR,EAAO7B,mBAC7B6B,EAAO9B,IAAI3P,EAGnB,CAEAjL,EAAOniB,KAAK,KACZmiB,EAAOniB,KAAK4hB,GAEZ3J,EAAKmV,GAEDxlB,EAAIwd,MAAMxD,GACVO,EAAOniB,KAAK,QAEZmiB,EAAOniB,KAAK,KACZm8B,EAAS/O,EAAMuR,GAAQ/2B,EAAI4Y,GAAG4M,EAAM,QACpCjL,EAAOniB,KAAK,MACZmiB,EAAOniB,KAAK4hB,GACZO,EAAOniB,KAAK,KAEpB,MAAO,GAAgB,GAAZqd,EAAe,CACtB,GA7ER,SAAwB+P,GACpB,GAAIxlB,EAAI8pB,MAAMtE,GAAO,CACjB,EAAG,CAGC,GAFAA,EAAOA,EAAKrE,WAERnhB,EAAI4Y,GAAG4M,EA5etB,OA4e8D,IAA3BA,EAAK8B,WAAWxuB,OACpC,OAAO,EAGX,GAA+B,IAA3B0sB,EAAK8B,WAAWxuB,OAChB,OAAO,CAEf,QAAUkH,EAAIsrB,QAAQ9F,IAEtB,OAAO,CACX,CAEA,OAAO,CACX,CA2DY8R,CAAe9R,GAEf,YADAjL,EAAOniB,KAAK,UAIhBqR,EAAQD,EAAKgc,IAERuR,GAAQhD,IACT/a,EAASwM,EAAKrE,YACd+V,EAAW1R,EAAKiB,mBAGXyQ,GAAYl3B,EAAI2rB,SAAS3S,GAAUA,EAASwM,GAAMiB,iBAGlDyQ,GAAmC,KAAvBA,EAAS9c,YAAoBpa,EAAIsrB,QAAQ4L,KAElDztB,EADA3R,EAAQwQ,QACAmB,EAAM/L,QAAQ,iBAAkB,KAEhC+L,EAAM/L,QAAQ,kBAAmB,KAIjD+L,EAAQA,EAAM/L,QAAQ,KAAM,MAGhC6c,EAAOniB,KAAKg9B,EAAe3rB,EAAQzJ,EAAI0K,OAAOjB,EAAO3R,GAEzD,MAAuB,GAAZ2d,GACP8E,EAAOniB,KAAK,aACZmiB,EAAOniB,KAAKotB,EAAKxT,MACjBuI,EAAOniB,KAAK,QACO,GAAZqd,IACH+P,EAAKxT,KAAK6L,QAAQ,WAAa,GAC/BtD,EAAOniB,KAAK,WACZmiB,EAAOniB,KAAKotB,EAAKxT,MACjBuI,EAAOniB,KAAK,YAEZmiB,EAAOniB,KAAK,MACZmiB,EAAOniB,KAAKotB,EAAKxT,MACjBuI,EAAOniB,KAAK,MAGxB,CAaA,SAASm/B,IACD9/B,EAAMu8B,WAAWl8B,EAAQmQ,UACzBsS,EAASziB,EAAQmQ,OAAOsS,IAAWA,EAE3C,CAEA,OAtTA2a,EAAOsC,OAAStC,EAAO,iBAIQ,KAF/Bp9B,EAAUA,GAAW,CAAC,GAEHsQ,WACftQ,EAAQsQ,UAAW,GAoSvB,SAAkBmb,GACd,IAAIkU,EAAgBlU,EAAK+D,WAAWxuB,OAGpC,OAFgB2+B,GAA6C,GAA5BlU,EAAKmC,WAAWjQ,WAEX,GAAjBgiB,GAAwC,GAAjBA,GAAsBz3B,EAAIkqB,cAAc3G,EAAKuH,WAC7F,CAQI4M,CAASnU,IACThJ,EAASva,EAAI0K,OAAOlB,EAAK+Z,EAAKmC,YAAYhoB,QAAQ,iBAAkB,KAAM5F,GAC1Ey/B,IAEOhd,IAGXga,EAAShR,GACThJ,EAASA,EAAOjJ,KAAK,IACrBimB,IAGuD,KAAnDhd,EAAO7c,QAAQ41B,EAAM,IAAI51B,QAAQ81B,EAAU,IACpC,GAGJjZ,EACX,GAIJ3iB,EAAOmG,EAAQ,CACXgQ,WAAYA,GAGf,CArqBD,CAqqBG5U,OAAO1B,MAAM2sB,QAEhB,SAAUnrB,GAGN,IAAIxB,EAAQ0B,OAAO1B,MACf2B,EAAQ3B,EAAM2B,MACdxB,EAASqB,EAAErB,OACXmG,EAAStG,EAAM6B,GAAGyG,OAClBrG,EAAUjC,EAAM+B,QAAQE,QACxBsG,EAAMjC,EAAOkC,IACbsmB,EAAgBvmB,EAAIumB,cACpBG,EAAa1mB,EAAI0mB,WACjBE,EAAsB5mB,EAAI4mB,oBAC1BS,EAAgBrnB,EAAIqnB,cACpB9B,EAAYvlB,EAAIulB,UAEpBzY,EAAiB,CACjB6qB,oBAAqB,SAASx+B,GAC1B,GAAKA,EAIL,MAAM,iBAAkBA,EAIjBA,EAAOiT,eAHH,IAAIwrB,EAAaz+B,EAAOuF,SAIvC,EAEAm5B,mBAAoB,SAAShtB,GACzB,IAAIitB,EAAgBttB,EAAWutB,kBAAkBltB,GACjD,OAAOiC,EAAeC,sBAAsB+qB,EAChD,EAEA/qB,sBAAuB,SAASrO,GAC5B,OAAOoO,EAAe6qB,oBAAoB33B,EAAIooB,mBAAmB1pB,GACrE,GAGAs5B,EAAW5+B,EAAMxB,OAAO,CACxBC,KAAM,SAAS0U,GACXtT,EAAErB,OAAOK,KAAM,CACXgwB,cAAe1b,EACfC,eAAgBD,EAChBE,aAAcF,EACdoB,wBAAyBpB,EACzBG,YAAa,EACbC,UAAW,EACX4B,WAAW,GAEnB,EAGA3B,SAAU,SAAS4Y,EAAMlQ,GACrBrd,KAAKuU,eAAiBgZ,EACtBvtB,KAAKyU,YAAc4I,EACnB2iB,EAAsBhgC,MACtBigC,EAAejgC,MAAM,EACzB,EAEAkgC,OAAQ,SAAS3S,EAAMlQ,GACnBrd,KAAKwU,aAAe+Y,EACpBvtB,KAAK0U,UAAY2I,EACjB2iB,EAAsBhgC,MACtBigC,EAAejgC,MAAM,EACzB,EAEAmgC,eAAgB,SAAS5S,GACrBvtB,KAAK2U,SAAS4Y,EAAKrE,WAAYoF,EAAcf,GACjD,EAEA6S,cAAe,SAAS7S,GACpBvtB,KAAK2U,SAAS4Y,EAAKrE,WAAYoF,EAAcf,GAAQ,EACzD,EAEA8S,aAAc,SAAS9S,GACnBvtB,KAAKkgC,OAAO3S,EAAKrE,WAAYoF,EAAcf,GAC/C,EAEA+S,YAAa,SAAS/S,GAClBvtB,KAAKkgC,OAAO3S,EAAKrE,WAAYoF,EAAcf,GAAQ,EACvD,EAEAxO,WAAY,SAASwO,GACjBvtB,KAAKmgC,eAAe5S,GACpBvtB,KAAKsgC,YAAY/S,EACrB,EAEAgT,mBAAoB,SAAShT,GACzBvtB,KAAK2U,SAAS4Y,EAAM,GACpBvtB,KAAKkgC,OAAO3S,EAAMA,EAAuB,IAAlBA,EAAK/P,SAAiB,aAAe,aAAa3c,OAC7E,EAEA+T,SAAU,SAASqf,GACf,IAAIrsB,EAAO5H,KAEPi0B,EACArsB,EAAKs4B,OAAOt4B,EAAK2M,eAAgB3M,EAAK6M,aAEtC7M,EAAK+M,SAAS/M,EAAK4M,aAAc5M,EAAK8M,UAE9C,EAIA8rB,eAAgB,WACZ,IAAI54B,EAAO5H,KACP4S,EAAQhL,EAAK64B,aAEb74B,EAAK2M,gBAAkB3M,EAAK8N,yBAC5B9N,EAAKw4B,cAAczR,EAAoB/mB,EAAK8N,wBAAyB9N,EAAK2M,iBAG9E3M,EAAKgN,UAAS,GAEd,SAAU8rB,EAAc7R,GACpB,KAAOA,EAASvR,QACRuR,EAAS8R,oBACTD,EAAc7R,EAAS+R,sBAEvB/R,EAASxZ,QAGpB,CARD,CAQG,IAAIwrB,EAAcjuB,GACzB,EAEAoD,cAAe,WAEX,IAAIvP,EAAW8L,EAAWutB,kBAAkB9/B,MAC5C,OAAO,SAAU8gC,EAAajS,GAGtB,IAFA,IAAItB,EAAMwT,EAAOt6B,EAASu6B,yBAEnBzT,EAAOsB,EAASvR,QACnBiQ,EAAOA,EAAKkC,WAAWZ,EAAS8R,qBAE5B9R,EAAS8R,qBACTpT,EAAKzR,YAAYglB,EAAajS,EAAS+R,uBAG3CG,EAAKjlB,YAAYyR,GAGrB,OAAOwT,CACd,CAdM,CAcJ,IAAIF,EAAc7gC,MACzB,EAEAihC,gBAAiB,WACb,IAAIr5B,EAAO5H,KACP4S,EAAQhL,EAAK64B,aAEb74B,EAAK2M,gBAAkB3M,EAAK8N,yBAC5B9N,EAAKw4B,cAAczR,EAAoB/mB,EAAK8N,wBAAyB9N,EAAK2M,iBAG9E3M,EAAKgN,UAAS,GAEd,IAAInO,EAAW8L,EAAWutB,kBAAkBl4B,GAE5C,OAAO,SAAUs5B,EAAerS,GAG5B,IAFA,IAAItB,EAAMwT,EAAOt6B,EAASu6B,yBAEnBzT,EAAOsB,EAASvR,QACfuR,EAAS8R,qBACTpT,EAAOA,EAAKkC,WAAU,IACjB3T,YAAYolB,EAAerS,EAAS+R,uBAEzC/R,EAASxZ,OAAOzN,EAAKu5B,eAGzBJ,EAAKjlB,YAAYyR,GAGrB,OAAOwT,CACV,CAfM,CAeJ,IAAIF,EAAcjuB,GACzB,EAEAwuB,WAAY,SAAS7T,GACjB,IAAI3lB,EAAO5H,KAEPyuB,EAAW7mB,EAAK2M,iBACZ3M,EAAK6M,aAAe7M,EAAK2M,eAAekJ,UAAU5c,QAClDkH,EAAIunB,cAAc1nB,EAAK2M,eAAgB3M,EAAK6M,aAGhD1M,EAAIyf,YAAY+F,EAAM3lB,EAAK2M,iBAE3BxM,EAAIgtB,SAASntB,EAAK2M,eAAgBgZ,EAAM3lB,EAAK6M,aAGjD7M,EAAK+M,SAAS/M,EAAK2M,eAAgB3M,EAAK6M,YAC5C,EAEAgsB,WAAY,WAER,OAAOz/B,EAAErB,OAAO,IAAIogC,EAAS//B,KAAKgwB,eAAgB,CAC9Czb,eAAgBvU,KAAKuU,eACrBC,aAAcxU,KAAKwU,aACnBkB,wBAAyB1V,KAAK0V,wBAC9BjB,YAAazU,KAAKyU,YAClBC,UAAW1U,KAAK0U,UAChB4B,UAAWtW,KAAKsW,UAEhB6qB,cAAenhC,MAEvB,EAGAuxB,SAAU,WACN,IAAI8P,EAAgBrhC,KAAKuU,eAAekI,SACpC6kB,EAActhC,KAAKwU,aAAaiI,SAEpC,MAAO,CAAkB,SAAjB4kB,EAA2BrhC,KAAKuU,eAAekJ,UAAY4jB,EAAe,IAAKrhC,KAAKyU,YAAa,OAClF,SAAf6sB,EAAyBthC,KAAKwU,aAAaiJ,UAAY6jB,EAAa,IAAKthC,KAAK0U,UAAW,KAAK2E,KAAK,GAC/G,IA6DJ,SAAS4mB,EAAertB,EAAOqhB,IAC3B,SAAwBrhB,GACpB,IACI,OAxDZ,SAA2B8U,EAAOwV,EAAKzoB,EAAaC,GAChD,GAAIgT,GAASwV,EACT,OAAOxoB,EAAYD,EAKvB,IADA,IAAIgB,EAAYynB,EACTznB,GAAaA,EAAUyT,YAAcxB,GACxCjS,EAAYA,EAAUyT,WAG1B,GAAIzT,EACA,OAAO6Y,EAAc7Y,GAAahB,EAKtC,IADAgB,EAAYiS,EACLjS,GAAaA,EAAUyT,YAAcgU,GACxCznB,EAAYA,EAAUyT,WAG1B,GAAIzT,EACA,OAAOf,EAAY4Z,EAAc7Y,GAAa,EAOlD,IAHA,IAAI6V,EAAOvjB,EAAI4uB,eAAejP,EAAOwV,GACjCqE,EAAgB7Z,EAEb6Z,GAAiBA,EAAcrY,YAAcoC,GAChDiW,EAAgBA,EAAcrY,WAG7BqY,IACDA,EAAgBjW,GAIpB,IADA,IAAIkW,EAActE,EACXsE,GAAeA,EAAYtY,YAAcoC,GAC5CkW,EAAcA,EAAYtY,WAO9B,OAJKsY,IACDA,EAAclW,GAGdiW,GAAiBC,EACV,EAGJlT,EAAckT,GAAelT,EAAciT,EACtD,CAKmBE,CAAkB7uB,EAAM2B,eAAgB3B,EAAM4B,aAAc5B,EAAM6B,YAAa7B,EAAM8B,WAAa,CAC7G,CAAE,MAAOgtB,GAEL,OAAO,CACX,CACJ,EAEIC,CAAe/uB,KACXqhB,GACArhB,EAAM8C,wBAA0B9C,EAAM4B,aAAe5B,EAAM2B,eAC3D3B,EAAM8B,UAAY9B,EAAM6B,cAExB7B,EAAM8C,wBAA0B9C,EAAM2B,eAAiB3B,EAAM4B,aAC7D5B,EAAM6B,YAAc7B,EAAM8B,WAG9B9B,EAAM0D,WAAY,EAE1B,CAEA,SAAS0pB,EAAsBptB,GAC3BA,EAAM0D,UAAY1D,EAAM2B,gBAAkB3B,EAAM4B,cAAgB5B,EAAM6B,aAAe7B,EAAM8B,UAG3F,IADA,IAAI6Y,EAAO3a,EAAM2B,eACVgZ,GAAQA,GAAQ3a,EAAM4B,eAAiBzM,EAAI2mB,aAAanB,EAAM3a,EAAM4B,eACvE+Y,EAAOA,EAAKrE,WAGhBtW,EAAM8C,wBAA0B6X,CACpC,CA1FAwS,EAAS6B,SAAW,SAASrU,GACzB,OAAO,IAAIwS,EAASxS,EAAKyC,cAC7B,EA0FA,IAAI6Q,EAAgB1/B,EAAMxB,OAAO,CAC7BC,KAAM,SAASgT,GAQX,GAPA5R,EAAErB,OAAOK,KAAM,CACX4S,MAAOA,EACPivB,SAAU,KACVC,MAAO,KACPC,KAAM,QAGNnvB,EAAM0D,UAAV,CAIA,IAAIgV,EAAO1Y,EAAM8C,wBAEjB1V,KAAK8hC,MAAQlvB,EAAM2B,gBAAkB+W,GAASmD,EAAW7b,EAAM2B,gBAE/Doa,EAAoBrD,EAAM1Y,EAAM2B,gBADhC3B,EAAM2B,eAAe8a,WAAWzc,EAAM6B,aAGtCzU,KAAK+hC,KAAOnvB,EAAM4B,cAAgB8W,GAASmD,EAAW7b,EAAM4B,cAE5Dma,EAAoBrD,EAAM1Y,EAAM4B,cAAcmZ,YAD9C/a,EAAM4B,aAAa6a,WAAWzc,EAAM8B,UATpC,CAWJ,EAEAstB,QAAS,WACL,QAAShiC,KAAK8hC,KAClB,EAEAxkB,KAAM,WACF,IAAI1V,EAAO5H,KACPqiB,EAAUza,EAAKi6B,SAAWj6B,EAAKk6B,MAgBnC,OAfAl6B,EAAKk6B,MAAQl6B,EAAKi6B,UAAYj6B,EAAKi6B,SAASlU,aAAe/lB,EAAKm6B,KAChEn6B,EAAKi6B,SAASlU,YAAc,KAExBc,EAAW7mB,EAAKi6B,YACZj6B,EAAKgL,MAAM4B,cAAgB5M,EAAKi6B,WAChCxf,EAAUA,EAAQoN,WAAU,IACpBE,WAAW/nB,EAAKgL,MAAM8B,UAAW2N,EAAQxhB,OAAS+G,EAAKgL,MAAM8B,WAGrE9M,EAAKgL,MAAM2B,gBAAkB3M,EAAKi6B,WAClCxf,EAAUA,EAAQoN,WAAU,IACpBE,WAAW,EAAG/nB,EAAKgL,MAAM6B,cAIlC4N,CACX,EAEA4f,SAAU,SAASC,GACf,IACI7f,EADAza,EAAO5H,KASX,KALI4H,EAAKi6B,SAAWj6B,EAAKk6B,MACrBl6B,EAAKk6B,MAAQl6B,EAAKi6B,UAAYj6B,EAAKi6B,SAASlU,aAAe/lB,EAAKm6B,KAAOn6B,EAAKi6B,SAASlU,YAAc,KAIhGtL,EAHIza,EAAKi6B,UAIRj6B,EAAK+4B,oBACL/4B,EAAKg5B,qBAAqBqB,SAASC,GAEnCA,EAAS7f,GAIjB,OAAOA,CACX,EAEAhN,OAAQ,SAAS8rB,GACb,IAGIzZ,EAAOwV,EAAKrV,EAHZjgB,EAAO5H,KACPmiC,EAAmBv6B,EAAKgL,MAAM2B,gBAAkB3M,EAAKi6B,SACrDO,EAAiBx6B,EAAKgL,MAAM4B,cAAgB5M,EAAKi6B,SAGrD,GAAIpT,EAAW7mB,EAAKi6B,YAAcM,GAAoBC,GAClD1a,EAAQya,EAAmBv6B,EAAKgL,MAAM6B,YAAc,EAEpDoT,GADAqV,EAAMkF,EAAiBx6B,EAAKgL,MAAM8B,UAAY9M,EAAKi6B,SAAShhC,QAC9C6mB,EAEVyZ,IAAkBgB,GAAoBC,KAClCx6B,EAAKi6B,UAAYV,EAAc5sB,gBAAkBmT,GAASyZ,EAAc1sB,cACxE0sB,EAAc1sB,aAAeoT,GAG7BjgB,EAAKi6B,UAAYV,EAAc3sB,cAAgB0oB,GAAOiE,EAAczsB,YACpEysB,EAAczsB,WAAamT,IAInCjgB,EAAKi6B,SAASlS,WAAWjI,EAAOG,OAC7B,CACH,IAAI9G,EAASnZ,EAAKi6B,SAAS3Y,WAE3B,GAAIiY,IAAkBv5B,EAAKgL,MAAM2B,gBAAkBwM,GAAUnZ,EAAKgL,MAAM4B,cAAgBuM,GAAS,CAC7F,IAAIshB,EAAY/T,EAAc1mB,EAAKi6B,UAE/B9gB,GAAUogB,EAAc5sB,gBAAkB8tB,GAAalB,EAAc1sB,cACrE0sB,EAAc1sB,aAAe,GAG7BsM,GAAUogB,EAAc3sB,cAAgB6tB,EAAYlB,EAAczsB,YAClEysB,EAAczsB,WAAa,EAEnC,CAEA3M,EAAIsN,OAAOzN,EAAKi6B,SACpB,CACJ,EAEAlB,kBAAmB,WACf,OAAQlS,EAAWzuB,KAAK6hC,YACvB95B,EAAIyP,iBAAiBxX,KAAK6hC,SAAU7hC,KAAK4S,MAAM2B,iBAC5CxM,EAAIyP,iBAAiBxX,KAAK6hC,SAAU7hC,KAAK4S,MAAM4B,cACvD,EAEAosB,mBAAoB,WAChB,OAAO,IAAIC,EAAc7gC,KAAKsiC,cAClC,EAEAA,YAAa,WACT,IAAI16B,EAAO5H,KACPuiC,EAAW36B,EAAKgL,MAAM6tB,aAS1B,OARA8B,EAAShC,mBAAmB34B,EAAKi6B,UAC7B95B,EAAIyP,iBAAiB5P,EAAKi6B,SAAUj6B,EAAKgL,MAAM2B,iBAC/CguB,EAAS5tB,SAAS/M,EAAKgL,MAAM2B,eAAgB3M,EAAKgL,MAAM6B,aAExD1M,EAAIyP,iBAAiB5P,EAAKi6B,SAAUj6B,EAAKgL,MAAM4B,eAC/C+tB,EAASrC,OAAOt4B,EAAKgL,MAAM4B,aAAc5M,EAAKgL,MAAM8B,WAGjD6tB,CACX,IAGA5C,EAAex+B,EAAMxB,OAAO,CAC5BC,KAAM,SAAS0U,GACXtU,KAAKgwB,cAAgB1b,EACrBtU,KAAKoU,WAAa,CACtB,EAEA8B,SAAU,SAAStD,GACf,IAAI4vB,EAAYxiC,KAAKgwB,cAAcld,KAAK2vB,kBAGxCC,EAAeF,EAAW5vB,GAAO,GACjC8vB,EAAeF,EAAW5vB,GAAO,GAEjC4vB,EAAUG,QACd,EAEA1sB,gBAAiB,WACb,IAAI/B,EAAYlU,KAAKgwB,cAAc9b,UAEb,QAAlBA,EAAUxM,MACVwM,EAAUqR,OAElB,EAEAlR,WAAY,WACR,IAAImuB,EAGS7L,EAFT/jB,EAAQ,IAAImtB,EAAS//B,KAAKgwB,eAC1B9b,EAAYlU,KAAKgwB,cAAc9b,UAGnC,IAGI,KAFAsuB,EAAYtuB,EAAU5B,eACF6rB,KAAOqE,EAAUrE,KAAK,GAAKqE,EAAUhmB,iBAC7CwT,eAAiBhwB,KAAKgwB,cAC9B,OAAOpd,CAEf,CAAE,MAAO8uB,GACL,OAAO9uB,CACX,CAEA,GAAsB,WAAlBsB,EAAUxM,KACVkL,EAAMmM,WAAWyjB,EAAUrE,KAAK,QAC7B,CACHxH,EA8CZ,SAA4B6L,GACxB,IAAIxnB,EAAOwnB,EAAUI,YACjBC,EAAQL,EAAUI,YAKtB,OAHA5nB,EAAKpG,UAAS,GACdiuB,EAAMjuB,UAAS,GAER7M,EAAI4uB,eAAe6L,EAAUhmB,gBAAiBxB,EAAKwB,gBAAiBqmB,EAAMrmB,gBACrF,CAtD6BsmB,CAAmBN,GACpCO,EAAcP,EAAW5vB,EAAO+jB,GAAgB,GAChDoM,EAAcP,EAAW5vB,EAAO+jB,GAAgB,GAEX,GAAjC/jB,EAAM2B,eAAeiJ,UACrB5K,EAAM+B,SAAS/B,EAAM4B,aAAc5B,EAAM6B,aAGV,GAA/B7B,EAAM4B,aAAagJ,UACnB5K,EAAMstB,OAAOttB,EAAM2B,eAAgB3B,EAAM8B,WAGe,IAAxD8tB,EAAUQ,iBAAiB,aAAcR,IACzC5vB,EAAMgC,UAAS,GAGnB,IAAIL,EAAiB3B,EAAM2B,eACvBC,EAAe5B,EAAM4B,aACrB1B,EAAO9S,KAAKgwB,cAAcld,KAE9B,KAAKF,EAAM0D,WAAmC,IAAtB1D,EAAM6B,aAAqB7B,EAAM8B,WAAa0a,EAAcxc,EAAM4B,eACpFD,GAAkBC,GAAgBia,EAAWla,IAAmBA,EAAe2U,YAAcpW,GAAO,CAItG,IAHA,IAAImwB,GAAa,EACbC,GAAW,EAE0B,IAAlC5U,EAAc/Z,IAAyBA,GAAkBA,EAAe2U,WAAWuE,YAAclZ,GAAkBzB,GACtHyB,EAAiBA,EAAe2U,WAChC+Z,GAAa,EAGjB,KAAO3U,EAAc9Z,IAAiB4a,EAAc5a,EAAa0U,YAAc,GAAK1U,GAAgBA,EAAa0U,WAAW2J,WAAare,GAAgB1B,GACrJ0B,EAAeA,EAAa0U,WAC5Bga,GAAW,EAGX3uB,GAAkBzB,GAAQ0B,GAAgB1B,GAAQmwB,GAAcC,IAChEtwB,EAAM+B,SAASJ,EAAgB,GAC/B3B,EAAMstB,OAAO1rB,EAAc4a,EAActc,IAEjD,CACJ,CAEA,OAAOF,CACX,IAaJ,SAAS8vB,EAAeF,EAAW5vB,EAAO8U,GAEtC,IAQIyb,EARA1tB,EAAY7C,EAAM8U,EAAQ,iBAAmB,gBAC7CrK,EAASzK,EAAM8U,EAAQ,cAAgB,aACvC0b,EAAa,EACbC,EAAS5U,EAAWhZ,GACpB6tB,EAAaD,EAAS5tB,EAAYA,EAAU4Z,WAAWhS,IAAW,KAClEkmB,EAAeF,EAAS5tB,EAAUyT,WAAazT,EAC/CnB,EAAM1B,EAAMod,cACZwT,EAASlvB,EAAIxB,KAAK2vB,kBAII,GAAtBhtB,EAAU+H,UAAuC,GAAtB/H,EAAU+H,WACrC4lB,EAAa/lB,GAGZkmB,IACDA,EAAejvB,EAAIxB,MAGoB,OAAvCywB,EAAa9mB,SAAS/W,eACtB89B,EAAOC,kBAAkBF,GACzBC,EAAO5uB,UAAS,GAChB4tB,EAAUkB,YAAYhc,EAAQ,eAAiB,aAAc8b,KAG7DL,EAAaI,EAAajrB,aAAavQ,EAAIghB,OAAOzU,EAAK,KAAMgvB,GAE7DE,EAAOC,kBAAkBN,GACzBp7B,EAAIsN,OAAO8tB,GACXK,EAAO9b,EAAQ,YAAc,WAAW,YAAa0b,GACrDI,EAAO5uB,UAAS,GAChB4tB,EAAUkB,YAAYhc,EAAQ,eAAiB,aAAc8b,GAErE,CAEA,SAAST,EAAcP,EAAW5vB,EAAO+jB,EAAgBjP,GACrD,IAGIpF,EAAQvB,EAAQ1F,EAChB4jB,EAAU3hB,EACV8N,EAAM9kB,EALN68B,EAAap7B,EAAIghB,OAAOnW,EAAMod,cAAe,KAC7CwT,EAAShB,EAAUI,YACnBe,EAAajc,EAAQ,eAAiB,aAItCkc,GAAW,EAEfT,EAAWhhB,UAAY,SACvBqhB,EAAO5uB,SAAS8S,GAEhB3G,EAASyiB,EAAOhnB,gBAEXzU,EAAIyP,iBAAiBmf,EAAgB5V,KACtCA,EAAS4V,GAKb,GACQiN,EACA7iB,EAAOzI,aAAa6qB,EAAYA,EAAW3U,kBAE3CzN,EAAOjF,YAAYqnB,GACnBS,GAAW,GAEfJ,EAAOC,kBAAkBN,UACnB7gB,EAASkhB,EAAOR,iBAAiBW,EAAYnB,IAAc,GAAKW,EAAW3U,iBAErFnT,EAAS8nB,EAAWxV,aAEL,GAAXrL,GAAgBmM,EAAWpT,IAC3BmoB,EAAOE,YAAYhc,EAAQ,aAAe,WAAY8a,GAEtDz6B,EAAIsN,OAAO8tB,GAEX/X,EAAO,CAAC/P,EAAQmoB,EAAOjyB,KAAK1Q,UAE5Bo+B,GAAYvX,GAASyb,EAAW3U,gBAChClR,EAAOoK,GAASyb,EAAWxV,YAEvBc,EAAWnR,GACX8N,EAAO,CAAC9N,EAAM,GACPmR,EAAWwQ,GAClB7T,EAAO,CAAC6T,EAAUA,EAASp+B,SAE3ByF,EAAQgoB,EAAc6U,GAGlB/X,EADArK,EAAO4M,aAAernB,GAASya,EAAOsO,WAAWxuB,OAAS,EACnD,CAACkgB,EAAO4M,YAAa,GAErB,CAAC5M,EAAQza,IAIxByB,EAAIsN,OAAO8tB,IAGfvwB,EAAM8U,EAAQ,WAAa,UAAU0P,MAAMxkB,EAAOwY,EACtD,CAEA,IAAIyY,EAAkB1iC,EAAMxB,OAAO,CAC/BC,KAAM,SAASgT,GACX5S,KAAK8jC,UAAY,WACb,IAAInf,EAAQ,GAgBZ,OAFA,IAAIkc,EAAcjuB,GAAOqvB,UAZzB,SAAS8B,EAAMxW,GACX,GAAIxlB,EAAI4Y,GAAG4M,EAAM,QAA4B,GAAjBA,EAAK/P,YAAmBzV,EAAImrB,aAAa3F,IAA2B,UAAlBA,EAAK9P,WAC/EkH,EAAMxkB,KAAKotB,QAGX,IADAA,EAAOA,EAAKE,WACLF,GACHwW,EAAMxW,GACNA,EAAOA,EAAKI,WAGxB,IAIOhJ,CACX,CACJ,IAGAqf,EAA0BnD,EAAclhC,OAAO,CAC/CghC,kBAAmB,WACf,IAAIzE,EAAYp2B,EAAOyV,YAAczV,EAAOyV,WAAW2gB,UACvD,OAAOA,IAAcA,EAAUl8B,KAAK6hC,WAAahB,EAAc/gC,GAAG6gC,kBAAkB5gC,KAAKC,KAC7F,EAEA4gC,mBAAoB,WAChB,OAAO,IAAIoD,EAAwBhkC,KAAKsiC,cAC5C,IAGA2B,EAA4B9iC,EAAMxB,OAAO,CACzCC,KAAM,SAASgT,GACX5S,KAAK8jC,UAAY,WACb,IAAInf,EAAQ,GACRuX,EAAYp2B,EAAOyV,YAAczV,EAAOyV,WAAW2gB,UAiBvD,OAFA,IAAI8H,EAAwBpxB,GAAOqvB,UAdnC,SAAS8B,EAAMxW,GACX,GAAI2O,IAAcA,EAAU3O,GACxB,GAAIxlB,EAAI4Y,GAAG4M,EAAM,QAA4B,GAAjBA,EAAK/P,YAAmBzV,EAAImrB,aAAa3F,IAA2B,UAAlBA,EAAK9P,WAC/EkH,EAAMxkB,KAAKotB,QAGX,IADAA,EAAOA,EAAKE,WACLF,GACHwW,EAAMxW,GACNA,EAAOA,EAAKI,WAI5B,IAIOhJ,CACX,CACJ,IAGA/O,EAAezU,EAAMxB,OAAO,CAC5BC,KAAM,SAASgT,EAAOE,EAAMjT,GACxB,IAAI+H,EAAO5H,KACX4H,EAAKgL,MAAQA,EACbhL,EAAKs8B,SAAW3xB,EAAWutB,kBAAkBltB,GAC7ChL,EAAKkL,KAAOA,GAAQlL,EAAKu8B,YAAYvxB,GACV,QAAvB7K,EAAIxF,KAAKqF,EAAKkL,QACdlL,EAAKs8B,SAAWt8B,EAAKkL,MAGzBlL,EAAK2M,eAAiB3M,EAAKw8B,WAAWxxB,EAAM2B,gBAC5C3M,EAAK4M,aAAe5M,EAAKw8B,WAAWxxB,EAAM4B,cAC1C5M,EAAK6M,YAAc7M,EAAKyV,OAAOzK,EAAM2B,eAAgB3B,EAAM6B,aAC3D7M,EAAK8M,UAAY9M,EAAKyV,OAAOzK,EAAM4B,aAAc5B,EAAM8B,WAEvD9M,EAAK6L,WAAa5T,GAAWA,EAAQ4T,WAEjC7L,EAAK6L,aACL7L,EAAKy8B,qBAAuBv+B,EAAOyV,WAAW+oB,iBAAiB18B,EAAKkL,OAGxElL,EAAKoN,KAAOpN,EAAKkL,KAAKqP,UAElBva,EAAK6L,aAAe7L,EAAKy8B,qBAAqB9e,OAC9Czf,EAAOyV,WAAWgpB,kBAAkB38B,EAAKkL,KAAMlL,EAAKy8B,qBAE5D,EAEA/9B,MAAO,SAASinB,GAIZ,IAHA,IAAIjL,EAAS,EACTkiB,EAAWjX,EAAK/P,SAEb+P,EAAOA,EAAKiB,iBAAiB,CAChC,IAAIhR,EAAW+P,EAAK/P,SAEJ,GAAZA,GAAiBgnB,GAAYhnB,GAC7B8E,IAGJkiB,EAAWhnB,CACf,CAEA,OAAO8E,CACX,EAEA6hB,YAAa,SAASvxB,GAGlB,IAFA,IAAI0Y,EAAO1Y,EAAM8C,wBAEV4V,IAA0B,GAAjBA,EAAK9N,UAAiB8N,EAAKnH,cAAgBmH,EAAKnH,WAAW2R,iBAA8E,SAA3DxK,EAAKnH,WAAW2R,gBAAgBrY,UAAU/X,iBACpI4lB,EAAOA,EAAKpC,WAGhB,OAAOoC,CACX,EAEAmZ,YAAa,WACT,IAAI78B,EAAO5H,KAEX+H,EAAImtB,eAAettB,EAAKkL,MACxBlL,EAAKkL,KAAKqP,UAAYva,EAAKoN,KACvBpN,EAAK6L,aAAe7L,EAAKy8B,qBAAqB9e,OAC9Czf,EAAOyV,WAAWgpB,kBAAkB38B,EAAKkL,KAAMlL,EAAKy8B,qBAE5D,EAEAhnB,OAAQ,SAASkQ,EAAM/b,GACnB,GAAqB,GAAjB+b,EAAK/P,SACL,MAAQ+P,EAAOA,EAAKiB,kBAAqC,GAAjBjB,EAAK/P,UACzChM,GAAS+b,EAAK9P,UAAU5c,OAIhC,OAAO2Q,CACX,EAEA4yB,WAAY,SAAS7W,GAGjB,IAFA,IAAImX,EAAO,GAEJnX,GAAQvtB,KAAKkkC,UAChBQ,EAAKvkC,KAAKH,KAAKsG,MAAMinB,IACrBA,EAAOA,EAAKrE,WAGhB,OAAOwb,CACX,EAEAC,aAAc,SAAS/xB,EAAO8U,EAAOgd,EAAME,GAKvC,IAJA,IAAIrX,EAAOvtB,KAAKkkC,SACZrjC,EAAS6jC,EAAK7jC,OACdwc,EAASunB,EAEN/jC,KAAY0sB,GACfA,EAAOA,EAAK8B,WAAWqV,EAAK7jC,IAGhC,KAAO0sB,GAAyB,GAAjBA,EAAK/P,UAAiB+P,EAAK9P,UAAU5c,OAASwc,GACzDA,GAAUkQ,EAAK9P,UAAU5c,OACzB0sB,EAAOA,EAAKI,YAGZJ,GAAQlQ,GAAU,GAClBzK,EAAM8U,EAAQ,WAAa,UAAU6F,EAAMlQ,EAEnD,EAEA9H,QAAS,WACL,IAAI3N,EAAO5H,KACPsiB,EAAS1a,EAAKgL,MAAM6tB,aAKxB,OAHA74B,EAAK+8B,aAAariB,GAAQ,EAAM1a,EAAK2M,eAAgB3M,EAAK6M,aAC1D7M,EAAK+8B,aAAariB,GAAQ,EAAO1a,EAAK4M,aAAc5M,EAAK8M,WAElD4N,CACX,IAIAuiB,EAAS1jC,EAAMxB,OAAO,CACtBC,KAAM,WACFI,KAAK8kC,MAAQ,IACjB,EAEAC,SAAU,SAASnyB,GACf,IACIkyB,EADO9kC,KACM8kC,MAAQ/8B,EAAIghB,OAAOxW,EAAWutB,kBAAkBltB,GAAQ,OAAQ,CAAEgH,UAAW,aAO9F,OANAhH,EAAMwuB,WAAW0D,GAEjB/8B,EAAIgqB,aAAa+S,EAAMtW,iBACvBzmB,EAAIgqB,aAAa+S,EAAMnX,aAEvB/a,EAAMmM,WAAW+lB,GACVA,CACX,EAEAE,YAAa,SAASpyB,GAClB,IAAIhL,EAAO5H,KACPi/B,EAAWr3B,EAAKk9B,MAAMtW,gBACtB/Z,EAAc,EAEdwqB,IACAxqB,EAAcga,EAAWwQ,GAAYA,EAASxhB,UAAU5c,OAASytB,EAAc2Q,IAGnF,IAAIxpB,EAAY7N,EAAKk9B,MAAM5b,WACvB+b,EAAiBhG,EAAW3Q,EAAc2Q,GAAY,EAE1Dl3B,EAAIsN,OAAOzN,EAAKk9B,OAChBxX,EAAU7X,GAEV,IAAI8X,EAAO9X,EAAU4Z,WAAW4V,GAEhC,GAAIxW,EAAWlB,GACX3a,EAAM+B,SAAS4Y,EAAM9Y,QAClB,GAAI8Y,EAAM,CACb,IAAI2X,EAAWn9B,EAAI6qB,aAAarF,GAC5B2X,EACAtyB,EAAM+B,SAASuwB,EAAUA,EAASznB,UAAU5c,QAE5C+R,EAAMqsB,EAAW,gBAAkB,kBAAkB1R,EAE7D,MACS9rB,EAAQsZ,MAAStF,EAAU0M,YAC5B1M,EAAU0M,UAAY,wBAG1BvP,EAAM2tB,mBAAmB9qB,GAE7B7C,EAAMgC,UAAS,EACnB,EAEAuwB,IAAK,SAASvyB,EAAOwyB,GACjB,IAAIx9B,EAAO5H,KAEPsW,EAAY1D,EAAM0D,YAAc/D,EAAW8yB,aAAazyB,GACxD0B,EAAM/B,EAAWutB,kBAAkBltB,GAEnCwyB,GAAUxyB,EAAM0D,YAChB1O,EAAKm9B,SAASnyB,GACdA,EAAQL,EAAW6yB,OAAOxyB,IAG9B,IAAI0yB,EAAgB1yB,EAAM6tB,aAa1B,GAXA6E,EAAc1wB,UAAS,GACvBhN,EAAKs1B,IAAMn1B,EAAIghB,OAAOzU,EAAK,OAAQ,CAAEsF,UAAW,aAChD0rB,EAAclE,WAAWx5B,EAAKs1B,MAE9BoI,EAAgB1yB,EAAM6tB,cACR7rB,UAAS,GACvBhN,EAAK8f,MAAQ9f,EAAKs1B,IAAIzN,WAAU,GAChC6V,EAAclE,WAAWx5B,EAAK8f,OAE9B9f,EAAK29B,mBAAmB39B,EAAK8f,MAAO9f,EAAKs1B,KAErC5mB,EAAW,CACX,IAAI0X,EAAM1Z,EAAIkxB,eAAe,UAC7Bz9B,EAAIyf,YAAYwG,EAAIyB,YAAa7nB,EAAK8f,OACtC3f,EAAIuQ,aAAa0V,EAAKpmB,EAAKs1B,IAC/B,CAOA,OALA5P,EAAU1a,EAAM8C,yBAEhB9C,EAAMutB,eAAev4B,EAAK8f,OAC1B9U,EAAM0tB,YAAY14B,EAAKs1B,KAEhBtqB,CACX,EAEA2yB,mBAAoB,SAAS7d,EAAOwV,GAC5BxV,EAAM8G,iBAAsD,UAAnC9G,EAAM8G,gBAAgB/Q,WAC/C1V,EAAIsN,OAAOqS,EAAM8G,iBAGjB0O,EAAIvP,aAA4C,UAA7BuP,EAAIvP,YAAYlQ,WACnC1V,EAAIsN,OAAO6nB,EAAIvP,YAEvB,EAEA8X,iBAAkB,SAASlY,GAIvB,IAHA,IAAIjnB,EAAQgoB,EAAcf,GACtBmY,EAAUnY,EAEPmY,EAAQlX,iBACa,GAApBkX,EAAQloB,UAAqD,GAApCkoB,EAAQlX,gBAAgBhR,UACjDlX,IAGJo/B,EAAUA,EAAQlX,gBAGtB,OAAOloB,CACX,EAEA+O,OAAQ,SAASzC,GACb,IAGI+yB,EACAC,EAJAh+B,EAAO5H,KACP0nB,EAAQ9f,EAAK8f,MACbwV,EAAMt1B,EAAKs1B,IAOf,IAFA5P,EAAU1a,EAAM8C,0BAERgS,EAAMiG,aAAejG,EAAMwB,YAC/BxB,EAAQA,EAAMwB,WAGlB,MAAQgU,EAAI1O,iBAAmB0O,EAAIhU,YAC/BgU,EAAMA,EAAIhU,WAIdyc,EAAwBje,EAAM8G,iBAAqD,GAAlC9G,EAAM8G,gBAAgBhR,UAC/CkK,EAAMiG,aAA6C,GAA9BjG,EAAMiG,YAAYnQ,SAE/DooB,EAAsB1I,EAAI1O,iBAAmD,GAAhC0O,EAAI1O,gBAAgBhR,UAC3C0f,EAAIvP,aAA2C,GAA5BuP,EAAIvP,YAAYnQ,SAOzD,IAAIqoB,GAHJne,EAAQA,EAAMiG,gBACduP,EAAMA,EAAI1O,kBAE2BzmB,EAAI8pB,MAAMnK,GAC3Cme,GAAiBne,EAAM7mB,OAAS,IAChC6mB,EAAMjK,UAAYiK,EAAMjK,UAAUqoB,OAAO,IAG7C,IAAIxvB,EAAYuvB,EACZE,GAAmB,EAWvB,GATIre,GAAS9f,EAAKs1B,MACd6I,IAAqBn+B,EAAK8f,MAAM8G,gBAChC9G,EAAQwV,EAAMt1B,EAAK8f,MAAM8G,iBAAmB5mB,EAAKs1B,IAAIvP,YACrDrX,GAAY,GAGhBvO,EAAIsN,OAAOzN,EAAK8f,OAChB3f,EAAIsN,OAAOzN,EAAKs1B,MAEXxV,IAAUwV,EAGX,OAFAtqB,EAAM2tB,mBAAmB3tB,EAAM8C,8BAC/B9C,EAAMgC,UAAS,GAInB,IAAIH,EAAc6B,EAAYmY,EAAW/G,GAASA,EAAMjK,UAAU5c,OAAS6mB,EAAM2H,WAAWxuB,OAAS,EACjG6T,EAAY+Z,EAAWyO,GAAOA,EAAIzf,UAAU5c,OAASq8B,EAAI7N,WAAWxuB,OAExE,GAAsB,GAAlB6mB,EAAMlK,SACN,KAAOkK,EAAM8G,iBAAqD,GAAlC9G,EAAM8G,gBAAgBhR,UAElD/I,IADAiT,EAAQA,EAAM8G,iBACO/Q,UAAU5c,OAIvC,GAAoB,GAAhBq8B,EAAI1f,SACJ,KAAO0f,EAAI1O,iBAAmD,GAAhC0O,EAAI1O,gBAAgBhR,UAE9C9I,IADAwoB,EAAMA,EAAI1O,iBACO/Q,UAAU5c,OAInC,IAAImlC,EAActe,EAAMwB,WACpB+c,EAAY/I,EAAIhU,WAChBgd,EAAalmC,KAAKylC,iBAAiB/d,GACnCye,EAAWnmC,KAAKylC,iBAAiBvI,GAErC5P,EAAU0Y,GACY,GAAlBte,EAAMlK,WACNkK,EAAQse,EAAY3W,WAAW6W,IAGnC5Y,EAAU2Y,GACU,GAAhB/I,EAAI1f,WACJ0f,EAAM+I,EAAU5W,WAAW8W,IAG3B7vB,GACsB,GAAlBoR,EAAMlK,SACN5K,EAAM+B,SAAS+S,EAAOjT,GAEtB7B,EAAMmzB,EAAmB,gBAAkB,kBAAkBre,GAGjE9U,EAAMgC,UAAS,KAGO,GAAlB8S,EAAMlK,SACN5K,EAAM+B,SAAS+S,EAAOjT,GAEtB7B,EAAMutB,eAAezY,GAGL,GAAhBwV,EAAI1f,SACJ5K,EAAMstB,OAAOhD,EAAKxoB,GAElB9B,EAAM0tB,YAAYpD,IAItBt1B,EAAKk9B,OACLl9B,EAAKo9B,YAAYpyB,EAEzB,IAGAwzB,EAAW,2DAEX7zB,EAAa,CACboS,MAAO,SAAS/R,GACZ,IAAI+R,EAAQpS,EAAW6D,UAAUxD,GAQjC,OAPK+R,EAAM9jB,SACP+R,EAAM2tB,mBAAmB3tB,EAAM8C,0BAC/BiP,EAAQpS,EAAW6D,UAAUxD,IAClB/R,SACP8jB,EAAQ5c,EAAI2qB,sBAAsB9f,EAAM8C,2BAGzCiP,CACX,EAEAvO,UAAW,SAASxD,GAMhB,OALe,IAAIixB,EAAgBjxB,GAAOkxB,YACpB7sB,QAAO,SAASsW,GAC9B,OAAOxlB,EAAIgrB,kBAAkBxF,EAAK/Q,cACtC,GAGR,EAEAf,kBAAmB,SAAS7I,GACxB,IACIyzB,EAAkBvgC,EAAOyV,YAAczV,EAAOyV,WAAW8qB,gBACzD/jB,EAAS,GASb,OAPI+jB,IAAoBA,EAAgBzzB,EAAM8C,2BAE1C4M,EADQ,IAAI2hB,EAA0BrxB,GAAOkxB,YAC9B7sB,QAAO,SAASsW,GAC3B,OAAOxlB,EAAIgrB,kBAAkBxF,EAAK/Q,cACtC,KAGG8F,CACX,EAEAwd,kBAAmB,SAASltB,GACxB,IAAI2B,EAAiB3B,EAAM2B,eAC3B,OAAkC,GAA3BA,EAAeiJ,SAAgBjJ,EAAiBA,EAAeyb,aAC1E,EAEA1d,YAAa,SAAS7L,GAClB,OAAOA,EAAS6L,aACpB,EAEAa,YAAa,SAASP,GAClB,IAAI0zB,EAAQ/zB,EAAW+zB,MAAM1zB,GACzB0zB,IACA1zB,EAAMwtB,cAAckG,GACpB1zB,EAAM0tB,YAAYgG,IAEtB,IAAIpyB,EAAYW,EAAe+qB,mBAAmBhtB,GAClDsB,EAAU+B,kBACV/B,EAAUgC,SAAStD,EACvB,EAEA2zB,UAAW,SAAS3zB,GAChB,OAAOpT,EAAMgD,OACT,oBACAuF,EAAIxF,KAAKqQ,EAAM2B,gBAAiB3B,EAAM6B,YACtC1M,EAAIxF,KAAKqQ,EAAM4B,cAAe5B,EAAM8B,UAE5C,EAEAyQ,MAAO,SAASvS,EAAO2a,EAAM7W,GACzB,SAAS8vB,EAAU9e,GACf,IAAI+e,EAAiB7zB,EAAM6tB,aAC3BgG,EAAe7xB,SAAS8S,GACxB+e,EAAe/e,EAAQ,iBAAmB,eAAe6F,GACzD,IAAImZ,EAAWD,EAAexF,kBAC1BvqB,IACAgwB,EAAW3+B,EAAI2O,KAAKgwB,IAExB3+B,EAAI2f,EAAQ,eAAiB,eAAegf,EAAUnZ,EAC1D,CACAiZ,GAAU,GACVA,GAAU,EACd,EAEAG,OAAQ,SAAS/zB,EAAOW,GACpB,IAAIoR,EAAQ,GAUZ,OARA,IAAIkc,EAAcjuB,GAAOqvB,UAAS,SAAS1U,GACvC,IAAIqZ,EAASrzB,EAAIga,GAEbqZ,GAAU5lC,EAAE0B,QAAQkkC,EAAQjiB,GAAS,GACrCA,EAAMxkB,KAAKymC,EAEnB,IAEOjiB,CACX,EAEAkiB,OAAQ,SAASj0B,EAAOk0B,GACpB,IAAIC,EAAWD,EAQf,MANwB,iBAAbA,IACPA,EAAY,SAASvZ,GACjB,OAAOxlB,EAAI4Y,GAAG4M,EAAMwZ,EACxB,GAGGx0B,EAAWo0B,OAAO/zB,GAAO,SAAS2a,GACrC,GAAIuZ,EAAUvZ,GACV,OAAOA,CAEf,GACJ,EAEAyZ,WAAY,SAASp0B,GACjB,OAAOL,EAAWs0B,OAAOj0B,GAAO,SAAS2a,GACrC,MAAyB,YAAlBA,EAAK3T,SAChB,GACJ,EAEA0sB,MAAO,SAAS1zB,GACZ,IAAI+R,EAAQpS,EAAWs0B,OAAOj0B,EAAO,OAErC,GAAoB,GAAhB+R,EAAM9jB,OACN,OAAO8jB,EAAM,EAErB,EAEAsiB,UAAW,SAAS9F,EAAe5T,GAC/B,GAAkC,IAA9B4T,EAAc1sB,YACd,OAAO,EAKX,IAFA,IAAI7B,EAAQuuB,EAAcV,aAEG,IAAtB7tB,EAAM6B,aAAqB7B,EAAM2B,gBAAkBgZ,GAAM,CAI5D,IAHA,IAAIjnB,EAAQyB,EAAIumB,cAAc1b,EAAM2B,gBAChCwM,EAASnO,EAAM2B,eAAe2U,WAE3B5iB,EAAQ,GAAKya,EAAOza,EAAQ,IAAMyB,EAAIkqB,cAAclR,EAAOza,EAAQ,KACtEA,IAGJsM,EAAM+B,SAASoM,EAAQza,EAC3B,CAEA,OAA6B,IAAtBsM,EAAM6B,aAAqB7B,EAAM2B,gBAAkBgZ,CAC9D,EAEA2Z,QAAS,SAAS/F,EAAe5T,GAC7B,IAAI3a,EAAQuuB,EAAcV,aAE1B7tB,EAAMgC,UAAS,GAEf,IAAI8S,EAAQ9U,EAAM2B,eAEdxM,EAAI0mB,WAAW/G,IAAU9U,EAAM6B,aAAe1M,EAAIqnB,cAAc1H,KAChE9U,EAAM+B,SAAS+S,EAAMwB,WAAYnhB,EAAIumB,cAAc5G,GAAS,GAC5D9U,EAAMgC,UAAS,IAGnBhC,EAAMstB,OAAO3S,EAAMxlB,EAAIqnB,cAAc7B,IAErC,IAAI5I,EAAQ,GAUZ,OAFA,IAAIkc,EAAcjuB,GAAOqvB,UANzB,SAAe1U,GACNxlB,EAAIkqB,cAAc1E,IAAWxlB,EAAI0mB,WAAWlB,IAAS,cAAc7Z,KAAK6Z,EAAK9P,YAC9EkH,EAAMxkB,KAAKotB,EAEnB,KAIQ5I,EAAM9jB,MAClB,EAEAsmC,qBAAsB,SAASv0B,GAI3B,IAHA,IAAIw0B,EAAgBr/B,EAAI8tB,eAAejjB,EAAM2B,gBACzC8yB,EAAct/B,EAAI8tB,eAAejjB,EAAM4B,cAEd,IAAtB5B,EAAM6B,aAAqB7B,EAAM2B,gBAAkB6yB,GACtDx0B,EAAM+B,SAAS/B,EAAM2B,eAAe2U,WAAYnhB,EAAIumB,cAAc1b,EAAM2B,iBAG5E,SAAS+yB,EAAMjqB,EAAQ5H,GACnB,IAAI5U,EAASkH,EAAIqnB,cAAc3Z,GAE/B,GAAI4H,GAAUxc,EACV,OAAO,EAGX,IAAK,IAAI4B,EAAI4a,EAAQ5a,EAAI5B,EAAQ4B,IAC7B,IAAKsF,EAAIkqB,cAAcxc,EAAU4Z,WAAW5sB,IACxC,OAAO,EAIf,OAAO,CACX,CAEA,KAAO6kC,EAAM10B,EAAM8B,UAAW9B,EAAM4B,eAAiB5B,EAAM4B,cAAgB6yB,GACvEz0B,EAAMstB,OAAOttB,EAAM4B,aAAa0U,WAAYnhB,EAAIumB,cAAc1b,EAAM4B,cAAgB,GAGxF,OAAO5B,CACX,EAEAwyB,OAAQ,SAASxyB,GACb,IAAI0P,EAAS1P,EAAM6tB,aAEflsB,EAAiB+N,EAAO/N,eAAe8a,WAAkC,IAAvB/M,EAAO7N,YAAoB,EAAI6N,EAAO7N,YAAc,GACtGD,EAAe8N,EAAO9N,aAAa6a,WAAW/M,EAAO5N,WAEzD,IAAK+Z,EAAWla,KAAoBka,EAAWja,GAC3C,OAAO8N,EAGX,IAAIilB,EAAchzB,EAAekJ,UAC7B+pB,EAAahzB,EAAaiJ,UAE9B,IAAK8pB,IAAgBC,EACjB,OAAOllB,EAGX,IAAI7N,EAAc8yB,EAAYpiB,MAAM,IAAI+R,UAAU7d,KAAK,IAAIouB,OAAOrB,GAC9D1xB,EAAY8yB,EAAWC,OAAOrB,GAElC,OAAK3xB,GAAgBC,GAIrBA,GAA0B,GAAdA,EAAkB8yB,EAAW3mC,OAAS6T,EAClDD,GAA8B,GAAhBA,EAAoB,EAAI8yB,EAAY1mC,OAAS4T,EAE3D6N,EAAO3N,SAASJ,EAAgBE,GAChC6N,EAAO4d,OAAO1rB,EAAcE,GAErB4N,GATIA,CAUf,EAEA+iB,aAAc,SAASzyB,GACnB,IAAI2a,EAAO3a,EAAM2B,eACbsrB,EAAgBttB,EAAWutB,kBAAkBltB,GAEjD,GAAI2a,GAAQsS,GAAiBtS,GAAQsS,EAAc/sB,KAC/C,OAAO,EAGX,IAAIwP,EAAS1P,EAAM6tB,aAEfjvB,EAAQ+b,EAAK9P,UACjB,IAAKjM,EACD,OAAO,EAGX,IAAI+1B,EAAc/1B,EAAMk2B,UAAU,EAAGplB,EAAO7N,aACxC+yB,EAAah2B,EAAMk2B,UAAUplB,EAAO7N,aAEpCA,EAAc,EAAGC,EAAY,EAUjC,OARI6yB,IACA9yB,EAAc8yB,EAAYpiB,MAAM,IAAI+R,UAAU7d,KAAK,IAAIouB,OAAOrB,IAG9DoB,IACA9yB,EAAY8yB,EAAWC,OAAOrB,IAG3B3xB,GAAeC,CAC1B,GAGJ/U,EAAOmG,EAAQ,CACX+O,eAAgBA,EAChBkrB,SAAUA,EACVc,cAAeA,EACflB,aAAcA,EACdkE,gBAAiBA,EACjBjuB,aAAcA,EACdivB,OAAQA,EACRtyB,WAAYA,GAGf,CAlzCD,CAkzCGrR,OAAO1B,MAAM2sB,QAEhB,SAAUnrB,EAAGC,GACT,IAAIzB,EAAQ0B,OAAO1B,MACf2B,EAAQ3B,EAAM2B,MACd2E,EAAStG,EAAM6B,GAAGyG,OAClBC,EAAMjC,EAAOkC,IACb+b,EAAWvkB,EAAMukB,SACjBxR,EAAazM,EAAOyM,WACpBo1B,EAAgB,CAAC,KAAM,KAAM,QAAS,QAAS,SAwB/CC,EAAa,cACbC,EAA6B,IAAMD,EAAa,IAGhDtS,EAAgB,SAAS/H,GACzB,OAAOvsB,EAAEusB,GAAM5M,GAAG,iBACtB,EAEIub,EAAY,SAAS3O,GACrB,OAAOA,EAAKxa,cAAwD,SAAxCwa,EAAKxa,aAAa,kBAClD,EAEIszB,EAAkB,SAAS9Y,GAC3B,OAAOxlB,EAAIqtB,UAAU7H,EAAM2O,EAAW5G,EAC1C,EAgBI9Z,EAAoB,SAAS5I,GAC7B,QAAIyzB,EAAgBzzB,EAAM8C,6BAEf2wB,EAAgBzzB,EAAM2B,kBAAmB8xB,EAAgBzzB,EAAM4B,eAEzC,IADTjC,EAAWkJ,kBAAkB7I,GAC/B/R,OAK1B,EAEIinC,EAAW,SAASjnC,GAGpB,IAFA,IAAIyhB,EAAS,GACTylB,EAAQ,iEACHtlC,EAAI5B,GAAU,GAAI4B,EAAI,IAAKA,EAChC6f,GAAUylB,EAAMjC,OAAO1d,KAAK4f,MAAsB,GAAhB5f,KAAK6f,WAE3C,OAAO3lB,CACX,EAgCI4lB,EAAoB,SAASriC,GAC7B,IAAIhG,EAAUgG,EAAOA,EAAKhG,QAjHlC,UAkHYA,GAAWA,EAAQwW,QACnBxW,EAAQwW,OAAO8xB,aAAa,CAAE10B,YAAY,GAElD,EAEI8H,EAAapa,EAAMxB,OAAO,CAC1BC,KAAM,SAASkI,GACX9H,KAAK8H,OAASA,EACd9H,KAAKqkC,qBAAuB,CAAC,EAC7BrkC,KAAKH,QAAUmB,EAAErB,OAAO,CAAC,EAAGmI,GAAUA,EAAOjI,SAAWiI,EAAOjI,QAAQ4T,YAEvE,IAAIhC,EAAQjS,EAAM6B,GAAGyE,OAAOC,aAC5BmiC,EAAkBz2B,EAAMxO,aACxBilC,EAAkBz2B,EAAMvO,eACxBglC,EAAkBz2B,EAAMtO,cACxB+kC,EAAkBz2B,EAAMrO,YAC5B,EAEA+7B,UAAW,SAAS5R,GAChB,IACIjgB,EADAgV,EAAStiB,KAAKooC,QAAQ7a,GAW1B,OARoC,IAAhCjL,EAAOsD,QAAQgiB,IACft6B,EAAKtN,KAAK8nC,WACVxlB,EAASA,EAAO7c,QAAQ,IAAK,IAAMmiC,EAAa,KAAOt6B,EAAK,OAE5DA,EAAKgV,EAAOsV,MAAM,kCAAkC,GAGxD53B,KAAKqkC,qBAAqB/2B,GAAMigB,EACzBjL,CACX,EAEA8lB,QAAS,SAAS7a,GACd,IAEI9Q,EAFAxM,EAAgBjQ,KAAKH,QAAQoQ,cAIjC,cAH+BA,GAI3B,IAAK,SACD,OAAO8T,EAAS9T,EAAT8T,CAAwBwJ,GACnC,IAAK,WACD,OAAOtd,EAAcsd,GACzB,QAEI,MAAO,KADP9Q,EAAW1U,EAAIxF,KAAKgrB,IACI,MAAQ9Q,EAAW,IAEvD,EAEAqgB,YAAa,SAASvP,GAClB,IAAI3lB,EAAO5H,KACP+P,EAAkB/P,KAAKH,QAAQkQ,gBAEnC/O,EAAE6mC,EAA4Bta,GAAMpW,MAAK,WACrC,IAAI7J,EAAKtN,KAAK+S,aAAa60B,GACvB1L,EAAYt0B,EAAKy8B,qBAAqB/2B,GACtC9N,EAAMu8B,WAAWhsB,IACjBA,EAAgB/P,KAAMk8B,GAE1Bl7B,EAAEhB,MAAMqoC,YAAYnM,EACxB,IAEAt0B,EAAKy8B,qBAAuB,CAAC,CACjC,EAEAyD,SAAU,SAASjnC,GACf,OAAOinC,EAASjnC,EACpB,EAEAyb,QAAS,SAASpT,EAAG0J,GACjB,IA5EmBgK,EACnBlb,EA2EI4mC,GA5Ee1rB,EA4EU1T,EAAE0T,QA3E/Blb,EAAOlC,EAAMkC,KACVkb,IAAYlb,EAAKmb,WAAaD,GAAWlb,EAAKob,QA8EjD,GAHyBwrB,GAActoC,KAAKuoC,gBAAgBr/B,EAAG0J,KACzD01B,GAActoC,KAAKwoC,cAAct/B,EAAG0J,GAItC,OADA1J,EAAEgU,kBACK,CAEf,EAEAsrB,cAAe,SAASt/B,EAAG0J,GACvB,IACII,EADShT,KAAK8H,OACIkL,SAEtB,OAAOJ,EAAM0D,YAActD,EAASy1B,kBAChCz1B,EAAS01B,YAAYx/B,IAAMsS,EAAkB5I,EACrD,EAEA21B,gBAAiB,SAASr/B,EAAG0J,GACzB,IAAIlR,EAAOlC,EAAMkC,KACbinC,EAAYz/B,EAAE0T,UAAYlb,EAAKmb,UAC/B+rB,EAAM1/B,EAAE0T,SAAWlb,EAAKob,OAE5B,IAAK6rB,IAAcC,EACf,OAAO,EAEX,IAAIC,GAAiB,EACrB,GAAIj2B,EAAM0D,UAAW,CACjB,GAAIkF,EAAkB5I,GAClB,OAAO,EAEX,IAAIspB,EAAYl8B,KAAK8oC,cAAcl2B,EAAOg2B,GAC1C,GAAI1M,GAAayM,EAAW,CACxB,IAAII,EAAqBhhC,EAAIG,QAAQ0K,EAAM8C,wBAAyB,MACpE,GAAIqzB,EAAoB,CACpB,IAAIC,EAAqBjhC,EAAIG,QAAQg0B,EAAW,MAChD,GAAI8M,GAAsBA,IAAuBD,EAC7C,OAAOF,CAEf,CACJ,CACA,GAAI3M,IAAcn0B,EAAIqqB,UAAU8J,GAAY,CACxC,GAAIn0B,EAAIgoB,aAAamM,EAAWyL,KAAmB5/B,EAAIgoB,aAAand,EAAM8C,wBAAyBiyB,GAAgB,CAC/G,KAAOzL,GAAuD,GAA1CA,EAAUhT,WAAWmG,WAAWxuB,QAChDq7B,EAAYA,EAAUhT,WAE1B,GAAInhB,EAAIqqB,UAAU8J,GACd,OAAO2M,EAEX7oC,KAAKipC,iBAAiB/M,EAAWtpB,EACrC,CACAi2B,GAAiB,CACrB,CACJ,CACA,OAAOA,CACX,EAEAC,cAAe,SAASl2B,EAAOs2B,GAC3B,IAAIC,EAAkBv2B,EAAM8C,wBAC5B,GAAI3N,EAAI8pB,MAAMsX,IAAsBD,GAAY32B,EAAW20B,QAAQt0B,EAAOu2B,KAAuBD,GAAY32B,EAAW00B,UAAUr0B,EAAOu2B,GAAoB,CACzJ,IAAI7rB,EAAOtd,KAAKopC,UAAUD,EAAiBD,GAC3C,GAAI5rB,GAAQvV,EAAIsrB,QAAQ/V,KAAU+oB,EAAgB/oB,GAC9C,KAAOA,GAAQA,EAAKgf,UAAYhf,EAAKgf,SAAS4M,EAAW,EAAI5rB,EAAKgf,SAASz7B,OAAS,IAChFyc,EAAOA,EAAKgf,SAAS4M,EAAW,EAAI5rB,EAAKgf,SAASz7B,OAAS,GAGnE,OAAOwlC,EAAgB/oB,EAC3B,CACJ,EAEA2rB,iBAAkB,SAAS/M,EAAWtpB,GAClC,IAAI9K,EAAS9H,KAAK8H,OACduhC,EAAoB,IAAIvjC,EAAO8P,aAAahD,EAAO9K,EAAOgL,MAC9D/K,EAAIsN,OAAO6mB,GACXp2B,EAAO8gB,cAAc9e,EAAQuhC,EACjC,EAEAD,UAAW,SAAS7b,EAAM2b,GAGtB,IAFA,IACoB5rB,EADhB6V,EAAU+V,EAAW,cAAgB,kBACrC7mB,EAAUkL,EACPlL,IAAY/E,IAASvV,EAAIiuB,uBAAuB3T,KACnD/E,EAAO+E,EAAQ8Q,KACHprB,EAAI0mB,WAAWnR,IAAS,gBAAgB5J,KAAK4J,EAAKG,aAE1DH,GADA+E,EAAU/E,GACK6V,IAEd7V,IACD+E,EAAUA,EAAQ6G,YAG1B,OAAO5L,CACX,IAGJ/B,EAAW2gB,UAAYA,EACvB3gB,EAAW8qB,gBAAkBA,EAC7B9qB,EAAW+tB,mBAzOc,SAAS12B,GAC9B,IAAI22B,EAAuBlD,EAAgBzzB,EAAM2B,gBAC7Ci1B,EAAqBnD,EAAgBzzB,EAAM4B,eAE3C+0B,GAAwBC,KACpBD,GACA32B,EAAMutB,eAAeoJ,GAErBC,GACA52B,EAAM0tB,YAAYkJ,GAG9B,EA8NAjuB,EAAWC,kBAAoBA,EAC/BD,EAAW4L,iBAlRY,CACf,OACA,SACA,YACA,gBACA,cACA,YACA,YACA,YACA,WACA,WACA,aACA,SACA,WACA,gBACA,iBACA,cACA,cACA,YACA,eACA,aACA,aACA,mBA6PR5L,EAAW+oB,iBAzMY,SAAShZ,GAC5B,IAA4C7O,EAAUnP,EAAIm8B,EAAtDpF,EAAuB,CAAE9e,OAAO,GAUpC,OATCvkB,EAAEsqB,GAAM/hB,KAnDY,6BAmDa4N,MAAK,SAAS1U,EAAG8qB,GAC/C9Q,EAAW1U,EAAIxF,KAAKgrB,GACpBjgB,EAAKw6B,IACL2B,EAAa,IAAMhtB,EAAW,IAAMmrB,EAAa,KAAOt6B,EAAK,OAASmP,EAAW,IACjF4nB,EAAqB/2B,GAAM,CAAEigB,KAAMA,EAAM7iB,MAAO1J,EAAEusB,GAAMnV,KAAK,UAC7DisB,EAAqB9e,OAAQ,EAC7BvkB,EAAEusB,GAAM8a,YAAYoB,EACxB,IAEOpF,CACX,EA8LA9oB,EAAWgpB,kBA5La,SAASjZ,EAAM+Y,GACnC,IAAI/2B,EAAI4uB,EACRl7B,EAAEsqB,GAAM/hB,KAAKs+B,GAA4B1wB,MAAK,SAAS1U,EAAG8qB,GACtDjgB,EAAKigB,EAAKxa,aAAa60B,GACvB1L,EAAYmI,EAAqB/2B,GACjCtM,EAAEusB,GAAM8a,YAAYnM,EAAU3O,MAC1B2O,EAAUxxB,OAAS1J,EAAEk7B,EAAU3O,MAAMnV,KAAK,UAC1CpX,EAAEk7B,EAAU3O,MAAM/C,WAAW,SAASpS,KAAK,QAAS8jB,EAAUxxB,MAEtE,GACJ,EAoLA5E,EAAOyV,WAAaA,CACvB,CA/RD,CA+RGra,OAAO1B,MAAM2sB,QAEhB,SAAUnrB,GAGN,IAAIxB,EAAQ0B,OAAO1B,MACf2B,EAAQ3B,EAAM2B,MACd0G,EAAWrI,EAAM6B,GAAGyG,OACpBC,EAAMF,EAASG,IACf4N,EAAe/N,EAAS+N,aACxBivB,EAASh9B,EAASg9B,OAClBllC,EAASqB,EAAErB,OAanB,IAAI+pC,EAAUvoC,EAAMxB,OAAO,CACvBC,KAAM,SAASC,GACXG,KAAKH,QAAUA,EACfG,KAAK2pC,aAAe,IAAI/zB,EAAa/V,EAAQ+S,MAAO/S,EAAQiT,KAAM,CAAEW,WAAY5T,EAAQ4T,aACxFzT,KAAKo0B,OAAS,IAAIyQ,EAClB7kC,KAAK4pC,UAAY/pC,EAAQ+pC,SAC7B,EAEAv2B,SAAU,WACN,OAAOrT,KAAK2pC,aAAap0B,SAC7B,EAEAs0B,UAAW,SAASzE,GAChB,OAAOplC,KAAKo0B,OAAO+Q,IAAInlC,KAAKqT,WAAY+xB,EAC5C,EAEA0E,aAAc,SAASl3B,GACnB5S,KAAKo0B,OAAO/e,OAAOzC,GACnB5S,KAAK8H,OAAOqL,YAAYP,EAC5B,EAEApS,KAAM,WACF,IAAIupC,EAAQ/pC,KAAK2pC,aACjBI,EAAMtF,cACNzkC,KAAK8H,OAAOqL,YAAY42B,EAAMx0B,UAClC,EAEA5U,KAAM,WACFX,KAAK0S,MACT,EAEAs3B,aAAc,SAAS5jC,EAASvG,GAC5B,IAAIiI,EAAS9H,KAAK8H,OAElB,OAAO9G,EAAEoF,GAAS+U,SAAS1U,SAASqM,MAC/BmO,YAAYthB,EAAO,CAAC,EAAGmI,EAAOjI,QAAQmR,cAAenR,IACrDqI,QAAQ,aACRiQ,SAAS,mBACT4O,YAAY,QAASvnB,EAAM+B,QAAQyX,MAAMlR,EAAOwB,UAAU4zB,KACnE,EAEAxqB,KAAM,WACF,IAAIE,EAAQ5S,KAAK6pC,WAAU,GAC3B7pC,KAAK4pC,UAAU9hC,OAAS9H,KAAK8H,OAC7B9H,KAAK4pC,UAAUrpB,OAAO3N,GACtB5S,KAAK8pC,aAAal3B,EACtB,EAEAa,WAAY,WACR,OAAOzT,KAAK8H,QAAU9H,KAAK8H,OAAOjI,QAAQ4T,UAC9C,EAEA61B,mBAAoB,SAAS12B,GACrB5S,KAAKyT,eACLjU,EAAM6B,GAAGyG,OAAOyT,WAAW+tB,mBAAmB12B,GAC9C5S,KAAK2pC,aAAe,IAAI/zB,EAAahD,EAAO5S,KAAK8H,OAAOgL,MAEhE,EAEAm3B,uBAAwB,UAASrgC,SAAEA,EAAQsgC,iBAAEA,EAAgBC,iBAAEA,IAC3D,MAAO,gFACP3qC,EAAMwV,KAAKo1B,aAAa,mCAAmCxgC,EAASsC,wBAAyB,CAAEm+B,WAAY,UAAWxnC,KAAMqnC,IAC5H1qC,EAAMwV,KAAKo1B,aAAa,kCAAkCxgC,EAASwC,wBAAyB,CAAEvJ,KAAMsnC,IACxG,QACA,IAGAG,EAAiBnpC,EAAMxB,OAAO,CAC9BC,KAAM,SAASypC,EAAmBkB,GAC9BvqC,KAAK8S,KAAOu2B,EAAkBv2B,KAC9B9S,KAAKqpC,kBAAoBA,EACzBrpC,KAAKuqC,gBAAkBA,CAC3B,EAEA5pC,KAAM,WACFoH,EAAImtB,eAAel1B,KAAK8S,MAExB9S,KAAK8S,KAAKqP,UAAYniB,KAAKuqC,gBAAgBv1B,KAC3ChV,KAAK8H,OAAOqL,YAAYnT,KAAKuqC,gBAAgBh1B,UACjD,EAEA/U,KAAM,WACFuH,EAAImtB,eAAel1B,KAAK8S,MAExB9S,KAAK8S,KAAKqP,UAAYniB,KAAKqpC,kBAAkBr0B,KAC7ChV,KAAK8H,OAAOqL,YAAYnT,KAAKqpC,kBAAkB9zB,UACnD,IAGJ5V,EAAOkI,EAAU,CACb+e,cArGJ,SAAsB9e,EAAQuhC,GAC1B,IAAIkB,EAAkBziC,EAAOwN,sBAAwB,IAAIM,EAAa9N,EAAOuL,WAAYvL,EAAOgL,MAC5F1S,EAAU,IAAIkqC,EAAejB,EAAmBkB,GAMpD,OALAnqC,EAAQ0H,OAASA,EAEjBA,EAAOe,cAAc1I,KAAKC,GAC1B0H,EAAOgP,gBAEAyzB,CACX,EA6FIb,QAASA,EACTY,eAAgBA,GAGnB,CArHD,CAqHGppC,OAAO1B,MAAM2sB,QAEhB,SAAUnrB,EAAGC,GAEb,IAAIzB,EAAQ0B,OAAO1B,MACfG,EAASqB,EAAErB,OACXmG,EAAStG,EAAM6B,GAAGyG,OAClB1F,EAAc0D,EAAO1D,YACrBsnC,EAAU5jC,EAAO4jC,QACjBvf,EAAOrkB,EAAOqkB,KACdpiB,EAAMjC,EAAOkC,IAEbwiC,EAAkBd,EAAQ/pC,OAAO,CACjCC,KAAM,SAASC,GACX,IAAI4qC,EAAMzqC,KACVyqC,EAAI5qC,QAAUA,EACd6pC,EAAQ5pC,GAAGF,KAAKG,KAAK0qC,EAAK5qC,GAC1B4qC,EAAItmB,WAAa,KACjBsmB,EAAI72B,OAAQ,CAChB,EAEAlB,KAAM,WACF,IAMItM,EAASC,EANTuB,EAAO5H,KACP8H,EAASF,EAAKE,OACdjI,EAAUiI,EAAOjI,QACjB+J,EAAW9B,EAAOjI,QAAQ+J,SAC1B8gC,EAAS1pC,EAAExB,EAAMukB,SAASymB,EAAgBzmB,SAA/BvkB,CAAyCoK,IAAWuR,SAAS1U,SAASqM,MACjFqC,EAAW,gCA2Bf,SAASmE,EAAMpQ,GACXA,EAAEgU,iBAEFwtB,EAAO3wB,KAAK,eAAerI,UAEvB5J,EAAO2L,aACP3L,EAAO2L,WAAW4wB,qBAAuB,CAAC,GAG9Cv8B,EAAOkM,OACX,CAlCAnU,EAAQoQ,cAAcwD,WAAa3L,EAAO2L,WAE1CpN,EAAW0B,EAAIma,eAAepa,EAAOgL,MAErC1M,EAAUhE,EAAY+D,cAAc2B,EAAO0J,QAASnL,GACpDD,EAAUokC,EAAgB9mC,OAAO0C,GACjCA,EAAUhE,EAAYmE,iBAAiBH,EAASC,GAEhDxG,EAAQoQ,cAAcwD,WAAaxS,EA4BnC,IAAIC,EAASlB,KAAKgqC,aAAaU,EAAQ,CACnCzyB,MAAOrO,EAAS5F,SAChB2mC,gBAAiBH,EAAgBG,gBACjCC,gBAAiBhhC,EACjBgD,MAAO,IACPC,OAAQ,IACRiD,WAAW,EACXwJ,MAAOA,EACP+H,SAAS,IAER9X,KAAK4L,GAAUC,IAAIhP,GAAS82B,MAC5BnjB,KAAK,eAEN7Y,EAAO2pC,SAAS/xB,OAEhB5X,EAAOoI,QAAQC,KAAK,oBAAoBmX,GAAG,SAzC/C,SAAexX,GACXrJ,EAAQkQ,gBAAgB0D,WAAa3L,EAAO2L,WAC5C3L,EAAO0J,MAAMk5B,EAAOnhC,KAAK4L,GAAUC,OACnCvV,EAAQkQ,gBAAgB0D,WAAaxS,EAErCqY,EAAMpQ,GAEFtB,EAAKiM,QACLjM,EAAKiM,SAGT/L,EAAOpH,QAAQ,SACnB,IA6B+Dw8B,MAC3Dh8B,EAAOoI,QAAQC,KAAK,mBAAmBmX,GAAG,QAASpH,GAAO4jB,MAC9DwN,EAAOnhC,KAAK4L,GAAUzU,QAAQ,QAClC,IAGJf,EAAO6qC,EAAiB,CACpBzmB,SAAU,IACV,qPAGA4mB,gBAAiB,EAAG1+B,eAAcG,kBAClC,gFACI5M,EAAMwV,KAAKo1B,aAAa,mCAAmC5qC,EAAMq/B,WAAW5yB,cAA0B,CAAEo+B,WAAY,UAAWxnC,KAAM,UACrIrD,EAAMwV,KAAKo1B,aAAa,kCAAkC5qC,EAAMq/B,WAAWzyB,cAA0B,CAAEvJ,KAAM,mBACjH,SACAa,OAAQ,SAAS0C,GACb,OAAOA,EAAQX,QAAQ,2CAA4C,WACpDA,QAAQ,wBAAyB,eACjCA,QAAQ,YAAa,YACrBA,QAAQ,MAAO,GAClC,IAGJjG,EAAM6B,GAAGyG,OAAO0iC,gBAAkBA,EAElC1kC,EAAO1D,YAAYuD,aAAa,WAAY,IAAIwkB,EAAK,CAAE/pB,QAASoqC,IAE/D,CA3GD,CA2GGtpC,OAAO1B,MAAM2sB,QAEhB,SAAUnrB,GAEV,IAAIxB,EAAQ0B,OAAO1B,MACfG,EAASqB,EAAErB,OACXmG,EAAStG,EAAM6B,GAAGyG,OAClBqiB,EAAOrkB,EAAOqkB,KACduf,EAAU5jC,EAAO4jC,QACjBtnC,EAAc0D,EAAO1D,YAErB0oC,EAAgBpB,EAAQ/pC,OAAO,CAC/BC,KAAM,SAASC,GACXA,EAAQ+pC,UAAY/pC,EAAQ+pC,YAC5B,IAAIvzB,EAASxW,EAAQ+pC,UAAUvzB,OAC3BA,GAAUjU,EAAYE,aAAa,YAAa+T,EAAO7T,SACvD6T,EAAO8xB,aAAa,CAAE10B,WAAY5T,EAAQ4T,aAE9Ci2B,EAAQ5pC,GAAGF,KAAKG,KAAKC,KAAMH,EAC/B,IAGAkrC,EAAa5gB,EAAKxqB,OAAO,CACzBC,KAAM,SAASC,GACXsqB,EAAKrqB,GAAGF,KAAKG,KAAKC,KAAMH,EAC5B,EAEAO,QAAS,SAASgqB,GAGd,OAAO,IAAI0gB,EAAcnrC,EAAOyqB,EAAkB,CAC9Cwf,UAHO5pC,KAGSH,QAAQ+pC,YAEhC,EAEAzhC,OAAQ,SAAS9G,EAAIsjB,GACjB,IAAInO,EAAcxW,KAAKH,QAAQwW,OAAOG,YAAYmO,GAC9Cnb,EAAUnI,EAAG6G,QAAQ,cAAc8iC,kBAEnCxhC,GAAWnI,EAAG4pC,wBACdzhC,EAAQ+W,OAAOlf,EAAImV,EAE3B,IAGJxV,EAAErB,OAAOmG,EAAQ,CACbglC,cAAeA,EACfC,WAAYA,GAGf,CAhDD,CAgDG7pC,OAAO1B,MAAM2sB,QAEhB,SAAUnrB,GAEV,IAAIxB,EAAQ0B,OAAO1B,MACf2B,EAAQ3B,EAAM2B,MACd2E,EAAStG,EAAM6B,GAAGyG,OAClB5B,EAAU1G,EAAM6B,GAAGyE,OAAOhG,GAAGD,QAAQqG,QACrCikB,EAAOrkB,EAAOqkB,KACd4gB,EAAajlC,EAAOilC,WACpBhjC,EAAMjC,EAAOkC,IACbuK,EAAazM,EAAOyM,WACpB5S,EAASqB,EAAErB,OACXgG,EAAeG,EAAO1D,YAAYuD,aAClCK,EAAiBF,EAAO1D,YAAY4D,eACpCklC,EAAe,wBAEfze,EAAU,WAEV0e,EAAqBhqC,EAAMxB,OAAO,CAClCC,KAAM,SAAS4C,GACXxC,KAAKwC,OAASA,CAClB,EAEA4oC,iBAAkB,SAASC,GACvB,IAII9d,EAJA+d,EAAiB,EACjBC,EAAoB,EACpBC,EAAc,EACdtiB,EAAamiB,EAAcniB,WAG/B,IAAKqE,EAAOrE,EAAWuE,WAAYF,EAAMA,EAAOA,EAAKI,YAC7CJ,GAAQ8d,IACJ9d,EAAK3T,WAAa6S,EAClB+e,IACwB,GAAjBje,EAAK/P,SACZ8tB,IAEAC,KAKZ,OAAIC,EAAc,GAAKtiB,EAAWuE,WAAW7T,WAAa6S,GAAWvD,EAAW2J,UAAUjZ,WAAa6S,EAE5F,EAEA8e,EAAoBD,CAEnC,EAEAG,aAAc,SAASC,EAAY5M,GAC/B,IAAKA,GAAQ9+B,KAAKorC,iBAAiBM,GAAc,EAC7C,OAAO,KAMX,IAHA,IAAIne,EAAOme,EAAWxiB,WAClBvmB,EAAO3C,KAAKwC,OAAO,GAAGG,MAElBoF,EAAIwtB,OAAOhI,EAAM5qB,IAAO,CAC5B,GAAI3C,KAAKorC,iBAAiB7d,GAAQ,EAC9B,OAAO,KAGXA,EAAOA,EAAKrE,UAChB,CAEA,OAAOqE,CACX,EAEAoe,WAAY,SAASD,GACjB,IAEIjpC,EAAGkqB,EAAKY,EAAM5qB,EAAMwhB,EAFpB3hB,EAASxC,KAAKwC,OACdotB,EAAa7nB,EAAI6nB,WAGrB,IAAKntB,EAAI,EAAGkqB,EAAMnqB,EAAO3B,OAAQ4B,EAAIkqB,EAAKlqB,IAAK,CAK3C,GAJA8qB,EAAOme,EACP/oC,EAAOH,EAAOC,GAAGE,KACjBwhB,EAAa3hB,EAAOC,GAAG2V,KAEnBmV,GAAQxlB,EAAIwtB,OAAOhI,EAAM5qB,IAASitB,EAAWrC,EAAMpJ,GACnD,OAAOoJ,EAGX,KAAOA,GAEH,IADAA,EAAOxlB,EAAIgoB,aAAaxC,EAAM5qB,KAClBitB,EAAWrC,EAAMpJ,GACzB,OAAOoJ,CAGnB,CAEA,OAAO,IACX,EAEA/W,YAAa,SAASmO,GAClB,IAAIliB,EAAGkqB,EAEP,IAAKlqB,EAAI,EAAGkqB,EAAMhI,EAAM9jB,OAAQ4B,EAAIkqB,EAAKlqB,IACrC,GAAIzC,KAAK2rC,WAAWhnB,EAAMliB,IACtB,OAAO,EAGf,OAAO,CACX,IAGAmpC,EAAkBzqC,EAAMxB,OAAO,CAC/BC,KAAM,SAAS4C,EAAQ4gB,GACnBpjB,KAAKqW,OAAS,IAAI80B,EAAmB3oC,GACrCxC,KAAKmkB,WAAaxkB,EAAO,CAAC,EAAG6C,EAAO,GAAG4V,KAAMgL,GAC7CpjB,KAAK2Z,IAAMnX,EAAO,GAAGG,KAAK,EAC9B,EAEAme,KAAM,SAASyM,GACX,OAAOxlB,EAAI+Y,KAAKyM,EAAMxlB,EAAIghB,OAAOwE,EAAKyC,cAAehwB,KAAK2Z,IAAK3Z,KAAKmkB,YACxE,EAEA0nB,SAAU,SAASj5B,EAAO+R,GAClB3kB,KAAKqW,OAAOG,YAAYmO,IACxB3kB,KAAKmlB,MAAMvS,GACX5S,KAAKqV,OAAOsP,IAEZ3kB,KAAKo3B,MAAMzS,EAEnB,EAEApE,OAAQ,SAAS3N,GACb,IACI+R,GADY3kB,KAAKyT,aAAelB,EAAWkJ,kBAAoBlJ,EAAW6D,WACxDxD,GAElB+R,EAAM9jB,OAAS,GACfb,KAAK6rC,SAASj5B,EAAO+R,EAE7B,EAEAlR,WAAY,WACR,OAAOzT,KAAK8H,QAAU9H,KAAK8H,OAAOjI,QAAQ4T,UAC9C,EAEA2jB,MAAO,SAASzS,GACZ,IACIliB,EAAGy3B,EAAG3M,EAAMue,EADZC,EAAc,GAGlB,GAAIpnB,EAAM9jB,OAAS,EACf,IAAK4B,EAAI,EAAGy3B,EAAIvV,EAAM9jB,OAAQ4B,EAAIy3B,EAAGz3B,IACjC8qB,EAAO5I,EAAMliB,GACbqpC,EAAa9rC,KAAKwC,OAAO+qB,GAAM,GAC/Bwe,EAAY5rC,KAAK2rC,QAIrBve,EAAO5I,EAAM,GACbmnB,EAAa9rC,KAAKwC,OAAO+qB,GAAM,GAGnCvtB,KAAKgsC,YAAYD,EACrB,EAEAvpC,OAAQ,SAAS+qB,EAAM0e,GACnB,IAAIH,EAAa9rC,KAAKqW,OAAOo1B,aAAale,GACtCpJ,EAAankB,KAAKmkB,WAClBoa,EAAYpa,GAAaA,EAAWzZ,OAAc,CAAC,EAEvD,GAAIohC,EACI/jC,EAAI4Y,GAAGmrB,EAAY,UACfvN,EAAUnN,OACV0a,EAAW5V,gBAAgB,SAE3BqI,EAAUn0B,UACV0hC,EAAW5V,gBAAgB,QAE3BqI,EAAUj0B,UACVwhC,EAAW5V,gBAAgB,SAGnCnuB,EAAIqQ,KAAK0zB,EAAY3nB,OAClB,CACH,MAAQpc,EAAIsrB,QAAQ9F,EAAKrE,aAAoD,GAArCqE,EAAKrE,WAAWmG,WAAWxuB,QAAmD,SAApC0sB,EAAKrE,WAAW4M,iBAA8BmW,GAC5H1e,EAAOA,EAAKrE,WAGhB4iB,EAAa9rC,KAAK8gB,KAAKyM,EAC3B,CAEA,OAAOue,CACX,EAEAz2B,OAAQ,SAASsP,GACb,IAAIliB,EAAGy3B,EAAG4R,EAEV,IAAKrpC,EAAI,EAAGy3B,EAAIvV,EAAM9jB,OAAQ4B,EAAIy3B,EAAGz3B,KACjCqpC,EAAa9rC,KAAKqW,OAAOs1B,WAAWhnB,EAAMliB,OAElCzC,KAAKmkB,YAAcnkB,KAAKmkB,WAAWzZ,OACnC3C,EAAIuuB,QAAQwV,EAAY9rC,KAAKmkB,WAAWzZ,OACnCohC,EAAWphC,MAAMkrB,SAAYkW,EAAW3nB,WAAkB,OAC3Dpc,EAAIguB,OAAO+V,IAGf/jC,EAAIguB,OAAO+V,GAI3B,EAEA3mB,MAAO,SAASvS,GACZ,IAEInQ,EAAGqpC,EAFHnnB,EAAQpS,EAAW6D,UAAUxD,GAC7BsnB,EAAIvV,EAAM9jB,OAGd,GAAIq5B,EAAI,EACJ,IAAKz3B,EAAI,EAAGA,EAAIy3B,EAAGz3B,KACfqpC,EAAa9rC,KAAKqW,OAAOs1B,WAAWhnB,EAAMliB,MAEtC8P,EAAW4S,MAAMvS,EAAOk5B,GAAY,EAIpD,EAEAE,YAAa,SAASrnB,GAGlB,IAFA,IAAI4I,EAAMtR,EAEH0I,EAAM9jB,OAAS,GAQlB,GAPA0sB,EAAO5I,EAAMunB,MACbjwB,EAAO0I,EAAMA,EAAM9jB,OAAS,GAExB0sB,EAAKiB,iBAAmBjB,EAAKiB,gBAAgB5U,WAAa6S,GAC1DxQ,EAAKH,YAAYyR,EAAKiB,iBAGtBjB,EAAKxL,SAAW9F,EAAK8F,SACrBwL,EAAKiB,iBAAmBvS,GACxBsR,EAAK7iB,MAAMkrB,SAAW3Z,EAAKvR,MAAMkrB,SACjCrI,EAAK3T,YAAcqC,EAAKrC,UAAW,CAEnC,KAAO2T,EAAKE,YACRxR,EAAKH,YAAYyR,EAAKE,YAG1B1lB,EAAIsN,OAAOkY,EACf,CAER,IAGA4e,EAA2BhB,EAAmBxrC,OAAO,CACrDC,KAAM,SAAS4C,EAAQ4pC,EAAgBC,GACnCrsC,KAAKwC,OAASA,EACdxC,KAAKosC,eAAiBA,EACtBpsC,KAAKqsC,SAAWA,EAChBlB,EAAmBrrC,GAAGF,KAAKG,KAAKC,KAAMwC,EAC1C,EAEA8pC,kBAAmB,SAAS/e,GACxB,IAEI9qB,EAAGy3B,EAAGxE,EAAWnzB,EAAMgqC,EAAgB/7B,EAAKg8B,EAAMC,EAAU9f,EAC5D+f,EAAkBjO,EAAUjtB,EAH5B2S,EAAaoJ,EAAKpJ,WAClBzN,EAAOlX,EAAMkX,KAIjB,GAAKyN,EAIL,IAAK1hB,EAAI,EAAGy3B,EAAI/V,EAAWtjB,OAAQ4B,EAAIy3B,EAAGz3B,IAAK,CAK3C,GAHAF,GADAmzB,EAAYvR,EAAW1hB,IACNga,SACjB8vB,EAAiB7W,EAAUjY,UAEvBiY,EAAUC,WAAqB,SAARpzB,EAIvB,IAAKkqC,EAAW,EAAG9f,GAFnBnc,EAAMkG,EAAK61B,GAAkBhf,EAAK7iB,MAAMkrB,SAASzQ,MAAM,MAE1BtkB,OAAQ4rC,EAAW9f,EAAK8f,IAEjD,IADAD,EAAOh8B,EAAIi8B,IACF5rC,OAAQ,CAKb,GAHA49B,EAAW/nB,GADXg2B,EAAmBF,EAAKrnB,MAAM,MACG,GAAGzf,eACpC8L,EAAQkF,EAAKg2B,EAAiB,IAE1BjO,GAAYz+B,KAAKosC,eACjB,SAGJ,OAAO3N,EAAS7Y,QAAQ,UAAY,EAAI7d,EAAIopB,MAAM3f,GAASA,CAC/D,CAIR,GAAIxR,KAAKqsC,UAAY3W,EAAUC,WAAapzB,GAAQvC,KAAKqsC,SAIrD,OAHA5N,EAAW/I,EAAUjY,UACrBjM,EAAQkkB,EAAUjY,UAEXghB,EAAS7Y,QAAQ,UAAY,EAAI7d,EAAIopB,MAAM3f,GAASA,CAEnE,CACJ,EAEAm7B,eAAgB,SAASpf,GACrB,IAEI9qB,EAAGkqB,EAAKnb,EADRmQ,EADQ3gB,EAAE+G,EAAI0mB,WAAWlB,GAAQA,EAAKrE,WAAaqE,GACnCqf,aAAa,qBAAqBC,UAAUC,UAAU5V,UAG1E,IAAKz0B,EAAI,EAAGkqB,EAAMhL,EAAQ9gB,OAAQ4B,EAAIkqB,EAAKlqB,IAGvC,GAFA+O,EAA+B,aAAvBxR,KAAKosC,eAAgCzqB,EAAQlf,GAAGmX,UAAY5Z,KAAKssC,kBAAkB3qB,EAAQlf,IAG/F,OAAO+O,EAIf,MAAO,SACX,EAEA+E,UAAW,SAASoO,GAChB,IAA4CliB,EAAGkqB,EAA3CrK,EAAStiB,KAAK2sC,eAAehoB,EAAM,IAEvC,IAAKliB,EAAI,EAAGkqB,EAAMhI,EAAM9jB,OAAQ4B,EAAIkqB,EAAKlqB,IACrC,GAAI6f,GAAUtiB,KAAK2sC,eAAehoB,EAAMliB,IACpC,MAAO,GAIf,OAAO6f,CACX,EAEA9L,YAAa,SAASmO,GAClB,MAAiC,KAA1B3kB,KAAKuW,UAAUoO,EAC1B,IAGAooB,EAAwBnB,EAAgBjsC,OAAO,CAC/CC,KAAM,SAAS4C,EAAQ4gB,EAAQgpB,GAC3BR,EAAgB9rC,GAAGF,KAAKG,KAAKC,KAAMwC,EAAQ4gB,GAE3CpjB,KAAKojB,OAASA,EACdpjB,KAAKqW,OAAS,IAAI81B,EAAyB3pC,EAAQ4pC,GAE/CA,IACApsC,KAAKosC,eAAiB5sC,EAAMwtC,YAAYZ,GAGhD,EAEAP,SAAU,SAASj5B,EAAO+R,GACtB,IAAIynB,EAAiBpsC,KAAKosC,eACtBa,EAAS,QAEbjtC,KAAKmlB,MAAMvS,GAEPw5B,GAAuD,WAArCpsC,KAAKojB,OAAO1Y,MAAM0hC,KACpCa,EAAS,UAGbjtC,KAAKitC,GAAQtoB,EACjB,IAGAuoB,EAAmBnC,EAAWprC,OAAO,CACrCC,KAAM,SAASC,GACXkrC,EAAWjrC,GAAGF,KAAKG,KAAKC,KAAML,EAAOE,EAAS,CAC1CwW,OAAQ,IAAI80B,EAAmBtrC,EAAQ2C,QACvConC,UAAW,WAAa,OAAO,IAAIgC,EAAgB/rC,EAAQ2C,OAAS,IAE5E,IAGA2qC,EAAuBhjB,EAAKxqB,OAAO,CACnCwI,OAAQ,SAAS9G,EAAIsjB,GACjB,IAAI3K,EAAO3Y,EAAG0Y,KAAK/Z,KAAK0H,MAExBsS,EAAKV,QACLU,EAAKxI,MAAMxR,KAAKqW,OAAOE,UAAUoO,GACrC,IAGAyoB,EAAWD,EAAqBxtC,OAAO,CACvCC,KAAM,SAASC,GACXsqB,EAAKrqB,GAAGF,KAAKG,KAAKC,KAAMH,GAGxBG,KAAK0H,KAAO,gBACZ1H,KAAKwC,OAAS,CAAC,CAAEG,KAAM,CAAC,OAAQ,UAChC3C,KAAKqW,OAAS,IAAI81B,EAAyBnsC,KAAKwC,OAAQ3C,EAAQwtC,QAASxtC,EAAQwsC,SACrF,EAEAjsC,QAAS,SAASgqB,GACd,IAAIvqB,EAAUG,KAAKH,QACf2C,EAASxC,KAAKwC,OACdkI,EAAQ,CAAC,EAEb,OAAO,IAAI5E,EAAOglC,cAAcnrC,EAAOyqB,EAAkB,CACrDwf,UAAW,WAGP,OAFAl/B,EAAM7K,EAAQytC,SAAWljB,EAAiB5Y,MAEnC,IAAIu7B,EAAsBvqC,EAAQ,CAAEkI,MAAOA,GAAS7K,EAAQwtC,QACvE,IAER,EAEAj2B,WAAY,SAAS/V,EAAIyG,GACrB,IAEI2R,EACA7G,EAHA/S,EAAUG,KAAKH,QACf+F,EAAW/F,EAAQ0C,KAGnBgrC,EAASlsC,EAAG0Y,KAAK,iBACjBiI,EAAe,GAEdurB,IAID1tC,EAAQmiB,eACTA,EAAe,CAAC,CACXzQ,KAAMzJ,EAAOjI,QAAQ+J,SAAS/J,EAAQmiB,aAAa,GAAGzQ,MACtDC,MAAO3R,EAAQmiB,aAAa,GAAGxQ,SAIvCiI,EAAauI,EAAa+K,OAAOltB,EAAQ6Z,MAAQ7Z,EAAQ6Z,MAAS5R,EAAOjI,QAAQ+F,IAAa,IAC9F2nC,EAAOC,cAAc/zB,GAErB8zB,EAAOnlC,KAAK,UAAWc,IACnBpB,EAAOsL,OAASR,EACS,KAArB1J,EAAEukC,OAAOj8B,SACT2Y,EAAKzX,KAAK5K,EAAQlC,EAAUsD,EAAEukC,OAAOj8B,QACzC,IAGJ+7B,EAAOnlC,KAAK,SAAS,KACjB+T,YAAW,WACPrU,EAAOyR,mBACX,GAAE,EAAE,IAGRg0B,EAAO/7B,MAAM,WAEb+7B,EAAOjkC,QAAQoX,GAAGwqB,EAAc,sCAAsC,WAClE,IAAIwC,EAAW5lC,EAAOuL,WACtBT,EAAQ9K,EAAOyP,eAAem2B,GAAYA,EAAW96B,CACzD,IACC8N,GA1aQ,uBA0aO,SAASxX,GACjBA,EAAE0T,UAAYpd,EAAMkC,KAAKisC,QACzB7lC,EAAOyR,oBACPrQ,EAAEgU,iBAEV,IACJ,IAIAkH,EAAY+F,EAAKxqB,OAAO,CACxBC,KAAM,SAASC,GACXsqB,EAAKrqB,GAAGF,KAAKG,KAAKC,KAAMH,GAExBG,KAAKwC,OAAS,CAAC,CAAEG,KAAM,CAAC,OAAO,UAC/B3C,KAAKqW,OAAS,IAAI81B,EAAyBnsC,KAAKwC,OAAQ3C,EAAQwtC,QACpE,EAEAxtC,QAAS,CACLikB,QAAS,UACTnV,QAAS,IAGbxG,OAAQ,WACJnI,KAAK4tC,QAAQt0B,OACjB,EAEAlZ,QAAS,SAASgqB,GACd,IAAIvqB,EAAUG,KAAKH,QACf2C,EAASxC,KAAKwC,OACdkI,EAAQ,CAAC,EAEb,OAAO,IAAI5E,EAAOglC,cAAcnrC,EAAOyqB,EAAkB,CACrDwf,UAAW,WAGP,OAFAl/B,EAAM7K,EAAQytC,SAAWljB,EAAiB5Y,MAEnC,IAAIu7B,EAAsBvqC,EAAQ,CAAEkI,MAAOA,GAAS7K,EAAQwtC,QACvE,IAER,EAEAj2B,WAAY,SAAS/V,EAAIyG,GACrB,IAAIF,EAAO5H,KACP4F,EAAWgC,EAAK/H,QAAQ0C,KACxBiX,EAAYxZ,KAAK4tC,QAAUvsC,EAAGwsC,sBAE7Br0B,IAILA,EAAUpR,KAAK,UAAU,KACrB,IAAIgpB,EAAQ5X,EAAUhI,QAElB4f,GACAjH,EAAKzX,KAAK5K,EAAQlC,EAAUwrB,UAGzBxpB,EAAKkmC,mBACLlmC,EAAKmmC,cAEZjmC,EAAOkM,OAAO,IAGlBwF,EAAUpR,KAAK,QAAQ,KACnBR,EAAKkmC,YAAchmC,EAAOuL,WAE1BmG,EAAUw0B,OAAOxmC,QAAQkZ,GAAGwqB,GAAc,SAAShiC,GAC1ClI,EAAEkI,EAAEmS,QAAQsF,GAAG,wBAChBzX,EAAEgU,gBAEV,IAEK1D,EAAUw0B,OAAOxmC,QAAQmZ,GAAG,wBAC7BnH,EAAUw0B,OAAOxmC,QACZ4Q,KAAK,CAAE61B,aAAc,OACrB1kC,KAAK,gBAAgB6O,KAAK,eAAgB,MAC1C8kB,MAAM3zB,KAAK,SAASmX,GAAG,SAAS,WAC7B9Y,EAAKmmC,eAAgB,CACzB,IAGRv0B,EAAUw0B,OAAOr1B,IAAI,YAAY,KAC7Ba,EAAUw0B,OAAOxmC,QAAQ+B,KAAK,mBAAmB7I,QAAQ,QAAQ,GACnE,IAGN8Y,EAAUpR,KAAK,SAAUc,IACrBsQ,EAAUw0B,OAAOxmC,QAAQ8S,IAAI4wB,EAAa,IAG9C1xB,EAAUxC,OAAO,YAAY5O,KAAK,YAAac,IACtCsQ,EAAU00B,QAA2C,2BAAjC10B,EAAU00B,OAAOC,aAI1C30B,EAAU9Y,QAAQ,SAAS,IAG/B8Y,EAAUlQ,QACL8O,KAAK,CAAE61B,aAAc,OACrB1kC,KAAK,gBAAgB6O,KAAK,eAAgB,MAE/CoB,EAAUhI,MAAM,eACpB,IAGJ7R,EAAOmG,EAAQ,CACXqlC,mBAAoBA,EACpBS,gBAAiBA,EACjBuB,qBAAsBA,EACtBhB,yBAA0BA,EAC1BY,sBAAuBA,EACvBG,iBAAkBA,EAClBE,SAAUA,EACVhpB,UAAWA,IAGfpe,EAAe,OAAQ,CAAE,CAAErD,KAAM,CAAC,SAAU,MAAQ,CAAEA,KAAM,CAAC,QAASyV,KAAM,CAAE1N,MAAO,CAAE0jC,WAAY,YACnGzoC,EAAa,OAAQ,IAAIunC,EAAiB,CACtC15B,IAAK,IACL6S,MAAM,EACN7jB,OAAQ0D,EAAQ4D,KAChBzI,GAAI,CACAgtC,WAAW,MAInBroC,EAAe,SAAU,CAAE,CAAErD,KAAM,CAAC,KAAM,MAAQ,CAAEA,KAAM,CAAC,QAASyV,KAAM,CAAE1N,MAAO,CAAE4jC,UAAW,cAChG3oC,EAAa,SAAU,IAAIunC,EAAiB,CACxC15B,IAAK,IACL6S,MAAM,EACN7jB,OAAQ0D,EAAQ6D,OAChB1I,GAAI,CACAgtC,WAAW,MAInBroC,EAAe,YAAa,CAAE,CAAErD,KAAM,CAAC,QAASyV,KAAM,CAAE1N,MAAO,CAAE6yB,eAAgB,eAAmB,CAAE56B,KAAM,CAAC,QAC7GgD,EAAa,YAAa,IAAIunC,EAAiB,CAC3C15B,IAAK,IACL6S,MAAM,EACN7jB,OAAQ0D,EAAQ8D,UAChB3I,GAAI,CACAgtC,WAAW,MAInBroC,EAAe,gBAAiB,CAAE,CAAErD,KAAM,CAAC,MAAO,WAAa,CAAEA,KAAM,CAAC,QAASyV,KAAM,CAAE1N,MAAO,CAAE6yB,eAAgB,oBAClH53B,EAAa,gBAAiB,IAAIunC,EAAiB,CAC/C1qC,OAAQ0D,EAAQ+D,cAChB5I,GAAI,CACAgtC,WAAW,MAInBroC,EAAe,cAAe,CAAE,CAAErD,KAAM,CAAC,UACzCgD,EAAa,cAAe,IAAIunC,EAAiB,CAC7C1qC,OAAQ0D,EAAQnD,YAChB1B,GAAI,CACAgtC,WAAW,MAInBroC,EAAe,YAAa,CAAE,CAAErD,KAAM,CAAC,UACvCgD,EAAa,YAAa,IAAIunC,EAAiB,CAC3C1qC,OAAQ0D,EAAQlD,UAChB3B,GAAI,CACAgtC,WAAW,MAInB1oC,EAAa,YAAa,IAAIye,EAAU,CACpCipB,QAAS,QACThB,SAAU,QACViB,QAAS,QACT/qC,KAAM,YACNlB,GAAI,CACAqG,KAAM,YACN6mC,SAAU,QACV/0B,UAAW,cACX6K,iBAAkB,CACdC,MAAO,CAAC,WACRkqB,SAAU,mBACV1qB,QAAS,UACTnV,QAAS,GACT4V,SAAS,EACTC,OAAO,EACPC,SAAS,EACTgqB,UAAW,SACXC,eAAe,OAK3B/oC,EAAa,YAAa,IAAIye,EAAU,CACpCipB,QAAS,mBACTC,QAAS,kBACT/qC,KAAM,YACNlB,GAAI,CACAqG,KAAM,YACN6mC,SAAU,QACV/0B,UAAW,cACX6K,iBAAkB,CACdC,MAAO,CAAC,WACRkqB,SAAU,UACV1qB,QAAS,UACTnV,QAAS,GACT4V,SAAS,EACTC,OAAO,EACPC,SAAS,EACTgqB,UAAW,SACXC,eAAe,OAK3B/oC,EAAa,WAAY,IAAIynC,EAAS,CAClCC,QAAS,cACThB,SAAU,OACViB,QAAS,aACT/qC,KAAM,WACNyf,aAAc,CAAC,CAAEzQ,KAAM,kBAAmBC,MAAO,YACjDnQ,GAAI,CACAqG,KAAM,YACN8R,UAAW,WACX6K,iBAAkB,CACdsqB,eAAgB,QAChBC,cAAe,OACfC,gBAAgB,GAEpBN,SAAU,YAIlB5oC,EAAa,WAAY,IAAIynC,EAAS,CAClCC,QAAS,YACThB,SAAU,OACViB,QAAS,WACT/qC,KAAM,WACNyf,aAAc,CAAC,CAAEzQ,KAAM,kBAAmBC,MAAO,YACjDnQ,GAAI,CACAqG,KAAM,YACN8R,UAAW,WACX6K,iBAAkB,CACdsqB,eAAgB,QAChBC,cAAe,OACfC,gBAAgB,GAEpBN,SAAU,WAIjB,CAprBD,CAorBGrtC,OAAO1B,MAAM2sB,QAEhB,SAAUnrB,EAAGC,GAEb,IAAIzB,EAAQ0B,OAAO1B,MACfiT,EAASjT,EAAMq/B,WACf19B,EAAQ3B,EAAM2B,MACdxB,EAASqB,EAAErB,OACXmG,EAAStG,EAAM6B,GAAGyG,OAClBC,EAAMjC,EAAOkC,IACbuK,EAAazM,EAAOyM,WACpBm3B,EAAU5jC,EAAO4jC,QACjBvf,EAAOrkB,EAAOqkB,KACdyhB,EAAkB9lC,EAAO8lC,gBACzBT,EAAqBrlC,EAAOqlC,mBAC5B/0B,EAAY7D,EAAW6D,UACvBqF,EAAoBlJ,EAAWkJ,kBAC/B9V,EAAeG,EAAO1D,YAAYuD,aAClCjE,EAAOlC,EAAMkC,KAEbotC,EAAgB,UAChBC,EAAiB,YACjBC,EAAqB,mBAErBC,EAAmB9tC,EAAMxB,OAAO,CAChC8rC,aAAc,SAASC,GACnB,OAAO3jC,EAAIgoB,aAAa2b,EAAY,CAAC,KACzC,IAGAwD,EAAgB/tC,EAAMxB,OAAO,CAC7BC,KAAM,WACFI,KAAKqW,OAAS,IAAI44B,CACtB,EAEA7X,MAAO,SAASxkB,EAAOuR,GACnB,IACIgrB,EAAS76B,EAAKs1B,EAAWwF,EAAGruB,EAD5B4D,EAAQ3kB,KAAKyT,WAAagI,EAAkB7I,GAASwD,EAAUxD,GAGnE,GAAIuR,EAAWqS,UAAW,CACtBliB,EAAM/B,EAAWutB,kBAAkBltB,GACnCu8B,EAAU58B,EAAWy0B,WAAWp0B,GAEhCA,EAAM4tB,iBACN4O,EAAIrnC,EAAIghB,OAAOzU,EAAK,IAAK6P,GACzBvR,EAAMwuB,WAAWgO,GAEjBruB,EAASquB,EAAElmB,WACa,KAApBnhB,EAAIxF,KAAKwe,IACThZ,EAAIyf,YAAY4nB,EAAGruB,GAGnBhZ,EAAI0qB,UAAU1R,IACdhZ,EAAIsN,OAAO0L,GAKf,IADA,IAAIsuB,EAAMD,EACD3sC,EAAI,EAAGA,EAAI0sC,EAAQtuC,OAAQ4B,IAChCsF,EAAIyf,YAAY2nB,EAAQ1sC,GAAI4sC,GAC5BA,EAAMF,EAAQ1sC,GAGd0sC,EAAQtuC,SACRkH,EAAIuQ,aAAahE,EAAIkxB,eAAe,UAAW2J,EAAQ,IAAMA,EAAQ,IACrEpnC,EAAIyf,YAAYlT,EAAIkxB,eAAe,UAAW2J,EAAQ,IAAMA,EAAQ,IACpEv8B,EAAMutB,eAAegP,EAAQ,IAC7Bv8B,EAAM0tB,YAAY6O,EAAQA,EAAQtuC,OAAS,IAEnD,MACI+oC,EAAY,IAAIgC,EAAgB,CAAC,CAAEjpC,KAAM,CAAC,OAASwhB,IACzC9N,OAASrW,KAAKqW,OACxBuzB,EAAUxS,MAAMzS,EAExB,IAGA2qB,EAAgB5F,EAAQ/pC,OAAO,CAC/BC,KAAM,SAASC,GACX,IAAI+H,EAAO5H,KACXH,EAAQ+pC,UAA2B,CAC/BrpB,OAAQ,SAAS3N,GACb,IAAI+R,EAAQ/c,EAAK6L,aAAegI,EAAkB7I,GAASwD,EAAUxD,GACrE,IAAIg5B,EAAgB,CAAC,CAAEjpC,KAAM,CAAC,QAAS0S,OAAOsP,EAClD,GAEJ3kB,KAAKH,QAAUA,EACf6pC,EAAQ5pC,GAAGF,KAAKG,KAAKC,KAAMH,EAC/B,IAGA0vC,EAAc7F,EAAQ/pC,OAAO,CAC7BC,KAAM,SAASC,GACX,IAAI+H,EACJ5H,KAAKH,QAAUA,EACf6pC,EAAQ5pC,GAAGF,KAAKG,KAAKC,KAAMH,GAC3BG,KAAK4pC,UAAY,IAAIsF,EAEhBrvC,EAAQ2vC,IAITxvC,KAAK0S,KAAO,WACR1S,KAAK4pC,UAAUn2B,WAAa7L,EAC5B5H,KAAK4pC,UAAUxS,MAAMv3B,EAAQ+S,MAAO,CAChCwG,KAAMvZ,EAAQ2vC,IACdhZ,UAAW32B,EAAQ0R,MAAQ1R,EAAQ2vC,IACnCn0B,OAAQxb,EAAQwb,QAExB,GAVArb,KAAKmkB,WAAa,KAClBnkB,KAAK4T,OAAQ,EAWrB,EAEAlB,KAAM,WACF,IAAI9I,EAAW5J,KAAK8H,OAAOjI,QAAQ+J,SACnC5J,KAAKyvC,aAAe,GACpBzvC,KAAKoT,OAASpT,KAAK6pC,WAAU,GAC7B7pC,KAAK4pC,UAAUn2B,WAAazT,KAAKyT,aAEjC,IAAIkR,EAAQvO,EAAUpW,KAAKoT,QACvBg8B,EAAIzqB,EAAM9jB,OAASb,KAAK4pC,UAAUvzB,OAAOo1B,aAAa9mB,EAAM,IAAM,KAClE+qB,EAAM/qB,EAAM9jB,QAAgC,OAAtBkH,EAAIxF,KAAKoiB,EAAM,IAErC+lB,EAAS1qC,KAAKgqC,aAAa,SAAU,CACrC/xB,MAAOrO,EAAShG,WAChB+rC,SAAU,IACVr2B,MAAOtZ,KAAK4vC,OAAOxnC,KAAKpI,MACxBqhB,SAAS,IACVtH,KAAK,eAER/Z,KAAK6vC,MAAQ7vC,KAAK8vC,YAAYpF,GAE1B0E,IACApvC,KAAKoT,OAAOmtB,mBAAmB6O,GAC/BzqB,EAAQvO,EAAUpW,KAAKoT,SAG3BpT,KAAKyvC,aAAezvC,KAAK8L,SAAS6Y,GAElC+lB,EAAOphC,QACFC,KAAK,oBAAoBmX,GAAG,QAAS1gB,KAAK+vC,OAAO3nC,KAAKpI,OAAOk9B,MAC7D3zB,KAAK,mBAAmBmX,GAAG,QAAS1gB,KAAK4vC,OAAOxnC,KAAKpI,OAAOk9B,MAC5D3zB,KAAK,uBAAuBmX,GAAG,UAAW1gB,KAAKgwC,SAAS5nC,KAAKpI,OAAOk9B,MACpE3zB,KAAK,sBAAsB6L,IAAIpV,KAAKiwC,QAAQb,IAAIlS,MAChD3zB,KAAK,uBAAuB6L,IAAIpV,KAAKyvC,cAAcvS,MACnD3zB,KAAK,wBAAwB6L,IAAIg6B,EAAIA,EAAEn3B,MAAQ,IAAIilB,MACnD3zB,KAAK,yBAAyBs0B,KAAK,YAAWuR,GAAgB,UAAZA,EAAE/zB,QAA4B6hB,MAChF3zB,KAAK,2BAA2BgX,QAAQmvB,GAE7C1vC,KAAKkwC,QAAUxF,EAAOG,SAAS/xB,OAE/B9X,EAAE,qBAAsB0pC,EAAOljC,SAAS9G,QAAQ,SAASiiC,QAC7D,EAEAmN,YAAa,SAASpF,GAClB,IACIyF,EAAcnvC,EAAE,UAAUma,SAASuvB,EAAOljC,SAC1CoC,EAFO5J,KAES8H,OAAOjI,QAAQ+J,SAC/BwmC,EAAOD,EAAYE,UAAU,CAC7BC,eAAe,EACf52B,MAAO,CACH,CACI62B,MAAO,oBACPC,MAAO/9B,EAAO7I,EAASiC,gBACvB/D,OAAQ,WAEZ,CACIyoC,MAAO,qBACPC,MAAO/9B,EAAO7I,EAASkC,UACvBhE,OAAQ,WAEZ,CACIyoC,MAAO,sBACPC,MAAO/9B,EAAO7I,EAASmC,aACvBjE,OAAQ,WAEZ,CACIyoC,MAAO,uBACPE,cAAe,CACXD,MAAO/9B,EAAO7I,EAASoC,sBAE3BwkC,MAAO,GACP1oC,OAAQ,eAGjBiS,KAAK,aAMR,OAJAo2B,EAAY5mC,KAAK,uBAAuBoY,QAAQ,iBAAiBxJ,SAAS,0BAE1EuyB,EAAOljC,QAAQkpC,MAAM1vC,EAlCVhB,KAkCiBiqC,uBAAuB,CAAErgC,WAAUsgC,iBAAkB,OAAQC,iBAAkB,qBAEpGiG,CACX,EAEAJ,SAAU,SAAS9mC,GACf,IAAIxH,EAAOlC,EAAMkC,KAEbwH,EAAE0T,SAAWlb,EAAKisC,MAClB3tC,KAAK+vC,OAAO7mC,GACLA,EAAE0T,SAAWlb,EAAKivC,KACzB3wC,KAAK4vC,OAAO1mC,EAEpB,EAEA6mC,OAAQ,SAAS7mC,GACb,IAEI+O,EAAO1G,EAAM8J,EAFb7T,EAAUxH,KAAKkwC,QAAQ1oC,QACvB4R,EAAOpY,EAAE,qBAAsBwG,GAAS4N,MAExCw7B,EAAY5vC,EAAE,sBAAuBwG,GAErC4R,GAAQA,GAAQ01B,IAEZ11B,EAAKwM,QAAQ,KAAO,IAAM,kBAAkBlS,KAAK0F,KACjDA,EAAO,UAAYA,GAGvBpZ,KAAKmkB,WAAa,CAAE/K,KAAMA,IAE1BnB,EAAQjX,EAAE,uBAAwBwG,GAAS4N,SAEvCpV,KAAKmkB,WAAWlM,MAAQA,GAGxB24B,EAAUjwB,GAAG,eACbpP,EAAO/R,EAAMkX,KAAKk6B,EAAUx7B,SACdpV,KAAKyvC,aAERl+B,GAASA,IAASvR,KAAKyvC,eAC9BzvC,KAAKmkB,WAAWqS,UAAYzuB,EAAI+pB,SAASvgB,IAFzCvR,KAAKmkB,WAAWqS,UAAYpd,GAMpCiC,EAASra,EAAE,wBAAyBwG,GAASmZ,GAAG,YAChD3gB,KAAKmkB,WAAW9I,OAASA,EAAS,SAAW,KAE7Crb,KAAK4pC,UAAUxS,MAAMp3B,KAAKoT,OAAQpT,KAAKmkB,aAG3CnkB,KAAK4vC,OAAO1mC,GAERlJ,KAAK6T,QACL7T,KAAK6T,QAEb,EAEA+7B,OAAQ,SAAS1mC,GACbA,EAAEgU,iBACFld,KAAK6vC,MAAMn+B,UACX1R,KAAKkwC,QAAQx+B,UAEb3J,EAAIooB,mBAAmB5d,EAAWutB,kBAAkB9/B,KAAKoT,SAASY,QAElEhU,KAAK8pC,aAAa9pC,KAAKoT,OAC3B,EAEA68B,QAAS,SAASY,GACd,OAAIA,EAEOA,EAAO99B,aAAa,OAAQ,GAGhC+7B,CACX,EAEAhjC,SAAU,SAAS6Y,GACf,IACIliB,EADA8O,EAAO,GAGX,IAAK9O,EAAI,EAAGA,EAAIkiB,EAAM9jB,OAAQ4B,IAC1B8O,GAAQoT,EAAMliB,GAAGgb,UAGrB,OAAO1V,EAAI+pB,SAASvgB,GAAQ,GAChC,EAEA5Q,KAAM,WACF,IAAIiS,EAAQ5S,KAAK6pC,WAAU,GAE3B7pC,KAAK4pC,UAAUxS,MAAMxkB,EAAO5S,KAAKmkB,YACjCnkB,KAAK8pC,aAAal3B,EACtB,IAIAk+B,EAAkBpH,EAAQ/pC,OAAO,CACjCC,KAAM,SAASC,GACX6pC,EAAQ5pC,GAAGF,KAAKG,KAAKC,KAAMH,GAE3BG,KAAK4pC,UAAY,IAAIsF,CACzB,EAEAx8B,KAAM,WACF,IAAIq+B,EAAe/wC,KAAKgxC,aACxB,GAAKD,EAAL,CAIA,IAAIn+B,EAAQ5S,KAAKqT,WACb49B,EAAa,IAAIzxC,EAAM6B,GAAGyG,OAAO+8B,OACjCqM,EAAYt+B,EAAM6tB,aAEtByQ,EAAUv8B,SAASo8B,EAAarpB,MAAM6F,KAAMwjB,EAAarpB,MAAMrK,QAC/D6zB,EAAUhR,OAAO6Q,EAAa7T,IAAI3P,KAAMwjB,EAAa7T,IAAI7f,QAEzDzK,EAAQ5S,KAAK6pC,YACboH,EAAW9L,IAAI+L,GAEflxC,KAAK4pC,UAAUxS,MAAM8Z,EAAW,CAC5B93B,KAAMpZ,KAAKmxC,mBAAmBJ,EAAax/B,QAG/C0/B,EAAW57B,OAAO67B,GAClBlxC,KAAK8pC,aAAal3B,EAjBlB,CAkBJ,EAEAo+B,WAAY,WACR,IAAIp+B,EAAQ5S,KAAKqT,WACb+9B,EAAYx+B,EAAM2B,eAClBE,EAAc7B,EAAM6B,aACb28B,EAAU5iB,kBACNzmB,EAAI8pB,MAAMuf,KAAeA,EAAUzjB,cAAkBlZ,GAAe1M,EAAI0mB,WAAW2iB,MAC9FA,EAAYA,EAAUloB,WACtBzU,EAAc,GAElB,IAAI48B,EAAY,IAAIC,EAAqB,CACrC/jB,KAAM6jB,EACN/zB,OAAQ5I,EACR88B,aAAc,SAAShkB,GAAQ,OAAOA,GAA2B,MAAnBxlB,EAAIxF,KAAKgrB,EAAe,IAI1E,OADgB,IAAIikB,EAAqBH,GACxBL,YACrB,EAEA1rB,eAAgB,WACZ,QAAStlB,KAAKgxC,YAClB,EAEAG,mBAAoB,SAASrlC,GAEzB,OADkB9L,KAAKyxC,mBAAmB3lC,GACrBA,EAAW9L,KAAK0xC,uBAAuB5lC,EAChE,EAEA2lC,mBAAoB,SAAS3lC,GACzB,OAAOijC,EAAer7B,KAAK5H,EAC/B,EAEA4lC,uBAAwB,SAAS5lC,GAC7B,OAAOgjC,EAAgBhjC,CAC3B,IAGA6lC,EAAaxnB,EAAKxqB,OAAO,CACzBC,KAAM,SAASC,GACXG,KAAKH,QAAUA,EACfG,KAAKqW,OAAS,IAAI80B,EAAmB,CAAC,CAAExoC,KAAM,CAAC,QAE/CwnB,EAAKrqB,GAAGF,KAAKG,KAAKC,KAAMgB,EAAErB,OAAOE,EAAS,CAAEO,QAASkvC,IACzD,EAEAnnC,OAAQ,SAAS9G,EAAIsjB,GACjB,IAAIitB,EAAS5xC,KAAKqW,OAAOG,YAAYmO,GACjCnb,EAAUnI,EAAG6G,QAAQ,cAAc6R,KAAK,gBAExC63B,EACApoC,EAAQ+gB,OAAOlpB,GAAI,GAEnBmI,EAAQ+gB,OAAOlpB,GAAI,EAE3B,IAGAmwC,EAAuBrwC,EAAMxB,OAAO,CACpCC,KAAM,SAASyxC,GACXrxC,KAAKqxC,UAAYA,EACjBrxC,KAAK0nB,MAAQmqB,IACb7xC,KAAKk9B,IAAM2U,IACX7xC,KAAKuR,KAAO,EAChB,EAEAy/B,WAAY,WACR,IAAIzjB,EAAOvtB,KAAKqxC,UAAU9jB,KACtBlQ,EAASrd,KAAKqxC,UAAUh0B,OAC5B,GAAItV,EAAI0mB,WAAWlB,GAAO,CACtB,IAAIhc,EAAOgc,EAAKxT,KAAK2tB,UAAU,EAAGrqB,GAClC,GAAI,SAAS3J,KAAK3L,EAAI+pB,SAASvgB,IAC3B,MAER,MAAO,GAAe,IAAX8L,EAAc,CACrB,IAAIgf,EAAIt0B,EAAI2vB,sBAAsBnK,EAAMxlB,EAAI+kB,eACxCuP,GAAKA,EAAE7N,iBACPxuB,KAAKqxC,UAAUzxC,KAAK,CAChB2tB,KAAM8O,EAAE7N,iBAGpB,CAGA,GADAxuB,KAAKqxC,UAAUpP,SAASjiC,KAAK8xC,WAAW1pC,KAAKpI,QACxCA,KAAKk9B,IAAI6U,UACV/xC,KAAKqxC,UAAYrxC,KAAKqxC,UAAUW,MAAMhyC,KAAKk9B,KAC3Cl9B,KAAKqxC,UAAUpP,SAASjiC,KAAKiyC,aAAa7pC,KAAKpI,QAE1CA,KAAKkyC,mBAAmB,CACzB,IAAIC,EAAoBnyC,KAAKqxC,UAAUe,cAAcpyC,KAAK0nB,OAChC,IAAI2qB,EAAsBF,GAChClQ,SAASjiC,KAAKsyC,qBAAqBlqC,KAAKpI,OACvDA,KAAKkyC,oBACNlyC,KAAK0nB,MAAQmqB,IAErB,CAGJ,OAAI7xC,KAAK0nB,MAAMqqB,QACJ,KAEA,CACHrqB,MAAO1nB,KAAK0nB,MACZwV,IAAKl9B,KAAKk9B,IACV3rB,KAAMvR,KAAKuR,KAGvB,EAEA2gC,gBAAiB,WACb,OAAOnD,EAAer7B,KAAK1T,KAAKuR,OAAS,WAAWmC,KAAK1T,KAAKuR,KAClE,EAEAugC,WAAY,SAASvgC,EAAMgc,GACvB,IAAI9qB,EAAI8vC,EAAkBhhC,EAAMy9B,GAChC,GAAIvsC,GAAK,EAIL,OAHAzC,KAAKk9B,IAAI3P,KAAOA,EAChBvtB,KAAKk9B,IAAI7f,OAAS5a,EAAI,GAEf,CAEf,EAEAwvC,aAAc,SAAS1gC,EAAMgc,GACzB,IAAI9qB,EAAI8vC,EAAkBhhC,EAAM,MAC5BihC,EAAK/vC,EAAI,EAMb,GALAzC,KAAKuR,KAAOA,EAAKm2B,UAAU8K,GAAMxyC,KAAKuR,KAEtCvR,KAAK0nB,MAAM6F,KAAOA,EAClBvtB,KAAK0nB,MAAMrK,OAASm1B,EAEhB/vC,GAAK,EACL,OAAO,CAEf,EAEA6vC,qBAAsB,SAAS/gC,EAAMgc,EAAMlQ,GACvC,IAuBAo1B,EAvBIhwC,GAuBJgwC,EAvB4B,KAuBjB//B,KAvBWnB,IAyBfkhC,EAAEnsC,OAAS,EAxBdksC,EAAK/vC,EAST,IARW,IAAPA,IACA+vC,EAAKjhC,EAAK1Q,QAGdb,KAAKuR,KAAOvR,KAAKuR,KAAKm2B,UAAU8K,GAChCxyC,KAAK0nB,MAAM6F,KAAOA,EAClBvtB,KAAK0nB,MAAMrK,OAASm1B,GAAe,EAATn1B,GAEtB5a,GAAK,EACL,OAAO,CAEf,IAGJ,SAAS8vC,EAAkBG,EAAKjL,GAE5B,IADA,IAAIhlC,EAAIiwC,EAAI7xC,OACL4B,MAAQglC,EAAO/zB,KAAKg/B,EAAIjwC,MAE/B,OAAOA,CACX,CAOA,IAAIovC,EAAS,WACT,MAAO,CACHtkB,KAAM,KACNlQ,OAAQ,KACR00B,MAAO,WACH,OAAqB,OAAd/xC,KAAKutB,MAAiC,OAAhBvtB,KAAKqd,MACtC,EAER,EAEIs1B,EAAmBxxC,EAAMxB,OAAO,CAChCC,KAAM,SAASC,GACXG,KAAKutB,KAAO1tB,EAAQ0tB,KACpBvtB,KAAKqd,OAASxd,EAAQwd,SAAWpc,EAAe8G,EAAI0mB,WAAWzuB,KAAKutB,OAASvtB,KAAKutB,KAAK1sB,QAAW,EAAIhB,EAAQwd,OAC9Grd,KAAKuxC,aAAe1xC,EAAQ0xC,cAAgBvxC,KAAKuxC,cAAgBvwC,EAAEqpB,IACvE,EAEA4X,SAAU,SAASC,GACVA,IAGLliC,KAAK4yC,QAAS,EACd5yC,KAAK6yC,UAAU3Q,EAAUliC,KAAKutB,KAAMvtB,KAAKqd,QAC7C,EAEAw1B,UAAW,SAAS3Q,EAAU3U,EAAMlQ,GAChC,GAAKkQ,IAAQvtB,KAAK4yC,OAAlB,CAGA,GAAsB,IAAlBrlB,EAAK/P,SAOJ,CACD,IAAIs1B,EAAW9yC,KAAK8yC,SAASvlB,GAE7B,OADAvtB,KAAK4yC,OAAS5yC,KAAK4yC,QAAU5yC,KAAKuxC,aAAauB,GACxC9yC,KAAK6yC,UAAU3Q,EAAU4Q,EACpC,CAVI,IAAIvhC,EAAOgc,EAAKxT,KACZsD,IAAWpc,IACXsQ,EAAOvR,KAAK+yC,QAAQxhC,EAAM8L,IAE9Brd,KAAK4yC,QAA2C,IAAjC1Q,EAAS3wB,EAAMgc,EAAMlQ,GAQxC,IAAIC,EAAOtd,KAAKsd,KAAKiQ,GACrB,IAAKjQ,EAED,IADA,IAAIyD,EAASwM,EAAKrE,YACV5L,GAAQvV,EAAI2rB,SAAS3S,IACzBzD,EAAOtd,KAAKsd,KAAKyD,GACjBA,EAASA,EAAOmI,WAGxBlpB,KAAK4yC,OAAS5yC,KAAK4yC,QAAU5yC,KAAKuxC,aAAaj0B,GAC/Ctd,KAAK6yC,UAAU3Q,EAAU5kB,EAvBzB,CAwBJ,EAEA80B,cAAe,SAAS/sB,GACpB,OAAOrkB,EAAErB,OAAO,CACZ4tB,KAAMvtB,KAAKutB,KACXlQ,OAAQrd,KAAKqd,OACbk0B,aAAcvxC,KAAKuxC,cACpBlsB,GAAK,CAAC,EACb,EAEAytB,SAAU,SAASvlB,GAAO,EAC1BjQ,KAAM,SAASiQ,GAAO,EACtBwlB,QAAS,SAASxhC,EAAM8L,GAAS,IAIjCi0B,EAAuBqB,EAAiBhzC,OAAO,CAC/CozC,QAAS,SAASxhC,EAAMyhC,GACpB,OAAOzhC,EAAKm2B,UAAU,EAAGsL,EAC7B,EAEA11B,KAAM,SAASiQ,GACX,OAAOA,EAAKiB,eAChB,EAEAskB,SAAU,SAASvlB,GACf,OAAOA,EAAKsF,SAChB,EAEAmf,MAAO,SAASnyC,GACZ,IAAIwlB,EAAIrlB,KAAKoyC,cAAcvyC,GAC3B,OAAO,IAAIyxC,EAAqBjsB,EACpC,IAGAgtB,EAAwBM,EAAiBhzC,OAAO,CAChDozC,QAAS,SAASxhC,EAAMyhC,GACpB,OAAOzhC,EAAKm2B,UAAUsL,EAC1B,EAEA11B,KAAM,SAASiQ,GACX,OAAOA,EAAKI,WAChB,EAEAmlB,SAAU,SAASvlB,GACf,OAAOA,EAAKE,UAChB,EAEAukB,MAAO,SAASnyC,GACZ,IAAIwlB,EAAIrlB,KAAKoyC,cAAcvyC,GAC3B,OAAO,IAAIwyC,EAAsBhtB,EACrC,IAGJ1lB,EAAOH,EAAM6B,GAAGyG,OAAQ,CACpBmnC,iBAAkBA,EAClBC,cAAeA,EACfI,cAAeA,EACfC,YAAaA,EACbuB,gBAAiBA,EACjBa,WAAYA,EACZH,qBAAsBA,EACtBF,qBAAsBA,EACtBe,sBAAuBA,IAG3B1sC,EAAa,aAAc,IAAIwkB,EAAK,CAAE3W,IAAK,IAAK6S,MAAM,EAAMjmB,QAASmvC,KACrE5pC,EAAa,SAAU,IAAIgsC,EAAW,CAAEn+B,IAAK,IAAK6S,MAAM,EAAMC,OAAO,EAAMjlB,GAAI,CAAEkpB,QAAQ,MACzF5kB,EAAa,WAAY,IAAIwkB,EAAK,CAAE3W,IAAK,CAAC9R,EAAKisC,MAAOjsC,EAAKuxC,UAAWr1B,iBAAiB,EAAMxd,QAAS0wC,IAErG,CAvlBD,CAulBG5vC,OAAO1B,MAAM2sB,QAEhB,SAAUnrB,GAEV,IAAIxB,EAAQ0B,OAAO1B,MACf2B,EAAQ3B,EAAM2B,MACdxB,EAASqB,EAAErB,OACXmG,EAAStG,EAAM6B,GAAGyG,OAClB5B,EAAU1G,EAAM6B,GAAGyE,OAAOhG,GAAGD,QAAQqG,QACrC6B,EAAMjC,EAAOkC,IACb+iC,EAAajlC,EAAOilC,WACpB3oC,EAAc0D,EAAO1D,YACrBuD,EAAevD,EAAYuD,aAC3BK,EAAiB5D,EAAY4D,eAC7BuM,EAAazM,EAAOyM,WAEpB2gC,EAAoB/xC,EAAMxB,OAAO,CACjCC,KAAM,SAAS4C,GACXxC,KAAKwC,OAASA,CAClB,EAEAmT,SAAU,SAAS4X,EAAM+O,GACrB,IAAI75B,EAAGkqB,EAAK4F,EAEZ,IAAK9vB,EAAI,EAAGkqB,EAAM2P,EAASz7B,OAAQ4B,EAAIkqB,EAAKlqB,IAExC,KADA8vB,EAAQ+J,EAAS75B,MACFsF,EAAIyP,iBAAiB+V,EAAMgF,GACtC,OAAO,EAIf,OAAO,CACX,EAEAkZ,aAAc,SAAS9mB,GACnB,IAEIliB,EAAGkqB,EAAKwmB,EAFR3wC,EAASxC,KAAKwC,OACd4wC,EAAW,GAGf,IAAK3wC,EAAI,EAAGkqB,EAAMhI,EAAM9jB,OAAQ4B,EAAIkqB,EAAKlqB,IAAK,CAC1C,IAAK,IAAI4wC,EAAI7wC,EAAO3B,OAAS,EAAGwyC,GAAK,KACjCF,EAAYprC,EAAIwtB,OAAO5Q,EAAMliB,GAAID,EAAO6wC,GAAG1wC,MAAQgiB,EAAMliB,GAAKsF,EAAI2vB,sBAAsB/S,EAAMliB,GAAID,EAAO6wC,GAAG1wC,OADxE0wC,KAOxC,IAAKF,GAA2C,SAA9BA,EAAUrd,gBACxB,MAAO,GAGP90B,EAAE0B,QAAQywC,EAAWC,GAAY,GACjCA,EAASjzC,KAAKgzC,EAEtB,CAIA,IAFAnzC,KAAKszC,mBAAmBF,GAEnB3wC,EAAI,EAAGkqB,EAAMymB,EAASvyC,OAAQ4B,EAAIkqB,EAAKlqB,IACxC,GAAIzC,KAAK2V,SAASy9B,EAAS3wC,GAAI2wC,GAC3B,MAAO,CAACA,EAAS3wC,IAIzB,OAAO2wC,CACX,EACAE,mBAAoB,SAAS3uB,GACzB,IAAIliB,EAAG8qB,EAAMjkB,EACb,IAAK7G,EAAI,EAAGA,EAAIkiB,EAAM9jB,OAAQ4B,IAC1B8qB,EAAO5I,EAAMliB,GAEb6G,GADAA,EAAUvB,EAAI4Y,GAAG4M,EAAM,MAAQA,EAAOxlB,EAAIuB,QAAQikB,KAC7BxlB,EAAIiS,KAAK1Q,GAAWA,EAAQgzB,SAAS,GAAKhzB,EAC3DvB,EAAI4Y,GAAGrX,EAAS,QAChBikB,EAAO5I,EAAMliB,GAAK6G,EAG9B,EAEAqiC,WAAY,SAASD,EAAY6H,GAC7B,IACI9wC,EAAGkqB,EAAKY,EAAM5qB,EAAMwhB,EADpB3hB,EAASxC,KAAKwC,OAEdqzB,EAAiB9tB,EAAI8tB,eAAe6V,GACpCj4B,EAAazT,KAAKH,SAAWG,KAAKH,QAAQ4T,WAC1C+/B,EAAe1tC,EAAOyV,WAE1B,IAAK9Y,EAAI,EAAGkqB,EAAMnqB,EAAO3B,OAAQ4B,EAAIkqB,EAAKlqB,IAAK,CAK3C,GAJA8qB,EAAOme,EACP/oC,EAAOH,EAAOC,GAAGE,KACjBwhB,EAAa3hB,EAAOC,GAAG2V,KAEnB3E,GAAc9Q,GAAmB,aAAXA,EAAK,GAAmB,CAC9C,IAAIu5B,EAAYsX,EAAanN,gBAAgB9Y,GAC7C,GAAI2O,GAAan0B,EAAI6nB,WAAWsM,EAAW/X,GACvC,OAAOoJ,CAEf,CAEA,KAAOA,GAAQxlB,EAAI2mB,aAAamH,EAAgBtI,IAAO,CACnD,GAAIxlB,EAAIwtB,OAAOhI,EAAM5qB,IAASoF,EAAI6nB,WAAWrC,EAAMpJ,GAC/C,OAAOoJ,EAGX,GAAIgmB,GAASA,EAAMhmB,GACf,MAGJA,EAAOA,EAAKrE,UAChB,CACJ,CACA,OAAO,IACX,EAEA3S,UAAW,SAASoO,GAChB,IAKIliB,EAAGkqB,EALH/kB,EAAO5H,KACP2rC,EAAa,SAASpe,GACd,OAAO3lB,EAAK+jC,WAAW5jC,EAAI0mB,WAAWlB,GAAQA,EAAKrE,WAAaqE,EACpE,EACJjL,EAASqpB,EAAWhnB,EAAM,IAG9B,IAAKrC,EACD,MAAO,GAGX,IAAK7f,EAAI,EAAGkqB,EAAMhI,EAAM9jB,OAAQ4B,EAAIkqB,EAAKlqB,IACrC,GAAI6f,GAAUqpB,EAAWhnB,EAAMliB,IAC3B,MAAO,GAIf,OAAO6f,EAAO7F,SAAS/W,aAC3B,EAEA8Q,YAAa,SAASmO,EAAO4uB,GACzB,IAAK,IAAI9wC,EAAI,EAAGkqB,EAAMhI,EAAM9jB,OAAQ4B,EAAIkqB,EAAKlqB,IACzC,IAAKzC,KAAK2rC,WAAWhnB,EAAMliB,GAAI8wC,GAC3B,OAAO,EAIf,OAAO,CACX,IAGAE,EAAiBtyC,EAAMxB,OAAO,CAC9BC,KAAM,SAAS4C,EAAQ4gB,GACnBpjB,KAAKwC,OAASA,EACdxC,KAAKojB,OAASA,EACdpjB,KAAKqW,OAAS,IAAI68B,EAAkB1wC,EACxC,EAEAse,KAAM,SAASnH,EAAKwK,EAAYQ,GAE5B,IAAIgS,EAAiC,GAAhBhS,EAAM9jB,OAAckH,EAAI+nB,kBAAkBnL,EAAM,IAAM5c,EAAI4uB,eAAeS,MAAM,KAAMzS,GAEtG5c,EAAI2rB,SAASiD,KACbA,EAAiB5uB,EAAI+nB,kBAAkB6G,IAG3C,IAGIl0B,EAAGixC,EAHH9c,EAAY7uB,EAAI2qB,sBAAsBiE,GACtCxpB,EAAWpF,EAAIumB,cAAcsI,EAAU,IACvCttB,EAAUvB,EAAIghB,OAAO4N,EAAe3G,cAAerW,EAAKwK,GAG5D,IAAK1hB,EAAI,EAAGA,EAAIm0B,EAAU/1B,OAAQ4B,IAC9BixC,EAAW9c,EAAUn0B,GACjBsF,EAAIsrB,QAAQqgB,IACZ3rC,EAAIqQ,KAAKs7B,EAAUvvB,GAEf7a,EAAQ+lB,WAAWxuB,SACnBkH,EAAIuQ,aAAahP,EAASoqC,GAC1BpqC,EAAUA,EAAQmmB,WAAU,IAGhCtiB,EAAWpF,EAAIumB,cAAcolB,GAAY,GAK7CpqC,EAAQwS,YAAY43B,GAGpBpqC,EAAQmkB,YACR1lB,EAAIgtB,SAAS4B,EAAgBrtB,EAAS6D,EAE9C,EAEAiqB,MAAO,SAASzS,GACZ,IAAIniB,EAAQ4gB,EAASpjB,KAAKojB,OAE1B,SAASe,EAAW3hB,GAChB,OAAO7C,EAAO,CAAC,EAAG6C,GAAUA,EAAO4V,KAAMgL,EAC7C,CAEApjB,KAAK2zC,kBAAkBhvB,GAAO,GAE9B,IAAIivB,EAAS7rC,EAAIkP,OAAO,MAAO0N,GAE3BkvB,EAAkB1vB,EADJ/hB,EAAYE,aAAa,MAAOtC,KAAKwC,SAOvD,GALAxB,EAAEmW,KAAKy8B,GAAQ,WACX7rC,EAAIqQ,KAAKpY,KAAM6zC,EACnB,IAGID,EAAO/yC,QAAU8jB,EAAM9jB,OAA3B,CAIA,IAAIizC,EAAY/rC,EAAIkP,OAAO,MAAO0N,GAAO,GACrConB,EAAc/rC,KAAKqW,OAAOo1B,aAAaqI,GAE3C,GAAI/H,EAAYlrC,OACZ,IAAK,IAAI4B,EAAI,EAAGkqB,EAAMof,EAAYlrC,OAAQ4B,EAAIkqB,EAAKlqB,IAC/CD,EAASJ,EAAYE,aAAayF,EAAIxF,KAAKwpC,EAAYtpC,IAAKzC,KAAKwC,QACjEuF,EAAIqQ,KAAK2zB,EAAYtpC,GAAI0hB,EAAW3hB,SAGxCA,EAASxC,KAAKwC,OAAO,GACrBxC,KAAK8gB,KAAKte,EAAOG,KAAK,GAAIwhB,EAAW3hB,GAASsxC,EAZlD,CAcJ,EAEAH,kBAAmB,SAAShvB,EAAOovB,GAC/B,GAAK/zC,KAAKyT,aAAV,CAGA,IAAIugC,EAAkB5xC,EAAYE,aAAa,YAAatC,KAAKwC,QACjE,GAAKwxC,EAKL,IAFA,IAAIR,EAAe1tC,EAAOyV,WAEjB9Y,EADDkiB,EAAM9jB,OAAS,EACP4B,GAAK,EAAGA,IAAK,CACzB,IAAI4jC,EAAkBmN,EAAanN,gBAAgB1hB,EAAMliB,IACpD4jC,IAGDA,IAAoB1hB,EAAMliB,EAAI,KAC1BsxC,EACAhsC,EAAIqQ,KAAKiuB,EAAiB2N,EAAgB57B,MAE1CrQ,EAAIuuB,QAAQ+P,EAAiB2N,EAAgB57B,KAAK1N,QAG1Dia,EAAM0Z,OAAO57B,EAAG,GACpB,CApBA,CAqBJ,EAEAgR,WAAY,WACR,OAAOzT,KAAK8H,QAAU9H,KAAK8H,OAAOjI,QAAQ4T,UAC9C,EAEA4B,OAAQ,SAASsP,GACb,IAAIliB,EAAGy3B,EAAG4R,EAAYmI,EAAa1xC,EAInC,IAFAvC,KAAK2zC,kBAAkBhvB,GAAO,GAEzBliB,EAAI,EAAGy3B,EAAIvV,EAAM9jB,OAAQ4B,EAAIy3B,EAAGz3B,KACjCqpC,EAAa9rC,KAAKqW,OAAOs1B,WAAWhnB,EAAMliB,OAEtCF,EAAOwF,EAAIxF,KAAKupC,IAChBmI,EAAc7xC,EAAYE,aAAaC,EAAMvC,KAAKwC,SAClC4V,KAAK1N,OACjB3C,EAAIuuB,QAAQwV,EAAYmI,EAAY77B,KAAK1N,OAEzCupC,EAAY77B,KAAKwB,WACjB7R,EAAI2X,YAAYosB,EAAYmI,EAAY77B,KAAKwB,WAI7D,EAEA2G,OAAQ,SAAS3N,GACb,IAAIhL,EAAO5H,KACP2kB,EAAQ5c,EAAI6c,SAASrS,EAAWoS,MAAM/R,GAAQ7K,EAAI8c,iBAAiB,GAEnEjd,EAAKyO,OAAOG,YAAYmO,GACxB/c,EAAKyN,OAAOsP,GAEZ/c,EAAKwvB,MAAMzS,EAEnB,IAGAuvB,EAAuB/yC,EAAMxB,OAAO,CACpCC,KAAM,SAAS4C,EAAQ4gB,GACnB,IAAIxb,EAAO5H,KACX4H,EAAKpF,OAASA,EACdoF,EAAKwb,OAASA,EACdxb,EAAKyO,OAAS,IAAI68B,EAAkB1wC,EACxC,EAEA40B,MAAO,SAASzS,GACZ,IAGIliB,EAAGkqB,EAAK3S,EAAM4vB,EAAWh3B,EACzBpL,EACAua,EACAiL,EANAxqB,EAASxC,KAAKwC,OACd0tB,EAASnoB,EAAIkoB,aAAatL,GAC1BwvB,EAAY3xC,EAAO,GAAGG,KAAK,GAO/B,GAAIutB,EAAOrvB,OACP,IAAK4B,EAAI,EAAGkqB,EAAMuD,EAAOrvB,OAAQ4B,EAAIkqB,EAAKlqB,IACtCuqB,EAAQkD,EAAOztB,GACGzC,KAAKyT,cAAgB3N,EAAOyV,WAAW8qB,gBAAgBrZ,KAKtD,OAFfjL,EAAUha,EAAIxF,KAAKyqB,KAGfhT,EAAOgT,EAAM9D,WACb0gB,EAAY,IAAI9jC,EAAOsuC,cAAcp6B,EAAKyC,SAAS/W,cAAeyuC,IAClEvhC,EAAQ5S,KAAK8H,OAAOwK,eACdyM,WAAWmR,EAAOztB,IACxBmnC,EAAUrpB,OAAO3N,IACVuhC,IAAyB,MAAXpyB,GAAmBiL,EAAM7I,WAAW2R,iBACzD,IAAI2d,EAAejxC,EAAQxC,KAAKojB,QAAQgU,MAAMpK,EAAMqC,aAEpD7nB,EAAUO,EAAIytB,UAAUxI,EAAOmnB,GAC/BpsC,EAAIqQ,KAAK5Q,EAAShF,EAAO,GAAG4V,YAIrC,CACH,IAAIi8B,EAAiB,IAAIZ,EAAejxC,EAAQxC,KAAKojB,QACrDixB,EAAevsC,OAAS9H,KAAK8H,OAC7BusC,EAAejd,MAAMzS,EACzB,CACJ,EAEApE,OAAQ,SAAS3N,GACb,IAAI+R,EAAQpS,EAAW6D,UAAUxD,GAC5B+R,EAAM9jB,SACP+R,EAAM2tB,mBAAmB3tB,EAAM8C,0BAC/BiP,EAAQpS,EAAW6D,UAAUxD,IAClB/R,SACP8jB,EAAQ5c,EAAI2qB,sBAAsB9f,EAAM8C,2BAIhD1V,KAAKo3B,MAAMzS,EACf,EAEAlR,WAAY,WACR,OAAOzT,KAAK8H,QAAU9H,KAAK8H,OAAOjI,QAAQ4T,UAC9C,IAGA6gC,EAAkBvJ,EAAWprC,OAAO,CAAEC,KAAM,SAASC,GACjDkrC,EAAWjrC,GAAGF,KAAKG,KAAKC,KAAML,EAAOE,EAAS,CAC1CwW,OAAQ,IAAI68B,EAAkBrzC,EAAQ2C,QACtConC,UAAW,WACP,OAAO,IAAI6J,EAAe5zC,EAAQ2C,OACtC,IAER,IAGJ7C,EAAOmG,EAAQ,CACXotC,kBAAmBA,EACnBO,eAAgBA,EAChBS,qBAAsBA,EACtBI,gBAAiBA,IAGrB,IAAIC,EAAe,CAAC,KAAK,KAAK,MAE9BvuC,EAAe,cAAe,CAC1B,CAAErD,KAAMoF,EAAI8kB,qBAAsBzU,KAAM,CAAE1N,MAAO,CAAE8pC,UAAW,UAC9D,CAAE7xC,KAAM,CAAC,OAAQyV,KAAM,CAAE1N,MAAO,CAAE+pC,MAAS,OAAQC,QAAS,GAAIC,WAAY,GAAIC,YAAa,MAC7F,CAAEjyC,KAAM,CAAC,aAAcyV,KAAM,CAAE1N,MAAO,CAAE+pC,MAAS,OAAQC,QAAS,GAAIC,WAAY,GAAIC,YAAa,MACnG,CAAEjyC,KAAM4xC,EAAcn8B,KAAM,CAAE1N,MAAO,CAAE8pC,UAAW,OAAQK,kBAAmB,QAEjFlvC,EAAa,cAAe,IAAI2uC,EAAgB,CAC5C9xC,OAAQ0D,EAAQjD,YAChB5B,GAAI,CACAgtC,WAAW,EACXhrB,MAAO,YAIfrd,EAAe,gBAAiB,CAC5B,CAAErD,KAAMoF,EAAI8kB,qBAAsBzU,KAAM,CAAE1N,MAAO,CAAE8pC,UAAW,YAC9D,CAAE7xC,KAAM,CAAC,OAAQyV,KAAM,CAAE1N,MAAO,CAAEgqC,QAAS,QAASC,WAAY,OAAQC,YAAa,OAAQH,MAAS,MACtG,CAAE9xC,KAAM,CAAC,aAAcyV,KAAM,CAAE1N,MAAO,CAAEgqC,QAAS,QAASC,WAAY,OAAQC,YAAa,OAAQH,MAAS,MAC5G,CAAE9xC,KAAM4xC,EAAcn8B,KAAM,CAAE1N,MAAO,CAAE8pC,UAAW,SAAUK,kBAAmB,cAEnFlvC,EAAa,gBAAiB,IAAI2uC,EAAgB,CAC9C9xC,OAAQ0D,EAAQhD,cAChB7B,GAAI,CACAgtC,WAAW,EACXhrB,MAAO,YAIfrd,EAAe,eAAgB,CAC3B,CAAErD,KAAMoF,EAAI8kB,qBAAsBzU,KAAM,CAAE1N,MAAO,CAAE8pC,UAAW,WAC9D,CAAE7xC,KAAM,CAAC,OAAQyV,KAAM,CAAE1N,MAAO,CAAE+pC,MAAS,QAASC,QAAS,GAAIC,WAAY,GAAIC,YAAa,MAC9F,CAAEjyC,KAAM,CAAC,aAAcyV,KAAM,CAAE1N,MAAO,CAAE+pC,MAAS,QAASC,QAAS,GAAIC,WAAY,GAAIC,YAAa,MACpG,CAAEjyC,KAAM4xC,EAAcn8B,KAAM,CAAE1N,MAAO,CAAE8pC,UAAW,QAASK,kBAAmB,cAElFlvC,EAAa,eAAgB,IAAI2uC,EAAgB,CAC7C9xC,OAAQ0D,EAAQ/C,aAChB9B,GAAI,CACAgtC,WAAW,EACXhrB,MAAO,YAIfrd,EAAe,cAAe,CAC1B,CAAErD,KAAMoF,EAAI8kB,qBAAsBzU,KAAM,CAAE1N,MAAO,CAAE8pC,UAAW,aAC9D,CAAE7xC,KAAM,CAAC,OAAQyV,KAAM,CAAE1N,MAAO,CAAEgqC,QAAS,QAASC,WAAY,OAAQC,YAAa,OAAQH,MAAS,MACtG,CAAE9xC,KAAM,CAAC,aAAcyV,KAAM,CAAE1N,MAAO,CAAEgqC,QAAS,QAASC,WAAY,OAAQC,YAAa,OAAQH,MAAS,MAC5G,CAAE9xC,KAAM4xC,EAAcn8B,KAAM,CAAE1N,MAAO,CAAE8pC,UAAW,UAAWK,kBAAmB,QAEpFlvC,EAAa,cAAe,IAAI2uC,EAAgB,CAC5C9xC,OAAQ0D,EAAQ9C,YAChB/B,GAAI,CACAgtC,WAAW,EACXhrB,MAAO,WAId,CAtaD,CAsaGniB,OAAO1B,MAAM2sB,QAEhB,SAAUnrB,GAGV,IAAIxB,EAAQ0B,OAAO1B,MACf2B,EAAQ3B,EAAM2B,MACdxB,EAASqB,EAAErB,OACXmG,EAAStG,EAAM6B,GAAGyG,OAClBC,EAAMjC,EAAOkC,IACbuK,EAAazM,EAAOyM,WACpBm3B,EAAU5jC,EAAO4jC,QACjBqB,EAAajlC,EAAOilC,WACpBmI,EAAoBptC,EAAOotC,kBAC3B98B,EAAY7D,EAAW6D,UACvBzQ,EAAeG,EAAO1D,YAAYuD,aAElCmvC,EAAmB5B,EAAkBvzC,OAAO,CAC5CC,KAAM,SAASC,GACXG,KAAK2Z,IAAM9Z,EAAQ8Z,IACnB3Z,KAAKoY,KAAOvY,EAAQuY,KACpBpY,KAAK+0C,QAAUl1C,EAAQk1C,QAEvB,IAAIpyC,EAAO3C,KAAK2C,KAAO,CAAa,MAAZ3C,KAAK2Z,IAAc,KAAO,KAAM3Z,KAAK2Z,KACzDnX,EAAS,CAAC,CAAEG,KAAMA,EAAMyV,KAAMpY,KAAKoY,OAEnCpY,KAAK+0C,SACLvyC,EAAOrC,KAAK,CACRwC,KAAMA,EACNyV,KAAMpY,KAAK+0C,UAInB7B,EAAkBpzC,GAAGF,KAAKG,KAAKC,KAAMwC,EACzC,EAEAwyC,YAAa,SAASznB,GAClB,OAAOxlB,EAAI6nB,WAAWrC,EAAMvtB,KAAKoY,OAAUpY,KAAK+0C,SAAWhtC,EAAI6nB,WAAWrC,EAAMvtB,KAAK+0C,QACzF,EAEAE,OAAQ,SAAS1nB,GACb,OAAOxlB,EAAIiS,KAAKuT,EACpB,EAEA/W,YAAa,SAASmO,GAClB,IACImnB,EAAYrpC,EADZspC,EAAc,GAGlB,IAAKtpC,EAAI,EAAGA,EAAIkiB,EAAM9jB,OAAQ4B,KAC1BqpC,EAAa9rC,KAAK2rC,WAAWhnB,EAAMliB,GAAIzC,KAAKi1C,UAE1BltC,EAAIxF,KAAKupC,IAAe9rC,KAAK2Z,KAAO3Z,KAAKg1C,YAAYlJ,IACnEC,EAAY5rC,KAAK2rC,GAIzB,GAAIC,EAAYlrC,OAAS,EACrB,OAAO,EAGX,GAAIkrC,EAAYlrC,QAAU8jB,EAAM9jB,OAC5B,OAAO,EAIX,IAAK4B,EAAI,EAAGA,EAAIspC,EAAYlrC,QACpBkrC,EAAYtpC,GAAGymB,YAAc4iB,EAAW5iB,WADZzmB,IAKhC,GAAIspC,EAAYtpC,IAAMqpC,EAClB,OAAO,EAIf,OAAO,CACX,EAEAL,aAAc,SAAS9mB,GACnB,IAAIwuB,EAAYnzC,KAAK2rC,WAAWhnB,EAAM,GAAI3kB,KAAKi1C,QAE/C,OAAI9B,GAAaprC,EAAIxF,KAAK4wC,IAAcnzC,KAAK2Z,IAClCw5B,EAGJ,IACX,IAIAiB,EAAgBjzC,EAAMxB,OAAO,CAC7BC,KAAM,SAASC,EAASq1C,GACpB,IAAIttC,EAAO5H,KACXH,EAAUmB,EAAEyiB,cAAc5jB,GAAWA,EAAU,CAAE8Z,IAAK9Z,EAASuY,KAAM,MACrExQ,EAAK+R,IAAM9Z,EAAQ8Z,IACnB/R,EAAKwQ,KAAOvY,EAAQuY,KACpBxQ,EAAKyO,OAAS,IAAIy+B,EAAiBj1C,GACnC+H,EAAKstC,UAAYA,CACrB,EAEAD,OAAQ,SAAS1nB,GACb,OAAOxlB,EAAIiS,KAAKuT,EACpB,EAEA9Z,WAAY,WACR,OAAOzT,KAAK8H,UAAY9H,KAAK8H,OAAOjI,QAAQ4T,UAChD,EAEAqN,KAAM,SAAS9G,EAAM2K,GACjB,IACIliB,EAAG8qB,EADH4nB,EAAKptC,EAAIghB,OAAO/O,EAAKgW,cAAe,MAEpColB,EAAcp1C,KAAKyT,aAAe3N,EAAOyV,WAAW2gB,UAAYl7B,EAAEqpB,KAEtE,IAAK5nB,EAAI,EAAGA,EAAIkiB,EAAM9jB,OAAQ4B,IAG1B,GAFA8qB,EAAO5I,EAAMliB,GAETsF,EAAI4Y,GAAG4M,EAAM,MACbvT,EAAK8B,YAAYyR,QAIrB,GAAIvtB,KAAKi1C,OAAO1nB,GACZ,KAAOA,EAAKE,YACRzT,EAAK8B,YAAYyR,EAAKE,iBAK9B,GAAI1lB,EAAI4Y,GAAG4M,EAAM,MAAjB,CACI,KAAOA,EAAKE,YACR0nB,EAAGr5B,YAAYyR,EAAKE,YAExBzT,EAAK8B,YAAYq5B,GACjB5nB,EAAKzR,YAAY9B,GACjBA,EAAOA,EAAKyV,WAAU,GACtB0lB,EAAKA,EAAG1lB,WAAU,EAEtB,MAEA0lB,EAAGr5B,YAAYyR,GAEXxlB,EAAIsrB,QAAQ9F,KACZvT,EAAK8B,YAAYq5B,GACZC,EAAY7nB,IACbxlB,EAAIguB,OAAOxI,GAEf4nB,EAAKA,EAAG1lB,WAAU,IAItB0lB,EAAG1nB,YACHzT,EAAK8B,YAAYq5B,EAEzB,EAEAE,YAAa,SAASt0B,EAAQ4D,GAC1B,IAAK,IAAIliB,EAAI,EAAGA,EAAIkiB,EAAM9jB,OAAQ4B,IAC9B,GAAIsF,EAAIyP,iBAAiBuJ,EAAQ4D,EAAMliB,IACnC,OAAO,EAIf,OAAO,CACX,EAEA2wC,SAAU,SAASD,EAAWxuB,GAC1B,GAA2B,YAAvBwuB,EAAUv5B,UAAyB,CACnC,IAAIuZ,EAAUggB,EAAUxlB,YAExB,GAAIwF,GAAWprB,EAAIsrB,QAAQF,GACvB,OAAO,EAKX,IAFAA,EAAUggB,EAAU3kB,kBAELzmB,EAAIsrB,QAAQF,GACvB,OAAO,CAEf,CAEA,OAAOnzB,KAAKq1C,YAAYlC,EAAWxuB,IAAU5c,EAAI2rB,SAASyf,IAAoC,GAAtBA,EAAU31B,QACtF,EAEA83B,aAAc,SAAS/nB,GACnB,IAAIkK,EAAW1vB,EAAIwvB,gBAAgBhK,GAEnC,OAAOvsB,EAAEusB,GAAMqf,aAAanV,EAAU,QAC1C,EAEAtS,MAAO,SAASvS,GACZ,IACI8U,EAAOwV,EAAKvb,EADZgD,EAAQvO,EAAUxD,GAGtB,GAAI+R,EAAM9jB,OAAQ,CACd6mB,EAAQ3f,EAAIgoB,aAAapL,EAAM,GAAI,CAAC,OACpCuY,EAAMn1B,EAAIgoB,aAAapL,EAAMA,EAAM9jB,OAAS,GAAI,CAAC,OACjD+R,EAAMutB,eAAezY,GACrB9U,EAAM0tB,YAAYpD,GAElB,IAAK,IAAIz6B,EAAI,EAAGy3B,EAAIvV,EAAM9jB,OAAQ4B,EAAIy3B,EAAGz3B,IAAK,CAC1C,IAAIqpC,EAAa9rC,KAAKqW,OAAOs1B,WAAWhnB,EAAMliB,IAC1CqpC,KACAnqB,EAAU3hB,KAAKs1C,aAAaxJ,IAChBjrC,OACR0R,EAAW4S,MAAMvS,EAAO+O,EAAQ1F,OAAO,IAAI,GAE3C1J,EAAW4S,MAAMvS,EAAOk5B,GAAY,GAGhD,CACJ,CACJ,EAEAyJ,MAAO,SAAS57B,EAAKmyB,GAGjB,IAFA,IAAuCxuB,EAAnCoQ,EAAOoe,EAAWtd,gBAEfd,IAA2B,YAAlBA,EAAK9T,WAA6C,GAAjB8T,EAAKlQ,UAAiBzV,EAAI4qB,aAAajF,KACpFA,EAAOA,EAAKc,gBAIhB,GAAId,GAAQ3lB,EAAIxF,KAAKmrB,IAAS/T,GAAO3Z,KAAKqW,OAAO2+B,YAAYtnB,GAAO,CAChE,KAAOoe,EAAWre,YACdC,EAAK5R,YAAYgwB,EAAWre,YAEhC1lB,EAAIsN,OAAOy2B,GACXA,EAAape,CACjB,CAGA,IADApQ,EAAOwuB,EAAWne,YACXrQ,IAA2B,YAAlBA,EAAK1D,WAA6C,GAAjB0D,EAAKE,UAAiBzV,EAAI4qB,aAAarV,KACpFA,EAAOA,EAAKqQ,YAIhB,GAAIrQ,GAAQvV,EAAIxF,KAAK+a,IAAS3D,GAAO3Z,KAAKqW,OAAO2+B,YAAY13B,GAAO,CAChE,KAAOwuB,EAAWjZ,WACdvV,EAAKhF,aAAawzB,EAAWjZ,UAAWvV,EAAKmQ,YAEjD1lB,EAAIsN,OAAOy2B,EACf,CACJ,EAEA0J,UAAW,SAASjoB,GAChB,OACIA,GAAQA,EAAKyC,cAAcld,OAC1B,0BAA0BY,KAAK3L,EAAIxF,KAAKgrB,MACxCA,EAAKpJ,WAAW2R,eAEzB,EAEA2f,iBAAkB,SAAS9wB,GACvB,IAGImnB,EAHAlkC,EAAO5H,KACPqW,EAASzO,EAAKyO,OACdsD,EAAM/R,EAAK+R,IAmBf,OAhBAmyB,EAAaz1B,EAAOo1B,aAAa9mB,MAK7BmnB,GADAz1B,EAAS,IAAIy+B,EAAiB,CAAEn7B,IAAY,MAAPA,EAAc,KAAO,QACtC8xB,aAAa9mB,IAGhCmnB,IAIDA,GADAA,GADAz1B,EAAS,IAAIy+B,EAAiB,CAAEn7B,IAAKA,KACjB8xB,aAAa9mB,KACN/c,EAAKyO,OAAO2+B,YAAYlJ,GAAc,KAAOA,GAIrEA,CACX,EAEA4J,eAAgB,SAASC,EAAShxB,GAC9B,IAOI0K,EAPA1V,EAAM3Z,KAAK2Z,IACXvB,EAAOpY,KAAKoY,KACZue,EAAiB5uB,EAAIovB,wBAAwBxS,GAE7CiS,EAAY,GACZkV,EAAa9rC,KAAKy1C,iBAAiB9wB,GAsBvC,SAASixB,IACLhf,EAAUz2B,KAAKH,KACnB,CApBI,oBAAoB0T,KAAK3L,EAAIxF,KAAKo0B,IAClCtH,EAAaruB,EAAEuS,IAAIoR,GAAO,SAAS4I,GAC/B,OAAOxlB,EAAIgoB,aAAaxC,EAAM,CAAC,MACnC,KAEA8B,EAAatnB,EAAI2qB,sBAAsBiE,GAEnC31B,EAAEsxB,KAAKjD,EAAYtnB,EAAIsrB,SAASxyB,SAChCwuB,EAAaruB,EAAEsxB,KAAKjD,EAAY,SAAU9B,GACtC,OAAOvtB,KAAKq1C,YAAY9nB,EAAM5I,EACjC,EAAEvc,KAAKpI,QAGPqvB,EAAWxuB,SACZwuB,EAAa1K,IAQrB,IAAK,IAAIliB,EAAI,EAAGA,EAAI4sB,EAAWxuB,OAAQ4B,IAAK,CACxC,IAAI8vB,EAAQlD,EAAW5sB,KACNqpC,IAAe/jC,EAAIyP,iBAAiBs0B,EAAYvZ,KAAWvyB,KAAKozC,SAAS7gB,EAAO5N,KAM7FmnB,GAAc9rC,KAAKi1C,OAAO1iB,IAE1BvxB,EAAEmW,KAAKob,EAAM+J,SAAUsZ,GACvB7tC,EAAIsN,OAAOkd,IAEXqE,EAAUz2B,KAAKoyB,GAEvB,CAgBA,IAdIqE,EAAU/1B,QAAUwuB,EAAWxuB,QAAUb,KAAKw1C,UAAU7e,KACxDC,EAAY,CAACD,IAGZmV,IACDA,EAAa/jC,EAAIghB,OAAO4N,EAAe3G,cAAerW,EAAKvB,GACvDrQ,EAAIsrB,QAAQuD,EAAU,KACtB7uB,EAAIouB,gBAAgBS,EAAU,GAAIkV,GAEtC/jC,EAAIuQ,aAAawzB,EAAYlV,EAAU,KAG3C52B,KAAK8gB,KAAKgrB,EAAYlV,GAEf7uB,EAAI8pB,MAAMia,EAAWne,cACxB5lB,EAAIsN,OAAOy2B,EAAWne,aAGrB3tB,KAAKqW,OAAO2+B,YAAYlJ,KACzBA,EAAW5V,gBAAgB,QAC3B4V,EAAWphC,MAAMmrC,cAAgB,GACjC9tC,EAAIouB,gBAAgBpuB,EAAIghB,OAAO4N,EAAe3G,cAAerW,EAAKvB,GAAO0zB,GAAY,IAGrFA,GAAkD,KAApCA,EAAW/4B,aAAa,SACtC+4B,EAAW5V,gBAAgB,QAG1BnuB,EAAI4Y,GAAGmrB,EAAYnyB,IACpB5R,EAAIytB,UAAUsW,EAAYnyB,GAG9B3Z,KAAKu1C,MAAM57B,EAAKmyB,EACpB,EAEA1U,MAAO,SAASzS,GACZ,IAEImxB,EACAC,EACAJ,EACApoB,EALA9qB,EAAI,EACJuzC,EAAW,GAKX9b,EAAIvV,EAAM9jB,OACVwlC,EAAkBrmC,KAAKyT,aAAe3N,EAAOyV,WAAW8qB,gBAAkBrlC,EAAEqpB,KAEhF,SAAS4rB,IACDH,GACAE,EAAS71C,KAAK,CACVw1C,QAASG,EACTnxB,MAAOoxB,GAGnB,CAGA,IAAKtzC,EAAI,EAAGA,EAAIy3B,EAAGz3B,IACf8qB,EAAO8Y,EAAgB1hB,EAAMliB,KAAOkiB,EAAMliB,GAC1CkzC,EAAU5tC,EAAIwvB,gBAAgBhK,EAAM,CAAC,KAAK,KAAK,SAC1CuoB,GAAeH,GAAWG,EAK3BC,EAAU51C,KAAKotB,IAJf0oB,IACAF,EAAY,CAACxoB,GACbuoB,EAAcH,GAQtB,IAFAM,IAEKxzC,EAAI,EAAGA,EAAIuzC,EAASn1C,OAAQ4B,IAC7BzC,KAAK01C,eAAeM,EAASvzC,GAAGkzC,QAASK,EAASvzC,GAAGkiB,MAE7D,EAEAoR,OAAQ,SAASmgB,GACb,IAEIv0B,EACAwzB,EACA9Y,EACA9J,EALA4jB,EAAWD,EAAGlmB,cAAcgR,yBAC5BkU,EAAYl1C,KAAKk1C,UAMrB,IAAKC,EAAKe,EAAGzoB,WAAY0nB,EAAIA,EAAKA,EAAGxnB,YAAa,CAG9C,IAFA0O,EAAIt0B,EAAIghB,OAAOmtB,EAAGlmB,cAAeklB,GAAa,KAEvCC,EAAG1nB,YACN8E,EAAQ4iB,EAAG1nB,WAEP1lB,EAAIsrB,QAAQd,IAER8J,EAAE5O,aACF0oB,EAASr6B,YAAYugB,GACrBA,EAAIt0B,EAAIghB,OAAOmtB,EAAGlmB,cAAeklB,GAAa,MAGlDiB,EAASr6B,YAAYyW,IAErB8J,EAAEvgB,YAAYyW,GAIlB8J,EAAE5O,YACF0oB,EAASr6B,YAAYugB,EAE7B,EAEA1a,EAAU3hB,KAAKs1C,aAAaY,IAEhB,IACRnuC,EAAIyf,YAAY2uB,EAAUx0B,EAAQ1F,OAAO,IACzC0F,EAAQ1F,OAAO5G,UAEftN,EAAIyf,YAAY2uB,EAAUD,GAG9BnuC,EAAIsN,OAAO6gC,EACf,EAEA7gC,OAAQ,SAASsP,GAEb,IADA,IAAImnB,EACKrpC,EAAI,EAAGy3B,EAAIvV,EAAM9jB,OAAQ4B,EAAIy3B,EAAGz3B,KACrCqpC,EAAa9rC,KAAKqW,OAAOs1B,WAAWhnB,EAAMliB,MAGtCzC,KAAK+1B,OAAO+V,EAGxB,EAEAvrB,OAAQ,SAAS3N,GACb,IAAIhL,EAAO5H,KACP2kB,EAAQvO,EAAUxD,GAClB8gC,EAAW9gC,EAAM8C,wBAErB,IAAKiP,EAAM9jB,SACP+R,EAAM2tB,mBAAmBmT,KACzB/uB,EAAQvO,EAAUxD,IACP/R,QAAQ,CACf,IAAI0Q,EAAOmiC,EAAS1jB,cAAcwV,eAAe,IACjD5yB,EAAM2B,eAAeuH,YAAYvK,GACjCoT,EAAQ,CAACpT,GACTqB,EAAMmM,WAAWxN,EAAK2X,WAC1B,CAEJvE,EAAQ5c,EAAI6c,SAASD,EAAO5c,EAAI8c,iBAAiB,GAC7Cjd,EAAKyO,OAAOG,YAAYmO,IACxB/c,EAAKud,MAAMvS,GACXhL,EAAKyN,OAAOsP,IAEZ/c,EAAKwvB,MAAMzS,EAEnB,IAIAyxB,EAAc1M,EAAQ/pC,OAAO,CAC7BC,KAAM,SAASC,GACXA,EAAQ+pC,UAAY,IAAIwK,EAAc,CAAEz6B,IAAK9Z,EAAQ8Z,IAAKvB,KAAMvY,EAAQuY,OACxEsxB,EAAQ5pC,GAAGF,KAAKG,KAAKC,KAAMH,EAC/B,IAGAw2C,EAAWtL,EAAWprC,OAAO,CAC7BC,KAAM,SAASC,GACXG,KAAKH,QAAUA,EAEfkrC,EAAWjrC,GAAGF,KAAKG,KAAKC,KAAML,EAAOE,EAAS,CAC1CwW,OAAQ,IAAIy+B,EAAiBj1C,KAErC,EAEAO,QAAS,SAASgqB,GACd,OAAO,IAAIgsB,EAAYz2C,EAAOyqB,EAAkB,CAAEzQ,IAAK3Z,KAAKH,QAAQ8Z,IAAKvB,KAAMpY,KAAKH,QAAQuY,OAChG,IAGJzY,EAAOmG,EAAQ,CACXgvC,iBAAkBA,EAClBV,cAAeA,EACfgC,YAAaA,EACbC,SAAUA,IAGd1wC,EAAa,sBAAuB,IAAI0wC,EAAS,CAAE18B,IAAK,KAAMvB,KAAM,CAAE1N,MAAO,CAAEmrC,cAAe,IAAMnuC,KAAM,IAAMrG,GAAI,CAAEgtC,WAAW,EAAMhrB,MAAO,YAC9I1d,EAAa,oBAAqB,IAAI0wC,EAAS,CAAE18B,IAAK,KAAMvB,KAAM,CAAE1N,MAAO,CAAEmrC,cAAe,IAAMnuC,KAAM,IAAMrG,GAAI,CAAEgtC,WAAW,EAAMhrB,MAAO,YAC5I1d,EAAa,uBAAwB,IAAI0wC,EAAS,CAAE18B,IAAK,KAAMvB,KAAM,CAAE1N,MAAO,CAAEmrC,cAAe,gBAAmBd,QAAS,CAAErtC,KAAM,KAAOrG,GAAI,CAAEgtC,WAAW,EAAMhrB,MAAO,YACxK1d,EAAa,uBAAwB,IAAI0wC,EAAS,CAAE18B,IAAK,KAAMvB,KAAM,CAAE1N,MAAO,CAAEmrC,cAAe,gBAAmBd,QAAS,CAAErtC,KAAM,KAAOrG,GAAI,CAAEgtC,WAAW,EAAMhrB,MAAO,WAEvK,CA/fD,CA+fGniB,OAAO1B,MAAM2sB,QAEhB,SAAUnrB,GAEV,IAAIxB,EAAQ0B,OAAO1B,MACfsG,EAAStG,EAAM6B,GAAGyG,OAClBqiB,EAAOrkB,EAAOqkB,KACdgjB,EAAuBrnC,EAAOqnC,qBAC9BzD,EAAU5jC,EAAO4jC,QACjB3hC,EAAMjC,EAAOkC,IACb5F,EAAc0D,EAAO1D,YACrBmQ,EAAazM,EAAOyM,WACpB5M,EAAevD,EAAYuD,aAG3B2wC,EAAiBnJ,EAAqBxtC,OAAO,CAC7CC,KAAM,SAASC,GACX,IAAI+H,EAAO5H,KACXmqB,EAAKrqB,GAAGF,KAAKG,KAAK6H,EAAMpI,EAAMsB,WAAW,CAAC,EAAG8G,EAAK/H,QAASA,IAE3D+H,EAAKF,KAAO,oBAEZE,EAAKyO,OAAS,CACVE,UAAW,WAAa,MAAO,EAAI,EAE3C,EAEA1W,QAAS,CACL6Z,MAAO,CACH,CAAEnI,KAAM,YAAaC,MAAO,KAC5B,CAAED,KAAM,YAAaC,MAAO,cAC5B,CAAED,KAAM,YAAaC,MAAO,MAC5B,CAAED,KAAM,YAAaC,MAAO,MAC5B,CAAED,KAAM,YAAaC,MAAO,MAC5B,CAAED,KAAM,YAAaC,MAAO,MAC5B,CAAED,KAAM,YAAaC,MAAO,MAC5B,CAAED,KAAM,YAAaC,MAAO,OAEhC5E,MAAO,KAGX2pC,iBAAkB,SAASpY,GACvB,IAAI3sB,EAAQ2sB,EAAK3sB,MAEjB,IAAKA,EACD,OAAO2sB,EAGX,GAAIA,EAAKxkB,KAAOwkB,EAAKvkB,UACjB,OAAOukB,EAGX,IAAIqY,EAAMhlC,EAAMoU,QAAQ,KAWxB,OATY,IAAR4wB,EACArY,EAAKvkB,UAAYpI,EAAMk2B,UAAU,IAClB,GAAR8O,EACPrY,EAAKxkB,IAAMnI,GAEX2sB,EAAKxkB,IAAMnI,EAAMk2B,UAAU,EAAG8O,GAC9BrY,EAAKvkB,UAAYpI,EAAMk2B,UAAU8O,EAAM,IAGpCrY,CACX,EAEA/9B,QAAS,SAASgrB,GACd,IAAIxjB,EAAO5H,KACPm+B,EAAO/S,EAAK5Z,MAIhB,OAFA2sB,EAAOn+B,KAAKu2C,iBAAiBpY,GAEtB,IAAIr4B,EAAOglC,cAAc,CAC5Bl4B,MAAOwY,EAAKxY,MACZg3B,UAAW,WACP,IAAIA,EACAjnC,GAAQw7B,EAAKxkB,KAAOwkB,EAAKsY,SAAW,QAAQtxB,MAAM,KAClD3iB,EAAS,CAAC,CACNG,KAAMA,EACNyV,KAAM,CAAEwB,UAAWukB,EAAKvkB,WAAa,MAU7C,OANIgwB,EADA5oC,EAAE0B,QAAQC,EAAK,GAAIoF,EAAImlB,iBAAmB,EAC9B,IAAIpnB,EAAOinC,sBAAsBvqC,GAEjC,IAAIsD,EAAOouC,qBAAqB1xC,IAGtCsF,OAASF,EAAKE,OACjB8hC,CACX,GAER,EAEA8M,SAAU,SAAS5jC,GACf,IAGIrQ,EAAGkX,EAAKC,EAAWlP,EAHnB8O,EAAYxZ,KAAKwZ,UACjBC,EAAaD,EAAUC,WACvBC,EAAQD,EAAWM,OAOvB,GAJIjH,GACA0G,EAAUQ,KAAKxJ,IAAI,mBAAoBzI,EAAIkS,uBAAuBjZ,EAAE8R,KAGpE9S,KAAKwZ,WAAaxZ,KAAKwZ,UAAU3Z,UAAmD,IAAxCG,KAAKwZ,UAAU3Z,QAAQ8P,aACnE,IAAKlN,EAAI,EAAGA,EAAIiX,EAAM7Y,OAAQ4B,IAC1BkX,EAAMD,EAAMjX,GAAGkX,KAAO,OACtBC,EAAYF,EAAMjX,GAAGmX,UAIrBlP,GAFAA,EAAQ3C,EAAImS,YAAYpH,EAAM6G,EAAK,CAAEC,UAAWA,KAElCnU,QAAQ,KAAM,KAE5BiU,EAAMjX,GAAGiI,MAAQA,EAAQ,wBAIjC+O,EAAW/Y,QAAQ,SACvB,EAEA0W,WAAY,SAAS/V,EAAIyG,GACrB,IAAIjI,EAAUG,KAAKH,QACf+F,EAAW/F,EAAQ0C,KACnBqF,EAAO5H,KACPwZ,EAAYnY,EAAGyY,uBAEdN,IAIL5R,EAAKE,OAASA,EACdF,EAAK4R,UAAYA,EAGjBnY,EAAG6G,QAAQ,mBAAmB0E,MAAM/M,EAAQ+M,OAE5C4M,EAAUrH,WAAW,CACjBwkC,YAAa7uC,EAAOjI,QAAQ+J,SAASa,WACrCoJ,OAAQ,KACJ,IAAI+iC,EAAWp9B,EAAUo9B,WAErBA,GACAzsB,EAAKzX,KAAK5K,EAAQlC,EAAUgxC,EAASC,SACzC,EAEJC,UAAW,WACP,IAAIr0C,EAAGiX,EAAQF,EAAUC,WAAWM,OAChC48B,EAAcn9B,EAAUQ,KAAK+G,SAASxX,KAAK,uBAE/C,IAAK9G,EAAI,EAAGA,EAAIiX,EAAM7Y,OAAQ4B,IAC1BiX,EAAMjX,GAAKmF,EAAK2uC,iBAAiB78B,EAAMjX,IAGvCk0C,EAAY91C,QACZ81C,EAAYthC,QAEpB,IAER,EAEA0hC,mBAAoB,SAASr9B,EAAOiL,GAChC,IAAK,IAAIliB,EAAI,EAAGA,EAAIiX,EAAM7Y,OAAQ4B,IAAK,CACnC,IAAI07B,EAAOzkB,EAAMjX,GAGbskC,GAFM5I,EAAKxkB,KAAOwkB,EAAKsY,SAAW,KACtBtY,EAAKvkB,UAAY,IAAMukB,EAAKvkB,UAAY,IAKxD,GAFc5Y,EAAE2jB,EAAM,IAAIzc,QAAQ6+B,GAAU,GAE5C,CAIA,GAAoB,GAAhBpiB,EAAM9jB,OACN,OAAOs9B,EAAK3sB,MAGhB,IAAK,IAAIwlC,EAAI,EAAGA,EAAIryB,EAAM9jB,QACjBG,EAAE2jB,EAAMqyB,IAAI9uC,QAAQ6+B,GAAU,GADLiQ,IAGvB,GAAIA,GAAKryB,EAAM9jB,OAAS,EAC3B,OAAOs9B,EAAK3sB,KAVpB,CAaJ,CAEA,MAAO,EACX,EAEArJ,OAAQ,SAAS9G,EAAIsjB,GACjB,IAAIsyB,EAAYj2C,EAAEK,GAAI0Y,KAAK/Z,KAAK0H,MAEhC,GAAKuvC,EAAL,CAIA,IAEIx0C,EAAGg0C,EAFHh9B,EAAaw9B,EAAUx9B,WACvBC,EAAQD,EAAWM,OAEnB25B,EAAW3rC,EAAI4uB,eAAeS,MAAM,KAAMzS,GAE9C,GAAI+uB,GAAY3rC,EAAIwvB,gBAAgBmc,IAAa1zC,KAAKk3C,WAAaxD,EAAnE,CAMA,IAHI1zC,KAAKk3C,UAAYxD,EAGhBjxC,EAAI,EAAGA,EAAIiX,EAAM7Y,OAAQ4B,IAC1Bg0C,EAAU/8B,EAAMjX,GAAGg0C,QAEnB/8B,EAAMjX,GAAG4e,SAAWo1B,KAAaz1C,EAAE0yC,GAAUxrC,QAAQuuC,GAAS51C,OAGlE4Y,EAAWxC,OAAO,CAAC,CAAEs5B,MAAO,UAAW4G,SAAU,KAAM3lC,OAAO,KAE9D27B,EAAqBrtC,GAAGqI,OAAOpI,KAAKC,KAAMqB,EAAIsjB,GAE9CsyB,EAAUzlC,MAAMxR,KAAK+2C,mBAAmBt9B,EAAWiK,OAAQiB,IAE3DsyB,EAAU3tC,QAAQyd,YAAY,cAAetN,EAAWiK,OAAO7iB,OAd/D,CAXA,CA0BJ,EAEA6Q,QAAS,WACL1R,KAAKk3C,UAAY,IACrB,IAGAE,EAAqB1N,EAAQ/pC,OAAO,CACpC+S,KAAM,WACF,IAAIE,EAAQ5S,KAAK6pC,WAAU,GAC3B7pC,KAAKq3C,YAAcr3C,KAAKH,QAAQwV,QAAU,wCAAwC8P,MAAM,KAExF5S,EAAW40B,qBAAqBv0B,GAOhC,IALA,IAAI+R,EAAQpS,EAAWo0B,OAAO/zB,GAAO,SAAS2a,GAC1C,OAAOA,CACX,IAGSkE,EAAI9M,EAAM9jB,OAAS,EAAG4wB,GAAK,EAAGA,IAAK,CACxC,IAAIlE,EAAO5I,EAAM8M,GACZzxB,KAAKqmC,gBAAgB9Y,IACtBvtB,KAAKs3C,MAAM/pB,EAEnB,CAEAvtB,KAAK8pC,aAAal3B,EACtB,EAEA0kC,MAAO,SAAS/pB,GACZ,GAAKA,IAAQxlB,EAAI+qB,SAASvF,GAA1B,CAIA,IAAIhrB,EAAOwF,EAAIxF,KAAKgrB,GAEpB,GAAY,MAARhrB,GAAwB,MAARA,EAAc,CAC9B,IAAIg1C,EAAgB,IAAIzxC,EAAOsuC,cAAc7xC,GACzCmrB,EAAOH,EAAKiB,gBACZlR,EAAOiQ,EAAKI,YAKhB,IAHA4pB,EAAcxhB,OAAOxI,GAGdG,GAAQA,GAAQpQ,EAAMoQ,EAAOA,EAAKC,YACrC3tB,KAAKs3C,MAAM5pB,EAEnB,MAAO,GAAY,cAARnrB,EACPwF,EAAIytB,UAAUjI,EAAM,UACjB,GAAqB,GAAjBA,EAAK/P,UAAkBzV,EAAIkqB,cAAc1E,IAsB5D,SAAwBA,GACpB,IAAI4nB,EAAKptC,EAAI2vB,sBAAsBnK,EAAM,CAAC,OAC1C,GAAI4nB,EAAI,CACJ,IAAIoC,EAAgB,IAAIzxC,EAAOsuC,cAAcrsC,EAAIxF,KAAK4yC,EAAGjsB,aACrDtW,EAAQpT,EAAM6B,GAAGyG,OAAOi4B,SAAS6B,SAASrU,GAC9C3a,EAAMmM,WAAWo2B,GACjBoC,EAAch3B,OAAO3N,EACzB,CACJ,CAtBY4kC,CAAejqB,OARwC,CACvD,IAAK,IAAI9qB,EAAI8qB,EAAK8B,WAAWxuB,OAAS,EAAG4B,GAAK,EAAGA,IAC7CzC,KAAKs3C,MAAM/pB,EAAK8B,WAAW5sB,IAG/B8qB,EAAK2I,gBAAgB,SACrB3I,EAAK2I,gBAAgB,QACzB,CAIIl1B,EAAE0B,QAAQH,EAAMvC,KAAKq3C,cAAgB,GACrCtvC,EAAIguB,OAAOxI,EA7Bf,CA+BJ,EAEA8Y,gBAAiB,SAAS9Y,GACtB,OAAOvtB,KAAKyT,cAAgB3N,EAAOyV,WAAW8qB,gBAAgB9Y,EAClE,IAcJvsB,EAAErB,OAAOmG,EAAQ,CACbwwC,eAAgBA,EAChBc,mBAAoBA,IAGxBzxC,EAAa,aAAc,IAAI2wC,EAAe,CAC1Cj1C,GAAI,CACAqG,KAAM,YACN8R,UAAW,eACX6K,iBAAkB,CACduqB,cAAe,OACfD,eAAgB,QAChB8I,gBAAgB,EAChBC,WAAW,EACX3zB,SAAUvkB,EAAMukB,UACXhK,GAAS,2BAA2BA,EAAKrP,MAAQ,0CAA0CqP,EAAKrP,OAAS,KAAO,OAAOlL,EAAMq/B,WAAW9kB,EAAKxI,kBAGtJg9B,SAAU,YAIlB5oC,EAAa,kBAAmB,IAAIwkB,EAAK,CAAE/pB,QAASg3C,IAEnD,CAnUD,CAmUGl2C,OAAO1B,MAAM2sB,QAEhB,SAAUnrB,EAAGC,GAEb,IAAIzB,EAAQ0B,OAAO1B,MACfG,EAASqB,EAAErB,OACX8S,EAASjT,EAAMq/B,WACf/4B,EAAStG,EAAM6B,GAAGyG,OAClB1F,EAAc0D,EAAO1D,YACrB2F,EAAMjC,EAAOkC,IACbrC,EAAevD,EAAYuD,aAC3B4M,EAAazM,EAAOyM,WACpBm3B,EAAU5jC,EAAO4jC,QACjBhoC,EAAOlC,EAAMkC,KACbi2C,EAAkB,sBAClBC,EAAoB,wBACpBC,EAAoB,wBACpBC,EAAqB,yBAErBC,EAAerO,EAAQ/pC,OAAO,CAC9BC,KAAM,SAASC,GACX,IAAI+H,EAAO5H,KACX0pC,EAAQ5pC,GAAGF,KAAKG,KAAK6H,EAAM/H,GAE3B+H,EAAKgM,OAAQ,EACbhM,EAAKuc,WAAa,CAAC,CACvB,EAEArgB,YAAa,SAAS4rC,EAAK98B,GACvB,IAAIuR,EAAankB,KAAKmkB,WAClB7P,EAAM/B,EAAWutB,kBAAkBltB,GAEvC,GAAIuR,EAAWpM,KAAyB,WAAlBoM,EAAWpM,IAAkB,CAE/C,IAAIigC,EAAqB,WACrB77B,YAAW,WACFgI,EAAWvX,OACZ8iC,EAAIxZ,gBAAgB,SAGnB/R,EAAWtX,QACZ6iC,EAAIxZ,gBAAgB,UAGxBwZ,EAAIxZ,gBAAgB,WACxB,GACJ,EAEA,IAAKwZ,EAgBD,OAfAA,EAAM3nC,EAAIghB,OAAOzU,EAAK,MAAO6P,IACzB8zB,OAASvI,EAAIwI,QAAUF,EAE3BplC,EAAM4tB,iBACN5tB,EAAMwuB,WAAWsO,GAEZA,EAAI/hB,aACL5lB,EAAIyf,YAAYlT,EAAIkxB,eAAe,UAAWkK,GAGlDsI,IAEAplC,EAAMwtB,cAAcsP,GACpB98B,EAAM0tB,YAAYoP,GAClBn9B,EAAWY,YAAYP,IAChB,EAEP88B,EAAIuI,OAASvI,EAAIwI,QAAUF,EAC3BjwC,EAAIqQ,KAAKs3B,EAAKvrB,GACd6zB,GAER,CAEA,OAAO,CACX,EAEAr3C,KAAM,WACF,IAAIiH,EAAO5H,KACP4S,EAAQhL,EAAKiiC,YAEZjiC,EAAK9D,YAAYyO,EAAW+zB,MAAM1zB,GAAQA,IAC3ChL,EAAKkiC,aAAal3B,EAE1B,EAEAF,KAAM,WACF,IAMIg4B,EACA0F,EAPAxoC,EAAO5H,KACP4S,EAAQhL,EAAKiiC,YACbsO,GAAU,EACVzI,EAAMn9B,EAAW+zB,MAAM1zB,GACvBpH,EAAakkC,GAAOA,EAAI38B,aAAa,UAAY,GACjDtH,EAAcikC,GAAOA,EAAI38B,aAAa,WAAa,GAGnDqlC,EAAO54C,EAAM+B,QAAQE,QAAQsZ,KAC7Blb,EAAU+H,EAAKE,OAAOjI,QACtB+J,EAAW/J,EAAQ+J,SACnBwH,EAAevR,EAAQuR,aACvBinC,KAAiB74C,EAAM6B,GAAGi3C,cAAgBlnC,GAAgBA,EAAamnC,WA/FnF,YA+FgGnnC,EAAamnC,UAAUC,MAC3GxnC,EAAgB,CACZiH,MAAOrO,EAAS9F,YAChBud,SAAS,EACTvR,UAAWuoC,GAKnB,SAASjhB,EAAMluB,GACX,IAAI1B,EAAUkjC,EAAOljC,QACjB4f,EAAI1B,SAASle,EAAQ+B,KAAKsuC,GAAmBziC,MAAO,IACpDiF,EAAIqL,SAASle,EAAQ+B,KAAKuuC,GAAoB1iC,MAAO,IAEzDxN,EAAKuc,WAAa,CACdpM,IAAKvQ,EAAQ+B,KAAKouC,GAAiBviC,MAAM3P,QAAQ,KAAM,OACvD8gB,IAAK/e,EAAQ+B,KAAKquC,GAAmBxiC,OAGzCxN,EAAKuc,WAAWvX,MAAQ,KACxBhF,EAAKuc,WAAWtX,OAAS,MAEpBgZ,MAAMuB,IAAMA,EAAI,IACjBxf,EAAKuc,WAAWvX,MAAQwa,IAGvBvB,MAAMxL,IAAMA,EAAI,IACjBzS,EAAKuc,WAAWtX,OAASwN,GAG7B89B,EAAUvwC,EAAK9D,YAAY4rC,EAAK98B,GAEhC0G,EAAMpQ,GAEFtB,EAAKiM,QACLjM,EAAKiM,QAEb,CAEA,SAASyF,EAAMpQ,GACXA,EAAEgU,iBACFkzB,EAAK1+B,UACLg5B,EAAOh5B,UAEP3J,EAAIooB,mBAAmB5d,EAAWutB,kBAAkBltB,IAAQoB,QACvDmkC,GACDvwC,EAAKkiC,aAAal3B,EAE1B,CAzCA5S,KAAKspC,mBAAmB12B,GAmDxB5B,EAAcsI,MAAQA,EAElB++B,IACArnC,EAAcpE,MAAQ,KAE1BoE,EAAc2+B,SAAW,IAEzBjF,EAAS1qC,KAAKgqC,aAAa,SAAUh5B,GAAe+I,KAAK,eAEzDq2B,EAAOxoC,EAAKkoC,YAAYpF,EAAQ2N,GAEhC3N,EAAOljC,QAAQuf,YAAY,uBAAwBsxB,GACnD3N,EAAOphC,QACNC,KAAK,oBAAoBmX,GAAG,QAAS0W,GAAO8F,MAC5C3zB,KAAK,mBAAmBmX,GAAG,QAASpH,GAAO4jB,MAC3C3zB,KAAK,uBAAuBmX,GAAG,WAvBhC,SAAiBxX,GACTA,EAAE0T,SAAWlb,EAAKisC,MAClBvW,EAAMluB,GACCA,EAAE0T,SAAWlb,EAAKivC,KACzBr3B,EAAMpQ,EAEd,IAiBoDg0B,MAEnD3zB,KAAKouC,GAAiBviC,IAAIs6B,EAAMA,EAAI38B,aAAa,MAAO,GAAK,WAAWmqB,MACxE3zB,KAAKquC,GAAmBxiC,IAAIs6B,EAAMA,EAAInpB,IAAM,IAAI2W,MAChD3zB,KAAKsuC,GAAmBziC,IAAI5J,GAAY0xB,MACxC3zB,KAAKuuC,GAAoB1iC,IAAI3J,GAAayxB,MAE3C,IAAI11B,EAAUkjC,EAAOljC,QAgBrB,GAfI6wC,IACAr4C,KAAKy4C,cAAgB,IAAIj5C,EAAM6B,GAAGi3C,aAC9B9wC,EAAQ+B,KAAK,mBACb5J,EAAO,CAAC,EAAGyR,IAGfpR,KAAKy4C,cAAcrwC,KAAK,UAAU,SAASswC,GACP,MAA5BA,EAAGC,SAASp5B,IAAI,SAChB/X,EAAQ+B,KAAKouC,GAAiBviC,IAAIpV,KAAKwR,QAE/C,IAEAxR,KAAKy4C,cAAcrwC,KAAK,QAASgvB,IAGjCghB,EAAM,CACN,IAAIQ,EAAepxC,EAAQU,QAAQ,aAAa2E,SAChDrF,EAAQgJ,IAAI,aAAcooC,EAC9B,CACAlO,EAAOG,SAAS/xB,OAChBtR,EAAQ+B,KAAKouC,GAAiBj3C,QAAQ,SAASiiC,QACnD,EAEAmN,YAAa,SAASpF,EAAQ2N,GAC1B,IACIlI,EAAcnvC,EAAE,UAAUma,SAASuvB,EAAOljC,SAC1CoC,EAFO5J,KAES8H,OAAOjI,QAAQ+J,SAC/BwmC,EAAOD,EAAYE,UAAU,CAC7BC,eAAe,EACf52B,MAAO,CACH,CACI62B,MAAO,qBACPC,MAAO/9B,EAAO7I,EAAS0B,iBACvBxD,OAAQ,WAEZ,CACIyoC,MAAO,uBACPC,MAAO/9B,EAAO7I,EAAS2B,cACvBzD,OAAQ,WAEZ,CACIyoC,MAAO,uBACPC,MAAO/9B,EAAO7I,EAAS4B,YACvB1D,OAAQ,WAEZ,CACIyoC,MAAO,wBACPC,MAAO/9B,EAAO7I,EAAS6B,aACvB3D,OAAQ,cAGjBiS,KAAK,aAQR,OANIs+B,GACAlI,EAAYnvB,QAAQhgB,EAAE,qDAG1B0pC,EAAOljC,QAAQkpC,MAAM1vC,EAjCVhB,KAiCiBiqC,uBAAuB,CAAErgC,WAAUsgC,iBAAkB,YAAaC,iBAAkB,qBAEzGiG,CACX,IAIJ5wC,EAAM6B,GAAGyG,OAAOiwC,aAAeA,EAE/BpyC,EAAa,cAAe,IAAIG,EAAOqkB,KAAK,CAAE/pB,QAAS23C,IAEtD,CApPD,CAoPG72C,OAAO1B,MAAM2sB,QAEf,SAASnrB,EAAGC,GAEb,IAAIzB,EAAQ0B,OAAO1B,MACfG,EAASqB,EAAErB,OACXmG,EAAStG,EAAM6B,GAAGyG,OAClB1F,EAAc0D,EAAO1D,YACrBsnC,EAAU5jC,EAAO4jC,QACjBvf,EAAOrkB,EAAOqkB,KACdxkB,EAAevD,EAAYuD,aAC3BkzC,EAAiB,+MAEjBC,EAAgBpP,EAAQ/pC,OAAO,CAC/B+S,KAAM,YACD1S,KAAK8H,OAAO0S,eAAiBxa,KAAK+4C,2BAA2BvxC,QAAQsX,OAC1E,EAEAi6B,wBAAyB,WACrB,IAAItO,EAAMzqC,KACN8H,EAAS2iC,EAAI3iC,OACbkxC,EAAgBlxC,EAAOjI,QAAgB,OACvCo5C,EAASj4C,EAAE,wDAAwDk4C,YAAY,CAC/EC,QAAS1O,EAAI2O,iBAAiBhxC,KAAKqiC,GACnCxf,SAAUwf,EAAI4O,kBAAkBjxC,KAAKqiC,GACrC9H,OAAQ8H,EAAI6O,gBAAgBlxC,KAAKqiC,GACjC8O,MAAO9O,EAAI+O,eAAepxC,KAAKqiC,GAC/BgP,SAAUhP,EAAIiP,kBAAkBtxC,KAAKqiC,GACrCkP,cAAc,EACdC,UAAU,EACVhmC,MAAO,CACHimC,QAASb,EAAcptB,SACvBkuB,YAAY,EACZC,UAAW,QAEfC,WAAY,CACRC,kBAAmBjB,EAAciB,kBACjCC,YAAalB,EAAckB,eAEhCC,iBAIH,OAFAryC,EAAO0S,cAAgBy+B,EAEhBA,CACX,EACAS,kBAAmB,SAAShB,GACxB14C,KAAKo6C,SAAS,WAAY1B,GAC1BA,EAAGjL,OAAO4M,gBAEVr6C,KAAKs6C,uBACT,EACAlB,iBAAkB,SAASV,GACvB14C,KAAK8H,OAAO0J,MAAMknC,EAAG6B,SAASvlC,KAAKvP,QAAQ,cAAe,KAC1DzF,KAAKo6C,SAAS,UAAW1B,EAC7B,EACAW,kBAAmB,SAASX,GACxB14C,KAAKo6C,SAAS,WAAY1B,EAC9B,EACAY,gBAAiB,SAASZ,GACtB14C,KAAKo6C,SAAS,SAAU1B,GACnBA,EAAG8B,MAAM,GAAGC,kBACbz6C,KAAK06C,qBAEb,EACAlB,eAAgB,SAASd,GACrB14C,KAAKo6C,SAAS,QAAS1B,EAC3B,EAEA0B,SAAU,SAASO,EAAWC,GAC1B,IAAI9yC,EAAS9H,KAAK8H,OACdkxC,EAAgBlxC,EAAOjI,QAAgB,OACH,mBAA7Bm5C,EAAc2B,IACrB3B,EAAc2B,GAAW56C,KAAK+H,EAAQ8yC,EAE9C,EAEAF,oBAAqB,WACjB,IAAIjjB,EAAWz3B,KAAK8H,OAAOgL,KACvBhN,EAAOkC,IAAI2Y,GAAG8W,EAAU,QACxBz3B,KAAK66C,eAAiB76C,KAAK86C,WACvB96C,KAAK8H,OAAOwB,QAAQC,KAAK,UAAUwX,SAClCvQ,IAAI,CAAErD,SAAU,aAAc8S,OAAO44B,GAE1C74C,KAAK86C,WAAa95C,EAAEy2B,GAAUxX,OAAO44B,GAGzCr5C,EAAM6B,GAAG4pB,SAASjrB,KAAK86C,YAAY,EACvC,EAEAR,sBAAuB,WACnB96C,EAAM6B,GAAG4pB,SAASjrB,KAAK86C,YAAY,GACnC95C,EAAEhB,KAAK66C,gBAAgBrqC,IAAI,CACvBrD,SAAU,YAGPnN,KAAK86C,kBACL96C,KAAK66C,cAChB,IAGJl7C,EAAOmG,EAAQ,CACXgzC,cAAeA,IAGnBnzC,EAAa,SAAU,IAAIwkB,EAAK,CAC5B/pB,QAAS04C,EACTz3C,GAAI,CACA2iB,SAAU,UAIlB,CA7GA,CA6GE9iB,OAAO1B,MAAM2sB,QAEf,SAAUnrB,GAGN,IACI6G,EADQ3G,OAAO1B,MACE6B,GAAGyG,OACpB4hC,EAAU7hC,EAAS6hC,QACnBY,EAAiBziC,EAASyiC,eAE1B3kC,EADckC,EAASzF,YACIuD,aAC3BwkB,EAAOtiB,EAASsiB,KAChBvU,EAAe/N,EAAS+N,aACxBjW,EAASqB,EAAErB,OAEfsV,EAAoBy0B,EAAQ/pC,OAAO,CACnCC,KAAM,SAASC,GACX6pC,EAAQ5pC,GAAGF,KAAKG,KAAKC,KAAMH,GAE3BG,KAAK+T,iBAAkB,CAC3B,EAEArB,KAAM,WACF,IAAI5K,EAAS9H,KAAK8H,OACdjI,EAAUG,KAAKH,QACf+S,EAAQ/S,EAAQ+S,MAChBE,EAAOhL,EAAOgL,KACdu2B,EAAoB,IAAIzzB,EAAahD,EAAOE,GAC5CkC,EAAOnV,EAAQmV,MAAQnV,EAAQ2R,OAAS,GAE5C1J,EAAOqL,YAAYP,GAEnB9K,EAAOa,UAAUoM,MAAMC,EAAMnV,GAEzBA,EAAQk7C,aACRl7C,EAAQk7C,YAAYjzC,EAAQA,EAAOuL,YAGvC,IAAI2nC,EAAiB,IAAI1Q,EAAejB,EAAmB,IAAIzzB,EAAa9N,EAAOuL,WAAYP,IAC/FkoC,EAAelzC,OAASA,EACxBA,EAAOe,cAAc1I,KAAK66C,GAE1BlzC,EAAOkM,OACX,IAGAinC,EAAiB9wB,EAAKxqB,OAAO,CAC7ByX,WAAY,SAAS/V,EAAIyG,GACrB,IAAIjI,EAAUG,KAAKH,QACf4Z,EAAa5Z,EAAQ6Z,MAAQ7Z,EAAQ6Z,MAAQ5R,EAAOjI,QAAQsK,WAC5DqP,EAAYnY,EAAGyY,uBAEdN,IAILA,EAAUb,IAAI,QAAQ,KAClB,IAAIg+B,EAAcn9B,EAAUQ,KAAK+G,SAASxX,KAAK,uBAE3CotC,EAAY91C,QACZ81C,EAAYthC,QAChB,IAGJmE,EAAUrH,WAAW,CACjBsH,WAAYA,EACZk9B,YAAa7uC,EAAOjI,QAAQ+J,SAASO,aAEzCqP,EAAUpR,KAAK,UAAU,KACrB+hB,EAAKzX,KAAK5K,EAAQ,aAAc0R,EAAUhI,QAAQ,IAE1D,EAEApR,QAAS,SAASgqB,GACd,OAAO,IAAInV,EAAkBmV,EACjC,EAEAjiB,OAAQ,SAAS9G,GACb,IAAImY,EAAYnY,EAAG0Y,KAAK,qBACxBP,EAAUF,QACVE,EAAUhI,MAAM,KACpB,IAGJ7R,EAAOkI,EAAU,CACboN,kBAAmBA,EACnBgmC,eAAgBA,IAGpBt1C,EAAa,aAAc,IAAIs1C,EAAe,CAC1C55C,GAAI,CACA65C,aAAc,cACdxzC,KAAM,YACN8R,UAAW,eACX6K,iBAAkB,CACduqB,cAAe,OACfD,eAAgB,QAChBwM,UAAU,EACV1D,gBAAgB,GAEpBlJ,SAAU,WAIjB,CAtGD,CAsGGrtC,OAAO1B,MAAM2sB,QAEf,SAASnrB,EAAGC,GAEb,IAAIzB,EAAQ0B,OAAO1B,MACfG,EAASqB,EAAErB,OACXmG,EAAStG,EAAM6B,GAAGyG,OAClB1F,EAAc0D,EAAO1D,YACrBsnC,EAAU5jC,EAAO4jC,QACjBvf,EAAOrkB,EAAOqkB,KACdxkB,EAAevD,EAAYuD,aAS3By1C,EAAkB1R,EAAQ/pC,OAAO,CACjCC,KAAM,SAASC,GACX,IAAI4qC,EAAMzqC,KACVyqC,EAAI5qC,QAAUA,EACd6pC,EAAQ5pC,GAAGF,KAAKG,KAAK0qC,EAAK5qC,GAC1B4qC,EAAItmB,WAAa,KACjBsmB,EAAI4Q,WAAax7C,EAAQw7C,UAC7B,EAEA3oC,KAAM,WACF,IACIE,EAAQ5S,KAAK6pC,WAAU,GADjB7pC,KAENs7C,cAFMt7C,KAGN8pC,aAAal3B,EACrB,EAEA0oC,YAAa,WACTt7C,KAAKu7C,eAAepgC,SAAS,QAAQqgC,SAASnmC,QAClD,EAEAkmC,aAAc,WACV,IAAI9Q,EAAMzqC,KACNy7C,EAAkBhR,EAAI3iC,OAAOjI,QAAQmP,SACrCohC,EAAOpvC,EAAE,UAAUoX,KAAK,CACxB60B,OAAQwO,GAAmBA,EAAgB7vB,UAAY,GACvD8vB,OAAQ,SAUZ,OAPAtL,EAAKnwB,OAAO,CACRwqB,EAAIkR,aACJlR,EAAImR,kBACJnR,EAAIoR,gBACJpR,EAAIqR,qBAGD1L,CACX,EAEAuL,WAAY,WACR,IAAI7zC,EAAS9H,KAAK8H,OAClB,OAAO9G,EAAE,WAAWoX,KAAK,CACrB5G,MAAO1J,EAAO0K,eACdjQ,KAAM,QACNmF,KAAM,UAEd,EAEAk0C,gBAAiB,WAEb,OAAO56C,EAAE,WAAWoX,KAAK,CACrB5G,MAFMxR,KAEKq7C,WACX94C,KAAM,aACNmF,KAAM,UAGd,EAEAm0C,cAAe,WACX,IAAI/zC,EAAS9H,KAAK8H,OACd2zC,EAAkB3zC,EAAOjI,QAAQmP,SACjC2c,EAAW8vB,GAAmBA,EAAgB9vB,UAAY7jB,EAAON,QAAQ4Q,KAAK,OAAS,SAC3F,OAAOpX,EAAE,WAAWoX,KAAK,CACrB5G,MAAOma,EACPppB,KAAM,WACNmF,KAAM,UAEd,EAEAo0C,iBAAkB,WACd,IAAIC,EAAa/6C,EAAE,iDAAiDoX,KAAK,WAEzE,OAAOpX,EAAE,6CAA6CgxC,QACzC7M,IAAInkC,EAAE,gBAAkB+6C,EAAa,MAAM/J,QAC5D,IAGAgK,EAAe7xB,EAAKxqB,OAAO,CAC3BC,KAAM,SAASC,GACX,IAAIgG,EAAO7F,KACXmqB,EAAKrqB,GAAGF,KAAKG,KAAK8F,EAAMrG,EAAMsB,WAAW,CAAC,EAAG+E,EAAKhG,QAASA,IAC3DgG,EAAK6B,KAAO,mBAChB,EAEA7H,QAAS,CACL6Z,MA5FmB,CACnB,CAAEnI,KAAM,OAAQC,MAAO,QACvB,CAAED,KAAM,MAAOC,MAAO,OACtB,CAAED,KAAM,MAAOC,MAAO,OACtB,CAAED,KAAM,OAAQC,MAAO,QACvB,CAAED,KAAM,aAAcC,MAAO,SA0FjCpR,QAAS,SAASgrB,GACd,IAAI5Z,EAAQ4Z,EAAK5Z,MACjB,OAAO,IAAI1L,EAAOs1C,gBAAgB,CAC9BxoC,MAAOwY,EAAKxY,MACZyoC,WAAY7pC,EAAM6pC,YAE1B,EAEAjkC,WAAY,SAAS/V,EAAIyG,GACrB,IACI0R,EAAYnY,EAAGyY,uBADR9Z,KAGN8H,OAASA,EAEd0R,EAAUpR,KAAK,SAAUpI,KAAKi8C,cAAc7zC,KAAKpI,MACrD,EAEAi8C,cAAe,SAAS/yC,GACpBlJ,KAAKk8C,MAAMhzC,EAAEukC,OAAOj8B,SACpBtI,EAAEukC,OAAOj8B,MAAM,MACftI,EAAEukC,OAAOnkC,QAAQC,KAAK,uBAAuBgI,KAAK/R,EAAMq/B,WAAW7+B,KAAK8H,OAAOjI,QAAQ+J,SAASoF,UACpG,EAEA7G,OAAQ,SAAS9G,EAAIyG,GACjB,IAAI0R,EAAYnY,EAAG0Y,KAAK,qBAExBP,EAAUF,QACVE,EAAUhI,MAAM,MAChBnQ,EAAG6G,QAAQ,mBAAmBqB,KAAK,uBAAuBgI,KAAK/R,EAAMq/B,WAAW7+B,KAAK8H,OAAOjI,QAAQ+J,SAASoF,UACjH,EAEAktC,MAAO,SAAS1qC,GACRA,GACA2Y,EAAKzX,KAAK1S,KAAK8H,OAAQ9H,KAAKH,QAAQ0C,KAAM,CAAE84C,WAAY7pC,GAEhE,EAEAE,QAAS,WACL1R,KAAKk3C,UAAY,IACrB,IAGJv3C,EAAOmG,EAAQ,CACXk2C,aAAcA,EACdZ,gBAAiBA,IAGrBz1C,EAAa,WAAY,IAAIq2C,EAAa,CACtC36C,GAAI,CACAqG,KAAM,YACN6mC,SAAU,QACV/0B,UAAW,eACX6K,iBAAkB,CACduqB,cAAe,OACfD,eAAgB,QAChBE,gBAAgB,EAChBr9B,MAAO,KACP5E,MAAO,QACP6qC,gBAAgB,EAChBC,WAAW,EACXyE,aAAepiC,GAAS,gDAAmDA,EAAKvI,UAAWuI,EAAKxI,uBAChG1O,KAAM,SACNu5C,cAAe,IAAM,iCAAiC58C,EAAM6B,GAAGwB,KAAK,CAAEA,KAAM,SAAUw5C,UAAW,uEAK7G,CA3KA,CA2KEn7C,OAAO1B,MAAM2sB,QAEf,SAAUnrB,EAAGC,GAGb,IAAIzB,EAAQ0B,OAAO1B,MACf2B,EAAQ3B,EAAM2B,MACdxB,EAASqB,EAAErB,OACXmG,EAAStG,EAAM6B,GAAGyG,OAClBC,EAAMjC,EAAOkC,IAEbrC,EADcG,EAAO1D,YACMuD,aAC3B+jC,EAAU5jC,EAAO4jC,QACjBvf,EAAOrkB,EAAOqkB,KACd5X,EAAazM,EAAOyM,WACpBua,EAAgB/kB,EAAI+kB,cACpBomB,EAAoBptC,EAAOotC,kBAC3BO,EAAiB3tC,EAAO2tC,eAE5B,SAAS/vC,EAAO6pB,EAAM/b,GAClB,IACI8qC,EADoC,OAA5Bt7C,EAAEusB,GAAM/c,IAAI,aACM,QAAU,OACpCiuB,EAA6B,MAAlB12B,EAAIxF,KAAKgrB,GAAgB,SAAW+uB,EAAkB,UAAYA,EACjF,GArBJ,YAqBQ9qC,EACA,OAAO+b,EAAK7iB,MAAM+zB,IAAa,EAE3BjtB,EAAQ,EACR+b,EAAK7iB,MAAM+zB,GAAYjtB,EAAQ,MAE/B+b,EAAK7iB,MAAM+zB,GAAY,GAElBlR,EAAK7iB,MAAMkrB,SACZrI,EAAK2I,gBAAgB,SAIrC,CAEA,IAAIqmB,EAAkBp7C,EAAMxB,OAAO,CAC/BC,KAAM,WACFI,KAAKqW,OAAS,IAAI68B,EAAkB,CAAC,CAAEvwC,KAAMoF,EAAI+kB,gBACrD,EAEAsK,MAAO,SAASzS,GACZA,EAAQ5c,EAAI6c,SAASD,EAAO5c,EAAI8c,iBAAiB,GACjD,IAEIpiB,EAAGkqB,EAAKmf,EAAY0Q,EAAYrpB,EAFhC4Y,EAAc/rC,KAAKqW,OAAOo1B,aAAa9mB,GACvC83B,EAAU,GAKd,IAFA1Q,EAAc/rC,KAAK08C,cAAc3Q,IAEjBlrC,OAAQ,CACpB,IAAK4B,EAAI,EAAGkqB,EAAMof,EAAYlrC,OAAQ4B,EAAIkqB,EAAKlqB,IACvCsF,EAAI4Y,GAAGorB,EAAYtpC,GAAI,MAClBzB,EAAE+qC,EAAYtpC,IAAI6D,QAEZtF,EAAE0B,QAAQqpC,EAAYtpC,GAAGymB,WAAYuzB,GAAW,GACvDA,EAAQt8C,KAAK4rC,EAAYtpC,IAFzBg6C,EAAQt8C,KAAK4rC,EAAYtpC,GAAGymB,YAKhCuzB,EAAQt8C,KAAK4rC,EAAYtpC,IAIjC,KAAOg6C,EAAQ57C,QAEX,GADAirC,EAAa2Q,EAAQn2B,QACjBve,EAAI4Y,GAAGmrB,EAAY,MAAO,CAC1B0Q,EAAa1Q,EAAW5iB,WAExB,IAAIyzB,GADJxpB,EAAUnyB,EAAE8qC,GAAYpe,KAAK,OACHnkB,KAAK,SAAS0S,OAEpC2gC,EAAa57C,EAAE8qC,GAAYxP,SAAS,SAAS,GAEjD,GAAIsgB,GAAczpB,EAAQ,GAClBwpB,EAAY,IACbA,EAAY18B,OAAO6rB,GACnB6Q,EAAY18B,OAAOjf,EAAE47C,GAAYtgB,YACjCv0B,EAAIsN,OAAOunC,KAEVzpB,EAAQlT,OAAO28B,GACfA,EAAWtkC,aAAawzB,EAAY8Q,EAAWnvB,kBASnD,KANAmvB,EAAazpB,EAAQmJ,SAAS,SAAS,MAEnCsgB,EAAa70C,EAAIghB,OAAO+iB,EAAW9b,cAAejoB,EAAIxF,KAAKi6C,GAAax8C,KAAK68C,gBAAgBL,IAC7FrpB,EAAQlT,OAAO28B,IAGZ9Q,GAAcA,EAAW5iB,YAAcszB,GAC1CI,EAAW9gC,YAAYgwB,GACvBA,EAAa2Q,EAAQn2B,OAGjC,KAAO,CACH,IAAIquB,EAAajvB,SAAShiB,EAAOooC,GAAa,IAAM,GACpDpoC,EAAOooC,EAAY6I,GAEnB,IAAK,IAAImI,EAAc,EAAGA,EAAcL,EAAQ57C,OAAQi8C,IAChD97C,EAAE2U,SAASm2B,EAAY2Q,EAAQK,KAC/BL,EAAQpe,OAAOye,EAAa,EAGxC,CAER,KAAO,CACa,IAAIrJ,EAAe,CAAC,CAAE9wC,KAAM,CAAC,OAAS,CAAE+H,MAAO,CAAEiqC,WAAY,MAEnEvd,MAAMzS,EACpB,CACJ,EAEAk4B,gBAAiB,SAAS7iC,GACtB,IAAItS,EAAOsS,EAAKjH,aAAa,QACzBgqC,EAAY/iC,EAAKtP,MAAMmrC,cAE3B,OAAOnuC,EAAO,CAAEA,KAAMA,GAAS,CAAEgD,MAAO,CAAEmrC,cAAekH,GAC7D,EAEAL,cAAe,SAAS/3B,GACpB,GAAK3kB,KAAKyT,WAEH,CACH,IAAIA,EAAa,GACjB,OAAOzS,EAAEuS,IAAIoR,GAAO,SAAS4I,GACzB,IAAI2O,EAAYp2B,EAAOyV,WAAW8qB,gBAAgB9Y,GAClD,GAAI2O,EAAW,CACX,IAA0C,IAAtCl7B,EAAE0B,QAAQw5B,EAAWzoB,GAGrB,OAAO,KAFPA,EAAWtT,KAAK+7B,EAIxB,CACA,OAAOA,GAAa3O,CACxB,GACJ,CAdI,OAAO5I,CAef,EAEAtP,OAAQ,SAASsP,GACbA,EAAQ5c,EAAI6c,SAASD,EAAO5c,EAAI8c,iBAAiB,GACjD,IACIm4B,EAAYv6C,EAAGkqB,EAAK3S,EAAMijC,EAAYC,EACtCpR,EAAY6I,EAFZ5I,EAAc/rC,KAAKqW,OAAOo1B,aAAa9mB,GAM3C,IAAKliB,EAAI,EAAGkqB,GAFZof,EAAc/rC,KAAK08C,cAAc3Q,IAEHlrC,OAAQ4B,EAAIkqB,EAAKlqB,IAAK,CAGhD,IAFAqpC,EAAa9qC,EAAE+qC,EAAYtpC,KAEZke,GAAG,MAAO,CAIrB,IAFAs8B,GADAjjC,EAAO8xB,EAAW/qB,UACAA,UAEHJ,GAAG,cAAgBjd,EAAOsW,EAAK,IAAK,CAE/C,GAAIgjC,GAAch8C,EAAE2U,SAASqnC,EAAYC,EAAW,IAChD,UAGJC,EAAWpR,EAAWqR,QAAQ,OACjBt8C,QACTG,EAAEgZ,EAAK,GAAGyV,WAAU,IAAQtU,SAAS2wB,GAAY7rB,OAAOi9B,GAGxDD,EAAWt8B,GAAG,MACdmrB,EAAWtkB,YAAYy1B,GAEvBnR,EAAW3wB,SAAS8hC,GAGnBjjC,EAAKsiB,SAAS,MAAMz7B,QACrBmZ,EAAK3E,SAGT,QACJ,CACI,GAAI2nC,GAAchjC,EAAK,GAEnB,SAEJgjC,EAAahjC,EAAK,EAE1B,MACIgjC,EAAajR,EAAYtpC,GAG7BkyC,EAAajvB,SAAShiB,EAAOs5C,GAAa,IAAM,GAChDt5C,EAAOs5C,EAAYrI,EACvB,CACJ,IAIAyI,EAAgB1T,EAAQ/pC,OAAO,CAC/BC,KAAM,SAASC,GAEXA,EAAQ+pC,UAA2B,CAC/BrpB,OAAQ,SAAU3N,GACd,IAAIyqC,EAAkB,IAAId,EAC1Bc,EAAgB5pC,WAAazT,KAAK8H,QAAU9H,KAAK8H,OAAOjI,QAAQ4T,WAChE4pC,EAAgBjmB,MAAM7kB,EAAWoS,MAAM/R,GAC1C,EAAExK,KANIpI,OAQX0pC,EAAQ5pC,GAAGF,KAAKG,KAAKC,KAAMH,EAC/B,IAGAy9C,EAAiB5T,EAAQ/pC,OAAO,CAChCC,KAAM,SAASC,GAEXA,EAAQ+pC,UAAY,CAChBrpB,OAAQ,SAAU3N,GACd,IAAIyqC,EAAkB,IAAId,EAC1Bc,EAAgB5pC,WAAazT,KAAK8H,QAAU9H,KAAK8H,OAAOjI,QAAQ4T,WAChE4pC,EAAgBhoC,OAAO9C,EAAWoS,MAAM/R,GAC3C,EAAExK,KANIpI,OAQX0pC,EAAQ5pC,GAAGF,KAAKG,KAAKC,KAAMH,EAC/B,IAGA09C,EAAcpzB,EAAKxqB,OAAO,CAC1BC,KAAM,SAASC,GACXsqB,EAAKrqB,GAAGF,KAAKG,KAAKC,KAAMH,GAExBG,KAAKqW,OAAS,IAAI68B,EAAkB,CAAC,CAAEvwC,KAAMmqB,IACjD,EAEA1V,WAAY,SAAS/V,EAAIyG,GACrB9G,EAAErB,OAAOK,KAAKH,QAAS,CACnB4T,WAAY3L,GAAUA,EAAOjI,QAAQ4T,YAE7C,EAEAtL,OAAQ,SAAS9G,EAAIsjB,GACjB,IAEI64B,EAAeC,EAAkBh7C,EAAGkqB,EAAKymB,EAAU/M,EAFnDqX,EAAgB19C,KAAKqW,OAAOo1B,aAAa9mB,GACzCnb,EAAUnI,EAAG6G,QAAQ,cAAc6R,KAAK,gBAG5C,IAAKtX,EAAI,EAAGkqB,EAAM+wB,EAAc78C,OAAQ4B,EAAIkqB,EAAKlqB,IAmB7C,GAlBA2wC,EAAWsK,EAAcj7C,GAErBzC,KAAKH,QAAQ4T,aACb4yB,EAAkBvgC,EAAOyV,WAAW8qB,gBAAgB+M,MAGhDA,EAAW/M,IAInBmX,EAAgB95C,EAAO0vC,MAGnBqK,EAAmBz8C,EAAEoyC,GAAUzxB,QAAQ,SAAS9gB,OAChD28C,EAAiBz1C,EAAI4Y,GAAGyyB,EAAU,QAAUqK,EAAmB,GAAK/5C,EAAO0vC,EAASlqB,cACnEnhB,EAAIwtB,OAAO6d,EAAU,CAAC,KAAK,QAAUqK,EAAmB,GAGzED,EAEA,YADAh0C,EAAQ+gB,OAAOlpB,GAAI,GAK3BmI,EAAQ+gB,OAAOlpB,GAAI,EACvB,IAGJ1B,EAAOmG,EAAQ,CACXy2C,gBAAiBA,EACjBa,cAAeA,EACfE,eAAgBA,EAChBC,YAAaA,IAGjB53C,EAAa,SAAU,IAAIwkB,EAAK,CAAE/pB,QAASg9C,KAC3Cz3C,EAAa,UAAW,IAAI43C,EAAY,CAAEn9C,QAASk9C,EAAgBj8C,GAAI,CAAEkpB,QAAQ,KAEhF,CApRD,CAoRGrpB,OAAO1B,MAAM2sB,QAEhB,SAAUnrB,GAGV,IAAIxB,EAAQ0B,OAAO1B,MACfG,EAASqB,EAAErB,OACXkI,EAAWrI,EAAM6B,GAAGyG,OACpBC,EAAMF,EAASG,IACf0hC,EAAU7hC,EAAS6hC,QACnBvf,EAAOtiB,EAASsiB,KAChBspB,EAAiB5rC,EAAS4rC,eAC1BnmB,EAAYvlB,EAAIulB,UAChB/a,EAAa1K,EAAS0K,WACtB5M,EAAekC,EAASzF,YAAYuD,aAEpCg4C,EAAmBjU,EAAQ/pC,OAAO,CAClCC,KAAM,SAASC,GACXG,KAAKH,QAAUA,EACf6pC,EAAQ5pC,GAAGF,KAAKG,KAAKC,KAAMH,EAC/B,EAEA+9C,cAAe,SAAStpC,EAAK1B,GACzB,IAAmC6C,EAA/B2e,EAASrsB,EAAIghB,OAAOzU,EAAK,KAc7B,OAbA8f,EAAOxa,UAAY,WAEnBhH,EAAMwuB,WAAWhN,GAEZA,EAAOlL,cAERzT,EAAY7C,EAAM8C,yBACRyM,UAAY,GACtB1M,EAAUqG,YAAYsY,IAG1B9G,EAAU8G,EAAOlL,YAEVkL,CACX,EAEAypB,WAAY,SAASjrC,EAAOugC,GACxB,GAAIprC,EAAI0rB,QAAQ0f,GACZvgC,EAAMutB,eAAegT,OAClB,CACHvgC,EAAM2tB,mBAAmB4S,GAEzB,IAAI2K,EAAYvrC,EAAW6D,UAAUxD,GAAO,GAE5C,IAAKkrC,EAAW,CACZ,KAAO3K,EAAU9jB,WAAWxuB,SAAWkH,EAAI4Y,GAAGwyB,EAAU1lB,WAAY,OAChE0lB,EAAYA,EAAU1lB,WAG1BqwB,EAAY3K,CAChB,CAEA,GAAIprC,EAAI0rB,QAAQqqB,GACZlrC,EAAMutB,eAAe2d,OAClB,CACC/1C,EAAI0qB,UAAUqrB,KACdA,EAAU37B,UAAY,UAE1B,IAAIivB,EAAY0M,EAAUrwB,YAAcqwB,EACpC/1C,EAAI0mB,WAAW2iB,GACfx+B,EAAM+B,SAASy8B,EAAW,GAE1Bx+B,EAAMutB,eAAeiR,EAE7B,CACJ,CACJ,EAEA2M,WAAY,SAASnrC,GACjB,IAAIsd,EAAS,sBAAsB/K,MAAM,KACrC64B,EAAej2C,EAAIgoB,aAAand,EAAM2B,eAAgB2b,GACtD+tB,EAAal2C,EAAIgoB,aAAand,EAAM4B,aAAc0b,GACtD,OAAQ8tB,IAAiBC,IAAiBD,GAAgBC,CAC9D,EAEAC,YAAa,SAAS3wB,GAClB,KAAOA,IAASxlB,EAAI+qB,SAASvF,IAA0C,KAAjCxlB,EAAI+pB,SAASvE,EAAK9P,aACpD8P,EAAOA,EAAKI,YAGhB,OAAQJ,CACZ,EAEA7a,KAAM,WACF,IAEIqO,EAAQke,EAAU3hB,EAElB6gC,EAAW/pB,EAAQ+gB,EAAIiJ,EAASC,EAAWC,EAC3CP,EALAnrC,EAAQ5S,KAAKqT,WACbiB,EAAM/B,EAAWutB,kBAAkBltB,GAEnC2rC,EAAwB12C,EAAS4iB,oBAkBrC,GAdAzqB,KAAKspC,mBAAmB12B,GAExBmrC,EAAa/9C,KAAK+9C,WAAWnrC,GAE7BA,EAAM4tB,iBACNpM,EAASp0B,KAAK49C,cAActpC,EAAK1B,GAEjC7K,EAAIgqB,aAAaqC,EAAO5F,iBACxBzmB,EAAIgqB,aAAaqC,EAAOzG,aAExBwnB,EAAKptC,EAAI2vB,sBAAsBtD,EAAQ,CAAC,OACxCgqB,EAAUr2C,EAAI2vB,sBAAsBtD,EAAQ,oBAAoBjP,MAAM,MACtEk5B,EAAYt2C,EAAI4Y,GAAGyT,EAAOlL,WAAY,UAAYkL,EAAOlL,WAErDisB,GAEA,GAAIptC,EAAI0qB,UAAU0iB,GAAK,CACnBgJ,EAAYp2C,EAAIghB,OAAOzU,EAAK,KAExBvM,EAAIuV,KAAK63B,MACTmJ,EAAM1rC,EAAM6tB,cACR1hB,WAAWo2B,GAEf5iC,EAAW4S,MAAMm5B,EAAKnJ,EAAGjsB,aAG7B,IAAI+O,EAAKj3B,EAAE,KAAMm0C,GACA,GAAbld,EAAGp3B,QACHo3B,EAAG5iB,SAGP,IAAI6T,EAAaisB,EAAGjsB,WAChBs1B,EAAuBrJ,EAAGjsB,WAAWoT,SAASz7B,OAC9C4sB,EAAa+wB,EAAuB,GAA6B,GAAxBrJ,EAAG9lB,WAAWxuB,QAAes0C,EAAG7Y,SAAS,GAEtFv0B,EAAIyf,YAAY22B,EAAWj1B,GAC3BnhB,EAAIsN,OAA+B,GAAxBmpC,EAA4BrJ,EAAGjsB,WAAaisB,GAEnD1nB,GAAcA,IAAe2G,GAC7B+pB,EAAUriC,YAAY2R,GACtB0wB,EAAUriC,YAAYsY,IAEtB+pB,EAAUh8B,UAAYo8B,EAE1BjhC,EAAO6gC,CACX,OACOC,GAAWp+C,KAAKk+C,YAAY9pB,IACnC+pB,EAAYn+C,KAAKy+C,sBAAsBL,GACvCr2C,EAAIsN,OAAO+e,GACX9W,EAAO6gC,GACAE,IACPF,EAAYn+C,KAAKy+C,sBAAsBJ,GACvCt2C,EAAIsN,OAAO+e,GACX9W,EAAO6gC,GAGN7gC,IACK63B,GAAMiJ,GACR,IAAI3K,EAAe,CAAC,CAAE9wC,KAAM,CAAC,QAASy0B,MAAM,CAAChD,IAGjDxhB,EAAMmM,WAAWqV,GAEjBrT,EAAShZ,EAAIgoB,aAAaqE,EAAQ,CAAC+gB,EAAK,KAAOiJ,EAAUr2C,EAAIxF,KAAK67C,GAAW,MAE7E7rC,EAAW4S,MAAMvS,EAAOmO,EAAQg9B,GAEhC9e,EAAWle,EAAOyN,gBAEdzmB,EAAI4Y,GAAGse,EAAU,OAASA,EAASxR,aAAe1lB,EAAI4Y,GAAGse,EAASxR,WAAY,QAC9EwR,EAAWA,EAASxR,YAGxBnQ,EAAOyD,EAAO4M,YAEd3tB,KAAKs3C,MAAMrY,EAAU,CAAEl4B,OAAO,IAC9B/G,KAAKs3C,MAAMh6B,EAAM,CAAEvW,OAAO,IAEtBgB,EAAI4Y,GAAGrD,EAAM,OAASA,EAAKmQ,aAAe1lB,EAAI4Y,GAAGrD,EAAKmQ,WAAY,QAClEnQ,EAAOA,EAAKmQ,YAGhB1lB,EAAIsN,OAAO0L,GAGXuM,EAAU2R,IAGd3R,EAAUhQ,GAEVtd,KAAK69C,WAAWjrC,EAAO0K,GAEvB1K,EAAMgC,UAAS,GAEf7M,EAAIisB,SAAS1W,GAAM,GAEnB/K,EAAWY,YAAYP,EAC3B,EAEA6rC,sBAAuB,SAASlxB,GAC5B,IAAI3a,EAAQ5S,KAAKqT,WACbiB,EAAM/B,EAAWutB,kBAAkBltB,GACnC6X,EAAsB5iB,EAAS4iB,oBAC/B0zB,EAAYp2C,EAAIghB,OAAOzU,EAAK,KAKhC,OAHAvM,EAAIyf,YAAY22B,EAAW5wB,GAC3B4wB,EAAUh8B,UAAYsI,EAEf0zB,CACX,EAEA7G,MAAO,SAAS/pB,EAAM1tB,GAClB,IAAIyrB,EAAOiC,EAUX,GARIA,EAAKE,YAAc1lB,EAAI4Y,GAAG4M,EAAKE,WAAY,OAC3C1lB,EAAIsN,OAAOkY,EAAKE,YAGhB1lB,EAAI0mB,WAAWlB,KAAUA,EAAK9P,YAC9B8P,EAAOA,EAAKrE,YAGZqE,EAAM,CAEN,IADA,IAAI2vB,GAAW,EACR3vB,EAAKE,YAA0C,GAA5BF,EAAKE,WAAWjQ,UACtC0/B,EAAWA,GAAan1C,EAAIsqB,iBAAiB9E,EAAK8B,YAAYxuB,OAAS,EACvE0sB,EAAOA,EAAKE,WAQhB,GALK1lB,EAAI0rB,QAAQlG,IAA2B,QAAlBA,EAAK3T,YAAuB,QAAQlG,KAAK6Z,EAAKpL,YAAe+6B,IACnFl8C,EAAEsqB,GAAM/hB,KAAK,SAAS8L,SACtBkY,EAAKpL,UAAYta,EAAS4iB,qBAG1B5qB,GAAWA,EAAQkH,MACnB,KAAOwmB,GAAQjC,GAAM,CACjB,GAAIvjB,EAAI4Y,GAAG4M,EAAM,MAAQxlB,EAAI0qB,UAAUlF,GAAO,CAC1CxlB,EAAIguB,OAAOxI,GACX,KACJ,CACAA,EAAOA,EAAKrE,UAChB,CAER,CACJ,IAGAw1B,EAAiBhV,EAAQ/pC,OAAO,CAChCC,KAAM,SAASC,GACXG,KAAKH,QAAUA,EACf6pC,EAAQ5pC,GAAGF,KAAKG,KAAKC,KAAMH,EAC/B,EAEA6S,KAAM,WACF,IAAIE,EAAQ5S,KAAKqT,WACjBrT,KAAKspC,mBAAmB12B,GAExB,IAEI+rC,EAIAC,EANA3mB,EAAKlwB,EAAIghB,OAAOxW,EAAWutB,kBAAkBltB,GAAQ,MACrD2a,EAAO3a,EAAM2B,eAEb9S,EAAUjC,EAAM+B,QAAQE,QACxBo9C,EAAQp9C,EAAQsZ,MAAQtZ,EAAQ+rB,QAAU,GAC1C6wB,EAAYt2C,EAAI4Y,GAAG4M,EAAM,UAAYA,EAGzC3a,EAAM4tB,iBACF6d,EACAt2C,EAAIyf,YAAYyQ,EAAIomB,IAEpBO,EAAY59C,EAAEusB,GAAMrlB,QAAQ,SAC5B0K,EAAMwuB,WAAWnJ,GAEb2mB,EAAU/9C,QAEVkH,EAAIguB,OAAO6oB,EAAU,KAI7BtxB,EAAU2K,EAAG/O,YAER21B,GAAW5mB,EAAGtK,cAAe5lB,EAAI4qB,aAAasF,EAAGtK,eAE5CsK,EAAGtK,aAAe5lB,EAAI4qB,aAAasF,EAAGtK,cACxC3sB,EAAEi3B,EAAGtK,aAAatY,UAEtBspC,EAAS1mB,EAAGxI,WAAU,IACf7V,UAAY,OACnB7R,EAAIyf,YAAYm3B,EAAQ1mB,IAG5BrlB,EAAMwtB,cAAcnI,GACpBrlB,EAAMgC,UAAS,GAEf7M,EAAIisB,SAASiE,EAAGtK,aAAesK,GAAI,GAEnC1lB,EAAWY,YAAYP,EAC3B,IAGJjT,EAAOkI,EAAU,CACb81C,iBAAkBA,EAClBe,eAAgBA,IAGpB/4C,EAAa,kBAAmB,IAAIwkB,EAAK,CAAE3W,IAAK,GAAI8S,OAAO,EAAMlmB,QAASs+C,KAC1E/4C,EAAa,kBAAmB,IAAIwkB,EAAK,CAAE3W,IAAK,GAAIpT,QAASu9C,IAE5D,CA5SD,CA4SGz8C,OAAO1B,MAAM2sB,QAEhB,SAAUnrB,EAAGC,GAEb,IAAIzB,EAAQ0B,OAAO1B,MACfG,EAASqB,EAAErB,OACX8S,EAASjT,EAAMq/B,WACf/4B,EAAStG,EAAM6B,GAAGyG,OAClB1F,EAAc0D,EAAO1D,YACrB2F,EAAMjC,EAAOkC,IACbrC,EAAevD,EAAYuD,aAC3B4M,EAAazM,EAAOyM,WACpBm3B,EAAU5jC,EAAO4jC,QACjBwF,EAAgBppC,EAAOopC,cACvB94B,EAAY7D,EAAW6D,UACvB1U,EAAOlC,EAAMkC,KACbo9C,EAAiB,qBACjBC,EAAkB,sBAClBC,EAAmB,uBAEnBC,EAAcvV,EAAQ/pC,OAAO,CAC7BC,KAAM,SAASC,GACX,IAAI+H,EAAO5H,KACX0pC,EAAQ5pC,GAAGF,KAAKG,KAAK6H,EAAM/H,GAE3B+H,EAAKgiC,UAAY,IAAIsF,EAErBtnC,EAAKgM,OAAQ,EACbhM,EAAKuc,WAAa,CAAC,CACvB,EAEApgB,WAAY,SAASm7C,EAAMtsC,GACvB,IAAIuR,EAAankB,KAAKmkB,WAClB7P,EAAM/B,EAAWutB,kBAAkBltB,GAEvC,GAAIuR,EAAW/K,MAA2B,WAAnB+K,EAAW/K,KAAmB,CAEjD,IAAK8lC,EAeD,OAdAA,EAAOn3C,EAAIghB,OAAOzU,EAAK,IAAK,CAAE8E,KAAM+K,EAAW/K,QAC1C+I,UAAYgC,EAAWhC,UAC5B+8B,EAAKjnC,MAAQkM,EAAWlM,MAExBrF,EAAM4tB,iBACN5tB,EAAMwuB,WAAW8d,GAEZA,EAAKvxB,aACN5lB,EAAIyf,YAAYlT,EAAIkxB,eAAe,UAAW0Z,GAGlDtsC,EAAMwtB,cAAc8e,GACpBtsC,EAAM0tB,YAAY4e,GAClB3sC,EAAWY,YAAYP,IAChB,EAEP7K,EAAIqQ,KAAK8mC,EAAM/6B,EAEvB,CAEA,OAAO,CACX,EAEAxjB,KAAM,WACF,IACIiS,EADO5S,KACM6pC,YAEjB7pC,KAAK4pC,UAAUxS,MAAMxkB,EAAO5S,KAAKmkB,YAHtBnkB,KAIN8pC,aAAal3B,EACtB,EAEAF,KAAM,WACF,IAKIg4B,EACA0F,EANAxoC,EAAO5H,KACP4S,EAAQhL,EAAKiiC,YACbllB,EAAQvO,EAAUxD,GAClBulC,GAAU,EACV+G,EAAOv6B,EAAM9jB,OAASb,KAAK4pC,UAAUvzB,OAAOo1B,aAAa9mB,EAAM,IAAM,KAGrEyzB,EAAO54C,EAAM+B,QAAQE,QAAQsZ,KAC7Blb,EAAU+H,EAAKE,OAAOjI,QACtB+J,EAAW/J,EAAQ+J,SACnByH,EAAcxR,EAAQwR,YACtBgnC,KAAiB74C,EAAM6B,GAAG89C,aAAe9tC,GAAeA,EAAYknC,WA/EhF,YA+E6FlnC,EAAYknC,UAAUC,MACvGxnC,EAAgB,CACZiH,MAAOrO,EAAS7F,WAChBsd,SAAS,EACTvR,UAAWuoC,GAKnB,SAASjhB,EAAMluB,GACX,IAAI1B,EAAUkjC,EAAOljC,QACjB4R,EAAO5R,EAAQ+B,KAAKu1C,GAAgB1pC,MAAM3P,QAAQ,KAAM,OACxD0c,EAAY3a,EAAQ+B,KAAKw1C,GAAiB3pC,MAC1C6C,EAAQzQ,EAAQ+B,KAAKy1C,GAAkB5pC,MAE3CxN,EAAKuc,WAAa,CACd/K,KAAMA,EACN+I,UAAyB,KAAdA,EAAmBA,EAAY/I,EAC1CnB,MAAOA,GAGXkgC,EAAUvwC,EAAK7D,WAAWm7C,EAAMtsC,GAEhC0G,EAAMpQ,GAEFtB,EAAKiM,QACLjM,EAAKiM,QAEb,CAEA,SAASyF,EAAMpQ,GACXA,EAAEgU,iBACFkzB,EAAK1+B,UACLg5B,EAAOh5B,UAEP3J,EAAIooB,mBAAmB5d,EAAWutB,kBAAkBltB,IAAQoB,QACvDmkC,GACDvwC,EAAKkiC,aAAal3B,EAE1B,CAhCA5S,KAAKspC,mBAAmB12B,GA0CxB5B,EAAcsI,MAAQA,EAElB++B,IACArnC,EAAcpE,MAAQ,KAE1BoE,EAAc2+B,SAAW,IAEzBjF,EAAS1qC,KAAKgqC,aAAa,SAAUh5B,GAAe+I,KAAK,eACzDq2B,EAAOxoC,EAAKkoC,YAAYpF,EAAQ2N,GAEhC3N,EAAOljC,QAAQuf,YAAY,uBAAwBsxB,GACnD3N,EAAOphC,QACNC,KAAK,oBAAoBmX,GAAG,QAAS0W,GAAO8F,MAC5C3zB,KAAK,mBAAmBmX,GAAG,QAASpH,GAAO4jB,MAC3C3zB,KAAK,uBAAuBmX,GAAG,WAtBhC,SAAiBxX,GACTA,EAAE0T,SAAWlb,EAAKisC,MAClBvW,EAAMluB,GACCA,EAAE0T,SAAWlb,EAAKivC,KACzBr3B,EAAMpQ,EAEd,IAgBoDg0B,MAEnD3zB,KAAKu1C,GAAgB1pC,IAAI8pC,EAAOA,EAAKnsC,aAAa,OAAQ,GAAK,WAAWmqB,MAC1E3zB,KAAKw1C,GAAiB3pC,IAAI8pC,EAAOA,EAAK1oB,UAAY,IAAI0G,MACtD3zB,KAAKy1C,GAAkB5pC,IAAI8pC,EAAOA,EAAKjnC,MAAQ,IAAIilB,MAEpD,IAAI11B,EAAUkjC,EAAOljC,QAgBrB,GAfI6wC,IACAzwC,EAAKw3C,aAAe,IAAI5/C,EAAM6B,GAAG89C,YAC7B33C,EAAQ+B,KAAK,kBACb5J,EAAO,CAAC,EAAG0R,IAGfzJ,EAAKw3C,aAAah3C,KAAK,UAAU,SAASswC,GACN,MAA5BA,EAAGC,SAASp5B,IAAI,SAChB/X,EAAQ+B,KAAKu1C,GAAgB1pC,IAAIpV,KAAKwR,QAE9C,IAEA5J,EAAKw3C,aAAah3C,KAAK,QAASgvB,IAGhCghB,EAAM,CACN,IAAIQ,EAAepxC,EAAQU,QAAQ,aAAa2E,SAChDrF,EAAQgJ,IAAI,aAAcooC,EAC9B,CACAlO,EAAOG,SAAS/xB,OAChBtR,EAAQ+B,KAAKu1C,GAAgBp+C,QAAQ,SAASiiC,QAClD,EAEAmN,YAAa,SAASpF,EAAQ2N,GAC1B,IACIlI,EAAcnvC,EAAE,UAAUma,SAASuvB,EAAOljC,SAC1CoC,EAFO5J,KAES8H,OAAOjI,QAAQ+J,SAE/BwmC,EAAOD,EAAYE,UAAU,CAC7BC,eAAe,EACf52B,MAAO,CACH,CACI62B,MAAO,oBACPC,MAAO/9B,EAAO7I,EAAS8B,gBACvB5D,OAAQ,WAEZ,CACIyoC,MAAO,qBACPC,MAAO/9B,EAAO7I,EAASgC,UACvB9D,OAAQ,WAEZ,CACIyoC,MAAO,sBACPC,MAAO/9B,EAAO7I,EAAS+B,WACvB7D,OAAQ,cAGjBiS,KAAK,aAQR,OANIs+B,GACAlI,EAAYnvB,QAAQhgB,EAAE,sCAG1B0pC,EAAOljC,QAAQkpC,MAAM1vC,EA7BVhB,KA6BiBiqC,uBAAuB,CAAErgC,WAAUsgC,iBAAkB,WAAYC,iBAAkB,qBAExGiG,CACX,IAIJ5wC,EAAM6B,GAAGyG,OAAOm3C,YAAcA,EAE9Bt5C,EAAa,aAAc,IAAIG,EAAOqkB,KAAK,CAAE/pB,QAAS6+C,IAErD,CArND,CAqNG/9C,OAAO1B,MAAM2sB,QAEhB,SAAUnrB,EAAGC,GAEb,IAAIzB,EAAQ0B,OAAO1B,MACfG,EAASqB,EAAErB,OACXmG,EAAStG,EAAM6B,GAAGyG,OAClBC,EAAMjC,EAAOkC,IACbuK,EAAazM,EAAOyM,WACpBm3B,EAAU5jC,EAAO4jC,QAEjB1kB,EAAK,cACLq6B,EAAc,WACdC,EAAgB,aAChBC,EAAQ,QACRC,EAAM,MACNC,EAAM,MACNC,EAAW,WACXC,EAAW,WACXC,EAAU,UACVC,EAAU,UACVC,EAAQ,QACRC,EAAQ,QACRC,EAAQ,QACRC,EAAK,KACLC,EAAK,KACLC,EAAK,KAELh2B,EAAOrkB,EAAOqkB,KACdlV,EAAoBnP,EAAOmP,kBAC3Bi+B,EAAoBptC,EAAOotC,kBAC3BoB,EAAkBxuC,EAAOwuC,gBACzBxJ,EAAgBhlC,EAAOglC,cACvBnlC,EAAeG,EAAO1D,YAAYuD,aAClCK,EAAiBF,EAAO1D,YAAY4D,eACpCE,EAAU1G,EAAM6B,GAAGyE,OAAOhG,GAAGD,QAAQqG,QACrCk6C,EAAa5gD,EAAM4gD,WACnBr8B,EAAWvkB,EAAMukB,SAEjBs8B,EAAiB,EAAGzzC,QAAOxG,aAAc,oBAAoBwG,QAAYxG,SAEzEk6C,EAAoB,IAAIpN,EAAkB,CAAC,CAAEvwC,KAAM,CAACm9C,MAEpDS,EAAetrC,EAAkBtV,OAAO,CACxCC,KAAM,SAASC,GACX,IAAIwlB,EAAIrkB,EAAErB,OAAO,CACbo7C,YAAa/6C,KAAK+6C,YAClByF,cAAc,GACf3gD,GAAW,CAAC,GAEfoV,EAAkBnV,GAAGF,KAAKG,KAAKC,KAAMqlB,EACzC,EACAo7B,WAAY,SAAS7xC,EAAMD,GACvBC,EAAOA,GAAQ,EACfD,EAAUA,GAAW,EACrB,IAAI+xC,EAAa38B,EAASs8B,EAATt8B,CAAyB,CAAEnX,MAAO,IAAM+B,EAASvI,QAASN,EAAO4kB,wBAC9Ei2B,EAAY,IAAM/xC,EAEtB,MAAO,oCACK,IAAIkU,MAAMlU,EAAO,GAAGyK,KACpB,qBAAuBsnC,EAAY,OAC/B,IAAI79B,MAAMnU,EAAU,GAAG0K,KAAKqnC,GAChC,SACL,UACX,EAEA3F,YAAa,SAASjzC,EAAQ8K,GAC1B,IAAIguC,EAAgB5/C,EAAE,mBAAoB8G,EAAOrB,UAAU+jB,WAAW,aAEtE5X,EAAM+B,SAASisC,EAAcr3C,KAAK22C,GAAI,GAAI,GAC1CttC,EAAMgC,UAAS,GAEf9M,EAAOqL,YAAYP,EACvB,EAEAF,KAAM,WACF,IAAI7S,EAAUG,KAAKH,QACnBA,EAAQmV,KAAOhV,KAAKygD,WAAW5gD,EAAQ+O,KAAM/O,EAAQ8O,SAErDsG,EAAkBnV,GAAG4S,KAAK3S,KAAKC,KACnC,IAGA6gD,EAAY12B,EAAKxqB,OAAO,CACxByX,WAAY,SAAS/V,EAAIyG,GACrB,IAAIF,EAAO5H,KACP8gD,EAAM9/C,EAAE,WAAa8G,EAAOjI,QAAQ+J,SAAS0C,YAAc,aAC3D+S,EAAQre,EAAEhB,KAAKH,QAAQkhD,eAAe5lC,SAAS,QAAQ6lC,WAAW,CAClEnQ,OAAQxvC,EACR4/C,kBAAkB,EAClBnoC,KAAM9Y,KAAKkhD,MAAM94C,KAAKpI,MACtB6rC,SAAU7rC,KAAKmhD,UAAU/4C,KAAKpI,MAC9BsZ,MAAOtZ,KAAK4vC,OAAOxnC,KAAKpI,QACzB+Z,KAAK,cAER1Y,EAAGqf,GAAG,QAAS1gB,KAAKohD,QAAQh5C,KAAKpI,OAC9B0gB,GAAG,UAAW1gB,KAAKgwC,SAAS5nC,KAAKpI,OAEpCA,KAAKqhD,QAAUv5C,EACf9H,KAAKguC,OAAS3uB,EAEdvX,EAAOkK,WAAahS,KAAKguC,OAEzB,IAAI1hC,EAAc,IAAIxG,EAAOw7C,gBAAgB,CACzClhD,QAAS0F,EAAOy7C,mBAChBC,gBAAgB,IAGpB77C,EAAa,oBAAqB2G,GAElCw0C,EAAI3lC,SAASkE,EAAM7X,SACnBs5C,EAAIW,YAAY,CACZ5+C,KAAM,iBAGVi+C,EAAIpgC,GAAG,SAAS,KACZ9Y,EAAKy5C,QAAQ3uC,KAAK,oBAAoB,GAE9C,EAEA2M,MAAO,WACH,OAAOrf,KAAKguC,MAChB,EAEAmT,UAAWngD,EAAEqpB,KAEb62B,MAAO,WACHlhD,KAAKguC,OAAOnuC,QAAQgxC,OAAO14B,SAASknC,EACxC,EAEAzP,OAAQ,WACJ5vC,KAAKguC,OAAOnuC,QAAQgxC,OAAOnxB,YAAY2/B,EAC3C,EAEArP,SAAU,SAAS9mC,GACf,IAAItB,EAAO5H,KACP0B,EAAOlC,EAAMkC,KACb8R,EAAMtK,EAAE0T,QAERpJ,GAAO9R,EAAKivC,IACZ/oC,EAAKomC,OAAO10B,QACL9F,GAAO9R,EAAK8c,MAAQtV,EAAEyV,QAC7B/W,EAAKomC,OAAOl1B,OACZlR,EAAK85C,cAAc,CAAEpnB,IAAK,EAAGR,IAAK,KAC3BtmB,IAAQ9R,EAAKisC,OACpBxxB,YAAW,KACPvU,EAAK85C,cAAc,CAAEpnB,IAAK,EAAGR,IAAK,GAAI,GAGlD,EAEAsnB,QAAS,SAASl4C,GACDlI,EAAEkI,EAAEmS,QAAQnT,QAAQ,WAErBuX,SAAS,eACjBzf,KAAKqf,QAAQkB,QAErB,EAEApY,OAAQ,SAAS9G,GACb,IAAIge,EAAQrf,KAAKqf,QAEbA,EAAM/V,SAA2C,SAAhC+V,EAAM/V,QAAQkH,IAAI,YACnC6O,EAAM/F,QAGVjY,EAAGqe,YAAY,UACnB,EAEAhO,QAAS,WACD1R,KAAKguC,QACLhuC,KAAKguC,OAAOt8B,SAEpB,IAGAiwC,EAAkBd,EAAUlhD,OAAO,CACnCC,KAAM,SAASC,GACXG,KAAK4hD,KAAO,EACZ5hD,KAAK4O,KAAO,EAEZiyC,EAAU/gD,GAAGF,KAAKG,KAAKC,KAAMgB,EAAErB,OAAOE,EAAS,CAC3CO,QAASmgD,EACTQ,cACI,gCAEQ,IAAIj+B,MAAM9iB,KAAK4hD,KAAO5hD,KAAK4O,KAAO,GAAGyK,KAAK,8CAFlD,6CAOZ,EAEA8nC,UAAW,WACP,IASIU,EAAWC,EATXl6C,EAAO5H,KACPwH,EAAUI,EAAKomC,OAAOxmC,QACtBixB,EAAQjxB,EAAQ+B,KAAK,cACrBw4C,EAAYtpB,EAAMupB,GAAG,GACrBC,EAAWxpB,EAAMupB,GAAGvpB,EAAM53B,OAAS,GACnC6mB,EAAQloB,EAAM0iD,UAAUH,GACxB7kB,EAAM19B,EAAM0iD,UAAUD,GACtBL,EAAOh6C,EAAKg6C,KACZhzC,EAAOhH,EAAKgH,KAWhB,SAASuzC,EAAkBj5C,GACvB,IAAIke,EAAIpmB,EAAEE,QACV,MAAO,CACHo5B,IAAKlS,KAAKg6B,OAAOl5C,EAAEm5C,QAAUj7B,EAAE1M,YAAcgN,EAAMzM,KAAO6mC,GAAc,EACxEhoB,IAAK1R,KAAKg6B,OAAOl5C,EAAEo5C,QAAUl7B,EAAEm7B,aAAe76B,EAAM1M,MAAQ6mC,GAAa,EAEjF,CAdAr6C,EAAQ+B,KAAK,KAAKsjC,UAAUz0B,KAAK,eAAgB,MAEjD8kB,EAAIliB,MAAQinC,EAAS,GAAGO,YACxBtlB,EAAIjiB,KAAOgnC,EAAS,GAAG1tB,aAEvBstB,GAAa3kB,EAAIliB,KAAO0M,EAAM1M,MAAQ4mC,EACtCE,GAAc5kB,EAAIjiB,IAAMyM,EAAMzM,KAAOrM,EAUrCpH,EAAQi7C,YAAYz9B,GACftE,GAAG,YAAa,cAAc,SAASxX,GACpCtB,EAAK85C,cAAcS,EAAkBj5C,GACzC,IACCwX,GAAG,aAAc,cAAc,WAC5B9Y,EAAK85C,eACT,IACChhC,GAAG,OAAQ,cAAc,SAASxX,GAC/BA,EAAEgU,iBACF,IAAIb,EAAQ+jC,EAAWl3C,GAAG,GAC1BtB,EAAKs0C,MAAMiG,EAAkB9lC,EAAM9D,UACvC,GACR,EAEAmqC,OAAQ,SAAShlB,GACb,OAAOA,GAAQA,EAAKpD,IAAM,GAAKoD,EAAK5D,IAAM,GAAK4D,EAAKpD,KAAOt6B,KAAK4O,MAAQ8uB,EAAK5D,KAAO95B,KAAK4hD,IAC7F,EAEA1F,MAAO,SAASxe,GACR19B,KAAK0iD,OAAOhlB,KACZ19B,KAAKqhD,QAAQ3uC,KAAK,cAAe,CAC7B9D,KAAM8uB,EAAKpD,IACX3rB,QAAS+uB,EAAK5D,MAElB95B,KAAKguC,OAAO10B,QAEpB,EAEAooC,cAAe,SAAShkB,GACpB,IAAIl2B,EAAUxH,KAAKguC,OAAOxmC,QACtBm7C,EAASn7C,EAAQ+B,KAAK,aACtBkvB,EAAQjxB,EAAQ+B,KAAK,cACrBq4C,EAAO5hD,KAAK4hD,KACZh4C,EAAW5J,KAAKqhD,QAAQxhD,QAAQ+J,SAEhC5J,KAAK0iD,OAAOhlB,IACZilB,EAAOpxC,KAAK/R,EAAMgD,OAAOoH,EAASyC,gBAAiBqxB,EAAKpD,IAAKoD,EAAK5D,MAElErB,EAAMthB,MAAK,SAAS1U,GAChBzB,EAAEhB,MAAM+mB,YACJu4B,EACA78C,EAAIm/C,EAAOlkB,EAAK5D,KAAOr3B,EAAIm/C,EAAOlkB,EAAKpD,IAE/C,MAEAqoB,EAAOpxC,KAAK3H,EAASzF,aACrBs0B,EAAM/Y,YAAY4/B,GAE1B,EAEAtP,SAAU,SAAS9mC,GACf,IAAI05C,EAAmB5iD,KAAKguC,OAAO3sB,UAInC,GAFAw/B,EAAU/gD,GAAGkwC,SAASjwC,KAAKC,KAAMkJ,GAE5BlJ,KAAKguC,OAAO3sB,UAAjB,CAIA,IAQIwhC,EARAnhD,EAAOlC,EAAMkC,KACb8R,EAAMtK,EAAE0T,QACR6b,EAAQz4B,KAAKguC,OAAOxmC,QAAQ+B,KAAK,cACjCyK,EAAQoU,KAAKF,IAAIuQ,EAAMxhB,OAAO,eAAegF,OAAO3V,QAAS,GAC7Dw8C,EAAe16B,KAAKg6B,MAAMpuC,EAAQhU,KAAK4hD,MACvCmB,EAAkB/uC,EAAQhU,KAAK4hD,KAE/BoB,GAAU,EAGVxvC,GAAO9R,EAAK8c,MAAStV,EAAEyV,OAGhBnL,GAAO9R,EAAK6c,IACnBykC,GAAU,EACVF,KACOtvC,GAAO9R,EAAK0b,OACnB4lC,GAAU,EACVD,KACOvvC,GAAO9R,EAAKyb,MACnB6lC,GAAU,EACVD,KACOvvC,GAAO9R,EAAKwc,MACnB2kC,EAAS7iD,KAAKguC,OAAOxmC,QAAQ+B,KAAK,cAEvB1I,OAAS,IAChBmiD,GAAU,EACVH,EAAOniD,QAAQ,WAhBnBsiD,GAAU,EACVF,KAmBJ,IAAIG,EAAY,CACZ3oB,IAAKlS,KAAKF,IAAI,EAAGE,KAAKH,IAAIjoB,KAAK4O,KAAMk0C,EAAe,IACpDhpB,IAAK1R,KAAKF,IAAI,EAAGE,KAAKH,IAAIjoB,KAAK4hD,KAAMmB,EAAkB,KAGvDvvC,GAAO9R,EAAKisC,OAASiV,EACrB5iD,KAAKk8C,MAAM+G,GAEXjjD,KAAK0hD,cAAcuB,GAGnBD,IACA95C,EAAEgU,iBACFhU,EAAEg6C,2BA9CN,CAgDJ,EAEAhC,MAAO,WACH,IAAIt3C,EAAW5J,KAAKqhD,QAAQxhD,QAAQ+J,SAEpCi3C,EAAU/gD,GAAGohD,MAAMnhD,KAAKC,MAExBA,KAAKqf,QAAQ7X,QACR+B,KAAK,aAAagI,KAAK3H,EAASzF,aAAa+4B,MAC7C3zB,KAAK,cAAcmW,YAAY4/B,EACxC,EAEA1P,OAAQ,WACJiR,EAAU/gD,GAAG8vC,OAAO7vC,KAAKC,MACzBA,KAAKqf,QAAQ7X,QAAQ8S,IAAI,IAAM0K,EACnC,IAGAm+B,EAA2BzZ,EAAQ/pC,OAAO,CAC1Ca,KAAM,WACF,IAAIupC,EAAQ/pC,KAAK2pC,aACjBI,EAAMtF,cAENzjC,EAAEhB,KAAK8H,OAAOgL,MAAMvJ,KAAK,oCACpB4N,MAAK,SAAS7Q,EAAM4Q,GACjBA,EAAG7B,QACP,IAEJrV,KAAK8H,OAAOqL,YAAY42B,EAAMx0B,UAClC,EACA6tC,mBAAoB,SAASjrB,GACzBpwB,EAAIuwB,mBAAmBH,EAAO,YAClC,EACAE,eAAgB,SAASF,GACrBpwB,EAAImwB,kBAAkBC,EAAO,YACjC,EACAkrB,iBAAkB,SAAStiC,EAAQyX,EAAUE,GAGzC,IAFA,IAAI4B,EAAK1B,EAEAn2B,EAAI+1B,EAAU/1B,GAAK,EAAGA,IAI3B,GAHA63B,EAAMvZ,EAAOnS,KAAKnM,IAClBm2B,EAAO53B,EAAEs5B,GAAK/wB,KAAK,cAAgBmvB,EAAW,MAErC73B,OACL,OAAO+3B,CAGnB,EACA0qB,sBAAuB,SAASx7C,GAC5BA,EAAOoK,oBACPpK,EAAO8X,4BACP9X,EAAO+X,yBACP/X,EAAOgY,4BACX,EACAyjC,iBAAkB,SAASjpB,EAAK5B,GAK5B,IAJA,IAEI8qB,EAFAC,EAASnpB,EAAI/wB,KAAK,iBAClBm1B,EAAYhZ,SAAS+9B,EAAOrrC,KAAK,aAAc,IAAMqrC,EAAO5lB,KAAK,WAAa,EAGzEp7B,EAAIi2B,EAAUj2B,GAAKi8B,EAAWj8B,IAEnC,IADA+gD,EAAKlpB,EAAI/wB,KAAK,cAAgB9G,EAAI,MAC3B5B,OACH,OAAO2iD,CAGnB,EACAE,iBAAkB,SAASppB,EAAKnC,GAO5B,IANA,IAII11B,EAAGkhD,EAAU/qB,EAJbgrB,EAAczrB,EAAMtf,qBAAqB4mC,GACzCoE,EAAmB1rB,EAAMtf,qBAAqB8mC,GAC9ClnB,EAAQ6B,EAAI7B,MACZqrB,EAAgBrrB,EAAM53B,OAGnB+iD,EAAY/iD,OAAS,GACxB+iD,EAAY,GAAGvuC,SAEnB,KAAOwuC,EAAiBhjD,OAAS,GAC7BgjD,EAAiB,GAAGxuC,SAGxB,IAAK5S,EAAIqhD,EAAgB,EAAGrhD,GAAK,EAAGA,KAChCm2B,EAAOH,EAAMh2B,IACJsQ,aAAawsC,KAAWI,IAC7BgE,EAAW57C,EAAIkuB,gBAAgBj2B,KAAK8H,OAAOrB,SAAUk5C,IAC5C9jC,aAAa,OAAQ+c,EAAK7lB,aAAa6sC,IAChDznB,EAAMnX,QAAQ2iC,IAEdxrB,EAAMnX,QAAQjZ,EAAIkuB,gBAAgBj2B,KAAK8H,OAAOrB,SAAUg5C,GAGpE,EACAsE,oBAAqB,SAAS5rB,GAC1BpwB,EAAIuwB,mBAAmBH,EAAO,aAC9BpwB,EAAImwB,kBAAkBC,EAAO,aAC7Bn3B,EAAEm3B,GAAO5uB,KAAK,UAAUihB,WAAW,cACnCziB,EAAImxB,iBAAiBf,EACzB,EACAwC,oBAAqB,SAASxC,GAC1B,OAAOpwB,EAAI4yB,oBAAoBxC,EAAO,SAC1C,IAGA6rB,EAAmBb,EAAyBxjD,OAAO,CACnD+S,KAAM,WACF,IAIIuxC,EAAW3pB,EAAK1B,EAChBsrB,EAAQ1rB,EAAwB2rB,EALhCvxC,EAAQ5S,KAAK6pC,WAAU,GACvB2Z,EAAKz7C,EAAIG,QAAQ0K,EAAM4B,aAAc,CAAC0rC,EAAIC,IAC1ChoB,EAAQpwB,EAAIG,QAAQs7C,EAAI1D,GACxB3yC,EAAWnN,KAAKH,QAAQsN,UAAY,QAIxC,IAAKgrB,GAAUn4B,KAAKyT,cAAgB3N,EAAOyV,WAAW8qB,gBAAgBmd,GAClExjD,KAAK8pC,aAAal3B,OADtB,CAKA5S,KAAKq4B,eAAeF,GAEpBmC,EAAMkpB,EAAGt6B,WACTsP,EAAWzwB,EAAIumB,cAAcgM,GAAK,GAE9BkpB,EAAG3qB,QAAU,GAAkB,UAAb1rB,IAClBmtB,EAAMnC,EAAMvpB,KAAK4pB,EAAWgrB,EAAG3qB,QAAU,IAG7CorB,EAAYjkD,KAAK26B,oBAAoBxC,GACrC+rB,EAAS5pB,EAAI7K,WAAU,GACvBzuB,EAAEkjD,GAAQ3+B,QAEV,IAAK,IAAI9iB,EAAI,EAAGA,EAAIwhD,EAAWxhD,GAAQm2B,EAAKiF,KAAK,YAC7CjF,EAAO53B,EAAEs5B,GAAK/wB,KAAK,cAAgB9G,EAAI,MAE9B5B,OACD+3B,EAAKiF,KAAK,WAAa,GAAkB,UAAb1wB,GAAwByrB,EACpDA,EAAKxgB,KAAKynC,EAASjnB,EAAKiF,KAAK,WAAa,GAE1C79B,KAAKokD,YAAYF,EAAQtrB,IAG7BJ,EAAWzwB,EAAIumB,cAAcgM,GAAK,IAClC1B,EAAO54B,KAAKqjD,iBAAiB/oB,EAAI9d,cAAegc,EAAU/1B,IACtCyF,QAAQ+3C,GAAI35C,QAEbsyB,EAAKiF,KAAK,WAAa,IAAMrF,GAAyB,UAAbrrB,EACxDnN,KAAKokD,YAAYF,EAAQtrB,GAEzBA,EAAKxgB,KAAKynC,EAASjnB,EAAKiF,KAAK,WAAa,KAIlDsmB,EAAcnjD,EAAEkjD,GAAQ36C,KAAK,cAAgB9G,EAAI,MACjC2V,KAAKmnC,KAAWG,GAAayE,EAAY/rC,KAAKynC,IAC1DsE,EAAY/rC,KAAKmnC,EAAOC,GAIhB,UAAZryC,EACApF,EAAIuQ,aAAa4rC,EAAQ5pB,GAEzBvyB,EAAIyf,YAAY08B,EAAQ5pB,GAGxBt5B,EAAEm3B,GAAO5uB,KAAK,aAAa1I,OAAS,GACpCb,KAAK+jD,oBAAoB5rB,GAG7Bn4B,KAAKojD,mBAAmBjrB,GACxBn4B,KAAK8pC,aAAal3B,GAElB5S,KAAKsjD,sBAAsBtjD,KAAK8H,OAvDhC,CAwDJ,EACAs8C,YAAa,SAAS9pB,EAAK1B,GACvB,IAAIyrB,GAEJA,EAAUzrB,EAAKoZ,SACPh9B,KAAKlP,EAAO4kB,uBACpB25B,EAAQ75B,WAAWq1B,GACnBwE,EAAQlpC,SAASmf,EACrB,IAGAgqB,EAAsBnB,EAAyBxjD,OAAO,CACtD+S,KAAM,WACF,IAKI6xC,EACA9hD,EAEAm2B,EACAyrB,EATAzxC,EAAQ5S,KAAK6pC,WAAU,GACvB2Z,EAAKz7C,EAAIG,QAAQ0K,EAAM4B,aAAc,CAAC0rC,EAAIC,IAC1ChoB,EAAQpwB,EAAIG,QAAQs7C,EAAI1D,GACxB8D,EAAczrB,EAAMtf,qBAAqB4mC,GACzCoE,EAAmB1rB,EAAMtf,qBAAqB8mC,GAG9C/wC,EAAOupB,GAASA,EAAMvpB,KAGtBzB,EAAWnN,KAAKH,QAAQsN,UAAY,QAGxC,IAAKq2C,GAAOxjD,KAAKyT,cAAgB3N,EAAOyV,WAAW8qB,gBAAgBmd,GAC/DxjD,KAAK8pC,aAAal3B,OADtB,CAcA,IATA5S,KAAKq4B,eAAeF,GAEpBosB,EAAc7+B,SAAS89B,EAAGzwC,aAAa,aAAa,IAEhDywC,EAAGzqB,QAAU,GAAkB,UAAb5rB,IAClBq2C,EAAG3nC,aAAa,YAAa0oC,EAAcf,EAAGzqB,QAAU,GACxDwrB,EAAcA,EAAcf,EAAGzqB,QAAU,GAGxCt2B,EAAI,EAAGA,EAAImM,EAAK/N,OAAQ4B,KACzBm2B,EAAO54B,KAAKwkD,mBAAmB51C,EAAKnM,GAAI8hD,EAAap3C,EAAUq2C,OAM/Da,EAAUzrB,EAAKnJ,aACPtN,UAAYrc,EAAO4kB,sBAC3B25B,EAAQnuB,gBAAgB0pB,GAEpByE,EAAQtxC,aAAawsC,IAAU8E,EAAQtxC,aAAawsC,KAAWI,GAC/D0E,EAAQxoC,aAAa0jC,EAAOE,GAGhB,UAAZtyC,EACApF,EAAIuQ,aAAa+rC,EAASzrB,GAE1B7wB,EAAIyf,YAAY68B,EAASzrB,GAG7B54B,KAAKykD,aAAaJ,EAASzrB,KAG3BgrB,EAAY/iD,OAAS,GAAKgjD,EAAiBhjD,OAAS,IACpDb,KAAK0jD,iBAAiB90C,EAAK,GAAIupB,GAG/Bn3B,EAAEm3B,GAAO5uB,KAAK,aAAa1I,OAAS,GACpCb,KAAK+jD,oBAAoB5rB,GAG7Bn4B,KAAKojD,mBAAmBjrB,GACxBn4B,KAAK8pC,aAAal3B,GAElB5S,KAAKsjD,sBAAsBtjD,KAAK8H,OA9ChC,CA+CJ,EACA08C,mBAAoB,SAASlqB,EAAKiqB,EAAap3C,EAAUu3C,GACrD,IAAI9rB,EACA+rB,EACAr+C,EAAQi+C,EAAc,EAI1B,IAFA3rB,EAAO53B,EAAEs5B,GAAK/wB,KAAK,cAAgBg7C,EAAc,KAAK,KAE1C3rB,EAAKG,QAAU,GAAkB,UAAb5rB,GAAwByrB,IAAS8rB,EAC7D9rB,EAAKG,SAAW,MADpB,CAKA,GAAIH,EACA,OAAOA,EAGX,KAAYtyB,GAAS,MACjBsyB,EAAO53B,EAAEs5B,GAAK/wB,KAAK,cAAgBjD,EAAQ,KAAK,KAEpCsyB,EAAKG,QAAU,GAHPzyB,KAQxB,GAAKsyB,EAAL,CAMA,IAFA+rB,EAAgBj/B,SAASkT,EAAK7lB,aAAa,aAAa,IAAM6lB,EAAKG,QAAU,KAEvDwrB,GAA4B,UAAbp3C,EACjC,OAAOyrB,EACA2rB,GAAeI,GACtB/rB,EAAK/c,aAAa+jC,EAAShnB,EAAKG,QAAU,EAP9C,CAhBA,CAyBJ,EACA0rB,aAAc,SAASJ,EAASzrB,GAC5B,IACAgsB,EAAaC,EAAMC,EADfl4C,EAAQy3C,EAAQ35C,MAAMkC,MAGrBA,IAILg4C,EAAcG,WAAWn4C,GACzBi4C,EAAOj4C,EAAMtM,MAAMskD,EAAYrzB,WAAW1wB,QAC1CikD,EAAmBF,EAAc,EAAKC,EAEtCR,EAAQ35C,MAAMkC,MAAQk4C,EACtBlsB,EAAKluB,MAAMkC,MAAQk4C,EACvB,IAGAE,EAAmB7B,EAAyBxjD,OAAO,CACnD+S,KAAM,WACF,IAUIuyC,EAVAryC,EAAQ5S,KAAK6pC,YACbj7B,EAAO2D,EAAWo0B,OAAO/zB,GAAO,SAAS2a,GACzC,OAAOvsB,EAAEusB,GAAMrlB,QAAQ+3C,GAAI,EAC/B,IACIuD,EAAKz7C,EAAIG,QAAQ0K,EAAM4B,aAAc,CAAC0rC,EAAIC,IAC1C7lB,EAAM1rB,EAAK,GACXiqB,EAAU2qB,EAAKA,EAAG3qB,QAAU,EAC5BL,EAAWx3B,EAAE4N,EAAK,IAAItI,QACtB6xB,EAAQpwB,EAAIG,QAAQoyB,EAAKwlB,GACzBoF,EAAY5qB,EAAI9d,cAGpB,IAAK2b,GAAUn4B,KAAKyT,cAAgB3N,EAAOyV,WAAW8qB,gBAAgB/L,GAClEt6B,KAAK8pC,aAAal3B,OADtB,CAKA,IAAK,IAAI0e,EAAI,EAAGA,EAAIuH,EAASvH,IACrB1iB,EAAKgX,QAAQs/B,EAAUt2C,KAAK4pB,EAAWlH,IAAM,GAC7C1iB,EAAKzO,KAAK+kD,EAAUt2C,KAAK4pB,EAAWlH,IAI5C,GAAI6G,EAAMvpB,KAAK/N,QAAU+N,EAAK/N,QAC1BokD,EAAel9C,EAAIuV,KAAK6a,MACHpwB,EAAIkqB,cAAcgzB,KACnCA,EAAel9C,EAAI2lB,KAAKyK,IAGxB8sB,GAAgBA,EAAar2C,OAC7Bq2C,EAAeA,EAAar2C,KAAK,GAAG6pB,MAAM,IAG9C1wB,EAAIsN,OAAO8iB,GACXn4B,KAAKsjD,sBAAsBtjD,KAAK8H,aAC7B,GAAIo9C,EAAUt2C,KAAK/N,QAAU+N,EAAK/N,QACrCokD,EAAeC,EAAUv3B,eAGrBs3B,EAAeC,EAAU12B,iBAG7BzmB,EAAIsN,OAAO6vC,OACR,CACHllD,KAAKq4B,eAAeF,GAEpB,IAAK,IAAI11B,EAAI,EAAGA,EAAImM,EAAK/N,OAAQ4B,IAC7B63B,EAAM1rB,EAAKnM,GACXsF,EAAIotB,mBAAmBmF,GAEvB2qB,GADAA,EAAel9C,EAAIuV,KAAKgd,IAAQvyB,EAAI2lB,KAAK4M,IACb7B,MAAM,GAGlCz4B,KAAKmlD,cAAcvyC,EAAOqyC,GAC1BA,EAAe,KAEfjlD,KAAKolD,oBAAoBjtB,EAAOmC,GAEhCvyB,EAAIsN,OAAOilB,GAGft6B,KAAKojD,mBAAmBjrB,EAC5B,CAEIn3B,EAAEm3B,GAAO5uB,KAAK,aAAa1I,OAAS,EACpCb,KAAK+jD,oBAAoB5rB,GAClBpwB,EAAI4Y,GAAGukC,EAAWnF,IAAU/+C,EAAEm3B,GAAO5uB,KAAK,WAAW1I,OAAS,GACrEb,KAAK0jD,iBAAiBwB,EAAUt2C,KAAK,GAAIupB,GAGzC8sB,GACAjlD,KAAKmlD,cAAcvyC,EAAOqyC,GAG9BjlD,KAAKsjD,sBAAsBtjD,KAAK8H,OA3DhC,CA4DJ,EACAq9C,cAAe,SAASvyC,EAAO2a,GAC3B3a,EAAM+B,SAAS4Y,EAAM,GACrB3a,EAAMgC,UAAS,GACf5U,KAAK8H,OAAOqL,YAAYP,EAC5B,EACAwyC,oBAAqB,SAASjtB,EAAOmC,GACjC,IAAIh0B,EAAOsyB,EAAMysB,EAAcC,EAAS9sB,EAAWzwB,EAAIumB,cAAcgM,GAAK,GACtEirB,EAAWptB,EAAMvpB,KAAK,GACtBqzC,EAAWsD,EAAS9sB,MAAM8sB,EAAS9sB,MAAM53B,OAAS,GAClD69B,EAAYhZ,SAASu8B,EAASlvC,aAAa,aAAa,IAAMkvC,EAASlpB,QAAU,EAErF,IAAKzyB,EAAQ,EAAGA,GAASo4B,EAAWp4B,GAAgBsyB,EAAKiF,KAAK,YAC1DjF,EAAO53B,EAAEs5B,GAAK/wB,KAAK,cAAgBjD,EAAQ,MAElCzF,QAAU+3B,EAAKiF,KAAK,WAAa,IACtCynB,EAAUntB,EAAMvpB,KAAK4pB,EAAW,IAChC6sB,EAAerkD,EAAEskD,GAAS/7C,KAAK,eAAiBjD,EAAQ,GAAK,MAE5CzF,OACbwkD,EAAaG,OAAO5sB,GAEpB53B,EAAEskD,GAASrlC,OAAO2Y,GAEtB54B,KAAKylD,eAAe7sB,IAGnBA,EAAK/3B,SACN+3B,EAAO54B,KAAKqjD,iBAAiB/oB,EAAI9d,cAAegc,EAAUlyB,GAC1DtG,KAAKylD,eAAe7sB,GAGhC,EACA6sB,eAAgB,SAASjC,GACrB,IAAIkC,EAAelC,EAAG3lB,KAAK,WAAa,EAEpC6nB,GAAgB,GAChBlC,EAAGh5B,WAAWq1B,GACV2D,EAAGprC,KAAKmnC,KAAWG,GACnB8D,EAAGprC,KAAKmnC,EAAOC,IAGnBgE,EAAGprC,KAAKynC,EAAS6F,EAEzB,IAGAC,EAAsBxC,EAAyBxjD,OAAO,CACtD+S,KAAM,WACF,IAQIuyC,EAAcxiD,EAAGm2B,EAAMtH,EARvB1e,EAAQ5S,KAAK6pC,YACb2Z,EAAKz7C,EAAIG,QAAQ0K,EAAM4B,aAAc,CAAC0rC,EAAIC,IAC1ChoB,EAAQpwB,EAAIG,QAAQs7C,EAAI1D,GACxBlxC,EAAOupB,GAASA,EAAMvpB,KACtB21C,EAAcx8C,EAAIumB,cAAck1B,GAAI,GACpCoC,EAAch3C,GAAQA,EAAK,GAAG6pB,MAAM53B,OACpC+iD,EAAczrB,EAAMtf,qBAAqB4mC,GACzCoE,EAAmB1rB,EAAMtf,qBAAqB8mC,GAGlD,IAAK6D,GAAOxjD,KAAKyT,cAAgB3N,EAAOyV,WAAW8qB,gBAAgBmd,GAC/DxjD,KAAK8pC,aAAal3B,OADtB,CAKA,GAAmB,GAAfgzC,GAAoBpC,EAAGzqB,SAAW6sB,GAClCX,EAAel9C,EAAIuV,KAAK6a,MACHpwB,EAAIkqB,cAAcgzB,KACnCA,EAAel9C,EAAI2lB,KAAKyK,IAGxB8sB,GAAgBA,EAAar2C,OAC7Bq2C,EAAeA,EAAar2C,KAAK,GAAG6pB,MAAM,IAG9C1wB,EAAIsN,OAAO8iB,GACXn4B,KAAKsjD,sBAAsBtjD,KAAK8H,YAC7B,CASH,IARAC,EAAIotB,mBAAmBquB,GAEvByB,EAAel9C,EAAIuV,KAAKkmC,IAAOz7C,EAAI2lB,KAAK81B,GAExCxjD,KAAKq4B,eAAeF,GAEpBosB,EAAc7+B,SAAS89B,EAAGzwC,aAAa,aAAc,IAEhDue,EAAI,EAAGA,EAAIkyB,EAAGzqB,QAASzH,IACxB,IAAK7uB,EAAI,EAAGA,EAAImM,EAAK/N,OAAQ4B,GAASm2B,EAAKiF,KAAK,YAAc,GAC1DjF,EAAO53B,EAAE4N,EAAKnM,IAAI8G,KAAK,eAAiBg7C,EAAcjzB,GAAK,MAElDzwB,QAAU+3B,EAAKiF,KAAK,YAAc,EACvCjF,EAAKvjB,SAELrV,KAAK6lD,oBAAoBj3C,EAAKnM,GAAI8hD,EAAcjzB,GAK5DtxB,KAAKojD,mBAAmBjrB,EAC5B,EAEIyrB,EAAY/iD,OAAS,GAAKgjD,EAAiBhjD,OAAS,IACpDb,KAAK0jD,iBAAiB90C,EAAK,GAAIupB,GAG/Bn3B,EAAEm3B,GAAO5uB,KAAK,aAAa1I,OAAS,GACpCb,KAAK+jD,oBAAoB5rB,GAGzB8sB,IACAryC,EAAM+B,SAASswC,EAAc,GAC7BryC,EAAMgC,UAAS,GACf5U,KAAK8H,OAAOqL,YAAYP,IAG5B5S,KAAKsjD,sBAAsBtjD,KAAK8H,OApDhC,CAqDJ,EACA+9C,oBAAqB,SAASvrB,EAAK5B,GAC/B,IAAIE,EAAO53B,EAAEs5B,GAAK/wB,KAAK,cAAgBmvB,EAAW,KAElD,GAAIE,EAAK/3B,QAAU+3B,EAAKiF,KAAK,WAAa,EAAG,CACzC,IAAImU,EAAQpZ,EAAKoZ,OAAM,GAKvB,OAJApZ,EAAK8X,MAAMsB,GACXhyC,KAAK8lD,eAAe9T,GACpBA,EAAM55B,KAAK,YAAasN,SAASkT,EAAKxgB,KAAK,aAAa,IAAM,QAC9DwgB,EAAKvjB,QAET,CAEA,IAAK,IAAI5S,EAAIi2B,EAAUj2B,GAAK,EAAGA,IAG3B,IAFAm2B,EAAO53B,EAAEs5B,GAAK/wB,KAAK,cAAgB9G,EAAI,MAE9B5B,OAGL,OAFAb,KAAK8lD,eAAeltB,QACpBA,EAAKxgB,KAAK,YAAasN,SAASkT,EAAKxgB,KAAK,aAAa,IAAM,EAIzE,EACA0tC,eAAgB,SAAStC,GACrB,IAAIuC,EAAevC,EAAG3lB,KAAK,WAAa,EAEpCkoB,GAAgB,GAChBvC,EAAGh5B,WAAWo1B,GACV4D,EAAGprC,KAAKmnC,KAAWI,GACnB6D,EAAGprC,KAAKmnC,EAAOE,IAGnB+D,EAAGprC,KAAKwnC,EAASmG,EAEzB,IAGAC,EAAgC7C,EAAyBxjD,OAAO,CAChE+S,KAAM,WACF,IAEIylB,EAAOmC,EAAKiqB,EAAa0B,EAAQlsB,EAFjCnnB,EAAQ5S,KAAK6pC,YACb2Z,EAAKz7C,EAAIG,QAAQ0K,EAAM4B,aAAc,CAAC0rC,EAAIC,IAG1C,GAAKqD,EAUL,GALArrB,EAAQpwB,EAAIG,QAAQs7C,EAAI1D,GACxBxlB,EAAMkpB,EAAGt6B,WACTq7B,EAAcx8C,EAAIumB,cAAck1B,GAAI,GAC3BlpB,EAAIgC,SAASioB,EAAc,GAEhCvkD,KAAKyT,cAAgB3N,EAAOyV,WAAW8qB,gBAAgBmd,GACvDxjD,KAAK8pC,aAAal3B,OADtB,CAUA,GALA5S,KAAKq4B,eAAeF,GAEpBosB,EAAc7+B,SAAS1kB,EAAEwiD,GAAIprC,KAAK,aAAc,MAChD6tC,EAASjlD,EAAEs5B,GAAK/wB,KAAK,eAAiBg7C,EAAc,EAAIvkD,KAAKkmD,YAAY1C,GAAM,GAAK,KAAKjkC,IAAI,KAE9E0mC,EAAOptB,UAAY2qB,EAAG3qB,SAAW2qB,EAAGzhC,UAAYkkC,EAAOlkC,QAGlE,OAFA/hB,KAAKojD,mBAAmBjrB,QACxBn4B,KAAK8pC,aAAal3B,GAItBmnB,EAAU/5B,KAAKkmD,YAAY1C,GAAMxjD,KAAKkmD,YAAYD,GAElDjlD,EAAEwiD,GAAI3lB,KAAK+hB,EAAS7lB,GACd9Z,OAAOlY,EAAI0qB,UAAUwzB,GAAU,GAAK,QAAUA,EAAO9jC,WAE3DnhB,EAAEwiD,GAAI52C,MAAM42C,EAAGhB,aACfxhD,EAAEilD,GAAQ5wC,SAENmuC,EAAGzwC,aAAawsC,KAAWE,GAC3B+D,EAAG3nC,aAAa0jC,EAAOI,GAEvB6D,EAAGzwC,aAAawsC,KAAWI,GAC3B3/C,KAAK0jD,iBAAiBppB,EAAKnC,GAG3Bn3B,EAAEm3B,GAAO5uB,KAAK,aAAa1I,OAAS,GACpCb,KAAK+jD,oBAAoB5rB,GAG7Bn4B,KAAKojD,mBAAmBjrB,GACxBn4B,KAAK8pC,aAAal3B,GAClB5S,KAAKsjD,sBAAsBtjD,KAAK8H,OAlChC,MAZI9H,KAAK8pC,aAAal3B,EA+C9B,EACAszC,YAAa,SAAS1C,GAClB,OAAO99B,SAAS89B,EAAGzwC,aAAa6sC,GAAU,KAAO,CACrD,IAGAuG,EAA8BhD,EAAyBxjD,OAAO,CAC9D+S,KAAM,WACF,IAEI0zC,EAAIrlC,EAAQoX,EAAOosB,EAAa/rB,EAAU6tB,EAAWC,EAFrD1zC,EAAQ5S,KAAK6pC,YACb2Z,EAAKz7C,EAAIG,QAAQ0K,EAAM4B,aAAc,CAAC0rC,EAAIC,IAG1C,GAAKqD,EAWL,GANA4C,EAAKr+C,EAAIG,QAAQs7C,EAAIvD,GACrBl/B,EAAShZ,EAAIG,QAAQs7C,EAAI,CAACzD,EAAOC,IACjC7nB,EAAQpwB,EAAIG,QAAQs7C,EAAI1D,GACxByE,EAAcx8C,EAAIumB,cAAck1B,GAAI,IACpChrB,EAAWzwB,EAAIumB,cAAc83B,GAAI,IAElB,IAAMrlC,EAAOnS,KAAK/N,OAQjC,IAHAwlD,EAAYtlC,EAAOnS,KAAK4pB,EAAWx4B,KAAKumD,YAAY/C,MAC5B6C,EAAU/pB,SAASioB,GAEvCvkD,KAAKyT,cAAgB3N,EAAOyV,WAAW8qB,gBAAgBmd,GACvDxjD,KAAK8pC,aAAal3B,OADtB,CAUA,GALA5S,KAAKq4B,eAAeF,GAEpBosB,EAAcvjD,EAAEwiD,GAAIprC,KAAK,eACzBkuC,EAAWtlD,EAAEqlD,GAAW98C,KAAK,cAAgBg7C,EAAc,KAAKhlC,IAAI,KAEnD+mC,EAASvtB,UAAYyqB,EAAGzqB,SAAWyqB,EAAGzhC,UAAYukC,EAASvkC,QAGxE,OAFA/hB,KAAKojD,mBAAmBjrB,QACxBn4B,KAAK8pC,aAAal3B,GAItB5R,EAAEwiD,GAAI3lB,KAAKgiB,EAAS7/C,KAAKumD,YAAY/C,GAAMxjD,KAAKumD,YAAYD,IACtDrmC,OAAOlY,EAAI0qB,UAAU6zB,GAAY,GAAK,QAAUA,EAASnkC,WAE3DqhC,EAAGzwC,aAAawsC,KAAWC,GAC3BgE,EAAG3nC,aAAa0jC,EAAOG,GAG3B1+C,EAAEslD,GAAUjxC,SAERrU,EAAEm3B,GAAO5uB,KAAK,aAAa1I,OAAS,GACpCb,KAAK+jD,oBAAoB5rB,GAG7Bn4B,KAAKojD,mBAAmBjrB,GACxBn4B,KAAK8pC,aAAal3B,EA3BlB,MAVI5S,KAAK8pC,aAAal3B,QAXlB5S,KAAK8pC,aAAal3B,EAiD9B,EACA2zC,YAAa,SAAS/C,GAClB,OAAO99B,SAAS89B,EAAGzwC,aAAa8sC,GAAU,KAAO,CACrD,IAGA2G,EAAmBrD,EAAyBxjD,OAAO,CACnD+S,KAAM,WACF,IAAIE,EAAQ5S,KAAK6pC,YACbniC,EAAO1H,KAAKH,QAAQ6H,KACpB0Q,EAAgB,QAAT1Q,EAAiBk4C,EAAUC,EAClC2D,EAAKz7C,EAAIG,QAAQ0K,EAAM4B,aAAc,CAAC0rC,EAAIC,IAC1Cp/B,EAAShZ,EAAIG,QAAQs7C,EAAI,CAACzD,EAAOC,IACjC7nB,EAAQpwB,EAAIG,QAAQs7C,EAAI1D,GACxB2G,EAAU1+C,EAAIkuB,gBAAgBj2B,KAAK8H,OAAOrB,SAAU+8C,EAAG/mC,SAAS/W,gBAE/D89C,GAAOxjD,KAAKyT,cAAgB3N,EAAOyV,WAAW8qB,gBAAgBmd,KAKnExjD,KAAKq4B,eAAeF,GAEP,QAATzwB,GAAkB1G,EAAEwiD,GAAI7iC,GAAG,IAAMvI,EAAO,KACxCpY,KAAK0mD,uBAAuBlD,EAAIziC,EAAQ3I,EAAMquC,GAC9B,WAAT/+C,GAAqB1G,EAAEwiD,GAAI7iC,GAAG,IAAMvI,EAAO,MAClDpY,KAAK2mD,qBAAqBnD,EAAIziC,EAAQ3I,EAAMquC,GAG5CzlD,EAAEwiD,GAAI3lB,KAAKzlB,EAAK1S,gBAAkB,GAClC1E,EAAEwiD,GAAIh5B,WAAWpS,GAGjBpX,EAAEm3B,GAAO5uB,KAAK,aAAa1I,OAAS,GACpCb,KAAK+jD,oBAAoB5rB,GAG7Bn4B,KAAKojD,mBAAmBjrB,IApBpBn4B,KAAK8pC,aAAal3B,EAsB1B,EACAg0C,iBAAkB,SAASpD,GACvB,OAAO99B,SAAS89B,EAAGzwC,aAAa8sC,GAAU,GAC9C,EACAgH,iBAAkB,SAASrD,GACvB,OAAO99B,SAAS89B,EAAGzwC,aAAa6sC,GAAU,GAC9C,EACA8G,uBAAwB,SAASlD,EAAIziC,EAAQ3I,EAAMquC,GAC/C,IAAI5tB,EAAU2qB,EAAG3qB,QACbE,EAAUyqB,EAAGzqB,QACb+tB,EAAU9lD,EAAEylD,GACZM,EAAgB3+B,KAAKg6B,MAAMrpB,EAAU,GAEjCguB,EAAgB,GAChBD,EAAQ1uC,KAAKwnC,EAASmH,GAGtBluB,EAAU,GACViuB,EAAQ1uC,KAAKynC,EAAShnB,GAG1B73B,EAAEwiD,GAAI3lB,KAAKzlB,EAAM2gB,EAAUguB,GACtBrW,MAAMoW,GAEX9lD,EAAEwiD,GAAI52C,MAAM42C,EAAGhB,aACfsE,EAAQl6C,MAAMk6C,EAAQ,GAAGtE,aAErBgB,EAAGvkC,aAAasgC,KACZiE,EAAGzwC,aAAawsC,KAAWI,GAC3BmH,EAAQ1uC,KAAKmnC,EAAOE,GACf+D,EAAGzwC,aAAa6sC,IAAyC,MAA7B4D,EAAGzwC,aAAa6sC,IAC7C4D,EAAG3nC,aAAa0jC,EAAOE,GAG3Bz/C,KAAK0jD,iBAAiBF,EAAGt6B,WAAYnI,EAAOmI,aAE5C49B,EAAQ1uC,KAAKmnC,EAAOiE,EAAGzwC,aAAawsC,IAGpD,EACAoH,qBAAsB,SAASnD,EAAIziC,EAAQ3I,EAAMquC,GAC7C,IAAIL,EAAKr+C,EAAIG,QAAQs7C,EAAGvD,GACpBsE,EAAc7+B,SAAS1kB,EAAEwiD,GAAIprC,KAAK,aAAc,IAChDogB,EAAWzwB,EAAIumB,cAAc83B,GAAI,GACjCvtB,EAAU2qB,EAAG3qB,QACbE,EAAUyqB,EAAGzqB,QACbiuB,EAAgB5+B,KAAKg6B,MAAMvpB,EAAU,GACrCwtB,EAAYrlD,EAAE+f,GAAQxX,KAAK02C,GAAI+B,GAAGxpB,EAAWK,EAAUmuB,GACvDf,EAASjmD,KAAKujD,iBAAiB8C,EAAW9B,EAAcxrB,GACxD+tB,EAAU9lD,EAAEylD,GAERO,EAAgB,GAChBF,EAAQ1uC,KAAKynC,EAASmH,GAEtBjuB,EAAU,GACV+tB,EAAQ1uC,KAAKwnC,EAAS7mB,GAGtBktB,GAAUA,EAAOplD,OACjBolD,EAAOT,OAAOsB,GAEdT,EAAUpmC,OAAO6mC,GAGrB9lD,EAAEwiD,GAAI3lB,KAAKzlB,EAAMygB,EAAUmuB,GAEvBxD,EAAGvkC,aAAasgC,KACZiE,EAAGzwC,aAAawsC,KAAWG,GAC3BoH,EAAQ1uC,KAAKmnC,EAAOC,GACfgE,EAAGzwC,aAAa8sC,IAAyC,MAA7B2D,EAAGzwC,aAAa8sC,IAC7C2D,EAAG3nC,aAAa0jC,EAAOC,IAG3BsH,EAAQ1uC,KAAKmnC,EAAOiE,EAAGzwC,aAAawsC,IAGpD,IAGA0H,EAAwB98B,EAAKxqB,OAAO,CACpCS,QAAS,SAASP,GACd,IAAIqnD,EAAc,CACd5sB,IAAK,CACD6sB,OAAQnD,EACRoD,OAAUpC,EACVzP,MAAOyQ,EACP7gC,MAAOqhC,GAEXa,OAAQ,CACJF,OAAQ7C,EACR8C,OAAUzB,EACVpQ,MAAO4Q,EACPhhC,MAAOqhC,IAOf,OAHA3mD,EAAUF,EAAOE,EAASG,KAAKH,UACvBotC,OAASptC,EAAQotC,QAAU,SAE5B,IAAIia,EAAYrnD,EAAQ6H,MAAM7H,EAAQotC,QAAQptC,EACzD,EAEAsI,OAAQ,SAAS9G,EAAIsjB,GACjB,IAAInO,GAAe8pC,EAAkB9pC,YAAYmO,GAC7Cnb,EAAUnI,EAAG6G,QAAQ,cAAc8iC,mBAEnB,IAAhBx0B,EACAhN,EAAQwO,KAAK3W,GAEbmI,EAAQqd,KAAKxlB,EAErB,IAGAimD,EAAqBxc,EAAcnrC,OAAO,CAC1C+S,KAAM,WACF,IACI5K,EADO9H,KACO8H,OAElBgjC,EAAchrC,GAAG4S,KAAK3S,KAAKC,MAEvB8H,EAAOmhB,iBACPnhB,EAAOmhB,gBAAgBs+B,oBAE/B,IAOAC,EAAkBlT,EAAgB30C,OAAO,CACzCwI,OAAQ,SAAS9G,EAAIsjB,GACjB,IAAI8iC,GAAWnH,EAAkB9pC,YAAYmO,GACzCnO,EAAcxW,KAAKH,QAAQwW,OAAOG,YAAYmO,EAAO3kB,KAAKynD,SAC1Dj+C,EAAUnI,EAAG6G,QAAQ,cAAc8iC,kBAEnCxhC,GACAA,EAAQ+W,OAAOlf,EAAImV,IAGP,IAAZixC,EACAj+C,EAAQwO,KAAK3W,GAEbmI,EAAQqd,KAAKxlB,EAErB,EACAjB,QAAS,SAASgqB,GAGd,OAAO,IAAIk9B,EAAmB3nD,EAAOyqB,EAAkB,CACnDwf,UAHO5pC,KAGSH,QAAQ+pC,YAEhC,EACA6d,QAAS,SAASl6B,GACd,OAAOxlB,EAAI4Y,GAAG4M,EAAM,QACxB,IAGJ5tB,EAAOH,EAAM6B,GAAGyG,OAAQ,CACpB+4C,UAAWA,EACXN,aAAcA,EACdoB,gBAAiBA,EACjB6F,gBAAiBA,EACjBF,mBAAoBA,EACpBL,sBAAuBA,EACvBjD,iBAAkBA,EAClBM,oBAAqBA,EACrBU,iBAAkBA,EAClBW,oBAAqBA,EACrBK,8BAA+BA,EAC/BG,4BAA6BA,EAC7BK,iBAAkBA,IAItB7gD,EAAa,cAAe,IAAIg8C,EAAgB,CAAEtgD,GAAI,CAAEge,OAAO,EAAMkvB,SAAU,YAE/E5oC,EAAa,gBAAiB,IAAIshD,EAAsB,CAAEv/C,KAAM,SAAUyF,SAAU,YACpFxH,EAAa,iBAAkB,IAAIshD,EAAsB,CAAEv/C,KAAM,YACjE/B,EAAa,cAAe,IAAIshD,EAAsB,CAAEv/C,KAAM,MAAOyF,SAAU,YAC/ExH,EAAa,cAAe,IAAIshD,EAAsB,CAAEv/C,KAAM,SAC9D/B,EAAa,YAAa,IAAIshD,EAAsB,CAAEv/C,KAAM,MAAOulC,OAAQ,YAC3EtnC,EAAa,eAAgB,IAAIshD,EAAsB,CAAEv/C,KAAM,SAAUulC,OAAQ,YACjFtnC,EAAa,yBAA0B,IAAIshD,EAAsB,CAAEv/C,KAAM,MAAOulC,OAAQ,WACxFtnC,EAAa,uBAAwB,IAAIshD,EAAsB,CAAEv/C,KAAM,SAAUulC,OAAQ,WACzFtnC,EAAa,wBAAyB,IAAIshD,EAAsB,CAAEv/C,KAAM,MAAOulC,OAAQ,WACvFtnC,EAAa,sBAAuB,IAAIshD,EAAsB,CAAEv/C,KAAM,SAAUulC,OAAQ,WAExFjnC,EAAe,iBAAkB,CAC7B,CAAErD,KAAM,CAAC,SAAUyV,KAAM,CAAE1N,MAAO,CAAEiqC,WAAY,GAAIC,YAAa,UACjE,CAAEjyC,KAAM,CAAC,SAAUyV,KAAM,CAAEsvC,MAAO,WAEtC/hD,EAAa,iBAAkB,IAAI6hD,EAAgB,CAC/ChlD,OAAQ0D,EAAQjB,eAChB5D,GAAI,CACAgtC,WAAW,EACXhrB,MAAO,iBAIfrd,EAAe,mBAAoB,CAC/B,CAAErD,KAAM,CAAC,SAAUyV,KAAM,CAAE1N,MAAO,CAAEiqC,WAAY,OAAQC,YAAa,UACrE,CAAEjyC,KAAM,CAAC,SAAUyV,KAAM,CAAEsvC,MAAO,aAEtC/hD,EAAa,mBAAoB,IAAI6hD,EAAgB,CACjDhlD,OAAQ0D,EAAQhB,iBAChB7D,GAAI,CACAgtC,WAAW,EACXhrB,MAAO,iBAIfrd,EAAe,kBAAmB,CAC9B,CAAErD,KAAM,CAAC,SAAUyV,KAAM,CAAE1N,MAAO,CAAEiqC,WAAY,OAAQC,YAAa,MACrE,CAAEjyC,KAAM,CAAC,SAAUyV,KAAM,CAAEsvC,MAAO,YAEtC/hD,EAAa,kBAAmB,IAAI6hD,EAAgB,CAChDhlD,OAAQ0D,EAAQf,gBAChB9D,GAAI,CACAgtC,WAAW,EACXhrB,MAAO,gBAId,CAjtCD,CAitCGniB,OAAO1B,MAAM2sB,QAEhB,SAAUnrB,GAGN,IAAIxB,EAAQ0B,OAAO1B,MACf2B,EAAQ3B,EAAM2B,MACd0G,EAAWrI,EAAM6B,GAAGyG,OACpByK,EAAa1K,EAAS0K,WACtBxK,EAAMF,EAASG,IACf4N,EAAe/N,EAAS+N,aACxBivB,EAASh9B,EAASg9B,OAClBpjC,EAAUjC,EAAM+B,QAAQE,QACxB9B,EAASqB,EAAErB,OAEfiJ,EAAYzH,EAAMxB,OAAO,CACzBC,KAAM,SAASkI,GACX9H,KAAK8H,OAASA,EACd,IAAIwI,EAAexI,EAAOjI,QAAQyQ,aAClCtQ,KAAK2nD,yBAA2B7/C,EAAOjI,QAAQ8nD,0BAA4B,GAC3E3nD,KAAK4nD,SAAW,CACZ,IAAIC,EAAcv3C,GAClB,IAAIw3C,EAAWx3C,GACf,IAAIy3C,EAAoBz3C,GACxB,IAAI03C,EAAoB13C,GACxB,IAAI23C,EAAgB33C,GACpB,IAAI43C,EAAgB53C,GACpB,IAAI63C,EAAmB73C,GACvB,IAAI83C,EAAc93C,GAE1B,EAEA+3C,eAAgB,SAASrzC,GACrB,IACIV,EADStU,KAAK8H,OACDrB,SACbgP,EAAY1N,EAAIghB,OAAOzU,EAAK,OAC5B6hC,EAAW7hC,EAAI0sB,yBAInB,IAFAvrB,EAAU0M,UAAYnN,EAEfS,EAAUgY,YACb0oB,EAASr6B,YAAYrG,EAAUgY,YAGnC,OAAO0oB,CACX,EAEA9iB,QAAS,SAASre,GACd,MAAO,+BAAiCtB,KAAKsB,EACjD,EAEAszC,mBAAoB,WAChB,IAAI11C,EACA+2B,EACA7hC,EAAS9H,KAAK8H,OAElB,IAAI9H,KAAKuoD,YAWT,OAPAvoD,KAAKuoD,aAAc,EAEnB31C,EAAQ9K,EAAOuL,WACfs2B,EAAe,IAAI/zB,EAAahD,EAAO9K,EAAOgL,MAE9C/K,EAAI0sB,iBAAiB3sB,EAAOrB,UAErB,CAAEmM,MAAOA,EAAO+2B,aAAcA,EACzC,EAEA6e,iBAAkB,SAASC,GACvB5gD,EAAS+e,cAAc5mB,KAAK8H,OAAQ2gD,EAAiB9e,cAErD3pC,KAAK8H,OAAOgM,mBAEZ9T,KAAKuoD,aAAc,CACvB,EAEAG,qBAAsB,SAASlD,EAAQ9U,GACnC,IAAI9oC,EAAO5H,KACP8H,EAASF,EAAKE,OACd2gD,EAAmB7gD,EAAK0gD,qBAEvBG,IAILjD,EAAOzlD,KAAK6H,EAAME,EAAQ2gD,EAAiB71C,OAE3CuJ,YAAW,WACPu0B,EAAM3wC,KAAK6H,EAAME,EAAQ2gD,EAAiB71C,OAE1ChL,EAAK4gD,iBAAiBC,EAC1B,IACJ,EAEAE,gBAAiB,SAAS/1C,GAGtB,IAFA,IAAI+R,EAAQpS,EAAW6D,UAAUxD,GAExBnQ,EAAI,EAAGA,EAAIkiB,EAAM9jB,OAAQ4B,IAC9BkiB,EAAMliB,GAAGgb,UAAY1V,EAAI+pB,SAASnN,EAAMliB,GAAGgb,YAAckH,EAAMliB,GAAGgb,SAE1E,EAEAmrC,cAAe,SAASh2C,GACpB,IAAIwhB,EAAS,IAAIyQ,EACjBzQ,EAAO+Q,IAAIvyB,GAEX5S,KAAK2oD,gBAAgB/1C,GAErBwhB,EAAO/e,OAAOzC,GAEd5S,KAAK8H,OAAOqL,YAAYP,EAC5B,EAEAi2C,OAAQ,WACJ7oD,KAAK4oD,cAAc5oD,KAAK8H,OAAOuL,WACnC,EAEAy1C,MAAO,WACH9oD,KAAK4oD,cAAc5oD,KAAK8H,OAAOuL,YAC/BrT,KAAK0oD,qBAAqB1nD,EAAEqpB,KAAMrpB,EAAEqpB,KACxC,EAEA0+B,eAAgB,SAASC,GACrB,IAAIC,EAAWjoD,EAAEkqB,WAEbg+B,EAAS,IAAIC,WAUjB,OARMH,aAAgB9nD,OAAOkoD,OAASJ,EAAKK,YACvCL,EAAOA,EAAKK,aAGhBH,EAAOjR,OAASgR,EAASl9B,QAAQ3jB,KAAK6gD,GAEtCC,EAAOI,cAAcN,GAEdC,EAAS99B,SACpB,EAEAo+B,cAAe,SAASv0C,EAAMnV,GAC1B,IAAIurB,EAAO,CAAEpW,KAAMA,GAAQ,IAE3BoW,EAAKpW,KAAOoW,EAAKpW,KAAKvP,QAAQ,UAAW,IAEzCzF,KAAK8H,OAAOpH,QAAQ,QAAS0qB,GAE7BprB,KAAK+U,MAAMqW,EAAKpW,KAAMnV,GAAW,CAAC,EACtC,EAEA2pD,kBAAmB,SAAStgD,GACxB,GAAM,eAAgBhI,UAAYO,EAAQsZ,MAAQtZ,EAAQ+rB,QAAU,IAApE,CAIA,IAAIi8B,EAAgBvgD,EAAEugD,eAAiBvgD,EAAEwgD,cAAcD,eAC3CvoD,OAAOuoD,eAAiB,CAAC,EAEjC/vC,EAAQ+vC,EAAc/vC,OAAS+vC,EAAcjP,MAEjD,OAAOx6C,KAAK2pD,cAAcjwC,EAP1B,CAQJ,EAEAiwC,cAAe,SAASjwC,GACpB,GAAKA,EAAL,CAIA,IAAIk6B,EAAS5yC,EAAEsxB,KAAK5Y,GAAO,SAASykB,GAAQ,MAAO,YAAczqB,KAAKyqB,EAAKz2B,KAAO,IAGlF,IAFW1G,EAAEsxB,KAAK5Y,GAAO,SAASykB,GAAQ,MAAO,eAAiBzqB,KAAKyqB,EAAKz2B,KAAO,IAE1E7G,QAAW+yC,EAAO/yC,OAA3B,CAIA,IAAI4nD,EAAmBzoD,KAAKsoD,qBAE5B,GAAKG,EAgBL,OAZAznD,EAAE4oD,KAAKxyB,MAAMp2B,EAAGA,EAAEuS,IAAIqgC,EAAQ5zC,KAAK+oD,iBAC9Bv9B,KAAK,WACF,IAAIq+B,EAAU/mC,MAAM8H,UAAUtqB,MAAMP,KAAK+2B,WACrC9hB,EAAOhU,EAAEuS,IAAIs2C,GAAS,SAAS3gD,GAC/B,MAAO,aAAeA,EAAEmS,OAAOiH,OAAS,MAC5C,IAAGjJ,KAAK,IAERrZ,KAAKupD,cAAcv0C,GAEnBhV,KAAKwoD,iBAAiBC,EACzB,EAAErgD,KAAKpI,QAEL,CApBP,CAPA,CA4BJ,EAEA8pD,QAAS,SAAS5gD,GAC2B,UAArClJ,KAAK8H,OAAOgL,KAAKgjB,kBAIjB91B,KAAKwpD,kBAAkBtgD,GACvBA,EAAEgU,kBAINld,KAAKspC,qBAELtpC,KAAK0oD,sBACD,SAAqB5gD,EAAQ8K,GACzB,IAAIm3C,EAAgBhiD,EAAIghB,OAAOjhB,EAAOrB,SAAU,MAAO,CAC/CmT,UAAW,oBACXuI,UAAW,WAEf1gB,EAAUjC,EAAM+B,QAAQE,QACxBqR,EAAOhL,EAAOgL,KAYlB,GAVA9S,KAAKgqD,wBAAwBD,EAAej3C,GAE5CA,EAAKgJ,YAAYiuC,GAGbtoD,EAAQwoD,QACRjqD,KAAKkqD,qBAAqBH,EAAen3C,GAIzCnR,EAAQsZ,MAAQtZ,EAAQ+rB,QAAU,GAAI,CACtCtkB,EAAEgU,iBACF,IAAIu1B,EAAI3qC,EAAOwK,cACfmgC,EAAElS,mBAAmBwpB,GACrBjiD,EAAOqL,YAAYs/B,GACnB,IAAIjQ,EAAY16B,EAAOrB,SAASqM,KAAK2vB,kBACrCD,EAAUiB,kBAAkBsmB,GAC5B/oD,EAAE8R,GAAMwH,IAAI,SACZkoB,EAAU7uB,YAAY,SACtB3S,EAAE8R,GAAM4N,GAAG,QAAS1gB,KAAK8pD,QAAQ1hD,KAAKpI,MAC1C,KAAO,CACH,IAAImqD,EAAiBriD,EAAOwK,cAC5B63C,EAAe5pB,mBAAmBwpB,GAClCjiD,EAAOqL,YAAYg3C,EACvB,CAEAv3C,EAAM4tB,gBACV,IACA,SAAoB14B,EAAQ8K,GACxB,IAAew3C,EAAXp1C,EAAO,GAEXlN,EAAOqL,YAAYP,IAEnBw3C,EAAappD,EAAE8G,EAAOgL,MAAMwpB,SAAS,uBAE1BnlB,MAAK,WACZ,IAAI0b,EAAY7yB,KAAK6yB,UAEjBA,GAAa9qB,EAAI4Y,GAAGkS,EAAW,OAC/B9qB,EAAIsN,OAAOwd,GAGf7d,GAAQhV,KAAKmiB,SACjB,IAEAioC,EAAW/0C,SAEXrV,KAAKupD,cAAcv0C,EAAM,CAAEsiC,OAAO,GACtC,KAER,EACA+S,WAAY,SAASnhD,IACbzH,EAAQsZ,MAAQtZ,EAAQyX,QACxBhQ,EAAE0Y,kBACF1Y,EAAEgU,iBAEV,EACAotC,OAAQ,SAASphD,GACb,GAAM,eAAgBhI,OAAtB,CAIA,IAAIqpD,GAAgBrhD,EAAEwgD,eAAiBxgD,GAAGqhD,cAAgB,CAAC,EACvD7wC,EAAQ6wC,EAAa7wC,OAAS6wC,EAAa/P,MAE3Cx6C,KAAK2pD,cAAcjwC,IACnBxQ,EAAEgU,gBANN,CAQJ,EACA8sC,wBAAyB,SAASz8B,EAAMza,GACpC,IAAKrR,EAAQsZ,MAAStZ,EAAQwoD,WAI9B18B,EAAOvsB,EAAEusB,IACJ/c,IAAI,CACL/C,YAAa,MACbb,MAAO,MACPC,OAAQ,MACR0hC,SAAU,SACVic,OAAQ,IACRC,QAAS,MAGThpD,EAAQsZ,MAAM,CAEd,IAAIrU,EAAkB1F,EAAE8R,EAAKkd,cAActpB,iBAE3C6mB,EAAK/c,IAAI,CACLk6C,YAAa,SACbtc,WAAY,SACZuc,YAAa,SACbC,WAAY,SACZrtB,eAAgB,SAEpB,IAAInM,EAAQ1qB,EAAgB8J,IAAI,SAC5B4gB,GACA7D,EAAK/c,IAAI,QAAS4gB,GAEtB,IAAIqM,EAAa/2B,EAAgB8J,IAAI,cACjCitB,GACAlQ,EAAK/c,IAAI,aAAcitB,GAE3B,IAAInzB,EAAW5D,EAAgB8J,IAAI,YAC/BlG,GACAijB,EAAK/c,IAAI,WAAYlG,EAE7B,CACJ,EACA4/C,qBAAsB,SAAS38B,EAAM3a,GACjC,IACIE,EADO9S,KACK8H,OAAOgL,KACnB+3C,EAAa9iD,EAAIsV,OAAOkQ,EAAMza,GAC9Bg4C,EAHO9qD,KAGY+qD,aAAan4C,EAAOE,GAGvCk4C,EAAY,cAFCF,EAAY9vC,KAAO6vC,EAAW7vC,MAEH,OAD3B8vC,EAAY7vC,IAAM4vC,EAAW5vC,KACmB,MAEjEja,EAAEusB,GAAM/c,IAAI,CACR,oBAAqBw6C,EACrBC,UAAaD,GAErB,EACAD,aAAc,SAASn4C,EAAOE,GAC1B,IAGIo4C,EAHApjD,EAAS9H,KAAK8H,OACdg9B,EAAQ/8B,EAAIghB,OAAOjhB,EAAOrB,SAAU,OAAQ,CAAE0b,UAAW,WACzD5N,EAAiB3B,EAAM2B,eAG3B,GAAI3B,EAAM0D,UAAW,CACjB,IAAI60C,EAAkBpjD,EAAI0mB,WAAWla,GACjC42C,IAAoBpjD,EAAI8pB,MAAMtd,IAAyC,IAAtB3B,EAAM6B,aACvD1M,EAAIuQ,aAAawsB,EAAOvwB,GACjB42C,GAAmBv4C,EAAM6B,cAAgBF,EAAe1T,OAC/DkH,EAAIyf,YAAYsd,EAAOvwB,IAEvB3B,EAAMwuB,WAAW0D,GACjBomB,GAAe,EAEvB,MACI32C,EAAiBA,IAAmBzB,EAChCyB,EAAe8a,WAAWzc,EAAM6B,aAAeF,EACnDxM,EAAIuQ,aAAawsB,EAAOvwB,GAG5B,IAAI8I,EAAStV,EAAIsV,OAAOynB,EAAOhyB,GAC3B4a,EAAOoX,EAAMtW,gBACblR,EAAOwnB,EAAMnX,YAIjB,GAFA5lB,EAAIsN,OAAOyvB,GAEPomB,GAAgBnjD,EAAI0mB,WAAWf,IAAS3lB,EAAI0mB,WAAWnR,KAAUvV,EAAI8pB,MAAMnE,KAAU3lB,EAAI8pB,MAAMvU,GAAO,CACtG,IAAI8tC,EAAa19B,EAAK7sB,OACtByc,EAAKvD,KAAO2T,EAAK3T,KAAOuD,EAAKvD,KAC7BnH,EAAM+B,SAAS2I,EAAM8tC,GACrBrjD,EAAIsN,OAAOqY,GAEX9a,EAAMgC,UAAS,GACf9M,EAAOqL,YAAYP,EACvB,CAEA,OAAOyK,CACX,EAEAisB,mBAAoB,SAAS12B,GACzB,IAAI9K,EAAS9H,KAAK8H,OAClB,GAAIA,GAAUA,EAAOjI,QAAQ4T,WAAY,CACrC,IAAIX,EAAOhL,EAAOgL,KAGlB,GAFAF,EAAQA,GAAS9K,EAAOuL,WACxB7T,EAAM6B,GAAGyG,OAAOyT,WAAW+tB,mBAAmB12B,GAC1CA,EAAM2B,iBAAmBzB,GAA8B,IAAtBF,EAAM6B,YAAmB,CAC1D,IACI42C,EADMv4C,EAAKkd,cACGwV,eAAe,UACjC1yB,EAAKwF,aAAa+yC,EAASv4C,EAAKuc,WAAW,IAC3Czc,EAAMutB,eAAekrB,EACzB,CACAvjD,EAAOqL,YAAYP,EACvB,CACJ,EAEA04C,iBAAkB,SAASt+B,EAAOO,GAC9B,IAAIrE,EAAYpW,EAEhB,GAAIka,EACA,OAAOjlB,EAAI2vB,sBAAsBnK,EAAM,CAAC,IAAK,KAAM,QAAUA,EAAKrE,WAMtE,GAHAA,EAAaqE,EAAKrE,WAClBpW,EAAOya,EAAKyC,cAAcld,KAEtB/K,EAAI2rB,SAASxK,GACb,KAAOA,EAAWA,YAAcpW,IAAS/K,EAAIsrB,QAAQnK,EAAWA,aAC5DA,EAAaA,EAAWA,WAIhC,OAAOA,CACX,EAEAnU,MAAO,SAASC,EAAMnV,GAClB,IAII4C,EAAGy3B,EAAG7K,EAAY4lB,EAJlBntC,EAAS9H,KAAK8H,OACd6/C,EAA2B3nD,KAAK2nD,yBAChC4D,GAAe,EACfC,GAAe,EAOnB,GAJAxrD,KAAKspC,uBAELzpC,EAAUF,EAAO,CAAE23C,OAAO,EAAOnyB,OAAO,GAAQtlB,IAEnC2gD,aACT,IAAK/9C,EAAI,EAAGy3B,EAAIl6B,KAAK4nD,SAAS/mD,OAAQ4B,EAAIy3B,EAAGz3B,IACrCzC,KAAK4nD,SAASnlD,GAAGgpD,WAAWz2C,KAC5BA,EAAOhV,KAAK4nD,SAASnlD,GAAG60C,MAAMtiC,IAKtCnV,EAAQy3C,QAIRtiC,GAFAA,EAAOA,EAAKvP,QAAQ,8CAA+C,OAEvDA,QAAQ,0BAA2B,KAMnDuP,GAHAA,EAAOA,EAAKvP,QAAQ,kCAAmC,sBAG3CA,QAAQ,QAAS,WAAWA,QAAQ,QAAS,YAEzD,IAAIunB,EAAQhtB,KAAKqzB,QAAQre,GAEzBlN,EAAOkM,QACP,IAAIpB,EAAQ9K,EAAOuL,WACnBT,EAAM4tB,iBAEF5tB,EAAM2B,gBAAkBzM,EAAOrB,UAC/BmM,EAAM2tB,mBAAmBz4B,EAAOgL,MAGpC,IAAIshB,EAAS,IAAIyQ,EACbC,EAAQ1Q,EAAO2Q,SAASnyB,GAExBmO,EAAS/gB,KAAKsrD,iBAAiBt+B,EAAO8X,GACtC/O,GAAS,EAEb,IAAKtzB,EAAI,EAAGA,EAAIklD,EAAyB9mD,OAAQ4B,IAAK,CAClD,MAAMipD,EAAW/D,EAAyBllD,GACtCkX,EAAM+xC,EAAS/xC,KAAO+xC,EAE1B,GAAI3jD,EAAI4Y,GAAGI,EAAQpH,GAAM,CACrB4xC,GAAe,EACfC,GAAmC,IAApBE,EAAS31B,OACxB,KACJ,CACJ,CAEA,IAAI41B,EAAa5qC,GAAUjZ,EAAOgL,OAAS/K,EAAI4Y,GAAGI,EAAQ,QAAUwqC,EAEhE1rD,EAAQslB,OAASwmC,IAAe3+B,GAASjlB,EAAI2rB,SAAS3S,MACtDnO,EAAMmM,WAAW+lB,GACjBvyB,EAAW4S,MAAMvS,EAAOmO,GAAQ,GAChCgV,GAAS,GAGb,IAAIogB,EAAWn2C,KAAKqoD,eAAerzC,GAEnC,GAAImhC,EAAS1oB,YAAgD,sBAAlC0oB,EAAS1oB,WAAW7T,UAAmC,CAC9E,IAAIgyC,EAAgB,GACpB,IAAKnpD,EAAI,EAAGy3B,EAAIic,EAAS9mB,WAAWxuB,OAAQ4B,EAAIy3B,EAAGz3B,IAC/CmpD,EAAczrD,KAAKg2C,EAAS9mB,WAAW5sB,GAAG0f,WAG9Cg0B,EAAWn2C,KAAKqoD,eAAeuD,EAAcvyC,KAAK,UACtD,CA0BA,GAxBAgW,EAAa8mB,EAAS9mB,WAElBm8B,IACAvW,EAASltC,EAAIiS,KAAKqV,EAAW,IAC7BtnB,EAAIguB,OAAO1G,EAAW,IAElB4lB,GACAriC,EAAMmM,WAAW+lB,EAAM5b,aAI/BloB,EAAEquB,GACGpY,OAAO,SAASkB,SAAS,WAAW+kB,MACpC3zB,KAAK,SAAS4O,SAAS,WAE5BnX,EAAEquB,GAAYlY,MAAK,SAAS7Q,EAAOulD,GAC5B9jD,EAAIsrB,QAAQw4B,KAAS9jD,EAAIyrB,cAAcq4B,IAA0B,KAAlBA,EAAI1pC,WAClD0pC,EAAI/vC,YAAYhU,EAAOrB,SAAS++B,eAAe,UAEvD,IAEA5yB,EAAMwuB,WAAW+U,GAEjBp1B,EAAS/gB,KAAKsrD,iBAAiBt+B,EAAO8X,GAClC/O,EAAQ,CACR,KAAO+O,EAAM5b,YAAcnI,GACvBhZ,EAAIguB,OAAO+O,EAAM5b,YAGrBnhB,EAAIguB,OAAO+O,EAAM5b,WACrB,CAEAnhB,EAAIulB,UAAU1a,EAAM8C,yBACpBovB,EAAMp6B,MAAMgqC,QAAU,SACtB3sC,EAAI8sB,iBAAiB/sB,EAAOrB,UAC5BsB,EAAIisB,SAAS8Q,GACb1Q,EAAO4Q,YAAYpyB,GAEnB,IAAIk5C,EAAWl5C,EAAM8C,wBAAwBwT,YACzCtW,EAAM0D,WAAmC,SAAtBvO,EAAIxF,KAAKupD,IAAwBl5C,EAAM0D,WAAmC,SAAtBvO,EAAIxF,KAAKupD,MAChFl5C,EAAMwtB,cAAcp/B,EAAE8qD,GAAU5jD,QAAQ,SAAS,IACjD0K,EAAMgC,UAAS,IAGnB,IAAIm3C,EAAe/qD,EAAE4R,EAAM8C,wBAAwBwT,YAAYhhB,QAAQ,SAEvE,GAAI6jD,EAAaxsC,IAAI,GAAI,CAKrB,IAJA,IAAIysC,EAAeD,EAAahrC,SAAS2lB,WACrCulB,EAAmBD,EAAanrD,OAAS,EACzCqrD,EAAcF,EAAazsC,IAAI0sC,GAEF,OAA1BC,EAAYzuC,YAAiD,MAA1ByuC,EAAYzuC,WAA+C,KAA1ByuC,EAAYzuC,YACnFwuC,GAAoB,EACpBC,EAAcF,EAAazsC,IAAI0sC,GAG/BC,IAAgBH,EAAaxsC,IAAI,IAAOwsC,EAAapqC,QAAQ,SAAS9gB,QACtEkH,EAAIyf,YAAYzf,EAAIkuB,gBAAgBnuB,EAAOrB,SAAU,KAAMslD,EAAa,GAEhF,CAEAjkD,EAAOqL,YAAYP,EACvB,IAGAu5C,EAAUhrD,EAAMxB,OAAO,CACvBC,KAAM,SAASC,GACXG,KAAKH,QAAUA,GAAW,CAAC,EAC3BG,KAAKosD,aAAe,EACxB,EAEA9U,MAAO,SAAStiC,EAAMq3C,GAClB,IAEI5pD,EAAGy3B,EADHkyB,EAAeC,GADRrsD,KACmCosD,aAG9C,IAAK3pD,EAAI,EAAGy3B,EAAIkyB,EAAavrD,OAAQ4B,EAAIy3B,EAAGz3B,GAAK,EAC7CuS,EAAOA,EAAKvP,QAAQ2mD,EAAa3pD,GAAI2pD,EAAa3pD,EAAI,IAG1D,OAAOuS,CACX,IAGA6yC,EAAgBsE,EAAQxsD,OAAO,CAC/BC,KAAM,SAASC,GACXssD,EAAQrsD,GAAGF,KAAKG,KAAKC,KAAMH,GAE3BG,KAAKosD,aAAe,CAChB,wBAAyB,uBAEjC,EAEAX,WAAY,SAASz2C,GACjB,OAAQhV,KAAKH,QAAQgR,MAAQ,iBAAmB6C,KAAKsB,EACzD,IAGA8yC,EAAaqE,EAAQxsD,OAAO,CAC5BC,KAAM,SAASC,GACXssD,EAAQrsD,GAAGF,KAAKG,KAAKC,KAAMH,GAG3BG,KAAKosD,aAAe,CAChB,oDAFc,IAGd,OAHc,IAId,wBAJc,IAMtB,EAEAX,WAAY,SAASz2C,GACjB,MAAO,8CAAgDtB,KAAKsB,EAChE,IAGA+yC,EAAsBoE,EAAQxsD,OAAO,CACrCC,KAAM,SAASC,GACXssD,EAAQrsD,GAAGF,KAAKG,KAAKC,KAAMH,GAE3BG,KAAKssD,iBAAmB,CACpB,iBAAkB,GAClB,mBAAoB,GACpB,UAAW,IACX,uBAAwB,SACxB,yFAA0F,GAC1F,SAAU,IAEdtsD,KAAKosD,aAAepsD,KAAKssD,iBAAiBv/B,OAAO,CAC7C,+LAAgM,KAChM,YAAa,WACb,UAAW,QACX,cAAe,IACf,iCAAkC,cAClC,gCAAiC,GACjC,sCAAuC,GACvC,sCAAuC,GACvC,YAAa,OACb,kBAAmB,GACnB,4BAA6B,GAC7B,iBAAkB,GAClB,uBAAwB,eACxB,0BAA2B/sB,KAAKusD,iBAChC,uBAAwB,WACxB,sBAAuB,GACvB,kBAAmB,SAASC,EAAIC,GAAM,OAAOA,EAAKD,EAAK,GAAK,GAEpE,EAEAD,iBAAkB,SAAS30B,EAAO80B,EAASthC,GACvC,IACIkT,EADS,yBACK5rB,KAAK0Y,GACnBuhC,EAASvhC,GAAQkT,GAAQA,EAAK,GAElC,OAAIouB,EACO,UACAC,EACA,4BAA8BA,EAAS,KAEvC,QAEf,EAEAlB,WAAY,SAASz2C,GACjB,MAAO,eAAiBtB,KAAKsB,IACtB,oBAAsBtB,KAAKsB,IAC3B,mCAAqCtB,KAAKsB,EACrD,EAEA43C,kBAAmB,SAAS53C,GACxB,OAAOA,EAAKvP,QAAQ,wBAAwB,SAAS2pC,EAAGjrB,GACpD,OAAKA,GAAcA,EAAWyB,QAAQ,QAAU,EACrC,GAGJwpB,CACX,GACJ,EAEAyd,SAAU,SAASxwB,EAAGywB,GAClB,IAGIC,EAHA/3C,EAAOqnB,EAAEla,UACT5Q,EAAOxJ,EAAIyuB,UAAU6F,GAGrB2wB,EAAch4C,EAAK4iB,MAAM,+EACzBq1B,EAASD,GAAeA,EAAY,GACpCE,EAAW,YAAYx5C,KAAKu5C,GAE5BE,EAAgB,SAAS57C,GACzB,OAAOA,EAAK9L,QAAQ,8BAA+B,GACvD,EAQA,OANIunD,IACAD,GAAiB,GAGrB/3C,EAAOA,EAAKvP,QAAQ,iBAAkB,IAAIA,QAAQ,UAAW,MAEvDsnD,GAAkB,sCAAsCr5C,KAAKsB,IAC9D+3C,GAAkB,YAAYr5C,KAAKsB,IACnCi4C,IAAWC,GAAYJ,EACjB,CACHnzC,IAAK,KACLjP,MAAO1K,KAAKotD,yBAAyBD,EAAc57C,KAIvD,6BAA6BmC,KAAKsB,GAC3B,CACH2E,IAAK,KACLjP,MAAO1K,KAAKqtD,uBAAuBF,EAAc57C,UAHzD,CAMJ,EAEA+7C,aAAc,SAASjxB,GACnB,IAAIj2B,EAWJ,OAT2B,GAAvBi2B,EAAEhN,WAAWxuB,QACbuF,EAAUi2B,EAAE5O,WAAWjQ,WAAazV,EAAIuoB,UAAUG,UAAY1oB,EAAIyuB,UAAU6F,GAAKA,EAAE5O,WAAWtL,UAAU1c,QAAQ,uBAAwB,IACxIW,EAAUpG,KAAKutD,gBAAgBnnD,IAE/BA,EAAUpG,KAAKwtD,iBAAiBnxB,GAGpCt0B,EAAIsN,OAAOgnB,GAEJt0B,EAAIghB,OAAOtiB,SAAU,KAAM,CAAE0b,UAAW/b,GACnD,EAEAmnD,gBAAiB,SAASv4C,GACtB,IAAIqnB,EAAIt0B,EAAIghB,OAAOtiB,SAAU,IAAK,CAAE0b,UAAWnN,IAG/C,MAFgB,mBAEFtB,KAAK2oB,EAAE7F,WACVx2B,KAAKwtD,iBAAiBnxB,GAG1BrnB,CACX,EAEAw4C,iBAAkB,SAAShmD,GACvB,IACIjF,EAAOwF,EAAIxF,KAAKiF,GAqBpB,OAnBAO,EAAIsN,OAAO7N,EAAQimB,YAGgB,GAA/BjmB,EAAQimB,WAAWjQ,UACf,kBAAkB9J,KAAKlM,EAAQimB,WAAWhQ,YAC1C1V,EAAIsN,OAAO7N,EAAQimB,YAIvB,kBAAkB/Z,KAAKlM,EAAQimB,WAAWtL,YAC1Cpa,EAAIsN,OAAO7N,EAAQimB,YAGX,KAARlrB,EACU,IAAMA,EAAO,IAAMiF,EAAQ2a,UAAY,KAAO5f,EAAO,IAErDiF,EAAQ2a,SAI1B,EAEAirC,yBAA0B,SAASH,GAC/B,MAAI,sCAAsCv5C,KAAKu5C,GACpC,KACA,KAAKv5C,KAAKu5C,GACV,SAEA,QAEf,EACAI,uBAAwB,SAASJ,GAC7B,IAAIJ,EAAW,KAMf,MALK,MAAMn5C,KAAKu5C,KACZJ,GAAY,SAASn5C,KAAKu5C,GAAU,SAAW,WACnC,cAAcv5C,KAAKu5C,GAAU,QAAU,UAGhDJ,CACX,EAEAY,kBAAmB,SAASz4C,GAOxB,OAJAA,EAAOA,EAAKvP,QAFQ,yEAEe,SAASmyB,EAAO5d,EAAM0zC,GACrD,OAAOluD,EAAMgD,OAAO,uCAAwCwX,EAAM0zC,EAAO91B,EAC7E,GAGJ,EAEA+1B,YAAa,SAASjmD,EAAMq1C,GACxB,OAAOh1C,EAAIghB,OAAOtiB,SAAUiB,EAAM,CAC9BgD,MAAO,CAAEmrC,cAAekH,IAEhC,EAEA/1C,MAAO,SAASyI,GACZ,IAEIlN,EAEA4yC,EACAyY,EACAC,EACAC,EACAC,EACAC,EACAvrD,EAAG45B,EAAG30B,EAAM8iD,EAAQxwC,EAAM8yC,EAV1BmB,EAAgBjtD,EAAEyO,GAAalG,KAAKxB,EAAI+kB,cAAczT,KAAK,MAC3D60C,GAAc,EAEdC,EAAS,CAAC,EAQVC,EAAmB,CAAC,IAAK,KAAM,KAAM,KAAM,KAAM,KAAM,MAG3D,IAAK3rD,EAAI,EAAGA,EAAIwrD,EAAcptD,OAAQ4B,IAAK,CACvC45B,EAAI4xB,EAAcxrD,GAElB,IAAI4rD,GADJvB,EAAW9rD,EAAEq7B,GAAGtiB,QACSC,KAIzB,GAHAzX,EAAOwF,EAAIxF,KAAK85B,MACEr7B,EAAEq7B,GAAG1a,QAAQ,SAAS9gB,OAExC,CAIA,IAAIgsD,EAAW7sD,KAAK6sD,SAASxwB,EAAGywB,GAGhC,KAFAplD,EAAOmlD,GAAYA,EAASlzC,MAEfy0C,EAAiBxoC,QAAQrjB,GAAQ,EACrC85B,EAAEla,UAEIgzB,IAAO4Y,GACd5Y,EAAGr5B,YAAYugB,GAFft0B,EAAIsN,OAAOgnB,QAQnB,IAAI56B,EAAQsZ,KAAZ,CAMA,IAAIuzC,EAAY5mD,EAAO2mD,EAClBF,EAHL3D,EAASsC,EAASY,OAAS3I,WAAW1oB,EAAE3xB,MAAMiqC,YAAc,MAIxDwZ,EAAO3D,GAAU,CAAC,KAGjBoD,GAAcA,EAAa,KAC5BA,EAAapD,EACbqD,EAAYQ,EACZP,EAAa9sD,EAAEyO,GAAalG,KAAK,eAAiBskD,EAAY,MAAM5xC,OAAO,GAC3E+xC,EAAWhuD,KAAK2tD,YAAYjmD,EAAMmlD,EAASniD,OAC3C3C,EAAIuQ,aAAa01C,EAAU3xB,GAC3B6xB,EAAa1D,EACb2D,EAAO3D,GAAQ8D,GAAaN,GAGhCD,EAAeD,IAAezxB,EAE9BriB,EAAOm0C,EAAO3D,GAAQ8D,IAElB9D,EAAS0D,IAAel0C,KACxBA,EAAOha,KAAK2tD,YAAYjmD,EAAMmlD,EAASniD,OACvCyjD,EAAO3D,GAAQ8D,GAAat0C,EAC5Bm7B,EAAGr5B,YAAY9B,IAGnBm7B,EAAKn1C,KAAKstD,aAAajxB,GACvBriB,EAAK8B,YAAYq5B,GAEb4Y,EACAH,EAAaM,GAAc,EAE3BA,EAAa1D,CAnCjB,CAjBA,CAsDJ,CACJ,EAEA+D,iBAAkB,SAAS/mD,GAkBvB,IAjBA,IAeI4Q,EAfA+L,EAAa3c,EAAQ2c,WACrB1hB,EAAI0hB,EAAWtjB,OACf2tD,EAAoB,GAQpBC,EAAuB,SAASr5C,IAPb,SAASA,GAGxB,MAFqB,CAAC,SAAU,aAAc,WAExB6B,QAAO,SAASo2B,GAClC,OAAuC,IAAhCj4B,EAAIsB,OAAOkP,QAAQynB,EAC9B,IAAGxsC,OAAS,CAChB,EAEQ6tD,CAAiBt5C,IACjBo5C,EAAkBruD,KAAKiV,EAAIsB,OAEnC,EAGGjU,KAC4B,WAA3BsF,EAAIxF,KAAK4hB,EAAW1hB,MAIE,WAHtB2V,EAAO+L,EAAW1hB,IACGF,MAEkC,OAArBiF,EAAQiV,UAA0C,OAArBjV,EAAQiV,UACjDrE,EAAK5G,MAAM2T,MAAM,KACnBsV,QAAQg0B,GAG5BjnD,EAAQmnD,oBAAoBxqC,EAAW1hB,KAI3C+rD,EAAkB3tD,OAAS,GAC3B2G,EAAQqU,aAAa,QAAS2yC,EAAkBn1C,KAAK,KAE7D,EAEAu1C,eAAgB,SAASt0B,GACrB,IAAI7B,EAAQ6B,EAAI7B,MACZN,EAAQn3B,EAAEs5B,GAAKpyB,QAAQ,SACvBy7C,EAAWxrB,EAAMmE,SAAS,YAE1B7D,EAAM53B,OAAS,IAER8iD,EAAS9iD,SAChB43B,EAAQkrB,EAASrnB,WACjBqnB,EAAS,GAAGz6B,WAAW8I,YAAY2xB,EAAS,MAGhDA,EAAW3iD,EAAEA,EAAEuS,IAAIklB,GAAO,SAASG,GAC3B,IAAIhsB,EAAQgsB,EAAKhsB,MACjB,OAAIA,GAAiC,IAAxB8Y,SAAS9Y,EAAO,IAClBpN,EAAMgD,OAAO,8BAA+BoK,GAGhD,SACX,IAAGyM,KAAK,MAGEsH,GAAG,cACbgjC,EAAW3iD,EAAE,eAAeif,OAAO0jC,IAGvCA,EAASxnB,UAAUhE,GACvB,EAEA02B,eAAgB,SAASv0B,GACrB,IACI73B,EADAg2B,EAAQ6B,EAAI7B,MAEZq2B,EAAc9tD,EAAEuS,IAAIklB,GAAO,SAASG,GAChC,IAAIrG,EAAQvxB,EAAE43B,GAAM0D,SAAS,KAAKA,SAAS,UAAU,GAErD,GAAI/J,GAA4B,UAAnBxqB,EAAIxF,KAAKgwB,GAClB,OAAOA,CAEf,IAEJ,GAAIu8B,EAAYjuD,QAAU43B,EAAM53B,OAAQ,CACpC,IAAK4B,EAAI,EAAGA,EAAIqsD,EAAYjuD,OAAQ4B,IAChCsF,EAAIguB,OAAO+4B,EAAYrsD,IAO3B,IAJAzB,EAAEs5B,GAAKpyB,QAAQ,SACVqB,KAAK,YAAYmnC,MAAM,mBAAmBxT,MAC1C3zB,KAAK,SAAS0W,OAAOqa,GAErB73B,EAAI,EAAGA,EAAIg2B,EAAM53B,OAAQ4B,IAC1BsF,EAAIytB,UAAUiD,EAAMh2B,GAAI,KAEhC,CACJ,EAEAssD,iBAAkB,SAASt2B,GACvB,IAAIh2B,EAAG+f,EAAGmK,EAAWqiC,EAErB,IAAKvsD,EAAI,EAAGA,EAAIg2B,EAAM53B,OAAQ4B,IAO1B,IANAzC,KAAKuuD,iBAAiB91B,EAAMh2B,IAMvB+f,EAAI,EAAGmK,GAFZqiC,EADOhuD,EAAEy3B,EAAMh2B,IACG65B,SAAS,MAEEz7B,OAAQ2hB,EAAImK,EAAKnK,IACtCA,EAAImK,EAAM,GACV5kB,EAAIyf,YAAYzf,EAAIghB,OAAOtiB,SAAU,MAAOuoD,EAAWxsC,IAG3Dza,EAAIguB,OAAOi5B,EAAWxsC,GAGlC,EAEAysC,gBAAiB,SAASC,GACtB,IAAIzsD,EAAG+f,EAAG6M,EAAY8/B,EAAa70B,EAEnC,IAAK73B,EAAI,EAAGA,EAAIysD,EAAIruD,OAAQ4B,IAIxB,IAFA4sB,GADAiL,EAAM40B,EAAIzsD,IACO4sB,WAEZ7M,EAAI,EAAGA,EAAI6M,EAAWxuB,OAAQ2hB,KAC/B2sC,EAAc9/B,EAAW7M,IAEThF,WAAazV,EAAIuoB,UAAUG,WACvC6J,EAAItI,YAAYm9B,EAIhC,EAEAC,OAAQ,SAAS3/C,GACb,IAEIb,EACA22C,EAAU8J,EAAY5sD,EAAG+f,EAHzB4sC,EAASpuD,EAAEyO,GAAalG,KAAK,SAC7B3B,EAAO5H,KAIX,IAAKyC,EAAI,EAAGA,EAAI2sD,EAAOvuD,OAAQ4B,IAAK,CAIhC,IAFA4sD,EAAa9J,GADb32C,EAAOwgD,EAAO3sD,GAAGmM,MACY,GAExB4T,EAAI,EAAGA,EAAI5T,EAAK/N,OAAQ2hB,IACrB5T,EAAK4T,GAAGiW,MAAM53B,OAASwuD,EAAW52B,MAAM53B,SACxCwuD,EAAazgD,EAAK4T,IAI1B5a,EAAKgnD,eAAeS,GACpBznD,EAAKinD,eAAetJ,GAEpB39C,EAAK2mD,iBAAiBa,EAAO3sD,IAE7BmF,EAAKmnD,iBAAiBK,EAAOpN,GAAGv/C,GAAG8G,KAAK,UAExC3B,EAAKqnD,gBAAgBG,EAAOpN,GAAGv/C,GAAG8G,KAAK,MAC3C,CACJ,EAEAgxB,QAAS,SAAS9qB,GAGd,IAFA,IAAI6/C,EAAStuD,EAAEyO,GAAalG,KAAK,cAExB9G,EAAI,EAAGA,EAAI6sD,EAAOzuD,OAAQ4B,IAC/BsF,EAAIytB,UAAU85B,EAAO7sD,GAAI,KAEjC,EAEA8sD,iBAAkB,SAAS9/C,GACvBzO,EAAEyO,GAAalG,KAAK,KAAK4N,MAAK,WAC1BnW,EAAEhB,MAAMwQ,IAAI,CACRlG,SAAU,GACVmzB,WAAY,KAGXz9B,KAAK+S,aAAa,UAAa/S,KAAK0K,MAAMkrB,SAC3C51B,KAAKk2B,gBAAgB,QAE7B,GACJ,EAEAohB,MAAO,SAAStiC,GACZ,IAAiBvF,EAAb7H,EAAO5H,KACPwvD,EAAUxvD,KAAKH,QA0BnB,OAxBI2vD,EAAQ3+C,MACRmE,EAAOm3C,EAAQrsD,GAAGw3C,MAAMv3C,KAAK6H,EAAMoN,EAAMhV,KAAKssD,kBAC9Ct3C,EAAOpN,EAAKglD,kBAAkB53C,KAG9BA,EAAOw6C,EAAQ7+C,eAAiB3Q,KAAKytD,kBAAkBz4C,GAAQA,EAC/DA,EAAOm3C,EAAQrsD,GAAGw3C,MAAMv3C,KAAK6H,EAAMoN,GACnCA,EAAOpN,EAAKglD,kBAAkB53C,GAE9BvF,EAAc1H,EAAIghB,OAAOtiB,SAAU,MAAO,CAAE0b,UAAWnN,IACvDpN,EAAK2yB,QAAQ9qB,GAET+/C,EAAQ7+C,gBACR/I,EAAKZ,MAAMyI,GAEf7H,EAAKwnD,OAAO3/C,GAER+/C,EAAQ9+C,iBACR9I,EAAK2nD,iBAAiB9/C,GAG1BuF,EAAOvF,EAAY0S,UAAU1c,QAAQ,kCAAmC,OAGrEuP,CACX,IAGAgzC,EAAsBmE,EAAQxsD,OAAO,CACrCC,KAAM,SAASC,GACXssD,EAAQrsD,GAAGF,KAAKG,KAAKC,KAAMH,GAE3BG,KAAKosD,aAAe,CAChB,qCAAsC,GACtC,oCAAqC,MACrC,qBAAsB,KAE9B,EAEAX,WAAY,SAASz2C,GACjB,MAAO,0DAA4DtB,KAAKsB,EAC5E,IAGAy6C,EAAatD,EAAQxsD,OAAO,CAC5B23C,MAAO,SAAStiC,GACZ,IAAIS,EAAY1N,EAAIghB,OAAOtiB,SAAU,MAAO,CAAE0b,UAAWnN,IAEzD,OADAS,EAAYzV,KAAK0vD,SAASj6C,IACT0M,SACrB,EAEAutC,SAAU,SAASj6C,GACf,OAAOA,CACX,IAGAwyC,EAAkBwH,EAAW9vD,OAAO,CACpC+vD,SAAU,SAASj6C,GACf,IAAI9S,EAAO3C,KAAK2vD,cAMhB,OAJA3uD,EAAEyU,GAAWlM,KAAK5G,GAAMwU,MAAK,WACzBpP,EAAIguB,OAAO/1B,KACf,IAEOyV,CACX,EAEAk6C,YAAa,WACT,GAAI3vD,KAAKH,QAAQiR,KACb,MAAO,MAEf,EAEA26C,WAAY,WACR,OAAOzrD,KAAKH,QAAQiR,IACxB,IAGAo3C,EAAkBuH,EAAW9vD,OAAO,CACpC+vD,SAAU,SAASj6C,GACf,IAAI0O,EAAankB,KAAK4vD,cAItB,OAHY5uD,EAAEyU,GAAWlM,KAAK,IAAM4a,EAAW9K,KAAK,OAAS,KACvDmR,WAAWrG,EAAW9K,KAAK,MAE1B5D,CACX,EAEAm6C,YAAa,WACT,OAAI5vD,KAAKH,QAAQ2Q,IACN,CAAC,QAAS,SAGd,EACX,EAEAi7C,WAAY,WACR,OAAOzrD,KAAKH,QAAQ2Q,GACxB,IAGAq/C,EAAgB,WAChB7vD,KAAKuR,KAAO,GACZvR,KAAKmlC,IAAM,SAAS5zB,GAChBvR,KAAKuR,MAAQA,CACjB,CACJ,EAEIu+C,EAAgB3uD,EAAMxB,OAAO,CAC7BC,KAAM,SAASmwD,GACX/vD,KAAK+vD,WAAaA,GAAc,CACxBx+C,KAAM,IACNy+C,KAAM,SAEdhwD,KAAKiwD,MAAQ,GACbjwD,KAAKkwD,gBAAkB,GACvBlwD,KAAKmwD,WACT,EAEAC,WAAY,SAAS7+C,GACK,IAAlBA,EAAKiM,WACLjM,EAAOA,EAAKkM,WAGhBzd,KAAKqwD,cAAclrB,IAAI5zB,EAC3B,EAEA++C,sBAAuB,SAAS/+C,GAC5BvR,KAAKkwD,gBAAgB/vD,KAAKoR,EAC9B,EAEAg/C,qBAAsB,WACdvwD,KAAKkwD,gBAAgBrvD,SACrBb,KAAKowD,WAAWpwD,KAAKkwD,gBAAgB72C,KAAK,MAC1CrZ,KAAKkwD,gBAAkB,GAE/B,EAEAM,QAAS,WACLxwD,KAAKuwD,uBACLvwD,KAAKmwD,WACT,EAEAn7C,KAAM,WACF,IAAI+6C,EAAa/vD,KAAK+vD,WAClBztC,EAAS,GACT2tC,EAAQjwD,KAAKiwD,MAEjBjwD,KAAKuwD,uBAEL,IAAK,IAAI9tD,EAAI,EAAGguD,EAAKR,EAAMpvD,OAAQ6vD,EAAMD,EAAK,EAAGhuD,EAAIguD,EAAIhuD,IAAK,CAE1D,IADA,IAAIutD,EAAOC,EAAMxtD,GACR+f,EAAI,EAAGmuC,EAAKX,EAAKnvD,OAAQ+vD,EAAMD,EAAK,EAAGnuC,EAAImuC,EAAInuC,IAAK,CAEzDF,GADW0tC,EAAKxtC,GAAGjR,KAEfiR,IAAMouC,IACNtuC,GAAUytC,EAAWx+C,KAE7B,CACI9O,IAAMiuD,IACNpuC,GAAUytC,EAAWC,KAE7B,CAEA,OAAO1tC,CACX,EAEA6tC,UAAW,WACPnwD,KAAKqwD,cAAgB,IAAIR,EACzB7vD,KAAKgwD,KAAO,GACZhwD,KAAKgwD,KAAK7vD,KAAKH,KAAKqwD,eACpBrwD,KAAKiwD,MAAM9vD,KAAKH,KAAKgwD,KACzB,IAGAa,EAAgB1vD,EAAMxB,OAAO,CAC7BC,KAAM,SAASsiC,GACXliC,KAAKkiC,SAAWA,CACpB,EACA4B,UAAW,SAASvW,GAChB,GAAKA,EAAL,CAIA,IAAIujC,EAAc9wD,KAAKkiC,SAAS3U,GAE5BgF,EAAQhF,EAAKE,YACZqjC,GAAev+B,GAChBvyB,KAAK8jC,UAAUvR,GAGnBvyB,KAAK8jC,UAAUvW,EAAKI,YATpB,CAUJ,IAGAw6B,EAAqBgE,EAAQxsD,OAAO,CACpCC,KAAM,SAASC,GACXssD,EAAQrsD,GAAGF,KAAKG,KAAKC,KAAMH,GAC3BG,KAAK+wD,SAAU,EACf/wD,KAAKgxD,WAAa,IAAIH,EAAc7wD,KAAKixD,UAAU7oD,KAAKpI,MAC5D,EAEAs3C,MAAO,SAAStiC,GACZ,IAAIS,EAAY1N,EAAIghB,OAAOtiB,SAAU,MAAO,CAAE0b,UAAWnN,IAEzD,OAAOhV,KAAK0vD,SAASj6C,EACzB,EAEAi6C,SAAU,SAASj6C,GAMf,OALAzV,KAAK+vD,WAAa/vD,KAAKkxD,uBACvBlxD,KAAKmxD,UAAY,IAAIrB,EAAc9vD,KAAK+vD,YACxC/vD,KAAKgxD,WAAWltB,UAAUruB,EAAUgY,YACpCztB,KAAK+wD,SAAU,EAER/wD,KAAKmxD,UAAUn8C,MAC1B,EAEAi8C,UAAW,SAAS1jC,GAChB,GAAIxlB,EAAI0mB,WAAWlB,GAAO,CACtB,GAAIxlB,EAAImrB,aAAa3F,GACjB,OAEJvtB,KAAKmxD,UAAUf,WAAW7iC,EAAK9P,UAAUhY,QAAQ,KAAMzF,KAAK+vD,WAAWC,OACvEhwD,KAAK+wD,SAAU,CACnB,KAAO,IAAIhpD,EAAIsrB,QAAQ9F,IAASvtB,KAAK+wD,QAEjC,OADa/wD,KAAKuhB,QAAQxZ,EAAIxF,KAAKgrB,KAAUvtB,KAAKuhB,QAAQyL,OAC5ChtB,KAAMutB,GACbxlB,EAAI6rB,KAAKrG,IAChBvtB,KAAKmxD,UAAUf,WAAWpwD,KAAK+vD,WAAWC,KAC9C,CACJ,EAEAvE,WAAY,WACR,IAAIpmC,EAAIrlB,KAAKH,QACb,OAAOwlB,EAAE9U,KAAO8U,EAAE5U,YACtB,EAEAygD,qBAAsB,WAClB,OAAIlxD,KAAKH,QAAQ0Q,IACN,CAAEgB,KAAM,IAAKy+C,KAAM,KAEnB,CAAEz+C,KAAM,IAAKy+C,KAAM,QAElC,EAEAzuC,QAAS,CACL20B,GAAIl1C,EAAEqpB,KACNoS,GAAIz7B,EAAEqpB,KACN8N,MAAOn3B,EAAEqpB,KACT+mC,MAAOpwD,EAAEqpB,KACTgnC,MAAOrwD,EAAEqpB,KACTm5B,GAAI,SAAS8N,EAAS/jC,GAClB,IAEIgkC,EAFY,IAAIpJ,EAAmB,CAAE53C,KAAK,IAErBm/C,SAASniC,GAGlC,OAFA+jC,EAAQH,UAAUb,sBAAsBiB,IAEjC,CACX,EAEAvkC,MAAO,SAASskC,GACZA,EAAQH,UAAUX,SACtB,KAIJpI,EAAgB+D,EAAQxsD,OAAO,CAC/B23C,MAAO,SAAStiC,GACZ,OAAOhV,KAAKH,QAAQmQ,OAAOgF,EAC/B,EAEAy2C,WAAY,WACR,MAAuC,mBAAzBzrD,KAAKH,QAAc,MACrC,IAGJF,EAAOkI,EAAU,CACbe,UAAWA,EACXujD,QAASA,EACTtE,cAAeA,EACfC,WAAYA,EACZC,oBAAqBA,EACrBC,oBAAqBA,EACrBC,gBAAiBA,EACjBC,gBAAiBA,EACjBC,mBAAoBA,EACpB2H,cAAeA,EACf1H,cAAeA,GAGlB,CA/zCD,CA+zCGlnD,OAAO1B,MAAM2sB,QAEhB,SAAUnrB,GAGV,IAAIxB,EAAQ0B,OAAO1B,MACf2B,EAAQ3B,EAAM2B,MACd0G,EAAWrI,EAAM6B,GAAGyG,OACpByK,EAAa1K,EAAS0K,WACtBxK,EAAMF,EAASG,IACf4N,EAAe/N,EAAS+N,aACxBivB,EAASh9B,EAASg9B,OAClBpjC,EAAUjC,EAAM+B,QAAQE,QACxBm6B,EAAU,oCACVj8B,EAASqB,EAAErB,OACX2wB,EAAYvoB,EAAIuoB,UAChBkhC,EAAmB,kBAOvB,SAASC,EAAWlkC,EAAM6F,EAAWiC,GAGjC,IAFA,IAAIlC,EAAU5F,EAAOA,EAAK6F,GAAa,KAEhCD,IAAYkC,EAAUlC,IACzBA,EAAUA,EAAQC,GAGtB,OAAOD,CACX,CAEA,IAAIu+B,EAAa,gBACbC,EAAqB,6BACrBC,EAAgBD,EAAqB,IAAMD,EAC3CG,EAAU,SAASj/C,GAAS,OAAQA,EAAM0D,WAAatV,EAAE4R,EAAM8C,yBAAyBiL,GAAGgxC,EAAqB,EAEhHG,EAAqB3wD,EAAMxB,OAAO,CAClC0V,OAAQ,SAASzC,GACb,IACIwhB,EAAS,IAAIyQ,EACjBzQ,EAAO+Q,IAAIvyB,GAAO,GAElB,IAAI+R,EAAQpS,EAAWs0B,OAAOj0B,GAAO,SAAS2a,GAAQ,OAAOvsB,EAAEusB,GAAM5M,GAAGixC,EAAgB,IACpFt9C,EAAM/B,EAAWutB,kBAAkBltB,GACnC8U,EAAQ0M,EAAO1M,MACfwV,EAAM9I,EAAO8I,IACb60B,EAAaL,EAAWvsC,MAAM,KAC9B6sC,EAAYjqD,EAAIgoB,aAAarI,EAAOqqC,GACpCE,EAAUlqD,EAAIgoB,aAAamN,EAAK60B,GAVzB/xD,KAWNkyD,eAAexqC,EAAOsqC,GAAW,GAX3BhyD,KAYNkyD,eAAeh1B,EAAK+0B,GAAS,GAClCjxD,EAAE2jB,GAAOxN,MAAK,SAAS1U,EAAG8qB,KACtBA,EAAOvsB,EAAEusB,IACH5M,GAAG+wC,GAAcnkC,EAAOA,EAAKhkB,KAAKmoD,IAAav6C,MAAK,SAASqL,EAAGoW,GAClEA,EAAKzW,UAAY,UACrB,GACJ,IACI6vC,IAActqC,EAAM8G,iBACpBzmB,EAAIuQ,aAAahE,EAAIkxB,eAAe,UAAW9d,GAE/CuqC,IAAY/0B,EAAIvP,aAChB5lB,EAAIyf,YAAYlT,EAAIkxB,eAAe,UAAWtI,GAE9C80B,EACAp/C,EAAMutB,eAAezY,GACd/C,EAAM,KAEbqtC,GADAA,EAAYhxD,EAAE2jB,EAAM,KACEhE,GAAG+wC,GAAcM,EAAYA,EAAUzoD,KAAKmoD,GAAY10C,SAChEnc,QACV+R,EAAM+B,SAASq9C,EAAUzyC,IAAI,GAAI,GAIzC3M,EAAMgC,UAAS,GAEf7M,EAAIsN,OAAOqS,GACX3f,EAAIsN,OAAO6nB,EACf,EACAg1B,eAAgB,SAASxqC,EAAOzM,EAAKiuB,GACjC,GAAIjuB,EAAK,CACL,IACIqC,EADA6V,EAAU+V,EAAW,cAAgB,kBAErCipB,EAAU,SAAS5kC,GACf,KAAOA,IAASA,EAAK4F,IACjB5F,EAAOA,EAAKrE,WAEhB,OAAOqE,GAAQvsB,EAAE2U,SAASsF,EAAKsS,GAAQA,EAAK4F,GAAW,IAC3D,EAEJ,IADAzL,EAAQyqC,EAAQzqC,GACTA,GACHpK,EAAO60C,EAAQzqC,GACf3f,EAAIsN,OAAOqS,GACXA,EAAQpK,CAEhB,CACJ,IAGA0I,EAAgB7kB,EAAMxB,OAAO,CAC7BC,KAAM,SAASkI,GACX9H,KAAK8H,OAASA,CAClB,EAEAwU,QAAS,SAASpT,GACd,IAAItB,EAAO5H,KACP8H,EAASF,EAAKE,OACdkL,EAAWlL,EAAOkL,SAClB01B,EAAc11B,EAAS01B,YAAYx/B,GACnCkpD,EAAMzyD,EAAOqB,EAAEqxD,QAASnpD,GAI5B,GAFAtB,EAAKE,OAAOpH,QAAQ,UAAW0xD,GAE3BA,EAAIE,qBAEJ,OADAppD,EAAEgU,kBACK,EAGX,IAAKk1C,EAAIE,sBAAwB5pB,IAAgB11B,EAASC,qBAAsB,CAC5E,IAAIL,EAAQ9K,EAAOuL,WACfP,EAAOhL,EAAOgL,KAGlB,GAFAlL,EAAKyhC,kBAAoB,IAAIzzB,EAAahD,EAAOE,GAE7C++C,EAAQj/C,GACiB,IAAIk/C,EAAmBhqD,GAC7BuN,OAAOzC,GAC1B9K,EAAOqL,YAAYP,GAOvB,GAJInR,EAAQwoD,SAAWr3C,EAAM0D,WAhHzC,SAAkBiX,EAAM3a,GACpB,OAAOA,EAAM2B,iBAAmBgZ,GAAQ3a,EAAM4B,eAAiB+Y,GACrC,IAAtB3a,EAAM6B,aAAqB7B,EAAM8B,WAAa6Y,EAAK8B,WAAWxuB,MACtE,CA6GsD83C,CAAS7lC,EAAMF,KACrDE,EAAKqP,UAAY,IAGjBra,EAAO2L,YAAc5L,EAAS0T,WAAWC,kBAAkB5I,GACpC,IAAI/K,EAASke,iBAAiBje,GACpCyqD,gBAAgB3/C,GAQrC,OALAI,EAASw/C,aAAY,WACjB5qD,EAAK6qD,iBACL7qD,EAAK2iC,gBAAkB1iC,EAAS+e,cAAc9e,EAAQF,EAAKyhC,kBAC/D,KAEO,CACX,CAEA,OAAO,CACX,EAEArrB,MAAO,SAAS9U,GACZ,IAAI8J,EAAWhT,KAAK8H,OAAOkL,SAI3B,OAFAhT,KAAK8H,OAAOpH,QAAQ,QAASwI,KAEzB8J,EAASC,uBACTD,EAASyH,aACF,EAIf,EAEAg4C,eAAgB,WACZ,IAAIllC,EAAOvtB,KAAK8H,OAAOuL,WAAWqC,wBAE7B3N,EAAI0qB,UAAUlF,KACO,IAAlBA,EAAK/P,WACL+P,EAAOA,EAAKrE,YAGZnhB,EAAIkqB,cAAc1E,KAGlBA,EAAKmlC,YAAc3qD,EAAI+pB,SAASvE,EAAKmlC,aACrC3qD,EAAIguB,OAAOxI,IAGvB,IAGAxH,EAAmB5kB,EAAMxB,OAAO,CAChCC,KAAM,SAASkI,GACX9H,KAAK8H,OAASA,CAClB,EACA6qD,UAAW,SAASl9C,GAChB,IAAIqvB,EAAQ/8B,EAAIghB,OAAO/oB,KAAK8H,OAAOrB,SAAU,KAY7C,OATKjH,EAAM+B,QAAQE,QAAQ0X,QAAU1D,EAAUgY,YAC3ChY,EAAUgY,WAAWjQ,WAAa8S,EAAUC,eAE5C9a,EAAYA,EAAUgY,YAG1B1lB,EAAIgtB,SAAStf,EAAWqvB,EAAO,GAC/B/8B,EAAIgqB,aAAa+S,EAAMtW,iBACvBzmB,EAAIgqB,aAAa+S,EAAMnX,aAChBmX,CACX,EACA8tB,cAAe,SAAS9tB,GACpB,IAAIlyB,EAAQ5S,KAAK8H,OAAOwK,eAEnBwyB,EAAMnX,aAAe5lB,EAAI0mB,WAAWqW,EAAMtW,iBAC3C5b,EAAM+B,SAASmwB,EAAMtW,gBAAiBsW,EAAMtW,gBAAgB3tB,QAE5D+R,EAAMwtB,cAAc0E,GAGxBlyB,EAAMgC,UAAS,GACf5U,KAAK8H,OAAOqL,YAAYP,GACxB7K,EAAIsN,OAAOyvB,EACf,EACA+tB,cAAe,SAASjgD,GACpB,IAAI2a,EAAO3a,EAAM4B,aACbwY,EAAQjlB,EAAI2vB,sBAAsBnK,EAAMxlB,EAAI+kB,eAEhD,GAAIE,GAASnlB,EAAS0K,WAAW20B,QAAQt0B,EAAOoa,GAAQ,CAEpD,IAAI1P,EAAOvV,EAAIuV,KAAK0P,GACpB,IAAK1P,GAA0B,KAAlBvV,EAAIxF,KAAK+a,GAClB,OAAO,EAGX,IAAIw1C,EAAmB/qD,EAAI2qB,sBAAsBpV,GAAM,GACvDw1C,EAAoBA,GAAoB/qD,EAAI2rB,SAASo/B,GAAqBA,EAAmBx1C,EAC7F,IAAIwnB,EAAQ9kC,KAAK2yD,UAAUG,GAM3B,OAJA9yD,KAAK+yD,OAAO/lC,EAAO1P,GAEnBtd,KAAK4yD,cAAc9tB,IAEZ,CACX,CAEA,OAAO,CACX,EACAkuB,gBAAiB,SAASpgD,GAKtB,IAJA,IAAIyK,EAASzK,EAAM6B,YACf8Y,EAAO3a,EAAM2B,eACbhD,EAAOgc,EAAK9P,UACZoZ,EAAQ,EACLxZ,EAASwZ,GAAS,GAAiC,UAA5BtlB,EAAK8L,EAASwZ,EAAQ,IAChDA,IAGAA,EAAQ,IACRtJ,EAAKoC,WAAWtS,EAASwZ,EAAOA,GAEhCjkB,EAAM+B,SAAS4Y,EAAMnF,KAAKF,IAAI,EAAG7K,EAASwZ,IAC1CjkB,EAAMgC,UAAS,GAEf5U,KAAK8H,OAAOqL,YAAYP,GAEhC,EACAqgD,iBAAkB,SAASrgD,GACvB,IAII4b,EAJAjB,EAAO3a,EAAM2B,eACb4gC,EAAKptC,EAAI2vB,sBAAsBnK,EAAM,CAAC,OACtCP,EAAQjlB,EAAI2vB,sBAAsBnK,EAAM,sBAAsBpI,MAAM,MACpErd,EAAS9H,KAAK8H,OAGlB,GAAIC,EAAI0mB,WAAWlB,GAAO,CACtB,GAAI3a,EAAM0D,WAAa,gBAAgB5C,KAAK6Z,EAAK9P,WAI7C,OAHA7K,EAAM+B,SAAS4Y,EAAM,GACrB3a,EAAMstB,OAAO3S,EAAMA,EAAK1sB,QACxBiH,EAAOqL,YAAYP,IACZ,EAEX5S,KAAKgzD,gBAAgBpgD,EACzB,CAEA4b,EAAkBijC,EAAWzkC,EAAOwkC,GAAkB,SAASr+B,GAC3D,OAAQprB,EAAI8c,gBAAgBsO,EAChC,IAGIvgB,EAAM0D,WAAa1D,EAAM6B,cAAgB7B,EAAM8B,WAAa9B,EAAM6B,YAAc,IAChF7B,EAAM6B,YAAc,EACpB7B,EAAM8B,UAAY,EAClB5M,EAAOqL,YAAYP,IAGvB,IAAIsgD,EAAY/d,GAAMttC,EAAS0K,WAAW00B,UAAUr0B,EAAOuiC,GACvDge,EAAUhe,GAAMn0C,EAAEm0C,GAAI7uC,QACtB8sD,EAAoBF,GAAaC,EAAU,EAM/C,GALIC,IACApmC,EAAQmoB,EACR3mB,EAAkBzmB,EAAI2lB,KAAKynB,IAG3BnoB,GAASwB,GAAmBzmB,EAAI4Y,GAAG6N,EAAiB,UAAY3mB,EAAS0K,WAAW00B,UAAUr0B,EAAOoa,GAIrG,MAHwB,KAApBA,EAAMwJ,YACNxJ,EAAM7K,UAAY,WAEf,EAIX,GAAIta,EAAS0K,WAAW00B,UAAUr0B,EAAOoa,IAAUtH,SAASsH,EAAMtiB,MAAMiqC,WAAW,IAAM,EAErF,OADA7sC,EAAO4K,KAAK,YACL,EAIX,GAAKsa,GAASwB,GAAmB3mB,EAAS0K,WAAW00B,UAAUr0B,EAAOoa,IAAWomC,EAAmB,CAChG,IAAIN,EAAmB/qD,EAAI2qB,sBAAsB1F,GAAO,GACxD8lC,EAAoBA,GAAoB/qD,EAAI2rB,SAASo/B,KAAsB/qD,EAAI4rB,MAAMm/B,GAAqBA,EAAmB9lC,EAE7H,IAAI8X,EAAQ9kC,KAAK2yD,UAAUG,GAI3B,OAHA9yD,KAAK+yD,OAAOvkC,EAAiBxB,GAC7BhtB,KAAK4yD,cAAc9tB,IAEZ,CACX,CAGA,GAAIouB,GAAyB,IAAZC,EAAe,CAC5B,IAAI5gC,EAAQ4iB,EAAG1nB,WACV8E,IACD4iB,EAAGhzB,UAAYta,EAAS4iB,oBACxB8H,EAAQ4iB,EAAG1nB,YAGf,IAAImc,EAAY,IAAI/hC,EAASusC,cAAcrsC,EAAIxF,KAAK4yC,EAAGjsB,YAAa,KAYpE,OAXAtW,EAAM2tB,mBAAmB4U,GACzBvL,EAAUrpB,OAAO3N,GAEb7K,EAAIkqB,cAAcM,GAClB3f,EAAMutB,eAAe5N,GAErB3f,EAAM+B,SAAS4d,EAAO,GAG1BzqB,EAAOqL,YAAYP,IAEZ,CACX,CAEA,IAAIygD,EAAiB9lC,EAAK8B,WAAWzc,EAAM6B,YAAc,GACrDy8B,EAAYt+B,EACZi+B,EAASwiB,GAAkBtrD,EAAI2vB,sBAAsB27B,EAAgB,CAAC,MACtEC,EAAe7B,EAAW4B,GAAkB9lC,EAAMikC,GAAkB,SAASr+B,GAC7E,OAAQprB,EAAI0mB,WAAW0E,KAAcprB,EAAI8pB,MAAMsB,IAAYA,EAAQtyB,OAAS,CAChF,IAUA,IATIgwC,IAAkC,IAAtBj+B,EAAM6B,aAAqB4+C,IAAmBtrD,EAAI4Y,GAAG2yC,EAAc,QAC/EziB,EAASA,GAAUyiB,GACnBpiB,EAAYppC,EAAOwK,eACTqC,SAASk8B,EAAQA,EAAOxhB,WAAWxuB,QAC7CqwC,EAAUt8B,UAAS,KAGvBi8B,EAASA,GAAU9oC,EAAI2vB,sBAAsB27B,GAAkBniB,EAAU38B,eAAgB,CAAC,QAC9D1M,EAAS0K,WAAW20B,QAAQgK,EAAWL,GAClD,CACb,IAAIzwC,EAAU,IAAIyH,EAASynC,cAAc,CAAE18B,MAAOs+B,EAAWp+B,KAAMhL,EAAOgL,KAAMW,aAAc3L,EAAO2L,aACrG3L,EAAO6L,YAAYvT,GACnB0H,EAAOgM,kBACX,CACA,OAAO,CACX,EACAy/C,iBAAkB,SAAS3gD,GACvB,IAII4gD,EAJA9f,EAAW9gC,EAAM8C,wBACjByiB,EAAQpwB,EAAIG,QAAQwrC,EAAU,SAC9B6K,EAAwB12C,EAAS4iB,oBACjC3iB,EAAS9H,KAAK8H,OAGlB,GAAI+pD,EAAQj/C,GAIR,OAHyB,IAAIk/C,EAAmBhqD,GAC7BuN,OAAOzC,GAC1B9K,EAAOqL,YAAYP,IACZ,EAGX,IAAIwhB,EAAS,IAAIyQ,EACjBzQ,EAAO+Q,IAAIvyB,GAAO,GAEdA,EAAM8C,0BAA4B5N,EAAOgL,MACzC9S,KAAKyzD,sBAAsBr/B,EAAQxhB,GAGnC9K,EAAO2L,YACPzT,KAAK2zC,kBAAkBvf,GAG3Bp0B,KAAK0zD,6BAA6Bt/B,EAAQxhB,GAE1CA,EAAMwtB,cAAchM,EAAO1M,OAC3B9U,EAAMytB,aAAajM,EAAO8I,KAE1B,IAAIxV,EAAQ9U,EAAM2B,eACd2oB,EAAMtqB,EAAM4B,aA0ChB,OAxCA5B,EAAM4tB,iBAEkC,OAApCtD,EAAInb,QAAQ4xC,qBAAgC5rD,EAAI0qB,UAAUyK,KAC1DtqB,EAAMmM,WAAWme,GACjBtqB,EAAM4tB,kBAGNrI,GAA6B,KAApBn3B,EAAEm3B,GAAO5mB,SAClBqB,EAAMmM,WAAWoZ,GACjBvlB,EAAM4tB,kBAGVkT,EAAW9gC,EAAM8C,wBAEU,MAAvB3N,EAAIxF,KAAKmxC,IAA4C,KAAvBA,EAASvxB,YACvCuxB,EAASvxB,UAAYo8B,EACrB3rC,EAAM+B,SAAS++B,EAAU,IAG7B1zC,KAAK4zD,MAAMlsC,EAAOwV,GAElBn1B,EAAIyf,YAAY1f,EAAOrB,SAAS++B,eAAe,UAAWpR,EAAO1M,OACjE0M,EAAO/e,OAAOzC,GAEd8U,EAAQ9U,EAAM2B,eACS,MAAnBxM,EAAIxF,KAAKmlB,KACTA,EAAQA,EAAM2H,WAAWjH,KAAKF,IAAI,EAAGtV,EAAM6B,YAAc,IACzD7B,EAAM+B,SAAS+S,EAAO3f,EAAIqnB,cAAc1H,KAG5C9U,EAAMgC,UAAS,GAEf9M,EAAOqL,YAAYP,GAEnB4gD,EAAsB9rC,EAAMlL,eAAiBkL,EAAMwB,WAE/CnhB,EAAI0mB,WAAW/G,KAAW3f,EAAI0qB,UAAU+gC,IACxCxzD,KAAKgzD,gBAAgBpgD,IAGlB,CACX,EACA+gC,kBAAmB,SAASvf,GACxB,IAAIiS,EAAkBx+B,EAAS0T,WAAW8qB,gBACtCwtB,EAAiBxtB,EAAgBjS,EAAO1M,OACxCosC,EAAeztB,EAAgBjS,EAAO1M,OACtCmsC,GACA9rD,EAAIuQ,aAAa8b,EAAO1M,MAAOmsC,GAE/BC,GACA/rD,EAAIyf,YAAY4M,EAAO8I,IAAK42B,GAE5BD,GACA9rD,EAAIsN,OAAOw+C,GAEXC,GAAgBA,EAAa5qC,YAC7BnhB,EAAIsN,OAAOy+C,EAEnB,EACAL,sBAAuB,SAASr/B,EAAQxhB,GACpC,IAAI0pB,EAAW1pB,EAAM8C,wBAAwB4mB,SACzC0J,EAAc1J,EAAS,GACvB2J,EAAY3J,EAASA,EAASz7B,OAAS,GAE3Cb,KAAK+zD,YAAY3/B,EAAQxhB,EAAOozB,EAAaC,EACjD,EACAytB,6BAA8B,SAASt/B,EAAQxhB,GAC3C,IAAI8U,EAAQ0M,EAAO1M,MACfse,EAAchlC,EAAE0mB,GAAOxf,QAAQ,KAAKqX,IAAI,GACxC2d,EAAM9I,EAAO8I,IACb+I,EAAYjlC,EAAEk8B,GAAKh1B,QAAQ,KAAKqX,IAAI,GAExCvf,KAAK+zD,YAAY3/B,EAAQxhB,EAAOozB,EAAaC,EACjD,EACA8tB,YAAa,SAAS3/B,EAAQxhB,EAAOozB,EAAaC,GAC9C,IAAIve,EAAQ0M,EAAO1M,MACfwV,EAAM9I,EAAO8I,IAEb8I,GAAezzB,EAAW00B,UAAUr0B,EAAOozB,IAC3Cj+B,EAAIuQ,aAAaoP,EAAOse,GAGxBC,GAAa1zB,EAAW20B,QAAQt0B,EAAOqzB,IACvCl+B,EAAIyf,YAAY0V,EAAK+I,EAE7B,EACA+tB,MAAO,SAASzmC,GACZ,KAAOA,GAA0B,QAAlBxlB,EAAIxF,KAAKgrB,IAAmBA,EAAKrE,YAA2C,QAA7BnhB,EAAIxF,KAAKgrB,EAAKrE,aACxEqE,EAAOA,EAAKrE,WAGhB,OAAOqE,CACX,EACAqmC,MAAO,SAASlsC,EAAOwV,IACnBxV,EAAQ1nB,KAAKg0D,MAAMtsC,MACnBwV,EAAMl9B,KAAKg0D,MAAM92B,KAEGn1B,EAAI4Y,GAAGuc,EAAK,MAC5Bl9B,KAAK+yD,OAAOrrC,EAAOwV,EAE3B,EACA61B,OAAQ,SAASkB,EAAMl8C,GAGnB,IAFAhQ,EAAIiwB,oBAAoBi8B,GAEjBA,GAAQl8C,EAAI0V,YACM,GAAjBwmC,EAAKz2C,UACLy2C,EAAOlsD,EAAIiS,KAAKi6C,GAAQA,EAAK33B,SAAS23B,EAAK33B,SAASz7B,OAAS,GAAKozD,IAG9DA,EAAKn4C,YAAY/D,EAAI0V,YAElBwmC,EAAKz2C,WAAa8S,EAAUG,UACnCzwB,KAAKk0D,mBAAmBD,EAAMl8C,EAAI0V,YAElCwmC,EAAK/qC,WAAWpN,YAAY/D,EAAI0V,YAIxC1lB,EAAIsN,OAAO0C,EACf,EAEAm8C,mBAAoB,SAAShvB,EAAUivB,GAC/BjvB,GAAYA,EAAS1nB,WAAa8S,EAAUG,YACxCyU,EAASvX,aAAe3tB,KAAKo0D,SAASlvB,EAASvX,aAC/C5lB,EAAIyf,YAAY2sC,EAAcjvB,EAASvX,aAGvC5lB,EAAIyf,YAAY2sC,EAAcjvB,GAG1C,EAEAkvB,SAAU,SAAS5sD,GACf,OAAOxG,EAAEwG,GAASmZ,GAAG,IACzB,EAEArE,QAAS,SAASpT,GACd,IAAIwyC,EAAQrS,EACRvhC,EAAS9H,KAAK8H,OACd8K,EAAQ9K,EAAOuL,WACfuJ,EAAU1T,EAAE0T,QACZlb,EAAOlC,EAAMkC,KACbinC,EAAY/rB,IAAYlb,EAAKmb,UAC7B+rB,EAAMhsB,GAAWlb,EAAKob,OAEtBhV,EAAO2L,YAAc3L,EAAO2L,WAAW6I,QAAQpT,EAAG0J,MAIjD+1B,IAAaC,GAASh2B,EAAM0D,UAEtBqyB,EACP+S,EAAS,mBACF9S,IACP8S,EAAS,iBAJTA,EAAS,mBAORA,IAILrS,EAAoB,IAAIzzB,EAAahD,EAAO9K,EAAOgL,MAE/C9S,KAAK07C,GAAQ9oC,KACb1J,EAAEgU,iBAEFrV,EAAS+e,cAAc9e,EAAQuhC,KAEvC,EACAkpB,gBAAiB,SAAS3/C,GACtB5S,KAAKuzD,iBAAiB3gD,EAC1B,EACAoL,MAAOhd,EAAEqpB,OAGTpE,EAAgB9kB,EAAMxB,OAAO,CAC7BC,KAAM,SAASkI,GACX9H,KAAK8H,OAASA,EACd9H,KAAKq0D,2BAA4B,CACrC,EAEAC,kBAAmB,WACft0D,KAAKqpC,kBAAoBrpC,KAAKuqC,gBAAkB1iC,EAAS+e,cAAc5mB,KAAK8H,OAAQ9H,KAAKqpC,kBAC7F,EAEA2Z,QAAS,WACL,QAAIhjD,KAAKqpC,mBACErpC,KAAKqpC,kBAAkBr0B,MAAQhV,KAAK8H,OAAOgL,KAAKqP,SAI/D,EAEA7F,QAAS,SAASpT,GACd,IAAItB,EAAO5H,KACP8H,EAASF,EAAKE,OACdkL,EAAWlL,EAAOkL,SAEtB,OAAIA,EAASuhD,cAAcrrD,IAEnB8J,EAASC,sBACTD,EAASyH,WAAU,GAGvB7S,EAAKyhC,kBAAoB,IAAIzzB,EAAa9N,EAAOuL,WAAYvL,EAAOgL,OAC7D,KAGPE,EAASwhD,SAAStrD,KAClBtB,EAAKysD,2BAA4B,EAE7BzsD,EAAKo7C,YACLp7C,EAAKysD,2BAA4B,EACjCzsD,EAAK0sD,sBAGF,EAIf,EAEAt2C,MAAO,WACH,IAAIpW,EAAO5H,KAEX,SAAI4H,EAAKysD,4BAA6BzsD,EAAKo7C,aACvCp7C,EAAKysD,2BAA4B,EACjCzsD,EAAK0sD,qBACE,EAIf,IAGApuC,EAAmB/kB,EAAMxB,OAAO,CAChCC,KAAM,SAASkI,GACX9H,KAAK8H,OAASA,CAClB,EAEAwU,QAAS,SAASpT,IACTzH,EAAQwoD,QAAU/gD,EAAEopD,uBACnBppD,EAAEwV,SAAwB,IAAbxV,EAAE0T,SAAkB1T,EAAEyV,QAAWzV,EAAE0V,WAGlD5e,KAAK8H,OAAOjI,QAAQ4T,YACpBzT,KAAKy0D,0BAETz0D,KAAK00D,oBACT,EAEAA,kBAAmB,WACf,IAAI5sD,EAAS9H,KAAK8H,OACd8K,EAAQ9K,EAAOuL,WACnBT,EAAM2tB,mBAAmBz4B,EAAOgL,MAEhCqJ,YAAW,WACPrU,EAAOqL,YAAYP,EACvB,GACJ,EAEA6hD,wBAAyB,WAQrB,IAPA,IACI3hD,EADS9S,KAAK8H,OACAgL,KACdopB,EAAYr0B,EAAS0T,WAAW2gB,UAChC1J,EAAgBzqB,EAAIyqB,cACpBxV,EAAQlK,EAAK2a,WACbxR,EAAOnJ,EAAK+f,UAETL,EAAcxV,IACjBA,EAAQA,EAAM2Q,YAGlB,KAAO6E,EAAcvW,IACjBA,EAAOA,EAAKuS,gBAGZxR,GAASkf,EAAUlf,IACnBhc,EAAE46B,GAASO,UAAUrpB,GAGrBmJ,GAAQigB,EAAUjgB,IAClBjb,EAAE46B,GAASzgB,SAASrI,EAE5B,EAEAkL,MAAOhd,EAAEqpB,OAGTvE,EAAW3kB,EAAMxB,OAAO,CACxBC,KAAM,SAASua,GACXna,KAAKma,SAAWA,EAChBna,KAAKyoC,kBAAmB,CAC5B,EAEAksB,YAAa,SAAS/3C,GAClB,OAAQA,GAAW,IAAMA,GAAW,IAAQA,GAAW,IAAMA,GAAW,KAChEA,GAAW,KAAOA,GAAW,KAASA,GAAW,KAAOA,GAAW,KACzD,KAAXA,CACX,EAEAc,iBAAkB,SAASjM,EAAOvI,GAC9B,IACItD,EACA+X,EAFAnK,EAAMohD,OAAOC,aAAa3rD,EAAE0T,SAG5Bk4C,EAAW90D,KAAK+0D,qBAAqB7rD,EAAG8rD,UAAUC,UAEtD,IAAKrvD,KAAY6L,EAGb,KAFAkM,EAAc3c,EAAErB,OAAO,CAAE0mB,MAAM,EAAOE,KAAK,EAAOD,OAAO,GAAS7U,EAAM7L,GAAU/F,UAEjE2T,KAAOA,GAAOmK,EAAYnK,KAAOtK,EAAE0T,UAChDe,EAAY0I,MAAQyuC,GACpBn3C,EAAY4I,KAAOrd,EAAEyV,QACrBhB,EAAY2I,OAASpd,EAAE0V,SACvB,OAAOhZ,CAGnB,EAEAmvD,qBAAsB,SAAS7rD,EAAG+rD,GAE9B,OADUA,EAASC,cAActvC,QAAQ,QAAU,EACtC1c,EAAEisD,QAAUjsD,EAAEwV,OAC/B,EAEA0G,kBAAmB,SAAS3T,EAAOvI,GAC/B,IACItD,EACAyf,EAFA7R,EAAMohD,OAAOC,aAAa3rD,EAAE0T,SAI5Bw4C,EAAQ,GACRC,EAAW,SAASC,GAAW,OAAOA,GAAW9hD,GAAO8hD,GAAWpsD,EAAE0T,SAAW04C,GAAWpsD,EAAEwoB,QAAU,EAE3G,IAAK9rB,KAAY6L,EACb4T,EAAIrkB,EAAErB,OAAO,CAAE0mB,MAAM,EAAOE,KAAK,EAAOD,OAAO,GAAS7U,EAAM7L,GAAU/F,UAE3DijB,MAAMC,QAAQsC,EAAE7R,KAAOxS,EAAEsxB,KAAKjN,EAAE7R,IAAK6hD,GAAUx0D,OAAS,EAAIw0D,EAAShwC,EAAE7R,OAEhF6R,EAAEgB,MAAQnd,EAAEwV,SACZ2G,EAAEkB,KAAOrd,EAAEyV,QACX0G,EAAEiB,OAASpd,EAAE0V,UACbw2C,EAAMj1D,KAAKsR,EAAM7L,IAIzB,OAAOwvD,CACX,EAEA1sB,YAAa,SAASx/B,GAClB,IAAI0T,EAAU1T,EAAE0T,QAChB,OAAQ5c,KAAK20D,YAAY/3C,KAAa1T,EAAEwV,UAAYxV,EAAEyV,QACpC,IAAX/B,GAA4B,IAAXA,GAA4B,GAAXA,GACtB,IAAXA,IAAkB1T,EAAE0V,WAAa1V,EAAEwV,UAAYxV,EAAEyV,MAC7D,EAEA41C,cAAe,SAASrrD,GACpB,IAAI0T,EAAU1T,EAAE0T,QAChB,OAAmB,IAAXA,IAAkB1T,EAAE0V,WAAa1V,EAAEyV,QACxB,IAAX/B,IAAkB1T,EAAEwV,UAAYxV,EAAEyV,QACvB,IAAX/B,IAAkB1T,EAAEwV,UAAYxV,EAAE0V,QAC9C,EAEA41C,SAAU,SAAStrD,GACf,OAAoB,IAAbA,EAAE0T,SAAiB1T,EAAEwV,UAAYxV,EAAEyV,SAAWzV,EAAE0V,QAC3D,EAEA4zC,YAAa,SAAStwB,GAClBliC,KAAKu1D,YAAcrzB,EACnBliC,KAAKyoC,kBAAmB,CAC5B,EAEA+sB,WAAY,WACJx1D,KAAKyoC,kBAAoBzoC,KAAKu1D,aAC9Bv1D,KAAKu1D,cAETv1D,KAAKyoC,kBAAmB,CAC5B,EAEAhuB,UAAW,SAASg7C,GAChB,IAAI7tD,EAAO5H,KACX4H,EAAKgK,eACD6jD,EACA7tD,EAAK4tD,aAEL5tD,EAAK8tD,QAAUx0D,OAAOib,WAAWvU,EAAK4tD,WAAWptD,KAAKR,GAAO,IAErE,EAEAqL,mBAAoB,WAChB,OAAOjT,KAAKyoC,gBAChB,EAEA72B,aAAc,WACV1Q,OAAO0Q,aAAa5R,KAAK01D,QAC7B,EAEAhsD,OAAQ,SAASR,EAAGysD,GAChB,IAAIlzD,EAAG0X,EAAWna,KAAKma,SAEvB,IAAK1X,EAAI,EAAGA,EAAI0X,EAAStZ,SACjBsZ,EAAS1X,GAAGkzD,GAAMzsD,GADOzG,KAKrC,EAEA6Z,QAAS,SAASpT,GACdlJ,KAAK0J,OAAOR,EAAG,UACnB,EAEA8U,MAAO,SAAS9U,GACZlJ,KAAK0J,OAAOR,EAAG,QACnB,IAGJvJ,EAAOkI,EAAU,CACbme,cAAeA,EACfC,cAAeA,EACfF,iBAAkBA,EAClBG,iBAAkBA,EAClBJ,SAAUA,GAGb,CA9yBD,CA8yBG5kB,OAAO1B,MAAM2sB,QAEhB,SAAUnrB,GAGN,IACI6G,EADQ3G,OAAO1B,MACE6B,GAAGyG,OACpB4hC,EAAU7hC,EAAS6hC,QAEnB/jC,EADckC,EAASzF,YACIuD,aAC3BwkB,EAAOtiB,EAASsiB,KAChBxqB,EAASqB,EAAErB,OAEfi2D,EAAmBlsB,EAAQ/pC,OAAO,CAClCC,KAAM,SAASC,GACXG,KAAK4T,OAAQ,EACb81B,EAAQ5pC,GAAGF,KAAKG,KAAKC,KAAMH,EAC/B,EAEA6S,KAAM,WACF,IAAI9K,EAAO5H,KACP4S,EAAQhL,EAAKiiC,WAAU,GACvB/hC,EAASF,EAAKE,OAElBA,EAAOoK,oBAEPpK,EAAOkjB,YAAYK,MAAK,WACpBzjB,EAAKkiC,aAAal3B,GAClB9K,EAAO8X,4BACP9X,EAAO+X,yBACP/X,EAAOgY,4BACX,GACJ,IAGJngB,EAAOkI,EAAU,CACb+tD,iBAAkBA,IAGtBjwD,EAAa,MAAO,IAAIwkB,EAAK,CAAE/pB,QAASw1D,IAEvC,CAvCD,CAuCG10D,OAAO1B,MAAM2sB,QAEhB,SAAUnrB,GAGN,IAAIxB,EAAQ0B,OAAO1B,MACfqI,EAAWrI,EAAM6B,GAAGyG,OACpB4hC,EAAU7hC,EAAS6hC,QAEnB/jC,EADckC,EAASzF,YACIuD,aAC3BwkB,EAAOtiB,EAASsiB,KAChBxqB,EAASqB,EAAErB,OAEfk2D,EAAensB,EAAQ/pC,OAAO,CAC9BC,KAAM,SAASC,GACX6pC,EAAQ5pC,GAAGF,KAAKG,KAAKC,KAAMH,GAE3BG,KAAK+T,iBAAkB,CAC3B,EAEArB,KAAM,WACF,IAAI5K,EAAS9H,KAAK8H,OAEdtI,EAAM+B,QAAQE,QAAQsZ,KACtBjT,EAAOrB,SAASkN,YAAY,SAAS,EAAO,MACrC7L,EAAO5G,OAAO+N,OACrBnH,EAAO5G,OAAO+N,OAEtB,IAGJtP,EAAOkI,EAAU,CACbguD,aAAcA,IAGlBlwD,EAAa,QAAS,IAAIwkB,EAAK,CAAE/pB,QAASy1D,IAEzC,CAnCD,CAmCG30D,OAAO1B,MAAM2sB,QAEhB,SAAUnrB,GAEV,IACI8E,EADQ5E,OAAO1B,MACA6B,GAAGyG,OAClBqiB,EAAOrkB,EAAOqkB,KACduf,EAAU5jC,EAAO4jC,QACjBtnC,EAAc0D,EAAO1D,YACrB2F,EAAMjC,EAAOkC,IACbuK,EAAazM,EAAOyM,WACpB5M,EAAevD,EAAYuD,aAE3BmwD,EAAoBpsB,EAAQ/pC,OAAO,CACnCC,KAAM,SAASC,GACX6pC,EAAQ5pC,GAAGF,KAAKG,KAAKC,KAAMH,EAC/B,EAEA6S,KAAM,WACF,IAAIE,EAAQ5S,KAAK6pC,WAAU,GAC3B7pC,KAAK29B,aAAe,GACpB39B,KAAK+1D,YAAc,GACnB/1D,KAAKg2D,cAAcpjD,GACnB5S,KAAK8H,OAAO61B,aAAe39B,KAAK29B,aAChC39B,KAAK8H,OAAOiuD,YAAc/1D,KAAK+1D,YAC/B/1D,KAAK8pC,aAAal3B,EACtB,EAEAojD,cAAe,SAASpjD,GACpB,IACI2a,EADA0oC,EAAa1jD,EAAWoS,MAAM/R,GASlC,IALI2a,EADsB,IAAtB0oC,EAAWp1D,OACJo1D,EAAW,GAAG/sC,WAEdtW,EAAM2B,eAGVgZ,IAASxlB,EAAI4Y,GAAG4M,EAAM,SAA8C,WAAnCA,EAAKxa,aAAa,cAClDhL,EAAIsrB,QAAQ9F,IACZvtB,KAAKk2D,eAAe3oC,EAAM,eAEtBA,EADAxlB,EAAI4Y,GAAG4M,EAAM,MACNA,EAAKrE,WAEL,OAGXlpB,KAAKk2D,eAAe3oC,EAAM,gBAC1BA,EAAOA,EAAKrE,WAGxB,EAEAgtC,eAAgB,SAAS3oC,EAAM4oC,GAC3B,IAQIC,EAAYC,EAAUC,EAAc/pB,EAAgB9pC,EARpD8zD,EAAShpC,EAAK7iB,MACdyZ,EAAaoJ,EAAKpJ,WAClBqyC,EAAa,CACb7zD,KAAM,CAAE4qB,EAAKxL,SACb3J,KAAM,CACF1N,MAAO,CAAC,IAKhB,IAAKjI,EAAI,EAAG8zD,GAAU9zD,EAAI8zD,EAAO11D,OAAQ4B,IAErC2zD,EAAaG,EADbF,EAAWE,EAAO9zD,IAElB+zD,EAAWp+C,KAAK1N,MAAM2rD,GAAYD,EAGtC,IAAK3zD,EAAI,EAAG0hB,GAAc1hB,EAAI0hB,EAAWtjB,OAAQ4B,IAC7C6zD,EAAenyC,EAAW1hB,GAAGga,SAC7B8vB,EAAiBpoB,EAAW1hB,GAAGgb,UACV,UAAjB64C,IAEwB,UAAjBA,EACPE,EAAWp+C,KAAKwB,UAAY2yB,EAE5BiqB,EAAWp+C,KAAKk+C,GAAgB/pB,GAIxCvsC,KAAKm2D,GAAah2D,KAAKq2D,EAC3B,IAGAC,EAAqB/sB,EAAQ/pC,OAAO,CACpCC,KAAM,SAASC,GACX6pC,EAAQ5pC,GAAGF,KAAKG,KAAKC,KAAMH,EAC/B,EAEA6S,KAAM,WACF,IAKIiS,EALA/R,EAAQ5S,KAAK6pC,WAAU,GACvBsF,EAAU58B,EAAWy0B,WAAWp0B,GAChC9K,EAAS9H,KAAK8H,OACd61B,EAAe71B,EAAO61B,aACtBo4B,EAAcjuD,EAAOiuD,aAGnBp4B,GAAwC,IAAxBA,EAAa98B,QAAmBk1D,GAAsC,IAAvBA,EAAYl1D,UAI1D,IAAnBsuC,EAAQtuC,SACRb,KAAKo0B,OAAO4Q,YAAYpyB,GACxB5S,KAAKo0B,OAAO0Q,MAAQ,MAGxB9kC,KAAK02D,6BAA6B9jD,GAClC+R,EAAQpS,EAAWoS,MAAM/R,GACzB5S,KAAK22D,mBAAmBhyC,GACxB5c,EAAIulB,UAAU1a,EAAM8C,yBAEG,IAAnBy5B,EAAQtuC,QACR+R,EAAMwtB,cAAc+O,EAAQ,IAC5Bv8B,EAAMytB,aAAa8O,EAAQ,MAE3Bv8B,EAAMutB,eAAexb,EAAM,IAC3B/R,EAAM0tB,YAAY3b,EAAM,MAG5BA,EAAQpS,EAAWoS,MAAM/R,KAEZmjD,GAAeA,EAAYl1D,QACpCb,KAAK42D,iBAAiBjyC,EAAOoxC,GAG7BpxC,GAASgZ,GAAgBA,EAAa98B,QACtCb,KAAK62D,kBAAkBlyC,EAAOgZ,GAGlC39B,KAAK8pC,aAAal3B,GACtB,EAEA8jD,6BAA8B,SAAS9jD,GACnC,IAGIkkD,EAAer0D,EAInB,IAFAq0D,EAAgBvkD,EAAWs0B,OAAOj0B,GALd,SAAS2a,GACzB,OAAOxlB,EAAI2rB,SAASnG,KAAUA,EAAKE,aAAe1lB,EAAI+qB,SAASvF,EACnE,MAKqBupC,EAAcj2D,OAAS,EACxC,IAAK4B,EAAI,EAAGA,EAAIq0D,EAAcj2D,OAAQ4B,IAClCq0D,EAAcr0D,GAAGymB,WAAW8I,YAAY8kC,EAAcr0D,GAGlE,EAEAk0D,mBAAoB,SAAShyC,GACzB,IAAIliB,EAAG8qB,EAAMxM,EAAQub,EAAU9Z,EAAG+P,EAAO/C,EAEzC,IAAK/sB,EAAI,EAAGA,EAAIkiB,EAAM9jB,OAAQ4B,IAI1B,GAFAse,GADAwM,EAAO5I,EAAMliB,IACCymB,YAEVlpB,KAAKqmC,gBAAgB9Y,GAIzB,KAAOxM,GAAUhZ,EAAI2rB,SAAS3S,IAAS,CAGnC,IAFAub,EAAWvb,EAAOsO,WAEb7M,EAAI,EAAGA,EAAI8Z,EAASz7B,OAAQ2hB,IAC7B+P,EAAQ+J,EAAS9Z,GAEZza,EAAI+qB,SAASP,IAAUA,IAAUhF,KAClCiC,EAAUzO,EAAO0O,WAAU,IACnBtN,UAAY,GACpBpa,EAAI+Y,KAAKyR,EAAO/C,IAIxBznB,EAAIguB,OAAOhV,GACXA,EAASwM,EAAKrE,UAClB,CAER,EAEA0tC,iBAAkB,SAASjyC,EAAOoxC,GAC9B,IAGItzD,EAAGkqB,EAAKY,EAAMjkB,EAASytD,EAAaC,EACpCC,EAAeC,EAAWj4B,EAAU3hB,EAAM65C,EAAaC,EAAa7kC,EAAO/P,EAAG60C,EAJ9EljB,EAAY4hB,EAAY,GAAGpzD,KAAK,GAChCyV,EAAO29C,EAAY,GAAG39C,KACtB3R,EAAWzG,KAAK8H,OAAOrB,SAI3B,IAAKhE,EAAI,EAAGkqB,EAAMhI,EAAM9jB,OAAQ4B,EAAIkqB,EAAKlqB,IAGrC,GAFA8qB,EAAO5I,EAAMliB,IAETsF,EAAI4qB,aAAapF,KAASvtB,KAAKqmC,gBAAgB9Y,GAMnD,GAA4B,UAF5BwpC,EAAchvD,EAAI+nB,kBAAkBvC,IAEpBxL,SAAsBg1C,EAAYh1C,UAAYoyB,EAAW,CACrE,GAA4B,OAAxB4iB,EAAYh1C,SAA4C,OAAxBg1C,EAAYh1C,SAA4C,OAAxBg1C,EAAYh1C,QAAkB,CAM9F,IALAk1C,EAAgB,GAChBC,EAAY,GACZj4B,EAAW1R,EAAKiB,gBAChBlR,EAAOiQ,EAAKI,YAELsR,GACEl3B,EAAI+qB,SAASmM,IACdg4B,EAAc92D,KAAK8+B,GAGvBA,EAAWA,EAASzQ,gBAGxB,GAAIyoC,EAAcp2D,OAKd,KAJAs2D,EAAcJ,EAAYtnC,WAAU,IACxBtN,UAAY,GACxBpa,EAAIuQ,aAAa6+C,EAAaF,EAAc,IAEvCz0C,EAAI,EAAGA,EAAIy0C,EAAcp2D,OAAQ2hB,IAClC+P,EAAQ0kC,EAAcz0C,GACtBza,EAAIgtB,SAASoiC,EAAa5kC,EAAO,GAIzC,KAAOjV,GACEvV,EAAI+qB,SAASxV,IACd45C,EAAU/2D,KAAKmd,GAGnBA,EAAOA,EAAKqQ,YAGhB,GAAIupC,EAAUr2D,OAKV,KAJAu2D,EAAcL,EAAYtnC,WAAU,IACxBtN,UAAY,GACxBpa,EAAIuQ,aAAa8+C,EAAaF,EAAU,IAEnC10C,EAAI,EAAGA,EAAI00C,EAAUr2D,OAAQ2hB,IAC9B+P,EAAQ2kC,EAAU10C,GAClB40C,EAAYt7C,YAAYyW,GAIhCxqB,EAAIguB,OAAOghC,EACf,CAEAztD,EAAUvB,EAAIghB,OAAOtiB,EAAU0tC,EAAW/7B,GAC1CrQ,EAAI+Y,KAAKyM,EAAMjkB,EACnB,MAAWytD,EAAYh1C,UAAYoyB,GAC/BpsC,EAAIqQ,KAAK2+C,EAAa3+C,GAI9B,GAAI2+C,GAAsC,IAAvBhB,EAAYl1D,QAAwC,OAAxBk2D,EAAYh1C,SAAkC,OAAdoyB,EAAoB,CAG/F,IAFAkjB,EAAY,GAELtvD,EAAI4Y,GAAGrX,EAAS,OACnB+tD,EAAUl3D,KAAKmJ,GACfA,EAAUvB,EAAI2lB,KAAKpkB,GAOvB,IAJA0tD,EAAejvD,EAAIghB,OAAOtiB,EAAUsvD,EAAY,GAAGpzD,KAAK,GAAIozD,EAAY,GAAG39C,MAC3ErQ,EAAIuQ,aAAa0+C,EAAcK,EAAUA,EAAUx2D,OAAS,IAC5Dm2D,EAAal7C,YAAYu7C,EAAU,IAE9B50D,EAAI,EAAGkqB,EAAM0qC,EAAUx2D,OAAQ4B,EAAIkqB,EAAKlqB,IACzCsF,EAAIuQ,aAAa++C,EAAU50D,GAAIu0D,EAAavpC,WAEpD,MAAWspC,GAAsC,IAAvBhB,EAAYl1D,QAAwC,OAAxBk2D,EAAYh1C,UAC9Di1C,EAAejvD,EAAIghB,OAAOtiB,EAAUsvD,EAAY,GAAGpzD,KAAK,GAAIozD,EAAY,GAAG39C,MAC3ErQ,EAAI+Y,KAAKxX,EAAS0tD,GAE1B,EAEAH,kBAAmB,SAASlyC,EAAOgZ,GAC/B,IACI25B,EAAcC,EAAaC,EAAS/0D,EAAG+sB,EAASjC,EADhD9mB,EAAWzG,KAAK8H,OAAOrB,SAG3B,IAAKhE,EAAI,EAAGA,EAAIk7B,EAAa98B,OAAQ4B,IACjC60D,EAAe35B,EAAal7B,GAC5B80D,EAAcxvD,EAAIghB,OAAOtiB,EAAU6wD,EAAa30D,KAAK,GAAI20D,EAAal/C,MAElEo/C,GACAD,EAAYz7C,YAAY07C,GAG5BA,EAAUD,EAGd,GAAIC,EACA,IAAK/0D,EAAI,EAAGA,EAAIkiB,EAAM9jB,OAAQ4B,IAE1B,GADA8qB,EAAO5I,EAAMliB,IACTsF,EAAI4qB,aAAapF,KAASvtB,KAAKqmC,gBAAgB9Y,GAAnD,CAMA,IAHAiC,EAAUgoC,EAAQ/nC,WAAU,GAC5B1nB,EAAIuQ,aAAakX,EAASjC,GAEnBiC,EAAQ8M,UAAY9M,EAAQ8M,SAASz7B,QACxC2uB,EAAUA,EAAQ8M,SAAS,GAG/B9M,EAAQ1T,YAAYyR,EARpB,CAWZ,EAEA9Z,WAAY,WACR,OAAOzT,KAAK8H,QAAU9H,KAAK8H,OAAOjI,QAAQ4T,UAC9C,EAEA4yB,gBAAiB,SAAS9Y,GACtB,OAAOvtB,KAAKyT,cAAgB3N,EAAOyV,WAAW8qB,gBAAgB9Y,EAClE,IAGAkqC,EAAiBttC,EAAKxqB,OAAO,CAC7BC,KAAM,SAASC,GACXsqB,EAAKrqB,GAAGF,KAAKG,KAAKC,KAAMH,EAC5B,EAEAO,QAAS,SAASgqB,GACd,OAAO,IAAI0rC,EAAkB1rC,EACjC,IAGAstC,EAAkBvtC,EAAKxqB,OAAO,CAC9BC,KAAM,SAASC,GACXsqB,EAAKrqB,GAAGF,KAAKG,KAAKC,KAAMH,EAC5B,EAEAO,QAAS,SAASgqB,GACd,OAAO,IAAIqsC,EAAmBrsC,EAClC,IAGJppB,EAAErB,OAAOmG,EAAQ,CACbgwD,kBAAmBA,EACnBW,mBAAoBA,EACpBgB,eAAgBA,EAChBC,gBAAiBA,IAGrB/xD,EAAa,aAAc,IAAI8xD,EAAe,CAAE,IAChD9xD,EAAa,cAAe,IAAI+xD,EAAgB,CAAE,GAEjD,CArVD,CAqVGx2D,OAAO1B,MAAM2sB,QAEhB,SAAU3sB,EAAOyB,GACb,IAAI02D,EAASz2D,OACT02D,EAAOD,EAAOvvC,KACdH,EAAM2vC,EAAK3vC,IACXC,EAAM0vC,EAAK1vC,IACX68B,EAAa4S,EAAO5S,WAEpB/jD,EAAIxB,EAAM2sB,OACVxsB,EAASqB,EAAErB,OAEXmG,EAAStG,EAAM6B,GAAGyG,OAIlB+vD,EAA8B,mBAC9BC,EAAyB,oBACzBC,EAAS,SA2Bb,SAASC,EAAcxmD,GACnB,cAAc,IAAYumD,GAAUF,EAA4BnkD,KAAKlC,EACzE,CAwBA7R,EAAOmG,EAAQ,CACXmyD,cAXgB,CAChBC,UA1CJ,SAAmBr4D,GACf,IAAI2R,EAAQ3R,EAAQ2R,MAChB2mD,EAAat4D,EAAQooB,IACrBmwC,EAAav4D,EAAQqoB,IAEzB,OAAOA,EAAID,EAAI88B,EAAWvzC,GAAQuzC,EAAWqT,IAAcrT,EAAWoT,GAC1E,EAqCIE,kBAnCJ,SAA2B7wD,GACvB,OAAIA,IAAYxG,EAAEwG,GAASmZ,GAAG,SAAWnZ,EAAQqT,aAAerT,EAAQsT,aAC7Dtb,EAAM+B,QAAQ+2D,YAGlB,CACX,EA8BIC,yBA5BJ,SAAkC/mD,EAAOgnD,GACrC,OAAIR,EAAcxmD,GACPuzC,EAAWvzC,GAGTuzC,EAAWvzC,GAASgnD,EAAS,GAE9C,EAsBIR,cAAeA,EACfS,SAjBJ,SAAkBjnD,GACd,cAAc,IAAYumD,GAAUD,EAAuBpkD,KAAKlC,EACpE,EAgBIknD,cAdJ,SAAuBlnD,GACnB,OAAQuzC,EAAWvzC,GAxCN,GAyCjB,EAaImnD,SAXJ,SAAkBnnD,GACd,OAAQuzC,EAAWvzC,GA3CX,IA4CZ,IAeH,CAxED,CAwEGtQ,OAAO1B,OAEV,SAAUA,EAAOyB,GACb,IAAID,EAAIxB,EAAM2sB,OACVxsB,EAASqB,EAAErB,OACX0qB,EAAOrpB,EAAEqpB,KAETvkB,EAAStG,EAAM6B,GAAGyG,OAClB3G,EAAQ3B,EAAM2B,MAEdy3D,EAAW,UAGXC,EAAc,aAEdC,EAAW,UAMXhZ,EAAQ,QAERiZ,EAAuB53D,EAAMxB,OAAO,CACpCC,KAAM,SAAS4H,EAAS3H,GACpB,IAAI+H,EAAO5H,KAEX4H,EAAK/H,QAAUF,EAAO,CAAC,EAAGiI,EAAK/H,QAASA,GAExC+H,EAAK/H,QAAQ8C,KAAOmgB,MAAMC,QAAQnb,EAAK/H,QAAQ8C,MAAQiF,EAAK/H,QAAQ8C,KAAO,CAACiF,EAAK/H,QAAQ8C,MAErF3B,EAAEwG,GAASmZ,GAAGm/B,KACdl4C,EAAKJ,QAAUA,EACfI,EAAKoxD,uBAEb,EAEAtnD,QAAS,WACL,IAAI9J,EAAO5H,KACPi5D,EAAiBrxD,EAAK/H,QAAQo5D,eAE9BrxD,EAAKJ,UACLxG,EAAE4G,EAAKJ,SAAS8S,IAAI2+C,GACpBrxD,EAAKJ,QAAU,MAGnBxG,EAAE4G,EAAK/H,QAAQq5D,aAAa5+C,IAAIs+C,EAAWK,GAE3CrxD,EAAKuxD,sBACT,EAEAt5D,QAAS,CACL8C,KAAM,GACNslB,IAAK,EACLixC,YAAa,KACbD,eAAgB,GAChBG,KAAK,EACLC,OAAQ,CACJC,cAAe,GACfzsD,OAAQ,EACRD,MAAO,EACP6pB,WAAY,CAAC,EACb1S,SAAU,KAIlBi1C,qBAAsB,WAClB,IAAIpxD,EAAO5H,KACPH,EAAU+H,EAAK/H,QAEnBmB,EAAE4G,EAAKJ,SAASkZ,GAxDP,YAwDuB7gB,EAAQo5D,eAAgBp5D,EAAQ8C,KAAK0W,KArDjE,KAqD8EzR,EAAK2xD,4BAA4BnxD,KAAKR,GAC5H,EAEA4xD,mBAAoB,WAChB,IACI1pD,EADO9P,KACUwI,WAErB,QAAIsH,KACSA,EAAU2pD,QAI3B,EAEAhwD,OAAQ4gB,EAERkvC,4BAA6B,SAASrwD,GAClC,IAAItB,EAAO5H,KAEP05D,EADU9xD,EAAK/H,QACSw5D,OACxBM,EAAe34D,EAAEkI,EAAEye,eACnBiyC,EAAehyD,EAAKgyD,aACpBN,EAAgBI,EAAcJ,cAE7B1xD,EAAK4xD,wBACDG,EAAah5C,GA5Eb,gBA4E+B/Y,EAAKiyD,qBAAqBF,EAAczwD,GACpE0wD,EACIA,EAAa7/C,KAAKu/C,IAAkBM,EAAa7/C,KAAKu/C,KAAmBK,EAAa,IACtF/xD,EAAKkyD,iBAAiBH,EAAczwD,GAIxCtB,EAAKkyD,iBAAiBH,EAAczwD,GAIpC0wD,GACAhyD,EAAKuxD,uBAIrB,EAEAU,qBAAsBxvC,EAEtByvC,iBAAkB,SAASH,EAAczwD,GACrC,IAAItB,EAAO5H,KAEO,IAAdkJ,EAAEub,UAKN7c,EAAKmyD,oBACLnyD,EAAKoyD,wBAAwBL,GAC7B/xD,EAAKqyD,4BACLryD,EAAKsyD,8BAA8BP,EAAa,IAChD/xD,EAAKuyD,mCAELvyD,EAAKwyD,eAAeT,GAEpB/xD,EAAKyyD,oBACLzyD,EAAKgyD,aAAa/yC,OACtB,EAEAkzC,kBAAmB,WACf,IAAInyD,EAAO5H,KACPH,EAAU+H,EAAK/H,QAEnB+H,EAAKuxD,uBAELvxD,EAAKgyD,aAAe54D,EAAEnB,EAAQw5D,OAAOt1C,UAAU5I,SAAStb,EAAQq5D,YACpE,EAEAc,wBAAyB3vC,EAEzB4vC,0BAA2B5vC,EAE3B6vC,8BAA+B,SAASP,GACzB35D,KAEN45D,aAAa7/C,KAFP/Z,KAEiBH,QAAQw5D,OAAOC,cAAeK,EAC9D,EAEAQ,iCAAkC,WAC9B,IAAIvyD,EAAO5H,KACPH,EAAU+H,EAAK/H,QACfo5D,EAAiBp5D,EAAQo5D,eACzBqB,EAAcz6D,EAAQw5D,OAAO5iC,WAAWrC,OACxCwlC,EAAehyD,EAAKgyD,aAExBhyD,EAAKgyD,aACAl5C,GAvJI,YAuJYu4C,GAAgB,WAC7BW,EAAarwD,KAjJnB,IAiJ8B+wD,GAAazzC,MACzC,IACCnG,GAAGo4C,EAAWG,GAAgB,WAC3BW,EAAarwD,KApJnB,IAoJ8B+wD,GAAatiD,MACzC,GACR,EAEAqiD,kBAAmB,WACJr6D,KAEN45D,aAAarwD,KA3JhB,IAyJSvJ,KAEuBH,QAAQw5D,OAAO5iC,WAAWrC,QAAQpc,MACxE,EAEAmhD,qBAAsB,WAClB,IAAIvxD,EAAO5H,KAEP4H,EAAKgyD,eACLhyD,EAAK2yD,oBACL3yD,EAAKgyD,aAAat/C,IAAI1S,EAAK/H,QAAQo5D,gBAAgB5jD,SACnDzN,EAAKgyD,aAAe,KAE5B,EAEAQ,eAAgB,SAAST,GACrB,IAAI/xD,EAAO5H,KAEN4H,EAAKgyD,eAIVhyD,EAAK2yD,oBAEL3yD,EAAKY,WAAa,IAAIhJ,EAAM6B,GAAGm5D,UAAUb,EAAc,CACnDpyC,iBAAkB3f,EAAKgyD,aAAa,GACpClyC,MAAO9f,EAAK6yD,cAAcryD,KAAKR,GAC/B6B,OAAQ7B,EAAK8yD,SAAStyD,KAAKR,GAC3BygB,UAAWzgB,EAAK+yD,YAAYvyD,KAAKR,KAEzC,EAEA2yD,kBAAmB,WACf,IAAI3yD,EAAO5H,KAEP4H,EAAKY,aACLZ,EAAKY,WAAWkJ,UAChB9J,EAAKY,WAAa,KAE1B,EAEAiyD,cAAe,WACXz6D,KAAK46D,kBACT,EAEAF,SAAU,SAASxxD,GACflJ,KAAK66D,4BAA4B3xD,EACrC,EAEA2xD,4BAA6BxwC,EAE7BswC,YAAa,SAASzxD,GAClB,IAAItB,EAAO5H,KAEX4H,EAAK6B,OAAOP,GACZtB,EAAKuxD,uBACLvxD,EAAKkzD,iBACT,EAEAA,gBAAiB,WACb,IAAIj7D,EAAUG,KAAKH,QAEnBmB,EAAEnB,EAAQq5D,aAAa5+C,IAAIs+C,EAAW/4D,EAAQo5D,eAClD,EAEA2B,iBAAkB,WACd,IAAI/6D,EAAUG,KAAKH,QAEnBmB,EAAEnB,EAAQq5D,aAAax4C,GAAGk4C,EAAW/4D,EAAQo5D,gBAAgB,SAAS/vD,GAClEA,EAAEgU,gBACN,GACJ,EAEA69C,eAAgB,SAAS7xD,GACrB,IAAI4G,EAAY9P,KAAKwI,WAEjBsH,GAAaA,EAAUkrD,YACvBlrD,EAAUkrD,WAAWj5B,KAAK74B,EAElC,IAGA+xD,EAAkB95D,EAAMxB,OAAO,CAC/BopB,OAAQ,SAASjhB,EAAQjI,GACrB,IAAI+H,EAAO5H,KACPk7D,EAAer7D,EAAQ0C,KACvByiB,EAAKnlB,EAAQo5D,eAEjBj4D,EAAE8G,EAAOgL,MACJ4N,GAxPK,aAwPYsE,EAAI86B,GAAO,SAAS52C,GAClC,IAAIivB,EAAQjvB,EAAEye,cACV8xC,EAAW3xD,EAAOozD,GAEtBhyD,EAAE0Y,kBAEE63C,EACIA,EAASjyD,UAAY2wB,GAAUshC,EAASD,uBACxC5xD,EAAKuzD,iBAAiBrzD,EAAQjI,GAC9B+H,EAAKwzD,cAActzD,EAAQqwB,EAAOt4B,IAItC+H,EAAKwzD,cAActzD,EAAQqwB,EAAOt4B,EAE1C,IACC6gB,GAAGm4C,EAAc7zC,EAAI86B,GAAO,SAAS52C,GAClC,IAAImyD,EACA5B,EAAW3xD,EAAOozD,GAEtBhyD,EAAE0Y,mBAEE63C,GAAaA,EAASD,sBAAyBC,EAASG,eACxDyB,EAAcr6D,EAAEy4D,EAASjyD,SAASma,QAAQm+B,GAAO,MAG7Cl4C,EAAKuzD,iBAAiBrzD,EAAQjI,GAC9B+H,EAAKwzD,cAActzD,EAAQuzD,EAAax7D,GAGpD,IACC6gB,GAAGm4C,EAAc7zC,GAAI,WAClB,IAAIy0C,EAAW3xD,EAAOozD,GAElBzB,IAAaA,EAASD,sBACtB5xD,EAAKuzD,iBAAiBrzD,EAAQjI,EAEtC,IACC6gB,GAAGo4C,EAAW9zC,GAAI,SAAS9b,GACxB,IACImyD,EADA5B,EAAW3xD,EAAOozD,GAGlBzB,GAAYA,EAASD,uBACrB6B,EAAcr6D,EAAEkI,EAAEmS,QAAQsG,QAAQm+B,GAAO,MAGrC2Z,EAASsB,eAAe7xD,GACxBtB,EAAKuzD,iBAAiBrzD,EAAQjI,GAC9B+H,EAAKwzD,cAActzD,EAAQuzD,EAAax7D,GAGpD,GACR,EAEA6oB,QAAS,SAAS5gB,EAAQjI,GACtBmB,EAAE8G,EAAOgL,MAAMwH,IAAIza,EAAQo5D,eAC/B,EAEAmC,cAAe,SAAStzD,EAAQ6xD,EAAc95D,GAC1C,IAAIq7D,EAAer7D,EAAQ0C,KACvB+4D,EAAez7D,EAAQ6H,KAE3BI,EAAOozD,GAAgB,IAAII,EAAa3B,EAAc,CAClDP,IAAK55D,EAAM+B,QAAQyX,MAAMlR,EAAON,SAChC0xD,YAAapxD,EAAOgL,MAE5B,EAEAqoD,iBAAkB,SAASrzD,EAAQjI,GAC/B,IAAIq7D,EAAer7D,EAAQ0C,KAEvBuF,EAAOozD,KACPpzD,EAAOozD,GAAcxpD,UACrB5J,EAAOozD,GAAgB,KAE/B,IAEJD,EAAgB54C,QAAU,IAAI44C,EAE9BlC,EAAqBhwC,OAAS,SAASjhB,EAAQjI,GAC3Co7D,EAAgB54C,QAAQ0G,OAAOjhB,EAAQjI,EAC3C,EAEAk5D,EAAqBrwC,QAAU,SAAS5gB,EAAQjI,GAC5Co7D,EAAgB54C,QAAQqG,QAAQ5gB,EAAQjI,EAC5C,EAEAF,EAAOmG,EAAQ,CACXizD,qBAAsBA,GAG7B,CA7VD,CA6VG73D,OAAO1B,OAEV,SAAUA,EAAOyB,GACb,IAEIs6D,EAFSr6D,OACKknB,KACHmzC,IAEXv6D,EAAIxB,EAAM2sB,OACVxsB,EAASqB,EAAErB,OAEXmG,EAAStG,EAAM6B,GAAGyG,OAClBC,EAAMjC,EAAOkC,IACb+wD,EAAuBjzD,EAAOizD,qBAC9Bd,EAAgBnyD,EAAOmyD,cACvBC,EAAYD,EAAcC,UAC1BK,EAA2BN,EAAcM,yBACzCF,EAAoBJ,EAAcI,kBAClCL,EAAgBC,EAAcD,cAC9BU,EAAgBT,EAAcS,cAC9BC,EAAWV,EAAcU,SACzBh3D,EAAanC,EAAMoC,YAEnBojB,EAAK,6BACLw2C,EAAsB,yBACtBC,EAAsB,yBAEtBC,EAAO,OACP1b,EAAQ,QACRD,EAAQ,QAGRE,EAAK,KAEL0b,EAAU,YAEVC,EAAQ,IACRC,EAAQ,QAER/yC,EAAiBiwC,EAAqBp5D,OAAO,CAC7CE,QAAS,CACL8C,KAAM,CAXL,KACA,MAWDslB,IAAK,GACLixC,YAAa,KACbD,eAAgBj0C,EAChBo0C,KAAK,EACLC,OAAQ,CACJC,cAAe,SACf1sD,MAAO,GACPC,OAAQ,EACR4pB,WAAY,CACR4iC,OAAQmC,EACRpnC,OAAQqnC,GAEZ13C,SACI,qGACqBy3C,EADrB,iBAEyBC,EAFzB,yBAQZ5B,qBAAsB,SAASxS,EAAQn+C,GACnC,IACIrJ,EADOG,KACQH,QACfi8D,EAAcj8D,EAAQw5D,OAAOzsD,MAC7BmvD,EAAe1U,EAAOhqC,SAASrC,MAAQnb,EAAQu5D,IAAM,EAAIz3D,EAAW0lD,IAGpE2U,EAAgB9yD,EAAEo5C,QAAUthD,EAAEqmD,EAAO,GAAGr3B,eAAeuyB,aAE3D,OAAKyZ,EAAiBD,EAAeD,GAAkBE,EAAiBD,EAAeD,CAM3F,EAEA9B,wBAAyB,SAAS3S,GAC9B,IAAIz/C,EAAO5H,KACPi8D,EAAoBj7D,EAAE4G,EAAKJ,QAAQiyB,OAAS7xB,EAAKJ,QAAQ00D,QAAQ,IACjEr8D,EAAU+H,EAAK/H,QACfu5D,EAAMv5D,EAAQu5D,IACd0C,EAAcj8D,EAAQw5D,OAAOzsD,MAC7BssD,EAAcl4D,EAAEnB,EAAQq5D,aACxBiD,EAAkBjD,EAAYv4C,GAAG+6C,GAAQ,EAAIxC,EAAYx+C,YACzD0hD,EAAmBlD,EAAYv4C,GAAG+6C,GAAQ,EAAIl8D,EAAM+iD,WAAW2W,GAC/DmD,EAAoBjD,EAAM,EAAIz3D,EAAW0lD,GACzCiV,EAAiBlD,EAAMf,EAAkBa,EAAY,IAAM,EAC3DqD,EAAmBlV,EAAOhqC,SAASrC,MACdk+C,EAAY77C,SAASrC,KAAO+pC,WAAWmU,EAAY1oD,IAAI,qBACxDu0C,WAAWsC,EAAO72C,IAAI,eAC1CgsD,EAAwBP,EAAkB5+C,SAASpC,KAC9Bi+C,EAAY77C,SAASpC,IAAM8pC,WAAWmU,EAAY1oD,IAAI,oBACvDu0C,WAAWkX,EAAkBzrD,IAAI,cACrD/O,EAAUjC,EAAM+B,QAAQE,QAExB23D,IAAQ33D,EAAQklB,SAAYllB,EAAQwoD,QAAUxoD,EAAQ+rB,SAAW,MACjE4uC,IAAuC,GAG3Cx0D,EAAKgyD,aAAappD,IAAI,CAClByK,IAAKuhD,EAAwBL,EAC7BnhD,KAAMuhD,EAAmBF,GAAqBD,EAAmBE,GAAmBR,EAAc,EAClG3uD,SAAU,YAElB,EAEA8sD,0BAA2B,WACvB,IAAIryD,EAAO5H,KACPy8D,EAAYz7D,EAAE4G,EAAKJ,SAAS80B,SAASyjB,GACrC2c,EAAY17D,EAAE4G,EAAKJ,SAAS80B,SAAS0jB,GACrC2c,EAAaF,EAAU57D,OAAS,EAAI47D,EAAU5vD,SAAW6vD,EAAU7vD,SAAW6vD,EAAU7vD,SAE5FjF,EAAKgyD,aAAappD,IAAI,CAClB5D,MAAOhF,EAAK/H,QAAQw5D,OAAOzsD,MAC3BC,OAAQ8vD,GAEhB,EAEA9B,4BAA6B,SAAS3xD,GAClC,IAAItB,EAAO5H,KACPqnD,EAASrmD,EAAEA,EAAEkI,EAAEye,eAAe5N,KAAKnS,EAAK/H,QAAQw5D,OAAOC,gBACvDz5D,EAAU+H,EAAK/H,QACfq5D,EAAcl4D,EAAEnB,EAAQq5D,aACxB4C,EAAcj8D,EAAQw5D,OAASx5D,EAAQw5D,OAAOzsD,MAAQ,EACtDqb,EAAMpoB,EAAQooB,IACdmxC,EAAMv5D,EAAQu5D,IACdwD,EAAcj7D,EAAW0lD,GACzBwV,EAAmBxV,EAAOhqC,SAASrC,MACdk+C,EAAY77C,SAASrC,KAAO+pC,WAAWmU,EAAY1oD,IAAI,qBACxDu0C,WAAWsC,EAAO72C,IAAI,eAC1CssD,EAAsBn7D,EAAW0lD,EAAO/pC,QACxCs8C,EAAe54D,EAAE4G,EAAKgyD,cACtBwC,EAAmBlD,EAAYv4C,GAAG+6C,GAAQ,EAAIl8D,EAAM+iD,WAAW2W,GAC/DoD,EAAiBlD,EAAMf,EAAkBa,EAAY,IAAM,EAC3D6D,EAAyBnD,EAAav8C,SAASrC,MAClBk+C,EAAY77C,SAASrC,KAAO+pC,WAAWmU,EAAY1oD,IAAI,qBACxDu0C,WAAW6U,EAAappD,IAAI,eACxD/O,EAAUjC,EAAM+B,QAAQE,QAExB23D,IAAQ33D,EAAQklB,SAAYllB,EAAQwoD,QAAUxoD,EAAQ+rB,SAAW,MACjE4uC,IAAuC,GAG3C,IAAIY,EAAe9E,EAAU,CACzB1mD,MAAOurD,GAA0BX,EAAmBE,GAAkBpzD,EAAEooB,EAAEzJ,MAC1EI,IAAK40C,GAAoBT,EAAmBE,IAAmBlD,EAAM0D,EAAsB,GAAK70C,EAChGC,IAAK20C,EAAmBD,GAAeR,EAAmBE,IAAmBlD,EAAM,EAAI0D,GAAuBhB,EAAc7zC,IAGhI2xC,EAAappD,IAAI,CAAEwK,KAAMgiD,GAC7B,EAEAvzD,OAAQ,SAASP,GACb,IAMI+zD,EACAC,EACAC,EACAzkC,EACA0kC,EAVAx1D,EAAO5H,KACPqnD,EAASrmD,EAAEA,EAAEkI,EAAEye,eAAe5N,KAAKnS,EAAK/H,QAAQw5D,OAAOC,gBACvDz5D,EAAU+H,EAAK/H,QACfw9D,EAAcx9D,EAAQu5D,KAAQ,EAAK,EACnCnxC,EAAMpoB,EAAQooB,IACdq1C,EAAgBD,EAAcn0D,EAAEooB,EAAEvJ,aAOtChgB,EAAImwB,kBAAkBtwB,EAAKJ,QAASm0D,GAEpCjjC,EAAWhT,SAAS2hC,EAAOjvC,KAAKujD,GAAU,IAEtCtU,EAAOxpB,KAAK,WAAa,IACzBwpB,EAASrmD,EAAE4G,EAAKJ,SAAS+B,KAAK,IAAMoyD,EAAU,KAAOjjC,EAAW2uB,EAAOxpB,KAAK,WAAa,GAAK,KAAKmkB,GAAG,GACtGtpB,EAAWhT,SAAS2hC,EAAOjvC,KAAKujD,GAAU,KAG9CyB,EAAap8D,EAAE4G,EAAKJ,SAAS+B,KAAK,IAAMoyD,EAAU,KAAOjjC,EAAW,GAAK,oBAEzE9wB,EAAK21D,yBACL31D,EAAK41D,2BAELL,EAAqBx7D,EAAW0lD,GAChC6V,EAA6Bv7D,EAAWy7D,GAExCH,EAAW/E,EAAU,CACjB1mD,MAAO2rD,EAAqBG,EAC5Br1C,IAAKA,EACLC,IAAKi1C,EAAqBD,EAA6Bj1C,IAG3DrgB,EAAK61D,cAAcpW,EAAO,GAAI4V,GAC9Br1D,EAAK81D,2BAA2BrW,EAAO,GAAI4V,GAC3Cr1D,EAAK+1D,uBAAuBj4C,SAAS2hC,EAAOjvC,KAAKujD,GAAS,IAAKuB,EAA4BC,EAAqBA,EAAqBF,GAErIl1D,EAAIuwB,mBAAmB1wB,EAAKJ,QAASm0D,EACzC,EAEA4B,uBAAwB,WACpB,IAAI/1D,EAAUxH,KAAKwH,QAEU,KAAzBA,EAAQkD,MAAMmxD,KACdr0D,EAAQkD,MAAMmxD,GAASlD,EAASh3D,EAAWX,EAAEwG,KAErD,EAEAg2D,yBAA0B,WACtB,IAQI/6D,EAPAw5D,EAAoBj7D,EADbhB,KACoBwH,QAAQiyB,OAD5Bz5B,KAC0CwH,QAAQ00D,QAAQ,IACjE0B,EAAoBj8D,EAAWs6D,GAC/BttD,EAAUstD,EAAkB3/B,SAAS2jB,GAAI3jB,SArL5C,MAsLGz7B,EAAS8N,EAAQ9N,OACjBg9D,EAAuBlvD,EAAQ4E,KAAI,WACnC,OAAO5R,EAAWX,EAAEhB,MACxB,IAGA,IAAKyC,EAAI,EAAGA,EAAI5B,EAAQ4B,IAChBu1D,EAAcrpD,EAAQlM,GAAGiI,MAAMmxD,IAC/BltD,EAAQlM,GAAGiI,MAAMmxD,GAASnD,EAAcH,EAAyBsF,EAAqBp7D,GAAIm7D,IAG1FjvD,EAAQlM,GAAGiI,MAAMmxD,GAASlD,EAASkF,EAAqBp7D,GAGpE,EAEAi7D,2BAA4B,SAASrW,EAAQ4V,GACzC,IAQIx6D,EARAmF,EAAO5H,KACPukD,EAAcvjD,EAAEqmD,GAAQjvC,KAAKujD,GAC7BmC,EAAsB98D,EAAE4G,EAAKJ,SAAS80B,SAAS0jB,EAAQ4b,EAAQ7b,GAAOzjB,SAAS2jB,GAAI3jB,SAAS10B,EAAK/H,QAAQ8C,KAAK0W,KAAKuiD,IAClH3kD,QAAO,WAEJ,OAAQjW,EADGhB,MACKoY,KAAKujD,KAAapX,GADvBvkD,OAC+CqnD,CAC9D,IACAxmD,EAASi9D,EAAoBj9D,OAGjC,IAAK4B,EAAI,EAAGA,EAAI5B,EAAQ4B,IACpBmF,EAAK61D,cAAcK,EAAoBr7D,GAAIw6D,EAEnD,EAEAQ,cAAe,SAASpW,EAAQ4V,GAC5B,IAAIc,EAAoB/8D,EAAEhB,KAAKwH,QAAQiyB,OAASz5B,KAAKwH,QAAQ00D,QAAQ,IACjElE,EAAc3Q,EAAO38C,MAAMmxD,IAC3BxU,EAAO38C,MAAMmxD,GAASnD,EAAcH,EAAyB0E,EAAUt7D,EAAWo8D,KAGlF1W,EAAO38C,MAAMmxD,GAASlD,EAASsE,EAEvC,EAEAU,uBAAwB,SAASpZ,EAAa2Y,EAA4BC,EAAoBa,GAC1F,IAMIv7D,EANAmF,EAAO5H,KACPi+D,EAAkBj9D,EAAE4G,EAAKJ,SAAS80B,SAAS0jB,EAAQ4b,EAAQ7b,GAAOzjB,SAAS2jB,GAAI3jB,SAAS10B,EAAK/H,QAAQ8C,KAAK0W,KAAKuiD,IAC9G3kD,QAAO,WACJ,OAAQyO,SAAS1kB,EAAEhB,MAAMoY,KAAKujD,GAAS,MAASpX,EAAc,CAClE,IACA1jD,EAASo9D,EAAgBp9D,OAG7B,IAAK4B,EAAI,EAAGA,EAAI5B,EAAQ4B,IACpBmF,EAAKs2D,sBAAsBD,EAAgBx7D,GAAIy6D,EAA4BC,EAAoBa,EAEvG,EAEAE,sBAAuB,SAASC,EAAgBjB,EAA4BC,EAAoBa,GAC5F,IAEIf,EADAh1C,EADOjoB,KACIH,QAAQooB,IAGvBg1C,EAAW/E,EAAU,CACjB1mD,MAAO0rD,EAA6Bc,EACpC/1C,IAAKA,EACLC,IAAKqzC,EAAI4B,EAAqBD,EAA6Bj1C,KAPpDjoB,KAUNy9D,cAAcU,EAAgBlB,EACvC,IAGJn0C,EAAeC,OAAS,SAASjhB,GAC7BixD,EAAqBhwC,OAAOjhB,EAAQ,CAChCvF,KAAM,iBACNmF,KAAMohB,EACNmwC,eAAgBj0C,GAExB,EAEA8D,EAAeJ,QAAU,SAAS5gB,GAC9BixD,EAAqBrwC,QAAQ5gB,EAAQ,CACjCmxD,eAAgBj0C,GAExB,EAEArlB,EAAOmG,EAAQ,CACXgjB,eAAgBA,GAGvB,CA1SD,CA0SG5nB,OAAO1B,OAEV,SAAUA,EAAOyB,GACb,IACIs6D,EADOr6D,OAAOknB,KACHmzC,IAEXv6D,EAAIxB,EAAM2sB,OACVxsB,EAASqB,EAAErB,OAEXmG,EAAStG,EAAM6B,GAAGyG,OAClBixD,EAAuBjzD,EAAOizD,qBAC9Bd,EAAgBnyD,EAAOmyD,cACvBI,EAAoBJ,EAAcI,kBAClCH,EAAYD,EAAcC,UAC1BK,EAA2BN,EAAcM,yBACzCP,EAAgBC,EAAcD,cAC9BU,EAAgBT,EAAcS,cAC9BC,EAAWV,EAAcU,SACzB92D,EAAcrC,EAAMsC,aAEpBkjB,EAAK,0BACLw2C,EAAsB,sBAEtBC,EAAsB,sBAEtBC,EAAO,OACPzb,EAAK,KACLD,EAAQ,QACRD,EAAQ,QAGRqe,EAAS,SAETx1C,EAAcmwC,EAAqBp5D,OAAO,CAC1CE,QAAS,CACL8C,KAAM,CAACs9C,GACPh4B,IAAK,GACLixC,YAAa,KACbD,eAAgBj0C,EAChBo0C,KAAK,EACLC,OAAQ,CACJC,cAAe,MACf1sD,MAAO,EACPC,OAAQ,GACR4pB,WAAY,CACR4iC,OAAQmC,EACRpnC,OAAQqnC,GAEZ13C,SACI,kGACqBy3C,EADrB,0DAG6BC,EAH7B,+BAUZ5B,qBAAsB,SAASF,EAAczwD,GACzC,IACIm1D,EADOr+D,KACaH,QAAQw5D,OAAO+E,GACnCrC,EAAepC,EAAat8C,SAASpC,IAAMpZ,EAAY83D,GACvDqC,EAAgB9yD,EAAEm5C,QAAUrhD,EAAE24D,EAAa,GAAG3pC,eAAetV,YAEjE,OAAKshD,EAAiBD,EAAesC,GAAmBrC,EAAiBD,EAAesC,CAM5F,EAEArE,wBAAyB,SAAS1/B,GAC9B,IACIz6B,EADOG,KACQH,QACfw+D,EAAex+D,EAAQw5D,OAAO+E,GAC9BlF,EAAcl4D,EAAEnB,EAAQq5D,aACxBiD,EAAkBjD,EAAYv4C,GAAG+6C,GAAQ,EAAIxC,EAAYx+C,YACzD0hD,EAAmBlD,EAAYv4C,GAAG+6C,GAAQ,EAAIl8D,EAAM+iD,WAAW2W,GAC/DoD,EAAiBz8D,EAAQu5D,IAAMf,EAAkBa,EAAY,IAAM,EAEnEoF,EAAgBhkC,EAAIjd,SAASrC,MACRk+C,EAAY77C,SAASrC,KAAO+pC,WAAWmU,EAAY1oD,IAAI,qBACxDu0C,WAAWzqB,EAAI9pB,IAAI,eACvC+tD,EAAejkC,EAAIjd,SAASpC,KACPi+C,EAAY77C,SAASpC,IAAM8pC,WAAWmU,EAAY1oD,IAAI,oBACvDu0C,WAAWzqB,EAAI9pB,IAAI,cACvC/O,EAAUjC,EAAM+B,QAAQE,QAExB5B,EAAQu5D,MAAQ33D,EAAQklB,SAAYllB,EAAQwoD,QAAUxoD,EAAQ+rB,SAAW,MACzE4uC,IAAuC,GAjBhCp8D,KAoBN45D,aAAappD,IAAI,CAClByK,IAAKsjD,EAAe18D,EAAYy4B,GAAO6hC,EAAmBkC,EAAe,EACzErjD,KAAMsjD,GAAiBlC,EAAmBE,GAC1CnvD,SAAU,YAElB,EAEA8sD,0BAA2B,WACvB,IAAIryD,EAAO5H,KACP+9D,EAAoB/8D,EAAE4G,EAAKJ,QAAQiyB,OAAS7xB,EAAKJ,QAAQ00D,QAAQ,IAErEt0D,EAAKgyD,aAAappD,IAAI,CAClB5D,MAAOmxD,EAAkBnxD,QACzBC,OAAQjF,EAAK/H,QAAQw5D,OAAO+E,IAEpC,EAEAvD,4BAA6B,SAAS3xD,GAClC,IAAItB,EAAO5H,KACPH,EAAU+H,EAAK/H,QACfooB,EAAMpoB,EAAQooB,IACdw0C,EAAYz7D,EAAE4G,EAAKJ,SAAS80B,SAASyjB,GACrC2c,EAAY17D,EAAE4G,EAAKJ,SAAS80B,SAAS0jB,GACrCwe,EAAuB/B,EAAU57D,OAAS,EAAI47D,EAAYC,EAC1D9C,EAAe54D,EAAE4G,EAAKgyD,cACtBt/B,EAAMt5B,EAAEkI,EAAEye,eAAe5N,KAAKla,EAAQw5D,OAAOC,eAC7CmF,EAAOz9D,EAAEs5B,GACT4+B,EAAcl4D,EAAEnB,EAAQq5D,aACxBiD,EAAkBjD,EAAYv4C,GAAG+6C,GAAQ,EAAIxC,EAAYx+C,YACzDgkD,EAAiBF,EAAqBnhD,SAASpC,KAC1Bi+C,EAAY77C,SAASpC,IAAM8pC,WAAWmU,EAAY1oD,IAAI,oBACvDu0C,WAAWyZ,EAAqBhuD,IAAI,cAExD+tD,EAAeE,EAAKphD,SAASpC,KACZi+C,EAAY77C,SAASpC,IAAM8pC,WAAWmU,EAAY1oD,IAAI,oBACvDu0C,WAAW0Z,EAAKjuD,IAAI,cAEpCmuD,EAAwB/E,EAAav8C,SAASpC,KAC7BmN,KAAKF,IAAI,EAAIgxC,EAAY77C,SAASpC,KAAO8pC,WAAWmU,EAAY1oD,IAAI,oBACrEu0C,WAAW6U,EAAappD,IAAI,cAE5CwsD,EAAe9E,EAAU,CACzB1mD,MAAOmtD,EAAwBxC,EAAkBjzD,EAAE4e,EAAED,MACrDI,IAAKs2C,EAAepC,EAAkBl0C,EACtCC,IAAKw2C,EAAiB78D,EAAY46D,GAAa56D,EAAY66D,GAAaP,EAAkBt8D,EAAQw5D,OAAO+E,GAAUn2C,IAGvH2xC,EAAappD,IAAI,CAAEyK,IAAK+hD,GAC5B,EAEAvzD,OAAQ,SAASP,GACb,IAAItB,EAAO5H,KACPH,EAAU+H,EAAK/H,QACfy6B,EAAMt5B,EAAEkI,EAAEye,eAAe5N,KAAKla,EAAQw5D,OAAOC,eAC7CsF,EAAmB/8D,EAAYb,EAAEs5B,IACjC9yB,EAAUxG,EAAE4G,EAAKJ,SACjBq3D,EAAqBh9D,EAAY2F,GACjCi1D,EAAYj1D,EAAQ80B,SAASyjB,GAC7B+e,EAAkBrC,EAAU57D,OAAS,EAAI47D,EAAU5vD,SAAW,EAE9DkyD,EADYv3D,EAAQ80B,SAAS0jB,GACDnzC,SAC5BmyD,EAAqB1kC,EAAI5vB,MAAM0zD,GAC/Ba,EAAe/G,EAAU,CACzB1mD,MAAOotD,EAAmB11D,EAAE4e,EAAEC,aAC9BE,IAAKpoB,EAAQooB,IACbC,IAAKqzC,EAAIuD,EAAkBC,EAAkBl/D,EAAQooB,OAGzDrgB,EAAKs3D,yBACL5kC,EAAI5vB,MAAM0zD,GAAUzF,EAASsG,GAC7Br3D,EAAKu3D,gBAAgBN,GAAsBI,EAAeL,IAEtD5G,EAAcgH,IAEdp3D,EAAKw3D,6BAEb,EAEAF,uBAAwB,WACpB,IAMIz8D,EALAmM,EAAO5N,EADAhB,KACOwH,SAAS80B,SAAS0jB,EAhJhC,IAgJgDD,GAAOzjB,SAAS2jB,GAChEp/C,EAAS+N,EAAK/N,OACdw+D,EAAqBzwD,EAAK2E,KAAI,WAC9B,OAAO1R,EAAYb,EAAEhB,MACzB,IAGA,IAAKyC,EAAI,EAAGA,EAAI5B,EAAQ4B,IACpBmM,EAAKnM,GAAGiI,MAAM0zD,GAAUzF,EAAS0G,EAAmB58D,GAE5D,EAEA28D,4BAA6B,WACzB,IAUI38D,EAVAmF,EAAO5H,KACPy8D,EAAYz7D,EAAE4G,EAAKJ,SAAS80B,SAASyjB,GACrC+e,EAAkBrC,EAAU57D,OAAS,EAAI47D,EAAU5vD,SAAW,EAE9DkyD,EADY/9D,EAAE4G,EAAKJ,SAAS80B,SAAS0jB,GACTnzC,SAC5B+B,EAAO5N,EAAE4G,EAAKJ,SAAS80B,SAASyjB,EAlKhC,IAkKgDC,GAAO1jB,SAAS2jB,GAChEp/C,EAAS+N,EAAK/N,OACdw+D,EAAqBzwD,EAAK2E,KAAI,WAC9B,OAAO1R,EAAYb,EAAEhB,MACzB,IAGA,IAAKyC,EAAI,EAAGA,EAAI5B,EAAQ4B,IACpBmM,EAAKnM,GAAGiI,MAAM0zD,GAAU1F,EAAcH,EAAyB8G,EAAmB58D,GAAIq8D,EAAkBC,GAEhH,EAEAI,gBAAiB,SAASG,GACtB,IAAI93D,EAAUxH,KAAKwH,QAEfwwD,EAAcxwD,EAAQkD,MAAM0zD,IAC5B52D,EAAQkD,MAAM0zD,GAAU1F,EAAcH,EAAyB+G,EAAWt+D,EAAEwG,GAASuZ,SAASlU,WAG9FrF,EAAQkD,MAAM0zD,GAAUzF,EAAS2G,EAEzC,IAGJ12C,EAAYG,OAAS,SAASjhB,GAC1BixD,EAAqBhwC,OAAOjhB,EAAQ,CAChCvF,KAAM,cACNmF,KAAMkhB,EACNqwC,eAAgBj0C,GAExB,EAEA4D,EAAYF,QAAU,SAAS5gB,GAC3BixD,EAAqBrwC,QAAQ5gB,EAAQ,CACjCmxD,eAAgBj0C,GAExB,EAEArlB,EAAOmG,EAAQ,CACX8iB,YAAaA,GAGpB,CAxOD,CAwOG1nB,OAAO1B,OAEV,SAAUA,EAAOyB,GACb,IAAID,EAAIxB,EAAM2sB,OACVxsB,EAASqB,EAAErB,OACX0qB,EAAOrpB,EAAEqpB,KAETvkB,EAAStG,EAAM6B,GAAGyG,OAClB3G,EAAQ3B,EAAM2B,MACdo+D,EAAY//D,EAAM6B,GAAGk+D,UACrB7/D,EAAaF,EAAME,WACnB24D,EAAoBvyD,EAAOmyD,cAAcI,kBACzC12D,EAAanC,EAAMoC,YACnBC,EAAcrC,EAAMsC,aAEpBkjB,EAAK,kCACLw2C,EAAsB,0BAEtBgE,EAAa,YACbC,EAAO,OACPC,EAAW,UACXC,EAAc,aACdC,EAAa,YACbC,EAAY,WAKZC,EAAO,OACPC,EAAQ,QACRC,EAAY,YACZC,EAAY,YACZC,EAAQ,QACRC,EAAY,YACZC,EAAY,YACZC,EAAO,OAIPC,EAAsB5gE,EAAWC,OAAO,CACxCC,KAAM,SAASC,GACX,IAAI+H,EAAO5H,KAEXN,EAAWI,GAAGF,KAAKG,KAAK6H,GAExBA,EAAK/H,QAAUF,EAAO,CAAC,EAAGiI,EAAK/H,QAASA,GACxC+H,EAAKJ,QAAUxG,EAAE4G,EAAK/H,QAAQkkB,UAAU5I,SAASvT,EAAK/H,QAAQsb,UAAU,GAExEvT,EAAKoxD,uBACLpxD,EAAK24D,aACL34D,EAAK44D,iBACL54D,EAAK64D,2BACL74D,EAAK84D,wBAEL1/D,EAAE4G,EAAKJ,SAASuS,KA5BZ,QA4BwBnS,EAAK/H,QAAQ8gE,iBAC7C,EAEAjvD,QAAS,WACL,IAAI9J,EAAO5H,KAEXgB,EAAE4G,EAAKJ,SAAS8S,IAAI0K,GAAI3P,SACxBzN,EAAKJ,QAAU,KAEfI,EAAKg5D,oBAELh5D,EAAKoP,QACT,EAEAnX,QAAS,CACLsb,SAAU,KACViY,UAAW+sC,EACXQ,iBAAkB,KAClBvH,KAAK,EACLr1C,SACI,sGACqBy3C,EADrB,kBAKRt7D,OAAQ,CACJs/D,EACAC,EACAC,EACAE,EACAC,GAGJh5C,KAAM,WACF7mB,KAAK6gE,cACT,EAEAA,aAAc,WACV,IACI1zD,EADOnN,KACS8gE,qBAAqBC,cAEzC//D,EAHWhB,KAGJwH,SAASgJ,IAAI,CAChByK,IAAK9N,EAAS8N,IACdD,KAAM7N,EAAS6N,KACf7N,SAAU,YAElB,EAEA6rD,qBAAsB,WAClB,IAAIpxD,EAAO5H,KAEXgB,EAAE4G,EAAKJ,SACFkZ,GAAGk/C,EAAa56C,EAAIpd,EAAKo5D,aAAa54D,KAAKR,IAC3C8Y,GAAGm/C,EAAY76C,EAAIpd,EAAKq5D,YAAY74D,KAAKR,GAClD,EAEAo5D,aAAc,WACVhhE,KAAKU,QAAQk/D,EACjB,EAEAqB,YAAa,WACTjhE,KAAKU,QAAQm/D,EACjB,EAEAU,WAAY,WAERv/D,EADWhB,KACJwH,SAAS80B,SAnFd,IAmF6Bk/B,GAAqBrjD,SAAS,YADlDnY,KACqEH,QAAQuzB,UAC5F,EAEAqtC,yBAA0B,WACtB,IAAI74D,EAAO5H,KACPH,EAAU+H,EAAK/H,QAEnB+H,EAAKk5D,qBAAuBI,EAA0Bn4C,OAAO,CACzDxmB,KAAM1C,EAAQuzB,UACdimC,OAAQzxD,EAAKJ,QACbm5D,iBAAkB9gE,EAAQ8gE,iBAC1BzH,YAAar5D,EAAQq5D,YACrBE,IAAKv5D,EAAQu5D,KAErB,EAEAoH,eAAgB,WACZ,IAAI54D,EAAO5H,KACPwH,EAAUI,EAAKJ,SAEfI,EAAKu5D,YAAe35D,IAIxBI,EAAKu5D,WAAa,IAAI5B,EAAU/3D,EAAS,CACrC45D,UAAWx5D,EAAKy5D,aAAaj5D,KAAKR,GAClC05D,KAAM15D,EAAK25D,QAAQn5D,KAAKR,GACxB4Z,QAAS5Z,EAAK45D,WAAWp5D,KAAKR,KAEtC,EAEAy5D,aAAc,WACVrhE,KAAKU,QAAQ8+D,EACjB,EAEA+B,QAAS,SAASr4D,GACHlJ,KAENU,QAAQ++D,EAFFz/D,KAEayhE,kBAAkBC,gBAAgB,CACtDC,OAAQz4D,EAAEooB,EAAEzJ,MACZ+5C,OAAQ14D,EAAE4e,EAAED,MACZy1C,cAAep0D,EAAEooB,EAAEvJ,aACnB85C,cAAe34D,EAAE4e,EAAEC,eAE3B,EAEAy5C,WAAY,WACRxhE,KAAKU,QAAQg/D,EACjB,EAEAkB,kBAAmB,WACf,IAAIh5D,EAAO5H,KAEP4H,EAAKu5D,aACLv5D,EAAKu5D,WAAWzvD,UAChB9J,EAAKu5D,WAAa,KAE1B,EAEAT,sBAAuB,WACR1gE,KAENyhE,kBAAoBK,EAAuB/4C,OAAO,CACnDxmB,KAHOvC,KAGIH,QAAQuzB,WAE3B,IAGA2uC,EAAkB5gE,EAAMxB,OAAO,CAC/BC,KAAM,WACFI,KAAKgiE,OAAS,EAClB,EAEAC,SAAU,SAAS1/D,EAAMmF,GACrB1H,KAAKgiE,OAAO7hE,KAAK,CACboC,KAAMA,EACNmF,KAAMA,GAEd,EAEAqhB,OAAQ,SAASlpB,GACb,IAGI+3B,EACAuG,EACA17B,EALAiX,EAAQ1Z,KAAKgiE,OACbE,EAAcxoD,EAAM7Y,OACpB0B,EAAO1C,EAAQ0C,KAAO1C,EAAQ0C,KAAKmD,cAAgB,GAKvD,IAAKjD,EAAI,EAAGA,EAAIy/D,EAAaz/D,IAGzB,IAFA07B,EAAOzkB,EAAMjX,IAEJF,KAAKmD,gBAAkBnD,EAAM,CAClCq1B,EAAQuG,EACR,KACJ,CAGJ,GAAIvG,EACA,OAAO,IAAIA,EAAMlwB,KAAK7H,EAE9B,IAGAsiE,EAA6BJ,EAAgBpiE,OAAO,CAAC,GACzDwiE,EAA2B9/C,QAAU,IAAI8/C,EAEzC,IAAIjB,EAA4B//D,EAAMxB,OAAO,CACzCC,KAAM,SAASC,GACAG,KACNH,QAAUF,EAAO,CAAC,EADZK,KACoBH,QAASA,EAC5C,EAEAA,QAAS,CACLw5D,OAAQ,KACRh8C,OAAQsiD,EACRgB,iBAAkB,KAClBzH,YAAa,KACbE,KAAK,GAGT2H,YAAa,WACT,IAAIn5D,EAAO5H,KAEPmN,EAAWvF,EAAKw6D,oBAChBC,EAAuBz6D,EAAK06D,kBAAkBn1D,GAGlD,OAF2BvF,EAAK26D,kBAAkBF,EAGtD,EAEAD,kBAAmB/3C,EAEnBi4C,kBAAmB,SAASn1D,GACxB,IAAItN,EAAUG,KAAKH,QACfw5D,EAASr4D,EAAEnB,EAAQw5D,QAEvB,OAAIx5D,EAAQwd,SAAWsiD,EACZ,CACH1kD,IAAK9N,EAAS8N,IAAOpZ,EAAYw3D,GAAU,EAC3Cr+C,KAAM7N,EAAS6N,KAAQrZ,EAAW03D,GAAU,GAI7ClsD,CACX,EAEAo1D,kBAAmB,SAASp1D,GACxB,IAIIq1D,EAJA3iE,EAAUG,KAAKH,QACfq5D,EAAcl4D,EAAEnB,EAAQq5D,aACxBoD,EAAiBz8D,EAAQu5D,IAAMf,EAAkBa,EAAY,IAAM,EACnEz3D,EAAUjC,EAAM+B,QAAQE,QAG5B,OAAKy3D,EAAYv4C,GAxPd,QAqQIxT,GAZHq1D,EAAWhjE,EAAM+iD,WAAW2W,IAAgB,EAExCr5D,EAAQu5D,MAAQ33D,EAAQklB,SAAYllB,EAAQwoD,QAAUxoD,EAAQ+rB,SAAW,MACzEg1C,IAAuB,GAGpB,CACHvnD,IAAK9N,EAAS8N,KAAOi+C,EAAYx+C,aAAe,GAChDM,KAAM7N,EAAS6N,KAAOwnD,EAAWlG,GAK7C,IAGJ4E,EAA0Bn4C,OAAS,SAASlpB,GACxC,OAAOsiE,EAA2B9/C,QAAQ0G,OAAOlpB,EACrD,EAEA,IAAI4iE,EAA0BvB,EAA0BvhE,OAAO,CAC3DyiE,kBAAmB,WACf,IAAIzB,EAAmB3/D,EAAEhB,KAAKH,QAAQ8gE,kBAClCtjD,EAASsjD,EAAiBxzD,WAC1BwnC,EAAajvB,SAASi7C,EAAiBnwD,IAAI,cAAe,IAE9D,MAAO,CACHyK,IAAKoC,EAAOpC,IAAOpZ,EAAY8+D,GAAoB,EACnD3lD,KAAMqC,EAAOrC,KAAOrZ,EAAWg/D,GAAoBhsB,EAE3D,IAEJwtB,EAA2B9/C,QAAQ4/C,SAASnC,EAAM2C,GAElD,IAAIC,EAA2BxB,EAA0BvhE,OAAO,CAC5DyiE,kBAAmB,WACf,IAAIzB,EAAmB3/D,EAAEhB,KAAKH,QAAQ8gE,kBAClCtjD,EAASsjD,EAAiBxzD,WAC1BwnC,EAAajvB,SAASi7C,EAAiBnwD,IAAI,cAAe,IAE9D,MAAO,CACHyK,IAAKoC,EAAOpC,IACZD,KAAMqC,EAAOrC,KAAQrZ,EAAWg/D,GAAoB,EAAKhsB,EAEjE,IAEJwtB,EAA2B9/C,QAAQ4/C,SAASlC,EAAO2C,GAEnD,IAAIC,EAA+BzB,EAA0BvhE,OAAO,CAChEyiE,kBAAmB,WACf,IAAIzB,EAAmB3/D,EAAEhB,KAAKH,QAAQ8gE,kBAClCtjD,EAASsjD,EAAiBxzD,WAC1BwnC,EAAajvB,SAASi7C,EAAiBnwD,IAAI,cAAe,IAE9D,MAAO,CACHyK,IAAKoC,EAAOpC,IACZD,KAAMqC,EAAOrC,KAAOrZ,EAAWg/D,GAAoBhsB,EAE3D,IAEJwtB,EAA2B9/C,QAAQ4/C,SAASjC,EAAW2C,GAEvD,IAAIC,EAA+B1B,EAA0BvhE,OAAO,CAChEyiE,kBAAmB,WACf,IAAIzB,EAAmB3/D,EAAEhB,KAAKH,QAAQ8gE,kBAClCtjD,EAASsjD,EAAiBxzD,WAC1BwnC,EAAajvB,SAASi7C,EAAiBnwD,IAAI,cAAe,IAE9D,MAAO,CACHyK,IAAKoC,EAAOpC,IACZD,KAAMqC,EAAOrC,KAAO25B,EAE5B,IAEJwtB,EAA2B9/C,QAAQ4/C,SAAShC,EAAW2C,GAEvD,IAAIC,EAA2B3B,EAA0BvhE,OAAO,CAC5DyiE,kBAAmB,WACf,IAAIzB,EAAmB3/D,EAAEhB,KAAKH,QAAQ8gE,kBAClCtjD,EAASsjD,EAAiBxzD,WAC1BwnC,EAAajvB,SAASi7C,EAAiBnwD,IAAI,cAAe,IAE9D,MAAO,CACHyK,IAAKoC,EAAOpC,IAAMpZ,EAAY8+D,GAC9B3lD,KAAMqC,EAAOrC,KAAQrZ,EAAWg/D,GAAoB,EAAKhsB,EAEjE,IAEJwtB,EAA2B9/C,QAAQ4/C,SAAS/B,EAAO2C,GAEnD,IAAIC,EAA+B5B,EAA0BvhE,OAAO,CAChEyiE,kBAAmB,WACf,IAAIzB,EAAmB3/D,EAAEhB,KAAKH,QAAQ8gE,kBAClCtjD,EAASsjD,EAAiBxzD,WAC1BwnC,EAAajvB,SAASi7C,EAAiBnwD,IAAI,cAAe,IAE9D,MAAO,CACHyK,IAAKoC,EAAOpC,IAAMpZ,EAAY8+D,GAC9B3lD,KAAMqC,EAAOrC,KAAOrZ,EAAWg/D,GAAoBhsB,EAE3D,IAEJwtB,EAA2B9/C,QAAQ4/C,SAAS9B,EAAW2C,GAEvD,IAAIC,EAA+B7B,EAA0BvhE,OAAO,CAChEyiE,kBAAmB,WACf,IAAIzB,EAAmB3/D,EAAEhB,KAAKH,QAAQ8gE,kBAClCtjD,EAASsjD,EAAiBxzD,WAC1BwnC,EAAajvB,SAASi7C,EAAiBnwD,IAAI,cAAe,IAE9D,MAAO,CACHyK,IAAKoC,EAAOpC,IAAMpZ,EAAY8+D,GAC9B3lD,KAAMqC,EAAOrC,KAAO25B,EAE5B,IAEJwtB,EAA2B9/C,QAAQ4/C,SAAS7B,EAAW2C,GAEvD,IAAIC,EAA0B9B,EAA0BvhE,OAAO,CAC3DyiE,kBAAmB,WACf,IAAIzB,EAAmB3/D,EAAEhB,KAAKH,QAAQ8gE,kBAClCtjD,EAASsjD,EAAiBxzD,WAC1BwnC,EAAajvB,SAASi7C,EAAiBnwD,IAAI,cAAe,IAE9D,MAAO,CACHyK,IAAKoC,EAAOpC,IAAOpZ,EAAY8+D,GAAoB,EACnD3lD,KAAMqC,EAAOrC,KAAO25B,EAE5B,IAEJwtB,EAA2B9/C,QAAQ4/C,SAAS5B,EAAM2C,GAElD,IAAIC,EAA0BlB,EAAgBpiE,OAAO,CAAC,GACtDsjE,EAAwB5gD,QAAU,IAAI4gD,EAEtC,IAAInB,EAAyB3gE,EAAMxB,OAAO,CACtCC,KAAM,SAASC,GACAG,KACNH,QAAUF,EAAO,CAAC,EADZK,KACoBH,QAASA,EAC5C,EAEAA,QAAS,CACL8hE,OAAQ,CACJuB,WAAY,KACZpO,SAAU,MAEd8M,OAAQ,CACJsB,WAAY,KACZpO,SAAU,OAIlB4M,gBAAiB,SAASyB,GACtB,IAAItjE,EAAUG,KAAKH,QACfujE,EAAkBvjE,EAAQ8hE,OAAOuB,WAAarjE,EAAQ8hE,OAAO7M,SAC7DuO,EAAkBxjE,EAAQ+hE,OAAOsB,WAAarjE,EAAQ+hE,OAAO9M,SAEjE,MAAO,CACH6M,OAAQwB,EAAOxB,OAASyB,EACxBxB,OAAQuB,EAAOvB,OAASyB,EACxB/F,cAAe6F,EAAO7F,cAAgB8F,EACtCvB,cAAesB,EAAOtB,cAAgBwB,EAE9C,IAGJvB,EAAuB/4C,OAAS,SAASlpB,GACrC,OAAOojE,EAAwB5gD,QAAQ0G,OAAOlpB,EAClD,EAEA,IAAIyjE,EAA6BxB,EAAuBniE,OAAO,CAC3DE,QAAS,CACL8hE,OAAQ,CACJuB,WAAY,EACZpO,SAAU,GAEd8M,OAAQ,CACJsB,WAAY,EACZpO,SAAU,MAKlByO,EAAuBD,EAA2B3jE,OAAO,CACzDE,QAAS,CACL8hE,OAAQ,CACJ7M,SAAU,MAItBmO,EAAwB5gD,QAAQ4/C,SAASnC,EAAMyD,GAE/C,IAAIC,EAAuBF,EAA2B3jE,OAAO,CACzDE,QAAS,CACL8hE,OAAQ,CACJ7M,UAAY,MAIxBmO,EAAwB5gD,QAAQ4/C,SAAS5B,EAAMmD,GAE/C,IAAIC,EAA2B3B,EAAuBniE,OAAO,CACzDE,QAAS,CACL8hE,OAAQ,CACJuB,WAAY,EACZpO,SAAU,GAEd8M,OAAQ,CACJsB,WAAY,EACZpO,SAAU,MAKlB4O,EAAwBD,EAAyB9jE,OAAO,CACxDE,QAAS,CACL+hE,OAAQ,CACJ9M,UAAY,MAIxBmO,EAAwB5gD,QAAQ4/C,SAASlC,EAAO2D,GAEhD,IAAIC,EAAwBF,EAAyB9jE,OAAO,CACxDE,QAAS,CACL+hE,OAAQ,CACJ9M,SAAU,MAItBmO,EAAwB5gD,QAAQ4/C,SAAS/B,EAAOyD,GAEhD,IAAIC,EAAwC9B,EAAuBniE,OAAO,CACtEE,QAAS,CACL8hE,OAAQ,CACJuB,WAAY,EACZpO,SAAU,GAEd8M,OAAQ,CACJsB,WAAY,EACZpO,SAAU,MAKlB+O,EAA4BD,EAAsCjkE,OAAO,CACzEE,QAAS,CACL8hE,OAAQ,CACJ7M,SAAU,GAEd8M,OAAQ,CACJ9M,UAAY,MAIxBmO,EAAwB5gD,QAAQ4/C,SAASjC,EAAW6D,GAEpD,IAAIC,EAA4BF,EAAsCjkE,OAAO,CACzEE,QAAS,CACL8hE,OAAQ,CACJ7M,UAAY,GAEhB8M,OAAQ,CACJ9M,UAAY,MAIxBmO,EAAwB5gD,QAAQ4/C,SAAShC,EAAW6D,GAEpD,IAAIC,EAA4BH,EAAsCjkE,OAAO,CACzEE,QAAS,CACL8hE,OAAQ,CACJ7M,SAAU,GAEd8M,OAAQ,CACJ9M,SAAU,MAItBmO,EAAwB5gD,QAAQ4/C,SAAS9B,EAAW4D,GAEpD,IAAIC,EAA4BJ,EAAsCjkE,OAAO,CACzEE,QAAS,CACL8hE,OAAQ,CACJ7M,UAAY,GAEhB8M,OAAQ,CACJ9M,SAAU,MAItBmO,EAAwB5gD,QAAQ4/C,SAAS7B,EAAW4D,GAEpDrkE,EAAOmG,EAAQ,CACXw6D,oBAAqBA,GAE5B,CAxjBD,CAwjBGp/D,OAAO1B,OAEV,SAAUA,EAAOyB,GACb,IACI22D,EADS12D,OACKknB,KACdH,EAAM2vC,EAAK3vC,IACXC,EAAM0vC,EAAK1vC,IAEXlnB,EAAIxB,EAAM2sB,OACVxW,EAAW3U,EAAE2U,SACbhW,EAASqB,EAAErB,OAEX8B,EAAUjC,EAAM+B,QAAQE,QACxBqE,EAAStG,EAAM6B,GAAGyG,OAClB3G,EAAQ3B,EAAM2B,MACdm/D,EAAsBx6D,EAAOw6D,oBAC7BrI,EAAgBnyD,EAAOmyD,cACvBM,EAA2BN,EAAcM,yBACzCL,EAAYD,EAAcC,UAC1BF,EAAgBC,EAAcD,cAC9BS,EAAWR,EAAcQ,SACzBC,EAAgBT,EAAcS,cAC9BC,EAAWV,EAAcU,SACzBh3D,EAAanC,EAAMoC,YACnBC,EAAcrC,EAAMsC,aACpByQ,EAAazM,EAAOyM,WAEpByS,EAAK,8BACLi/C,EAA8B,kCAE9BC,EAAyB,qBAEzB1E,EAAa,YACbC,EAAO,OACPC,EAAW,UACX9G,EAAW,UACXuL,EAAa,YACbpiE,EAAS,SAITy9C,EAAM,KACNQ,EAAQ,QACRD,EAAQ,QACRD,EAAQ,QAERskB,EAAgB,CAAC,QAAS,OAE1BxI,EAAQ,IACRC,EAAQ,QACRuC,EAAS,SAab,SAASiG,EAAY7yD,GACjB,YAAyB,IAAZ,CACjB,CAEA,IAAI8yD,EAAkBnjE,EAAMxB,OAAO,CAC/BC,KAAM,SAAS4H,EAAS3H,GACpB,IAAI+H,EAAO5H,KAEX4H,EAAK/H,QAAUF,EAAO,CAAC,EAAGiI,EAAK/H,QAASA,GACxC+H,EAAK28D,QAAU,GAGXH,EAAcx+C,QAAQpe,EAAQiV,WAAa,IAC3C7U,EAAKJ,QAAUA,EAEvB,EAEAkK,QAAS,WACL,IAAI9J,EAAO5H,KAEXgB,EAAE4G,EAAKJ,SAAS8S,IAAI0K,GACpBpd,EAAKJ,QAAU,KAEfxG,EAAE4G,EAAK/H,QAAQq5D,aAAa5+C,IAAIs+C,EAAW5zC,GAE3Cpd,EAAK48D,uBACT,EAEA3kE,QAAS,CACL4kE,gBAAiB,KACjBrL,KAAK,EACLF,YAAa,KACbvpB,SAAU,GACVvuB,UAAW,GACXmjD,QAAS,CAAC,CACNnxC,UA3CI,aA4CL,CACCA,UA/CA,SAgDD,CACCA,UAhDI,aAiDL,CACCA,UApDD,QAqDA,CACCA,UAjDI,aAkDL,CACCA,UApDA,SAqDD,CACCA,UApDI,aAqDL,CACCA,UArDD,UAyDP3pB,OAAQ,SAAS2hB,GACb,IAAIxjB,EAAO5H,KACPmjE,EAASxjE,EAAO,CAAC,EAAG,CACpBgiE,OAAQ,EACRC,OAAQ,EACRtE,cAAe,EACfuE,cAAe,GAChBz2C,GAEHxjB,EAAK88D,aAAavB,EAAOxB,OAAQwB,EAAO7F,eACxC11D,EAAK+8D,cAAcxB,EAAOvB,OAAQuB,EAAOtB,eAEzCj6D,EAAKuhB,mBACT,EAEAu7C,aAAc,WACV,OAAO,CACX,EAEAC,cAAe,WACX,OAAO,CACX,EAEAC,sBAAuB,SAASC,GAC5B,IAAIj9D,EAAO5H,KACPwH,EAAUxG,EAAE4G,EAAKJ,SACjBs9D,EAAqBD,EAAUn/D,cAC/B23D,EAAcz1D,EAAK/H,QAAQu5D,KAAQ,EAAK,EACxCr4C,EAAS/f,EAAE4G,EAAKJ,SAASuZ,SACzBvE,EAAgBuE,EAAO,GACvBgkD,EAAkBhkD,EAAO+jD,KACzBE,EAAqB3H,GAAewH,IAAchJ,EAAQr8D,EAAM+iD,WAAWxhC,GAAUA,EAAOrG,aAEhG,OAAI8B,GAAiBA,IAAkBhV,EAAQU,QA7G1C,MA6G0D,GACX,KAA5CsU,EAAc9R,MAAMo6D,IAA+B9M,EAAcpwD,EAAKJ,QAAQkD,MAAMo6D,IAI5EC,EAAkBC,EAHnB78C,IAOH48C,EAAkBC,CAElC,EAEA77C,kBAAmB,WACJnpB,KAENilE,qBAFMjlE,KAGNunD,oBACT,EAEA0d,mBAAoB,WAChB,IAKIxiE,EALAmF,EAAO5H,KACPukE,EAAU38D,EAAK28D,QACf1kE,EAAU+H,EAAK/H,QACf65D,EAAgB9xD,EAAK/H,QAAQ0kE,QAC7B1jE,EAAS64D,EAAc74D,OAG3B,KAAI0jE,GAAWA,EAAQ1jE,OAAS,GAAhC,CAIA,IAAK4B,EAAI,EAAGA,EAAI5B,EAAQ4B,IACpBmF,EAAK28D,QAAQpkE,KAAK,IAAImgE,EAAoB3gE,EAAO,CAC7Cwb,SAAUtb,EAAQ4kE,gBAClB9D,iBAAkB/4D,EAAKJ,QACvB0xD,YAAar5D,EAAQq5D,YACrBE,IAAKv5D,EAAQu5D,KACdM,EAAcj3D,MAGrBmF,EAAKs9D,4BAXL,CAYJ,EAEAV,sBAAuB,WAInB,IAHA,IAAI58D,EAAO5H,KACPa,EAAS+G,EAAK28D,QAAU38D,EAAK28D,QAAQ1jE,OAAS,EAEzC4B,EAAI,EAAGA,EAAI5B,EAAQ4B,IACxBmF,EAAK28D,QAAQ9hE,GAAGiP,UAGpB9J,EAAK28D,QAAU,EACnB,EAEAhd,mBAAoB,WAChB,IAGI9kD,EADA5B,GAFOb,KACQukE,SAAW,IACT1jE,OAGrB,IAAK4B,EAAI,EAAGA,EAAI5B,EAAQ4B,IALbzC,KAMFukE,QAAQ9hE,GAAGokB,MAExB,EAEAq+C,2BAA4B,WACxB,OAAO,CACX,EAEAC,yBAA0B,WACtB,IAAIv9D,EAAO5H,KACPwH,EAAUxG,EAAE4G,EAAKJ,SAErBA,EAAQ2Q,SAAS+rD,GAEjBt8D,EAAKw9D,sBAAwBvjE,EAAY2F,GACzCI,EAAKy9D,qBAAuB1jE,EAAW6F,GACvCI,EAAKgzD,kBACT,EAEA0K,oBAAqB,SAASp8D,GAC1BlJ,KAAKyJ,OAAOP,EAChB,EAEAq8D,uBAAwB,WAEpBvkE,EADWhB,KACJwH,SAASkY,YAAYwkD,GADjBlkE,KAEN86D,iBACT,EAEAA,gBAAiB,WACb95D,EAAEhB,KAAKH,QAAQq5D,aAAa5+C,IAAIs+C,EAAW5zC,EAC/C,EAEA41C,iBAAkB,WACd55D,EAAEhB,KAAKH,QAAQq5D,aAAax4C,GAAGk4C,EAAW5zC,GAAI,SAAS9b,GACnDA,EAAEgU,gBACN,GACJ,IAGAsoD,EAAgBlB,EAAgB3kE,OAAO,CACvCulE,2BAA4B,WACxB,IAGIziE,EACA42D,EAJAzxD,EAAO5H,KACPukE,EAAU38D,EAAK28D,SAAW,GAC1B1jE,EAAS0jE,EAAQ1jE,OAIrB,IAAK4B,EAAI,EAAGA,EAAI5B,EAAQ4B,KACpB42D,EAASkL,EAAQ9hE,IACV2F,KAAKo3D,EAAY53D,EAAKu9D,yBAAyB/8D,KAAKR,IAC3DyxD,EAAOjxD,KAAKq3D,EAAM73D,EAAK09D,oBAAoBl9D,KAAKR,IAChDyxD,EAAOjxD,KAAKs3D,EAAU93D,EAAK29D,uBAAuBn9D,KAAKR,GAE/D,EAEA69D,iBAAkB,WAId,IAHA,IACI72D,EAAO5N,EADAhB,KACOwH,SAAS80B,SAASyjB,EAAQ6b,EAAQ5b,GAAO1jB,SAASkjB,GAE3D/8C,EAAI,EAAGA,EAAImM,EAAK/N,OAAQ4B,IAC7B,GAA6B,KAAzBmM,EAAKnM,GAAGiI,MAAMmC,QAAiB4rD,EAAS7pD,EAAKnM,GAAGiI,MAAMmC,QACtD,OAAO,EAIf,OAAO,CACX,EAEA63D,aAAc,SAAS78C,EAAOE,GAC1B,IAMIk1C,EACAyI,EACAC,EACAC,EATAh+D,EAAO5H,KACPwH,EAAUxG,EAAE4G,EAAKJ,SACjBq+D,EAAar+D,EAAQ,GAAGkD,MAAMmxD,GAC9BiK,EAAenkE,EAAW6F,GAC1Bu+D,EAAcv+D,EAAQuZ,SAASnU,QAC/Bo5D,EAAWp+D,EAAKg9D,sBAAsB/I,GAM5B,IAAVh0C,IAIAw8C,EAAYz8D,EAAKy9D,wBACjBz9D,EAAKy9D,qBAAuBS,GAKhCF,EAAmB1N,EAAU,CACzB1mD,MAAO5J,EAAKy9D,qBAAuBt9C,EACnCE,IAAKrgB,EAAK/H,QAAQ8vC,SAClBznB,IAAK89C,IAGLhO,EAAc6N,IAEVC,EAAej+C,EAAQk+C,GACvBL,EAAax9C,EAAI09C,EAAkBG,GACnCJ,EAAkB19C,EAAI29C,EAAkBG,KAGxCL,EAAaz9C,EAAI29C,EAAkBG,GACnCJ,EAAkBz9C,EAAI09C,EAAkBG,IAG5C9I,EAAWvE,EAAcH,EAAyBmN,EAAYC,KAG9D1I,EAAWtE,EAASiN,GAGxBh+D,EAAKq+D,mBAELz+D,EAAQ,GAAGkD,MAAMmxD,GAASoB,EAC9B,EAEA0H,cAAe,SAAS98C,EAAOE,GAC3B,IAOIu3C,EACAoG,EACAC,EACAO,EAVAt+D,EAAO5H,KACPwH,EAAUxG,EAAE4G,EAAKJ,SACjB2+D,EAAc3+D,EAAQ,GAAGkD,MAAM0zD,GAC/BgI,EAAgBvkE,EAAY2F,GAE5B6+D,EADS7+D,EAAQuZ,SACKlU,SACtBy5D,EAAY1+D,EAAKg9D,sBAAsBxG,GAKvCh9C,EAAYxZ,EAAK/H,QAAQuhB,UACzBmlD,EAAkB3+D,EAAK69D,mBAEb,IAAV59C,IAIAw8C,EAAYz8D,EAAKw9D,yBACjBx9D,EAAKw9D,sBAAwBgB,GAKjCF,EAAoBhO,EAAU,CAC1B1mD,MAAO5J,EAAKw9D,sBAAwBr9C,EACpCE,IAAK7G,EACL8G,IAAKo+C,IAGLC,GAAmB1+C,EAAQ,GAE3BjgB,EAAKw3D,8BAGLpH,EAAcmO,IAEVC,EAAgBv+C,EAAQw+C,GACxBX,EAAax9C,EAAIg+C,EAAmBG,GACpCV,EAAkB19C,EAAIi+C,EAAmBG,KAGzCX,EAAaz9C,EAAIi+C,EAAmBG,GACpCV,EAAkBz9C,EAAIg+C,EAAmBG,IAG7C/G,EAAY5G,EAAcH,EAAyBmN,EAAYC,KAG/DrG,EAAY3G,EAASuN,GAGzB1+D,EAAQ,GAAGkD,MAAM0zD,GAAUkB,EAEvBiH,GAAmB1+C,EAAQ,GAE3BjgB,EAAKs3D,yBAEb,EAEA+G,iBAAkB,WACd,IAMIxjE,EALA+E,EAAUxG,EADHhB,KACUwH,SACjBgV,EAAgBhV,EAAQuZ,SAAS,GACjCylD,EAAeh/D,EAAQU,QAnWtB,MAoWDyG,EAAU63D,EAAat+D,QAAQs3C,GAAKljB,WACpCmqC,EAAgB93D,EAAQ9N,OAc5B,GAXA,SAA8B2G,GAC1B,IAAIq+D,EAAar+D,EAAQkD,MAAMkC,MAE/B,MAAmB,KAAfi5D,IACO7N,EAAc6N,KAGd7kE,EAAEwG,GAASiY,SA1XhB,UA4XV,CAEIinD,CAAqBl/D,EAAQ,KAAOgV,IAAkBgqD,EAAa,IAAqC,KAA/BhqD,EAAc9R,MAAMmxD,GAC7F,IAAKp5D,EAAI,EAAGA,EAAIgkE,EAAehkE,IAC3BkM,EAAQlM,GAAGiI,MAAMmxD,GAASlD,EAAS33D,EAAE2N,EAAQlM,IAAImK,QAG7D,EAEAwyD,4BAA6B,WACzB,IAUI38D,EAVAmF,EAAO5H,KACPy8D,EAAYz7D,EAAE4G,EAAKJ,SAAS80B,SAASyjB,GACrC+e,EAAkBrC,EAAU57D,OAAS,EAAI47D,EAAU5vD,SAAW,EAE9DkyD,EADY/9D,EAAE4G,EAAKJ,SAAS80B,SAAS0jB,GACTnzC,SAC5B+B,EAAO5N,EAAE4G,EAAKJ,SAAS80B,SAASyjB,EAAQ6b,EAAQ5b,GAAO1jB,SAASkjB,GAChE3+C,EAAS+N,EAAK/N,OACdw+D,EAAqBzwD,EAAK2E,KAAI,WAC9B,OAAO1R,EAAYb,EAAEhB,MACzB,IAGA,IAAKyC,EAAI,EAAGA,EAAI5B,EAAQ4B,IACpBmM,EAAKnM,GAAGiI,MAAM0zD,GAAU1F,EAAcH,EAAyB8G,EAAmB58D,GAAIq8D,EAAkBC,GAEhH,EAEAG,uBAAwB,WACpB,IAMIz8D,EALAmM,EAAO5N,EADAhB,KACOwH,SAAS80B,SAASyjB,EAAQ6b,EAAQ5b,GAAO1jB,SAASkjB,GAChE3+C,EAAS+N,EAAK/N,OACdw+D,EAAqBzwD,EAAK2E,KAAI,WAC9B,OAAO1R,EAAYb,EAAEhB,MACzB,IAGA,IAAKyC,EAAI,EAAGA,EAAI5B,EAAQ4B,IACpBmM,EAAKnM,GAAGiI,MAAM0zD,GAAUzF,EAAS0G,EAAmB58D,GAE5D,IAGAkkE,EAAgBrC,EAAgB3kE,OAAO,CACvCulE,2BAA4B,WACxB,IAGIziE,EACA42D,EAJAzxD,EAAO5H,KACPukE,EAAU38D,EAAK28D,SAAW,GAC1B1jE,EAAS0jE,EAAQ1jE,OAIrB,IAAK4B,EAAI,EAAGA,EAAI5B,EAAQ4B,KACpB42D,EAASkL,EAAQ9hE,IACV2F,KAAKo3D,EAAY53D,EAAKu9D,yBAAyB/8D,KAAKR,IAE1B,UAA7ByxD,EAAOx5D,QAAQuzB,WAAsD,UAA7BimC,EAAOx5D,QAAQuzB,UACvDimC,EAAOjxD,KAAKq3D,EAAM73D,EAAKg/D,4BAA4Bx+D,KAAKR,IACpB,SAA7ByxD,EAAOx5D,QAAQuzB,WAAqD,SAA7BimC,EAAOx5D,QAAQuzB,UAC7DimC,EAAOjxD,KAAKq3D,EAAM73D,EAAKi/D,8BAA8Bz+D,KAAKR,IAE1DyxD,EAAOjxD,KAAKq3D,EAAM73D,EAAKk/D,0BAA0B1+D,KAAKR,IAG1DyxD,EAAOjxD,KAAKs3D,EAAU93D,EAAK29D,uBAAuBn9D,KAAKR,GAE/D,EAEAm/D,WAAY,SAAS37C,GACjB,OAAOzrB,EAAO,CAAC,EAAG,CACdgiE,OAAQ,EACRC,OAAQ,EACRtE,cAAe,EACfuE,cAAe,GAChBz2C,EACP,EAEAw7C,4BAA6B,SAASx7C,GAClC,IAAI+3C,EAASnjE,KAAK+mE,WAAW37C,GAE7BprB,KAAK2kE,cAAcxB,EAAOvB,OAAQuB,EAAOtB,eACzC7hE,KAAKmpB,mBACT,EAEA09C,8BAA+B,SAASz7C,GACpC,IAAI+3C,EAASnjE,KAAK+mE,WAAW37C,GAE7BprB,KAAK0kE,aAAavB,EAAOxB,OAAQwB,EAAO7F,eACxCt9D,KAAKmpB,mBACT,EAEA29C,0BAA2B,SAAS17C,GAChC,IAGI+3C,EAHAl7C,EAAMG,KAAKH,IAAIG,KAAKmzC,IAAInwC,EAAKkyC,eAAgBl1C,KAAKmzC,IAAInwC,EAAKy2C,gBAC3DmF,EAAehnE,KAAKqlE,qBACpB4B,EAAgBjnE,KAAKolE,sBAGrBn9C,IAAQmD,EAAKkyC,eAAiBr1C,KAA8B,EAAtBmD,EAAKkyC,eAC3ClyC,EAAKy2C,cAAgBz2C,EAAKkyC,cAAgB2J,EAAgBD,EAC1D57C,EAAKw2C,OAASx2C,EAAKu2C,QACZ15C,IAAQmD,EAAKy2C,eAAiB55C,KAA8B,EAAtBmD,EAAKy2C,gBAClDz2C,EAAKkyC,cAAgBlyC,EAAKy2C,cAAgBmF,EAAeC,EACzD77C,EAAKu2C,OAASv2C,EAAKw2C,QAGvBuB,EAASnjE,KAAK+mE,WAAW37C,GAEzBprB,KAAK0kE,aAAavB,EAAOxB,OAAQwB,EAAO7F,eACxCt9D,KAAK2kE,cAAcxB,EAAOvB,OAAQuB,EAAOtB,eAEzC7hE,KAAKmpB,mBACT,EAEAu7C,aAAc,SAAS78C,EAAOE,GAC1B,IAGIk1C,EACA2I,EAJAh+D,EAAO5H,KACPwH,EAAUxG,EAAE4G,EAAKJ,SACjBs+D,EAAenkE,EAAW6F,GAIhB,IAAVqgB,IAIAw8C,EAAYz8D,EAAKy9D,wBACjBz9D,EAAKy9D,qBAAuBS,GAKhCF,EAAmB1N,EAAU,CACzB1mD,MAAO5J,EAAKy9D,qBAAuBt9C,EACnCE,IAAKrgB,EAAK/H,QAAQ8vC,SAClBznB,IAAKtgB,EAAKg9D,sBAAsB/I,KAGpCoB,EAAWtE,EAASiN,GACpBp+D,EAAQ,GAAGkD,MAAMmxD,GAASoB,EAC1Bz1D,EAAQ4Q,KAAKyjD,EAAOzzC,KAAKg6B,MAAMwjB,IACnC,EAEAjB,cAAe,SAAS98C,EAAOE,GAC3B,IAGIu3C,EACA4G,EAJAt+D,EAAO5H,KACPwH,EAAUxG,EAAE4G,EAAKJ,SACjB4+D,EAAgBvkE,EAAY2F,GAIlB,IAAVqgB,IAIAw8C,EAAYz8D,EAAKw9D,yBACjBx9D,EAAKw9D,sBAAwBgB,GAKjCF,EAAoBhO,EAAU,CAC1B1mD,MAAO5J,EAAKw9D,sBAAwBr9C,EACpCE,IAAKrgB,EAAK/H,QAAQuhB,UAClB8G,IAAK4S,OAAOosC,mBAGhB5H,EAAY3G,EAASuN,GACrB1+D,EAAQ,GAAGkD,MAAM0zD,GAAUkB,EAC3B93D,EAAQ4Q,KAAKgmD,EAAQh2C,KAAKg6B,MAAM8jB,IACpC,IAGAz9C,EAAyBtnB,EAAMxB,OAAO,CACtCopB,OAAQ,SAASjhB,GACb,IAAIq/D,EAAUnnE,KAEdgB,EAAE8G,EAAOgL,MACJ4N,GAAG,YAAcsE,GAAI,WAClB,IAAIL,EAAQpS,EAAWoS,MAAM7c,EAAOuL,YAChC+zD,GAAS,EAEbziD,EAAM8V,SAAQ,SAASlN,GACG,QAAlBA,EAAK9Q,WACL2qD,GAAS,EAEjB,IAEIA,GAAUziD,EAAM9jB,OAAS,GACzBiH,EAAOmhB,gBAAgBu7C,uBAE/B,IACC9jD,GA9iBF,OA8iBYsE,GAAI,WACX7I,YAAW,WACP,IAAImqB,EAAQ/zB,EAAW+zB,MAAMx+B,EAAOuL,YAEhCizB,IACAx+B,EAAOmhB,gBAAgBu7C,wBACvB18D,EAAOmhB,gBAAgBzhB,QAAU8+B,EACjCx+B,EAAOmhB,gBAAgBE,oBAE/B,GACJ,IACCzI,GAAGyjD,EAAan/C,EAAI86B,EAAQ8b,EAljB/B,OAkjB4C,SAAS1yD,GAC/C,IAAIm+D,EAAcn+D,EAAEmS,OAChBisD,EAAqBp+D,EAAEye,cACvBsB,EAAkBnhB,EAAOmhB,gBACzBzhB,EAAUyhB,EAAkBA,EAAgBzhB,QAAU,KAE1D,GAAIyhB,GACA,GAAIzhB,GAAW8/D,IAAuB9/D,EAAS,CAC3C,GAAImO,EAAS2xD,EAAoB9/D,IAAYA,IAAY6/D,GAAe1xD,EAASnO,EAAS6/D,GAGtF,OAGI7/D,IAAY6/D,IACZv/D,EAAO0gB,0BACP2+C,EAAQ/L,cAActzD,EAAQw/D,GAG1C,OAGAH,EAAQ/L,cAActzD,EAAQw/D,GAGlCx/D,EAAOiW,2BACX,IACC2C,GAAGyjD,EAAan/C,GAAI,SAAS9b,GAC1B,IAAI+f,EAAkBnhB,EAAOmhB,gBACzBzhB,EAAUyhB,EAAkBA,EAAgBzhB,QAAU,KACtD6T,EAASnS,EAAEmS,OACXksD,EAAwBvmE,EAAEqa,GAAQoE,SAASwkD,IAAgCjjE,EAAEqa,GAAQsG,QAjkB/F,IAikB6GsiD,GAA6BpjE,OAAS,GAEzIooB,GAAmBzhB,IAAY6T,GAAW1F,EAASnO,EAAS6T,IAAYksD,GACxEz/D,EAAO0gB,yBAEf,GACR,EAEAE,QAAS,SAAS5gB,GACd9G,EAAE8G,EAAOgL,MAAMwH,IAAI0K,EACvB,EAEAo2C,cAAe,SAAStzD,EAAQN,GAIvB/F,EAAQsZ,OACL/Z,EAAEwG,GAASmZ,GAAGm/B,GACdh4C,EAAOmhB,gBAAkBnhB,EAAO0/D,cAAgB,IAAIhC,EAAch+D,EAAS,CACvEi9D,gBAAiB38D,EAAOgL,KACxBsmD,IAAK55D,EAAM+B,QAAQyX,MAAMlR,EAAON,SAChC0xD,YAAapxD,EAAOgL,OAEjB9R,EAAEwG,GAASmZ,GAxmBxB,SAymBM7Y,EAAOmhB,gBAAkB,IAAI09C,EAAcn/D,EAAS,CAChDi9D,gBAAiB38D,EAAOgL,KACxBsmD,IAAK55D,EAAM+B,QAAQyX,MAAMlR,EAAON,SAChC0xD,YAAapxD,EAAOgL,QAIxBhL,EAAOkhB,iCACPlhB,EAAOkP,OAAOjV,EAAQ+F,EAAOkhB,gCAC7BlhB,EAAOM,KAAKrG,EAAQ+F,EAAOkhB,iCAGvC,IAGJP,EAAuBpG,QAAU,IAAIoG,EAErC9oB,EAAOmG,EAAQ,CACX0/D,cAAeA,EACfmB,cAAeA,EACfrC,gBAAiBA,EACjB77C,uBAAwBA,GAG/B,CA5qBD,CA4qBGvnB,OAAO1B,OAEV,SAAUwB,EAAGC,GAEb,IAAIzB,EAAQ0B,OAAO1B,MACfsG,EAAStG,EAAM6B,GAAGyG,OAClB1F,EAAc0D,EAAO1D,YACrBmQ,EAAazM,EAAOyM,WACpBxK,EAAMjC,EAAOkC,IACbrC,EAAevD,EAAYuD,aAC3B+jC,EAAU5jC,EAAO4jC,QAEjB4W,EAAoB,IAAIx6C,EAAOotC,kBAAkB,CAAC,CAAEvwC,KAAM,CAAC,YAC3D8kE,EAAoB,IAAI3hE,EAAOotC,kBAAkB,CAAC,CAAEvwC,KAAM,CAAC,KAAK,SAChE+kE,EAAS,eAKTnoB,EAAQ,QACRooB,EAAY,YACZxnB,EAAK,KACLD,EAAK,KAKLqB,EAAqB7X,EAAQ/pC,OAAO,CACpC+S,KAAM,WACF,IAAI+3B,EAAMzqC,KACN8H,EAAS2iC,EAAI3iC,OACb8K,EAAQ63B,EAAI73B,MAAQ63B,EAAIZ,YACxB+9B,EAAoBn9B,EAAI5qC,QAAQgoE,gBAChCC,EAAgBr9B,EAAIs9B,aAAgBt9B,EAAI5qC,QAAQ2hD,eAA6CvgD,EAA5BwpC,EAAIu9B,eAAep1D,GACpFq1D,EAAgBx9B,EAAIy9B,oBAAsBJ,EAAgBr9B,EAAI09B,eAAev1D,GAAS3R,EACtFpB,EAAU,CACVwhB,SAAS,EACTzX,SAAU9B,EAAOjI,QAAQ+J,SACzBw+D,cAAe39B,EAAI49B,cAAcjgE,KAAKqiC,GACtCtS,MAAOsS,EAAI69B,WAAWR,EAAeG,GACrCj3D,cAAelJ,EAAOjI,QAAQmR,cAC9BgI,MAAOxZ,EAAM+B,QAAQyX,MAAMlR,EAAOwB,UAGzB,IAAIxD,EAAOyiE,kBAAkB1oE,GACnCiZ,KAAK8uD,EAChB,EAEAS,cAAe,SAAStuD,GACpB,IAAI0wB,EAAMzqC,KACVyqC,EAAIX,aAAaW,EAAI73B,OAEjBmH,IACI0wB,EAAI5qC,QAAQ2hD,eACZ/W,EAAI+9B,YAAY/9B,EAAIg+B,eAAe1uD,IAEnC0wB,EAAIi+B,YAAY3uD,EAAM0wB,EAAIs9B,aAAct9B,EAAIy9B,qBAGxD,EACAp+B,aAAc,SAASl3B,GACnB,IACI0B,EADMtU,KACI8H,OAAOrB,SACrBsB,EAAIooB,mBAAmB7b,GAAKN,QAC5B01B,EAAQ5pC,GAAGgqC,aAAa/pC,KAHdC,KAGwB4S,EACtC,EACA41D,YAAa,SAASrwC,GAClB,IAAIvlB,EAAQ5S,KAAK4S,MAEjBA,EAAMwuB,WAAWjJ,GACjBvlB,EAAMgC,UAAS,GACf5U,KAAK8H,OAAOqL,YAAYP,GAExB5S,KAAK2oE,2BAA2BxwC,EACpC,EACAwwC,2BAA4B,SAASxwC,GAKjC,IAJA,IAAI6zB,EAAehrD,EAAEm3B,GAAOpX,SAAS2lB,WACjCulB,EAAmBD,EAAanrD,OAAS,EACzCqrD,EAAcF,EAAazsC,IAAI0sC,GAEF,OAA1BC,EAAYzuC,YAAiD,MAA1ByuC,EAAYzuC,WAA+C,KAA1ByuC,EAAYzuC,YACnFwuC,GAAoB,EACpBC,EAAcF,EAAazsC,IAAI0sC,GAG/BC,IAAgB/zB,GAChBpwB,EAAIyf,YAAYzf,EAAIkuB,gBAAgBj2B,KAAK8H,OAAOrB,SAAU,KAAM0xB,EAExE,EACAuwC,YAAa,SAAS3uD,EAAMoe,EAAO8vC,GAU/B,IATA,IAMIW,EAAiBC,EANjBp+B,EAAMzqC,KACNq5B,EAAYr4B,EAAEm3B,EAAMvpB,MAAMk+B,UAC1Bg8B,EAAY/uD,EAAKjV,gBACjB8J,EAAOk6D,EAAUl6D,KACjB6qB,EAAQtB,EAAMsB,MACdxd,EAAOwuB,EAAIs+B,kBAIRd,EAAcpnE,OAAS,GAC1BonE,EAAc/7B,MAGlB08B,EAAkBX,EAAcpnE,OAASob,EAAKgsD,GAAe/+C,WAAajN,EAAKod,GAE/EoR,EAAIu+B,iBAAiB3vC,EAAWA,EAAUx4B,OAAS+N,GAE/CyqB,EAAUx4B,OAAS+N,GACnB67B,EAAIw+B,SAASL,EAAiBh6D,EAAMyqB,GAGxCtxB,EAAImwB,kBAAkBC,EAAOwvC,GAC7Bl9B,EAAIy+B,eAAe7vC,EAAWyvC,EAAUn6D,QAASs5D,EAAeW,GAChEn+B,EAAI0+B,uBAAuBhxC,EAAO2wC,GAElCD,EAAW9uD,EAAKqvD,eACZnB,EAAc,IACdlgE,EAAIqQ,KAAK6vD,EAAc,GAAI,CAAE36D,IAAKu7D,GAAY,CAAC,GAAGv7D,IAAM,OAExDu7D,IACCA,EAASh6D,eAAiB7N,EAAEq4B,GAAWiD,WAAat7B,EAAEinE,IAAgB9wD,MAAK,SAAS1U,EAAGm2B,GACpF6R,EAAI4+B,sBAAsBzwC,EAAMiwC,EACpC,IAGJp+B,EAAI6+B,eAAenxC,EAAO2wC,GAEtBrvC,EACAgR,EAAI8+B,wBAAwBpxC,EAAOpe,GAEnC0wB,EAAI++B,sBAAsBrxC,EAAOpe,GAGrC0wB,EAAIg/B,wBAAwBtxC,EAAO2wC,GACnC/gE,EAAIuwB,mBAAmBH,EAAOwvC,EAClC,EACA+B,cAAe,SAASpvC,GACpB,OAAOvyB,EAAI4Y,GAAG2Z,EAAI7B,MAAM,GAAI0nB,IAAOp4C,EAAI4Y,GAAG2Z,EAAIpR,WAlH1C,QAmHR,EACAygD,eAAgB,SAAS/wC,GACrB,OAAO7wB,EAAI4Y,GAAGiY,EAAMunB,EACxB,EACAypB,2BAA4B,SAASzxC,GACjC,IAAIM,EAAQz3B,EAAEm3B,EAAMvpB,MAAM0tB,WACtButC,EAAa,GACbC,EAAc,SAASC,GACvB,OAAOF,EAAWjkD,QAAQmkD,IAAW,CACzC,EAuBA,OArBAtxC,EAAMthB,MAAK,SAASsa,EAAGmH,GACfA,EAAKtrB,IAAMvF,EAAI4Y,GAAGiY,EAAMunB,IACxB0pB,EAAW1pE,KAAKy4B,EAAKtrB,GAE7B,MAEsBmrB,EAAMxhB,QAAO,SAASwa,EAAGmH,GAC3C,IACIoxC,EADAC,EAAcrxC,EAAK7lB,aApIrB,WAuIF,SAAIk3D,IAAgBliE,EAAI4Y,GAAGiY,EAAMunB,KAC7B6pB,EAAeC,EAAY9kD,MAAM,OAEb6kD,EAAanpE,OAAS,IAC/BmpE,EAAaE,KAAKJ,EAKrC,IAEyBjpE,MAC7B,EACAspE,aAAc,SAAStzC,EAAOyD,EAAKh0B,GAC/BA,EAAQuf,MAAMvf,IAAU,EAAIA,EAC5B,IAAK,IAAI7D,EAAI,EAASA,EAAIo0B,EAAOp0B,IACtB63B,EAAI8vC,WAAW9jE,GACjB6b,UAAY,QAEzB,EACA6mD,iBAAkB,SAASp6D,EAAMioB,GAC7B,IAAK,IAAWyD,EAAK4qB,EAAZziD,EAAI,EAAmBA,EAAIo0B,EAAOp0B,KAEvCyiD,GADA5qB,EAAM1rB,EAAKs9B,OACKhjB,YACN8I,YAAYsI,GACjB4qB,EAAUt2C,KAAK/N,QAChBkH,EAAIsN,OAAO6vC,EAGvB,EACAujB,eAAgB,SAAS1uD,GACrB,IAKIq3C,EALA3mB,EAAMzqC,KACNsU,EAAMm2B,EAAI3iC,OAAOrB,SACjBqiE,EAAY/uD,EAAKjV,gBACjBqzB,EAAQpwB,EAAIghB,OAAOzU,EAxKnB,SAyKAkkB,EAAW,EAGfiS,EAAI0+B,uBAAuBhxC,EAAO2wC,GAClCr+B,EAAI6+B,eAAenxC,EAAO2wC,GAEtBA,EAAU55D,YAAc45D,EAAU55D,WAAa,IAC/CkiD,EAAQj5B,EAAMkyC,cACd5/B,EAAI6/B,iBAAiBvwD,EAAMq3C,EAAO54B,GAAU,GAC5CA,GAAYswC,EAAU55D,YAG1B,IAAImiD,EAAQl5B,EAAMoyC,cAalB,OAZA9/B,EAAI6/B,iBAAiBvwD,EAAMs3C,EAAO74B,GAAU,GAE5CzwB,EAAImwB,kBAAkBC,EAAOwvC,GAEM,QAA/BmB,EAAU0B,iBACVziE,EAAImxB,iBAAiBf,GACiB,UAA/B2wC,EAAU0B,kBACjB//B,EAAIggC,WAAWtyC,EAAO2wC,EAAU55D,WAAY45D,EAAU35D,eAG1DpH,EAAIuwB,mBAAmBH,EAAOwvC,GAEvBxvC,CACX,EACAmyC,iBAAkB,SAASvwD,EAAMtE,EAAWi1D,EAAcx7D,GAQtD,IAPA,IAO2BorB,EANvBwuC,EAAY/uD,EAAKjV,gBACjB+jE,EAAW9uD,EAAKqvD,eAChBz6D,EAAUm6D,EAAUn6D,QACpBC,EAAOM,EAAa45D,EAAU55D,WAAa45D,EAAUl6D,KACrDO,EAAgB25D,EAAU35D,cAErBsjC,EAAIi4B,EAAmBj4B,EAAI7jC,EAAM6jC,IAAK,CAC3CnY,EAAM7kB,EAAUk1D,YAEhB,IAAK,IAAW/xC,EAAPnH,EAAI,EAASA,EAAI9iB,EAAS8iB,IAE3BmH,EADA1pB,GAAcC,EAAgBsiB,EACvBhrB,SAASmV,cAAcukC,GAEvB15C,SAASmV,cAAcskC,GAGlC5lB,EAAIxe,YAAY8c,GAChBA,EAAKzW,UAAY,SACb0mD,GAAkB,IAANp2B,GAAiB,IAANhhB,GAAWo3C,EAASv7D,KAC3CsrB,EAAKtrB,GAAKu7D,EAASv7D,IApBrBtN,KAuBEqpE,sBAAsBzwC,EAAMiwC,IAAaA,EAASh6D,gBAAyB,IAAN4jC,GAAiB,IAANhhB,GAAYo3C,EAAW,CAAC,EAEpH,CACJ,EACAI,SAAU,SAASL,EAAiBh6D,EAAMyqB,GAQtC,IAPA,IAKIiB,EAJA9B,EAAWx3B,EAAE4nE,GAAiBtiE,QAC9BskE,EAAchC,EAAgBnwC,MAAM53B,OACpCgqE,EAAej8D,EAAOyqB,EAAUx4B,OAChCkgB,EAAS6nD,EAAgB1/C,WAGtB2hD,GACHvwC,EAAMvZ,EAAO4pD,UAAUnyC,EAAW,GAR5Bx4B,KASFmqE,aAAaS,EAActwC,EAAI7B,MAAM53B,OAAQy5B,GACjDuwC,GAER,EACA3B,eAAgB,SAAS7vC,EAAW1qB,EAASs5D,EAAeW,GACxD,IAAIn+B,EAAMzqC,KACNic,EAAOwuB,EAAIs+B,kBACX+B,EAAmB7uD,EAAKod,EAAU,GAAGZ,OACrCsyC,EAAkBjwC,OAAOgwC,EAAiB/3D,aAAa40D,IAAcmD,EAAiB/xC,QAoB1F,GAlBIgyC,EAAkBp8D,GAClB3N,EAAEq4B,GAAWliB,MAAK,SAAS1U,EAAG63B,GAI1B,IAHA,IAAI0wC,EAAkB/uD,EAAKqe,EAAI7B,OAC3BwyC,EAAanwC,OAAOkwC,EAAgBj4D,aAAa40D,IAAcqD,EAAgBjyC,QAE5EkyC,EAAat8D,GACZq8D,EAAgBjyC,SAAWiyC,EAAgBjyC,QAAU,EACrDiyC,EAAgBjyC,SAAW,EAE3BuB,EAAI4wC,YAAY,GAGpBF,EAAkB/uD,EAAKqe,EAAI7B,OAC3BwyC,EAAanwC,OAAOkwC,EAAgBj4D,aAAa40D,IAAcqD,EAAgBjyC,OAEvF,IAGAgyC,EAAkBp8D,EAAS,CAC3B,IAAIgqB,EAAY33B,EAAEib,EAAKgsD,IAAkBhsD,EAAK2sD,EAAgBnwC,QAAQnyB,QACtEtF,EAAEq4B,GAAWliB,MAAK,SAAS1U,EAAG63B,GAC1B,IAAI0wC,EAAkB/uD,EAAKqe,EAAI7B,OAC/BgS,EAAI0/B,aAAax7D,EAAUmsB,OAAOkwC,EAAgBj4D,aAAa40D,IAAcqD,EAAgBjyC,QAASuB,EAAK3B,EAAY,EAC3H,GACJ,CACJ,EACAwwC,uBAAwB,SAAShxC,EAAOpe,GACpC,IAAIrP,EAAQ1K,KAAKmrE,eAAepxD,GAChChS,EAAIqQ,KAAK+f,EAAO,CACZprB,YAAagN,EAAKhN,aAAe,KACjCC,YAAa+M,EAAK/M,aAAe,KACjC4M,UAAWG,EAAKH,WAAa,KAC7BtM,GAAIyM,EAAKzM,IAAM,KACfX,QAASoN,EAAKpN,SAAW,KACzBjC,MAAOA,GAAS,OAEpB1J,EAAEm3B,GAAOhgB,SAAS,UACtB,EACAkxD,sBAAuB,SAASzwC,EAAM7e,GAClC,IAAIrP,EAAQ1K,KAAKmrE,eAAepxD,GAChCrP,EAAM+/C,QAAU1wC,EAAK/M,aAAe,KACpCtC,EAAM8/C,OAASzwC,EAAK9M,YAAc,KAClClF,EAAIqQ,KAAKwgB,EAAM,CACXluB,MAAOA,GAAS,KAChBkP,UAAWG,EAAKH,WAAa,MAErC,EACA0vD,eAAgB,SAASnxC,EAAOpe,GAC5B,GAAIoe,EAAMzrB,UAAYqN,EAAKqxD,eACvBjzC,EAAMkzC,qBACH,GAAItxD,EAAKqxD,eAAgB,CAC5B,IAAI1+D,EAAUyrB,EAAMmzC,gBACpB5+D,EAAQyV,UAAYpI,EAAKqxD,eACzB,IAAItkE,EAAY9G,KAAKurE,kBAAkBxxD,EAAK7M,kBAC5CnF,EAAIqQ,KAAK1L,EAAS,CACdhC,MAAO,CACH8pC,UAAW1tC,EAAU0tC,UACrBg3B,cAAe1kE,EAAU0kE,gBAGrC,CACJ,EACAhC,sBAAuB,SAASrxC,EAAOpe,GACnC,IAGS0e,EAAOG,EAAMn2B,EAAG+f,EAFrBsmD,EAAY/uD,EAAKjV,gBACjB8J,EAAOupB,EAAMvpB,KAGjB,IAAKnM,EAAI,EAAGA,EAAImM,EAAK/N,OAAQ4B,IAIzB,IAFAg2B,EADM7pB,EAAKnM,GACCg2B,MAEPjW,EAAI,EAAGA,EAAIiW,EAAM53B,OAAQ2hB,IAC1BoW,EAAOH,EAAMjW,IAVXxiB,KAWO2pE,eAAe/wC,KAAUn2B,EAAIqmE,EAAU55D,YAAc45D,EAAU35D,cAAgBypB,EAAK7lB,aAAa40D,IACtG5/D,EAAIytB,UAAUoD,EAAMunB,GAAI,GAZ1BngD,KAaa2pE,eAAe/wC,IAASn2B,GAAKqmE,EAAU55D,YAAc45D,EAAU35D,eAAiBypB,EAAK7lB,aAAa40D,IAC7G5/D,EAAIytB,UAAUoD,EAAMsnB,GAAI,EAIxC,EACAqpB,wBAAyB,SAASpxC,EAAOpe,GACrC,IAKIugB,EAAK1B,EAAMn2B,EALXgoC,EAAMzqC,KACN8oE,EAAY/uD,EAAKjV,gBACjBssD,EAAQj5B,EAAMsB,MACdjB,EAAW,EACX64B,EAAQl5B,EAAM+jC,QAAQ,GAO1B,GAJK7K,IACDA,EAAQl5B,EAAMoyC,eAGdzB,EAAU55D,YAAc45D,EAAU55D,WAAa,EAAG,CAKlD,IAJKkiD,IACDA,EAAQj5B,EAAMkyC,eAGXjZ,EAAMxiD,KAAK/N,OAASioE,EAAU55D,YACjCkiD,EAAMt1C,YAAYu1C,EAAMziD,KAAK,IAGjC,KAAOwiD,EAAMxiD,KAAK/N,OAASioE,EAAU55D,YACjCmiD,EAAMv1C,YAAYs1C,EAAMxiD,KAAK,IAGjC67B,EAAIghC,mBAAmBra,EAC3B,MAAO,GAAIA,EAAO,CACd,KAAOA,EAAMxiD,KAAK/N,OAAS,GACvBwwD,EAAMv1C,YAAYs1C,EAAMxiD,KAAKwiD,EAAMxiD,KAAK/N,OAAS,IAGrDs3B,EAAMuzC,aACV,CAEA,KAAOra,EAAMziD,KAAK/N,OAAS23B,GAAU,CAEjC,IADA8B,EAAM+2B,EAAMziD,KAAK4pB,GACZ/1B,EAAI,EAAGA,EAAI63B,EAAI7B,MAAM53B,OAAQ4B,IAC9Bm2B,EAAO0B,EAAI7B,MAAMh2B,GACbgoC,EAAIk/B,eAAe/wC,IAASkwC,EAAU35D,eAAiBypB,EAAK7lB,aAAa40D,GACzE5/D,EAAIytB,UAAUoD,EAAMsnB,GAAI,IAChBzV,EAAIk/B,eAAe/wC,IAASkwC,EAAU35D,cAAgBypB,EAAK7lB,aAAa40D,IAChF5/D,EAAIytB,UAAUoD,EAAMunB,GAAI,GAGhC3nB,GAAY,CAChB,CACJ,EACAixC,wBAAyB,SAAStxC,EAAO2wC,GACrC,IAAIr+B,EAAMzqC,KAEyB,QAA/B8oE,EAAU0B,kBACL//B,EAAIm/B,2BAA2BzxC,IAChCsS,EAAIkhC,cAAcxzC,GAEtBpwB,EAAImxB,iBAAiBf,IACiB,UAA/B2wC,EAAU0B,kBACb//B,EAAIm/B,2BAA2BzxC,IAC/BsS,EAAImhC,kBAAkBzzC,GAE1BsS,EAAIggC,WAAWtyC,EAAO2wC,EAAU55D,WAAY45D,EAAU35D,gBAElDs7B,EAAIm/B,2BAA2BzxC,GAC/BsS,EAAImhC,kBAAkBzzC,GAEtBsS,EAAIkhC,cAAcxzC,EAG9B,EACAsyC,WAAY,SAAStyC,EAAOjpB,EAAY28D,GACpC,IACIppE,EAAG+f,EAAG8X,EAAK1B,EADXhqB,EAAOupB,EAAMvpB,KAGjB,IAAKnM,EAAI,EAAGA,EAAImM,EAAK/N,OAAQ4B,IAGzB,IAFA63B,EAAM1rB,EAAKnM,GAEN+f,EAAI,EAAGA,EAAI8X,EAAI7B,MAAM53B,OAAQ2hB,IAC9BoW,EAAO0B,EAAI7B,MAAMjW,GAEb/f,EAAIyM,EACJ0pB,EAAK/c,aAAa0jC,EA9Z5B,OA+ZiB3mB,EAAK7lB,aAAa40D,GAAakE,GACtCjzC,EAAK/c,aAAa0jC,EA/Z5B,MAmaN,EACAosB,cAAe,SAASxzC,GACpBn3B,EAAEm3B,GAAO5uB,KAAK42C,GAAI31B,WAAW+0B,GAC7Bv+C,EAAEm3B,GAAO5uB,KAvaP,OAuaiB8L,SACnBrU,EAAEm3B,GAAO5uB,KAtaF,YAsaiB8L,QAC5B,EACAu2D,kBAAmB,SAASzzC,GACxBn3B,EAAEm3B,GAAO5uB,KAAK,UAAUihB,WAAW,aACvC,EACAihD,mBAAoB,SAASra,GACfpwD,EAAEowD,GAAO7nD,KAAK,MAIpB4N,MAHW,SAAS7Q,EAAOsyB,GAC3B7wB,EAAIytB,UAAUoD,EAAMunB,GAAI,EAC5B,GAEJ,EACAgrB,eAAgB,SAASpxD,GACrB,IACIjT,EAAY9G,KAAKurE,kBAAkBxxD,EAAKjT,WACxCglE,EAAa,aAAc/xD,EAAQA,EAAKnM,SAAW,GAAK,SAAY,KAExE,OAAO5M,EAAErB,OAAO,CACZiN,MAAOmN,EAAKnN,MAAQmN,EAAKnN,MAAQmN,EAAKgyD,UAAY,KAClDl/D,OAAQkN,EAAKlN,OAASkN,EAAKlN,OAASkN,EAAKiyD,WAAa,KACtDx3B,UAAW1tC,EAAU0tC,UACrBg3B,cAAe1kE,EAAU0kE,cACzBS,gBAAiBlyD,EAAKmyD,SAAW,GACjCz+D,YAAasM,EAAKtM,YAClBD,YAAauM,EAAKvM,YAClBE,YAAaqM,EAAKrM,aAAe,GACjCy+D,eAAgBpyD,EAAKpM,gBAAkB,WAAa,KACpDm+D,WAAYA,GAdL9rE,KAeHosE,sBAAsBryD,EAAK5M,UACvC,EACAo+D,kBAAmB,SAASzkE,GACxB,IAAI0tC,EAAY,GACZg3B,EAAgBh3B,EAEpB,GAAI1tC,EACA,IAA+B,GAA3BA,EAAU8e,QAAQ,KAAY,CAC9B,IAAI8hC,EAAQ5gD,EAAUqe,MAAM,KAC5BqvB,EAAYkT,EAAM,GAClB8jB,EAAgB9jB,EAAM,EAC1B,MACIlT,EAAY1tC,EAGpB,MAAO,CAAE0tC,UAAWA,EAAWg3B,cAAeA,EAClD,EACAY,sBAAuB,SAASj/D,GAC5B,OAAKA,EAIE,CAAEwnC,WAAwB,QAAZxnC,EAAqB,OAAS,GAAIynC,YAAyB,SAAZznC,EAAsB,OAAS,IAHxF,CAAC,CAIhB,EACAm7D,WAAY,SAASnwC,EAAO8vC,GACxB,IAAK9vC,EACD,MAAO,CAAErzB,gBAAiB,CAAC,EAAGmjE,cAAe,IAGjD,IAAIx9B,EAAMzqC,KACNqsE,EAASl0C,EAAMztB,MACfkE,EAAOupB,EAAMvpB,KACblC,EAAUyrB,EAAMzrB,QAChB4/D,EAAetrE,EAAE0L,EAAUA,EAAQ+iB,WAAU,GAAQxuB,GACzDqrE,EAAa/iE,KAAK,aAAa8L,SAE/B,IAAIvS,EAAWq1B,EAAMve,UAGrB9W,GADAA,GADAA,EAAWA,EAAS2C,QAAQ,wBAAyB,KACjCA,QAAQ,cAAe,MACvBA,QAAQ,YAAa,IAEzC,IAKI+kE,EALA+B,EAAiB9hC,EAAI+hC,cAAcr0C,GAAO,GAC1Cs0C,EAAgBhiC,EAAIiiC,kBAAkBv0C,GACtCjrB,EAAmBR,EAAU+9B,EAAI+hC,cAAc9/D,GAAWzL,EAC1D+5B,EAAqBjzB,EAAI2xB,uBAAuBvB,GAIhDqyC,EADA//B,EAAIm/B,2BAA2BzxC,GACZ,MACZn3B,EAAEm3B,GAAO5uB,KAAK,aAAa1I,OAAS,EACxB,QAEA,OAGvBkH,EAAImwB,kBAAkBC,EAAOwvC,GAC7B,IAAIoD,EAAkBhjE,EAAI4yB,oBAAoBxC,GAC1Cw0C,EAAwB5kE,EAAIgzB,0BAA0B5C,EAAO6C,GACjEjzB,EAAIuwB,mBAAmBH,EAAOwvC,GAE9B,IAAIiF,EAAY,CACZ9nE,gBAAiB,CACb8H,MAAOy/D,EAAOz/D,OAASurB,EAAMvrB,MAAQm4C,WAAWsnB,EAAOz/D,OAASurB,EAAMvrB,OAAS,KAC/EC,OAAQw/D,EAAOx/D,QAAUsrB,EAAMtrB,OAASk4C,WAAWsnB,EAAOx/D,QAAUsrB,EAAMtrB,QAAU,KACpF8B,QAASo8D,EACTn8D,KAAMA,EAAK/N,OACXkrE,UAAWthC,EAAIoiC,SAASR,EAAOz/D,OAC/Bo/D,WAAYvhC,EAAIoiC,SAASR,EAAOx/D,QAChCE,YAAaorB,EAAMprB,YACnBC,YAAamrB,EAAMnrB,YACnBlG,UAAWylE,EAAe/3B,UAC1BrnC,SAAUs/D,EACVP,QAASG,EAAOJ,iBAAmB9zC,EAAM+zC,QACzCtyD,UAAW9W,EACXwK,GAAI6qB,EAAM7qB,GACVG,YAAa4+D,EAAO5+D,aAAe0qB,EAAM5qB,OACzCG,YAAa2+D,EAAO3+D,YACpBF,YAAa6+D,EAAO7+D,aAAe,GACnCG,kBAAmB0+D,EAAOF,eAC1Bx/D,QAASwrB,EAAMxrB,QACfy+D,eAAgB1+D,EAAU4/D,EAAat3D,OAAS,GAChD9H,iBAAkBR,GAAWQ,EAAiBsnC,UAAYtnC,EAAiBsnC,UAAY,IAAMtnC,EAAiBs+D,cAAgB,GAC9Ht8D,WAAY8rB,EACZ7rB,cAAew9D,EACfnC,iBAAkBA,GAEtBvC,cAAe,IAKnB,OAFA2E,EAAUh+D,KAAO67B,EAAIqiC,eAAel+D,EAAMq5D,EAAe2E,GAElDA,CACX,EACAE,eAAgB,SAASl+D,EAAMq5D,EAAe2E,GAG1C,IAFA,IACoBG,EAASt0C,EAAOG,EAAMo0C,EAAtCjzD,EAAO,GACFtX,EAAI,EAAGA,EAAImM,EAAK/N,OAAQ4B,IAAK,CAElCsqE,EAAU,CAAEt0C,MAAO,IACnBA,EAFM7pB,EAAKnM,GAECg2B,MACZ1e,EAAK5Z,KAAK4sE,GACV,IAAK,IAAIvqD,EAAI,EAAGA,EAAIiW,EAAM53B,OAAQ2hB,IAC9BoW,EAAOH,EAAMjW,GACbwqD,EATEhtE,KASaitE,UAAUr0C,IACc,GAAnC53B,EAAE0B,QAAQk2B,EAAMqvC,IAChB2E,EAAU3E,cAAc9nE,KAAK6sE,GAEjCD,EAAQt0C,MAAMt4B,KAAK6sE,EAE3B,CACA,OAAOjzD,CACX,EACAkzD,UAAW,SAASr0C,GAChB,IAAI6R,EAAMzqC,KACNktE,EAASt0C,EAAKluB,MACd5D,EAAY2jC,EAAI+hC,cAAc5zC,GAoBlC,OAnBA9xB,EAAYA,EAAU0tC,UAAY1tC,EAAU0tC,UAAY,IAAM1tC,EAAU0kE,cAAgB,GAE7E,CACP5+D,MAAOsgE,EAAOtgE,OAASgsB,EAAKhsB,MAAQm4C,WAAWmoB,EAAOtgE,OAASgsB,EAAKhsB,OAAS,KAC7EC,OAAQqgE,EAAOrgE,QAAU+rB,EAAK/rB,OAASk4C,WAAWmoB,EAAOrgE,QAAU+rB,EAAK/rB,QAAU,KAClFk/D,UAAWthC,EAAIoiC,SAASK,EAAOtgE,OAC/Bo/D,WAAYvhC,EAAIoiC,SAASK,EAAOrgE,QAChCI,WAAYigE,EAAO1iB,OACnBx9C,YAAakgE,EAAOziB,QACpB3jD,UAAWA,EACXolE,QAASgB,EAAOjB,iBAAmBrzC,EAAKszC,QACxCtyD,UAAWgf,EAAKhf,UAChBtM,GAAIsrB,EAAKtrB,GACTG,YAAay/D,EAAOz/D,aAAemrB,EAAKrrB,OACxCG,YAAaw/D,EAAOx/D,YACpBF,YAAa0/D,EAAO1/D,YACpBI,SAA+B,UAArBs/D,EAAOpB,WAIzB,EACAY,kBAAmB,SAASllE,GACxB,IAAIkD,EAAQlD,EAAQkD,MACpB,MAAwB,QAApBA,EAAMiqC,YAA6C,QAArBjqC,EAAMkqC,YAC7B,SAGa,QAApBlqC,EAAMiqC,WACC,QAGJ,MACX,EACA63B,cAAe,SAAShlE,EAAS2lE,GAC7B,IAAIziE,EAAQlD,EAAQkD,MAChB0iE,EAAS1iE,EAAM8pC,WAAahtC,EAAQkgD,OAAS,GACjD,GAAIylB,EACA,MAAO,CAAE34B,UAAW44B,GAExB,IAAIC,EAAS3iE,EAAM8gE,eAAiBhkE,EAAQ6lE,QAAU,GACtD,OAAID,GAAUC,EACH,CAAE74B,UAAW44B,EAAQ5B,cAAe6B,IAE1CD,GAAUC,EACJ,CAAE74B,UAAW,OAAQg3B,cAAe6B,GAE3CD,IAAWC,EACJ,CAAE74B,UAAW44B,EAAQ5B,cAAe,OAExC,CAAEh3B,UAAW,GAAIg3B,cAAe,GAC3C,EACAqB,SAAU,SAASr7D,GACf,IAAIqzC,GAAQrzC,GAAS,IAAIomB,MAAM8vC,GAC/B,OAAO7iB,EAAOA,EAAK,GAAK,IAC5B,EACAmjB,eAAgB,SAASp1D,GACrB,IAAI+R,EAAQ5c,EAAI6c,SAASrS,EAAWoS,MAAM/R,GAAQ7K,EAAI8c,iBAAiB,GACvE,OAAOy7B,EAAkB7U,aAAa9mB,GAAO,EACjD,EACAwjD,eAAgB,SAASv1D,GACrB,IAAI+R,EAAQ5c,EAAI6c,SAASrS,EAAWoS,MAAM/R,GAAQ7K,EAAI8c,iBAAiB,GACvE,OAAO4iD,EAAkBh8B,aAAa9mB,EAC1C,EACAokD,kBAAmB,SAASuE,GACxB,OAAOA,EAAWA,EAAWzsE,OAAS,EAC1C,IAGAygD,EAAkBx7C,EAAOqkB,KAAKxqB,OAAO,CACrCS,QAAS,SAASP,GAGd,OAFAA,EAAQ2hD,eAAiBxhD,KAAKH,QAAQ2hD,eACtC3hD,EAAQgoE,kBAAoB7nE,KAAKH,QAAQgoE,gBAClC,IAAItmB,EAAmB1hD,EAClC,IAGA0tE,EAAsBjsB,EAAgB3hD,OAAO,CAC7CwI,OAAQ,SAAS9G,EAAIsjB,GACjB,IAAInO,GAAe8pC,EAAkB9pC,YAAYmO,GAC7Cnb,EAAUnI,EAAG6G,QAAQ,cAAc8iC,mBAEnB,IAAhBx0B,EACAhN,EAAQwO,KAAK3W,GAEbmI,EAAQqd,KAAKxlB,EAErB,IAGAmsE,EAA0BlsB,EAAgB3hD,OAAO,CACjDwI,OAAQ,SAAS9G,EAAIsjB,GACjB,IAAInO,GAAe8pC,EAAkB9pC,YAAYmO,GAC7Cnb,EAAUnI,EAAG6G,QAAQ,cAAc8iC,mBAEnB,IAAhBx0B,EACAhN,EAAQwO,KAAK3W,GAEbmI,EAAQqd,KAAKxlB,EAErB,IAGJ7B,EAAM6B,GAAGyG,OAAOw5C,gBAAkBA,EAClC9hD,EAAM6B,GAAGyG,OAAOy5C,mBAAqBA,EAErC57C,EAAa,kBAAmB,IAAI4nE,EAAoB,CAAEntE,QAASmhD,EAAoBC,gBAAgB,EAAO/iB,SAAU,qBACxH94B,EAAa,sBAAuB,IAAI6nE,EAAwB,CAAEptE,QAASmhD,EAAoBsmB,iBAAiB,EAAMrmB,gBAAgB,EAAO/iB,SAAU,wBAEtJ,CAlrBD,CAkrBGv9B,OAAO1B,MAAM2sB,QAEhB,SAAUnrB,EAAGC,GAEb,IAAIzB,EAAQ0B,OAAO1B,MACfiT,EAASjT,EAAMq/B,WACf4uC,EAAyB,CAAEjrE,OAAQ,IAAKylB,IAAK,GAC7Cnb,EAAQ,CAAC,KAAM,MACf4gE,EAAe,CAAC,QAAS,SAAU,SAAU,SAAU,SAAU,QAAS,QAAS,SAAU,UAAW,UAAW,OAAQ,UAI3HC,EAA2B,CAC3Bl0D,WAAY,CAAC,CACTG,UAAW,YACXpI,MAAO,QACR,CACCoI,UAAW,mBACXpI,MAAO,WAEXo9B,cAAe,YACfD,eAAgB,QAChB5qB,SAAU,EAAGnK,YAAWsK,aAAc1kB,EAAM6B,GAAGwB,KAAK7B,EAAE,gBAAgByR,EAAOyR,eAAsB,CAAErhB,KAAM4P,EAAOmH,KAAgBnH,EAAOyR,GACzIk4B,cAAe,EAAGxiC,YAAWsK,aAAc1kB,EAAM6B,GAAGwB,KAAK7B,EAAE,gBAAgByR,EAAOyR,eAAsB,CAAErhB,KAAM4P,EAAOmH,GAAYyiC,UAAW,gBAAmB5pC,EAAOyR,IAGxK0pD,EAAgC,CAChCn0D,WAAY,CAAC,CACTG,UAAW,uBACXpI,MAAO,QACR,CACCoI,UAAW,wBACXpI,MAAO,UACR,CACCoI,UAAW,qBACXpI,MAAO,UAEXo9B,cAAe,YACfD,eAAgB,QAChB5qB,SAAU,EAAGnK,YAAWsK,aAAc1kB,EAAM6B,GAAGwB,KAAK7B,EAAE,gBAAgByR,EAAOyR,eAAsB,CAAErhB,KAAM4P,EAAOmH,KAAgBnH,EAAOyR,GACzIk4B,cAAe,EAAGxiC,YAAWsK,aAAc1kB,EAAM6B,GAAGwB,KAAK7B,EAAE,gBAAgByR,EAAOyR,eAAsB,CAAErhB,KAAM4P,EAAOmH,GAAYyiC,UAAW,kBAAqB5pC,EAAOyR,IAG1K2pD,EAAiC,CACjCp0D,WAAY,CAAC,CACTG,UAAW,0BACXpI,MAAO,QACR,CACCoI,UAAW,4BACXpI,MAAO,UACR,CACCoI,UAAW,2BACXpI,MAAO,SACR,CACCoI,UAAW,eACXpI,MAAO,KAEXo9B,cAAe,YACfD,eAAgB,QAChB5qB,SAAU,EAAGnK,YAAWsK,aAAc1kB,EAAM6B,GAAGwB,KAAK7B,EAAE,gBAAgByR,EAAOyR,eAAsB,CAAErhB,KAAM4P,EAAOmH,KAAgBnH,EAAOyR,GACzIk4B,cAAe,EAAGxiC,YAAWsK,aAAc1kB,EAAM6B,GAAGwB,KAAK7B,EAAE,gBAAgByR,EAAOyR,eAAsB,CAAErhB,KAAM4P,EAAOmH,GAAYyiC,UAAW,kBAAqB5pC,EAAOyR,IAG1K4pD,EAAgC,CAChCr0D,WAAY,CAAC,CACTG,UAAW,uBACXpI,MAAO,YACR,CACCoI,UAAW,yBACXpI,MAAO,cACR,CACCoI,UAAW,wBACXpI,MAAO,aACR,CACCoI,UAAW,0BACXpI,MAAO,eACR,CACCoI,UAAW,4BACXpI,MAAO,iBACR,CACCoI,UAAW,2BACXpI,MAAO,gBACR,CACCoI,UAAW,0BACXpI,MAAO,eACR,CACCoI,UAAW,4BACXpI,MAAO,iBACR,CACCoI,UAAW,2BACXpI,MAAO,gBACR,CACCoI,UAAW,eACXpI,MAAO,KAEXo9B,cAAe,YACfD,eAAgB,QAChB5qB,SAAU,EAAGnK,YAAWsK,aAAc1kB,EAAM6B,GAAGwB,KAAK7B,EAAE,gBAAgByR,EAAOyR,eAAsB,CAAErhB,KAAM4P,EAAOmH,KAAgBnH,EAAOyR,GACzIk4B,cAAe,EAAGxiC,YAAWsK,aAAc1kB,EAAM6B,GAAGwB,KAAK7B,EAAE,gBAAgByR,EAAOyR,eAAsB,CAAErhB,KAAM4P,EAAOmH,GAAYyiC,UAAW,kBAAqB5pC,EAAOyR,IAG1K6pD,EAAyC,CACzCt0D,WAAY,CAAC,CACTG,UAAW,uBACXpI,MAAO,YACR,CACCoI,UAAW,yBACXpI,MAAO,cACR,CACCoI,UAAW,wBACXpI,MAAO,aACR,CACCoI,UAAW,0BACXpI,MAAO,eACR,CACCoI,UAAW,4BACXpI,MAAO,iBACR,CACCoI,UAAW,2BACXpI,MAAO,gBACR,CACCoI,UAAW,eACXpI,MAAO,KAEXo9B,cAAe,YACfD,eAAgB,QAChB5qB,SAAU,EAAGnK,YAAWsK,aAAc1kB,EAAM6B,GAAGwB,KAAK7B,EAAE,gBAAgByR,EAAOyR,eAAsB,CAAErhB,KAAM4P,EAAOmH,KAClHwiC,cAAe,EAAGxiC,YAAWsK,aAAc1kB,EAAM6B,GAAGwB,KAAK7B,EAAE,gBAAgByR,EAAOyR,eAAsB,CAAErhB,KAAM4P,EAAOmH,GAAYyiC,UAAW,mBAG9I2xB,EAAgC,EAAGpkE,cAIvB,0KAAyBA,EAAS2C,oBAC1B3C,EAAS6C,8LAMjBjN,EAAMwV,KAAKo1B,aAAa,2DAA4DxgC,EAASuC,2BAA6B,CACtHtJ,KAAM,QACFwnC,WAAY,YAEhB7qC,EAAMwV,KAAKo1B,aAAa,8DAA+DxgC,EAASwC,+BAAiC,CAC7HvJ,KAAM,mBAf1B,eAmBIorE,EAA+B,EAAGrkE,cACtC,8MAGYpK,EAAMwV,KAAKo1B,aAAa,2DAA4DxgC,EAASuC,2BAA6B,CACtHtJ,KAAM,QACFwnC,WAAY,YAEhB7qC,EAAMwV,KAAKo1B,aAAa,8DAA+DxgC,EAASwC,+BAAiC,CAC7HvJ,KAAM,mBAR1B,eAaA0lE,EAAoB/oE,EAAM2B,MAAMxB,OAAO,CACvCC,KAAM,SAASC,GACXG,KAAKH,QAAUA,CACnB,EACAquE,2BAA4B,WACxB,IAIIxjC,EAJA9iC,EAAO5H,KACPH,EAAU+H,EAAK/H,QACfmR,EAAgBnR,EAAQmR,cACxBm9D,EAAYtuE,EAAQs4B,MAEpBvuB,EAAW/J,EAAQ+J,SACnBwuC,EAAO54C,EAAM+B,QAAQE,QAAQsZ,KAEjC,SAASzB,EAAMpQ,GACXA,EAAEgU,iBACFtV,EAAK8J,UACLg5B,EAAOh5B,SACX,CAcA,SAAS08D,EAAallE,GAClBoQ,EAAMpQ,GACNrJ,EAAQuoE,eACZ,CAEAp3D,EAAcsI,MAAQ80D,EACtBp9D,EAAc2+B,SAAW,IACzB3+B,EAAciH,MAAQrO,EAAS9E,gBAC/BkM,EAAcqQ,QAAUxhB,EAAQwhB,QAUhC,IAAI7Z,GARJkjC,EAAS1pC,EAAE4G,EAAKymE,gBAAgBzkE,IAAWuR,SAAS1U,SAASqM,MACxDmO,YAAYjQ,GACZmH,SAAS,mBACTjQ,QAAQ,aAAa6e,YAAY,QAASlnB,EAAQmZ,OAAOkkB,MACzD3zB,KAAK,gBAAgBmX,GAAG,SA1B7B,SAAmBxX,GACftB,EAAK0mE,yBAAyBH,GAE9B70D,EAAMpQ,GAEFtB,EAAKiM,QACLjM,EAAKiM,SAGThU,EAAQuoE,cAAc+F,EAC1B,IAgBiDjxC,MAC5C3zB,KAAK,mBAAmBmX,GAAG,QAAS0tD,GAAclxC,MAClDnjB,KAAK,gBAEWvS,QASrB,GARAxH,KAAKuuE,WAAa,CAAC,EACnB3mE,EAAK4mE,uBAAuBhnE,GAC5BI,EAAK6mE,qBAAuB7mE,EAAK8mE,2BAA2BhkC,EAAQ9gC,GACpEhC,EAAK+mE,6BAA+B/mE,EAAKgnE,mCAAmClkC,EAAQ9gC,GAEpF8gC,EAAOG,SACPH,EAAO5xB,OAEHs/B,EAAM,CACN,IAAIQ,EAAepxC,EAAQU,QAAQ,aAAa2E,SAChDrF,EAAQgJ,IAAI,aAAcooC,EAC9B,CACJ,EACAi2B,0BAA2B,WACvB,IAIInkC,EAJA9iC,EAAO5H,KACPH,EAAU+H,EAAK/H,QACfmR,EAAgBnR,EAAQmR,cACxBm9D,EAAYtuE,EAAQs4B,MAEpBvuB,EAAW/J,EAAQ+J,SACnBwuC,EAAO54C,EAAM+B,QAAQE,QAAQsZ,KAEjC,SAASzB,EAAMpQ,GACXA,EAAEgU,iBACFtV,EAAK8J,UACLg5B,EAAOh5B,SACX,CAcA,SAAS08D,EAAallE,GAClBoQ,EAAMpQ,GACNrJ,EAAQuoE,eACZ,CAEAp3D,EAAcsI,MAAQ80D,EACtBp9D,EAAc2+B,SAAW,IACzB3+B,EAAciH,MAAQrO,EAAS7E,oBAC/BiM,EAAcqQ,QAAUxhB,EAAQwhB,QAUhC,IAAI7Z,GARJkjC,EAAS1pC,EAAE4G,EAAKymE,gBAAgBzkE,EAAUqkE,IAA+B9yD,SAAS1U,SAASqM,MACtFmO,YAAYjQ,GACZmH,SAAS,mBACTjQ,QAAQ,aAAa6e,YAAY,QAASlnB,EAAQmZ,OAAOkkB,MACzD3zB,KAAK,gBAAgBmX,GAAG,SA1B7B,SAAmBxX,GACftB,EAAKknE,wBAAwBX,GAE7B70D,EAAMpQ,GAEFtB,EAAKiM,QACLjM,EAAKiM,SAGThU,EAAQuoE,cAAc+F,EAC1B,IAgBiDjxC,MAC5C3zB,KAAK,mBAAmBmX,GAAG,QAAS0tD,GAAclxC,MAClDnjB,KAAK,gBAEWvS,QAMrB,GALAI,EAAKmnE,oBAAsBnnE,EAAKonE,0BAA0BtkC,EAAQ9gC,GAElE8gC,EAAOG,SACPH,EAAO5xB,OAEHs/B,EAAM,CACN,IAAIQ,EAAepxC,EAAQU,QAAQ,aAAa2E,SAChDrF,EAAQgJ,IAAI,aAAcooC,EAC9B,CACJ,EACA9/B,KAAM,SAASm2D,GACNA,EAGDjvE,KAAK6uE,4BAFL7uE,KAAKkuE,4BAIb,EAEAM,uBAAwB,SAAShnE,IACZxH,KAAKuuE,WAAa,CAAC,GACzBW,SAAW1nE,EAAQ+B,KAAK,wBAAwB4lE,cAAc,CACrEh+D,WAAW,IACZ4I,KAAK,gBACZ,EAEAu0D,yBAA0B,WACtB,IAAI1mE,EAAO5H,KACP+Z,EAAOnS,EAAK/H,QAAQs4B,MACxBvwB,EAAKwnE,wBAAwBr1D,GAC7BnS,EAAKynE,gCAAgCt1D,EACzC,EAEA+0D,wBAAyB,WACrB,IACI/0D,EADO/Z,KACKH,QAAQs4B,MADbn4B,KAENsvE,uBAAuBv1D,EAChC,EAEAq1D,wBAAyB,SAASjB,GAC9B,IAAIoB,EAAYvvE,KAAKuuE,WAAWgB,UAC5BzqE,EAAkBqpE,EAAUrpE,gBAC5BkoE,EAAWmB,EAAU/E,eAAiB+E,EAAU/E,gBAAkB,CAAC,EACvEtkE,EAAgB8H,MAAQ2iE,EAAU3iE,MAAM4E,QACxC1M,EAAgBinE,UAAYwD,EAAUxD,UAAUv6D,QAChD1M,EAAgB+H,OAAS0iE,EAAU1iE,OAAO2E,QAC1C1M,EAAgB6J,QAAU4gE,EAAU5gE,QAAQ6C,QAC5C1M,EAAgB8J,KAAO2gE,EAAU3gE,KAAK4C,QACtC1M,EAAgBknE,WAAauD,EAAUvD,WAAWx6D,QAClD1M,EAAgBiI,YAAcwiE,EAAUxiE,YAAYyE,QACpD1M,EAAgBkI,YAAcuiE,EAAUviE,YAAYwE,QACpD1M,EAAgBgC,UAAYyoE,EAAUzoE,UAAU0K,QAChD1M,EAAgBqI,SAAWoiE,EAAUpiE,SAASqE,QAC9C1M,EAAgBonE,QAAUqD,EAAUrD,QAAQ16D,QAC5C1M,EAAgB2I,YAAc8hE,EAAU9hE,YAAY+D,QACpD1M,EAAgB4I,YAAc6hE,EAAU7hE,YAAY8D,QACpD1M,EAAgB0I,YAAc+hE,EAAU/hE,YAAYgE,QACpD1M,EAAgB6I,gBAAkB4hE,EAAU5hE,gBAAgB6hE,QAEvDxC,EAASpgE,QACVogE,EAASn+D,gBAAiB,EAC1Bm+D,EAASpgE,MAAQ,IAAMuhE,EAAUrpE,gBAAgB6J,QACjDq+D,EAASjB,UAAY,IAE7B,EAEAuD,uBAAwB,SAASn3C,GAC7B,IAAI60C,EAAW70C,EAAMixC,eAAiBjxC,EAAMixC,gBAAkB,CAAC,EAC3DqG,EAAWzvE,KAAKuuE,WAAWkB,SAE/BzC,EAASn+D,eAAiB4gE,EAAS5gE,eAAe2gE,QAClDxC,EAASpgE,MAAQ6iE,EAAS7iE,MAAM4E,QAChCw7D,EAASjB,UAAY0D,EAAS1D,UAAUv6D,QACxCw7D,EAASngE,OAAS4iE,EAAS5iE,OAAO2E,QAClCw7D,EAAShB,WAAayD,EAASzD,WAAWx6D,QAC1Cw7D,EAAS//D,WAAawiE,EAASxiE,WAAWuE,QAC1Cw7D,EAAShgE,YAAcyiE,EAASziE,YAAYwE,QAC5Cw7D,EAASlmE,UAAY2oE,EAAS3oE,UAAU0K,QACxCw7D,EAASd,QAAUuD,EAASvD,QAAQ16D,QACpCw7D,EAASpzD,UAAY61D,EAAS71D,UAAUpI,QACxCw7D,EAAS1/D,GAAKmiE,EAASniE,GAAGkE,QAC1Bw7D,EAASv/D,YAAcgiE,EAAShiE,YAAY+D,QAC5Cw7D,EAASt/D,YAAc+hE,EAAS/hE,YAAY8D,QAC5Cw7D,EAASx/D,YAAciiE,EAASjiE,YAAYgE,QAC5Cw7D,EAASp/D,SAA6C,QAAlC6hE,EAASC,cAAcl+D,QAEtCw7D,EAASpgE,QACVogE,EAASn+D,gBAAiB,EAC1Bm+D,EAASpgE,MAAQ,IAAMurB,EAAMrzB,gBAAgB6J,QAC7Cq+D,EAASjB,UAAY,IAE7B,EAEDsD,gCAAiC,SAASl3C,GACrC,IAAIrzB,EAAkBqzB,EAAMrzB,gBACxB6qE,EAAoB3vE,KAAKuuE,WAAWoB,kBACxC7qE,EAAgBsmE,eAAiBuE,EAAkBvE,eAAe55D,QAClE1M,EAAgBoI,iBAAmByiE,EAAkBziE,iBAAiBsE,QACtE1M,EAAgB6H,QAAUgjE,EAAkBhjE,QAAQ6E,QACpD1M,EAAgB0lE,iBAAmBmF,EAAkBnF,iBAAiBh5D,QACtE1M,EAAgB8U,UAAY+1D,EAAkB/1D,UAAUpI,QACxD1M,EAAgBwI,GAAKqiE,EAAkBriE,GAAGkE,QAC1C1M,EAAgBoK,WAAaygE,EAAkBzgE,WAAWsC,QAC1D1M,EAAgBqK,cAAgBwgE,EAAkBxgE,cAAcqC,OACpE,EACAo+D,SAAU,SAAS9iE,EAAO0E,GAClBA,IAAqC,GAA5BxQ,EAAE0B,QAAQ8O,EAAO1E,IAC1BA,EAAM3M,KAAKqR,EAEnB,EAEAq+D,oBAAqB,SAASroE,EAASi3B,EAAU1kB,EAAM+1D,EAASC,GAC5D,IAAIv2D,EAAYs2D,EAAQrxC,GAAYj3B,EAAQwoE,oBACpCD,EAAW/uE,EAAErB,OAAO,CAAC,EAAG8tE,EAAwBsC,GAAYtC,GAC9D1zD,KAAK,uBACP0kB,KAAY1kB,GACZP,EAAUhI,MAAMkU,SAAS3L,EAAK0kB,GAAW,IAEjD,EAEAwxC,kBAAmB,SAASzoE,EAASi3B,EAAU1kB,EAAM+1D,EAASr2D,GAC1D,IAAID,EAAYs2D,EAAQrxC,GAAYj3B,EAAQ0oE,kBAAkB,CAC1Dz2D,WAAYA,IACbM,KAAK,qBACR/Z,KAAKmwE,mBAAmB32D,EAAWO,EAAM0kB,EAC7C,EAEA2xC,yBAA0B,SAAS5oE,EAASi3B,EAAU1kB,EAAM+1D,EAASr2D,GACjE,IAAID,EAAYs2D,EAAQrxC,GAAYj3B,EAAQ0oE,kBAAkB,CAC1Dz2D,WAAYA,EACZk9B,YAAa32C,KAAKH,QAAQ+J,SAAS4F,aACpCuK,KAAK,qBACR/Z,KAAKmwE,mBAAmB32D,EAAWO,EAAM0kB,EAC7C,EAEA4xC,2BAA4B,SAAS7oE,EAASuS,GAC1C,IAAInQ,EAAW5J,KAAKH,QAAQ+J,SACxB2lE,EAAYvvE,KAAKuuE,WAAWgB,UAC5B91D,EAAam0D,EAA8Bn0D,WAC/CA,EAAW,GAAGyK,QAAUta,EAAS3E,eACjCwU,EAAW,GAAGyK,QAAUta,EAAS1E,iBACjCuU,EAAW,GAAGyK,QAAUta,EAASzE,gBAEjCnF,KAAKswE,sBAAsB9oE,EAASomE,EAA+B,WAAY7zD,EAAMw1D,EACzF,EAEAgB,4BAA6B,SAAS/oE,EAASuS,GAC3C,IAAInQ,EAAW5J,KAAKH,QAAQ+J,SACxB2lE,EAAYvvE,KAAKuuE,WAAWgB,UAC5B91D,EAAao0D,EAA+Bp0D,WAChDA,EAAW,GAAGyK,QAAUta,EAASkE,UACjC2L,EAAW,GAAGyK,QAAUta,EAASmE,YACjC0L,EAAW,GAAGyK,QAAUta,EAASoE,WACjCyL,EAAW,GAAGyK,QAAUta,EAAS8E,YAEjC1O,KAAKwwE,uBAAuBhpE,EAASqmE,EAAgC,YAAa9zD,EAAMw1D,EAC5F,EAEAkB,2BAA4B,SAASjpE,EAASuS,GAC1C,IAAInQ,EAAW5J,KAAKH,QAAQ+J,SACxB6lE,EAAWzvE,KAAKuuE,WAAWkB,SAC3Bh2D,EAAaq0D,EAA8Br0D,WAC/CA,EAAW,GAAGyK,QAAUta,EAASqE,aACjCwL,EAAW,GAAGyK,QAAUta,EAASsE,eACjCuL,EAAW,GAAGyK,QAAUta,EAASuE,cACjCsL,EAAW,GAAGyK,QAAUta,EAASwE,gBACjCqL,EAAW,GAAGyK,QAAUta,EAASyE,kBACjCoL,EAAW,GAAGyK,QAAUta,EAAS0E,iBACjCmL,EAAW,GAAGyK,QAAUta,EAAS2E,gBACjCkL,EAAW,GAAGyK,QAAUta,EAAS4E,kBACjCiL,EAAW,GAAGyK,QAAUta,EAAS6E,iBACjCgL,EAAW,GAAGyK,QAAUta,EAAS8E,YAEjC1O,KAAKwwE,uBAAuBhpE,EAASsmE,EAA+B,YAAa/zD,EAAM01D,EAC3F,EAEAiB,oCAAqC,SAASlpE,EAASuS,GACnD,IAAInQ,EAAW5J,KAAKH,QAAQ+J,SACxB+lE,EAAoB3vE,KAAKuuE,WAAWoB,kBACpCl2D,EAAas0D,EAAuCt0D,WACxDA,EAAW,GAAGyK,QAAUta,EAASqE,aACjCwL,EAAW,GAAGyK,QAAUta,EAASsE,eACjCuL,EAAW,GAAGyK,QAAUta,EAASuE,cACjCsL,EAAW,GAAGyK,QAAUta,EAAS2E,gBACjCkL,EAAW,GAAGyK,QAAUta,EAAS4E,kBACjCiL,EAAW,GAAGyK,QAAUta,EAAS6E,iBACjCgL,EAAW,GAAGyK,QAAUta,EAAS8E,YAEjC1O,KAAKwwE,uBAAuBhpE,EAASumE,EAAwC,mBAAoBh0D,EAAM41D,EAC3G,EACAgB,sBAAuB,SAASnpE,EAASuS,GACrC,IAAInQ,EAAW5J,KAAKH,QAAQ+J,SACxBrH,EAAO,gBACXwX,EAAK21D,cAAgB31D,EAAKnM,SAAW,OAAS,SAE9C,IAAI6hE,EAAWzvE,KAAKuuE,WAAWkB,SAC3Bh2D,EAAak0D,EAAyBl0D,WAC1CA,EAAW,GAAGyK,QAAUta,EAASgE,SACjC6L,EAAW,GAAGyK,QAAUta,EAASM,UACjC,IAAIsP,EAAYi2D,EAASltE,GACrBiF,EAAQ0oE,kBAAkBvC,GAA0B5zD,KAAK,qBAE7DP,EAAUQ,KAAK7B,SAAS,eACxBnY,KAAKmwE,mBAAmB32D,EAAWO,EAAMxX,EAC7C,EACA+tE,sBAAuB,SAAS9oE,EAASuoE,EAAUxtE,EAAMwX,EAAM+1D,GAC3D,IAAIt2D,EAAYs2D,EAAQvtE,GACpBiF,EAAQ0oE,kBAAkBH,GAAUh2D,KAAK,qBAE7CP,EAAUQ,KAAK7B,SAAS,cACxBnY,KAAKmwE,mBAAmB32D,EAAWO,EAAMxX,EAC7C,EACAiuE,uBAAwB,SAAShpE,EAASuoE,EAAUxtE,EAAMwX,EAAM+1D,GAC5D,IAAIt2D,EAAYs2D,EAAQvtE,GACpBiF,EAAQ0oE,kBAAkBH,GAAUh2D,KAAK,qBAE7CP,EAAUQ,KAAK7B,SAAS,WACxBnY,KAAKmwE,mBAAmB32D,EAAWO,EAAMxX,EAC7C,EACAquE,yBAA0B,SAASppE,EAASjF,EAAMwtE,EAAUh2D,EAAM+1D,GAC9D,IAAIt2D,EAAYs2D,EAAQvtE,GACpBiF,EAAQ0oE,kBAAkBH,GAAUh2D,KAAK,qBAE7C/Z,KAAKmwE,mBAAmB32D,EAAWO,EAAMxX,EAC7C,EACA4tE,mBAAoB,SAAS32D,EAAWO,EAAM0kB,GACtCA,KAAY1kB,GACZP,EAAUhI,MAAMuI,EAAK0kB,GAE7B,EAEAoyC,iBAAkB,SAASrpE,EAASi3B,EAAU1kB,EAAM+1D,GAChD,IAAIt2D,EAAYs2D,EAAQrxC,GACpBj3B,EAAQspE,iBAAiB,CAAErsD,SAAS,EAAOssD,aAAa,IAAQh3D,KAAK,oBAErEA,EAAK0kB,IACLjlB,EAAUhI,MAAMuI,EAAK0kB,GAE7B,EACAuyC,WAAY,SAASxpE,EAASi3B,EAAU1kB,EAAM+1D,EAASC,GACnD,IAAIv2D,EAAYs2D,EAAQrxC,GAAYj3B,EAAQypE,aAAalB,GAAY,CAAC,GAAGh2D,KAAK,gBAC1E0kB,KAAY1kB,GACZP,EAAUhI,MAAMuI,EAAK0kB,GAE7B,EAEAyyC,cAAe,SAAS1pE,EAASi3B,EAAU1kB,EAAM+1D,EAASC,GACtD,IAAIv2D,EAAYs2D,EAAQrxC,GAAYj3B,EAAQ2pE,cAAcpB,GAAY,CAAC,GAAGh2D,KAAK,iBAC3E0kB,KAAY1kB,GACZP,EAAUg2D,MAAMz1D,EAAK0kB,GAE7B,EAEA2yC,cAAe,SAAS5pE,EAASi3B,EAAU1kB,EAAM+1D,EAASC,GACtD,IAAIv2D,EAAYs2D,EAAQrxC,GAAYj3B,EAAQ6pE,cAActB,GAAY,CAAC,GAAGh2D,KAAK,iBAC3E0kB,KAAY1kB,GACZP,EAAUhI,MAAMuI,EAAK0kB,GAE7B,EAEA/sB,QAAS,WACM1R,KACNsxE,mBAAmBtxE,KAAKuuE,mBADlBvuE,KAGCuuE,UAChB,EACA+C,mBAAoB,SAAS/C,GACzB,IAAK,IAAIhhC,KAAUghC,EACXA,EAAWhhC,GAAQ77B,SACnB68D,EAAWhhC,GAAQ77B,iBAEhB68D,EAAWhhC,EAE1B,EAEA8gC,gBAAiB,SAASzkE,EAAU2nE,GAChC,OAAO/xE,EAAMukB,SAASwtD,GAAkBvD,EAAjCxuE,CAAgE,CAAEoK,SAAUA,GACvF,EAEA4nE,uBAAwB,SAASpmD,GAC7B,IAEIqmD,EAFOzxE,KACkBuuE,WAAWoB,kBACKxgE,cACzCuiE,EAAgCD,EAAqBjgE,QACrDu5D,EAAkB3/C,EAAKqiB,OAAOj8B,QAE9Bu5D,EAAkB2G,GAClBD,EAAqBjgE,MAAMu5D,GAG/B0G,EAAqBvpD,IAAI6iD,EAC7B,EAEA4G,oBAAqB,SAASvmD,GAC1B,IAEIwmD,EAFO5xE,KACkBuuE,WAAWoB,kBACEzgE,WACtC2iE,EAA4BD,EAAkBpgE,QAC9CsgE,EAAe1mD,EAAKqiB,OAAOj8B,QAE3BsgE,EAAeD,GACfD,EAAkBpgE,MAAMsgE,GAG5BF,EAAkB1pD,IAAI4pD,EAC1B,EAEApD,2BAA4B,SAAShkC,EAAQ9gC,GACzC,IAMIwmC,EANAxoC,EAAO5H,KACPm4B,EAAQvwB,EAAK/H,QAAQs4B,MACrBgY,EAAczF,EAAOljC,QAAQ+B,KAAK,uBAElCgmE,EADa3nE,EAAK2mE,WACKgB,UAAY,CAAC,EACpCzqE,EAAkBqzB,EAAMrzB,gBAAkBqzB,EAAMrzB,iBAAmB,CAAC,EA8JxE,OA3JA8C,EAAKgoE,SAAS9iE,EAAOhI,EAAgBinE,WACrCnkE,EAAKgoE,SAAS9iE,EAAOhI,EAAgBknE,YACrClnE,EAAgB0I,YAAc1I,EAAgB0I,aAAe,IAC7D4iC,EAAOD,EAAYE,UAAU,CACzBC,eAAe,EACfyhC,OAAQ,OACRC,KAAM,CACFpwB,KAAM,GAEVloC,MAAO,CACH,CACIqf,QAAS,EACTwX,MAAO,yBACPC,MAAO/9B,EAAO7I,EAAS+E,SACvB7G,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKioE,oBAAoB7uE,EAAE,wDAAwDma,SAAS1F,GACxF,UACA3Q,EACAyqE,EACA,CACItnD,IAAK,EACLzW,MAvlBM,EAwlBNqC,OAAQjM,EAAK4pE,uBAAuBppE,KAAKR,IAErD,GACF,CACEmxB,QAAS,EACTwX,MAAO,sBACPC,MAAO/9B,EAAO7I,EAASgF,MACvB9G,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKioE,oBAAoB7uE,EAAE,qDAAqDma,SAAS1F,GACrF,OACA3Q,EACAyqE,EACA,CACItnD,IAAK,EACLzW,MAtmBM,EAumBNqC,OAAQjM,EAAK+pE,oBAAoBvpE,KAAKR,IAElD,GACF,CACEmxB,QAAS,EACTwX,MAAO,uBACPC,MAAO/9B,EAAO7I,EAASgD,OACvB9E,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKioE,oBAAoB7uE,EAAE,uCAAuCma,SAAS1F,GAAY,QAAS3Q,EAAiByqE,EAAW,CAAE9/D,YAAagD,EAAO7I,EAASC,OAC/J,GACF,CACEkvB,QAAS,EACTwX,MAAO,4BACPC,MAAO,CACH5gC,SAAS,EACT2B,KAAM,UAEVzJ,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKqoE,kBAAkBjvE,EAAE,qDAAsD4I,EAASkD,aAAcqO,SAAS1F,GAC3G,YACA3Q,EACAyqE,EACAziE,EACR,GACF,CACEisB,QAAS,EACTwX,MAAO,wBACPC,MAAO/9B,EAAO7I,EAASiD,QACvB/E,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKioE,oBAAoB7uE,EAAE,wCAAwCma,SAAS1F,GAAY,SAAU3Q,EAAiByqE,EAAW,CAAE9/D,YAAagD,EAAO7I,EAASC,OACjK,GACF,CACEkvB,QAAS,EACTwX,MAAO,6BACPC,MAAO,CACH5gC,SAAS,EACT2B,KAAM,UAEVzJ,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKqoE,kBAAkBjvE,EAAE,sDAAuD4I,EAASkD,aAAcqO,SAAS1F,GAC5G,aACA3Q,EACAyqE,EACAziE,EACR,GACF,CACEisB,QAAS,EACTwX,MAAO,0BACPC,MAAO/9B,EAAO7I,EAASuD,UACvBrF,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKyoE,2BAA2BrvE,EAAE,6DAA6Dma,SAAS1F,GAAY3Q,EACxH,GAEJ,CACIi0B,QAAS,EACTwX,MAAO,2BACPC,MAAO/9B,EAAO7I,EAAS9C,WACvBgB,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAK2oE,4BAA4BvvE,EAAE,2DAA2Dma,SAAS1F,GAAY3Q,EACvH,GACF,CACEi0B,QAAS,EACTwX,MAAO,8BACPC,MAAO/9B,EAAO7I,EAASmD,aACvBjF,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKioE,oBAAoB7uE,EAAE,8CAA8Cma,SAAS1F,GAAY,cAAe3Q,EAAiByqE,EAAW,CAAE9/D,YAAagD,EAAO7I,EAASC,OAC5K,GACF,CACEkvB,QAAS,EACTwX,MAAO,8BACPC,MAAO/9B,EAAO7I,EAASoD,aACvBlF,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKioE,oBAAoB7uE,EAAE,8CAA8Cma,SAAS1F,GAAY,cAAe3Q,EAAiByqE,EAAW,CAAE9/D,YAAagD,EAAO7I,EAASC,OAC5K,GACF,CACEkvB,QAAS,OACTwX,MAAO,oBACPC,MAAO/9B,EAAO7I,EAASyD,iBACvBvF,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKipE,iBAAiB7vE,EAAE,oCAAoCma,SAAS1F,GAAY,UAAW3Q,EAAiByqE,EACjH,GACF,CACEx2C,QAAS,EACTwX,MAAO,wBACPC,MAAO/9B,EAAO7I,EAAS6D,aACvB3F,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKioE,oBAAoB7uE,EAAE,wCAAwCma,SAAS1F,GAAY,cAAe3Q,EAAiByqE,EAC5H,GACF,CACEx2C,QAAS,EACTwX,MAAO,wBACPC,MAAO/9B,EAAO7I,EAAS8D,aACvB5F,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKipE,iBAAiB7vE,EAAE,wCAAwCma,SAAS1F,GAAY,cAAe3Q,EAAiByqE,EACzH,GACF,CACEx2C,QAAS,EACTwX,MAAO,wBACPC,MAAO/9B,EAAO7I,EAAS4D,aACvB1F,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKwoE,yBAAyBpvE,EAAE,wCAAwCma,SAAS1F,GAC7E,cACA3Q,EACAyqE,EACA7B,EACR,GACF,CACE30C,QAAS,OACTwX,MAAO,4BACPC,MAAO,GACP1oC,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKspE,cAAclwE,EAAE,2CAA2Cma,SAAS1F,GAAY,kBAAmB3Q,EAAiByqE,EAAW,CAAE/+B,MAAO/9B,EAAO7I,EAAS+D,kBACjK,MAGToM,KAAK,cACHk4D,cAAc95D,SAAS,aAErBi4B,CACX,EAEA4+B,0BAA2B,SAAStkC,EAAQ9gC,GACxC,IAMIwmC,EANAxoC,EAAO5H,KACPm4B,EAAQvwB,EAAK/H,QAAQs4B,MACrBgY,EAAczF,EAAOljC,QAAQ+B,KAAK,sBAElCkmE,GADa7nE,EAAK2mE,WAAa3mE,EAAK2mE,YAAc,CAAC,GAC7BkB,SAAW,CAAC,EAClCrG,EAAkBjxC,EAAM8vC,eAAiB9vC,EAAM8vC,cAAc,IAAO,CAAEz6D,YAAa,GAAII,UAAU,GAqJrG,OAlJAhG,EAAKgoE,SAAS9iE,EAAOs8D,EAAe2C,WACpCnkE,EAAKgoE,SAAS9iE,EAAOs8D,EAAe4C,aACpC57B,EAAOD,EAAYE,UAAU,CACzBC,eAAe,EACfyhC,OAAQ,OACRC,KAAM,CACFpwB,KAAM,GAEVloC,MAAO,CACH,CACIqf,QAAS,OACTwX,MAAO,0BACPC,MAAO,GACP1oC,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKspE,cAAclwE,EAAE,0CAA0Cma,SAAS1F,GAAY,iBAAkB0iB,EAAMrzB,gBAAiB2qE,EAAU,CAAEj/B,MAAO/9B,EAAO7I,EAASiF,iBACpK,GACF,CACEkqB,QAAS,EACTwX,MAAO,sBACPC,MAAO/9B,EAAO7I,EAASgD,OACvBslE,KAAMz/D,EAAO7I,EAASkF,eACtBhH,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKioE,oBAAoB7uE,EAAE,sCAAsCma,SAAS1F,GAAY,QAAS2zD,EAAgBqG,EAAU,CAAEhgE,YAAagD,EAAO7I,EAASC,OAC5J,GACF,CACEkvB,QAAS,EACTwX,MAAO,2BACPC,MAAO,CACH5gC,SAAS,EACT2B,KAAM,UAEVzJ,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKqoE,kBAAkBjvE,EAAE,oDAAqD4I,EAASkD,aAAcqO,SAAS1F,GAC1G,YACA2zD,EACAqG,EACA3iE,EACR,GACF,CACEisB,QAAS,EACTwX,MAAO,uBACPC,MAAO/9B,EAAO7I,EAASiD,QACvBqlE,KAAMz/D,EAAO7I,EAASmF,YACtBjH,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKioE,oBAAoB7uE,EAAE,uCAAuCma,SAAS1F,GAAY,SAAU2zD,EAAgBqG,EAAU,CAAEhgE,YAAagD,EAAO7I,EAASC,OAC9J,GACF,CACEkvB,QAAS,EACTwX,MAAO,4BACPC,MAAO,CACH5gC,SAAS,EACT2B,KAAM,UAEVzJ,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKqoE,kBAAkBjvE,EAAE,qDAAsD4I,EAASkD,aAAcqO,SAAS1F,GAC3G,aACA2zD,EACAqG,EACA3iE,EACR,GACF,CACEisB,QAAS,EACTwX,MAAO,0BACPC,MAAO/9B,EAAO7I,EAAS9C,WACvBgB,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAK6oE,2BAA2BzvE,EAAE,0DAA0Dma,SAAS1F,GAAY2zD,EACrH,GACF,CACErwC,QAAS,EACTwX,MAAO,qBACPC,MAAO,eACP1oC,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAK+oE,sBAAsB3vE,EAAE,qCAAqCma,SAAS1F,GAC3E2zD,EACJ,GACF,CACErwC,QAAS,OACTwX,MAAO,mBACPC,MAAO/9B,EAAO7I,EAASwD,YACvBtF,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKipE,iBAAiB7vE,EAAE,mCAAmCma,SAAS1F,GAAY,UAAW2zD,EAAgBqG,EAC/G,GACF,CACE12C,QAAS,EACTwX,MAAO,6BACPC,MAAO/9B,EAAO7I,EAASqD,YACvBnF,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKioE,oBAAoB7uE,EAAE,6CAA6Cma,SAAS1F,GAAY,aAAc2zD,EAAgBqG,EAAU,CAAEhgE,YAAagD,EAAO7I,EAASC,OACxK,GACF,CACEkvB,QAAS,EACTwX,MAAO,+BACPC,MAAO/9B,EAAO7I,EAASoD,aACvBlF,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKioE,oBAAoB7uE,EAAE,+CAA+Cma,SAAS1F,GAAY,cAAe2zD,EAAgBqG,EAAU,CAAEhgE,YAAagD,EAAO7I,EAASC,OAC3K,GACF,CACEkvB,QAAS,EACTwX,MAAO,6BACPC,MAAO/9B,EAAO7I,EAAS6D,aACvB3F,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKioE,oBAAoB7uE,EAAE,6CAA6Cma,SAAS1F,GAAY,cAAe2zD,EAAgBqG,EAAU,CAAEhgE,YAAagD,EAAO7I,EAASC,OACzK,GACF,CACEkvB,QAAS,EACTwX,MAAO,6BACPC,MAAO/9B,EAAO7I,EAAS8D,aACvB5F,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKipE,iBAAiB7vE,EAAE,6CAA6Cma,SAAS1F,GAAY,cAAe2zD,EAAgBqG,EAAU,CAAEhgE,YAAagD,EAAO7I,EAASC,OACtK,GACF,CACEkvB,QAAS,EACTwX,MAAO,6BACPC,MAAO/9B,EAAO7I,EAAS4D,aACvB1F,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKwoE,yBAAyBpvE,EAAE,6CAA6Cma,SAAS1F,GAClF,cACA2zD,EACAqG,EACA/B,EACR,GACF,CACE30C,QAAS,OACTwX,MAAO,mBACPC,MAAO,CACHj/B,KAAMkB,EAAO7I,EAAS0D,IACtB6kE,UAAU,GAEdrqE,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKopE,WAAWhwE,EAAE,mCAAmCma,SAAS1F,GAAY,KAAM2zD,EAAgBqG,EACpG,GACF,CACE12C,QAAS,OACTwX,MAAO,0BACPC,MAAO,CACHj/B,KAAMkB,EAAO7I,EAAS9G,UACtBqvE,UAAU,GAEdrqE,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKopE,WAAWhwE,EAAE,0CAA0Cma,SAAS1F,GAAY,YAAa2zD,EAAgBqG,EAClH,MAGT11D,KAAK,cACHk4D,cAAc95D,SAAS,aAErBi4B,CACX,EAEAw+B,mCAAoC,SAASlkC,EAAQ9gC,GACjD,IAMIwmC,EANAxoC,EAAO5H,KACPm4B,EAAQvwB,EAAK/H,QAAQs4B,MACrBgY,EAAczF,EAAOljC,QAAQ+B,KAAK,+BAElComE,EADa/nE,EAAK2mE,WACaoB,kBAAoB,CAAC,EACpD7qE,EAAkBqzB,EAAMrzB,gBAsH5B,OAnHAsrC,EAAOD,EAAYE,UAAU,CACzBC,eAAe,EACfyhC,OAAQ,OACRC,KAAM,CACFpwB,KAAM,GAEVloC,MAAO,CACH,CACIqf,QAAS,OACTwX,MAAO,cACPC,MAAO,CACHj/B,KAAMkB,EAAO7I,EAAS0D,IACtB6kE,UAAU,GAEdrqE,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKopE,WAAWhwE,EAAE,8BAA8Bma,SAAS1F,GAAY,KAAM3Q,EAAiB6qE,EAChG,GACF,CACE52C,QAAS,OACTwX,MAAO,qBACPC,MAAO,CACHj/B,KAAMkB,EAAO7I,EAAS9G,UACtBqvE,UAAU,GAEdrqE,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKopE,WAAWhwE,EAAE,qCAAqCma,SAAS1F,GAAY,YAAa3Q,EAAiB6qE,EAC9G,GAEJ,CACIoC,OAAQ,OACRC,KAAM,CACFpwB,KAAM,EACNwwB,OAAQ,IAEZr5C,QAAS,OACTrxB,KAAM,QACN8oC,MAAO,gBACP92B,MAAO,CACH,CACIqf,QAAS,EACTwX,MAAO,yBACPC,MAAO,CACHj/B,KAAMkB,EAAO7I,EAAS8C,SACtBylE,UAAU,GAEdrqE,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKopE,WAAWhwE,EAAE,yCAAyCma,SAAS1F,GAAY,iBAAkB3Q,EAAiB6qE,EACvH,GACF,CACE52C,QAAS,EACTwX,MAAO,mCACPC,MAAO/9B,EAAO7I,EAASsD,kBACvBpF,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAK8oE,oCAAoC1vE,EAAE,mDAAmDma,SAAS1F,GAAY3Q,EACvH,GACF,CACEi0B,QAAS,EACTwX,MAAO,6BACPC,MAAO/9B,EAAO7I,EAASsF,YACvBpH,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKioE,oBAAoB7uE,EAAE,6CAA6Cma,SAAS1F,GACjF,aACA3Q,EACA6qE,EACA,CACIznD,IAAKpjB,EAAgB8J,MAx8BnB,GA08BV,GACF,CACEmqB,QAAS,EACTwX,MAAO,gCACPC,MAAO/9B,EAAO7I,EAASuF,eACvBrH,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKioE,oBAAoB7uE,EAAE,gDAAgDma,SAAS1F,GACpF,gBACA3Q,EACA6qE,EACA,CACIznD,IAAKpjB,EAAgB6J,SAr9BnB,GAu9BV,GACF,CACEoqB,QAAS,EACTwX,MAAO,yBACPC,MAAO/9B,EAAO7I,EAASiE,2BACvB/F,OAAQ,SAAS2N,EAAW5V,GACxB,IAAI2H,EAAUxG,EAAE,kGACY4I,EAASyF,qFACRzF,EAAS0F,oFACX1F,EAAS2F,oEACxB4L,SAAS1F,GAErB7N,EAAKgpE,yBAAyBppE,EAAS,mBAAoB,CAAEqnC,gBAAgB,GAAQ/pC,EAAiB6qE,EAC1G,GACF,CACE52C,QAAS,OACTwX,MAAO,iCACPC,MAAO,CACHj/B,KAAMkB,EAAO7I,EAAS+C,SACtBwlE,UAAU,GAEdrqE,OAAQ,SAAS2N,EAAW5V,GACxB+H,EAAKwpE,cAAcpwE,EAAE,6DAA6Dma,SAAS1F,GAAY,UAAW3Q,EAAiB6qE,EAAmB,CAClJ/gE,KAAM,EACNa,YAAa7F,EAASwF,yBAE9B,QAKjB2K,KAAK,cAEHk4D,cAAc95D,SAAS,aAErBi4B,CACX,IAGJ5wC,EAAM6B,GAAGyG,OAAOygE,kBAAoBA,CAEnC,CAxgCD,CAwgCGrnE,OAAO1B,MAAM2sB,QAEhB,IAAIkmD,SAAW,CACP/kE,GAAI,SACJ/K,KAAM,SACN+vE,SAAU,MACVC,YAAa,6BACbC,QAAS,CAAE,WAAY,eAAgB,SAAU,cAAe,UAAW,SAC3EC,SAAU,CAAE,CACRnlE,GAAI,sBACJ/K,KAAM,gBACNgwE,YAAa,6CACbC,QAAS,CAAE,iBACZ,CACCllE,GAAI,mBACJ/K,KAAM,gBACNgwE,YAAa,4DACbC,QAAS,CAAE,cACZ,CACCllE,GAAI,qBACJ/K,KAAM,sBACNgwE,YAAa,6CACbC,QAAS,CAAE,WAAY,SAAU,iBAAkB,aACpD,CACCllE,GAAI,oBACJ/K,KAAM,aACNgwE,YAAa,+BACbC,QAAS,CAAE,MAAO,cAG1BE,QAAUlzE,aAELkzE","sourcesContent":["import './kendo.combobox.js';\nimport './kendo.dropdownlist.js';\nimport './kendo.resizable.js';\nimport './kendo.window.js';\nimport './kendo.colorpicker.js';\nimport './kendo.imagebrowser.js';\nimport './kendo.numerictextbox.js';\nimport './kendo.textarea.js';\nimport './kendo.core.js';\nimport './kendo.toolbar.js';\nimport './kendo.icons.js';\nimport './kendo.form.js';\nimport './kendo.filebrowser.js';\nimport './kendo.draganddrop.js';\nimport './kendo.html.button.js';\nimport './kendo.tabstrip.js';\n\n(function(kendo) {\n    var UndoRedoStack = kendo.Observable.extend({\n        init: function(options) {\n            kendo.Observable.fn.init.call(this, options);\n            this.clear();\n        },\n        events: [ \"undo\", \"redo\" ],\n        push: function (command) {\n            this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n            this.currentCommandIndex = this.stack.push(command) - 1;\n        },\n        undo: function () {\n            if (this.canUndo()) {\n                var command = this.stack[this.currentCommandIndex--];\n                command.undo();\n                this.trigger(\"undo\", { command: command });\n            }\n        },\n        redo: function () {\n            if (this.canRedo()) {\n                var command = this.stack[++this.currentCommandIndex];\n                command.redo();\n                this.trigger(\"redo\", { command: command });\n            }\n        },\n        clear: function() {\n            this.stack = [];\n            this.currentCommandIndex = -1;\n        },\n        canUndo: function () {\n            return this.currentCommandIndex >= 0;\n        },\n        canRedo: function () {\n            return this.currentCommandIndex != this.stack.length - 1;\n        }\n    });\n\n    kendo.deepExtend(kendo, {\n        util: {\n            UndoRedoStack: UndoRedoStack\n        }\n    });\n})(kendo);\n\n(function($,undefined$1) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        Widget = kendo.ui.Widget,\n        os = kendo.support.mobileOS,\n        browser = kendo.support.browser,\n        extend = $.extend,\n        deepExtend = kendo.deepExtend,\n        keys = kendo.keys,\n        outerWidth = kendo._outerWidth,\n        outerHeight = kendo._outerHeight,\n        NS = \".kendoEditor\";\n\n    var SELECT = \"select\";\n    var SELECT_OVERLAY_SELECTOR = \"select.k-select-overlay\";\n    var PLACEHOLDER_CLASS = \"k-placeholder\";\n    var PLACEHOLDER_TAG_ID = \"placeholder\";\n    var REFRESH_INTERVAL = 200;\n    var DEFAULT_LANGUAGE = \"en\";\n\n    var NATIVE_TOOLS = [\n        \"insertLineBreak\",\n        \"insertParagraph\",\n        \"redo\",\n        \"undo\",\n        \"autoLink\"\n    ];\n\n    var EditorUtils = {\n        editorWrapperTemplate: () =>\n            '<div class=\"k-editor\">' +\n                '<div class=\"k-editor-toolbar\" role=\"toolbar\"></div>' +\n                '<div class=\"k-editable-area k-editor-content\"></div>' +\n            '</div>',\n\n        formatByName: function(name, format) {\n            for (var i = 0; i < format.length; i++) {\n                if ($.inArray(name, format[i].tags) >= 0) {\n                    return format[i];\n                }\n            }\n        },\n\n        getToolCssClass: function(name, icon) {\n            var toolCssClassNames = {\n                superscript: \"supscript\",\n                subscript: \"subscript\",\n                justifyLeft: \"align-left\",\n                justifyCenter: \"align-center\",\n                justifyRight: \"align-right\",\n                justifyFull: \"align-justify\",\n                insertUnorderedList: \"list-unordered\",\n                insertOrderedList: \"list-ordered\",\n                insertUpperRomanList: \"list-roman-upper\",\n                insertLowerRomanList: \"list-roman-lower\",\n                \"import\": \"import\",\n                indent: \"indent\",\n                outdent: \"outdent\",\n                createLink: \"link\",\n                unlink: \"unlink\",\n                insertImage: \"image\",\n                insertFile: \"file-add\",\n                viewHtml: \"code\",\n                foreColor: \"foreground-color\",\n                backColor: \"droplet\",\n                createTable: \"table-add\",\n                addColumnLeft: \"table-column-insert-left\",\n                addColumnRight: \"table-column-insert-right\",\n                addRowAbove: \"table-row-insert-above\",\n                addRowBelow: \"table-row-insert-below\",\n                deleteRow: \"table-row-delete\",\n                deleteColumn: \"table-column-delete\",\n                mergeCellsHorizontally: \"cells-merge-horizontally\",\n                mergeCellsVertically: \"cells-merge-vertically\",\n                splitCellHorizontally: \"cell-split-horizontally\",\n                splitCellVertically: \"cell-split-vertically\",\n                tableProperties: \"table-properties\",\n                tableCellProperties: \"table-cell-properties\",\n                tableWizardInsert: \"table-wizard\",\n                tableAlignLeft: \"table-position-start\",\n                tableAlignCenter: \"table-position-center\",\n                tableAlignRight: \"table-position-end\",\n                cleanFormatting: \"clear-css\",\n                copyFormat: \"copy-format\",\n                applyFormat: \"apply-format\",\n                pdf: \"file-pdf\"\n            };\n\n            var cssClass = toolCssClassNames[name];\n\n            if (cssClass) {\n                return cssClass;\n            }\n\n            if (icon) {\n                return icon;\n            }\n\n            return EditorUtils.nameToKebab(name);\n        },\n\n        nameToKebab: function(name) {\n            return name.replace(/([a-z])([A-Z])/g, \"$1-$2\")\n                .replace(/[\\s_]+/g, '-')\n                .toLowerCase();\n        },\n\n        registerTool: function(toolName, tool) {\n            if (!tool.name) {\n                tool.options.name = toolName;\n                tool.name = toolName.toLowerCase();\n            }\n\n            if (!tool.options.ui) {\n                tool.options.ui = {};\n            }\n\n            tool.options.ui.command = toolName;\n\n            Editor.defaultTools[toolName] = tool;\n        },\n\n        registerFormat: function(formatName, format) {\n            Editor.fn.options.formats[formatName] = format;\n        },\n\n        cacheComments: function(content, comments) {\n            for (var index in comments) {\n                content = content.replace(comments[index], \"{\" + index + \"}\");\n            }\n            return content;\n        },\n\n        retrieveComments: function(content, comments) {\n            for (var index in comments) {\n                content = content.replace(\"{\" + index + \"}\", comments[index]);\n            }\n            return content;\n        }\n    };\n\n    var messages = {\n        auto: \"Auto\",\n        bold: \"Bold\",\n        italic: \"Italic\",\n        underline: \"Underline\",\n        strikethrough: \"Strikethrough\",\n        superscript: \"Superscript\",\n        subscript: \"Subscript\",\n        fitToCell: \"Fit to cell\",\n        justifyCenter: \"Center text\",\n        justifyLeft: \"Align text left\",\n        justifyRight: \"Align text right\",\n        justifyFull: \"Justify\",\n        insertUnorderedList: \"Insert unordered list\",\n        insertOrderedList: \"Insert ordered list\",\n        indent: \"Indent\",\n        outdent: \"Outdent\",\n        createLink: \"Insert hyperlink\",\n        unlink: \"Remove hyperlink\",\n        insertImage: \"Insert image\",\n        insertFile: \"Insert file\",\n        insertHtml: \"Insert HTML\",\n        viewHtml: \"View HTML\",\n        fontName: \"Select font family\",\n        fontNameInherit: \"(inherited font)\",\n        fontSize: \"Select font size\",\n        fontSizeInherit: \"(inherited size)\",\n        formatBlock: \"Format\",\n        formatting: \"Format\",\n        foreColor: \"Color\",\n        backColor: \"Background color\",\n        style: \"Styles\",\n        emptyFolder: \"Empty Folder\",\n        editAreaTitle: \"Editable area. Press F10 for toolbar.\",\n        uploadFile: \"Upload\",\n        overflowAnchor: \"More tools\",\n        orderBy: \"Arrange by:\",\n        orderBySize: \"Size\",\n        orderByName: \"Name\",\n        invalidFileType: \"The selected file \\\"{0}\\\" is not valid. Supported file types are {1}.\",\n        deleteFile: 'Are you sure you want to delete \"{0}\"?',\n        overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n        directoryNotFound: \"A directory with this name was not found.\",\n        imageWebAddress: \"Web address\",\n        imageAltText: \"Alternate text\",\n        imageWidth: \"Width (px)\",\n        imageHeight: \"Height (px)\",\n        fileWebAddress: \"Web address\",\n        fileTitle: \"Title\",\n        fileText: \"Text\",\n        linkWebAddress: \"Web address\",\n        linkText: \"Text\",\n        linkToolTip: \"ToolTip\",\n        linkOpenInNewWindow: \"Open link in new window\",\n        dialogUpdate: \"Update\",\n        dialogInsert: \"Insert\",\n        dialogOk: \"Confirm\",\n        dialogCancel: \"Cancel\",\n        cleanFormatting: \"Clean formatting\",\n        createTable: \"Create a table\",\n        createTableHint: \"Create a {0} x {1} table\",\n        addColumnLeft: \"Add column on the left\",\n        addColumnRight: \"Add column on the right\",\n        addRowAbove: \"Add row above\",\n        addRowBelow: \"Add row below\",\n        deleteRow: \"Delete row\",\n        deleteColumn: \"Delete column\",\n        mergeCellsHorizontally: \"Merge cells horizontally\",\n        mergeCellsVertically: \"Merge cells vertically\",\n        splitCellHorizontally: \"Split cells horizontally\",\n        splitCellVertically: \"Split cells vertically\",\n        tableAlignLeft: \"Table Align Left\",\n        tableAlignCenter: \"Table Align Center\",\n        tableAlignRight: \"Table Align Right\",\n        tableWizard: \"Table Wizard\",\n        tableProperties: \"Table Properties\",\n        tableCellProperties: \"Cell Properties\",\n        tableTab: \"General\",\n        cellTab: \"Cell\",\n        accessibilityTab: \"Advanced\",\n        caption: \"Caption\",\n        summary: \"Summary\",\n        width: \"Width\",\n        height: \"Height\",\n        units: \"Units\",\n        cellSpacing: \"Cell Spacing\",\n        cellPadding: \"Cell Padding\",\n        cellMargin: \"Cell Margin\",\n        alignment: \"Alignment\",\n        captionAlignment: \"Caption alignment\",\n        position: \"Position\",\n        background: \"Background\",\n        tableBackground: \"Table background\",\n        cssClass: \"CSS Class\",\n        id: \"ID\",\n        border: \"Border\",\n        borderStyle: \"Border Style\",\n        borderWidth: \"Border Width\",\n        borderColor: \"Border Color\",\n        collapseBorders: \"Collapse borders\",\n        wrapText: \"Wrap text\",\n        associateCellsWithHeaders: \"Associate headers\",\n        alignLeft: \"Align Left\",\n        alignCenter: \"Align Center\",\n        alignRight: \"Align Right\",\n        alignLeftTop: \"Align Left Top\",\n        alignCenterTop: \"Align Center Top\",\n        alignRightTop: \"Align Right Top\",\n        alignLeftMiddle: \"Align Left Middle\",\n        alignCenterMiddle: \"Align Center Middle\",\n        alignRightMiddle: \"Align Right Middle\",\n        alignLeftBottom: \"Align Left Bottom\",\n        alignCenterBottom: \"Align Center Bottom\",\n        alignRightBottom: \"Align Right Bottom\",\n        alignRemove: \"Remove Alignment\",\n        columns: \"Columns\",\n        rows: \"Rows\",\n        selectAllCells: \"Apply to all cells\",\n        applyToColumn: \"apply to column\",\n        applyToRow: \"apply to row\",\n        exportAs: \"Export As\",\n        \"import\": \"Import\",\n        print: \"Print\",\n        headerRows: \"Header Rows\",\n        headerColumns: \"Header Cols\",\n        tableSummaryPlaceholder: \"Summary attribute is not HTML5 compatible.\",\n        associateNone: \"None\",\n        associateScope: \"Associate using 'scope' attribute\",\n        associateIds: \"Associate using Ids\",\n        copyFormat: \"Copy format\",\n        applyFormat: \"Apply format\",\n        borderNone: \"None\",\n        undo: \"Undo\",\n        redo: \"Redo\"\n    };\n\n    var supportedContentEditable = typeof(document.documentElement.contentEditable) != 'undefined';\n\n    var toolGroups = {\n        basic: [\"bold\", \"italic\", \"underline\", \"strikethrough\"],\n        undo: [\"undo\", \"redo\"],\n        scripts: [\"subscript\", \"superscript\" ],\n        alignment: [\"justifyLeft\", \"justifyCenter\", \"justifyRight\", \"justifyFull\" ],\n        links: [\"insertImage\", \"insertFile\", \"createLink\", \"unlink\"],\n        lists: [\"insertUnorderedList\", \"insertOrderedList\", \"insertUpperRomanList\", \"insertLowerRomanList\",],\n        dent: [\"indent\", \"outdent\"],\n        tablesWizard: [\"tableProperties\", \"tableCellProperties\"],\n        tablesInsert: [\"createTable\"],\n        tablesAddDelete: [ \"addColumnLeft\", \"addColumnRight\", \"addRowAbove\", \"addRowBelow\", \"deleteRow\", \"deleteColumn\" ],\n        tablesMerge: [ \"mergeCellsHorizontally\", \"mergeCellsVertically\", \"splitCellHorizontally\", \"splitCellVertically\" ],\n        tablesPosition: [ \"tableAlignLeft\", \"tableAlignCenter\", \"tableAlignRight\" ],\n        formatPainter: [ \"copyFormat\", \"applyFormat\" ]\n    };\n\n    var Editor = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                editorNS = kendo.ui.editor,\n                dom = editorNS.Dom,\n                toolbarContainer,\n                type, domElement;\n\n            /* suppress initialization in devices w/o proper contenteditable support */\n            if (!supportedContentEditable) {\n                return;\n            }\n\n            Widget.fn.init.call(that, element, options);\n\n            that.options = deepExtend({}, that.options, options);\n\n            element = that.element;\n            domElement = element[0];\n            type = dom.name(domElement);\n\n            this._registerHandler(\n                element.closest(\"form\"), \"submit\", that.update.bind(that, undefined$1)\n            );\n\n            toolbarContainer = that._setupType(element);\n\n            that._initToolbar(toolbarContainer);\n            that._setupHeight(type);\n            that._resizable();\n            that._initializeContentElement(that);\n            that._setupKeyboard();\n\n            that.clipboard = new editorNS.Clipboard(this);\n            that.undoRedoStack = new kendo.util.UndoRedoStack();\n\n            that._populateValue(options, domElement);\n\n            that._registerHandler(document, {\n                \"mousedown\": function() { that._endTyping(); },\n                \"mouseup\": function(e) { that._mouseup(e); }\n            });\n\n            that._initializeImmutables();\n\n            if (type == \"textarea\") {\n                that._ariaLabel(that.wrapper.find(\"iframe\"));\n            }\n\n            that.toolbar.resize();\n\n            kendo.notify(that);\n\n            if (that._showWatermarkOverlay) {\n                that._showWatermarkOverlay((that.wrapper && that.wrapper[0]) || that.element[0]);\n            }\n        },\n\n        events: [\n            \"select\",\n            \"change\",\n            \"execute\",\n            \"error\",\n            \"paste\",\n            \"keydown\",\n            \"keyup\"\n        ],\n\n        options: {\n            name: \"Editor\",\n            messages: messages,\n            placeholder: \"\",\n            nonce: \"\",\n            unsafeInline: true,\n            formats: {},\n            encoded: true,\n            domain: null,\n            resizable: false,\n            deserialization: {\n                custom: null\n            },\n            serialization: {\n                entities: true,\n                semantic: true,\n                scripts: false,\n                optimizeTags: false,\n                keepEOL: false\n            },\n            pasteCleanup: {\n                all: false,\n                css: false,\n                custom: null,\n                keepNewLines: false,\n                msAllFormatting: false,\n                msConvertLists: true,\n                msTags: true,\n                none: false,\n                span: false\n            },\n            stylesheets: [],\n            dialogOptions: {\n                modal: true, resizable: false, draggable: true,\n                animation: false\n            },\n            imageBrowser: null,\n            fileBrowser: null,\n            navigateOnTab: false,\n            fontName: [\n                { text: \"Arial\", value: \"Arial, Helvetica, sans-serif\" },\n                { text: \"Courier New\", value: \"\\\"Courier New\\\", Courier, monospace\" },\n                { text: \"Georgia\", value: \"Georgia, serif\" },\n                { text: \"Impact\", value: \"Impact, Charcoal, sans-serif\" },\n                { text: \"Lucida Console\", value: \"\\\"Lucida Console\\\", Monaco, monospace\" },\n                { text: \"Tahoma\", value: \"Tahoma, Geneva, sans-serif\" },\n                { text: \"Times New Roman\", value: \"\\\"Times New Roman\\\", Times, serif\" },\n                { text: \"Trebuchet MS\", value: \"\\\"Trebuchet MS\\\", Helvetica, sans-serif\" },\n                { text: \"Verdana\", value: \"Verdana, Geneva, sans-serif\" }\n            ],\n            fontSize: [\n                { text: \"1 (8pt)\", value: \"xx-small\" },\n                { text: \"2 (10pt)\", value: \"x-small\" },\n                { text: \"3 (12pt)\", value: \"small\" },\n                { text: \"4 (14pt)\", value: \"medium\" },\n                { text: \"5 (18pt)\", value: \"large\" },\n                { text: \"6 (24pt)\", value: \"x-large\" },\n                { text: \"7 (36pt)\", value: \"xx-large\" }\n            ],\n            formatBlock: [\n                { text: \"Paragraph\", value: \"p\" },\n                { text: \"Quotation\", value: \"blockquote\" },\n                { text: \"Heading 1\", value: \"h1\" },\n                { text: \"Heading 2\", value: \"h2\" },\n                { text: \"Heading 3\", value: \"h3\" },\n                { text: \"Heading 4\", value: \"h4\" },\n                { text: \"Heading 5\", value: \"h5\" },\n                { text: \"Heading 6\", value: \"h6\" }\n            ],\n            tools: [\n                \"formatting\",\n                \"bold\",\n                \"italic\",\n                \"underline\",\n                \"undo\",\n                \"redo\",\n                \"justifyLeft\",\n                \"justifyCenter\",\n                \"justifyRight\",\n                \"copyFormat\",\n                \"applyFormat\",\n                \"insertUnorderedList\",\n                \"insertOrderedList\",\n                \"indent\",\n                \"outdent\",\n                \"createLink\",\n                \"unlink\",\n                \"insertImage\",\n                \"tableProperties\",\n                \"tableCellProperties\",\n                \"createTable\",\n                \"addRowAbove\",\n                \"addRowBelow\",\n                \"addColumnLeft\",\n                \"addColumnRight\",\n                \"deleteRow\",\n                \"deleteColumn\",\n                \"mergeCellsHorizontally\",\n                \"mergeCellsVertically\",\n                \"splitCellHorizontally\",\n                \"splitCellVertically\",\n                \"tableAlignLeft\",\n                \"tableAlignCenter\",\n                \"tableAlignRight\"\n            ]\n        },\n\n        destroy: function() {\n            var editor = this;\n\n            Widget.fn.destroy.call(this);\n\n            this._endTyping(true);\n\n            this._deregisterHandlers();\n\n            clearTimeout(this._spellCorrectTimeout);\n\n            this._focusOutside();\n\n            this.toolbar.destroy();\n\n            if (this.windowInstance) {\n                this.windowInstance.destroy();\n            }\n            if (this.tablePopup) {\n                this.tablePopup.destroy();\n            }\n\n            editor._destroyUploadWidget();\n\n            editor._destroyResizings();\n\n            kendo.destroy(this.wrapper);\n        },\n\n        setOptions: function(options) {\n            var editor = this;\n\n            Widget.fn.setOptions.call(editor, options);\n\n            if (options.tools) {\n                this._setOptionsTools(options.tools);\n            }\n\n            this._initializePlaceholder();\n        },\n\n        createRange: function(document) {\n            return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n        },\n\n        encodedValue: function() {\n            return kendo.ui.editor.Dom.encode(this.value());\n        },\n\n        exec: function(name, params) {\n            var that = this;\n            var command = null;\n            var defaultTools = kendo.ui.Editor.defaultTools;\n            var range, tool, prevented;\n\n            if (!name) {\n                throw new Error(\"kendoEditor.exec(): `name` parameter cannot be empty\");\n            }\n\n            if (that.body.getAttribute(\"contenteditable\") !== \"true\" &&\n                name !== \"print\" &&\n                name !== \"pdf\" &&\n                name !== \"exportAs\") {\n                return false;\n            }\n\n            if (!that.keyboard.isTypingInProgress()) {\n                that._focusBody();\n                that.selectRange(that._range || that.getRange());\n            }\n\n            tool = that.tools[name] || defaultTools[name];\n\n            if (!tool) {\n                Object.keys(defaultTools).map(key => {\n                    if (key.toLowerCase() === name) {\n                        tool = defaultTools[key];\n                    }\n                });\n            }\n\n            if (tool) {\n                range = that.getRange();\n\n                if (tool.command) {\n                    command = tool.command(extend({ range: range, body: that.body, immutables: !!that.immutables }, params));\n                }\n\n                prevented = that.trigger(\"execute\", { name: name, command: command });\n\n                if (prevented) {\n                    return;\n                }\n\n                if (/^(undo|redo)$/i.test(name)) {\n                    that.undoRedoStack[name]();\n                } else if (command) {\n                    that.execCommand(command);\n\n                    if (command.async) {\n                        command.change = that._selectionChange.bind(that);\n                        return;\n                    }\n                }\n\n                that._selectionChange();\n            }\n        },\n\n        execCommand: function(command) {\n            if (!command.managesUndoRedo) {\n                this.undoRedoStack.push(command);\n            }\n\n            command.editor = this;\n            command.exec();\n        },\n\n        focus: function() {\n            this.restoreSelection();\n        },\n\n        getRange: function() {\n            var selection = this.getSelection(),\n                range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(),\n                doc = this.document;\n\n            if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                range.setStart(this.body, 0);\n                range.collapse(true);\n            }\n\n            return range;\n        },\n\n        getSelection: function() {\n            return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n        },\n\n        paste: function(html, options) {\n            this.focus();\n\n            var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                range: this.getRange(),\n                html: html\n            }, options));\n\n            command.editor = this;\n\n            command.exec();\n        },\n\n        refresh: function() {\n            var that = this;\n\n            if (that.textarea) {\n                that._destroyResizings();\n                // preserve updated value before re-initializing\n                // don't use update() to prevent the editor from encoding the content too early\n                var value = that.value();\n                that.textarea.val(value);\n                that.wrapper.find(\"iframe\").remove();\n                that._initializeContentElement(that);\n                that.value(value);\n            }\n        },\n\n        restoreSelection: function() {\n            this._focusBody();\n\n            if (this.selectionRestorePoint) {\n                this.selectRange(this.selectionRestorePoint.toRange());\n            }\n        },\n\n        saveSelection: function(range) {\n            range = range || this.getRange();\n            var container = range.commonAncestorContainer,\n                body = this.body;\n\n            if (container == body || $.contains(body, container)) {\n                this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n            }\n        },\n\n        selectedHtml: function() {\n            return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n        },\n\n        selectRange: function(range) {\n            this._focusBody();\n            var selection = this.getSelection();\n            selection.removeAllRanges();\n            selection.addRange(range);\n            this.saveSelection(range);\n        },\n\n        state: function(toolName) {\n            var tool = kendo.ui.Editor.defaultTools[toolName];\n            var finder = tool && (tool.options.finder || tool.finder);\n            var RangeUtils = kendo.ui.editor.RangeUtils;\n            var range, textNodes;\n\n            if (finder) {\n                range = this.getRange();\n\n                textNodes = RangeUtils.textNodes(range);\n\n                if (!textNodes.length && range.collapsed) {\n                    textNodes = [range.startContainer];\n                }\n\n                return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n            }\n\n            return false;\n        },\n\n        update: function(value) {\n            value = value || this.options.encoded ? this.encodedValue() : this.value();\n\n            if (this.textarea) {\n                this.textarea.val(value);\n                this._togglePlaceholder(!value.trim());\n            } else {\n                this._oldValue = value;\n            }\n        },\n\n        value: function(html) {\n            var body = this.body,\n                editorNS = kendo.ui.editor,\n                options = this.options,\n                currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n\n            if (html === undefined$1) {\n                return currentHtml;\n            }\n\n            if (html == currentHtml) {\n                return;\n            }\n\n            editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n\n            this.selectionRestorePoint = null;\n            this.update();\n            this._refreshTools();\n        },\n\n        _bindTools: function() {\n            var that = this,\n                defaultTools = this.tools;\n\n            that.unbind(\"select\", that.toolbar.resize.bind(that.toolbar));\n\n            that.toolbar.element.find(\"[data-command]\")\n                .filter((i, el) => $(el).find(\"[data-command]\").length === 0)\n                .each((i, el) => {\n                    var toolName = el.getAttribute(\"data-command\"),\n                        tool = defaultTools[toolName];\n\n                    if (tool && tool.initialize) {\n                        tool.initialize($(el), that);\n                    }\n                });\n\n            that.bind(\"select\", that.toolbar.resize.bind(that.toolbar));\n        },\n\n        _blur: function() {\n            var textarea = this.textarea;\n            var old = textarea ? textarea.val() : this._oldValue;\n            var value = this.options.encoded ? this.encodedValue() : this.value();\n\n            this.update();\n\n            if (textarea) {\n                textarea.trigger(\"blur\");\n            }\n\n            if (value != old) {\n                this.trigger(\"change\");\n                if (textarea) {\n                    textarea.trigger(\"change\");\n                }\n            }\n        },\n\n        _containsRange: function(range) {\n            var dom = kendo.ui.editor.Dom;\n            var body = this.body;\n            return range && dom.isAncestorOrSelf(body, range.startContainer) &&\n                dom.isAncestorOrSelf(body, range.endContainer);\n        },\n\n        _createContentElement: function(stylesheets) {\n            var editor = this;\n            var iframe, wnd, doc;\n            var textarea = editor.textarea;\n            var specifiedDomain = editor.options.domain;\n            var domain = specifiedDomain || document.domain;\n            var domainScript = \"\";\n            var src = 'javascript:\"\"';\n            var lang = \"\";\n\n            textarea.hide();\n\n            iframe = $(\"<iframe />\", { title: editor.options.messages.editAreaTitle, frameBorder: \"0\" })[0];\n\n            $(iframe)\n                .css(\"display\", \"\")\n                .addClass(\"k-content k-iframe\")\n                .attr(\"tabindex\", textarea[0].tabIndex)\n                .insertBefore(textarea);\n\n            // automatically relax same-origin policy if document.domain != location.hostname,\n            // or forcefully relax if options.domain is specified (for document.domain = document.domain scenario)\n            if (specifiedDomain || domain != location.hostname) {\n                // relax same-origin policy\n                domainScript = `<script ${editor.options.nonce ? `nonce=\"${editor.options.nonce}\"` : \"\" }>document.domain=\"${domain}\"</script>`;\n                src = \"javascript:document.write('\" + domainScript + \"')\";\n                iframe.src = src;\n            }\n\n            if (!iframe.src) {\n                iframe.src = \"\";\n            }\n\n            wnd = iframe.contentWindow || iframe;\n            doc = wnd.document || iframe.contentDocument;\n\n            $(iframe).one(\"load\", function() {\n                editor._decorateFormatting(doc.body);\n            });\n\n            lang = document.getElementsByTagName(\"html\")[0].getAttribute(\"lang\") || DEFAULT_LANGUAGE;\n\n            doc.open();\n            doc.write(\n                \"<!DOCTYPE html><html lang='\" + lang + \"'><head>\" +\n                \"<meta charset='utf-8' />\" +\n                \"<title>Kendo UI Editor content</title>\" +\n                `<style ${editor.options.nonce ? `nonce=\"${editor.options.nonce}\"` : \"\" }>` +\n                    \"html{padding:0;margin:0;height:100%;min-height:100%;cursor:text;}\" +\n                    \"body{padding:0;margin:0;}\" +\n                    \"body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;\" +\n                    \"word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;\" +\n                    (kendo.support.isRtl(textarea) ? \"direction:rtl;\" : \"\") +\n                    (os.ios ? \"word-break:keep-all;\" : \"\") +\n                    (browser.edge || browser.chrome ? \"height:100%;\" : \"\") +\n                    \"}\" +\n                    \"h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}\" +\n                    \"p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}\" +\n                    \"ul,ol{padding-left:2.5em}\" +\n                    \"span{-ms-high-contrast-adjust:none;}\" +\n                    \"a{color:#00a}\" +\n                    \"code{font-size:1.23em}\" +\n                    \"telerik\\\\3Ascript{display: none;}\" +\n                    \".k-table{width:100%;border-spacing:0;margin: 0 0 1em;}\" +\n                    \".k-table td{min-width:1px;padding:.2em .3em;}\" +\n                    \".k-table,.k-table td{outline:0;border: 1px dotted #ccc;}\" +\n                    \".k-table th{outline:0;border: 1px dotted #999;}\" +\n                    \".k-table p{margin:0;padding:0;}\" +\n                    \".k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}\" +\n                    \".k-column-resize-handle {width: 100%; height: 100%;}\" +\n                    \".k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}\" +\n                    \".k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}\" +\n                    \".k-row-resize-handle {display: table; width: 100%; height: 100%;}\" +\n                    \".k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}\" +\n                    \".k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}\" +\n                    \".k-element-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}\" +\n                    \".k-element-resize-handle {width: 100%; height: 100%;}\" +\n                    \".k-element-resize-handle.k-resize-east{cursor:e-resize;}\" +\n                    \".k-element-resize-handle.k-resize-north{cursor:n-resize;}\" +\n                    \".k-element-resize-handle.k-resize-northeast{cursor:ne-resize;}\" +\n                    \".k-element-resize-handle.k-resize-northwest{cursor:nw-resize;}\" +\n                    \".k-element-resize-handle.k-resize-south{cursor:s-resize;}\" +\n                    \".k-element-resize-handle.k-resize-southeast{cursor:se-resize;}\" +\n                    \".k-element-resize-handle.k-resize-southwest{cursor:sw-resize;}\" +\n                    \".k-element-resize-handle.k-resize-west{cursor:w-resize;}\" +\n                    \".k-table.k-element-resizing{opacity:0.6;}\" +\n                    \".k-placeholder{color:grey}\" +\n                    \"k\\\\:script{display:none;}\" +\n                \"</style>\" +\n                domainScript +\n                $.map(stylesheets, function(href) {\n                    return `<link rel='stylesheet' href='${href}' ${editor.options.nonce ? `nonce=\"${editor.options.nonce}\"` : \"\" }>`;\n                }).join(\"\") +\n                \"</head><body autocorrect='off' contenteditable='true'></body></html>\"\n            );\n            doc.close();\n\n            return wnd;\n        },\n\n        _deleteSavedRange: function() {\n            if (\"_range\" in this) {\n                delete this._range;\n            }\n        },\n\n        _decorateFormatting: function(body) {\n            var formattingElement = this.toolbar.element.find(\"input[data-command=formatting]\"),\n                dom = kendo.ui.editor.Dom,\n                component, dataSource, items, i, tag, className, style;\n\n            if (formattingElement.length) {\n                component = formattingElement.getKendoDropDownList();\n                if (!component) {\n                    return;\n                }\n                dataSource = component.dataSource;\n                items = dataSource.data();\n\n                if (body) {\n                    component.list.css(\"background-color\", dom.getEffectiveBackground($(body)));\n                }\n\n                if (this.options.unsafeInline !== false) {\n\n                    for (i = 0; i < items.length; i++) {\n                        tag = items[i].tag || \"span\";\n                        className = items[i].className;\n\n                        style = dom.inlineStyle(body, tag, { className: className });\n                        style = style.replace(/\"/g, \"'\");\n\n                        items[i].style = style + \";display:inline-block\";\n                    }\n                }\n\n                dataSource.trigger(\"change\");\n            }\n        },\n\n        _deregisterHandlers: function() {\n            var handlers = this._handlers;\n\n            for (var i = 0; i < handlers.length; i++) {\n                var h = handlers[i];\n                h.element.off(h.type, h.handler);\n            }\n\n            this._handlers = [];\n        },\n\n        _destroyUploadWidget: function() {\n            var editor = this;\n            if (editor._uploadWidget) {\n                editor._uploadWidget.destroy();\n                editor._uploadWidget = null;\n            }\n        },\n\n        _endTyping: function() {\n            var keyboard = this.keyboard;\n\n            try {\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping(true);\n                    this.saveSelection();\n                }\n            } catch (e) { }\n        },\n\n        _focusBody: function() {\n            var body = this.body;\n            var iframe = this.wrapper && this.wrapper.find(\"iframe\")[0];\n            var documentElement = this.document.documentElement;\n            var activeElement = kendo._activeElement();\n            var scrollTop;\n\n\n            if (!iframe && body.scrollHeight > body.clientHeight) {\n                scrollTop = body.scrollTop;\n                body.focus();\n                body.scrollTop = scrollTop;\n\n            } else if (activeElement != body && activeElement != iframe) {\n                scrollTop = documentElement.scrollTop;\n                body.focus();\n                documentElement.scrollTop = scrollTop;\n            }\n        },\n\n        _focusOutside: function() {\n            // move focus outside the Editor, see https://github.com/telerik/kendo/issues/3673\n            if (kendo.support.browser.msie && this.textarea) {\n                var tempInput = $(\"<input />\")\n                    .css({\n                        position: \"fixed\",\n                        left: \"1px\",\n                        top: \"1px\",\n                        width: \"1px\",\n                        height: \"1px\",\n                        \"font-size\": \"0\",\n                        border: \"0\",\n                        opacity: \"0\"\n                })\n                .appendTo(document.body).trigger(\"focus\");\n                tempInput.trigger(\"blur\").remove();\n            }\n        },\n\n        _handleToolbarClick: function(e) {\n            var toolName = e.target.data(\"command\");\n\n            if (toolName && toolName !== \"createTable\") {\n                this.exec(toolName);\n            }\n        },\n\n        _immutablesContext: function(range) {\n            var editorNS = kendo.ui.editor;\n\n            if (this.options.immutables) {\n                if (range.collapsed) {\n                    return editorNS.Immutables.immutablesContext(range);\n                } else {\n                    return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                }\n            }\n        },\n\n        _initializeContentElement: function() {\n            var editor = this;\n            var doc;\n            var blurTrigger;\n            var mousedownTrigger;\n\n            if (editor.textarea) {\n                editor.window = editor._createContentElement(editor.options.stylesheets);\n                doc = editor.document = editor.window.contentDocument || editor.window.document;\n\n                // Ensure that body exists as various Firefox plugins can cause a delay of the body creation\n                // https://github.com/telerik/kendo-ui-core/issues/3515\n                if (!doc.body) {\n                    var body = doc.createElement(\"body\");\n                    body.setAttribute(\"contenteditable\", \"true\");\n                    body.setAttribute(\"autocorrect\", \"off\");\n                    doc.getElementsByTagName(\"html\")[0].appendChild(body);\n\n                    var interval = setInterval(function() {\n                        if ($(editor.document).find(\"body\").length > 1) {\n                            $(editor.document).find(\"body\").last().remove();\n                            window.clearInterval(interval);\n                        }\n                    },10);\n                }\n\n                editor.body = doc.body;\n\n                blurTrigger = editor.window;\n                mousedownTrigger = doc;\n\n                this._registerHandler(doc, \"mouseup\", this._mouseup.bind(this));\n            } else {\n                editor.window = window;\n                doc = editor.document = document;\n                editor.body = editor.element[0];\n\n                blurTrigger = editor.body;\n                mousedownTrigger = editor.body;\n\n                setTimeout(() => {\n                    editor._decorateFormatting(editor.body);\n                });\n            }\n\n            this._registerHandler(blurTrigger, \"blur\", this._blur.bind(this));\n            editor._registerHandler(mousedownTrigger, \"down\", editor._mousedown.bind(editor));\n\n            try {\n                doc.execCommand(\"enableInlineTableEditing\", null, false);\n            } catch (e) { }\n\n            if (kendo.support.touch) {\n                this._registerHandler(doc, {\n                    \"keydown\": function() {\n                        // necessary in iOS when touch events are bound to the page\n                        if (kendo._activeElement() != doc.body) {\n                            editor.window.focus();\n                        }\n                    }\n                });\n            }\n\n            this._initializePlaceholder();\n\n            this._spellCorrect(editor);\n\n            this._registerHandler(editor.document, {\n                \"mouseover dragenter\": function(e) {\n                    var height = $(editor.body).height();\n                    var htmlHeight = $(editor.body.parentElement).height();\n\n                    if (htmlHeight > height && e.target.nodeName.toLowerCase() === \"html\") {\n                        editor._cachedHeight = \"\" + editor.body.style.height;\n                        editor.body.style.height = \"100%\";\n                    }\n                },\n                \"mouseout dragleave drop contextmenu\": function(e) {\n                    var restoreHeight = function() {\n                        if (editor._cachedHeight !== undefined$1 && e.target === editor.body) {\n                            editor.body.style.height = editor._cachedHeight;\n                            delete editor._cachedHeight;\n                        }\n                    };\n\n                    if (e.type === \"contextmenu\") {\n                        setTimeout(function() {\n                            restoreHeight();\n                        }, 10);\n                    } else {\n                        restoreHeight();\n                    }\n\n                }\n            });\n\n            this._registerHandler(editor.body, {\n                \"keydown\": function(e) {\n                    var range;\n\n                    if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute(\"contenteditable\") !== \"true\") {\n                        return false;\n                    }\n\n                    if (e.keyCode === keys.F10) {\n                        editor.toolbar.element.find(\"[tabindex=0]\").first().trigger(\"focus\");\n                        editor.toolbar.preventPopupHide = true;\n                        e.preventDefault();\n                        return;\n                    } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                        // skip bom nodes when navigating with arrows\n                        range = editor.getRange();\n                        var left = e.keyCode == keys.LEFT;\n                        var container = range[left ? \"startContainer\" : \"endContainer\"];\n                        var offset = range[left ? \"startOffset\" : \"endOffset\"];\n                        var direction = left ? -1 : 1;\n\n                        var next = offset + direction;\n                        var nextChar = left ? next : offset;\n\n                        if (container.nodeType == 3 && container.nodeValue[nextChar] == \"\\ufeff\") {\n                            range.setStart(container, next);\n                            range.collapse(true);\n                            editor.selectRange(range);\n                        }\n                    }\n\n                    var tools = editor.tools;\n                    var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                    var toolOptions = toolName ? tools[toolName].options : {};\n\n                    if (toolName && !toolOptions.keyPressCommand) {\n                        e.preventDefault();\n\n                        if (!/^(undo|redo)$/.test(toolName)) {\n                            editor.keyboard.endTyping(true);\n                        }\n\n                        editor.trigger(\"keydown\", e);\n                        editor.exec(toolName);\n                        editor._runPostContentKeyCommands(e);\n\n                        return false;\n                    }\n\n                    editor.keyboard.clearTimeout();\n\n                    editor.keyboard.keydown(e);\n                },\n                \"keypress\": function(e) {\n                    setTimeout(function() {\n                        editor._runPostContentKeyCommands(e);\n                        editor._showElementResizeHandles();\n                    }, 0);\n                },\n                \"keyup\": function(e) {\n                    var selectionCodes = [\n                       keys.BACKSPACE,\n                       keys.TAB,\n                       keys.PAGEUP,\n                       keys.PAGEDOWN,\n                       keys.END,\n                       keys.HOME,\n                       keys.LEFT,\n                       keys.UP,\n                       keys.RIGHT,\n                       keys.DOWN,\n                       keys.INSERT,\n                       keys.DELETE\n                    ];\n\n                    if ($.inArray(e.keyCode, selectionCodes) > -1 || (e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey)) {\n                        window.clearTimeout(this._refreshInterval);\n                        this._refreshInterval = window.setTimeout(function() {\n                            editor._selectionChange();\n                        }, REFRESH_INTERVAL);\n                    }\n\n                    editor.keyboard.keyup(e);\n                },\n                \"click\": function(e) {\n                    var dom = kendo.ui.editor.Dom, range;\n\n                    if (dom.name(e.target) === \"img\") {\n                        range = editor.createRange();\n                        range.selectNode(e.target);\n                        editor.selectRange(range);\n                    }\n                },\n                \"cut copy paste drop dragover\": function(e) {\n                    editor.clipboard[\"on\" + e.type](e);\n                },\n                \"focusin\": function() {\n                    if (editor.body.hasAttribute(\"contenteditable\")) {\n                        $(this).addClass(\"k-active\");\n                        // To be moved to the Editor\n                        editor._showWindow();\n                        editor._togglePlaceholder(false);\n                    }\n                },\n                \"focusout\": function() {\n                    setTimeout(function() {\n                        var active = kendo._activeElement();\n                        var body = editor.body;\n                        // All below to be moved to the Editor\n                        var toolbar = editor.toolbar;\n\n                        if (toolbar.options.popup) {\n                            var toolbarContainerElement = editor.windowInstance.element.get(0);\n                            if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                toolbar.preventPopupHide = false;\n                            }\n                        }\n\n                        if (active != body && !$.contains(body, active) && !editor._toolbarFocused() && !toolbar.preventPopupHide && !$(active).hasClass(\"k-context-menu\")) {\n                            $(body).removeClass(\"k-active\");\n                            editor._hideWindow();\n                        }\n\n                        editor._togglePlaceholder(!editor.value().trim());\n                    }, 10);\n                }\n            });\n\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        },\n\n        _initializeImmutables: function() {\n            var that = this,\n                editorNS = kendo.ui.editor;\n\n            if (that.options.immutables) {\n                that.immutables = new editorNS.Immutables(that);\n            }\n        },\n\n        _initializePlaceholder: function() {\n            var that = this,\n                placeholder = that.options.placeholder,\n                style, $head;\n\n            if (!that.textarea || !placeholder) {\n                return;\n            }\n\n            style = `<style id='${PLACEHOLDER_TAG_ID}' ${that.options.nonce ? `nonce=\"${that.options.nonce}\"` : \"\" } >.` +\n                        PLACEHOLDER_CLASS + \":before { content: '\" + placeholder + \"'; }\" +\n                    \"</style>\";\n\n            $head = $(that.document.head);\n            $head.find(\"#\" + PLACEHOLDER_TAG_ID).remove();\n            $head.append(style);\n\n            that._togglePlaceholder(!that.value().trim());\n        },\n\n        _initToolbar: function(toolbarContainer) {\n            var that = this,\n                tools, defaults, toolbarOptions;\n\n            that.tools = [];\n            [tools, defaults] = that._processToolbarItems(that.options.tools);\n            that._setNativeTools();\n\n            toolbarOptions = {\n                tools: tools,\n                defaultTools: defaults,\n                parentMessages: that.options.messages,\n                resizable: that.options.resizable && that.options.resizable.toolbar,\n                toggle: that._handleToolbarClick.bind(this),\n                click: that._handleToolbarClick.bind(this),\n                navigateOnTab: that.options.navigateOnTab,\n                evaluateTemplates: true\n            };\n\n            that.toolbar = new kendo.ui.ToolBar(toolbarContainer, toolbarOptions);\n\n            that._bindTools();\n            that.bind(\"select\", that._refreshTools.bind(that));\n\n            toolbarContainer.on(\"mousedown\" + NS, \".k-toolbar-tool\", function(e) {\n                if (!$(e.target).is(\"input\")) {\n                    e.preventDefault();\n                }\n            });\n\n            if (!that.textarea) {\n                that._initToolbarWindow(toolbarContainer);\n            }\n        },\n\n        _initToolbarWindow: function(toolbarEl) {\n            var that = this;\n\n            this.windowInstance = toolbarEl\n                .wrap(\"<div class='editorToolbarWindow k-editor-window' />\")\n                .parent()\n                .prepend(\"<span class='k-editortoolbar-dragHandle'>\" + kendo.ui.icon(\"handle-drag\") + \"</span>\")\n                .kendoWindow({\n                    title: false,\n                    resizable: false,\n                    draggable: {\n                        dragHandle: \".k-editortoolbar-dragHandle\"\n                    },\n                    animation: {\n                        open: { effects: \"fade:in\" },\n                        close: { effects: \"fade:out\" }\n                    },\n                    minHeight: 42,\n                    visible: false,\n                    autoFocus: false,\n                    actions: [],\n                    dragend: function() {\n                        this._moved = true;\n                    }\n                })\n                .on(\"mousedown\", function(e) {\n                    if (!$(e.target).is(\".k-icon,.k-svg-icon,svg\")) {\n                        that.toolbar.preventPopupHide = true;\n                    }\n                })\n                .on(\"focusout\", function() {\n                    that.element.focusout();\n                })\n                .data(\"kendoWindow\");\n        },\n\n        _mousedown: function(e) {\n            var editor = this;\n            editor._selectionStarted = true;\n\n            if ($(editor.body).parents('.k-window').length) {\n                e.stopPropagation();\n            }\n\n            // handle middle-click and ctrl-click on links\n            if (browser.gecko) {\n                return;\n            }\n\n            var target = $(e.target).closest(\"a[href]\");\n\n            if ((e.which == 2 || (e.which == 1 && e.ctrlKey)) && target && target.is(\"a[href]\")) {\n                window.open(target.attr(\"href\"), \"_new\");\n            }\n\n            if (e.target.tagName && e.target.tagName.toLowerCase() === \"html\") {\n                setTimeout(function() {\n                    editor.body.focus();\n                }, 0);\n            }\n        },\n\n        _mouseup: function(e) {\n            var that = this;\n\n            if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                return;\n            }\n\n            if (that._selectionStarted) {\n                setTimeout(function() {\n                    that._selectionChange();\n                }, 1);\n            }\n        },\n\n        _populateValue: function(options, domElement) {\n            var that = this,\n                editorNS = kendo.ui.editor,\n                dom = editorNS.Dom,\n                value, comments;\n\n            if (options && options.value) {\n                value = options.value;\n            } else if (that.textarea) {\n                // indented HTML introduces problematic ranges in IE\n                value = domElement.value;\n\n                if (!value.replace(/\\s/g, '').length) {\n                    value = value.replace(/\\s/g, '');\n                }\n\n                // revert encoding of value when content is fetched from cache\n                if (that.options.encoded && domElement.defaultValue && domElement.defaultValue.trim().length) {\n                    value = domElement.defaultValue;\n                }\n\n                var deserializedRoot = editorNS.Serializer.htmlToDom(value, $(\"<div></div>\")[0], that.options.deserialization);\n                comments = dom.getAllComments(deserializedRoot);\n                value = EditorUtils.cacheComments(value, comments);\n                value = value.replace(/[\\r\\n\\v\\f\\t ]+/ig, \" \");\n                value = EditorUtils.retrieveComments(value, comments);\n            } else {\n                value = domElement.innerHTML;\n            }\n\n            that.value(value || '\\ufeff');\n        },\n\n        _resetGroups: function(current) {\n            var result = {};\n\n            Object.keys(current).map(key => {\n                result[key + \"_\"] = current[key];\n            });\n\n            return result;\n        },\n\n        _processToolbarItems: function(optionsTools) {\n            var flatDefaultTools = {},\n                processedObject = {},\n                tools = [],\n                currentGroups = $.extend(true, {}, toolGroups),\n                i, j, t, name, guidGroupName;\n\n            for (i = 0; i < optionsTools.length; i++) {\n                t = optionsTools[i];\n\n                if (Array.isArray(t)) {\n                    guidGroupName = kendo.guid();\n\n                    for (j = 0; j < t.length; j++) {\n                        [flatDefaultTools, name] = this._processToolOptions(t[j], flatDefaultTools);\n\n                        if (!name) {\n                            continue;\n                        }\n\n                        flatDefaultTools[name].gr = guidGroupName;\n                    }\n                } else {\n                    [flatDefaultTools, name] = this._processToolOptions(t, flatDefaultTools);\n\n                    if (!name) {\n                        continue;\n                    } else if (name === \"separator\") {\n                        currentGroups = this._resetGroups(currentGroups);\n                    }\n\n                    Object.keys(currentGroups).map(key => {\n                        var group = currentGroups[key];\n\n                        if (group.includes(name)) {\n                            flatDefaultTools[name].gr = key;\n                        }\n                    });\n                }\n            }\n\n            Object.values(flatDefaultTools).map((tool) => {\n                var group = tool.gr;\n\n                delete tool.gr;\n\n                if (group === undefined$1) {\n                    processedObject[tool.name] = tool;\n                } else {\n                    if (!processedObject[group]) {\n                        processedObject[group] = [];\n                    }\n\n                    processedObject[group].push(tool);\n                }\n            });\n\n            tools = Object.values(processedObject).map((g) => {\n                var result;\n\n                if (g.length) {\n                    result = g.map((to) => to.name);\n                } else {\n                    result = g.name;\n                }\n\n                if (result.length === 1) {\n                    result = result[0];\n                }\n\n                return result;\n            });\n\n            return [tools, flatDefaultTools];\n        },\n\n        _processDefaultTool: function(tool, defaultTools) {\n            var name = tool.name,\n                result = {},\n                options;\n\n            if ($.isPlainObject(tool)) {\n                if (name && defaultTools[name]) {\n                    // configured tool\n                    result = extend({}, defaultTools[name]);\n                    extend(result.options, tool);\n                } else {\n                    // custom tool\n                    options = extend({ icon: \"gear\", type: \"button\" }, tool);\n\n                    if (!options.name) {\n                        options.name = \"custom\";\n                    }\n\n                    options.cssClass = \"k-\" + options.name;\n\n                    result = {\n                        options: options\n                    };\n\n                    name = options.name;\n                }\n            } else if (defaultTools[tool]) {\n                name = tool;\n                result = defaultTools[name];\n            } else {\n                return null;\n            }\n\n            this.tools[name] = result;\n\n            return result;\n        },\n\n        _processToolOptions: function(t, flatDefaultTools) {\n            var that = this,\n                defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools),\n                tool, name, view, shortcuts, options, uiOptions, icon, toolOptions, originalOptions, palette;\n\n            tool = this._processDefaultTool(t, defaultTools);\n\n            if (!tool) {\n                return [flatDefaultTools, null];\n            }\n\n            options = tool.options;\n            name = options.name;\n            uiOptions = options.ui || {};\n            icon = EditorUtils.getToolCssClass(options.name, options.icon);\n\n            // We want to preserve any custom properties from the original tool object.\n            originalOptions = $.isPlainObject(t) ? $.extend({}, t) : {};\n            delete originalOptions.items;\n\n            toolOptions = $.extend({\n                name: options.name,\n                command: options.command,\n                template: options.template,\n                type: \"button\",\n                icon: icon,\n                showText: \"overflow\",\n                showIcon: \"both\"\n            }, uiOptions, originalOptions);\n\n            if (options.tooltip) {\n                if (!toolOptions.attributes) {\n                    toolOptions.attributes = {};\n                }\n\n                toolOptions.attributes.title = options.tooltip;\n            }\n            if (options.exec) {\n                toolOptions.click = options.exec.bind(that);\n                delete toolOptions.exec;\n            }\n\n            if (toolOptions.component === \"ColorPicker\") {\n                if (options.palette !== undefined$1 || uiOptions.palette !== kendo.ui.editor.ColorTool.fn.options.palette) {\n                    palette = options.palette || kendo.ui.editor.ColorTool.fn.options.palette;\n                    view = options.palette !== undefined$1 && !options.palette ? \"gradient\" : \"palette\";\n                    toolOptions.componentOptions.palette = view === \"palette\" ? palette : undefined$1;\n                    toolOptions.componentOptions.views = [view];\n                    toolOptions.componentOptions.preview = view === \"gradient\";\n                    toolOptions.componentOptions.input = view === \"gradient\";\n                    toolOptions.componentOptions.buttons = view === \"gradient\";\n\n                    if (view === \"gradient\") {\n                        delete toolOptions.componentOptions.columns;\n                    }\n                }\n                if (view === \"palette\" && options.columns) {\n                    toolOptions.componentOptions.columns = options.columns;\n                }\n            }\n\n            if (toolOptions.component === \"DropDownList\" || toolOptions.component === \"ComboBox\") {\n                if (!toolOptions.componentOptions) {\n                    toolOptions.componentOptions = {};\n                }\n\n                if (!toolOptions.componentOptions.dataSource) {\n                    if (that.options[name] && Array.isArray(that.options[name])) {\n                        toolOptions.componentOptions.dataSource = that.options[name];\n                    } else {\n                        toolOptions.componentOptions.dataSource = options.items;\n                    }\n                }\n            }\n            if (toolOptions.template) {\n                delete toolOptions.type;\n            }\n\n            shortcuts = this._shortcutSequence(name);\n\n            if (shortcuts !== \"\") {\n                if (!toolOptions.attributes) {\n                    toolOptions.attributes = {};\n                }\n\n                toolOptions.attributes[\"aria-keyshortcuts\"] = shortcuts;\n            }\n\n            flatDefaultTools[name] = toolOptions;\n\n            return [flatDefaultTools, name];\n        },\n\n        _refreshTools: function() {\n            var that = this,\n                range = that.getRange(),\n                editorNS = kendo.ui.editor,\n                rangeUtils = editorNS.RangeUtils,\n                nodes = rangeUtils.textNodes(range),\n                immutables = that.options.immutables,\n                immutablesContext = that._immutablesContext(range),\n                defaultTools = that.tools;\n\n            nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n\n            if (!nodes.length) {\n                nodes = [range.startContainer];\n            }\n\n            that.toolbar.element.find(\"[data-command]\")\n                .filter((i, el) => $(el).find(\"[data-command]\").length === 0)\n                .each(function() {\n                    var toolName = this.getAttribute(\"data-command\"),\n                        tool = defaultTools[toolName],\n                        ui;\n\n                    if (tool) {\n                        ui = $(this);\n\n                        if (tool.update) {\n                            tool.update(ui, nodes, that.undoRedoStack);\n                        }\n\n                        if (immutables) {\n                            that._updateImmutablesState(tool, ui, immutablesContext);\n                        }\n                    }\n                });\n        },\n\n        _registerHandler: function(element, type, handler) {\n            var editor = this;\n            var NS = \".kendoEditor\";\n            var eventNames;\n            var i;\n\n            element = $(element);\n\n            if (!this._handlers) {\n                this._handlers = [];\n            }\n\n            if (element.length) {\n                if ($.isPlainObject(type)) {\n                    for (var t in type) {\n                        if (type.hasOwnProperty(t)) {\n                            this._registerHandler(element, t, type[t]);\n                        }\n                    }\n                } else {\n                    //map the original event to handle interaction on mobile platforms\n                    eventNames = kendo.applyEventMap(type).split(\" \");\n\n                    for (i = 0; i < eventNames.length; i++) {\n                        editor._handlers.push({\n                            element: element,\n                            type: eventNames[i] + NS,\n                            handler: handler\n                        });\n\n                        element.on(eventNames[i] + NS, handler);\n                    }\n                }\n            }\n        },\n\n        _runPostContentKeyCommands: function(e) {\n            var range = this.getRange();\n            var tools = this.keyboard.toolsFromShortcut(this.tools, e);\n\n            for (var i = 0; i < tools.length; i++) {\n                var tool = tools[i];\n                var o = tool.options;\n                if (!o.keyPressCommand) {\n                    continue;\n                }\n\n                var cmd = new o.command({ range: range });\n                if (cmd.changesContent()) {\n                    this.keyboard.endTyping(true);\n                    this.exec(tool.name);\n                }\n            }\n        },\n\n        _selectionChange: function() {\n            this._selectionStarted = false;\n            this.saveSelection();\n            this.trigger(\"select\", {});\n        },\n\n        _setOptionsTools: function(optionsTools) {\n            var that = this,\n                toolbar = that.toolbar,\n                toolbarContainer = toolbar.element,\n                tools, defaults, toolbarOptions;\n\n            toolbar.destroy();\n            toolbarContainer.empty();\n\n            that.tools = [];\n            [tools, defaults] = that._processToolbarItems(optionsTools);\n            that._setNativeTools();\n\n            toolbarOptions = {\n                tools: tools,\n                defaultTools: defaults,\n                parentMessages: that.options.messages,\n                resizable: that.options.resizable && that.options.resizable.toolbar,\n                toggle: that._handleToolbarClick.bind(this),\n                click: that._handleToolbarClick.bind(this)\n            };\n\n            that.toolbar = new kendo.ui.ToolBar(toolbarContainer, toolbarOptions);\n\n            that._bindTools();\n        },\n\n        _setNativeTools: function() {\n            var defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools),\n                i;\n\n            for (i = 0; i < NATIVE_TOOLS.length; i++) {\n                if (!this.tools[NATIVE_TOOLS[i]]) {\n                    this.tools[NATIVE_TOOLS[i]] = defaultTools[NATIVE_TOOLS[i]];\n                }\n            }\n        },\n\n        _setupHeight: function(type) {\n            var that = this;\n\n            if (type == \"textarea\") {\n                setTimeout(function() {\n                    var heightStyle = that.wrapper[0].style.height;\n                    var expectedHeight = parseInt(heightStyle, 10);\n                    var actualHeight = that.wrapper.height();\n                    if (heightStyle.indexOf(\"px\") > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                        that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                    }\n                });\n            }\n        },\n\n        _setupKeyboard: function() {\n            var that = this,\n                editorNS = kendo.ui.editor;\n\n            that.keyboard = new editorNS.Keyboard([\n                new editorNS.BackspaceHandler(that),\n                new editorNS.TypingHandler(that),\n                new editorNS.SystemHandler(that),\n                new editorNS.SelectAllHandler(that)\n            ]);\n        },\n\n        _setupType: function(element) {\n            var domElement = element[0],\n                type = kendo.ui.editor.Dom.name(domElement),\n                id = domElement.id,\n                toolbarContainer;\n\n            if (type == \"textarea\") {\n                this._wrapTextarea();\n\n                toolbarContainer = this.wrapper.find(\".k-editor-toolbar\");\n\n                if (!id) {\n                    id = kendo.guid();\n                    domElement.setAttribute(\"id\", id);\n                }\n\n                toolbarContainer.attr(\"aria-controls\", id);\n            } else {\n                this.element.attr(\"contenteditable\", true).addClass(\"k-widget k-editor k-editor-inline\");\n                toolbarContainer = $('<div class=\"k-editor-toolbar\"/>').insertBefore(element);\n            }\n\n            return toolbarContainer;\n        },\n\n        _shortcutSequence: function(name) {\n            var tool = kendo.ui.Editor.defaultTools[name],\n                res = \"\",\n                options;\n\n            if (!tool || !tool.options) {\n                return res;\n            }\n\n            options = tool.options;\n\n            if (options.ctrl) {\n                res += \"Ctrl+\";\n            }\n\n            if (options.shift) {\n                res += \"Shift+\";\n            }\n\n            if (options.alt) {\n                res += \"Alt+\";\n            }\n\n            if (options.key) {\n                res += options.key;\n            }\n\n            return res;\n        },\n\n        _spellCorrect: function(editor) {\n            var beforeCorrection;\n            var falseTrigger = false;\n\n            this._registerHandler(editor.body, {\n                \"contextmenu\": function() {\n                    editor.one(\"select\", function() {\n                        beforeCorrection = null;\n                    });\n\n                    editor._spellCorrectTimeout = setTimeout(function() {\n                        beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                        falseTrigger = false;\n                    }, 10);\n                },\n                \"input\": function() {\n                    if (!beforeCorrection) {\n                        return;\n                    }\n\n                    if (kendo.support.browser.mozilla && !falseTrigger) {\n                        falseTrigger = true;\n                        return;\n                    }\n\n                    kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                }\n            });\n        },\n\n        _togglePlaceholder: function(show) {\n            var that = this,\n                body = that.body,\n                $body = $(body),\n                placeholder = that.options.placeholder;\n\n            if (!that.textarea || !placeholder) {\n                return;\n            }\n\n            $body.attr('aria-label', function() {\n                return show ? placeholder : \"\";\n            });\n\n            $body.toggleClass(PLACEHOLDER_CLASS, show);\n        },\n\n        _toolbarFocused: function() {\n            var active = kendo._activeElement(),\n                popup = this.windowInstance,\n                overflowPopup = this.overflowPopup;\n\n            return (popup && $(active).closest(popup.wrapper).length) ||\n                (overflowPopup && overflowPopup.visible());\n        },\n\n        _updateImmutablesState: function(tool, ui, immutablesContext) {\n            var toolbar = this.toolbar,\n                name = tool.name,\n                uiElement = ui.closest(\".k-toolbar-tool\"),\n                trackImmutables = tool.options.trackImmutables,\n                editorNS = kendo.ui.editor;\n\n            if (trackImmutables === undefined$1) {\n                trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n            }\n\n            if (trackImmutables) {\n                if (immutablesContext) {\n                    toolbar.hide(uiElement);\n                } else {\n                    toolbar.show(uiElement);\n                }\n            }\n        },\n\n        _wrapTextarea: function() {\n            var that = this,\n                textarea = that.element,\n                w = textarea[0].style.width,\n                h = textarea[0].style.height,\n                template = EditorUtils.editorWrapperTemplate(),\n                editorWrap = $(template).insertBefore(textarea),\n                editArea = editorWrap.find(\".k-editable-area\");\n\n            editorWrap.css({\n                \"width\": w,\n                \"height\": h\n            });\n\n            textarea.attr(\"autocomplete\", \"off\")\n                .appendTo(editArea).addClass(\"k-content k-raw-content\").css(\"display\", \"none\");\n\n            that.textarea = textarea;\n            that.wrapper = editorWrap;\n        },\n\n        // Resizing methods\n        _resizable: function() {\n            var resizable = this.options.resizable;\n            var isResizable = $.isPlainObject(resizable) ? (resizable.content === undefined$1 || resizable.content === true) : resizable;\n\n            if (isResizable && this.textarea) {\n                var draggableElement = $(\"<div class='k-resize-handle'>\" + kendo.ui.icon(\"caret-br\") + \"</div>\")\n                    .insertAfter(this.textarea);\n\n                this.wrapper.addClass('k-resizable');\n\n                this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                    draggableElement: draggableElement,\n                    start: function(e) {\n                        var editor = this.editor = $(e.currentTarget).closest(\".k-editor\");\n                        this.initialSize = editor.height();\n                        editor.find(\".k-editable-area\").last().append(\"<div class='k-overlay' />\");\n                    },\n                    resize: function(e) {\n                        var delta = e.y.initialDelta;\n                        var newSize = this.initialSize + delta;\n                        var min = this.options.min || 0;\n                        var max = this.options.max || Infinity;\n\n                        newSize = Math.min(max, Math.max(min, newSize));\n\n                        this.editor.height(newSize);\n                    },\n                    resizeend: function() {\n                        this.editor.find(\".k-overlay\").remove();\n                        this.editor = null;\n                    }\n                }));\n\n                if (kendo.support.mobileOS.ios) {\n                    var resizableWidget = this.wrapper.getKendoResizable();\n                    resizableWidget.draggable.options.ignore = SELECT_OVERLAY_SELECTOR;\n                }\n            }\n        },\n\n        _destroyResizings: function() {\n            var editor = this;\n\n            editor._destroyElementResizing();\n            kendo.ui.editor.ElementResizingFactory.current.dispose(editor);\n            editor._destroyRowResizing();\n            kendo.ui.editor.RowResizing.dispose(editor);\n            editor._destroyColumnResizing();\n            kendo.ui.editor.ColumnResizing.dispose(editor);\n        },\n\n        _initializeElementResizing: function() {\n            var editor = this;\n\n            kendo.ui.editor.ElementResizingFactory.current.create(editor);\n\n            editor._showElementResizeHandlesProxy = editor._showElementResizeHandles.bind(editor);\n            editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n        },\n\n        _destroyElementResizing: function() {\n            var editor = this;\n            var elementResizing = editor.elementResizing;\n\n            if (elementResizing) {\n                elementResizing.destroy();\n                editor.elementResizing = null;\n            }\n\n            if (editor._showElementResizeHandlesProxy) {\n                editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n            }\n        },\n\n        _showElementResizeHandles: function() {\n            var editor = this;\n            var elementResizing = editor.elementResizing;\n\n            if (elementResizing && elementResizing.element && elementResizing.element.parentNode) {\n                elementResizing.showResizeHandles();\n            } else if (elementResizing && (!elementResizing.element || !elementResizing.element.parentNode)) {\n                editor._destroyElementResizing();\n            }\n        },\n\n        _initializeColumnResizing: function() {\n            kendo.ui.editor.ColumnResizing.create(this);\n        },\n\n        _destroyColumnResizing: function() {\n            var editor = this;\n\n            if (editor.columnResizing) {\n                editor.columnResizing.destroy();\n                editor.columnResizing = null;\n            }\n        },\n\n        _initializeRowResizing: function() {\n            kendo.ui.editor.RowResizing.create(this);\n        },\n\n        _destroyRowResizing: function() {\n            var editor = this;\n\n            if (editor.rowResizing) {\n                editor.rowResizing.destroy();\n                editor.rowResizing = null;\n            }\n        },\n\n        // ToolBar Window methods\n        _getWindowWidth: function() {\n            var that = this,\n                wrapper = that.windowInstance.wrapper,\n                editorElement = that.element;\n\n            return outerWidth(editorElement) - parseInt(wrapper.css(\"border-left-width\"), 10) - parseInt(wrapper.css(\"border-right-width\"), 10);\n        },\n\n        _hideWindow: function() {\n            if (this.windowInstance) {\n                this.windowInstance.close();\n            }\n        },\n\n        _overlapsWindow: function(box) {\n            var toolbarWrapper = this.windowInstance.wrapper,\n                toolbarWrapperOffset = toolbarWrapper.offset(),\n                toolbarWrapperLeft = toolbarWrapperOffset.left,\n                toolbarWrapperTop = toolbarWrapperOffset.top,\n                boxOffset = box.offset(),\n                boxOffsetLeft = boxOffset.left,\n                boxOffsetTop = boxOffset.top;\n\n            return !(boxOffsetLeft + box.width() < toolbarWrapperLeft ||\n                    boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() ||\n                    boxOffsetTop + box.height() < toolbarWrapperTop ||\n                    boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n        },\n\n        _showWindow: function() {\n            var that = this,\n                windowInstance = that.windowInstance,\n                wrapper, editorElement, editorOffset,\n                browser = kendo.support.browser;\n\n            if (windowInstance) {\n                wrapper = windowInstance.wrapper;\n                editorElement = that.element;\n\n                if (!wrapper.is(\":visible\") || !that.windowInstance.options.visible) {\n\n                    if (!wrapper[0].style.width) {\n                        wrapper.width(this._getWindowWidth());\n                    }\n\n                    // track content position when other parts of page change\n                    if (!windowInstance._moved) {\n                        editorOffset = editorElement.offset();\n                        wrapper.css({\n                            top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.windowInstance.element.css(\"padding-bottom\"), 10)),\n                            left: Math.max(0, parseInt(editorOffset.left, 10))\n                        });\n                    }\n\n                    if ((browser.msie || browser.edge) && that._overlapsWindow(editorElement)) {\n                        setTimeout(function() {\n                            windowInstance.open();\n                        }, 0);\n                    } else {\n                        windowInstance.open();\n                    }\n                }\n            }\n        }\n    });\n\n    Editor.defaultTools = {};\n\n    kendo.ui.plugin(Editor);\n\n    var Tool = Class.extend({\n        init: function(options) {\n            this.options = options;\n        },\n\n        command: function(commandArguments) {\n            return new this.options.command(commandArguments);\n        },\n\n        update: $.noop\n    });\n\n    Tool.exec = function(editor, name, value) {\n        editor.exec(name, { value: value });\n    };\n\n    var UndoTool = Tool.extend({\n        command: $.noop,\n        update: function(ui, nodes, undoRedoStack) {\n            var that = this,\n                name = that.options.name,\n                toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\");\n\n            switch (name) {\n                case \"undo\":\n                    toolbar.enable(ui, undoRedoStack.canUndo());\n                    break;\n                case \"redo\":\n                    toolbar.enable(ui, undoRedoStack.canRedo());\n                    break;\n                default:\n                    break;\n            }\n\n            ui.removeAttr(\"disabled\");\n        }\n    });\n\n    EditorUtils.registerTool(\"separator\", new Tool({ ui: { type: \"separator\" } }));\n    EditorUtils.registerTool(\"undo\", new UndoTool({ key: \"Z\", ctrl: true }));\n    EditorUtils.registerTool(\"redo\", new UndoTool({ key: \"Y\", ctrl: true }));\n\n    // Exports ================================================================\n\n    var emptyElementContent = '\\ufeff';\n    var emptyTableCellContent = emptyElementContent;\n\n    if (browser.msie || browser.edge) {\n        emptyTableCellContent = emptyElementContent = \"&nbsp;\";\n    }\n\n    extend(kendo.ui, {\n        editor: {\n            EditorUtils: EditorUtils,\n            Tool: Tool,\n            emptyElementContent: emptyElementContent,\n            emptyTableCellContent: emptyTableCellContent\n        }\n    });\n\n    if (kendo.PDFMixin) {\n        kendo.PDFMixin.extend(Editor.prototype);\n        Editor.prototype._drawPDF = function() {\n            return kendo.drawing.drawDOM(this.body, this.options.pdf);\n        };\n        Editor.prototype.saveAsPDF = function() {\n            var progress = new $.Deferred();\n            var promise = progress.promise();\n            var args = { promise: promise };\n\n            if (this.trigger(\"pdfExport\", args)) {\n                return;\n            }\n\n            var options = this.options.pdf;\n\n            this._drawPDF(progress)\n            .then(function(root) {\n                return kendo.drawing.exportPDF(root, options);\n            })\n            .done(function(dataURI) {\n                kendo.saveAs({\n                    dataURI: dataURI,\n                    fileName: options.fileName,\n                    proxyURL: options.proxyURL,\n                    proxyTarget: options.proxyTarget,\n                    forceProxy: options.forceProxy\n                });\n                progress.resolve();\n            })\n            .fail(function(err) {\n                progress.reject(err);\n            });\n\n            return promise;\n        };\n    }\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    map = $.map,\n    extend = $.extend,\n    browser = kendo.support.browser,\n    STYLE = \"style\",\n    FLOAT = \"float\",\n    CSSFLOAT = \"cssFloat\",\n    STYLEFLOAT = \"styleFloat\",\n    CLASS = \"class\",\n    KMARKER = \"k-marker\";\n\nfunction makeMap(items) {\n    var obj = {},\n        i, len;\n\n    for (i = 0, len = items.length; i < len; i++) {\n        obj[items[i]] = true;\n    }\n    return obj;\n}\n\nvar empty = makeMap(\"area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed\".split(\",\")),\n    nonListBlockElements = \"p,div,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption\".split(\",\"),\n    blockElements = nonListBlockElements.concat([\"ul\",\"ol\",\"li\"]),\n    block = makeMap(blockElements),\n    selfClosing = makeMap(\"area,base,br,col,command,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr\".split(\",\")),\n    inlineElements = \"span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby\".split(\",\"),\n    inline = makeMap(inlineElements),\n    fillAttrs = makeMap(\"checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected\".split(\",\")),\n    nonEmptyNonTextContentElements = [\"hgroup\",\"ol\",\"ul\",\"dl\",\"object\",\"video\",\"audio\",\"table\",\"colgroup\",\"tbody\",\"thead\",\"tfoot\",\"tr\",\"select\",\"optgroup\"];\n\nvar normalize = function(node) {\n    if (node.nodeType == 1) {\n        node.normalize();\n    }\n};\n\nif (browser.msie && browser.version >= 8) {\n    normalize = function(parent) {\n        if (parent.nodeType == 1 && parent.firstChild) {\n            var prev = parent.firstChild,\n                node = prev;\n\n            normalize(node);\n\n            while (true) {\n                node = node.nextSibling;\n\n                if (!node) {\n                    break;\n                }\n\n                normalize(node);\n\n                if (node.nodeType == 3 && prev.nodeType == 3) {\n                    node.nodeValue = prev.nodeValue + node.nodeValue;\n                    Dom.remove(prev);\n                }\n\n                prev = node;\n            }\n        }\n    };\n}\n\nvar whitespace = /^\\s+$/,\n    emptyspace = /^[\\n\\r\\t]+$/,\n    rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i,\n    bom = /\\ufeff/g,\n    whitespaceOrBom = /^(\\s+|\\ufeff)$/,\n    persistedScrollTop,\n    cssAttributes =\n           (\"color,padding-left,padding-right,padding-top,padding-bottom,\" +\n            \"background-color,background-attachment,background-image,background-position,background-repeat,\" +\n            \"border-top-style,border-top-width,border-top-color,\" +\n            \"border-bottom-style,border-bottom-width,border-bottom-color,\" +\n            \"border-left-style,border-left-width,border-left-color,\" +\n            \"border-right-style,border-right-width,border-right-color,\" +\n            \"font-family,font-size,font-style,font-variant,font-weight,line-height\"\n           ).split(\",\"),\n    htmlRe = /[<>\\&]/g,\n    entityRe = /[\\u00A0-\\u2666<>\\&]/g,\n    entityTable = {\n            34: 'quot', 38: 'amp', 39: 'apos', 60: 'lt', 62: 'gt',\n            160: 'nbsp', 161: 'iexcl', 162: 'cent', 163: 'pound', 164: 'curren',\n            165: 'yen', 166: 'brvbar', 167: 'sect', 168: 'uml', 169: 'copy',\n            170: 'ordf', 171: 'laquo', 172: 'not', 173: 'shy', 174: 'reg',\n            175: 'macr', 176: 'deg', 177: 'plusmn', 178: 'sup2', 179: 'sup3',\n            180: 'acute', 181: 'micro', 182: 'para', 183: 'middot', 184: 'cedil',\n            185: 'sup1', 186: 'ordm', 187: 'raquo', 188: 'frac14', 189: 'frac12',\n            190: 'frac34', 191: 'iquest', 192: 'Agrave', 193: 'Aacute', 194: 'Acirc',\n            195: 'Atilde', 196: 'Auml', 197: 'Aring', 198: 'AElig', 199: 'Ccedil',\n            200: 'Egrave', 201: 'Eacute', 202: 'Ecirc', 203: 'Euml', 204: 'Igrave',\n            205: 'Iacute', 206: 'Icirc', 207: 'Iuml', 208: 'ETH', 209: 'Ntilde',\n            210: 'Ograve', 211: 'Oacute', 212: 'Ocirc', 213: 'Otilde', 214: 'Ouml',\n            215: 'times', 216: 'Oslash', 217: 'Ugrave', 218: 'Uacute', 219: 'Ucirc',\n            220: 'Uuml', 221: 'Yacute', 222: 'THORN', 223: 'szlig', 224: 'agrave',\n            225: 'aacute', 226: 'acirc', 227: 'atilde', 228: 'auml', 229: 'aring',\n            230: 'aelig', 231: 'ccedil', 232: 'egrave', 233: 'eacute', 234: 'ecirc',\n            235: 'euml', 236: 'igrave', 237: 'iacute', 238: 'icirc', 239: 'iuml',\n            240: 'eth', 241: 'ntilde', 242: 'ograve', 243: 'oacute', 244: 'ocirc',\n            245: 'otilde', 246: 'ouml', 247: 'divide', 248: 'oslash', 249: 'ugrave',\n            250: 'uacute', 251: 'ucirc', 252: 'uuml', 253: 'yacute', 254: 'thorn',\n            255: 'yuml', 402: 'fnof', 913: 'Alpha', 914: 'Beta', 915: 'Gamma',\n            916: 'Delta', 917: 'Epsilon', 918: 'Zeta', 919: 'Eta', 920: 'Theta',\n            921: 'Iota', 922: 'Kappa', 923: 'Lambda', 924: 'Mu', 925: 'Nu',\n            926: 'Xi', 927: 'Omicron', 928: 'Pi', 929: 'Rho', 931: 'Sigma',\n            932: 'Tau', 933: 'Upsilon', 934: 'Phi', 935: 'Chi', 936: 'Psi',\n            937: 'Omega', 945: 'alpha', 946: 'beta', 947: 'gamma', 948: 'delta',\n            949: 'epsilon', 950: 'zeta', 951: 'eta', 952: 'theta', 953: 'iota',\n            954: 'kappa', 955: 'lambda', 956: 'mu', 957: 'nu', 958: 'xi',\n            959: 'omicron', 960: 'pi', 961: 'rho', 962: 'sigmaf', 963: 'sigma',\n            964: 'tau', 965: 'upsilon', 966: 'phi', 967: 'chi', 968: 'psi',\n            969: 'omega', 977: 'thetasym', 978: 'upsih', 982: 'piv', 8226: 'bull',\n            8230: 'hellip', 8242: 'prime', 8243: 'Prime', 8254: 'oline', 8260: 'frasl',\n            8472: 'weierp', 8465: 'image', 8476: 'real', 8482: 'trade', 8501: 'alefsym',\n            8592: 'larr', 8593: 'uarr', 8594: 'rarr', 8595: 'darr', 8596: 'harr',\n            8629: 'crarr', 8656: 'lArr', 8657: 'uArr', 8658: 'rArr', 8659: 'dArr',\n            8660: 'hArr', 8704: 'forall', 8706: 'part', 8707: 'exist', 8709: 'empty',\n            8711: 'nabla', 8712: 'isin', 8713: 'notin', 8715: 'ni', 8719: 'prod',\n            8721: 'sum', 8722: 'minus', 8727: 'lowast', 8730: 'radic', 8733: 'prop',\n            8734: 'infin', 8736: 'ang', 8743: 'and', 8744: 'or', 8745: 'cap',\n            8746: 'cup', 8747: 'int', 8756: 'there4', 8764: 'sim', 8773: 'cong',\n            8776: 'asymp', 8800: 'ne', 8801: 'equiv', 8804: 'le', 8805: 'ge',\n            8834: 'sub', 8835: 'sup', 8836: 'nsub', 8838: 'sube', 8839: 'supe',\n            8853: 'oplus', 8855: 'otimes', 8869: 'perp', 8901: 'sdot', 8968: 'lceil',\n            8969: 'rceil', 8970: 'lfloor', 8971: 'rfloor', 9001: 'lang', 9002: 'rang',\n            9674: 'loz', 9824: 'spades', 9827: 'clubs', 9829: 'hearts', 9830: 'diams',\n            338: 'OElig', 339: 'oelig', 352: 'Scaron', 353: 'scaron', 376: 'Yuml',\n            710: 'circ', 732: 'tilde', 8194: 'ensp', 8195: 'emsp', 8201: 'thinsp',\n            8204: 'zwnj', 8205: 'zwj', 8206: 'lrm', 8207: 'rlm', 8211: 'ndash',\n            8212: 'mdash', 8216: 'lsquo', 8217: 'rsquo', 8218: 'sbquo', 8220: 'ldquo',\n            8221: 'rdquo', 8222: 'bdquo', 8224: 'dagger', 8225: 'Dagger', 8240: 'permil',\n            8249: 'lsaquo', 8250: 'rsaquo', 8364: 'euro'\n        };\n\nvar Dom = {\n    block: block,\n    inline: inline,\n\n    findNodeIndex: function(node, skipText) {\n        var i = 0;\n\n        if (!node) {\n            return -1;\n        }\n\n        while (true) {\n            node = node.previousSibling;\n\n            if (!node) {\n                break;\n            }\n\n            if (!(skipText && node.nodeType == 3)) {\n                i++;\n            }\n        }\n\n        return i;\n    },\n\n    isDataNode: function(node) {\n        return node && node.nodeValue !== null && node.data !== null;\n    },\n\n    isAncestorOf: function(parent, node) {\n        try {\n            return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n        } catch (e) {\n            return false;\n        }\n    },\n\n    isAncestorOrSelf: function(root, node) {\n        return Dom.isAncestorOf(root, node) || root == node;\n    },\n\n    findClosestAncestor: function(root, node) {\n        if (Dom.isAncestorOf(root, node)) {\n            while (node && node.parentNode != root) {\n                node = node.parentNode;\n            }\n        }\n\n        return node;\n    },\n\n    getAllComments: function(rootElem) {\n        var comments = [];\n        // Fourth argument, which is actually obsolete according to the DOM4 standard, is required in IE 11\n        var iterator = document.createNodeIterator(rootElem,\n            NodeFilter.SHOW_COMMENT,\n            function() {\n                return NodeFilter.FILTER_ACCEPT;\n            }, false);\n\n        var curNode = iterator.nextNode();\n        while (curNode) {\n            comments.push(curNode.nodeValue);\n            curNode = iterator.nextNode();\n        }\n        return comments;\n    },\n\n    getNodeLength: function(node) {\n        return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n    },\n\n    splitDataNode: function(node, offset) {\n        var newNode = node.cloneNode(false);\n        var denormalizedText = \"\";\n        var iterator = node.nextSibling;\n        var temp;\n\n        while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n            denormalizedText += iterator.nodeValue;\n            temp = iterator;\n            iterator = iterator.nextSibling;\n            Dom.remove(temp);\n        }\n\n        node.deleteData(offset, node.length);\n        newNode.deleteData(0, offset);\n        newNode.nodeValue += denormalizedText;\n        Dom.insertAfter(newNode, node);\n    },\n\n    attrEquals: function(node, attributes) {\n        for (var key in attributes) {\n            var value = node[key];\n\n            if (key == FLOAT) {\n                value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n            }\n\n            if (typeof value == \"object\") {\n                if (!Dom.attrEquals(value, attributes[key])) {\n                    return false;\n                }\n            } else if (value != attributes[key]) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    blockParentOrBody: function(node) {\n        return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n    },\n\n    blockParents: function(nodes) {\n        var blocks = [],\n            i, len;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n            if (block && $.inArray(block, blocks) < 0) {\n                blocks.push(block);\n            }\n        }\n\n        return blocks;\n    },\n\n    windowFromDocument: function(document) {\n        return document.defaultView || document.parentWindow;\n    },\n\n    normalize: normalize,\n    blockElements: blockElements,\n    nonListBlockElements: nonListBlockElements,\n    inlineElements: inlineElements,\n    empty: empty,\n    fillAttrs: fillAttrs,\n    nodeTypes: {\n        ELEMENT_NODE: 1,\n        ATTRIBUTE_NODE: 2,\n        TEXT_NODE: 3,\n        CDATA_SECTION_NODE: 4,\n        ENTITY_REFERENCE_NODE: 5,\n        ENTITY_NODE: 6,\n        PROCESSING_INSTRUCTION_NODE: 7,\n        COMMENT_NODE: 8,\n        DOCUMENT_NODE: 9,\n        DOCUMENT_TYPE_NODE: 10,\n        DOCUMENT_FRAGMENT_NODE: 11,\n        NOTATION_NODE: 12\n    },\n\n    toHex: function(color) {\n        var matches = rgb.exec(color);\n\n        if (!matches) {\n            return color;\n        }\n\n        return \"#\" + map(matches.slice(1), function(x) {\n            x = parseInt(x, 10).toString(16);\n            return x.length > 1 ? x : \"0\" + x;\n        }).join(\"\");\n    },\n\n    encode: function(value, options) {\n        var encodableChars = (!options || options.entities) ? entityRe : htmlRe;\n        return value.replace(encodableChars, function(c) {\n            var charCode = c.charCodeAt(0);\n            var entity = entityTable[charCode];\n            return entity ? '&' + entity + ';' : c;\n        });\n    },\n    isBom: function(node) {\n        return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n    },\n    stripBom: function(text) {\n        return (text || \"\").replace(bom, \"\");\n    },\n\n    stripBomNode: function(node) {\n        if (Dom.isBom(node)) {\n            node.parentNode.removeChild(node);\n        }\n    },\n\n    insignificant: function(node) {\n        var attr = node.attributes;\n\n        return node.className == \"k-marker\" || (Dom.is(node, 'br') && (node.className == \"k-br\" || attr._moz_dirty || attr._moz_editor_bogus_node)) || (Dom.is(node, 'span') && (node.className == \"k-br\"));\n    },\n    tableCell: function(node) {\n        return Dom.is(node, \"td\") || Dom.is(node, \"th\");\n    },\n    significantNodes: function(nodes) {\n        return $.grep(nodes, function(child) {\n            var name = Dom.name(child);\n\n            if (name == 'br') {\n                return false;\n            } else if (Dom.insignificant(child)) {\n                return false;\n            } else if (Dom.emptyTextNode(child)) {\n                return false;\n            } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                return false;\n            }\n\n            return true;\n        });\n    },\n\n    emptyTextNode: function(node) {\n        return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n    },\n\n    emptyNode: function(node) {\n        return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n    },\n\n    name: function(node) {\n        return node.nodeName.toLowerCase();\n    },\n\n    significantChildNodes: function(node) {\n        return $.grep(node.childNodes, function(child) {\n            return child.nodeType != 3 || !Dom.isWhitespace(child);\n        });\n    },\n\n    lastTextNode: function(node) {\n        var result = null;\n\n        if (node.nodeType == 3) {\n            return node;\n        }\n\n        for (var child = node.lastChild; child; child = child.previousSibling) {\n            result = Dom.lastTextNode(child);\n\n            if (result) {\n                return result;\n            }\n        }\n\n        return result;\n    },\n\n    is: function(node, nodeName) {\n        return node && Dom.name(node) == nodeName;\n    },\n\n    isMarker: function(node) {\n        return node.className == KMARKER;\n    },\n\n    isWhitespace: function(node) {\n        return whitespace.test(node.nodeValue);\n    },\n\n    allowsTextContent: function(node) {\n        var result = true;\n\n        nonEmptyNonTextContentElements.every(function(name) {\n            if (Dom.is(node, name)) {\n                result = false;\n                return false;\n            } else {\n                return true;\n            }\n        });\n\n        return result;\n    },\n\n    allWhitespaceContent: function(node) {\n        var child = node.firstChild;\n        while (child && Dom.isWhitespace(child)) {\n            child = child.nextSibling;\n        }\n\n        return !child;\n    },\n\n    isEmptyspace: function(node) {\n        return emptyspace.test(node.nodeValue);\n    },\n\n    htmlIndentSpace: function(node) {\n        if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n            return false;\n        }\n\n        if (emptyspace.test(node.nodeValue)) {\n            return true;\n        }\n\n        var sibling = function(el, direction) {\n            while (el[direction]) {\n                el = el[direction];\n                if (Dom.significantNodes([el]).length > 0) {\n                    return el;\n                }\n            }\n        };\n\n        var parent = node.parentNode;\n        var prev = sibling(node, \"previousSibling\");\n        var next = sibling(node, \"nextSibling\");\n\n        if (bom.test(node.nodeValue)) {\n            return !!(prev || next);\n        }\n\n        if ($(parent).is(\"tr,tbody,thead,tfoot,table,ol,ul\")) {\n            return true;\n        }\n\n        if (Dom.isBlock(parent) || Dom.is(parent, \"body\")) {\n            var isPrevBlock = prev && Dom.isBlock(prev);\n            var isNextBlock = next && Dom.isBlock(next);\n            if ((!next && isPrevBlock) || (!prev && isNextBlock) || (isPrevBlock && isNextBlock)) {\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    isBlock: function(node) {\n        return block[Dom.name(node)];\n    },\n\n    isSelfClosing: function(node) {\n        return selfClosing[Dom.name(node)];\n    },\n\n    isEmpty: function(node) {\n        return empty[Dom.name(node)];\n    },\n\n    isInline: function(node) {\n        return inline[Dom.name(node)];\n    },\n\n    isImg: function(node) {\n        return Dom.name(node) == \"img\";\n    },\n\n    isBr: function(node) {\n        return Dom.name(node) == \"br\";\n    },\n\n    list: function(node) {\n        var name = node ? Dom.name(node) : \"\";\n        return name == \"ul\" || name == \"ol\" || name == \"dl\";\n    },\n\n    scrollContainer: function(doc) {\n        var wnd = Dom.windowFromDocument(doc),\n            scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n\n        if (scrollContainer.compatMode == 'BackCompat') {\n            scrollContainer = scrollContainer.body;\n        } else {\n            scrollContainer = scrollContainer.scrollingElement || scrollContainer.documentElement;\n        }\n\n        return scrollContainer;\n    },\n\n    scrollTo: function(node, toStart) {\n        var doc = node.ownerDocument;\n        var wnd = Dom.windowFromDocument(doc);\n        var windowHeight = wnd.innerHeight;\n        var scrollContainer = Dom.scrollContainer(doc);\n        var element, elementTop, elementHeight, marker;\n\n        if (Dom.isDataNode(node)) {\n            if (toStart) {\n                marker = Dom.create(doc, \"span\", { \"innerHTML\": \"&#xfeff;\" });\n                Dom.insertBefore(marker, node);\n                element = $(marker);\n            } else {\n                element = $(node.parentNode);\n            }\n        } else {\n            element = $(node);\n        }\n\n        elementTop = element.offset().top;\n        elementHeight = element[0].offsetHeight;\n\n        if (toStart || !elementHeight) {\n            elementHeight = parseInt(element.css(\"line-height\"), 10) ||\n                            Math.ceil(1.2 * parseInt(element.css(\"font-size\"), 10)) ||\n                            15;\n        }\n\n        if (marker) {\n            Dom.remove(marker);\n        }\n\n        if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n            scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n        }\n    },\n\n    persistScrollTop: function(doc) {\n        persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n    },\n\n    offset: function(target, offsetParent) {\n        var result = { top: target.offsetTop, left: target.offsetLeft };\n        var parent = target.offsetParent;\n\n        while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n            result.top += parent.offsetTop;\n            result.left += parent.offsetLeft;\n            parent = parent.offsetParent;\n        }\n\n        return result;\n    },\n\n    restoreScrollTop: function(doc) {\n        if (typeof persistedScrollTop == \"number\") {\n            Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n            persistedScrollTop = undefined;\n        }\n    },\n\n    insertAt: function(parent, newElement, position) {\n        parent.insertBefore(newElement, parent.childNodes[position] || null);\n    },\n\n    insertBefore: function(newElement, referenceElement) {\n        if (referenceElement.parentNode) {\n            return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n        } else {\n            return referenceElement;\n        }\n    },\n\n    insertAfter: function(newElement, referenceElement) {\n        return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n    },\n\n    remove: function(node) {\n        if (node.parentNode) {\n            node.parentNode.removeChild(node);\n        }\n    },\n\n    removeChildren: function(node) {\n        while (node.firstChild) {\n            node.removeChild(node.firstChild);\n        }\n    },\n\n    removeTextSiblings: function(node) {\n        var parentNode = node.parentNode;\n\n        while (node.nextSibling && node.nextSibling.nodeType == 3) {\n            parentNode.removeChild(node.nextSibling);\n        }\n\n        while (node.previousSibling && node.previousSibling.nodeType == 3) {\n            parentNode.removeChild(node.previousSibling);\n        }\n    },\n\n    trim: function(parent) {\n        for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n            var node = parent.childNodes[i];\n            if (Dom.isDataNode(node)) {\n                if (!Dom.stripBom(node.nodeValue).length) {\n                    Dom.remove(node);\n                }\n            } else if (node.className != KMARKER) {\n                Dom.trim(node);\n\n                if ((!Dom.isEmpty(node) && node.childNodes.length === 0) ||\n                    (Dom.isBlock(node) && Dom.allWhitespaceContent(node))) {\n                    Dom.remove(node);\n                }\n            }\n        }\n\n        return parent;\n    },\n\n    closest: function(node, tags) {\n        if (typeof tags === \"string\") {\n            tags = [tags];\n        }\n\n        while (node && tags.indexOf(Dom.name(node)) < 0) {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    closestBy: function(node, condition, rootCondition) {\n        while (node && !condition(node)) {\n            if (rootCondition && rootCondition(node)) {\n                return null;\n            }\n            node = node.parentNode;\n        }\n        return node;\n    },\n\n    sibling: function(node, direction) {\n        do {\n            node = node[direction];\n        } while (node && node.nodeType != 1);\n\n        return node;\n    },\n\n    next: function(node) {\n        return Dom.sibling(node, \"nextSibling\");\n    },\n\n    prev: function(node) {\n        return Dom.sibling(node, \"previousSibling\");\n    },\n\n    parentOfType: function(node, tags) {\n        do {\n            node = node.parentNode;\n        } while (node && !(Dom.ofType(node, tags)));\n\n        return node;\n    },\n\n    ofType: function(node, tags) {\n        return $.inArray(Dom.name(node), tags) >= 0;\n    },\n\n    changeTag: function(referenceElement, tagName, skipAttributes) {\n        var newElement = Dom.create(referenceElement.ownerDocument, tagName),\n            attributes = referenceElement.attributes,\n            i, len, name, value, attribute;\n\n        if (!skipAttributes) {\n            for (i = 0, len = attributes.length; i < len; i++) {\n                attribute = attributes[i];\n                if (attribute.specified) {\n                    // IE < 8 cannot set class or style via setAttribute\n                    name = attribute.nodeName;\n                    value = attribute.nodeValue;\n                    if (name == CLASS) {\n                        newElement.className = value;\n                    } else if (name == STYLE) {\n                        newElement.style.cssText = referenceElement.style.cssText;\n                    } else {\n                        newElement.setAttribute(name, value);\n                    }\n                }\n            }\n        }\n\n        while (referenceElement.firstChild) {\n            newElement.appendChild(referenceElement.firstChild);\n        }\n\n        Dom.insertBefore(newElement, referenceElement);\n        Dom.remove(referenceElement);\n        return newElement;\n    },\n\n    editableParent: function(node) {\n        while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    wrap: function(node, wrapper) {\n        Dom.insertBefore(wrapper, node);\n        wrapper.appendChild(node);\n        return wrapper;\n    },\n\n    unwrap: function(node) {\n        var parent = node.parentNode;\n        while (node.firstChild) {\n            parent.insertBefore(node.firstChild, node);\n        }\n\n        parent.removeChild(node);\n    },\n\n    wrapper: function(node) {\n        var wrapper = Dom.closestBy(node, function(el) {\n            return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n        });\n\n        return $(wrapper).is(\"body,.k-editor\") ? undefined : wrapper;\n    },\n\n    isChildOfBaseContainer: function(node) {\n        return $(node).parent().is(\"body,.k-editor\");\n    },\n\n    create: function(document, tagName, attributes) {\n        return Dom.attr(document.createElement(tagName), attributes);\n    },\n\n    createEmptyNode: function(document, tagName, attributes) {\n        var node = Dom.attr(document.createElement(tagName), attributes);\n        node.innerHTML = \"\\ufeff\";\n        return node;\n    },\n\n    attr: function(element, attributes) {\n        attributes = extend({}, attributes);\n\n        if (attributes && STYLE in attributes) {\n            Dom.style(element, attributes.style);\n            delete attributes.style;\n        }\n\n        for (var attr in attributes) {\n            if (attributes[attr] === null) {\n                element.removeAttribute(attr);\n                delete attributes[attr];\n            } else if (attr == \"className\") {\n                element[attr] = attributes[attr];\n            }\n        }\n\n        return extend(element, attributes);\n    },\n\n    mergeAttributes: function(origin, target, traverseCss) {\n        if (!origin.attributes.length) {\n            return;\n        }\n\n        $.each(origin.attributes, function() {\n            if (this.name !== \"contenteditable\" && (!traverseCss || this.name !== STYLE)) {\n                $(target).attr(this.name, this.value);\n            }\n\n            if (traverseCss && this.name === STYLE) {\n                $.each(origin.style, function() {\n                    target.style[this] = origin.style[this];\n                });\n            }\n        });\n    },\n\n    style: function(node, value) {\n        $(node).css(value || {});\n    },\n\n    unstyle: function(node, value) {\n        for (var key in value) {\n            if (key == FLOAT) {\n                key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n            }\n\n            node.style[key] = \"\";\n        }\n\n        if (node.style.cssText === \"\") {\n            node.removeAttribute(STYLE);\n        }\n    },\n\n    inlineStyle: function(body, name, attributes) {\n        var span = $(Dom.create(body.ownerDocument, name, attributes)),\n            style;\n\n        body.appendChild(span[0]);\n\n        style = map(cssAttributes, function(value) {\n            if (browser.msie && value == \"line-height\" && span.css(value) == \"1px\") {\n                return \"line-height:1.5\";\n            } else {\n                return value + \":\" + span.css(value);\n            }\n        }).join(\";\");\n\n        span.remove();\n\n        return style;\n    },\n\n    getEffectiveBackground: function(element) {\n        var backgroundStyle = element.css(\"background-color\") || \"\";\n\n        if (backgroundStyle.indexOf(\"rgba(0, 0, 0, 0\") < 0 && backgroundStyle !== \"transparent\") {\n            return backgroundStyle;\n        } else if (element[0].tagName.toLowerCase() === \"html\") {\n            return \"Window\";\n        } else {\n            return Dom.getEffectiveBackground(element.parent());\n        }\n    },\n\n    innerText: function(node) {\n        var text = node.innerHTML;\n        text = text.replace(/<!--(.|\\s)*?-->/gi, \"\");\n        text = text.replace(/<\\/?[^>]+?\\/?>/gm, \"\");\n\n        return text;\n    },\n\n    removeClass: function(node, classNames) {\n        var className = \" \" + node.className + \" \",\n            classes = classNames.split(\" \"),\n            i, len;\n\n        for (i = 0, len = classes.length; i < len; i++) {\n            className = className.replace(\" \" + classes[i] + \" \", \" \");\n        }\n\n        className = kendo.trim(className);\n\n        if (className.length) {\n            node.className = className;\n        } else {\n            node.removeAttribute(CLASS);\n        }\n    },\n\n    commonAncestor: function() {\n        var count = arguments.length,\n            paths = [],\n            minPathLength = Infinity,\n            output = null,\n            i, ancestors, node, first, j;\n\n        if (!count) {\n            return null;\n        }\n\n        if (count == 1) {\n            return arguments[0];\n        }\n\n        for (i = 0; i < count; i++) {\n            ancestors = [];\n            node = arguments[i];\n            while (node) {\n                ancestors.push(node);\n                node = node.parentNode;\n            }\n            paths.push(ancestors.reverse());\n            minPathLength = Math.min(minPathLength, ancestors.length);\n        }\n\n        if (count == 1) {\n            return paths[0][0];\n        }\n\n        for (i = 0; i < minPathLength; i++) {\n            first = paths[0][i];\n\n            for (j = 1; j < count; j++) {\n                if (first != paths[j][i]) {\n                    return output;\n                }\n            }\n\n            output = first;\n        }\n        return output;\n    },\n\n    closestSplittableParent: function(nodes) {\n        var result;\n\n        if (nodes.length == 1) {\n            result = Dom.parentOfType(nodes[0], [\"ul\",\"ol\"]);\n        } else {\n            result = Dom.commonAncestor.apply(null, nodes);\n        }\n\n        if (!result) {\n            result = Dom.parentOfType(nodes[0], [\"p\", \"td\"]) || nodes[0].ownerDocument.body;\n        }\n\n        if (Dom.isInline(result)) {\n            result = Dom.blockParentOrBody(result);\n        }\n\n        var editableParents = map(nodes, Dom.editableParent);\n        var editableAncestor = Dom.commonAncestor(editableParents)[0];\n\n        if ($.contains(result, editableAncestor)) {\n            result = editableAncestor;\n        }\n\n        return result;\n    },\n\n    closestEditable: function(node, types) {\n        var closest;\n        var editable = Dom.editableParent(node);\n\n        if (Dom.ofType(node, types)) {\n            closest = node;\n        } else {\n            closest = Dom.parentOfType(node, types);\n        }\n\n        if (closest && editable && $.contains(closest, editable)) {\n            closest = editable;\n        } else if (!closest && editable) {\n            closest = editable;\n        }\n\n        return closest;\n    },\n\n    closestEditableOfType: function(node, types) {\n        var editable = Dom.closestEditable(node, types);\n\n        if (editable && Dom.ofType(editable, types) && !$(editable).is(\".k-editor\")) {\n            return editable;\n        }\n    },\n\n    filter: function(tagName, nodes, invert) {\n        var filterFn = function(node) {\n            return Dom.name(node) == tagName;\n        };\n\n        return Dom.filterBy(nodes, filterFn, invert);\n    },\n\n    filterBy: function(nodes, condition, invert) {\n        var i = 0;\n        var len = nodes.length;\n        var result = [];\n        var match;\n\n        for (; i < len; i++) {\n            match = condition(nodes[i]);\n            if ((match && !invert) || (!match && invert)) {\n                result.push(nodes[i]);\n            }\n        }\n\n        return result;\n    },\n\n    ensureTrailingBreaks: function(node) {\n        var elements = $(node).find(\"p,td,th\");\n        var length = elements.length;\n        var i = 0;\n\n        if (length) {\n            for (; i < length; i++) {\n                Dom.ensureTrailingBreak(elements[i]);\n            }\n        } else {\n            Dom.ensureTrailingBreak(node);\n        }\n    },\n\n    removeTrailingBreak: function(node) {\n        $(node).find(\"br[type=_moz],.k-br\").remove();\n    },\n\n    ensureTrailingBreak: function(node) {\n        Dom.removeTrailingBreak(node);\n\n        var lastChild = node.lastChild;\n        var name = lastChild && Dom.name(lastChild);\n        var br;\n\n        if (!name ||\n            (name != \"br\" && name != \"img\") ||\n            (name == \"br\" && lastChild.className != \"k-br\")) {\n            br = node.ownerDocument.createElement(\"br\");\n            br.className = \"k-br\";\n            node.appendChild(br);\n        }\n    },\n\n    // Start: Table Utilities\n\n    reMapTableColumns: function(table, colAttr) {\n        Dom._mapColIndices(table, colAttr);\n    },\n\n    clearTableMappings: function(table, colAttr) {\n        $(table).find(\"[\" + colAttr + \"]\").removeAttr(colAttr);\n    },\n\n    _mapColIndices: function(table, colAttr) {\n        var registeredColumns = {};\n\n        for (var rowIndex = 0; rowIndex < table.rows.length; rowIndex++) {\n            var cells = table.rows[rowIndex].cells;\n            var colIndex = 0;\n            for (var cellIndex = 0; cellIndex < cells.length; cellIndex++, colIndex++) {\n                var cell = cells[cellIndex];\n\n                if (cell.rowSpan > 1) {\n                    this._mapColspan(cell, rowIndex, colIndex, registeredColumns);\n                }\n\n                if (registeredColumns[rowIndex]) {\n                    while (registeredColumns[rowIndex][colIndex]) {\n                        colIndex++;\n                    }\n                }\n\n                cell.setAttribute(colAttr, colIndex);\n\n                if (cell.colSpan > 1) {\n                    colIndex = colIndex + cell.colSpan - 1;\n                }\n            }\n        }\n    },\n\n    _mapColspan: function(cell, rowIndex, colIndex, registeredColumns) {\n        var rowSpan = cell.rowSpan,\n            colSpan = cell.colSpan,\n            index;\n\n        for (var ci = 0; ci < colSpan; ci++) {\n            index = colIndex + ci;\n\n            for (var ri = rowIndex + 1; ri < rowIndex + rowSpan; ri++) {\n\n                if (!registeredColumns[ri]) {\n                    registeredColumns[ri] = {};\n                    registeredColumns[ri].length = 0;\n                }\n\n                if (registeredColumns[rowIndex]) {\n                    while (registeredColumns[rowIndex][index]) {\n                        index++;\n                    }\n                }\n\n                registeredColumns[ri][index] = true;\n                registeredColumns[ri].length++;\n            }\n        }\n\n    },\n\n    associateWithIds: function(table) {\n        var that = this;\n        var numberOfTheadRows = 0;\n        var tableRows = table.rows;\n        var numberOfTableRows = tableRows.length;\n        var theadMatrix = [];\n        var tbodyMatrix = [];\n        var theadRows, i;\n\n        if (table.tHead) {\n            theadRows = table.tHead.rows;\n            numberOfTheadRows = theadRows.length;\n        } else {\n            numberOfTheadRows = that._getNumberOfHeaderRows(table);\n            theadRows = [];\n            for (i = 0; i < numberOfTheadRows; i++) {\n                theadRows.push(tableRows[i]);\n            }\n        }\n        for (i = 0; i < numberOfTheadRows; i++) {\n            theadMatrix.push([]);\n        }\n        for (i = 0; i < numberOfTableRows; i++) {\n            tbodyMatrix.push([]);\n        }\n\n        that._generateIdsForColumns(theadMatrix, theadRows);\n        that._generateIdsForRows(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n        that._assignIds(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n    },\n\n    _generateIdsForColumns: function(theadMatrix, theadRows) {\n        var timestamp = new Date().getTime();\n        var numberOfTheadRows = theadRows ? theadRows.length : 0;\n        var row, cells, cell, col, id, colspan, rowspan, i, j, k, l;\n\n        for (i = 0; i < numberOfTheadRows; i++) {\n            row = theadRows[i];\n            cells = row.cells;\n            col = 0;\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                id = \"table\" + i + j + (++timestamp);\n                cell.setAttribute(\"id\", id);\n                colspan = cell.getAttribute(\"colspan\") || 1;\n                rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                while (theadMatrix[i][j + col]) {\n                    col += 1;\n                }\n\n                for (k = 0; k < rowspan; k++) {\n                    for (l = 0; l < colspan; l++) {\n                        theadMatrix[i + k][j + col + l] = id;\n                    }\n                }\n            }\n        }\n    },\n\n    _generateIdsForRows: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n        var that = this;\n        var timestamp = new Date().getTime();\n        var numberOfTableRows = tableRows.length;\n        var row, cells, cell, col, id, colspan, rowspan, i, j, k, l, colIndex, headers;\n\n        var pushHeaderId = function(row) {\n            headers.push(row[colIndex]);\n        };\n\n        for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n            row = tableRows[i];\n            cells = $(row.cells).filter(\"th\");\n            col = 0;\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                id = \"table\" + i + j + (++timestamp);\n                cell.setAttribute(\"id\", id);\n                colspan = cell.getAttribute(\"colspan\") || 1;\n                rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                while (tbodyMatrix[i][j + col]) {\n                    col += 1;\n                }\n\n                for (k = 0; k < rowspan; k++) {\n                    for (l = 0; l < colspan; l++) {\n                        tbodyMatrix[i + k][j + col + l] = id;\n                    }\n                }\n\n                colIndex = cell.getAttribute(\"col-index\");\n                headers = [];\n                theadMatrix.forEach(pushHeaderId);\n                headers = headers.filter(that._onlyUnique);\n                cell.setAttribute(\"headers\", headers.join(\" \").trim());\n            }\n        }\n    },\n\n    _assignIds: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n        var that = this;\n        var numberOfTableRows = tableRows.length;\n        var row, cells, cell, i, j, colIndex, headers;\n\n        var pushHeaderId = function(row) {\n            headers.push(row[colIndex]);\n        };\n\n        for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n            row = tableRows[i];\n            cells = $(row.cells).filter(\"td\");\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                colIndex = cell.getAttribute(\"col-index\");\n                headers = tbodyMatrix[i].slice();\n\n                theadMatrix.forEach(pushHeaderId);\n                headers = headers.filter(that._onlyUnique);\n                cell.setAttribute(\"headers\", headers.join(\" \").trim());\n            }\n        }\n    },\n\n    _getNumberOfColumns: function(table) {\n        var cells = $(table).find(\"th, td\");\n        var numberOfCols = 0;\n        var cell, i, currentIndex;\n\n        for (i = 0; i < cells.length; i++) {\n            cell = cells[i];\n            currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n            if (currentIndex > numberOfCols) {\n                numberOfCols = currentIndex;\n            }\n        }\n\n        return numberOfCols;\n    },\n\n    _getNumberOfHeaderColumns: function(table, numberOfHeaderRows) {\n        var rows = table.rows;\n        var numberOfCols = 0;\n        var currentIndex, row, i, j, cell;\n\n        for (i = numberOfHeaderRows; i < rows.length; i++) {\n            row = rows[i];\n\n            for (j = 0; j < row.cells.length; j++) {\n                cell = row.cells[j];\n\n                if (this.is(cell, \"th\")) {\n                    currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n                    if (currentIndex > numberOfCols) {\n                        numberOfCols = currentIndex;\n                    }\n                }\n            }\n        }\n\n        return numberOfCols;\n    },\n\n    _getNumberOfHeaderRows: function(table) {\n        var rows = table.rows;\n        var thead = table.tHead;\n        var number = thead && table.tHead.rows ? table.tHead.rows.length : 0;\n        var j, row, cell, length;\n\n        if (number === 0) {\n            row = rows[0];\n            length = row.cells && row.cells.length;\n\n            while (row && length && this.is(row.cells[0], \"th\")) {\n                for (j = 0; j < length; j++) {\n                    cell = row ? row.cells[j] : null;\n\n                    if (!this.is(cell, \"th\")) {\n                        row = null;\n                    }\n                }\n\n                if (row) {\n                    number += 1;\n                    row = this.next(row);\n                    length = row && row.cells && row.cells.length;\n                }\n            }\n        }\n\n        return number;\n    },\n\n    // End: Table Utilities\n\n    _onlyUnique: function(value, index, self) {\n        return self.indexOf(value) === index;\n    }\n};\n\nkendo.ui.editor.Dom = Dom;\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\n// Imports ================================================================\nvar kendo = window.kendo;\nvar Editor = kendo.ui.editor;\nvar dom = Editor.Dom;\nvar extend = $.extend;\n\nvar fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\nvar quoteRe = /\"/g; //\"\nvar brRe = /<br[^>]*>/i;\nvar pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\nvar emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\nvar cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\nvar sizzleAttr = /^sizzle-\\d+/i;\nvar scriptAttr = /^k-script-/i;\nvar onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\nvar br = '<br class=\"k-br\">';\nvar bomSpan = \"<span class='k-br'>\\ufeff</span>\";\n\nvar div = document.createElement(\"div\");\ndiv.innerHTML = \" <hr>\";\nvar supportsLeadingWhitespace = div.firstChild.nodeType === 3;\ndiv = null;\nvar isFunction = kendo.isFunction;\n\nvar TD = \"td\";\n\nvar Serializer = {\n    toEditableHtml: function(html) {\n        return (html || \"\")\n            .replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, \"<!--[CDATA[$1]]-->\")\n            .replace(/<(\\/?)script([^>]*)>/ig, \"<$1k:script$2>\")\n            .replace(/<img([^>]*)>/ig, function(match) {\n                return match.replace(onerrorRe, \"\");\n            })\n            .replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/ig, \"$1\")\n            .replace(/^<(table|blockquote)/i, br + '<$1')\n            .replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1')\n            .replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n    },\n\n    _toEditableImmutables: function(body) {\n        var immutable = Editor.Immutables.immutable,\n            emptyTextNode = dom.emptyTextNode,\n            first = body.firstChild,\n            last = body.lastChild;\n\n        while (emptyTextNode(first)) {\n            first = first.nextSibling;\n        }\n\n        while (emptyTextNode(last)) {\n            last = last.previousSibling;\n        }\n\n        if (first && immutable(first)) {\n            $(bomSpan).prependTo(body);\n        }\n\n        if (last && immutable(last)) {\n            $(bomSpan).appendTo(body);\n        }\n    },\n\n    _fillEmptyElements: function(body) {\n        // fills empty elements to allow them to be focused\n        $(body).find(\"p,td\").each(function() {\n            var p = $(this);\n            if (/^\\s*$/g.test(p.text()) && !p.find(\"img,input\").length) {\n                var node = this;\n                while (node.children[0] && node.children[0].nodeType != 3) {\n                    node = node.children[0];\n                }\n\n                if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                    if (dom.is(node, \"td\")) {\n                        node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                    }\n                    else {\n                        node.innerHTML = kendo.ui.editor.emptyElementContent;\n                    }\n                }\n            }\n        });\n    },\n\n    _removeSystemElements: function(body) {\n        // removes persisted system elements\n        $(\".k-paste-container\", body).remove();\n    },\n\n    _resetOrderedLists: function(root) {\n        // fix for IE9 OL bug -- https://connect.microsoft.com/IE/feedback/details/657695/ordered-list-numbering-changes-from-correct-to-0-0\n        var ols = root.getElementsByTagName(\"ol\"), i, ol, originalStart;\n\n        for (i = 0; i < ols.length; i++) {\n            ol = ols[i];\n            originalStart = ol.getAttribute(\"start\");\n\n            ol.setAttribute(\"start\", 1);\n\n            if (originalStart) {\n                ol.setAttribute(\"start\", originalStart);\n            } else {\n                ol.removeAttribute(originalStart);\n            }\n        }\n    },\n\n    _preventScriptExecution: function(root) {\n        $(root).find(\"*\").each(function() {\n            var attributes = this.attributes;\n            var attribute, i, l, name;\n            var attributesToRemove = [];\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n\n                if (attribute.specified && /^on/i.test(name)) {\n                    this.setAttribute(\"k-script-\" + name, attribute.value);\n                    attributesToRemove.push(name);\n                }\n            }\n\n            for (i = 0, l = attributesToRemove.length; i < l; i++) {\n                this.removeAttribute(attributesToRemove[i]);\n            }\n        });\n    },\n\n    htmlToDom: function(html, root, options) {\n        var browser = kendo.support.browser;\n        var msie = browser.msie;\n        var o = options || {};\n        var immutables = o.immutables;\n\n        html = Serializer.toEditableHtml(html);\n\n        if (isFunction(o.custom)) {\n            html = o.custom(html) || html;\n        }\n        root.innerHTML = html;\n\n        if (immutables) {\n            immutables.deserialize(root);\n        }\n\n        if (msie) {\n            // unicode characters denormalize the DOM tree in IE9\n            dom.normalize(root);\n\n            Serializer._resetOrderedLists(root);\n        }\n\n        Serializer._preventScriptExecution(root);\n\n        Serializer._fillEmptyElements(root);\n\n        Serializer._removeSystemElements(root);\n\n        Serializer._toEditableImmutables(root);\n\n        // add k-table class to all tables\n        $(\"table\", root).addClass(\"k-table\");\n\n        return root;\n    },\n\n    domToXhtml: function(root, options) {\n        var result = [];\n        var immutables = options && options.immutables;\n\n        function semanticFilter(attributes) {\n            return $.grep(attributes, function(attr) {\n                return attr.name != \"style\";\n            });\n        }\n\n        function mapStart(node, tag) {\n            result.push('<' + tag);\n            attr(node);\n            result.push('>');\n        }\n\n        var tagMap = {\n            iframe: {\n                start: function(node) { mapStart(node, \"iframe\"); },\n                end: function() { result.push('</iframe>'); }\n            },\n            'k:script': {\n                start: function(node) { mapStart(node, \"script\"); },\n                end: function() { result.push('</script>'); },\n                skipEncoding: true\n            },\n            span: {\n                canOptimize: true,\n                semantic: true,\n                start: function(node) {\n                    var style = node.style;\n\n                    var attributes = specifiedAttributes(node);\n                    var semanticAttributes = semanticFilter(attributes);\n\n                    if (semanticAttributes.length) {\n                        result.push(\"<span\"); attr(node, semanticAttributes); result.push(\">\");\n                    }\n\n                    if (style.textDecoration == \"underline\") {\n                        result.push(\"<u>\");\n                    }\n\n                    var font = [];\n                    if (style.color) {\n                        font.push('color=\"' + dom.toHex(style.color) + '\"');\n                    }\n\n                    if (style.fontFamily) {\n                        font.push('face=\"' + style.fontFamily + '\"');\n                    }\n\n                    if (style.fontSize) {\n                        var size = $.inArray(style.fontSize, fontSizeMappings);\n                        font.push('size=\"' + size + '\"');\n                    }\n\n                    // Apply the rest of the inline styles back\n                    var inlineStyles = [];\n                    var ignoredStylePrefixes = [\"text-decoration\", \"color\", \"font\"];\n\n                    for (let i = 0; i < style.length; i++) {\n                        var inlineStyle = style[i];\n\n                        if (ignoredStylePrefixes.filter(prop => inlineStyle.startsWith(prop)).length <= 0) {\n                            inlineStyles.push(`${inlineStyle}: ${style[inlineStyle]}`);\n                        }\n                    }\n\n                    if (inlineStyles.length) {\n                        font.push('style=\"' + inlineStyles.join(\";\") + '\"');\n                    }\n\n                    if (font.length) {\n                        result.push(\"<font \" + font.join(\" \") + \">\");\n                    }\n                },\n                end: function(node) {\n                    var style = node.style;\n\n                    if (style.color || style.fontFamily || style.fontSize) {\n                        result.push(\"</font>\");\n                    }\n\n                    if (style.textDecoration == \"underline\") {\n                        result.push(\"</u>\");\n                    }\n\n                    if (semanticFilter(specifiedAttributes(node)).length) {\n                        result.push(\"</span>\");\n                    }\n                }\n            },\n            strong: {\n                semantic: true,\n                start: function(node) { mapStart(node, \"b\"); },\n                end: function() { result.push('</b>'); }\n            },\n            em: {\n                semantic: true,\n                start: function(node) { mapStart(node, \"i\"); },\n                end: function() { result.push('</i>'); }\n            },\n            b: {\n                semantic: false,\n                start: function(node) { mapStart(node, \"strong\"); },\n                end: function() { result.push('</strong>'); }\n            },\n            i: {\n                semantic: false,\n                start: function(node) { mapStart(node, \"em\"); },\n                end: function() { result.push('</em>'); }\n            },\n            u: {\n                semantic: false,\n                start: function(node) {\n                    result.push('<span');\n\n                    var attributes = specifiedAttributes(node);\n                    var style = $(attributes).filter(function(i, item) { return item.name == \"style\"; })[0];\n                    var styleObj = { nodeName: \"style\", value: \"text-decoration:underline;\" };\n\n                    if (style) {\n                        styleObj.value = style.value;\n                        if (!/text-decoration/i.test(styleObj.value)) {\n                            styleObj.value = \"text-decoration:underline;\" + styleObj.value;\n                        }\n                        attributes.splice($.inArray(style, attributes), 1);\n                    }\n                    attributes.push(styleObj);\n\n                    attr(node, attributes);\n                    result.push('>');\n                },\n                end: function() { result.push('</span>'); }\n            },\n            font: {\n                canOptimize: true,\n                semantic: false,\n                start: function(node) {\n                    result.push('<span style=\"');\n\n                    var color = node.getAttribute('color');\n                    var size = fontSizeMappings[node.getAttribute('size')];\n                    var face = node.getAttribute('face');\n\n                    if (color) {\n                        result.push('color:');\n                        result.push(dom.toHex(color));\n                        result.push(';');\n                    }\n\n                    if (face) {\n                        result.push('font-family:');\n                        result.push(face);\n                        result.push(';');\n                    }\n\n                    if (size) {\n                        result.push('font-size:');\n                        result.push(size);\n                        result.push(';');\n                    }\n\n                    result.push('\">');\n                },\n                end: function() {\n                    result.push('</span>');\n                }\n            }\n        };\n\n        tagMap.script = tagMap[\"k:script\"];\n\n        options = options || {};\n\n        if (typeof options.semantic == \"undefined\") {\n            options.semantic = true;\n        }\n\n        function cssProperties(cssText) {\n            var trim = kendo.trim;\n            var css = trim(cssText);\n            var match;\n            var property, value;\n            var properties = [];\n\n            cssDeclaration.lastIndex = 0;\n\n            while (true) {\n                match = cssDeclaration.exec(css);\n\n                if (!match) {\n                    break;\n                }\n\n                property = trim(match[1].toLowerCase());\n                value = trim(match[2]);\n\n                if (property == \"font-size-adjust\" || property == \"font-stretch\") {\n                    continue;\n                }\n\n                if (property.indexOf('color') >= 0) {\n                    value = dom.toHex(value);\n                } else if (property.indexOf('font') >= 0) {\n                    value = value.replace(quoteRe, \"'\");\n                } else if (/\\burl\\(/g.test(value)) {\n                    value = value.replace(quoteRe, \"\");\n                }\n\n                properties.push({ property: property, value: value });\n            }\n\n            return properties;\n        }\n\n        function styleAttr(cssText) {\n            var properties = cssProperties(cssText);\n            var i;\n\n            for (i = 0; i < properties.length; i++) {\n                result.push(properties[i].property);\n                result.push(':');\n                result.push(properties[i].value);\n                result.push(';');\n            }\n        }\n\n        function specifiedAttributes(node) {\n            var result = [];\n            var attributes = node.attributes;\n            var attribute, i, l;\n            var name, value, specified;\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n\n                name = attribute.nodeName;\n                value = attribute.value;\n                specified = attribute.specified;\n\n                // In IE < 8 the 'value' attribute is not returned as 'specified'. The same goes for type=\"text\"\n                if (name == 'value' && 'value' in node && node.value) {\n                    specified = true;\n                } else if (name == 'type' && value == 'text') {\n                    specified = true;\n                } else if (name == \"class\" && !value) {\n                    specified = false;\n                } else if (sizzleAttr.test(name)) {\n                    specified = false;\n                } else if (name == 'complete') {\n                    specified = false;\n                } else if (name == 'altHtml') {\n                    specified = false;\n                } else if (name == 'start' && dom.is(node, \"ul\")) {\n                    specified = false;\n                } else if (name == 'start' && dom.is(node, \"ol\") && value == \"1\") {\n                    specified = false;\n                } else if (name.indexOf('_moz') >= 0) {\n                    specified = false;\n                } else if (scriptAttr.test(name)) {\n                    specified = !!options.scripts;\n                } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, \"tr\") || dom.is(node, \"td\"))) {\n                    specified = false;\n                }\n\n                if (specified) {\n                    result.push(attribute);\n                }\n            }\n\n            return result;\n        }\n\n        function attr(node, attributes) {\n            var i, l, attribute, name, value;\n\n            attributes = attributes || specifiedAttributes(node);\n\n            if (dom.is(node, 'img')) {\n                var width = node.style.width,\n                    height = node.style.height,\n                    $node = $(node);\n\n                if (width && pixelRe.test(width)) {\n                    $node.attr('width', parseInt(width, 10));\n                    dom.unstyle(node, { width: undefined$1 });\n                }\n\n                if (height && pixelRe.test(height)) {\n                    $node.attr('height', parseInt(height, 10));\n                    dom.unstyle(node, { height: undefined$1 });\n                }\n            }\n\n            if (!attributes.length) {\n                return;\n            }\n\n            // Remove the following if everything seems to be in order.\n            // https://github.com/telerik/kendo-ui-core/issues/3639\n            // attributes.sort(function (a, b) {\n            //     return a.nodeName > b.nodeName ? 1 : a.nodeName < b.nodeName ? -1 : 0;\n            // });\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n                value = attribute.value;\n\n                if (name == \"class\" && value == \"k-table\") {\n                    continue;\n                }\n\n                name = name.replace(scriptAttr, \"\");\n\n                result.push(' ');\n                result.push(name);\n                result.push('=\"');\n\n                if (name == 'style') {\n                    styleAttr(value || node.style.cssText);\n                } else if (name == 'src' || name == 'href') {\n                    result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                } else {\n                    result.push(dom.fillAttrs[name] ? name : value);\n                }\n\n                result.push('\"');\n            }\n        }\n\n        function children(node, skip, skipEncoding) {\n            for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                child(childNode, skip, skipEncoding);\n            }\n        }\n\n        function text(node) {\n            return node.nodeValue.replace(/\\ufeff/g, \"\");\n        }\n\n        function isEmptyBomNode(node) {\n            if (dom.isBom(node)) {\n                do {\n                    node = node.parentNode;\n\n                    if (dom.is(node, TD) && node.childNodes.length === 1) {\n                        return true;\n                    }\n\n                    if (node.childNodes.length !== 1) {\n                        return false;\n                    }\n                } while (!dom.isBlock(node));\n\n                return true;\n            }\n\n            return false;\n        }\n\n        function child(node, skip, skipEncoding) {\n            var nodeType = node.nodeType,\n                tagName, mapper,\n                parent, value, previous, jqNode;\n\n            if (immutables && Editor.Immutables.immutable(node)) {\n                result.push(immutables.serialize(node));\n            } else if (nodeType == 1) {\n                tagName = dom.name(node);\n                jqNode = $(node);\n\n                if (jqNode.hasClass(\"k-element-resize-handle-wrapper\") || jqNode.hasClass(\"k-column-resize-handle-wrapper\") || jqNode.hasClass(\"k-row-resize-handle-wrapper\")) {\n                    return;\n                }\n\n                if (!tagName || dom.insignificant(node)) {\n                    return;\n                }\n\n                if (!options.scripts && (tagName == \"script\" || tagName == \"k:script\")) {\n                    return;\n                }\n\n                mapper = tagMap[tagName];\n\n                if (mapper) {\n                    if (mapper.canOptimize &&\n                        options.optimizeTags &&\n                        shouldOptimize(node)) {\n                            children(node, false, mapper.skipEncoding);\n                        return;\n                    }\n\n                    if (typeof mapper.semantic == \"undefined\" ||\n                        (options.semantic ^ mapper.semantic)) {\n                        mapper.start(node);\n                        children(node, false, mapper.skipEncoding);\n                        mapper.end(node);\n                        return;\n                    }\n                }\n\n                result.push('<');\n                result.push(tagName);\n\n                attr(node);\n\n                if (dom.empty[tagName]) {\n                    result.push(' />');\n                } else {\n                    result.push('>');\n                    children(node, skip || dom.is(node, 'pre'));\n                    result.push('</');\n                    result.push(tagName);\n                    result.push('>');\n                }\n            } else if (nodeType == 3) {\n                if (isEmptyBomNode(node)) {\n                    result.push('&nbsp;');\n                    return;\n                }\n\n                value = text(node);\n\n                if (!skip && supportsLeadingWhitespace) {\n                    parent = node.parentNode;\n                    previous = node.previousSibling;\n\n                    if (!previous) {\n                         previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                    }\n\n                    if (!previous || previous.innerHTML === \"\" || dom.isBlock(previous)) {\n                        if (options.keepEOL) {\n                            value = value.replace(/[\\r\\n\\v\\f\\t ]+/, ' ');\n                        } else {\n                            value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                        }\n                    }\n\n                    value = value.replace(/ +/, ' ');\n                }\n\n                result.push(skipEncoding ? value : dom.encode(value, options));\n\n            } else if (nodeType == 4) {\n                result.push('<![CDATA[');\n                result.push(node.data);\n                result.push(']]>');\n            } else if (nodeType == 8) {\n                if (node.data.indexOf('[CDATA[') < 0) {\n                    result.push('<!--');\n                    result.push(node.data);\n                    result.push('-->');\n                } else {\n                    result.push('<!');\n                    result.push(node.data);\n                    result.push('>');\n                }\n            }\n        }\n\n        function shouldOptimize(node) {\n            return node.attributes.length === 0;\n        }\n\n        function textOnly(root) {\n            var childrenCount = root.childNodes.length;\n            var textChild = childrenCount && root.firstChild.nodeType == 3;\n\n            return textChild && (childrenCount == 1 || (childrenCount == 2 && dom.insignificant(root.lastChild)));\n        }\n\n        function runCustom() {\n            if (kendo.isFunction(options.custom)) {\n                result = options.custom(result) || result;\n            }\n        }\n\n        if (textOnly(root)) {\n            result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n            runCustom();\n\n            return result;\n        }\n\n        children(root);\n        result = result.join('');\n        runCustom();\n\n        // if serialized dom contains only whitespace elements, consider it empty (required field validation)\n        if (result.replace(brRe, \"\").replace(emptyPRe, \"\") === \"\") {\n            return \"\";\n        }\n\n        return result;\n    }\n\n};\n\nextend(Editor, {\n    Serializer: Serializer\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        browser = kendo.support.browser,\n        dom = Editor.Dom,\n        findNodeIndex = dom.findNodeIndex,\n        isDataNode = dom.isDataNode,\n        findClosestAncestor = dom.findClosestAncestor,\n        getNodeLength = dom.getNodeLength,\n        normalize = dom.normalize;\n\nvar SelectionUtils = {\n    selectionFromWindow: function(window) {\n        if (!window) {\n            return;\n        }\n\n        if (!(\"getSelection\" in window)) {\n            return new W3CSelection(window.document);\n        }\n\n        return window.getSelection();\n    },\n\n    selectionFromRange: function(range) {\n        var rangeDocument = RangeUtils.documentFromRange(range);\n        return SelectionUtils.selectionFromDocument(rangeDocument);\n    },\n\n    selectionFromDocument: function(document) {\n        return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n    }\n};\n\nvar W3CRange = Class.extend({\n    init: function(doc) {\n        $.extend(this, {\n            ownerDocument: doc, /* not part of the spec; used when cloning ranges, traversing the dom and creating fragments */\n            startContainer: doc,\n            endContainer: doc,\n            commonAncestorContainer: doc,\n            startOffset: 0,\n            endOffset: 0,\n            collapsed: true\n        });\n    },\n\n    // Positioning Methods\n    setStart: function(node, offset) {\n        this.startContainer = node;\n        this.startOffset = offset;\n        updateRangeProperties(this);\n        fixIvalidRange(this, true);\n    },\n\n    setEnd: function(node, offset) {\n        this.endContainer = node;\n        this.endOffset = offset;\n        updateRangeProperties(this);\n        fixIvalidRange(this, false);\n    },\n\n    setStartBefore: function(node) {\n        this.setStart(node.parentNode, findNodeIndex(node));\n    },\n\n    setStartAfter: function(node) {\n        this.setStart(node.parentNode, findNodeIndex(node) + 1);\n    },\n\n    setEndBefore: function(node) {\n        this.setEnd(node.parentNode, findNodeIndex(node));\n    },\n\n    setEndAfter: function(node) {\n        this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n    },\n\n    selectNode: function(node) {\n        this.setStartBefore(node);\n        this.setEndAfter(node);\n    },\n\n    selectNodeContents: function(node) {\n        this.setStart(node, 0);\n        this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n    },\n\n    collapse: function(toStart) {\n        var that = this;\n\n        if (toStart) {\n            that.setEnd(that.startContainer, that.startOffset);\n        } else {\n            that.setStart(that.endContainer, that.endOffset);\n        }\n    },\n\n    // Editing Methods\n\n    deleteContents: function() {\n        var that = this,\n            range = that.cloneRange();\n\n        if (that.startContainer != that.commonAncestorContainer) {\n            that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n        }\n\n        that.collapse(true);\n\n        (function deleteSubtree(iterator) {\n            while (iterator.next()) {\n                if (iterator.hasPartialSubtree()) {\n                    deleteSubtree(iterator.getSubtreeIterator());\n                } else {\n                    iterator.remove();\n                }\n            }\n        })(new RangeIterator(range));\n    },\n\n    cloneContents: function() {\n        // clone subtree\n        var document = RangeUtils.documentFromRange(this);\n        return (function cloneSubtree(iterator) {\n                var node, frag = document.createDocumentFragment();\n\n                while (node = iterator.next()) {\n                    node = node.cloneNode(!iterator.hasPartialSubtree());\n\n                    if (iterator.hasPartialSubtree()) {\n                        node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                    }\n\n                    frag.appendChild(node);\n                }\n\n                return frag;\n        })(new RangeIterator(this));\n    },\n\n    extractContents: function() {\n        var that = this,\n            range = that.cloneRange();\n\n        if (that.startContainer != that.commonAncestorContainer) {\n            that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n        }\n\n        that.collapse(true);\n\n        var document = RangeUtils.documentFromRange(that);\n\n        return (function extractSubtree(iterator) {\n            var node, frag = document.createDocumentFragment();\n\n            while (node = iterator.next()) {\n                if (iterator.hasPartialSubtree()) {\n                    node = node.cloneNode(false);\n                    node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                } else {\n                    iterator.remove(that.originalRange);\n                }\n\n                frag.appendChild(node);\n            }\n\n            return frag;\n        })(new RangeIterator(range));\n    },\n\n    insertNode: function(node) {\n        var that = this;\n\n        if (isDataNode(that.startContainer)) {\n            if (that.startOffset != that.startContainer.nodeValue.length) {\n                dom.splitDataNode(that.startContainer, that.startOffset);\n            }\n\n            dom.insertAfter(node, that.startContainer);\n        } else {\n            dom.insertAt(that.startContainer, node, that.startOffset);\n        }\n\n        that.setStart(that.startContainer, that.startOffset);\n    },\n\n    cloneRange: function() {\n        // fast copy\n        return $.extend(new W3CRange(this.ownerDocument), {\n            startContainer: this.startContainer,\n            endContainer: this.endContainer,\n            commonAncestorContainer: this.commonAncestorContainer,\n            startOffset: this.startOffset,\n            endOffset: this.endOffset,\n            collapsed: this.collapsed,\n\n            originalRange: this /* not part of the spec; used to update the original range when calling extractContents() on clones */\n        });\n    },\n\n    // used for debug purposes\n    toString: function() {\n        var startNodeName = this.startContainer.nodeName,\n            endNodeName = this.endContainer.nodeName;\n\n        return [startNodeName == \"#text\" ? this.startContainer.nodeValue : startNodeName, '(', this.startOffset, ') : ',\n                endNodeName == \"#text\" ? this.endContainer.nodeValue : endNodeName, '(', this.endOffset, ')'].join('');\n    }\n});\n\nW3CRange.fromNode = function(node) {\n    return new W3CRange(node.ownerDocument);\n};\n\n/* can be used in Range.compareBoundaryPoints if we need it one day */\nfunction compareBoundaries(start, end, startOffset, endOffset) {\n    if (start == end) {\n        return endOffset - startOffset;\n    }\n\n    // end is child of start\n    var container = end;\n    while (container && container.parentNode != start) {\n        container = container.parentNode;\n    }\n\n    if (container) {\n        return findNodeIndex(container) - startOffset;\n    }\n\n    // start is child of end\n    container = start;\n    while (container && container.parentNode != end) {\n        container = container.parentNode;\n    }\n\n    if (container) {\n        return endOffset - findNodeIndex(container) - 1;\n    }\n\n    // deep traversal\n    var root = dom.commonAncestor(start, end);\n    var startAncestor = start;\n\n    while (startAncestor && startAncestor.parentNode != root) {\n        startAncestor = startAncestor.parentNode;\n    }\n\n    if (!startAncestor) {\n        startAncestor = root;\n    }\n\n    var endAncestor = end;\n    while (endAncestor && endAncestor.parentNode != root) {\n        endAncestor = endAncestor.parentNode;\n    }\n\n    if (!endAncestor) {\n        endAncestor = root;\n    }\n\n    if (startAncestor == endAncestor) {\n        return 0;\n    }\n\n    return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n}\n\nfunction fixIvalidRange(range, toStart) {\n    function isInvalidRange(range) {\n        try {\n            return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n        } catch (ex) {\n            // range was initially invalid (e.g. when cloned from invalid range) - it must be fixed\n            return true;\n        }\n    }\n\n    if (isInvalidRange(range)) {\n        if (toStart) {\n            range.commonAncestorContainer = range.endContainer = range.startContainer;\n            range.endOffset = range.startOffset;\n        } else {\n            range.commonAncestorContainer = range.startContainer = range.endContainer;\n            range.startOffset = range.endOffset;\n        }\n\n        range.collapsed = true;\n    }\n}\n\nfunction updateRangeProperties(range) {\n    range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n\n    var node = range.startContainer;\n    while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n        node = node.parentNode;\n    }\n\n    range.commonAncestorContainer = node;\n}\n\nvar RangeIterator = Class.extend({\n    init: function(range) {\n        $.extend(this, {\n            range: range,\n            _current: null,\n            _next: null,\n            _end: null\n        });\n\n        if (range.collapsed) {\n            return;\n        }\n\n        var root = range.commonAncestorContainer;\n\n        this._next = range.startContainer == root && !isDataNode(range.startContainer) ?\n        range.startContainer.childNodes[range.startOffset] :\n        findClosestAncestor(root, range.startContainer);\n\n        this._end = range.endContainer == root && !isDataNode(range.endContainer) ?\n        range.endContainer.childNodes[range.endOffset] :\n        findClosestAncestor(root, range.endContainer).nextSibling;\n    },\n\n    hasNext: function() {\n        return !!this._next;\n    },\n\n    next: function() {\n        var that = this,\n            current = that._current = that._next;\n        that._next = that._current && that._current.nextSibling != that._end ?\n        that._current.nextSibling : null;\n\n        if (isDataNode(that._current)) {\n            if (that.range.endContainer == that._current) {\n                current = current.cloneNode(true);\n                current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n            }\n\n            if (that.range.startContainer == that._current) {\n                current = current.cloneNode(true);\n                current.deleteData(0, that.range.startOffset);\n            }\n        }\n\n        return current;\n    },\n\n    traverse: function(callback) {\n        var that = this,\n            current;\n\n        function next() {\n            that._current = that._next;\n            that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n            return that._current;\n        }\n\n        while (current = next()) {\n            if (that.hasPartialSubtree()) {\n                that.getSubtreeIterator().traverse(callback);\n            } else {\n                callback(current);\n            }\n        }\n\n        return current;\n    },\n\n    remove: function(originalRange) {\n        var that = this,\n            inStartContainer = that.range.startContainer == that._current,\n            inEndContainer = that.range.endContainer == that._current,\n            start, end, delta;\n\n        if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n            start = inStartContainer ? that.range.startOffset : 0;\n            end = inEndContainer ? that.range.endOffset : that._current.length;\n            delta = end - start;\n\n            if (originalRange && (inStartContainer || inEndContainer)) {\n                if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                    originalRange.startOffset -= delta;\n                }\n\n                if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                    originalRange.endOffset -= delta;\n                }\n            }\n\n            that._current.deleteData(start, delta);\n        } else {\n            var parent = that._current.parentNode;\n\n            if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                var nodeIndex = findNodeIndex(that._current);\n\n                if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                    originalRange.startOffset -= 1;\n                }\n\n                if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                    originalRange.endOffset -= 1;\n                }\n            }\n\n            dom.remove(that._current);\n        }\n    },\n\n    hasPartialSubtree: function() {\n        return !isDataNode(this._current) &&\n        (dom.isAncestorOrSelf(this._current, this.range.startContainer) ||\n            dom.isAncestorOrSelf(this._current, this.range.endContainer));\n    },\n\n    getSubtreeIterator: function() {\n        return new RangeIterator(this.getSubRange());\n    },\n\n    getSubRange: function() {\n        var that = this,\n            subRange = that.range.cloneRange();\n        subRange.selectNodeContents(that._current);\n        if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n            subRange.setStart(that.range.startContainer, that.range.startOffset);\n        }\n        if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n            subRange.setEnd(that.range.endContainer, that.range.endOffset);\n        }\n\n        return subRange;\n    }\n});\n\nvar W3CSelection = Class.extend({\n    init: function(doc) {\n        this.ownerDocument = doc;\n        this.rangeCount = 1;\n    },\n\n    addRange: function(range) {\n        var textRange = this.ownerDocument.body.createTextRange();\n\n        // end container should be adopted first in order to prevent selection with negative length\n        adoptContainer(textRange, range, false);\n        adoptContainer(textRange, range, true);\n\n        textRange.select();\n    },\n\n    removeAllRanges: function() {\n        var selection = this.ownerDocument.selection;\n\n        if (selection.type != \"None\") {\n            selection.empty();\n        }\n    },\n\n    getRangeAt: function() {\n        var textRange,\n            range = new W3CRange(this.ownerDocument),\n            selection = this.ownerDocument.selection,\n            element, commonAncestor;\n\n        try {\n            textRange = selection.createRange();\n            element = textRange.item ? textRange.item(0) : textRange.parentElement();\n            if (element.ownerDocument != this.ownerDocument) {\n                return range;\n            }\n        } catch (ex) {\n            return range;\n        }\n\n        if (selection.type == \"Control\") {\n            range.selectNode(textRange.item(0));\n        } else {\n            commonAncestor = textRangeContainer(textRange);\n            adoptEndPoint(textRange, range, commonAncestor, true);\n            adoptEndPoint(textRange, range, commonAncestor, false);\n\n            if (range.startContainer.nodeType == 9) {\n                range.setStart(range.endContainer, range.startOffset);\n            }\n\n            if (range.endContainer.nodeType == 9) {\n                range.setEnd(range.startContainer, range.endOffset);\n            }\n\n            if (textRange.compareEndPoints(\"StartToEnd\", textRange) === 0) {\n                range.collapse(false);\n            }\n\n            var startContainer = range.startContainer,\n                endContainer = range.endContainer,\n                body = this.ownerDocument.body;\n\n            if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && // check for full body selection\n                !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) { // but not when single textnode is selected\n                var movedStart = false,\n                    movedEnd = false;\n\n                while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                    startContainer = startContainer.parentNode;\n                    movedStart = true;\n                }\n\n                while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                    endContainer = endContainer.parentNode;\n                    movedEnd = true;\n                }\n\n                if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                    range.setStart(startContainer, 0);\n                    range.setEnd(endContainer, getNodeLength(body));\n                }\n            }\n        }\n\n        return range;\n    }\n});\n\nfunction textRangeContainer(textRange) {\n    var left = textRange.duplicate(),\n        right = textRange.duplicate();\n\n    left.collapse(true);\n    right.collapse(false);\n\n    return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n}\n\nfunction adoptContainer(textRange, range, start) {\n    // find anchor node and offset\n    var container = range[start ? \"startContainer\" : \"endContainer\"],\n        offset = range[start ? \"startOffset\" : \"endOffset\"],\n        textOffset = 0,\n        isData = isDataNode(container),\n        anchorNode = isData ? container : container.childNodes[offset] || null,\n        anchorParent = isData ? container.parentNode : container,\n        doc = range.ownerDocument,\n        cursor = doc.body.createTextRange(),\n        cursorNode;\n\n    // visible data nodes need a text offset\n    if (container.nodeType == 3 || container.nodeType == 4) {\n        textOffset = offset;\n    }\n\n    if (!anchorParent) {\n        anchorParent = doc.body;\n    }\n\n    if (anchorParent.nodeName.toLowerCase() == \"img\") {\n        cursor.moveToElementText(anchorParent);\n        cursor.collapse(false);\n        textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n    } else {\n        // create a cursor element node to position range (since we can't select text nodes)\n        cursorNode = anchorParent.insertBefore(dom.create(doc, \"a\"), anchorNode);\n\n        cursor.moveToElementText(cursorNode);\n        dom.remove(cursorNode);\n        cursor[start ? \"moveStart\" : \"moveEnd\"](\"character\", textOffset);\n        cursor.collapse(false);\n        textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n    }\n}\n\nfunction adoptEndPoint(textRange, range, commonAncestor, start) {\n    var cursorNode = dom.create(range.ownerDocument, \"a\"),\n        cursor = textRange.duplicate(),\n        comparison = start ? \"StartToStart\" : \"StartToEnd\",\n        result, parent, target,\n        previous, next,\n        args, index,\n        appended = false;\n\n    cursorNode.innerHTML = \"\\ufeff\";\n    cursor.collapse(start);\n\n    parent = cursor.parentElement();\n\n    if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n        parent = commonAncestor;\n    }\n\n    // detect range end points\n    // insert cursorNode within the textRange parent and move the cursor until it gets outside of the textRange\n    do {\n        if (appended) {\n            parent.insertBefore(cursorNode, cursorNode.previousSibling);\n        } else {\n            parent.appendChild(cursorNode);\n            appended = true;\n        }\n        cursor.moveToElementText(cursorNode);\n    } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n\n    target = cursorNode.nextSibling;\n\n    if (result == -1 && isDataNode(target)) {\n        cursor.setEndPoint(start ? \"EndToStart\" : \"EndToEnd\", textRange);\n\n        dom.remove(cursorNode);\n\n        args = [target, cursor.text.length];\n    } else {\n        previous = !start && cursorNode.previousSibling;\n        next = start && cursorNode.nextSibling;\n\n        if (isDataNode(next)) {\n            args = [next, 0];\n        } else if (isDataNode(previous)) {\n            args = [previous, previous.length];\n        } else {\n            index = findNodeIndex(cursorNode);\n\n            if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                args = [parent.nextSibling, 0];\n            } else {\n                args = [parent, index];\n            }\n        }\n\n        dom.remove(cursorNode);\n    }\n\n    range[start ? \"setStart\" : \"setEnd\"].apply(range, args);\n}\n\nvar RangeEnumerator = Class.extend({\n    init: function(range) {\n        this.enumerate = function() {\n            var nodes = [];\n\n            function visit(node) {\n                if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                    nodes.push(node);\n                } else {\n                    node = node.firstChild;\n                    while (node) {\n                        visit(node);\n                        node = node.nextSibling;\n                    }\n                }\n            }\n\n            new RangeIterator(range).traverse(visit);\n\n            return nodes;\n        };\n    }\n});\n\nvar ImmutablesRangeIterator = RangeIterator.extend({\n    hasPartialSubtree: function() {\n        var immutable = Editor.Immutables && Editor.Immutables.immutable;\n        return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n    },\n\n    getSubtreeIterator: function() {\n        return new ImmutablesRangeIterator(this.getSubRange());\n    }\n});\n\nvar ImmutablesRangeEnumerator = Class.extend({\n    init: function(range) {\n        this.enumerate = function() {\n            var nodes = [];\n            var immutable = Editor.Immutables && Editor.Immutables.immutable;\n            function visit(node) {\n                if (immutable && !immutable(node)) {\n                    if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                        nodes.push(node);\n                    } else {\n                        node = node.firstChild;\n                        while (node) {\n                            visit(node);\n                            node = node.nextSibling;\n                        }\n                    }\n                }\n            }\n\n            new ImmutablesRangeIterator(range).traverse(visit);\n\n            return nodes;\n        };\n    }\n});\n\nvar RestorePoint = Class.extend({\n    init: function(range, body, options) {\n        var that = this;\n        that.range = range;\n        that.rootNode = RangeUtils.documentFromRange(range);\n        that.body = body || that.getEditable(range);\n        if (dom.name(that.body) != \"body\") {\n            that.rootNode = that.body;\n        }\n\n        that.startContainer = that.nodeToPath(range.startContainer);\n        that.endContainer = that.nodeToPath(range.endContainer);\n        that.startOffset = that.offset(range.startContainer, range.startOffset);\n        that.endOffset = that.offset(range.endContainer, range.endOffset);\n\n        that.immutables = options && options.immutables;\n\n        if (that.immutables) {\n            that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n        }\n\n        that.html = that.body.innerHTML;\n\n        if (that.immutables && !that.serializedImmutables.empty) {\n            Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n        }\n    },\n\n    index: function(node) {\n        var result = 0,\n            lastType = node.nodeType;\n\n        while (node = node.previousSibling) {\n            var nodeType = node.nodeType;\n\n            if (nodeType != 3 || lastType != nodeType) {\n                result ++;\n            }\n\n            lastType = nodeType;\n        }\n\n        return result;\n    },\n\n    getEditable: function(range) {\n        var root = range.commonAncestorContainer;\n\n        while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == \"false\"))) {\n            root = root.parentNode;\n        }\n\n        return root;\n    },\n\n    restoreHtml: function() {\n        var that = this;\n\n        dom.removeChildren(that.body);\n        that.body.innerHTML = that.html;\n        if (that.immutables && !that.serializedImmutables.empty) {\n            Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n        }\n    },\n\n    offset: function(node, value) {\n        if (node.nodeType == 3) {\n            while ((node = node.previousSibling) && node.nodeType == 3) {\n                value += node.nodeValue.length;\n            }\n        }\n\n        return value;\n    },\n\n    nodeToPath: function(node) {\n        var path = [];\n\n        while (node != this.rootNode) {\n            path.push(this.index(node));\n            node = node.parentNode;\n        }\n\n        return path;\n    },\n\n    toRangePoint: function(range, start, path, denormalizedOffset) {\n        var node = this.rootNode,\n            length = path.length,\n            offset = denormalizedOffset;\n\n        while (length-- && node) {\n            node = node.childNodes[path[length]];\n        }\n\n        while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n            offset -= node.nodeValue.length;\n            node = node.nextSibling;\n        }\n\n        if (node && offset >= 0) {\n            range[start ? 'setStart' : 'setEnd'](node, offset);\n        }\n    },\n\n    toRange: function() {\n        var that = this,\n            result = that.range.cloneRange();\n\n        that.toRangePoint(result, true, that.startContainer, that.startOffset);\n        that.toRangePoint(result, false, that.endContainer, that.endOffset);\n\n        return result;\n    }\n\n});\n\nvar Marker = Class.extend({\n    init: function() {\n        this.caret = null;\n    },\n\n    addCaret: function(range) {\n        var that = this;\n        var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n        range.insertNode(caret);\n\n        dom.stripBomNode(caret.previousSibling);\n        dom.stripBomNode(caret.nextSibling);\n\n        range.selectNode(caret);\n        return caret;\n    },\n\n    removeCaret: function(range) {\n        var that = this,\n            previous = that.caret.previousSibling,\n            startOffset = 0;\n\n        if (previous) {\n            startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n        }\n\n        var container = that.caret.parentNode;\n        var containerIndex = previous ? findNodeIndex(previous) : 0;\n\n        dom.remove(that.caret);\n        normalize(container);\n\n        var node = container.childNodes[containerIndex];\n\n        if (isDataNode(node)) {\n            range.setStart(node, startOffset);\n        } else if (node) {\n            var textNode = dom.lastTextNode(node);\n            if (textNode) {\n                range.setStart(textNode, textNode.nodeValue.length);\n            } else {\n                range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n            }\n        } else {\n            if (!browser.msie && !container.innerHTML) {\n                container.innerHTML = '<br _moz_dirty=\"\" />';\n            }\n\n            range.selectNodeContents(container);\n        }\n        range.collapse(true);\n    },\n\n    add: function(range, expand) {\n        var that = this;\n\n        var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (expand && range.collapsed) {\n            that.addCaret(range);\n            range = RangeUtils.expand(range);\n        }\n\n        var rangeBoundary = range.cloneRange();\n\n        rangeBoundary.collapse(false);\n        that.end = dom.create(doc, 'span', { className: 'k-marker' });\n        rangeBoundary.insertNode(that.end);\n\n        rangeBoundary = range.cloneRange();\n        rangeBoundary.collapse(true);\n        that.start = that.end.cloneNode(true);\n        rangeBoundary.insertNode(that.start);\n\n        that._removeDeadMarkers(that.start, that.end);\n\n        if (collapsed) {\n            var bom = doc.createTextNode(\"\\ufeff\");\n            dom.insertAfter(bom.cloneNode(), that.start);\n            dom.insertBefore(bom, that.end);\n        }\n\n        normalize(range.commonAncestorContainer);\n\n        range.setStartBefore(that.start);\n        range.setEndAfter(that.end);\n\n        return range;\n    },\n\n    _removeDeadMarkers: function(start, end) {\n        if (start.previousSibling && start.previousSibling.nodeValue == \"\\ufeff\") {\n            dom.remove(start.previousSibling);\n        }\n\n        if (end.nextSibling && end.nextSibling.nodeValue == \"\\ufeff\") {\n            dom.remove(end.nextSibling);\n        }\n    },\n\n    _normalizedIndex: function(node) {\n        var index = findNodeIndex(node);\n        var pointer = node;\n\n        while (pointer.previousSibling) {\n            if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                index--;\n            }\n\n            pointer = pointer.previousSibling;\n        }\n\n        return index;\n    },\n\n    remove: function(range) {\n        var that = this,\n            start = that.start,\n            end = that.end,\n            shouldNormalizeStart,\n            shouldNormalizeEnd,\n            shouldNormalize;\n\n        normalize(range.commonAncestorContainer);\n\n        while (!start.nextSibling && start.parentNode) {\n            start = start.parentNode;\n        }\n\n        while (!end.previousSibling && end.parentNode) {\n            end = end.parentNode;\n        }\n\n        // merely accessing the siblings will solve range issues in IE\n        shouldNormalizeStart = (start.previousSibling && start.previousSibling.nodeType == 3) &&\n                               (start.nextSibling && start.nextSibling.nodeType == 3);\n\n        shouldNormalizeEnd = (end.previousSibling && end.previousSibling.nodeType == 3) &&\n                             (end.nextSibling && end.nextSibling.nodeType == 3);\n\n        shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n\n        start = start.nextSibling;\n        end = end.previousSibling;\n\n        var isBomSelected = start === end && dom.isBom(start);\n        if (isBomSelected && start.length > 1) {\n            start.nodeValue = start.nodeValue.charAt(0);\n        }\n\n        var collapsed = isBomSelected;\n        var collapsedToStart = false;\n        // collapsed range\n        if (start == that.end) {\n            collapsedToStart = !!that.start.previousSibling;\n            start = end = that.start.previousSibling || that.end.nextSibling;\n            collapsed = true;\n        }\n\n        dom.remove(that.start);\n        dom.remove(that.end);\n\n        if (!start || !end) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            range.collapse(true);\n            return;\n        }\n\n        var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n        var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n\n        if (start.nodeType == 3) {\n            while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                start = start.previousSibling;\n                startOffset += start.nodeValue.length;\n            }\n        }\n\n        if (end.nodeType == 3) {\n            while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                end = end.previousSibling;\n                endOffset += end.nodeValue.length;\n            }\n        }\n\n        var startParent = start.parentNode;\n        var endParent = end.parentNode;\n        var startIndex = this._normalizedIndex(start);\n        var endIndex = this._normalizedIndex(end);\n\n        normalize(startParent);\n        if (start.nodeType == 3) {\n            start = startParent.childNodes[startIndex];\n        }\n\n        normalize(endParent);\n        if (end.nodeType == 3) {\n            end = endParent.childNodes[endIndex];\n        }\n\n        if (collapsed) {\n            if (start.nodeType == 3) {\n                range.setStart(start, startOffset);\n            } else {\n                range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n            }\n\n            range.collapse(true);\n\n        } else {\n            if (start.nodeType == 3) {\n                range.setStart(start, startOffset);\n            } else {\n                range.setStartBefore(start);\n            }\n\n            if (end.nodeType == 3) {\n                range.setEnd(end, endOffset);\n            } else {\n                range.setEndAfter(end);\n            }\n        }\n\n        if (that.caret) {\n            that.removeCaret(range);\n        }\n    }\n});\n\nvar boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n\nvar RangeUtils = {\n    nodes: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        if (!nodes.length) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                nodes = dom.significantChildNodes(range.commonAncestorContainer);\n            }\n        }\n        return nodes;\n    },\n\n    textNodes: function(range) {\n        var allNodes = new RangeEnumerator(range).enumerate(),\n            result = allNodes.filter(function(node) {\n                return dom.allowsTextContent(node.parentElement);\n            });\n\n        return result;\n    },\n\n    editableTextNodes: function(range) {\n        var nodes = [],\n            immutableParent = Editor.Immutables && Editor.Immutables.immutableParent,\n            result = [];\n\n        if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n            nodes = new ImmutablesRangeEnumerator(range).enumerate();\n            result = nodes.filter(function(node) {\n                return dom.allowsTextContent(node.parentElement);\n            });\n        }\n\n        return result;\n    },\n\n    documentFromRange: function(range) {\n        var startContainer = range.startContainer;\n        return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n    },\n\n    createRange: function(document) {\n        return document.createRange();\n    },\n\n    selectRange: function(range) {\n        var image = RangeUtils.image(range);\n        if (image) {\n            range.setStartAfter(image);\n            range.setEndAfter(image);\n        }\n        var selection = SelectionUtils.selectionFromRange(range);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    },\n\n    stringify: function(range) {\n        return kendo.format(\n            \"{0}:{1} - {2}:{3}\",\n            dom.name(range.startContainer), range.startOffset,\n            dom.name(range.endContainer), range.endOffset\n        );\n    },\n\n    split: function(range, node, trim) {\n        function partition(start) {\n            var partitionRange = range.cloneRange();\n            partitionRange.collapse(start);\n            partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n            var contents = partitionRange.extractContents();\n            if (trim) {\n                contents = dom.trim(contents);\n            }\n            dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n        }\n        partition(true);\n        partition(false);\n    },\n\n    mapAll: function(range, map) {\n        var nodes = [];\n\n        new RangeIterator(range).traverse(function(node) {\n            var mapped = map(node);\n\n            if (mapped && $.inArray(mapped, nodes) < 0) {\n                nodes.push(mapped);\n            }\n        });\n\n        return nodes;\n    },\n\n    getAll: function(range, predicate) {\n        var selector = predicate;\n\n        if (typeof predicate == \"string\") {\n            predicate = function(node) {\n                return dom.is(node, selector);\n            };\n        }\n\n        return RangeUtils.mapAll(range, function(node) {\n            if (predicate(node)) {\n                return node;\n            }\n        });\n    },\n\n    getMarkers: function(range) {\n        return RangeUtils.getAll(range, function(node) {\n            return node.className == 'k-marker';\n        });\n    },\n\n    image: function(range) {\n        var nodes = RangeUtils.getAll(range, \"img\");\n\n        if (nodes.length == 1) {\n            return nodes[0];\n        }\n    },\n\n    isStartOf: function(originalRange, node) {\n        if (originalRange.startOffset !== 0) {\n            return false;\n        }\n\n        var range = originalRange.cloneRange();\n\n        while (range.startOffset === 0 && range.startContainer != node) {\n            var index = dom.findNodeIndex(range.startContainer);\n            var parent = range.startContainer.parentNode;\n\n            while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                index--;\n            }\n\n            range.setStart(parent, index);\n        }\n\n        return range.startOffset === 0 && range.startContainer == node;\n    },\n\n    isEndOf: function(originalRange, node) {\n        var range = originalRange.cloneRange();\n\n        range.collapse(false);\n\n        var start = range.startContainer;\n\n        if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n            range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n            range.collapse(true);\n        }\n\n        range.setEnd(node, dom.getNodeLength(node));\n\n        var nodes = [];\n\n        function visit(node) {\n            if (!dom.insignificant(node) && !(dom.isDataNode(node) && /^[\\ufeff]*$/.test(node.nodeValue))) {\n                nodes.push(node);\n            }\n        }\n\n        new RangeIterator(range).traverse(visit);\n\n        return !nodes.length;\n    },\n\n    wrapSelectedElements: function(range) {\n        var startEditable = dom.editableParent(range.startContainer);\n        var endEditable = dom.editableParent(range.endContainer);\n\n        while (range.startOffset === 0 && range.startContainer != startEditable) {\n            range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n        }\n\n        function isEnd(offset, container) {\n            var length = dom.getNodeLength(container);\n\n            if (offset == length) {\n                return true;\n            }\n\n            for (var i = offset; i < length; i++) {\n                if (!dom.insignificant(container.childNodes[i])) {\n                    return false;\n                }\n            }\n\n            return true;\n        }\n\n        while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n            range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n        }\n\n        return range;\n    },\n\n    expand: function(range) {\n        var result = range.cloneRange();\n\n        var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n        var endContainer = result.endContainer.childNodes[result.endOffset];\n\n        if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n            return result;\n        }\n\n        var beforeCaret = startContainer.nodeValue;\n        var afterCaret = endContainer.nodeValue;\n\n        if (!beforeCaret || !afterCaret) {\n            return result;\n        }\n\n        var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n        var endOffset = afterCaret.search(boundary);\n\n        if (!startOffset || !endOffset) {\n            return result;\n        }\n\n        endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n        startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n\n        result.setStart(startContainer, startOffset);\n        result.setEnd(endContainer, endOffset);\n\n        return result;\n    },\n\n    isExpandable: function(range) {\n        var node = range.startContainer;\n        var rangeDocument = RangeUtils.documentFromRange(range);\n\n        if (node == rangeDocument || node == rangeDocument.body) {\n            return false;\n        }\n\n        var result = range.cloneRange();\n\n        var value = node.nodeValue;\n        if (!value) {\n            return false;\n        }\n\n        var beforeCaret = value.substring(0, result.startOffset);\n        var afterCaret = value.substring(result.startOffset);\n\n        var startOffset = 0, endOffset = 0;\n\n        if (beforeCaret) {\n            startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n        }\n\n        if (afterCaret) {\n            endOffset = afterCaret.search(boundary);\n        }\n\n        return startOffset && endOffset;\n    }\n};\n\nextend(Editor, {\n    SelectionUtils: SelectionUtils,\n    W3CRange: W3CRange,\n    RangeIterator: RangeIterator,\n    W3CSelection: W3CSelection,\n    RangeEnumerator: RangeEnumerator,\n    RestorePoint: RestorePoint,\n    Marker: Marker,\n    RangeUtils: RangeUtils\n});\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        template = kendo.template,\n        RangeUtils = Editor.RangeUtils,\n        complexBlocks = [\"ul\", \"ol\", \"tbody\", \"thead\", \"table\"],\n        toolsToBeUpdated = [\n            \"bold\",\n            \"italic\",\n            \"underline\",\n            \"strikethrough\",\n            \"superscript\",\n            \"subscript\",\n            \"forecolor\",\n            \"backcolor\",\n            \"fontname\",\n            \"fontsize\",\n            \"createlink\",\n            \"unlink\",\n            \"autolink\",\n            \"addcolumnleft\",\n            \"addcolumnright\",\n            \"addrowabove\",\n            \"addrowbelow\",\n            \"deleterow\",\n            \"deletecolumn\",\n            \"mergecells\",\n            \"formatting\",\n            \"cleanformatting\" ],\n        IMMUTABALE = \"k-immutable\",\n        IMMUTABALE_MARKER_SELECTOR = \"[\" + IMMUTABALE + \"]\",\n        IMMUTABLE_SELECTOR = \"[contenteditable='false']\";\n\n    var rootCondition = function(node) {\n        return $(node).is(\"body,.k-editor\");\n    };\n\n    var immutable = function(node) {\n        return node.getAttribute && node.getAttribute(\"contenteditable\") == \"false\";\n    };\n\n    var immutableParent = function(node) {\n        return dom.closestBy(node, immutable, rootCondition);\n    };\n\n    var expandImmutablesIn = function(range) {\n        var startImmutableParent = immutableParent(range.startContainer);\n        var endImmutableParent = immutableParent(range.endContainer);\n\n        if (startImmutableParent || endImmutableParent) {\n            if (startImmutableParent) {\n                range.setStartBefore(startImmutableParent);\n            }\n            if (endImmutableParent) {\n                range.setEndAfter(endImmutableParent);\n            }\n        }\n    };\n\n    var immutablesContext = function(range) {\n        if (immutableParent(range.commonAncestorContainer)) {\n            return true;\n        } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n            var editableNodes = RangeUtils.editableTextNodes(range);\n            if (editableNodes.length === 0) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    var randomId = function(length) {\n        var result = '';\n        var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n        for (var i = length || 10; i > 0; --i) {\n            result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n        }\n        return result;\n    };\n\n    var removeImmutables = function(root) {\n        var serializedImmutables = { empty: true }, nodeName, id, serialized;\n         $(root).find(IMMUTABLE_SELECTOR).each(function(i, node) {\n            nodeName = dom.name(node);\n            id = randomId();\n            serialized = \"<\" + nodeName + \" \" + IMMUTABALE + \"='\" + id + \"'></\" + nodeName + \">\";\n            serializedImmutables[id] = { node: node, style: $(node).attr(\"style\") };\n            serializedImmutables.empty = false;\n            $(node).replaceWith(serialized);\n        });\n\n        return serializedImmutables;\n    };\n\n    var restoreImmutables = function(root, serializedImmutables) {\n        var id, immutable;\n        $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function(i, node) {\n            id = node.getAttribute(IMMUTABALE);\n            immutable = serializedImmutables[id];\n            $(node).replaceWith(immutable.node);\n            if (immutable.style != $(immutable.node).attr(\"style\")) {\n                $(immutable.node).removeAttr(\"style\").attr(\"style\", immutable.style);\n            }\n        });\n    };\n\n    var deletingKey = function(keyCode) {\n        var keys = kendo.keys;\n        return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n    };\n    var updateToolOptions = function(tool) {\n        var options = tool ? tool.options : undefined$1;\n        if (options && options.finder) {\n            options.finder._initOptions({ immutables: true });\n        }\n    };\n\n    var Immutables = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n            this.serializedImmutables = {};\n            this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n\n            var tools = kendo.ui.Editor.defaultTools;\n            updateToolOptions(tools.justifyLeft);\n            updateToolOptions(tools.justifyCenter);\n            updateToolOptions(tools.justifyRight);\n            updateToolOptions(tools.justifyFull);\n        },\n\n        serialize: function(node) {\n            var result = this._toHtml(node),\n                id;\n\n            if (result.indexOf(IMMUTABALE) === -1) {\n                id = this.randomId();\n                result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n            } else {\n                id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n            }\n\n            this.serializedImmutables[id] = node;\n            return result;\n        },\n\n        _toHtml: function(node) {\n            var serialization = this.options.serialization;\n            var serializationType = typeof serialization;\n            var nodeName;\n\n            switch (serializationType) {\n                case \"string\":\n                    return template(serialization)(node);\n                case \"function\":\n                    return serialization(node);\n                default:\n                    nodeName = dom.name(node);\n                    return \"<\" + nodeName + \"></\" + nodeName + \">\";\n            }\n        },\n\n        deserialize: function(node) {\n            var that = this;\n            var deserialization = this.options.deserialization;\n\n            $(IMMUTABALE_MARKER_SELECTOR, node).each(function() {\n                var id = this.getAttribute(IMMUTABALE);\n                var immutable = that.serializedImmutables[id];\n                if (kendo.isFunction(deserialization)) {\n                    deserialization(this, immutable);\n                }\n                $(this).replaceWith(immutable);\n            });\n\n            that.serializedImmutables = {};\n        },\n\n        randomId: function(length) {\n            return randomId(length);\n        },\n\n        keydown: function(e, range) {\n            var isDeleting = deletingKey(e.keyCode);\n            var shouldCancelEvent = (isDeleting && this._cancelDeleting(e, range)) ||\n                (!isDeleting && this._cancelTyping(e, range));\n\n            if (shouldCancelEvent) {\n                e.preventDefault();\n                return true;\n            }\n        },\n\n        _cancelTyping: function(e, range) {\n            var editor = this.editor;\n            var keyboard = editor.keyboard;\n\n            return range.collapsed && !keyboard.typingInProgress &&\n                keyboard.isTypingKey(e) && immutablesContext(range);\n        },\n\n        _cancelDeleting: function(e, range) {\n            var keys = kendo.keys;\n            var backspace = e.keyCode === keys.BACKSPACE;\n            var del = e.keyCode == keys.DELETE;\n\n            if (!backspace && !del) {\n                return false;\n            }\n            var cancelDeleting = false;\n            if (range.collapsed) {\n                if (immutablesContext(range)) {\n                    return true;\n                }\n                var immutable = this.nextImmutable(range, del);\n                if (immutable && backspace) {\n                    var closestSelectionLi = dom.closest(range.commonAncestorContainer, \"li\");\n                    if (closestSelectionLi) {\n                        var closestImmutableLi = dom.closest(immutable, \"li\");\n                        if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                            return cancelDeleting;\n                        }\n                    }\n                }\n                if (immutable && !dom.tableCell(immutable)) {\n                    if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                        while (immutable && immutable.parentNode.childNodes.length == 1) {\n                            immutable = immutable.parentNode;\n                        }\n                        if (dom.tableCell(immutable)) {\n                            return cancelDeleting;\n                        }\n                        this._removeImmutable(immutable, range);\n                    }\n                    cancelDeleting = true;\n                }\n            }\n            return cancelDeleting;\n        },\n\n        nextImmutable: function(range, forwards) {\n            var commonContainer = range.commonAncestorContainer;\n            if (dom.isBom(commonContainer) || ((forwards && RangeUtils.isEndOf(range, commonContainer)) || (!forwards && RangeUtils.isStartOf(range, commonContainer)))) {\n                var next = this._nextNode(commonContainer, forwards);\n                if (next && dom.isBlock(next) && !immutableParent(next)) {\n                    while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                        next = next.children[forwards ? 0 : next.children.length - 1];\n                    }\n                }\n                return immutableParent(next);\n            }\n        },\n\n        _removeImmutable: function(immutable, range) {\n            var editor = this.editor;\n            var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n            dom.remove(immutable);\n            Editor._finishUpdate(editor, startRestorePoint);\n        },\n\n        _nextNode: function(node, forwards) {\n            var sibling = forwards ? \"nextSibling\" : \"previousSibling\";\n            var current = node, next;\n            while (current && !next && !dom.isChildOfBaseContainer(current)) {\n                next = current[sibling];\n                if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                    current = next;\n                    next = current[sibling];\n                }\n                if (!next) {\n                    current = current.parentNode;\n                }\n            }\n            return next;\n        }\n    });\n\n    Immutables.immutable = immutable;\n    Immutables.immutableParent = immutableParent;\n    Immutables.expandImmutablesIn = expandImmutablesIn;\n    Immutables.immutablesContext = immutablesContext;\n    Immutables.toolsToBeUpdated = toolsToBeUpdated;\n    Immutables.removeImmutables = removeImmutables;\n    Immutables.restoreImmutables = restoreImmutables;\n\n    Editor.Immutables = Immutables;\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        extend = $.extend;\n\nfunction finishUpdate(editor, startRestorePoint) {\n    var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n    var command = new GenericCommand(startRestorePoint, endRestorePoint);\n    command.editor = editor;\n\n    editor.undoRedoStack.push(command);\n    editor._refreshTools();\n\n    return endRestorePoint;\n}\n\nvar Command = Class.extend({\n    init: function(options) {\n        this.options = options;\n        this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n        this.marker = new Marker();\n        this.formatter = options.formatter;\n    },\n\n    getRange: function() {\n        return this.restorePoint.toRange();\n    },\n\n    lockRange: function(expand) {\n        return this.marker.add(this.getRange(), expand);\n    },\n\n    releaseRange: function(range) {\n        this.marker.remove(range);\n        this.editor.selectRange(range);\n    },\n\n    undo: function() {\n        var point = this.restorePoint;\n        point.restoreHtml();\n        this.editor.selectRange(point.toRange());\n    },\n\n    redo: function() {\n        this.exec();\n    },\n\n    createDialog: function(content, options) {\n        var editor = this.editor;\n\n        return $(content).appendTo(document.body)\n            .kendoWindow(extend({}, editor.options.dialogOptions, options))\n            .closest(\".k-window\")\n            .addClass(\"k-editor-window\")\n            .toggleClass(\"k-rtl\", kendo.support.isRtl(editor.wrapper)).end();\n    },\n\n    exec: function() {\n        var range = this.lockRange(true);\n        this.formatter.editor = this.editor;\n        this.formatter.toggle(range);\n        this.releaseRange(range);\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    expandImmutablesIn: function(range) {\n        if (this.immutables()) {\n            kendo.ui.editor.Immutables.expandImmutablesIn(range);\n            this.restorePoint = new RestorePoint(range, this.editor.body);\n        }\n    },\n\n    _actionButtonsTemplate: function({ messages, insertButtonIcon, cancelButtonIcon }) {\n        return '<div class=\"k-actions k-actions-start k-actions-horizontal k-window-buttons\">' +\n        kendo.html.renderButton(`<button class=\"k-dialog-insert\">${messages.dialogInsert}</button>`, { themeColor: \"primary\", icon: insertButtonIcon }) +\n        kendo.html.renderButton(`<button class=\"k-dialog-close\">${messages.dialogCancel}</button>`, { icon: cancelButtonIcon }) +\n    '</div>';\n    }\n});\n\nvar GenericCommand = Class.extend({\n    init: function(startRestorePoint, endRestorePoint) {\n        this.body = startRestorePoint.body;\n        this.startRestorePoint = startRestorePoint;\n        this.endRestorePoint = endRestorePoint;\n    },\n\n    redo: function() {\n        dom.removeChildren(this.body);\n\n        this.body.innerHTML = this.endRestorePoint.html;\n        this.editor.selectRange(this.endRestorePoint.toRange());\n    },\n\n    undo: function() {\n        dom.removeChildren(this.body);\n\n        this.body.innerHTML = this.startRestorePoint.html;\n        this.editor.selectRange(this.startRestorePoint.toRange());\n    }\n});\n\nextend(editorNS, {\n    _finishUpdate: finishUpdate,\n    Command: Command,\n    GenericCommand: GenericCommand\n});\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    dom = Editor.Dom;\n\nvar ViewHtmlCommand = Command.extend({\n    init: function(options) {\n        var cmd = this;\n        cmd.options = options;\n        Command.fn.init.call(cmd, options);\n        cmd.attributes = null;\n        cmd.async = true;\n    },\n\n    exec: function() {\n        var that = this,\n            editor = that.editor,\n            options = editor.options,\n            messages = editor.options.messages,\n            dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body),\n            textarea = \".k-editor-textarea > textarea\",\n            content, comments;\n\n        options.serialization.immutables = editor.immutables;\n\n        comments = dom.getAllComments(editor.body);\n\n        content = EditorUtils.cacheComments(editor.value(), comments);\n        content = ViewHtmlCommand.indent(content);\n        content = EditorUtils.retrieveComments(content, comments);\n\n        options.serialization.immutables = undefined$1;\n\n        function apply(e) {\n            options.deserialization.immutables = editor.immutables;\n            editor.value(dialog.find(textarea).val());\n            options.deserialization.immutables = undefined$1;\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n\n            editor.trigger(\"change\");\n        }\n\n        function close(e) {\n            e.preventDefault();\n\n            dialog.data(\"kendoWindow\").destroy();\n\n            if (editor.immutables) {\n                editor.immutables.serializedImmutables = {};\n            }\n\n            editor.focus();\n        }\n\n        let window = this.createDialog(dialog, {\n            title: messages.viewHtml,\n            _footerTemplate: ViewHtmlCommand._footerTemplate,\n            _footerMessages: messages,\n            width: 600,\n            height: 400,\n            resizable: true,\n            close: close,\n            visible: false\n        })\n            .find(textarea).val(content).end()\n            .data(\"kendoWindow\");\n\n            window.center().open();\n\n            window.wrapper.find(\".k-dialog-update\").on(\"click\", apply).end();\n            window.wrapper.find(\".k-dialog-close\").on(\"click\", close).end();\n        dialog.find(textarea).trigger(\"focus\");\n    }\n});\n\nextend(ViewHtmlCommand, {\n    template: () =>\n    '<div class=\"k-editor-dialog k-popup-edit-form k-viewhtml-dialog\">' +\n        '<span class=\"k-input k-textarea k-input-solid k-input-md k-rounded-md k-editor-textarea\"><textarea class=\"k-input-inner !k-overflow-auto !k-resize-none\"></textarea></span>' +\n    '</div>',\n    _footerTemplate: ({ dialogUpdate, dialogCancel }) =>\n    `<div class=\"k-actions k-actions-start k-actions-horizontal k-window-actions\">` +\n        kendo.html.renderButton(`<button class=\"k-dialog-update\">${kendo.htmlEncode(dialogUpdate)}</button>`, { themeColor: \"primary\", icon: \"check\" }) +\n        kendo.html.renderButton(`<button class=\"k-dialog-close\">${kendo.htmlEncode(dialogCancel)}</button>`, { icon: \"cancel-outline\" }) +\n    `</div>`,\n    indent: function(content) {\n        return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/ig, \"</$1>\\n\")\n                      .replace(/<(ul|ol)([^>]*)><li/ig, \"<$1$2>\\n<li\")\n                      .replace(/<br \\/>/ig, \"<br />\\n\")\n                      .replace(/\\n$/, \"\");\n    }\n});\n\nkendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n\nEditor.EditorUtils.registerTool(\"viewHtml\", new Tool({ command: ViewHtmlCommand }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    Command = Editor.Command,\n    EditorUtils = Editor.EditorUtils;\n\nvar FormatCommand = Command.extend({\n    init: function(options) {\n        options.formatter = options.formatter();\n        var finder = options.formatter.finder;\n        if (finder && EditorUtils.formatByName(\"immutable\", finder.format)) {\n            finder._initOptions({ immutables: options.immutables });\n        }\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar FormatTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function(commandArguments) {\n        var that = this;\n\n        return new FormatCommand(extend(commandArguments, {\n            formatter: that.options.formatter\n        }));\n    },\n\n    update: function(ui, nodes) {\n        var isFormatted = this.options.finder.isFormatted(nodes),\n            toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n        if (toolbar && ui.getKendoToggleButton()) {\n            toolbar.toggle(ui, isFormatted);\n        }\n    }\n});\n\n$.extend(Editor, {\n    FormatCommand: FormatCommand,\n    FormatTool: FormatTool\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    Editor = kendo.ui.editor,\n    formats = kendo.ui.Editor.fn.options.formats,\n    Tool = Editor.Tool,\n    FormatTool = Editor.FormatTool,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    extend = $.extend,\n    registerTool = Editor.EditorUtils.registerTool,\n    registerFormat = Editor.EditorUtils.registerFormat,\n    MOUSEDOWN_NS = \"mousedown.kendoEditor\",\n    KEYDOWN_NS = \"keydown.kendoEditor\",\n    KMARKER = \"k-marker\";\n\nvar InlineFormatFinder = Class.extend({\n    init: function(format) {\n        this.format = format;\n    },\n\n    numberOfSiblings: function(referenceNode) {\n        var textNodesCount = 0,\n            elementNodesCount = 0,\n            markerCount = 0,\n            parentNode = referenceNode.parentNode,\n            node;\n\n        for (node = parentNode.firstChild; node; node = node.nextSibling) {\n            if (node != referenceNode) {\n                if (node.className == KMARKER) {\n                    markerCount++;\n                } else if (node.nodeType == 3) {\n                    textNodesCount++;\n                } else {\n                    elementNodesCount++;\n                }\n            }\n        }\n\n        if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n            // full node selection\n            return 0;\n        } else {\n            return elementNodesCount + textNodesCount;\n        }\n    },\n\n    findSuitable: function(sourceNode, skip) {\n        if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n            return null;\n        }\n\n        var node = sourceNode.parentNode;\n        var tags = this.format[0].tags;\n\n        while (!dom.ofType(node, tags)) {\n            if (this.numberOfSiblings(node) > 0) {\n                return null;\n            }\n\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    findFormat: function(sourceNode) {\n        var format = this.format,\n            attrEquals = dom.attrEquals,\n            i, len, node, tags, attributes;\n\n        for (i = 0, len = format.length; i < len; i++) {\n            node = sourceNode;\n            tags = format[i].tags;\n            attributes = format[i].attr;\n\n            if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                return node;\n            }\n\n            while (node) {\n                node = dom.parentOfType(node, tags);\n                if (node && attrEquals(node, attributes)) {\n                    return node;\n                }\n            }\n        }\n\n        return null;\n    },\n\n    isFormatted: function(nodes) {\n        var i, len;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            if (this.findFormat(nodes[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n});\n\nvar InlineFormatter = Class.extend({\n    init: function(format, values) {\n        this.finder = new InlineFormatFinder(format);\n        this.attributes = extend({}, format[0].attr, values);\n        this.tag = format[0].tags[0];\n    },\n\n    wrap: function(node) {\n        return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n    },\n\n    activate: function(range, nodes) {\n        if (this.finder.isFormatted(nodes)) {\n            this.split(range);\n            this.remove(nodes);\n        } else {\n            this.apply(nodes);\n        }\n    },\n\n    toggle: function(range) {\n        var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n        var nodes = textNodes(range);\n\n        if (nodes.length > 0) {\n            this.activate(range, nodes);\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    apply: function(nodes) {\n        var formatNodes = [];\n        var i, l, node, formatNode;\n\n        if (nodes.length > 1) {\n            for (i = 0, l = nodes.length; i < l; i++) {\n                node = nodes[i];\n                formatNode = this.format(node, true);\n                formatNodes.push(formatNode);\n\n            }\n        } else {\n            node = nodes[0];\n            formatNode = this.format(node, false);\n        }\n\n        this.consolidate(formatNodes);\n    },\n\n    format: function(node, outerMostInline) {\n        var formatNode = this.finder.findSuitable(node);\n        var attributes = this.attributes;\n        var styleAttr = attributes ? attributes.style || {} : {};\n\n        if (formatNode) {\n            if (dom.is(formatNode, \"font\")) {\n                if (styleAttr.color) {\n                    formatNode.removeAttribute(\"color\");\n                }\n                if (styleAttr.fontName) {\n                    formatNode.removeAttribute(\"face\");\n                }\n                if (styleAttr.fontSize) {\n                    formatNode.removeAttribute(\"size\");\n                }\n            }\n            dom.attr(formatNode, attributes);\n        } else {\n            while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true' && outerMostInline) {\n                node = node.parentNode;\n            }\n\n            formatNode = this.wrap(node);\n        }\n\n        return formatNode;\n    },\n\n    remove: function(nodes) {\n        var i, l, formatNode;\n\n        for (i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n            if (formatNode) {\n                if (this.attributes && this.attributes.style) {\n                    dom.unstyle(formatNode, this.attributes.style);\n                    if (!formatNode.style.cssText && !formatNode.attributes[\"class\"]) {\n                        dom.unwrap(formatNode);\n                    }\n                } else {\n                    dom.unwrap(formatNode);\n                }\n            }\n        }\n    },\n\n    split: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        var l = nodes.length;\n        var i, formatNode;\n\n        if (l > 0) {\n            for (i = 0; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    RangeUtils.split(range, formatNode, true);\n                }\n            }\n        }\n    },\n\n    consolidate: function(nodes) {\n        var node, last;\n\n        while (nodes.length > 1) {\n            node = nodes.pop();\n            last = nodes[nodes.length - 1];\n\n            if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                last.appendChild(node.previousSibling);\n            }\n\n            if (node.tagName == last.tagName &&\n                node.previousSibling == last &&\n                node.style.cssText == last.style.cssText &&\n                node.className === last.className) {\n\n                while (node.firstChild) {\n                    last.appendChild(node.firstChild);\n                }\n\n                dom.remove(node);\n            }\n        }\n    }\n});\n\nvar GreedyInlineFormatFinder = InlineFormatFinder.extend({\n    init: function(format, greedyProperty, fontAttr) {\n        this.format = format;\n        this.greedyProperty = greedyProperty;\n        this.fontAttr = fontAttr;\n        InlineFormatFinder.fn.init.call(this, format);\n    },\n\n    getInlineCssValue: function(node) {\n        var attributes = node.attributes;\n        var trim = kendo.trim;\n        var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n        var propertyAndValue, property, value;\n\n        if (!attributes) {\n            return;\n        }\n\n        for (i = 0, l = attributes.length; i < l; i++) {\n            attribute = attributes[i];\n            name = attribute.nodeName;\n            attributeValue = attribute.nodeValue;\n\n            if (attribute.specified && name == \"style\") {\n\n                css = trim(attributeValue || node.style.cssText).split(\";\");\n\n                for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                    pair = css[cssIndex];\n                    if (pair.length) {\n                        propertyAndValue = pair.split(\":\");\n                        property = trim(propertyAndValue[0].toLowerCase());\n                        value = trim(propertyAndValue[1]);\n\n                        if (property != this.greedyProperty) {\n                            continue;\n                        }\n\n                        return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n                    }\n                }\n            }\n\n            if (this.fontAttr && attribute.specified && name == this.fontAttr) {\n                property = attribute.nodeValue;\n                value = attribute.nodeValue;\n\n                return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n            }\n        }\n    },\n\n    getFormatInner: function(node) {\n        var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n        var parents = $node.parentsUntil(\"[contentEditable]\").addBack().toArray().reverse();\n        var i, len, value;\n\n        for (i = 0, len = parents.length; i < len; i++) {\n            value = this.greedyProperty == \"className\" ? parents[i].className : this.getInlineCssValue(parents[i]);\n\n            if (value) {\n                return value;\n            }\n        }\n\n        return \"inherit\";\n    },\n\n    getFormat: function(nodes) {\n        var result = this.getFormatInner(nodes[0]), i, len;\n\n        for (i = 1, len = nodes.length; i < len; i++) {\n            if (result != this.getFormatInner(nodes[i])) {\n                return \"\";\n            }\n        }\n\n        return result;\n    },\n\n    isFormatted: function(nodes) {\n        return this.getFormat(nodes) !== \"\";\n    }\n});\n\nvar GreedyInlineFormatter = InlineFormatter.extend({\n    init: function(format, values, greedyProperty) {\n        InlineFormatter.fn.init.call(this, format, values);\n\n        this.values = values;\n        this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n\n        if (greedyProperty) {\n            this.greedyProperty = kendo.toCamelCase(greedyProperty);\n        }\n\n    },\n\n    activate: function(range, nodes) {\n        var greedyProperty = this.greedyProperty;\n        var action = \"apply\";\n\n        this.split(range);\n\n        if (greedyProperty && this.values.style[greedyProperty] == \"inherit\") {\n            action = \"remove\";\n        }\n\n        this[action](nodes);\n    }\n});\n\nvar InlineFormatTool = FormatTool.extend({\n    init: function(options) {\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new InlineFormatFinder(options.format),\n            formatter: function() { return new InlineFormatter(options.format); }\n        }));\n    }\n});\n\nvar DelayedExecutionTool = Tool.extend({\n    update: function(ui, nodes) {\n        var list = ui.data(this.type);\n\n        list.close();\n        list.value(this.finder.getFormat(nodes));\n    }\n});\n\nvar FontTool = DelayedExecutionTool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        // IE has single selection hence we are using select box instead of combobox\n        this.type = \"kendoComboBox\";\n        this.format = [{ tags: [\"span\", \"font\"] }];\n        this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr, options.fontAttr);\n    },\n\n    command: function(commandArguments) {\n        var options = this.options,\n            format = this.format,\n            style = {};\n\n        return new Editor.FormatCommand(extend(commandArguments, {\n            formatter: function() {\n                style[options.domAttr] = commandArguments.value;\n\n                return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n            }\n        }));\n    },\n\n    initialize: function(ui, editor) {\n        var options = this.options,\n            toolName = options.name,\n            dataSource,\n            range,\n            widget = ui.data(\"kendoComboBox\"),\n            defaultValue = [];\n\n        if (!widget) {\n            return;\n        }\n\n        if (options.defaultValue) {\n           defaultValue = [{\n                text: editor.options.messages[options.defaultValue[0].text],\n                value: options.defaultValue[0].value\n           }];\n        }\n\n        dataSource = defaultValue.concat(options.items ? options.items : (editor.options[toolName] || [] ));\n        widget.setDataSource(dataSource);\n\n        widget.bind(\"change\", (e) => {\n            editor._range = range;\n            if (e.sender.value() !== \"\") {\n                Tool.exec(editor, toolName, e.sender.value());\n            }\n        });\n\n        widget.bind(\"close\", () => {\n            setTimeout(function() {\n                editor._deleteSavedRange();\n            },0);\n        });\n\n        widget.value(\"inherit\");\n\n        widget.wrapper.on(MOUSEDOWN_NS, \".k-select,.k-input-button,.k-input\", function() {\n            var newRange = editor.getRange();\n            range = editor._containsRange(newRange) ? newRange : range;\n        })\n        .on(KEYDOWN_NS, function(e) {\n            if (e.keyCode === kendo.keys.ENTER) {\n                editor._deleteSavedRange();\n                e.preventDefault();\n            }\n        });\n    }\n\n});\n\nvar ColorTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        this.format = [{ tags: [\"span\",\"font\"] }];\n        this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n    },\n\n    options: {\n        palette: \"websafe\",\n        columns: 18\n    },\n\n    update: function() {\n        this._widget.close();\n    },\n\n    command: function(commandArguments) {\n        var options = this.options,\n            format = this.format,\n            style = {};\n\n        return new Editor.FormatCommand(extend(commandArguments, {\n            formatter: function() {\n                style[options.domAttr] = commandArguments.value;\n\n                return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n            }\n        }));\n    },\n\n    initialize: function(ui, editor) {\n        var that = this,\n            toolName = that.options.name,\n            component = this._widget = ui.getKendoColorPicker();\n\n        if (!component) {\n            return;\n        }\n\n        component.bind(\"change\", () => {\n            var color = component.value();\n\n            if (color) {\n                Tool.exec(editor, toolName, color);\n            }\n\n            delete that.storedRange;\n            delete that._inputFocused;\n\n            editor.focus();\n        });\n\n        component.bind(\"open\", () => {\n            that.storedRange = editor.getRange();\n\n            component._popup.element.on(MOUSEDOWN_NS, function(e) {\n                if (!$(e.target).is(\"input.k-color-value\")) {\n                    e.preventDefault();\n                }\n            });\n\n            if (!component._popup.element.is(\"[unselectable='on']\")) {\n                component._popup.element\n                    .attr({ unselectable: \"on\" })\n                    .find(\"*:not(input)\").attr(\"unselectable\", \"on\")\n                    .end().find(\"input\").on(\"focus\", function() {\n                        that._inputFocused = true;\n                    });\n            }\n\n            component._popup.one(\"activate\", () => {\n                component._popup.element.find(\".k-colorpalette\").trigger(\"focus\");\n            });\n        });\n\n        component.bind(\"close\", (e) => {\n            component._popup.element.off(MOUSEDOWN_NS);\n        });\n\n        component.unbind(\"activate\").bind(\"activate\", (e) => {\n            if (!component._value || component._value.toCssRgba() === \"rgba(255, 255, 255, 0)\") {\n                return;\n            }\n\n            component.trigger(\"change\");\n        });\n\n        component.wrapper\n            .attr({ unselectable: \"on\" })\n            .find(\"*:not(input)\").attr(\"unselectable\", \"on\");\n\n        component.value(\"transparent\");\n    }\n});\n\nextend(Editor, {\n    InlineFormatFinder: InlineFormatFinder,\n    InlineFormatter: InlineFormatter,\n    DelayedExecutionTool: DelayedExecutionTool,\n    GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n    GreedyInlineFormatter: GreedyInlineFormatter,\n    InlineFormatTool: InlineFormatTool,\n    FontTool: FontTool,\n    ColorTool: ColorTool\n});\n\nregisterFormat(\"bold\", [ { tags: [\"strong\", \"b\"] }, { tags: [\"span\"], attr: { style: { fontWeight: \"bold\" } } } ]);\nregisterTool(\"bold\", new InlineFormatTool({\n    key: \"B\",\n    ctrl: true,\n    format: formats.bold,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterFormat(\"italic\", [ { tags: [\"em\", \"i\"] }, { tags: [\"span\"], attr: { style: { fontStyle: \"italic\" } } } ]);\nregisterTool(\"italic\", new InlineFormatTool({\n    key: \"I\",\n    ctrl: true,\n    format: formats.italic,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterFormat(\"underline\", [ { tags: [\"span\"], attr: { style: { textDecoration: \"underline\" } } }, { tags: [\"u\"] } ]);\nregisterTool(\"underline\", new InlineFormatTool({\n    key: \"U\",\n    ctrl: true,\n    format: formats.underline,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterFormat(\"strikethrough\", [ { tags: [\"del\", \"strike\"] }, { tags: [\"span\"], attr: { style: { textDecoration: \"line-through\" } } } ]);\nregisterTool(\"strikethrough\", new InlineFormatTool({\n    format: formats.strikethrough,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterFormat(\"superscript\", [ { tags: [\"sup\"] } ]);\nregisterTool(\"superscript\", new InlineFormatTool({\n    format: formats.superscript,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterFormat(\"subscript\", [ { tags: [\"sub\"] } ]);\nregisterTool(\"subscript\", new InlineFormatTool({\n    format: formats.subscript,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterTool(\"foreColor\", new ColorTool({\n    cssAttr: \"color\",\n    fontAttr: \"color\",\n    domAttr: \"color\",\n    name: \"foreColor\",\n    ui: {\n        type: \"component\",\n        overflow: \"never\",\n        component: \"ColorPicker\",\n        componentOptions: {\n            views: [\"palette\"],\n            toolIcon: \"foreground-color\",\n            palette: \"websafe\",\n            columns: 18,\n            preview: false,\n            input: false,\n            buttons: false,\n            commandOn: \"change\",\n            closeOnSelect: true\n        }\n    }\n}));\n\nregisterTool(\"backColor\", new ColorTool({\n    cssAttr: \"background-color\",\n    domAttr: \"backgroundColor\",\n    name: \"backColor\",\n    ui: {\n        type: \"component\",\n        overflow: \"never\",\n        component: \"ColorPicker\",\n        componentOptions: {\n            views: [\"palette\"],\n            toolIcon: \"droplet\",\n            palette: \"websafe\",\n            columns: 18,\n            preview: false,\n            input: false,\n            buttons: false,\n            commandOn: \"change\",\n            closeOnSelect: true\n        }\n    }\n}));\n\nregisterTool(\"fontName\", new FontTool({\n    cssAttr: \"font-family\",\n    fontAttr: \"face\",\n    domAttr: \"fontFamily\",\n    name: \"fontName\",\n    defaultValue: [{ text: \"fontNameInherit\", value: \"inherit\" }],\n    ui: {\n        type: \"component\",\n        component: \"ComboBox\",\n        componentOptions: {\n            dataValueField: \"value\",\n            dataTextField: \"text\",\n            valuePrimitive: true\n        },\n        overflow: \"never\"\n    }\n}));\n\nregisterTool(\"fontSize\", new FontTool({\n    cssAttr: \"font-size\",\n    fontAttr: \"size\",\n    domAttr: \"fontSize\",\n    name: \"fontSize\",\n    defaultValue: [{ text: \"fontSizeInherit\", value: \"inherit\" }],\n    ui: {\n        type: \"component\",\n        component: \"ComboBox\",\n        componentOptions: {\n            dataValueField: \"value\",\n            dataTextField: \"text\",\n            valuePrimitive: true\n        },\n        overflow: \"never\"\n    }\n}));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    encode = kendo.htmlEncode,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    InlineFormatter = Editor.InlineFormatter,\n    InlineFormatFinder = Editor.InlineFormatFinder,\n    textNodes = RangeUtils.textNodes,\n    editableTextNodes = RangeUtils.editableTextNodes,\n    registerTool = Editor.EditorUtils.registerTool,\n    keys = kendo.keys;\n\nvar HTTP_PROTOCOL = \"http://\";\nvar protocolRegExp = /^\\w*:\\/\\//;\nvar endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n\nvar LinkFormatFinder = Class.extend({\n    findSuitable: function(sourceNode) {\n        return dom.parentOfType(sourceNode, [\"a\"]);\n    }\n});\n\nvar LinkFormatter = Class.extend({\n    init: function() {\n        this.finder = new LinkFormatFinder();\n    },\n\n    apply: function(range, attributes) {\n        var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n        var markers, doc, formatter, a, parent;\n\n        if (attributes.innerText) {\n            doc = RangeUtils.documentFromRange(range);\n            markers = RangeUtils.getMarkers(range);\n\n            range.deleteContents();\n            a = dom.create(doc, \"a\", attributes);\n            range.insertNode(a);\n\n            parent = a.parentNode;\n            if (dom.name(parent) == \"a\") {\n                dom.insertAfter(a, parent);\n            }\n\n            if (dom.emptyNode(parent)) {\n                dom.remove(parent);\n            }\n\n            // move range and markers after inserted link\n            var ref = a;\n            for (var i = 0; i < markers.length; i++) {\n                dom.insertAfter(markers[i], ref);\n                ref = markers[i];\n            }\n\n            if (markers.length) {\n                dom.insertBefore(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                dom.insertAfter(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                range.setStartBefore(markers[0]);\n                range.setEndAfter(markers[markers.length - 1]);\n            }\n        } else {\n            formatter = new InlineFormatter([{ tags: [\"a\"] }], attributes);\n            formatter.finder = this.finder;\n            formatter.apply(nodes);\n        }\n    }\n});\n\nvar UnlinkCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = /** @ignore */ {\n            toggle: function(range) {\n                var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                new InlineFormatter([{ tags: [\"a\"] }]).remove(nodes);\n            }\n        };\n        this.options = options;\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar LinkCommand = Command.extend({\n    init: function(options) {\n        var that;\n        this.options = options;\n        Command.fn.init.call(this, options);\n        this.formatter = new LinkFormatter();\n\n        if (!options.url) {\n            this.attributes = null;\n            this.async = true;\n        } else {\n            this.exec = function() {\n                this.formatter.immutables = that && that.immutables();\n                this.formatter.apply(options.range, {\n                    href: options.url,\n                    innerText: options.text || options.url,\n                    target: options.target\n                });\n            };\n        }\n    },\n\n    exec: function() {\n        var messages = this.editor.options.messages;\n        this._initialText = \"\";\n        this._range = this.lockRange(true);\n        this.formatter.immutables = this.immutables();\n\n        var nodes = textNodes(this._range);\n        var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n        var img = nodes.length && dom.name(nodes[0]) == \"img\";\n\n        var dialog = this.createDialog(\"<div/>\", {\n            title: messages.createLink,\n            minWidth: 340,\n            close: this._close.bind(this),\n            visible: false\n        }).data(\"kendoWindow\");\n\n        this._form = this._createForm(dialog);\n\n        if (a) {\n            this._range.selectNodeContents(a);\n            nodes = textNodes(this._range);\n        }\n\n        this._initialText = this.linkText(nodes);\n\n        dialog.wrapper\n            .find(\".k-dialog-insert\").on(\"click\", this._apply.bind(this)).end()\n            .find(\".k-dialog-close\").on(\"click\", this._close.bind(this)).end()\n            .find(\".k-form-field input\").on(\"keydown\", this._keydown.bind(this)).end()\n            .find(\"#k-editor-link-url\").val(this.linkUrl(a)).end()\n            .find(\"#k-editor-link-text\").val(this._initialText).end()\n            .find(\"#k-editor-link-title\").val(a ? a.title : \"\").end()\n            .find(\"#k-editor-link-target\").prop(\"checked\", a ? a.target == \"_blank\" : false).end()\n            .find(\".k-editor-link-text-row\").toggle(!img);\n\n        this._dialog = dialog.center().open();\n\n        $(\"#k-editor-link-url\", dialog.element).trigger(\"focus\").select();\n    },\n\n    _createForm: function(dialog) {\n        var that = this;\n        var formElement = $(\"<div/>\").appendTo(dialog.element);\n        var messages = that.editor.options.messages;\n        var form = formElement.kendoForm({\n            renderButtons: false,\n            items: [\n                {\n                    field: \"k-editor-link-url\",\n                    label: encode(messages.linkWebAddress),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-link-text\",\n                    label: encode(messages.linkText),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-link-title\",\n                    label: encode(messages.linkToolTip),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-link-target\",\n                    editorOptions: {\n                        label: encode(messages.linkOpenInNewWindow)\n                    },\n                    label: \"\",\n                    editor: \"CheckBox\"\n                }\n            ]\n        }).data(\"kendoForm\");\n\n        formElement.find(\"#k-editor-link-text\").parents(\".k-form-field\").addClass(\"k-editor-link-text-row\");\n\n        dialog.element.after($(that._actionButtonsTemplate({ messages, insertButtonIcon: \"link\", cancelButtonIcon: \"cancel-outline\" })));\n\n        return form;\n    },\n\n    _keydown: function(e) {\n        var keys = kendo.keys;\n\n        if (e.keyCode == keys.ENTER) {\n            this._apply(e);\n        } else if (e.keyCode == keys.ESC) {\n            this._close(e);\n        }\n    },\n\n    _apply: function(e) {\n        var element = this._dialog.element;\n        var href = $(\"#k-editor-link-url\", element).val();\n        var title, text, target;\n        var textInput = $(\"#k-editor-link-text\", element);\n\n        if (href && href != HTTP_PROTOCOL) {\n\n            if (href.indexOf(\"@\") > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                href = \"mailto:\" + href;\n            }\n\n            this.attributes = { href: href };\n\n            title = $(\"#k-editor-link-title\", element).val();\n            if (title) {\n                this.attributes.title = title;\n            }\n\n            if (textInput.is(\":visible\")) {\n                text = kendo.trim(textInput.val());\n                if (!text && !this._initialText) {\n                    this.attributes.innerText = href;\n                } else if (text && (text !== this._initialText)) {\n                    this.attributes.innerText = dom.stripBom(text);\n                }\n            }\n\n            target = $(\"#k-editor-link-target\", element).is(\":checked\");\n            this.attributes.target = target ? \"_blank\" : null;\n\n            this.formatter.apply(this._range, this.attributes);\n        }\n\n        this._close(e);\n\n        if (this.change) {\n            this.change();\n        }\n    },\n\n    _close: function(e) {\n        e.preventDefault();\n        this._form.destroy();\n        this._dialog.destroy();\n\n        dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n\n        this.releaseRange(this._range);\n    },\n\n    linkUrl: function(anchor) {\n        if (anchor) {\n            // IE < 8 returns absolute url if getAttribute is not used\n            return anchor.getAttribute(\"href\", 2);\n        }\n\n        return HTTP_PROTOCOL;\n    },\n\n    linkText: function(nodes) {\n        var text = \"\";\n        var i;\n\n        for (i = 0; i < nodes.length; i++) {\n            text += nodes[i].nodeValue;\n        }\n\n        return dom.stripBom(text || \"\");\n    },\n\n    redo: function() {\n        var range = this.lockRange(true);\n\n        this.formatter.apply(range, this.attributes);\n        this.releaseRange(range);\n    }\n\n});\n\nvar AutoLinkCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.formatter = new LinkFormatter();\n    },\n\n    exec: function() {\n        var detectedLink = this.detectLink();\n        if (!detectedLink) {\n            return;\n        }\n\n        var range = this.getRange();\n        var linkMarker = new kendo.ui.editor.Marker();\n        var linkRange = range.cloneRange();\n\n        linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n        linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n\n        range = this.lockRange();\n        linkMarker.add(linkRange);\n\n        this.formatter.apply(linkRange, {\n            href: this._ensureWebProtocol(detectedLink.text)\n        });\n\n        linkMarker.remove(linkRange);\n        this.releaseRange(range);\n    },\n\n    detectLink: function() {\n        var range = this.getRange();\n        var startNode = range.startContainer;\n        var startOffset = range.startOffset;\n        var prev = startNode.previousSibling;\n        if (!prev && ((dom.isBom(startNode) && !startNode.nextSibling) || (!startOffset && dom.isDataNode(startNode)))) {\n            startNode = startNode.parentNode;\n            startOffset = 0;\n        }\n        var traverser = new LeftDomTextTraverser({\n            node: startNode,\n            offset: startOffset,\n            cancelAtNode: function(node) { return node && dom.name(node) === \"a\"; }\n        });\n\n        var detection = new DomTextLinkDetection(traverser);\n        return detection.detectLink();\n    },\n\n    changesContent: function() {\n        return !!this.detectLink();\n    },\n\n    _ensureWebProtocol: function(linkText) {\n        var hasProtocol = this._hasProtocolPrefix(linkText);\n        return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n    },\n\n    _hasProtocolPrefix: function(linkText) {\n        return protocolRegExp.test(linkText);\n    },\n\n    _prefixWithWebProtocol: function(linkText) {\n        return HTTP_PROTOCOL + linkText;\n    }\n});\n\nvar UnlinkTool = Tool.extend({\n    init: function(options) {\n        this.options = options;\n        this.finder = new InlineFormatFinder([{ tags: [\"a\"] }]);\n\n        Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n    },\n\n    update: function(ui, nodes) {\n        var isLink = this.finder.isFormatted(nodes),\n            toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\");\n\n        if (isLink) {\n            toolbar.enable(ui, true);\n        } else {\n            toolbar.enable(ui, false);\n        }\n    }\n});\n\nvar DomTextLinkDetection = Class.extend({\n    init: function(traverser) {\n        this.traverser = traverser;\n        this.start = DomPos();\n        this.end = DomPos();\n        this.text = \"\";\n    },\n\n    detectLink: function() {\n        var node = this.traverser.node;\n        var offset = this.traverser.offset;\n        if (dom.isDataNode(node)) {\n            var text = node.data.substring(0, offset);\n            if (/\\s{2}$/.test(dom.stripBom(text))) {\n                return;\n            }\n        } else if (offset === 0) {//heuristic for new line\n            var p = dom.closestEditableOfType(node, dom.blockElements);\n            if (p && p.previousSibling) {\n                this.traverser.init({\n                    node: p.previousSibling\n                });\n            }\n        }\n\n        this.traverser.traverse(this._detectEnd.bind(this));\n        if (!this.end.blank()) {\n            this.traverser = this.traverser.clone(this.end);\n            this.traverser.traverse(this._detectStart.bind(this));\n\n            if (!this._isLinkDetected()) {\n                var puntuationOptions = this.traverser.extendOptions(this.start);\n                var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                puntuationTraverser.traverse(this._skipStartPuntuation.bind(this));\n                if (!this._isLinkDetected()) {\n                    this.start = DomPos();\n                }\n            }\n        }\n\n        if (this.start.blank()) {\n            return null;\n        } else {\n            return {\n                start: this.start,\n                end: this.end,\n                text: this.text\n            };\n        }\n    },\n\n    _isLinkDetected: function() {\n        return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n    },\n\n    _detectEnd: function(text, node) {\n        var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n        if (i > -1) {\n            this.end.node = node;\n            this.end.offset = i + 1;\n\n            return false;\n        }\n    },\n\n    _detectStart: function(text, node) {\n        var i = lastIndexOfRegExp(text, /\\s/);\n        var ii = i + 1;\n        this.text = text.substring(ii) + this.text;\n\n        this.start.node = node;\n        this.start.offset = ii;\n\n        if (i > -1) {\n            return false;\n        }\n    },\n\n    _skipStartPuntuation: function(text, node, offset) {\n        var i = indexOfRegExp(text, /\\w/);\n        var ii = i;\n        if (i === -1) {\n            ii = text.length;\n        }\n\n        this.text = this.text.substring(ii);\n        this.start.node = node;\n        this.start.offset = ii + (offset | 0);\n\n        if (i > -1) {\n            return false;\n        }\n    }\n});\n\nfunction lastIndexOfRegExp(str, search) {\n    var i = str.length;\n    while (i-- && !search.test(str[i])) {}\n\n    return i;\n}\nfunction indexOfRegExp(str, search) {\n    var r = search.exec(str);\n\n    return r ? r.index : -1;\n}\n\nvar DomPos = function() {\n    return {\n        node: null,\n        offset: null,\n        blank: function() {\n            return this.node === null && this.offset === null;\n        }\n    };\n};\n\nvar DomTextTraverser = Class.extend({\n    init: function(options) {\n        this.node = options.node;\n        this.offset = options.offset === undefined$1 ? (dom.isDataNode(this.node) && this.node.length) || 0 : options.offset;\n        this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n    },\n\n    traverse: function(callback) {\n        if (!callback) {\n            return;\n        }\n        this.cancel = false;\n        this._traverse(callback, this.node, this.offset);\n    },\n\n    _traverse: function(callback, node, offset) {\n        if (!node || this.cancel) {\n            return;\n        }\n        if (node.nodeType === 3) {\n            var text = node.data;\n            if (offset !== undefined$1) {\n                text = this.subText(text, offset);\n            }\n            this.cancel = (callback(text, node, offset) === false);\n        }\n        else {\n            var edgeNode = this.edgeNode(node);\n            this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n            return this._traverse(callback, edgeNode);\n        }\n\n        var next = this.next(node);\n        if (!next) {\n            var parent = node.parentNode;\n            while (!next && dom.isInline(parent)) {\n                next = this.next(parent);\n                parent = parent.parentNode;\n            }\n        }\n        this.cancel = this.cancel || this.cancelAtNode(next);\n        this._traverse(callback, next);\n    },\n\n    extendOptions: function(o) {\n        return $.extend({\n            node: this.node,\n            offset: this.offset,\n            cancelAtNode: this.cancelAtNode\n        }, o || {});\n    },\n\n    edgeNode: function(node) {},\n    next: function(node) {},\n    subText: function(text, offset) {}\n\n});\n\nvar LeftDomTextTraverser = DomTextTraverser.extend({\n    subText: function(text, splitIndex) {\n        return text.substring(0, splitIndex);\n    },\n\n    next: function(node) {\n        return node.previousSibling;\n    },\n\n    edgeNode: function(node) {\n        return node.lastChild;\n    },\n\n    clone: function(options) {\n        var o = this.extendOptions(options);\n        return new LeftDomTextTraverser(o);\n    }\n});\n\nvar RightDomTextTraverser = DomTextTraverser.extend({\n    subText: function(text, splitIndex) {\n        return text.substring(splitIndex);\n    },\n\n    next: function(node) {\n        return node.nextSibling;\n    },\n\n    edgeNode: function(node) {\n        return node.firstChild;\n    },\n\n    clone: function(options) {\n        var o = this.extendOptions(options);\n        return new RightDomTextTraverser(o);\n    }\n});\n\nextend(kendo.ui.editor, {\n    LinkFormatFinder: LinkFormatFinder,\n    LinkFormatter: LinkFormatter,\n    UnlinkCommand: UnlinkCommand,\n    LinkCommand: LinkCommand,\n    AutoLinkCommand: AutoLinkCommand,\n    UnlinkTool: UnlinkTool,\n    DomTextLinkDetection: DomTextLinkDetection,\n    LeftDomTextTraverser: LeftDomTextTraverser,\n    RightDomTextTraverser: RightDomTextTraverser\n});\n\nregisterTool(\"createLink\", new Tool({ key: \"K\", ctrl: true, command: LinkCommand }));\nregisterTool(\"unlink\", new UnlinkTool({ key: \"K\", ctrl: true, shift: true, ui: { enable: false } }));\nregisterTool(\"autoLink\", new Tool({ key: [keys.ENTER, keys.SPACEBAR], keyPressCommand: true, command: AutoLinkCommand }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    formats = kendo.ui.Editor.fn.options.formats,\n    dom = Editor.Dom,\n    FormatTool = Editor.FormatTool,\n    EditorUtils = Editor.EditorUtils,\n    registerTool = EditorUtils.registerTool,\n    registerFormat = EditorUtils.registerFormat,\n    RangeUtils = Editor.RangeUtils;\n\nvar BlockFormatFinder = Class.extend({\n    init: function(format) {\n        this.format = format;\n    },\n\n    contains: function(node, children) {\n        var i, len, child;\n\n        for (i = 0, len = children.length; i < len; i++) {\n            child = children[i];\n            if (!child || !dom.isAncestorOrSelf(node, child)) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    findSuitable: function(nodes) {\n        var format = this.format,\n            suitable = [],\n            i, len, candidate;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            for (var f = format.length - 1; f >= 0; f--) {\n                candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                if (candidate) {\n                    break;\n                }\n            }\n\n            if (!candidate || candidate.contentEditable === 'true') {\n                return [];\n            }\n\n            if ($.inArray(candidate, suitable) < 0) {\n                suitable.push(candidate);\n            }\n        }\n\n        this._resolveListsItems(suitable);\n\n        for (i = 0, len = suitable.length; i < len; i++) {\n            if (this.contains(suitable[i], suitable)) {\n                return [suitable[i]];\n            }\n        }\n\n        return suitable;\n    },\n    _resolveListsItems: function(nodes) {\n        var i, node, wrapper;\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            wrapper = dom.is(node, \"li\") ? node : dom.wrapper(node);\n            wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n            if (dom.is(wrapper, \"li\")) {\n                node = nodes[i] = wrapper;\n            }\n        }\n    },\n\n    findFormat: function(sourceNode, until) {\n        var format = this.format,\n            i, len, node, tags, attributes;\n        var editableParent = dom.editableParent(sourceNode);\n        var immutables = this.options && this.options.immutables;\n        var ImmutablesNS = Editor.Immutables;\n\n        for (i = 0, len = format.length; i < len; i++) {\n            node = sourceNode;\n            tags = format[i].tags;\n            attributes = format[i].attr;\n\n            if (immutables && tags && tags[0] == \"immutable\") {\n                var immutable = ImmutablesNS.immutableParent(node);\n                if (immutable && dom.attrEquals(immutable, attributes)) {\n                    return node;\n                }\n            }\n\n            while (node && dom.isAncestorOf(editableParent, node)) {\n                if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                    return node;\n                }\n\n                if (until && until(node)) {\n                    break;\n                }\n\n                node = node.parentNode;\n            }\n        }\n        return null;\n    },\n\n    getFormat: function(nodes) {\n        var that = this,\n            findFormat = function(node) {\n                    return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                },\n            result = findFormat(nodes[0]),\n            i, len;\n\n        if (!result) {\n            return \"\";\n        }\n\n        for (i = 1, len = nodes.length; i < len; i++) {\n            if (result != findFormat(nodes[i])) {\n                return \"\";\n            }\n        }\n\n        return result.nodeName.toLowerCase();\n    },\n\n    isFormatted: function(nodes, until) {\n        for (var i = 0, len = nodes.length; i < len; i++) {\n            if (!this.findFormat(nodes[i], until)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n});\n\nvar BlockFormatter = Class.extend({\n    init: function(format, values) {\n        this.format = format;\n        this.values = values;\n        this.finder = new BlockFormatFinder(format);\n    },\n\n    wrap: function(tag, attributes, nodes) {\n\n        var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n\n        if (dom.isInline(commonAncestor)) {\n            commonAncestor = dom.blockParentOrBody(commonAncestor);\n        }\n\n        var ancestors = dom.significantChildNodes(commonAncestor),\n            position = dom.findNodeIndex(ancestors[0]),\n            wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes),\n            i, ancestor;\n\n        for (i = 0; i < ancestors.length; i++) {\n            ancestor = ancestors[i];\n            if (dom.isBlock(ancestor)) {\n                dom.attr(ancestor, attributes);\n\n                if (wrapper.childNodes.length) {\n                    dom.insertBefore(wrapper, ancestor);\n                    wrapper = wrapper.cloneNode(false);\n                }\n\n                position = dom.findNodeIndex(ancestor) + 1;\n\n                continue;\n            }\n\n            wrapper.appendChild(ancestor);\n        }\n\n        if (wrapper.firstChild) {\n            dom.insertAt(commonAncestor, wrapper, position);\n        }\n    },\n\n    apply: function(nodes) {\n        var format, values = this.values;\n\n        function attributes(format) {\n            return extend({}, format && format.attr, values);\n        }\n\n        this._handleImmutables(nodes, true);\n\n        var images = dom.filter(\"img\", nodes);\n        var imageFormat = EditorUtils.formatByName(\"img\", this.format);\n        var imageAttributes = attributes(imageFormat);\n        $.each(images, function() {\n            dom.attr(this, imageAttributes);\n        });\n\n        // only images were selected, no need to wrap\n        if (images.length == nodes.length) {\n            return;\n        }\n\n        var nonImages = dom.filter(\"img\", nodes, true);\n        var formatNodes = this.finder.findSuitable(nonImages);\n\n        if (formatNodes.length) {\n            for (var i = 0, len = formatNodes.length; i < len; i++) {\n                format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                dom.attr(formatNodes[i], attributes(format));\n            }\n        } else {\n            format = this.format[0];\n            this.wrap(format.tags[0], attributes(format), nonImages);\n        }\n    },\n\n    _handleImmutables: function(nodes, applyFormatting) {\n        if (!this.immutables()) {\n            return;\n        }\n        var immutableFormat = EditorUtils.formatByName(\"immutable\", this.format);\n        if (!immutableFormat) {\n            return;\n        }\n        var ImmutablesNS = Editor.Immutables;\n        var l = nodes.length - 1;\n        for (var i = l; i >= 0; i--) {\n            var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n            if (!immutableParent) {\n                continue;\n            }\n            if (immutableParent !== nodes[i + 1]) {\n                if (applyFormatting) {\n                    dom.attr(immutableParent, immutableFormat.attr);\n                } else {\n                    dom.unstyle(immutableParent, immutableFormat.attr.style);\n                }\n            }\n            nodes.splice(i, 1);\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    remove: function(nodes) {\n        var i, l, formatNode, namedFormat, name;\n\n        this._handleImmutables(nodes, false);\n\n        for (i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n            if (formatNode) {\n                name = dom.name(formatNode);\n                namedFormat = EditorUtils.formatByName(name, this.format);\n                if (namedFormat.attr.style) {\n                    dom.unstyle(formatNode, namedFormat.attr.style);\n                }\n                if (namedFormat.attr.className) {\n                    dom.removeClass(formatNode, namedFormat.attr.className);\n                }\n            }\n        }\n    },\n\n    toggle: function(range) {\n        var that = this,\n            nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n\n        if (that.finder.isFormatted(nodes)) {\n            that.remove(nodes);\n        } else {\n            that.apply(nodes);\n        }\n    }\n});\n\nvar GreedyBlockFormatter = Class.extend({\n    init: function(format, values) {\n        var that = this;\n        that.format = format;\n        that.values = values;\n        that.finder = new BlockFormatFinder(format);\n    },\n\n    apply: function(nodes) {\n        var format = this.format;\n        var blocks = dom.blockParents(nodes);\n        var formatTag = format[0].tags[0];\n        var i, len, list, formatter, range;\n        var element;\n        var tagName;\n        var block;\n        var immutalbeParent;\n\n        if (blocks.length) {\n            for (i = 0, len = blocks.length; i < len; i++) {\n                block = blocks[i];\n                immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n\n                if (!immutalbeParent) {\n                    tagName = dom.name(block);\n\n                    if (tagName == \"li\") {\n                        list = block.parentNode;\n                        formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                        range = this.editor.createRange();\n                        range.selectNode(blocks[i]);\n                        formatter.toggle(range);\n                    } else if (formatTag && (tagName == \"td\" || block.attributes.contentEditable)) {\n                        new BlockFormatter(format, this.values).apply(block.childNodes);\n                    } else {\n                        element = dom.changeTag(block, formatTag);\n                        dom.attr(element, format[0].attr);\n                    }\n                }\n            }\n        } else {\n            var blockFormatter = new BlockFormatter(format, this.values);\n            blockFormatter.editor = this.editor;\n            blockFormatter.apply(nodes);\n        }\n    },\n\n    toggle: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        if (!nodes.length) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                nodes = dom.significantChildNodes(range.commonAncestorContainer);\n            }\n        }\n\n        this.apply(nodes);\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    }\n});\n\nvar BlockFormatTool = FormatTool.extend({ init: function(options) {\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new BlockFormatFinder(options.format),\n            formatter: function() {\n                return new BlockFormatter(options.format);\n            }\n        }));\n    }\n});\n\nextend(Editor, {\n    BlockFormatFinder: BlockFormatFinder,\n    BlockFormatter: BlockFormatter,\n    GreedyBlockFormatter: GreedyBlockFormatter,\n    BlockFormatTool: BlockFormatTool\n});\n\nvar listElements = [\"ul\",\"ol\",\"li\"];\n\nregisterFormat(\"justifyLeft\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"left\" } } },\n    { tags: [\"img\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"left\", listStylePosition: \"\" } } }\n]);\nregisterTool(\"justifyLeft\", new BlockFormatTool({\n    format: formats.justifyLeft,\n    ui: {\n        togglable: true,\n        group: \"align\"\n    }\n}));\n\nregisterFormat(\"justifyCenter\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"center\" } } },\n    { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"center\", listStylePosition: \"inside\" } } }\n]);\nregisterTool(\"justifyCenter\", new BlockFormatTool({\n    format: formats.justifyCenter,\n    ui: {\n        togglable: true,\n        group: \"align\"\n    }\n}));\n\nregisterFormat(\"justifyRight\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"right\" } } },\n    { tags: [\"img\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"right\", listStylePosition: \"inside\" } } }\n]);\nregisterTool(\"justifyRight\", new BlockFormatTool({\n    format: formats.justifyRight,\n    ui: {\n        togglable: true,\n        group: \"align\"\n    }\n}));\n\nregisterFormat(\"justifyFull\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"justify\" } } },\n    { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"justify\", listStylePosition: \"\" } } }\n]);\nregisterTool(\"justifyFull\", new BlockFormatTool({\n    format: formats.justifyFull,\n    ui: {\n        togglable: true,\n        group: \"align\"\n    }\n}));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    FormatTool = Editor.FormatTool,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    textNodes = RangeUtils.textNodes,\n    registerTool = Editor.EditorUtils.registerTool;\n\nvar ListFormatFinder = BlockFormatFinder.extend({\n    init: function(options) {\n        this.tag = options.tag;\n        this.attr = options.attr;\n        this.altAttr = options.altAttr;\n\n        var tags = this.tags = [this.tag == 'ul' ? 'ol' : 'ul', this.tag];\n        var format = [{ tags: tags, attr: this.attr }];\n\n        if (this.altAttr) {\n            format.push({\n                tags: tags,\n                attr: this.altAttr\n            });\n        }\n\n        BlockFormatFinder.fn.init.call(this, format);\n    },\n\n    matchesType: function(node) {\n        return dom.attrEquals(node, this.attr) || (this.altAttr && dom.attrEquals(node, this.altAttr));\n    },\n\n    isList: function(node) {\n        return dom.list(node);\n    },\n\n    isFormatted: function(nodes) {\n        var formatNodes = [];\n        var formatNode, i;\n\n        for (i = 0; i < nodes.length; i++) {\n            formatNode = this.findFormat(nodes[i], this.isList);\n\n            if (formatNode && dom.name(formatNode) == this.tag && this.matchesType(formatNode)) {\n                formatNodes.push(formatNode);\n            }\n        }\n\n        if (formatNodes.length < 1) {\n            return false;\n        }\n\n        if (formatNodes.length != nodes.length) {\n            return false;\n        }\n\n        // check if sequential lists are selected\n        for (i = 0; i < formatNodes.length; i++) {\n            if (formatNodes[i].parentNode != formatNode.parentNode) {\n                break;\n            }\n\n            if (formatNodes[i] != formatNode) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    findSuitable: function(nodes) {\n        var candidate = this.findFormat(nodes[0], this.isList);\n\n        if (candidate && dom.name(candidate) == this.tag) {\n            return candidate;\n        }\n\n        return null;\n    }\n\n});\n\nvar ListFormatter = Class.extend({\n    init: function(options, unwrapTag) {\n        var that = this;\n        options = $.isPlainObject(options) ? options : { tag: options, attr: null };\n        that.tag = options.tag;\n        that.attr = options.attr;\n        that.finder = new ListFormatFinder(options);\n        that.unwrapTag = unwrapTag;\n    },\n\n    isList: function(node) {\n        return dom.list(node);\n    },\n\n    immutables: function() {\n        return this.editor && !!this.editor.options.immutables;\n    },\n\n    wrap: function(list, nodes) {\n        var li = dom.create(list.ownerDocument, \"li\"),\n            i, node,\n            isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n\n            if (dom.is(node, 'li')) {\n                list.appendChild(node);\n                continue;\n            }\n\n            if (this.isList(node)) {\n                while (node.firstChild) {\n                    list.appendChild(node.firstChild);\n                }\n                continue;\n            }\n\n            if (dom.is(node, \"td\")) {\n                while (node.firstChild) {\n                    li.appendChild(node.firstChild);\n                }\n                list.appendChild(li);\n                node.appendChild(list);\n                list = list.cloneNode(false);\n                li = li.cloneNode(false);\n                continue;\n            }\n\n            li.appendChild(node);\n\n            if (dom.isBlock(node)) {\n                list.appendChild(li);\n                if (!isImmutable(node)) {\n                    dom.unwrap(node);\n                }\n                li = li.cloneNode(false);\n            }\n        }\n\n        if (li.firstChild) {\n            list.appendChild(li);\n        }\n    },\n\n    containsAny: function(parent, nodes) {\n        for (var i = 0; i < nodes.length; i++) {\n            if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    suitable: function(candidate, nodes) {\n        if (candidate.className == \"k-marker\") {\n            var sibling = candidate.nextSibling;\n\n            if (sibling && dom.isBlock(sibling)) {\n                return false;\n            }\n\n            sibling = candidate.previousSibling;\n\n            if (sibling && dom.isBlock(sibling)) {\n                return false;\n            }\n        }\n\n        return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n    },\n\n    _parentLists: function(node) {\n        var editable = dom.closestEditable(node);\n\n        return $(node).parentsUntil(editable, \"ul,ol\");\n    },\n\n    split: function(range) {\n        var nodes = textNodes(range);\n        var start, end, parents;\n\n        if (nodes.length) {\n            start = dom.parentOfType(nodes[0], ['li']);\n            end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n            range.setStartBefore(start);\n            range.setEndAfter(end);\n\n            for (var i = 0, l = nodes.length; i < l; i++) {\n                var formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    parents = this._parentLists(formatNode);\n                    if (parents.length) {\n                        RangeUtils.split(range, parents.last()[0], true);\n                    } else {\n                        RangeUtils.split(range, formatNode, true);\n                    }\n                }\n            }\n        }\n    },\n\n    merge: function(tag, formatNode) {\n        var prev = formatNode.previousSibling, next;\n\n        while (prev && (prev.className == \"k-marker\" || (prev.nodeType == 3 && dom.isWhitespace(prev)))) {\n            prev = prev.previousSibling;\n        }\n\n        // merge with previous list\n        if (prev && dom.name(prev) == tag && this.finder.matchesType(prev)) {\n            while (formatNode.firstChild) {\n                prev.appendChild(formatNode.firstChild);\n            }\n            dom.remove(formatNode);\n            formatNode = prev;\n        }\n\n        next = formatNode.nextSibling;\n        while (next && (next.className == \"k-marker\" || (next.nodeType == 3 && dom.isWhitespace(next)))) {\n            next = next.nextSibling;\n        }\n\n        // merge with next list\n        if (next && dom.name(next) == tag && this.finder.matchesType(next)) {\n            while (formatNode.lastChild) {\n                next.insertBefore(formatNode.lastChild, next.firstChild);\n            }\n            dom.remove(formatNode);\n        }\n    },\n\n    breakable: function(node) {\n        return (\n            node != node.ownerDocument.body &&\n            !/table|tbody|thead|tr|td/.test(dom.name(node)) &&\n            !node.attributes.contentEditable\n        );\n    },\n\n    findSuitableNode: function(nodes) {\n        var that = this,\n            finder = that.finder,\n            tag = that.tag,\n            formatNode;\n\n        formatNode = finder.findSuitable(nodes);\n\n        if (!formatNode) {\n            // Find the opposite tag\n            finder = new ListFormatFinder({ tag: tag == \"ul\" ? \"ol\" : \"ul\" });\n            formatNode = finder.findSuitable(nodes);\n        }\n\n        if (!formatNode) {\n            // Find the same tag\n            finder = new ListFormatFinder({ tag: tag });\n            formatNode = finder.findSuitable(nodes);\n            formatNode = formatNode && that.finder.matchesType(formatNode) ? null : formatNode;\n        }\n\n\n        return formatNode;\n    },\n\n    applyOnSection: function(section, nodes) {\n        var tag = this.tag;\n        var attr = this.attr;\n        var commonAncestor = dom.closestSplittableParent(nodes);\n\n        var ancestors = [];\n        var formatNode = this.findSuitableNode(nodes);\n\n        var childNodes;\n\n        if (/table|tbody|thead/.test(dom.name(commonAncestor))) {\n            childNodes = $.map(nodes, function(node) {\n                return dom.parentOfType(node, [\"td\"]);\n            });\n        } else {\n            childNodes = dom.significantChildNodes(commonAncestor);\n\n            if ($.grep(childNodes, dom.isBlock).length) {\n                childNodes = $.grep(childNodes, (function(node) {\n                    return this.containsAny(node, nodes);\n                }).bind(this));\n            }\n\n            if (!childNodes.length) {\n                childNodes = nodes;\n            }\n        }\n\n        function pushAncestor() {\n            ancestors.push(this);\n        }\n\n        for (var i = 0; i < childNodes.length; i++) {\n            var child = childNodes[i];\n            var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n\n            if (!suitable) {\n                continue;\n            }\n\n            if (formatNode && this.isList(child)) {\n                // merging lists\n                $.each(child.children, pushAncestor);\n                dom.remove(child);\n            } else {\n                ancestors.push(child);\n            }\n        }\n\n        if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n            ancestors = [commonAncestor];\n        }\n\n        if (!formatNode) {\n            formatNode = dom.create(commonAncestor.ownerDocument, tag, attr);\n            if (dom.isBlock(ancestors[0])) {\n                dom.mergeAttributes(ancestors[0], formatNode);\n            }\n            dom.insertBefore(formatNode, ancestors[0]);\n        }\n\n        this.wrap(formatNode, ancestors);\n\n        while (dom.isBom(formatNode.nextSibling)) {\n            dom.remove(formatNode.nextSibling);\n        }\n\n        if (!this.finder.matchesType(formatNode)) {\n            formatNode.removeAttribute(\"type\");\n            formatNode.style.listStyleType = \"\";\n            dom.mergeAttributes(dom.create(commonAncestor.ownerDocument, tag, attr), formatNode, true);\n        }\n\n        if (formatNode && formatNode.getAttribute(\"type\") === \"\") {\n            formatNode.removeAttribute(\"type\");\n        }\n\n        if (!dom.is(formatNode, tag)) {\n            dom.changeTag(formatNode, tag);\n        }\n\n        this.merge(tag, formatNode);\n    },\n\n    apply: function(nodes) {\n        var i = 0,\n            sections = [],\n            lastSection,\n            lastNodes,\n            section,\n            node,\n            l = nodes.length,\n            immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n\n        function addLastSection() {\n            if (lastSection) {\n                sections.push({\n                    section: lastSection,\n                    nodes: lastNodes\n                });\n            }\n        }\n\n        // split nodes into sections that need to be different lists\n        for (i = 0; i < l; i++) {\n            node = immutableParent(nodes[i]) || nodes[i];\n            section = dom.closestEditable(node, [\"td\",\"th\",\"body\"]);\n            if (!lastSection || section != lastSection) {\n                addLastSection();\n                lastNodes = [node];\n                lastSection = section;\n            } else {\n                lastNodes.push(node);\n            }\n        }\n\n        addLastSection();\n\n        for (i = 0; i < sections.length; i++) {\n            this.applyOnSection(sections[i].section, sections[i].nodes);\n        }\n    },\n\n    unwrap: function(ul) {\n        var fragment = ul.ownerDocument.createDocumentFragment(),\n            unwrapTag = this.unwrapTag,\n            parents,\n            li,\n            p,\n            child;\n\n        for (li = ul.firstChild; li; li = li.nextSibling) {\n            p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n\n            while (li.firstChild) {\n                child = li.firstChild;\n\n                if (dom.isBlock(child)) {\n\n                    if (p.firstChild) {\n                        fragment.appendChild(p);\n                        p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                    }\n\n                    fragment.appendChild(child);\n                } else {\n                    p.appendChild(child);\n                }\n            }\n\n            if (p.firstChild) {\n                fragment.appendChild(p);\n            }\n        }\n\n        parents = this._parentLists(ul);\n\n        if (parents[0]) {\n            dom.insertAfter(fragment, parents.last()[0]);\n            parents.last().remove();\n        } else {\n            dom.insertAfter(fragment, ul);\n        }\n\n        dom.remove(ul);\n    },\n\n    remove: function(nodes) {\n        var formatNode;\n        for (var i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n\n            if (formatNode) {\n                this.unwrap(formatNode);\n            }\n        }\n    },\n\n    toggle: function(range) {\n        var that = this,\n            nodes = textNodes(range),\n            ancestor = range.commonAncestorContainer;\n\n        if (!nodes.length) {\n            range.selectNodeContents(ancestor);\n            nodes = textNodes(range);\n            if (!nodes.length) {\n                var text = ancestor.ownerDocument.createTextNode(\"\");\n                range.startContainer.appendChild(text);\n                nodes = [text];\n                range.selectNode(text.parentNode);\n            }\n        }\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        if (that.finder.isFormatted(nodes)) {\n            that.split(range);\n            that.remove(nodes);\n        } else {\n            that.apply(nodes);\n        }\n    }\n\n});\n\nvar ListCommand = Command.extend({\n    init: function(options) {\n        options.formatter = new ListFormatter({ tag: options.tag, attr: options.attr });\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar ListTool = FormatTool.extend({\n    init: function(options) {\n        this.options = options;\n\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new ListFormatFinder(options)\n        }));\n    },\n\n    command: function(commandArguments) {\n        return new ListCommand(extend(commandArguments, { tag: this.options.tag, attr: this.options.attr }));\n    }\n});\n\nextend(Editor, {\n    ListFormatFinder: ListFormatFinder,\n    ListFormatter: ListFormatter,\n    ListCommand: ListCommand,\n    ListTool: ListTool\n});\n\nregisterTool(\"insertUnorderedList\", new ListTool({ tag: 'ul', attr: { style: { listStyleType: \"\" }, type: \"\" }, ui: { togglable: true, group: \"lists\" } }));\nregisterTool(\"insertOrderedList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"\" }, type: \"\" }, ui: { togglable: true, group: \"lists\" } }));\nregisterTool(\"insertUpperRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"upper-roman\" } }, altAttr: { type: \"I\" }, ui: { togglable: true, group: \"lists\" } }));\nregisterTool(\"insertLowerRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"lower-roman\" } }, altAttr: { type: \"i\" }, ui: { togglable: true, group: \"lists\" } }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    DelayedExecutionTool = Editor.DelayedExecutionTool,\n    Command = Editor.Command,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    registerTool = EditorUtils.registerTool;\n\n\nvar FormattingTool = DelayedExecutionTool.extend({\n    init: function(options) {\n        var that = this;\n        Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n\n        that.type = \"kendoDropDownList\";\n\n        that.finder = {\n            getFormat: function() { return \"\"; }\n        };\n    },\n\n    options: {\n        items: [\n            { text: \"Paragraph\", value: \"p\" },\n            { text: \"Quotation\", value: \"blockquote\" },\n            { text: \"Heading 1\", value: \"h1\" },\n            { text: \"Heading 2\", value: \"h2\" },\n            { text: \"Heading 3\", value: \"h3\" },\n            { text: \"Heading 4\", value: \"h4\" },\n            { text: \"Heading 5\", value: \"h5\" },\n            { text: \"Heading 6\", value: \"h6\" }\n        ],\n        width: 110\n    },\n\n    toFormattingItem: function(item) {\n        var value = item.value;\n\n        if (!value) {\n            return item;\n        }\n\n        if (item.tag || item.className) {\n            return item;\n        }\n\n        var dot = value.indexOf(\".\");\n\n        if (dot === 0) {\n            item.className = value.substring(1);\n        } else if (dot == -1) {\n            item.tag = value;\n        } else {\n            item.tag = value.substring(0, dot);\n            item.className = value.substring(dot + 1);\n        }\n\n        return item;\n    },\n\n    command: function(args) {\n        var that = this;\n        var item = args.value;\n\n        item = this.toFormattingItem(item);\n\n        return new Editor.FormatCommand({\n            range: args.range,\n            formatter: function() {\n                var formatter,\n                    tags = (item.tag || item.context || \"span\").split(\",\"),\n                    format = [{\n                        tags: tags,\n                        attr: { className: item.className || \"\" }\n                    }];\n\n                if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                    formatter = new Editor.GreedyInlineFormatter(format);\n                } else {\n                    formatter = new Editor.GreedyBlockFormatter(format);\n                }\n\n                formatter.editor = that.editor;\n                return formatter;\n            }\n        });\n    },\n\n    decorate: function(body) {\n        var component = this.component,\n            dataSource = component.dataSource,\n            items = dataSource.data(),\n            i, tag, className, style;\n\n        if (body) {\n            component.list.css(\"background-color\", dom.getEffectiveBackground($(body)));\n        }\n\n        if (this.component && this.component.options && this.component.options.unsafeInline !== false) {\n            for (i = 0; i < items.length; i++) {\n                tag = items[i].tag || \"span\";\n                className = items[i].className;\n\n                style = dom.inlineStyle(body, tag, { className: className });\n\n                style = style.replace(/\"/g, \"'\");\n\n                items[i].style = style + \";display:inline-block\";\n            }\n        }\n\n        dataSource.trigger(\"change\");\n    },\n\n    initialize: function(ui, editor) {\n        var options = this.options;\n        var toolName = options.name;\n        var that = this;\n        var component = ui.getKendoDropDownList();\n\n        if (!component) {\n            return;\n        }\n\n        that.editor = editor;\n        that.component = component;\n\n        // must be moved to themes\n        ui.closest(\".k-dropdownlist\").width(options.width);\n\n        component.setOptions({\n            optionLabel: editor.options.messages.formatting,\n            change: () => {\n                var dataItem = component.dataItem();\n\n                if (dataItem) {\n                    Tool.exec(editor, toolName, dataItem.toJSON());\n                }\n            },\n            dataBound: function() {\n                var i, items = component.dataSource.data(),\n                    optionLabel = component.list.parent().find(\".k-list-optionlabel\");\n\n                for (i = 0; i < items.length; i++) {\n                    items[i] = that.toFormattingItem(items[i]);\n                }\n\n                if (optionLabel.length) {\n                    optionLabel.remove();\n                }\n            }\n        });\n    },\n\n    getFormattingValue: function(items, nodes) {\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            var tag = item.tag || item.context || \"\";\n            var className = item.className ? \".\" + item.className : \"\";\n            var selector = tag + className;\n\n            var element = $(nodes[0]).closest(selector)[0];\n\n            if (!element) {\n                continue;\n            }\n\n            if (nodes.length == 1) {\n                return item.value;\n            }\n\n            for (var n = 1; n < nodes.length; n++) {\n                if (!$(nodes[n]).closest(selector)[0]) {\n                    break;\n                } else if (n == nodes.length - 1) {\n                    return item.value;\n                }\n            }\n        }\n\n        return \"\";\n    },\n\n    update: function(ui, nodes) {\n        var selectBox = $(ui).data(this.type);\n        // necessary until formatBlock is deleted\n        if (!selectBox) {\n            return;\n        }\n\n        var dataSource = selectBox.dataSource,\n            items = dataSource.data(),\n            i, context,\n            ancestor = dom.commonAncestor.apply(null, nodes);\n\n        if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n            return;\n        } else {\n            this._ancestor = ancestor;\n        }\n\n        for (i = 0; i < items.length; i++) {\n            context = items[i].context;\n\n            items[i].visible = !context || !!$(ancestor).closest(context).length;\n        }\n\n        dataSource.filter([{ field: \"visible\", operator: \"eq\", value: true }]);\n\n        DelayedExecutionTool.fn.update.call(this, ui, nodes);\n\n        selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n\n        selectBox.wrapper.toggleClass(\"k-disabled\", !dataSource.view().length);\n    },\n\n    destroy: function() {\n        this._ancestor = null;\n    }\n});\n\nvar CleanFormatCommand = Command.extend({\n    exec: function() {\n        var range = this.lockRange(true);\n        this.tagsToClean = this.options.remove || \"strong,em,span,sup,sub,del,b,i,u,font\".split(\",\");\n\n        RangeUtils.wrapSelectedElements(range);\n\n        var nodes = RangeUtils.mapAll(range, function(node) {\n            return node;\n        });\n\n\n        for (var c = nodes.length - 1; c >= 0; c--) {\n            var node = nodes[c];\n            if (!this.immutableParent(node)) {\n                this.clean(node);\n            }\n        }\n\n        this.releaseRange(range);\n    },\n\n    clean: function(node) {\n        if (!node || dom.isMarker(node)) {\n            return;\n        }\n\n        var name = dom.name(node);\n\n        if (name == \"ul\" || name == \"ol\") {\n            var listFormatter = new Editor.ListFormatter(name);\n            var prev = node.previousSibling;\n            var next = node.nextSibling;\n\n            listFormatter.unwrap(node);\n\n            // clean contents\n            for (; prev && prev != next; prev = prev.nextSibling) {\n                this.clean(prev);\n            }\n        } else if (name == \"blockquote\") {\n            dom.changeTag(node, \"p\");\n        } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n            for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                this.clean(node.childNodes[i]);\n            }\n\n            node.removeAttribute(\"style\");\n            node.removeAttribute(\"class\");\n        } else {\n            unwrapListItem(node);\n        }\n\n        if ($.inArray(name, this.tagsToClean) > -1) {\n            dom.unwrap(node);\n        }\n    },\n\n    immutableParent: function(node) {\n        return this.immutables() && Editor.Immutables.immutableParent(node);\n    }\n});\n\n\nfunction unwrapListItem(node) {\n    var li = dom.closestEditableOfType(node, [\"li\"]);\n    if (li) {\n        var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n        var range = kendo.ui.editor.W3CRange.fromNode(node);\n        range.selectNode(li);\n        listFormatter.toggle(range);\n    }\n}\n\n$.extend(Editor, {\n    FormattingTool: FormattingTool,\n    CleanFormatCommand: CleanFormatCommand\n});\n\nregisterTool(\"formatting\", new FormattingTool({\n    ui: {\n        type: \"component\",\n        component: \"DropDownList\",\n        componentOptions: {\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            highlightFirst: false,\n            autoWidth: true,\n            template: kendo.template(\n                (data) => `<span unselectable=\"on\" ${data.style ? `class=\"k-d-block\" style=\"display:block;${data.style || \"\"}` : \"\"}\">${kendo.htmlEncode(data.text)}</span>`\n            )\n        },\n        overflow: \"never\"\n    }\n}));\n\nregisterTool(\"cleanFormatting\", new Tool({ command: CleanFormatCommand }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    encode = kendo.htmlEncode,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    keys = kendo.keys,\n    KEDITORIMAGEURL = \"#k-editor-image-url\",\n    KEDITORIMAGETITLE = \"#k-editor-image-title\",\n    KEDITORIMAGEWIDTH = \"#k-editor-image-width\",\n    KEDITORIMAGEHEIGHT = \"#k-editor-image-height\";\n\nvar ImageCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        Command.fn.init.call(that, options);\n\n        that.async = true;\n        that.attributes = {};\n    },\n\n    insertImage: function(img, range) {\n        var attributes = this.attributes;\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (attributes.src && attributes.src != \"http://\") {\n\n            var removeIEAttributes = function() {\n                setTimeout(function() {\n                    if (!attributes.width) {\n                        img.removeAttribute(\"width\");\n                    }\n\n                    if (!attributes.height) {\n                        img.removeAttribute(\"height\");\n                    }\n\n                    img.removeAttribute(\"complete\");\n                });\n            };\n\n            if (!img) {\n                img = dom.create(doc, \"img\", attributes);\n                img.onload = img.onerror = removeIEAttributes;\n\n                range.deleteContents();\n                range.insertNode(img);\n\n                if (!img.nextSibling) {\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), img);\n                }\n\n                removeIEAttributes();\n\n                range.setStartAfter(img);\n                range.setEndAfter(img);\n                RangeUtils.selectRange(range);\n                return true;\n            } else {\n                img.onload = img.onerror = removeIEAttributes;\n                dom.attr(img, attributes);\n                removeIEAttributes();\n            }\n        }\n\n        return false;\n    },\n\n    redo: function() {\n        var that = this,\n            range = that.lockRange();\n\n        if (!that.insertImage(RangeUtils.image(range), range)) {\n            that.releaseRange(range);\n        }\n    },\n\n    exec: function() {\n        var that = this,\n            range = that.lockRange(),\n            applied = false,\n            img = RangeUtils.image(range),\n            imageWidth = img && img.getAttribute(\"width\") || \"\",\n            imageHeight = img && img.getAttribute(\"height\") || \"\",\n            dialog,\n            form,\n            isIE = kendo.support.browser.msie,\n            options = that.editor.options,\n            messages = options.messages,\n            imageBrowser = options.imageBrowser,\n            showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined$1),\n            dialogOptions = {\n                title: messages.insertImage,\n                visible: false,\n                resizable: showBrowser\n            };\n\n        this.expandImmutablesIn(range);\n\n        function apply(e) {\n            var element = dialog.element,\n                w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10),\n                h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n\n            that.attributes = {\n                src: element.find(KEDITORIMAGEURL).val().replace(/ /g, \"%20\"),\n                alt: element.find(KEDITORIMAGETITLE).val()\n            };\n\n            that.attributes.width = null;\n            that.attributes.height = null;\n\n            if (!isNaN(w) && w > 0) {\n                that.attributes.width = w;\n            }\n\n            if (!isNaN(h) && h > 0) {\n                that.attributes.height = h;\n            }\n\n            applied = that.insertImage(img, range);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n        }\n\n        function close(e) {\n            e.preventDefault();\n            form.destroy();\n            dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n            if (!applied) {\n                that.releaseRange(range);\n            }\n        }\n\n        function keyDown(e) {\n            if (e.keyCode == keys.ENTER) {\n                apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                close(e);\n            }\n        }\n\n        dialogOptions.close = close;\n\n        if (showBrowser) {\n            dialogOptions.width = 750;\n        }\n        dialogOptions.minWidth = 350;\n\n        dialog = this.createDialog(\"<div/>\", dialogOptions).data(\"kendoWindow\");\n\n        form = that._createForm(dialog, showBrowser);\n\n        dialog.element.toggleClass(\"k-filebrowser-dialog\", showBrowser);\n        dialog.wrapper\n        .find(\".k-dialog-insert\").on(\"click\", apply).end()\n        .find(\".k-dialog-close\").on(\"click\", close).end()\n        .find(\".k-form-field input\").on(\"keydown\", keyDown).end()\n        // IE < 8 returns absolute url if getAttribute is not used\n        .find(KEDITORIMAGEURL).val(img ? img.getAttribute(\"src\", 2) : \"http://\").end()\n        .find(KEDITORIMAGETITLE).val(img ? img.alt : \"\").end()\n        .find(KEDITORIMAGEWIDTH).val(imageWidth).end()\n        .find(KEDITORIMAGEHEIGHT).val(imageHeight).end();\n\n        var element = dialog.element;\n        if (showBrowser) {\n            this._imageBrowser = new kendo.ui.ImageBrowser(\n                element.find(\".k-imagebrowser\"),\n                extend({}, imageBrowser)\n            );\n\n            this._imageBrowser.bind(\"change\", function(ev) {\n                if (ev.selected.get(\"type\") === \"f\") {\n                    element.find(KEDITORIMAGEURL).val(this.value());\n                }\n            });\n\n            this._imageBrowser.bind(\"apply\", apply);\n        }\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n        dialog.center().open();\n        element.find(KEDITORIMAGEURL).trigger(\"focus\").select();\n    },\n\n    _createForm: function(dialog, showBrowser) {\n        var that = this;\n        var formElement = $(\"<div/>\").appendTo(dialog.element);\n        var messages = that.editor.options.messages;\n        var form = formElement.kendoForm({\n            renderButtons: false,\n            items: [\n                {\n                    field: \"k-editor-image-url\",\n                    label: encode(messages.imageWebAddress),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-image-title\",\n                    label: encode(messages.imageAltText),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-image-width\",\n                    label: encode(messages.imageWidth),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-image-height\",\n                    label: encode(messages.imageHeight),\n                    editor: \"TextBox\"\n                }\n            ]\n        }).data(\"kendoForm\");\n\n        if (showBrowser) {\n            formElement.prepend($('<div class=\"k-filebrowser k-imagebrowser\"></div>'));\n        }\n\n        dialog.element.after($(that._actionButtonsTemplate({ messages, insertButtonIcon: \"image-add\", cancelButtonIcon: \"cancel-outline\" })));\n\n        return form;\n    }\n\n});\n\nkendo.ui.editor.ImageCommand = ImageCommand;\n\nregisterTool(\"insertImage\", new Editor.Tool({ command: ImageCommand }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    registerTool = EditorUtils.registerTool,\n    loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n\nvar ImportCommand = Command.extend({\n    exec: function() {\n        (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n    },\n\n    _initializeUploadWidget: function() {\n        var cmd = this;\n        var editor = cmd.editor;\n        var importOptions = editor.options[\"import\"];\n        var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n            success: cmd._onUploadSuccess.bind(cmd),\n            progress: cmd._onUploadProgress.bind(cmd),\n            select: cmd._onUploadSelect.bind(cmd),\n            error: cmd._onUploadError.bind(cmd),\n            complete: cmd._onUploadComplete.bind(cmd),\n            showFileList: false,\n            multiple: false,\n            async: {\n                saveUrl: importOptions.proxyURL,\n                autoUpload: true,\n                saveField: \"file\"\n            },\n            validation: {\n                allowedExtensions: importOptions.allowedExtensions,\n                maxFileSize: importOptions.maxFileSize\n            }\n        }).getKendoUpload();\n\n        editor._uploadWidget = upload;\n\n        return upload;\n    },\n    _onUploadComplete: function(ev) {\n        this._trigger(\"complete\", ev);\n        ev.sender.clearAllFiles();\n\n        this._removeLoadingOverlay();\n    },\n    _onUploadSuccess: function(ev) {\n        this.editor.value(ev.response.html.replace(/<\\/?body>/ig, \"\"));\n        this._trigger(\"success\", ev);\n    },\n    _onUploadProgress: function(ev) {\n        this._trigger(\"progress\", ev);\n    },\n    _onUploadSelect: function(ev) {\n        this._trigger(\"select\", ev);\n        if (!ev.files[0].validationErrors) {\n            this._initLoadingOverlay();\n        }\n    },\n    _onUploadError: function(ev) {\n        this._trigger(\"error\", ev);\n    },\n\n    _trigger: function(eventType, uploadEvent) {\n        var editor = this.editor;\n        var importOptions = editor.options[\"import\"];\n        if (typeof importOptions[eventType] === \"function\") {\n            importOptions[eventType].call(editor, uploadEvent);\n        }\n    },\n\n    _initLoadingOverlay: function() {\n        var editable = this.editor.body;\n        if (Editor.Dom.is(editable, \"body\")) {\n            this._iframeWrapper = this._container =\n                this.editor.wrapper.find(\"iframe\").parent()\n                .css({ position: \"relative\" }).append(loadingOverlay);\n        } else {\n            this._container = $(editable).append(loadingOverlay);\n        }\n\n        kendo.ui.progress(this._container, true);\n    },\n\n    _removeLoadingOverlay: function() {\n        kendo.ui.progress(this._container, false);\n        $(this._iframeWrapper).css({\n            position: \"\"\n        });\n\n        delete this._container;\n        delete this._iframeWrapper;\n    }\n});\n\nextend(Editor, {\n    ImportCommand: ImportCommand\n});\n\nregisterTool(\"import\", new Tool({\n    command: ImportCommand,\n    ui: {\n        showText: \"both\"\n    }\n}));\n\n}(window.kendo.jQuery));\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        GenericCommand = editorNS.GenericCommand,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        RestorePoint = editorNS.RestorePoint,\n        extend = $.extend;\n\nvar InsertHtmlCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.managesUndoRedo = true;\n    },\n\n    exec: function() {\n        var editor = this.editor;\n        var options = this.options;\n        var range = options.range;\n        var body = editor.body;\n        var startRestorePoint = new RestorePoint(range, body);\n        var html = options.html || options.value || '';\n\n        editor.selectRange(range);\n\n        editor.clipboard.paste(html, options);\n\n        if (options.postProcess) {\n            options.postProcess(editor, editor.getRange());\n        }\n\n        var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n        genericCommand.editor = editor;\n        editor.undoRedoStack.push(genericCommand);\n\n        editor.focus();\n    }\n});\n\nvar InsertHtmlTool = Tool.extend({\n    initialize: function(ui, editor) {\n        var options = this.options,\n            dataSource = options.items ? options.items : editor.options.insertHtml,\n            component = ui.getKendoDropDownList();\n\n        if (!component) {\n            return;\n        }\n\n        component.one(\"open\", () => {\n            var optionLabel = component.list.parent().find(\".k-list-optionlabel\");\n\n            if (optionLabel.length) {\n                optionLabel.remove();\n            }\n        });\n\n        component.setOptions({\n            dataSource: dataSource,\n            optionLabel: editor.options.messages.insertHtml\n        });\n        component.bind(\"change\", () => {\n            Tool.exec(editor, 'insertHtml', component.value());\n        });\n    },\n\n    command: function(commandArguments) {\n        return new InsertHtmlCommand(commandArguments);\n    },\n\n    update: function(ui) {\n        var component = ui.data(\"kendoDropDownList\");\n        component.close();\n        component.value(null);\n    }\n});\n\nextend(editorNS, {\n    InsertHtmlCommand: InsertHtmlCommand,\n    InsertHtmlTool: InsertHtmlTool\n});\n\nregisterTool(\"insertHtml\", new InsertHtmlTool({\n    ui: {\n        initialValue: \"Insert HTML\",\n        type: \"component\",\n        component: \"DropDownList\",\n        componentOptions: {\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            autoSize: true,\n            highlightFirst: false\n        },\n        overflow: \"never\"\n    }\n}));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    registerTool = EditorUtils.registerTool,\n    defaultExportAsItems = [\n        { text: 'Docx', value: 'docx' },\n        { text: 'Rtf', value: 'rtf' },\n        { text: 'Pdf', value: 'pdf' },\n        { text: 'Html', value: 'html' },\n        { text: 'Plain Text', value: 'txt' }\n    ];\n\nvar ExportAsCommand = Command.extend({\n    init: function(options) {\n        var cmd = this;\n        cmd.options = options;\n        Command.fn.init.call(cmd, options);\n        cmd.attributes = null;\n        cmd.exportType = options.exportType;\n    },\n\n    exec: function() {\n        var cmd = this;\n        var range = this.lockRange(true);\n        cmd.postToProxy();\n        cmd.releaseRange(range);\n    },\n\n    postToProxy: function() {\n        this.generateForm().appendTo('body').submit().remove();\n    },\n\n    generateForm: function() {\n        var cmd = this;\n        var exportAsOptions = cmd.editor.options.exportAs;\n        var form = $('<form>').attr({\n            action: exportAsOptions && exportAsOptions.proxyURL || \"\",\n            method: 'POST'\n        });\n\n        form.append([\n            cmd.valueInput(),\n            cmd.exportTypeInput(),\n            cmd.fileNameInput(),\n            cmd.antiForgeryInput()\n        ]);\n\n        return form;\n    },\n\n    valueInput: function() {\n        var editor = this.editor;\n        return $('<input>').attr({\n            value: editor.encodedValue(),\n            name: 'value',\n            type: 'hidden'\n        });\n    },\n\n    exportTypeInput: function() {\n        var cmd = this;\n        return $('<input>').attr({\n            value: cmd.exportType,\n            name: 'exportType',\n            type: 'hidden'\n        });\n\n    },\n\n    fileNameInput: function() {\n        var editor = this.editor;\n        var exportAsOptions = editor.options.exportAs;\n        var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr(\"id\") || \"editor\";\n        return $('<input>').attr({\n            value: fileName,\n            name: 'fileName',\n            type: 'hidden'\n        });\n    },\n\n    antiForgeryInput: function() {\n        var csrf_param = $(\"meta[name=csrf-param],meta[name=_csrf_header]\").attr(\"content\");\n\n        return $(\"input[name^='__RequestVerificationToken']\").clone()\n                    .add($(\"input[name^='\" + csrf_param + \"']\").clone());\n    }\n});\n\nvar ExportAsTool = Tool.extend({\n    init: function(options) {\n        var tool = this;\n        Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n        tool.type = 'kendoDropDownList';\n    },\n\n    options: {\n        items: defaultExportAsItems\n    },\n\n    command: function(args) {\n        var value = args.value;\n        return new Editor.ExportAsCommand({\n            range: args.range,\n            exportType: value.exportType\n        });\n    },\n\n    initialize: function(ui, editor) {\n        var tool = this,\n            component = ui.getKendoDropDownList();\n\n        tool.editor = editor;\n\n        component.bind(\"change\", this.changeHandler.bind(this));\n    },\n\n    changeHandler: function(e) {\n        this._exec(e.sender.value());\n        e.sender.value(null);\n        e.sender.wrapper.find(\".k-export-tool-text\").text(kendo.htmlEncode(this.editor.options.messages.exportAs));\n    },\n\n    update: function(ui, editor) {\n        var component = ui.data(\"kendoDropDownList\");\n\n        component.close();\n        component.value(null);\n        ui.closest(\".k-dropdownlist\").find(\".k-export-tool-text\").text(kendo.htmlEncode(this.editor.options.messages.exportAs));\n    },\n\n    _exec: function(value) {\n        if (value) {\n            Tool.exec(this.editor, this.options.name, { exportType: value } );\n        }\n    },\n\n    destroy: function() {\n        this._ancestor = null;\n    }\n});\n\nextend(Editor, {\n    ExportAsTool: ExportAsTool,\n    ExportAsCommand: ExportAsCommand\n});\n\nregisterTool('exportAs', new ExportAsTool({\n    ui: {\n        type: \"component\",\n        overflow: \"never\",\n        component: \"DropDownList\",\n        componentOptions: {\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            valuePrimitive: true,\n            value: null,\n            width: \"140px\",\n            highlightFirst: false,\n            autoWidth: true,\n            itemTemplate: (data) => `<span class=\\\"k-link k-menu-link\\\" data-value=\\\"${data.value}\\\">${data.text}</strong></span>`,\n            icon: \"export\",\n            valueTemplate: () => `<span class=\"k-editor-export\">${kendo.ui.icon({ icon: \"export\", iconClass: \"k-button-icon\" })}<span class=\"k-export-tool-text\"></span></span>`\n        }\n    }\n}));\n\n}(window.kendo.jQuery));\n\n(function($, undefined$1) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    registerTool = EditorUtils.registerTool,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    RangeUtils = Editor.RangeUtils,\n    blockElements = dom.blockElements,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    BlockFormatter = Editor.BlockFormatter;\n\nfunction indent(node, value) {\n    var isRtl = $(node).css(\"direction\") == \"rtl\",\n        indentDirection = isRtl ? \"Right\" : \"Left\",\n        property = dom.name(node) != \"td\" ? \"margin\" + indentDirection : \"padding\" + indentDirection;\n    if (value === undefined$1) {\n        return node.style[property] || 0;\n    } else {\n        if (value > 0) {\n            node.style[property] = value + \"px\";\n        } else {\n            node.style[property] = \"\";\n\n            if (!node.style.cssText) {\n                node.removeAttribute(\"style\");\n            }\n        }\n    }\n}\n\nvar IndentFormatter = Class.extend({\n    init: function() {\n        this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n    },\n\n    apply: function(nodes) {\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        var formatNodes = this.finder.findSuitable(nodes),\n            targets = [],\n            i, len, formatNode, parentList, sibling;\n\n        formatNodes = this.mapImmutables(formatNodes);\n\n        if (formatNodes.length) {\n            for (i = 0, len = formatNodes.length; i < len; i++) {\n                if (dom.is(formatNodes[i], \"li\")) {\n                    if (!$(formatNodes[i]).index()) {\n                        targets.push(formatNodes[i].parentNode);\n                    } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                        targets.push(formatNodes[i]);\n                    }\n                } else {\n                    targets.push(formatNodes[i]);\n                }\n            }\n\n            while (targets.length) {\n                formatNode = targets.shift();\n                if (dom.is(formatNode, \"li\")) {\n                    parentList = formatNode.parentNode;\n                    sibling = $(formatNode).prev(\"li\");\n                    var siblingList = sibling.find(\"ul,ol\").last();\n\n                    var nestedList = $(formatNode).children(\"ul,ol\")[0];\n\n                    if (nestedList && sibling[0]) {\n                        if (siblingList[0]) {\n                           siblingList.append(formatNode);\n                           siblingList.append($(nestedList).children());\n                           dom.remove(nestedList);\n                        } else {\n                            sibling.append(nestedList);\n                            nestedList.insertBefore(formatNode, nestedList.firstChild);\n                        }\n                    } else {\n                        nestedList = sibling.children(\"ul,ol\")[0];\n                        if (!nestedList) {\n                            nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList), this.getListTypeAttr(parentList));\n                            sibling.append(nestedList);\n                        }\n\n                        while (formatNode && formatNode.parentNode == parentList) {\n                            nestedList.appendChild(formatNode);\n                            formatNode = targets.shift();\n                        }\n                    }\n                } else {\n                    var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                    indent(formatNode, marginLeft);\n\n                    for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                        if ($.contains(formatNode, targets[targetIndex])) {\n                            targets.splice(targetIndex, 1);\n                        }\n                    }\n                }\n            }\n        } else {\n            var formatter = new BlockFormatter([{ tags: [\"p\"] }], { style: { marginLeft: 30 } });\n\n            formatter.apply(nodes);\n        }\n    },\n\n    getListTypeAttr: function(list) {\n        var type = list.getAttribute(\"type\");\n        var styleType = list.style.listStyleType;\n\n        return type ? { type: type } : { style: { listStyleType: styleType } };\n    },\n\n    mapImmutables: function(nodes) {\n        if (!this.immutables) {\n            return nodes;\n        } else {\n            var immutables = [];\n            return $.map(nodes, function(node) {\n                var immutable = Editor.Immutables.immutableParent(node);\n                if (immutable) {\n                    if ($.inArray(immutable, immutables) === -1) {\n                        immutables.push(immutable);\n                    } else {\n                        return null;\n                    }\n                }\n                return immutable || node;\n            });\n        }\n    },\n\n    remove: function(nodes) {\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        var formatNodes = this.finder.findSuitable(nodes),\n            targetNode, i, len, list, listParent, siblings,\n            formatNode, marginLeft;\n\n        formatNodes = this.mapImmutables(formatNodes);\n\n        for (i = 0, len = formatNodes.length; i < len; i++) {\n            formatNode = $(formatNodes[i]);\n\n            if (formatNode.is(\"li\")) {\n                list = formatNode.parent();\n                listParent = list.parent();\n                // listParent will be ul or ol in case of invalid dom - <ul><li></li><ul><li></li></ul></ul>\n                if (listParent.is(\"li,ul,ol\") && !indent(list[0])) {\n                    // skip already processed nodes\n                    if (targetNode && $.contains(targetNode, listParent[0])) {\n                        continue;\n                    }\n\n                    siblings = formatNode.nextAll(\"li\");\n                    if (siblings.length) {\n                        $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                    }\n\n                    if (listParent.is(\"li\")) {\n                        formatNode.insertAfter(listParent);\n                    } else {\n                        formatNode.appendTo(listParent);\n                    }\n\n                    if (!list.children(\"li\").length) {\n                        list.remove();\n                    }\n\n                    continue;\n                } else {\n                    if (targetNode == list[0]) {\n                        // removing format on sibling LI elements\n                        continue;\n                    }\n                    targetNode = list[0];\n                }\n            } else {\n                targetNode = formatNodes[i];\n            }\n\n            marginLeft = parseInt(indent(targetNode), 10) - 30;\n            indent(targetNode, marginLeft);\n        }\n    }\n\n});\n\nvar IndentCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = /** @ignore */ {\n            toggle: (function(range) {\n                var indentFormatter = new IndentFormatter();\n                indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                indentFormatter.apply(RangeUtils.nodes(range));\n            }).bind(that)\n        };\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar OutdentCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = {\n            toggle: (function(range) {\n                var indentFormatter = new IndentFormatter();\n                indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                indentFormatter.remove(RangeUtils.nodes(range));\n            }).bind(that)\n        };\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar OutdentTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n    },\n\n    initialize: function(ui, editor) {\n        $.extend(this.options, {\n            immutables: editor && editor.options.immutables\n        });\n    },\n\n    update: function(ui, nodes) {\n        var suitableNodes = this.finder.findSuitable(nodes),\n            toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\"),\n            isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n\n        for (i = 0, len = suitableNodes.length; i < len; i++) {\n            suitable = suitableNodes[i];\n\n            if (this.options.immutables) {\n                immutableParent = Editor.Immutables.immutableParent(suitable);\n\n                if (immutableParent) {\n                    suitable = immutableParent;\n                }\n            }\n\n            isOutdentable = indent(suitable);\n\n            if (!isOutdentable) {\n                listParentsCount = $(suitable).parents(\"ul,ol\").length;\n                isOutdentable = (dom.is(suitable, \"li\") && (listParentsCount > 1 || indent(suitable.parentNode))) ||\n                                (dom.ofType(suitable, [\"ul\",\"ol\"]) && listParentsCount > 0);\n            }\n\n            if (isOutdentable) {\n                toolbar.enable(ui, true);\n                return;\n            }\n        }\n\n        toolbar.enable(ui, false);\n    }\n});\n\nextend(Editor, {\n    IndentFormatter: IndentFormatter,\n    IndentCommand: IndentCommand,\n    OutdentCommand: OutdentCommand,\n    OutdentTool: OutdentTool\n});\n\nregisterTool(\"indent\", new Tool({ command: IndentCommand }));\nregisterTool(\"outdent\", new OutdentTool({ command: OutdentCommand, ui: { enable: false } }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    extend = $.extend,\n    editorNS = kendo.ui.editor,\n    dom = editorNS.Dom,\n    Command = editorNS.Command,\n    Tool = editorNS.Tool,\n    BlockFormatter = editorNS.BlockFormatter,\n    normalize = dom.normalize,\n    RangeUtils = editorNS.RangeUtils,\n    registerTool = editorNS.EditorUtils.registerTool;\n\nvar ParagraphCommand = Command.extend({\n    init: function(options) {\n        this.options = options;\n        Command.fn.init.call(this, options);\n    },\n\n    _insertMarker: function(doc, range) {\n        var marker = dom.create(doc, 'a'), container;\n        marker.className = \"k-marker\";\n\n        range.insertNode(marker);\n\n        if (!marker.parentNode) {\n            // inserting paragraph in Firefox full body range\n            container = range.commonAncestorContainer;\n            container.innerHTML = \"\";\n            container.appendChild(marker);\n        }\n\n        normalize(marker.parentNode);\n\n        return marker;\n    },\n\n    _moveFocus: function(range, candidate) {\n        if (dom.isEmpty(candidate)) {\n            range.setStartBefore(candidate);\n        } else {\n            range.selectNodeContents(candidate);\n\n            var focusNode = RangeUtils.textNodes(range)[0];\n\n            if (!focusNode) {\n                while (candidate.childNodes.length && !dom.is(candidate.firstChild, \"br\")) {\n                    candidate = candidate.firstChild;\n                }\n\n                focusNode = candidate;\n            }\n\n            if (dom.isEmpty(focusNode)) {\n                range.setStartBefore(focusNode);\n            } else {\n                if (dom.emptyNode(focusNode)) {\n                    focusNode.innerHTML = \"\\ufeff\";\n                }\n                var startNode = focusNode.firstChild || focusNode;\n                if (dom.isDataNode(startNode)) {\n                    range.setStart(startNode, 0);\n                } else {\n                    range.setStartBefore(startNode);\n                }\n            }\n        }\n    },\n\n    shouldTrim: function(range) {\n        var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','),\n            startInBlock = dom.parentOfType(range.startContainer, blocks),\n            endInBlock = dom.parentOfType(range.endContainer, blocks);\n        return (startInBlock && !endInBlock) || (!startInBlock && endInBlock);\n    },\n\n    _blankAfter: function(node) {\n        while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === \"\")) {\n            node = node.nextSibling;\n        }\n\n        return !node;\n    },\n\n    exec: function() {\n        var range = this.getRange(),\n            doc = RangeUtils.documentFromRange(range),\n            parent, previous, next,\n            emptyParagraphContent = editorNS.emptyElementContent,\n            paragraph, marker, li, heading, tableNode, rng,\n            shouldTrim;\n\n        this.expandImmutablesIn(range);\n\n        shouldTrim = this.shouldTrim(range);\n\n        range.deleteContents();\n        marker = this._insertMarker(doc, range);\n\n        dom.stripBomNode(marker.previousSibling);\n        dom.stripBomNode(marker.nextSibling);\n\n        li = dom.closestEditableOfType(marker, ['li']);\n        heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n        tableNode = dom.is(marker.parentNode, 'table') && marker.parentNode;\n\n        if (li) {\n            // hitting 'enter' in empty li\n            if (dom.emptyNode(li)) {\n                paragraph = dom.create(doc, 'p');\n\n                if (dom.next(li)) {\n                    rng = range.cloneRange();\n                    rng.selectNode(li);\n\n                    RangeUtils.split(rng, li.parentNode);\n                }\n\n                var br = $(\"br\", li);\n                if (br.length == 1) {\n                    br.remove();\n                }\n\n                var parentNode = li.parentNode;\n                var parentChildrenLength = li.parentNode.children.length;\n                var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n\n                dom.insertAfter(paragraph, parentNode);\n                dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n\n                if (firstChild && firstChild !== marker) {\n                    paragraph.appendChild(firstChild);\n                    paragraph.appendChild(marker);\n                } else {\n                    paragraph.innerHTML = emptyParagraphContent;\n                }\n                next = paragraph;\n            }\n        } else if (heading && this._blankAfter(marker)) {\n            paragraph = this._insertParagraphAfter(heading);\n            dom.remove(marker);\n            next = paragraph;\n        } else if (tableNode) {\n            paragraph = this._insertParagraphAfter(tableNode);\n            dom.remove(marker);\n            next = paragraph;\n        }\n\n        if (!next) {\n            if (!(li || heading)) {\n                new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n            }\n\n            range.selectNode(marker);\n\n            parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n\n            RangeUtils.split(range, parent, shouldTrim);\n\n            previous = parent.previousSibling;\n\n            if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                previous = previous.firstChild;\n            }\n\n            next = parent.nextSibling;\n\n            this.clean(previous, { links: true });\n            this.clean(next, { links: true });\n\n            if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                next = next.firstChild;\n            }\n\n            dom.remove(parent);\n\n            // normalize updates the caret display in Gecko\n            normalize(previous);\n        }\n\n        normalize(next);\n\n        this._moveFocus(range, next);\n\n        range.collapse(true);\n\n        dom.scrollTo(next, true);\n\n        RangeUtils.selectRange(range);\n    },\n\n    _insertParagraphAfter: function(node) {\n        var range = this.getRange();\n        var doc = RangeUtils.documentFromRange(range);\n        var emptyElementContent = editorNS.emptyElementContent;\n        var paragraph = dom.create(doc, 'p');\n\n        dom.insertAfter(paragraph, node);\n        paragraph.innerHTML = emptyElementContent;\n\n        return paragraph;\n    },\n\n    clean: function(node, options) {\n        var root = node;\n\n        if (node.firstChild && dom.is(node.firstChild, 'br')) {\n            dom.remove(node.firstChild);\n        }\n\n        if (dom.isDataNode(node) && !node.nodeValue) {\n            node = node.parentNode;\n        }\n\n        if (node) {\n            var siblings = false;\n            while (node.firstChild && node.firstChild.nodeType == 1) {\n                siblings = siblings || (dom.significantNodes(node.childNodes).length > 1);\n                node = node.firstChild;\n            }\n\n            if (!dom.isEmpty(node) && node.className != \"k-br\" && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                $(root).find(\".k-br\").remove();\n                node.innerHTML = editorNS.emptyElementContent;\n            }\n\n            if (options && options.links) {\n                while (node != root) {\n                    if (dom.is(node, \"a\") && dom.emptyNode(node)) {\n                        dom.unwrap(node);\n                        break;\n                    }\n                    node = node.parentNode;\n                }\n            }\n        }\n    }\n});\n\nvar NewLineCommand = Command.extend({\n    init: function(options) {\n        this.options = options;\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var range = this.getRange();\n        this.expandImmutablesIn(range);\n\n        var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n        var node = range.startContainer;\n        var filler;\n        var browser = kendo.support.browser;\n        var oldIE = browser.msie && browser.version < 11;\n        var tableNode = dom.is(node, 'table') && node;\n        var kbrParent;\n\n        range.deleteContents();\n        if (tableNode) {\n            dom.insertAfter(br, tableNode);\n        } else {\n            kbrParent = $(node).closest('.k-br');\n            range.insertNode(br);\n\n            if (kbrParent.length) {\n                // pressing enter in an k-br node\n                dom.unwrap(kbrParent[0]);\n            }\n        }\n\n        normalize(br.parentNode);\n\n        if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n            // Gecko and WebKit cannot put the caret after only one br.\n            if (!!br.nextSibling && dom.isWhitespace(br.nextSibling)) {\n                $(br.nextSibling).remove();\n            }\n            filler = br.cloneNode(true);\n            filler.className = 'k-br';\n            dom.insertAfter(filler, br);\n        }\n\n        range.setStartAfter(br);\n        range.collapse(true);\n\n        dom.scrollTo(br.nextSibling || br, true);\n\n        RangeUtils.selectRange(range);\n    }\n});\n\nextend(editorNS, {\n    ParagraphCommand: ParagraphCommand,\n    NewLineCommand: NewLineCommand\n});\n\nregisterTool(\"insertLineBreak\", new Tool({ key: 13, shift: true, command: NewLineCommand }));\nregisterTool(\"insertParagraph\", new Tool({ key: 13, command: ParagraphCommand }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    encode = kendo.htmlEncode,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    LinkFormatter = Editor.LinkFormatter,\n    textNodes = RangeUtils.textNodes,\n    keys = kendo.keys,\n    KEDITORFILEURL = \"#k-editor-file-url\",\n    KEDITORFILETEXT = \"#k-editor-file-text\",\n    KEDITORFILETITLE = \"#k-editor-file-title\";\n\nvar FileCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        Command.fn.init.call(that, options);\n\n        that.formatter = new LinkFormatter();\n\n        that.async = true;\n        that.attributes = {};\n    },\n\n    insertFile: function(file, range) {\n        var attributes = this.attributes;\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (attributes.href && attributes.href != \"http://\") {\n\n            if (!file) {\n                file = dom.create(doc, \"a\", { href: attributes.href });\n                file.innerHTML = attributes.innerHTML;\n                file.title = attributes.title;\n\n                range.deleteContents();\n                range.insertNode(file);\n\n                if (!file.nextSibling) {\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), file);\n                }\n\n                range.setStartAfter(file);\n                range.setEndAfter(file);\n                RangeUtils.selectRange(range);\n                return true;\n            } else {\n                dom.attr(file, attributes);\n            }\n        }\n\n        return false;\n    },\n\n    redo: function() {\n        var that = this,\n            range = that.lockRange();\n\n        this.formatter.apply(range, this.attributes);\n        that.releaseRange(range);\n    },\n\n    exec: function() {\n        var that = this,\n            range = that.lockRange(),\n            nodes = textNodes(range),\n            applied = false,\n            file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null,\n            dialog,\n            form,\n            isIE = kendo.support.browser.msie,\n            options = that.editor.options,\n            messages = options.messages,\n            fileBrowser = options.fileBrowser,\n            showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined$1),\n            dialogOptions = {\n                title: messages.insertFile,\n                visible: false,\n                resizable: showBrowser\n            };\n\n        this.expandImmutablesIn(range);\n\n        function apply(e) {\n            var element = dialog.element,\n                href = element.find(KEDITORFILEURL).val().replace(/ /g, \"%20\"),\n                innerHTML = element.find(KEDITORFILETEXT).val(),\n                title = element.find(KEDITORFILETITLE).val();\n\n            that.attributes = {\n                href: href,\n                innerHTML: innerHTML !== \"\" ? innerHTML : href,\n                title: title\n            };\n\n            applied = that.insertFile(file, range);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n        }\n\n        function close(e) {\n            e.preventDefault();\n            form.destroy();\n            dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n            if (!applied) {\n                that.releaseRange(range);\n            }\n        }\n\n        function keyDown(e) {\n            if (e.keyCode == keys.ENTER) {\n                apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                close(e);\n            }\n        }\n\n        dialogOptions.close = close;\n\n        if (showBrowser) {\n            dialogOptions.width = 750;\n        }\n        dialogOptions.minWidth = 350;\n\n        dialog = this.createDialog(\"<div/>\", dialogOptions).data(\"kendoWindow\");\n        form = that._createForm(dialog, showBrowser);\n\n        dialog.element.toggleClass(\"k-filebrowser-dialog\", showBrowser);\n        dialog.wrapper\n        .find(\".k-dialog-insert\").on(\"click\", apply).end()\n        .find(\".k-dialog-close\").on(\"click\", close).end()\n        .find(\".k-form-field input\").on(\"keydown\", keyDown).end()\n        // IE < 8 returns absolute url if getAttribute is not used\n        .find(KEDITORFILEURL).val(file ? file.getAttribute(\"href\", 2) : \"http://\").end()\n        .find(KEDITORFILETEXT).val(file ? file.innerText : \"\").end()\n        .find(KEDITORFILETITLE).val(file ? file.title : \"\").end();\n\n        var element = dialog.element;\n        if (showBrowser) {\n            that._fileBrowser = new kendo.ui.FileBrowser(\n                element.find(\".k-filebrowser\"),\n                extend({}, fileBrowser)\n            );\n\n            that._fileBrowser.bind(\"change\", function(ev) {\n                if (ev.selected.get(\"type\") === \"f\") {\n                    element.find(KEDITORFILEURL).val(this.value());\n                }\n            } );\n\n            that._fileBrowser.bind(\"apply\", apply);\n        }\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n        dialog.center().open();\n        element.find(KEDITORFILEURL).trigger(\"focus\").select();\n    },\n\n    _createForm: function(dialog, showBrowser) {\n        var that = this;\n        var formElement = $(\"<div/>\").appendTo(dialog.element);\n        var messages = that.editor.options.messages;\n\n        var form = formElement.kendoForm({\n            renderButtons: false,\n            items: [\n                {\n                    field: \"k-editor-file-url\",\n                    label: encode(messages.fileWebAddress),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-file-text\",\n                    label: encode(messages.fileText),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-file-title\",\n                    label: encode(messages.fileTitle),\n                    editor: \"TextBox\"\n                }\n            ]\n        }).data(\"kendoForm\");\n\n        if (showBrowser) {\n            formElement.prepend($('<div class=\"k-filebrowser\"></div>'));\n        }\n\n        dialog.element.after($(that._actionButtonsTemplate({ messages, insertButtonIcon: \"file-add\", cancelButtonIcon: \"cancel-outline\" })));\n\n        return form;\n    }\n\n});\n\nkendo.ui.editor.FileCommand = FileCommand;\n\nregisterTool(\"insertFile\", new Editor.Tool({ command: FileCommand }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n\n    NS = \"kendoEditor\",\n    ACTIVESTATE = \"k-active\",\n    SELECTEDSTATE = \"k-selected\",\n    SCOPE = \"scope\",\n    ROW = \"row\",\n    COL = \"col\",\n    ROWGROUP = \"rowgroup\",\n    COLGROUP = \"colgroup\",\n    COLSPAN = \"colspan\",\n    ROWSPAN = \"rowspan\",\n    TABLE = \"table\",\n    THEAD = \"thead\",\n    TBODY = \"tbody\",\n    TR = \"tr\",\n    TD = \"td\",\n    TH = \"th\",\n\n    Tool = Editor.Tool,\n    InsertHtmlCommand = Editor.InsertHtmlCommand,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    BlockFormatTool = Editor.BlockFormatTool,\n    FormatCommand = Editor.FormatCommand,\n    registerTool = Editor.EditorUtils.registerTool,\n    registerFormat = Editor.EditorUtils.registerFormat,\n    formats = kendo.ui.Editor.fn.options.formats,\n    getTouches = kendo.getTouches;\nvar template = kendo.template;\n\nvar columnTemplate = ({ width, content }) => `<td style=\"width:${width}%;\">${content}</td>`;\n\nvar tableFormatFinder = new BlockFormatFinder([{ tags: [TABLE] }]);\n\nvar TableCommand = InsertHtmlCommand.extend({\n    init: function(options) {\n        var o = $.extend({\n            postProcess: this.postProcess,\n            skipCleaners: true\n        }, options || {});\n\n        InsertHtmlCommand.fn.init.call(this, o);\n    },\n    _tableHtml: function(rows, columns) {\n        rows = rows || 1;\n        columns = columns || 1;\n        var columnHtml = template(columnTemplate)({ width: 100 / columns, content: Editor.emptyTableCellContent });\n        var rowHeight = 100 / rows;\n\n        return \"<table class='k-table' data-last>\" +\n                    new Array(rows + 1).join(\n                    \"<tr style='height:\" + rowHeight + \"%;'>\" +\n                        new Array(columns + 1).join(columnHtml) +\n                    \"</tr>\") +\n               \"</table>\";\n    },\n\n    postProcess: function(editor, range) {\n        var insertedTable = $(\"table[data-last]\", editor.document).removeAttr(\"data-last\");\n\n        range.setStart(insertedTable.find(TD)[0], 0);\n        range.collapse(true);\n\n        editor.selectRange(range);\n    },\n\n    exec: function() {\n        var options = this.options;\n        options.html = this._tableHtml(options.rows, options.columns);\n\n        InsertHtmlCommand.fn.exec.call(this);\n    }\n});\n\nvar PopupTool = Tool.extend({\n    initialize: function(ui, editor) {\n        var that = this;\n        var btn = $(\"<button>\" + editor.options.messages.tableWizard + \"</button>\");\n        var popup = $(this.options.popupTemplate).appendTo(\"body\").kendoPopup({\n            anchor: ui,\n            copyAnchorStyles: false,\n            open: this._open.bind(this),\n            activate: this._activate.bind(this),\n            close: this._close.bind(this)\n        }).data(\"kendoPopup\");\n\n        ui.on(\"click\", this._toggle.bind(this))\n          .on(\"keydown\", this._keydown.bind(this));\n\n        this._editor = editor;\n        this._popup = popup;\n\n        editor.tablePopup = this._popup;\n\n        var tableWizard = new Editor.TableWizardTool({\n            command: Editor.TableWizardCommand,\n            insertNewTable: true\n        });\n\n        registerTool(\"tableWizardInsert\", tableWizard);\n\n        btn.appendTo(popup.element);\n        btn.kendoButton({\n            icon: \"table-wizard\"\n        });\n\n        btn.on(\"click\", () => {\n            that._editor.exec(\"tableWizardInsert\");\n        });\n    },\n\n    popup: function() {\n        return this._popup;\n    },\n\n    _activate: $.noop,\n\n    _open: function() {\n        this._popup.options.anchor.addClass(ACTIVESTATE);\n    },\n\n    _close: function() {\n        this._popup.options.anchor.removeClass(ACTIVESTATE);\n    },\n\n    _keydown: function(e) {\n        var that = this,\n            keys = kendo.keys,\n            key = e.keyCode;\n\n        if (key == keys.ESC) {\n            that._popup.close();\n        } else if (key == keys.DOWN && e.altKey) {\n            that._popup.open();\n            that._setTableSize({ row: 1, col: 1 });\n        } else if (key === keys.ENTER) {\n            setTimeout(() => {\n                that._setTableSize({ row: 1, col: 1 });\n            });\n        }\n    },\n\n    _toggle: function(e) {\n        var button = $(e.target).closest(\".k-tool\");\n\n        if (!button.hasClass(\"k-disabled\")) {\n            this.popup().toggle();\n        }\n    },\n\n    update: function(ui) {\n        var popup = this.popup();\n\n        if (popup.wrapper && popup.wrapper.css(\"display\") == \"block\") {\n            popup.close();\n        }\n\n        ui.removeClass(\"k-hover\");\n    },\n\n    destroy: function() {\n        if (this._popup) {\n            this._popup.destroy();\n        }\n    }\n});\n\nvar InsertTableTool = PopupTool.extend({\n    init: function(options) {\n        this.cols = 8;\n        this.rows = 6;\n\n        PopupTool.fn.init.call(this, $.extend(options, {\n            command: TableCommand,\n            popupTemplate:\n                \"<div class='k-ct-popup'>\" +\n                    \"<div>\" +\n                        new Array(this.cols * this.rows + 1).join(\"<span class='k-ct-cell k-disabled'></span>\") +\n                    \"</div>\" +\n                    \"<div class='k-status'></div>\" +\n                \"</div>\"\n        }));\n    },\n\n    _activate: function() {\n        var that = this,\n            element = that._popup.element,\n            cells = element.find(\".k-ct-cell\"),\n            firstCell = cells.eq(0),\n            lastCell = cells.eq(cells.length - 1),\n            start = kendo.getOffset(firstCell),\n            end = kendo.getOffset(lastCell),\n            cols = that.cols,\n            rows = that.rows,\n            cellWidth, cellHeight;\n\n        element.find(\"*\").addBack().attr(\"unselectable\", \"on\");\n\n        end.left += lastCell[0].offsetWidth;\n        end.top += lastCell[0].offsetHeight;\n\n        cellWidth = (end.left - start.left) / cols;\n        cellHeight = (end.top - start.top) / rows;\n\n        function tableFromLocation(e) {\n            var w = $(window);\n            return {\n                row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n            };\n        }\n\n        element.autoApplyNS(NS)\n            .on(\"mousemove\", \".k-ct-cell\", function(e) {\n                that._setTableSize(tableFromLocation(e));\n            })\n            .on(\"mouseleave\", \".k-ct-cell\", function() {\n                that._setTableSize();\n            })\n            .on(\"down\", \".k-ct-cell\", function(e) {\n                e.preventDefault();\n                var touch = getTouches(e)[0];\n                that._exec(tableFromLocation(touch.location));\n            });\n    },\n\n    _valid: function(size) {\n        return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n    },\n\n    _exec: function(size) {\n        if (this._valid(size)) {\n            this._editor.exec(\"createTable\", {\n                rows: size.row,\n                columns: size.col\n            });\n            this._popup.close();\n        }\n    },\n\n    _setTableSize: function(size) {\n        var element = this._popup.element;\n        var status = element.find(\".k-status\");\n        var cells = element.find(\".k-ct-cell\");\n        var cols = this.cols;\n        var messages = this._editor.options.messages;\n\n        if (this._valid(size)) {\n            status.text(kendo.format(messages.createTableHint, size.row, size.col));\n\n            cells.each(function(i) {\n                $(this).toggleClass(\n                    SELECTEDSTATE,\n                    i % cols < size.col && i / cols < size.row\n                );\n            });\n        } else {\n            status.text(messages.createTable);\n            cells.removeClass(SELECTEDSTATE);\n        }\n    },\n\n    _keydown: function(e) {\n        var initiallyVisible = this._popup.visible();\n\n        PopupTool.fn._keydown.call(this, e);\n\n        if (!this._popup.visible()) {\n            return;\n        }\n\n        var keys = kendo.keys;\n        var key = e.keyCode;\n        var cells = this._popup.element.find(\".k-ct-cell\");\n        var focus = Math.max(cells.filter(\".k-selected\").last().index(), 0);\n        var selectedRows = Math.floor(focus / this.cols);\n        var selectedColumns = focus % this.cols;\n\n        var changed = false,\n            button;\n\n        if (key == keys.DOWN && !e.altKey) {\n            changed = true;\n            selectedRows++;\n        } else if (key == keys.UP) {\n            changed = true;\n            selectedRows--;\n        } else if (key == keys.RIGHT) {\n            changed = true;\n            selectedColumns++;\n        } else if (key == keys.LEFT) {\n            changed = true;\n            selectedColumns--;\n        } else if (key == keys.TAB) {\n            button = this._popup.element.find(\".k-button\");\n\n            if (button.length > 0) {\n                changed = true;\n                button.trigger(\"focus\");\n            }\n        }\n\n        var tableSize = {\n            row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n            col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n        };\n\n        if (key == keys.ENTER && initiallyVisible) {\n            this._exec(tableSize);\n        } else {\n            this._setTableSize(tableSize);\n        }\n\n        if (changed) {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n        }\n    },\n\n    _open: function() {\n        var messages = this._editor.options.messages;\n\n        PopupTool.fn._open.call(this);\n\n        this.popup().element\n            .find(\".k-status\").text(messages.createTable).end()\n            .find(\".k-ct-cell\").removeClass(SELECTEDSTATE);\n    },\n\n    _close: function() {\n        PopupTool.fn._close.call(this);\n        this.popup().element.off(\".\" + NS);\n    }\n});\n\nvar TableModificationCommand = Command.extend({\n    undo: function() {\n        var point = this.restorePoint;\n        point.restoreHtml();\n\n        $(this.editor.body).find(\".k-element-resize-handle-wrapper\")\n            .each(function(index,el) {\n                el.remove();\n            });\n\n        this.editor.selectRange(point.toRange());\n    },\n    _clearColIndexAttr: function(table) {\n        dom.clearTableMappings(table, \"col-index\");\n    },\n    _mapColIndices: function(table) {\n        dom.reMapTableColumns(table, \"col-index\");\n    },\n    _findRowSpanCell: function(parent, rowIndex, colIndex) {\n        var row, cell;\n\n        for (var i = rowIndex; i >= 0; i--) {\n            row = parent.rows[i];\n            cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n            if (cell.length) {\n                return cell;\n            }\n        }\n    },\n    _resetElementResizing: function(editor) {\n        editor._destroyResizings();\n        editor._initializeColumnResizing();\n        editor._initializeRowResizing();\n        editor._initializeElementResizing();\n    },\n    _findNextTdInRow: function(row, colIndex) {\n        var lastTd = row.find(\"td:last-child\"),\n            lastIndex = parseInt(lastTd.attr(\"col-index\"), 10) + lastTd.prop(\"colSpan\") - 1,\n            td;\n\n        for (var i = colIndex; i <= lastIndex; i++) {\n            td = row.find(\"[col-index=\" + i + \"]\");\n            if (td.length) {\n                return td;\n            }\n        }\n    },\n    _adjustColgroups: function(row, table) {\n        var colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            cells = row.cells,\n            numberOfCells = cells.length,\n            i, colgroup, cell;\n\n        while (colElements.length > 0) {\n            colElements[0].remove();\n        }\n        while (colgroupElements.length > 0) {\n            colgroupElements[0].remove();\n        }\n\n        for (i = numberOfCells - 1; i >= 0; i--) {\n            cell = cells[i];\n            if (cell.getAttribute(SCOPE) === COLGROUP) {\n                colgroup = dom.createEmptyNode(this.editor.document, COLGROUP);\n                colgroup.setAttribute(\"span\", cell.getAttribute(COLSPAN));\n                table.prepend(colgroup);\n            } else {\n                table.prepend(dom.createEmptyNode(this.editor.document, COL));\n            }\n        }\n    },\n    _associateHeaderIds: function(table) {\n        dom.clearTableMappings(table, \"col-index\");\n        dom.reMapTableColumns(table, \"col-index\");\n        $(table).find(\"th, td\").removeAttr(\"id headers\");\n        dom.associateWithIds(table);\n    },\n    _getNumberOfColumns: function(table) {\n        return dom._getNumberOfColumns(table, \"td, th\");\n    }\n});\n\nvar InsertRowCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(true),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            position = this.options.position || \"after\",\n            cellCount, row, cell,\n            newRow, rowIndex, rowSpanIndex, createdCell;\n\n        if (!table || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        row = td.parentNode;\n        rowIndex = dom.findNodeIndex(row, true);\n\n        if (td.rowSpan > 1 && position === \"after\") {\n            row = table.rows[rowIndex + td.rowSpan - 1];\n        }\n\n        cellCount = this._getNumberOfColumns(table);\n        newRow = row.cloneNode(true);\n        $(newRow).empty();\n\n        for (var i = 0; i < cellCount; i = i + cell.prop(\"colSpan\")) {\n            cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n            if (cell.length) {\n                if (cell.prop(\"rowSpan\") > 1 && position === \"after\" && cell) {\n                    cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                } else {\n                    this._appendCell(newRow, cell);\n                }\n            } else {\n                rowIndex = dom.findNodeIndex(row, true);\n                cell = this._findRowSpanCell(row.parentElement, rowIndex, i);\n                rowSpanIndex = cell.closest(TR).index();\n\n                if (rowSpanIndex + cell.prop(\"rowSpan\") - 1 === rowIndex && position === \"after\") {\n                    this._appendCell(newRow, cell);\n                } else {\n                    cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                }\n            }\n\n            createdCell = $(newRow).find(\"[col-index=\" + i + \"]\");\n            if (createdCell.attr(SCOPE) === ROWGROUP && !createdCell.attr(ROWSPAN)) {\n                createdCell.attr(SCOPE, ROW);\n            }\n        }\n\n        if (position == \"before\") {\n            dom.insertBefore(newRow, row);\n        } else {\n            dom.insertAfter(newRow, row);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n\n        this._resetElementResizing(this.editor);\n    },\n    _appendCell: function(row, cell) {\n        var newCell;\n\n        newCell = cell.clone();\n        newCell.html(Editor.emptyTableCellContent);\n        newCell.removeAttr(ROWSPAN);\n        newCell.appendTo(row);\n    }\n});\n\nvar InsertColumnCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(true),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            columnIndex,\n            i,\n            rows = table && table.rows,\n            cell,\n            newCell,\n            position = this.options.position || \"after\";\n\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        columnIndex = parseInt(td.getAttribute(\"col-index\"),10);\n\n        if (td.colSpan > 1 && position === \"after\") {\n            td.setAttribute(\"col-index\", columnIndex + td.colSpan - 1);\n            columnIndex = columnIndex + td.colSpan - 1;\n        }\n\n        for (i = 0; i < rows.length; i++) {\n            cell = this._processForColSpan(rows[i], columnIndex, position, td);\n\n            if (!cell) {\n                continue;\n            }\n\n            newCell = cell.cloneNode();\n            newCell.innerHTML = Editor.emptyTableCellContent;\n            newCell.removeAttribute(COLSPAN);\n\n            if (newCell.getAttribute(SCOPE) && newCell.getAttribute(SCOPE) === COLGROUP) {\n                newCell.setAttribute(SCOPE, COL);\n            }\n\n            if (position == \"before\") {\n                dom.insertBefore(newCell, cell);\n            } else {\n                dom.insertAfter(newCell, cell);\n            }\n\n            this._resizeCells(newCell, cell);\n        }\n\n        if (colElements.length > 0 || colgroupElements.length > 0) {\n            this._adjustColgroups(rows[0], table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n\n        this._resetElementResizing(this.editor);\n    },\n    _processForColSpan: function(row, columnIndex, position, selectedCell) {\n        var cell,\n            colSpanEffect,\n            index = columnIndex - 1;\n\n        cell = $(row).find(\"[col-index=\" + columnIndex + \"]\")[0];\n\n        if (cell && cell.colSpan > 1 && position === \"after\" && cell !== selectedCell) {\n            cell.colSpan += 1;\n            return;\n        }\n\n        if (cell) {\n            return cell;\n        }\n\n        for (index; index >= 0; index--) {\n            cell = $(row).find(\"[col-index=\" + index + \"]\")[0];\n\n            if (cell && cell.colSpan > 1) {\n                break;\n            }\n        }\n\n        if (!cell) {\n            return;\n        }\n\n        colSpanEffect = parseInt(cell.getAttribute(\"col-index\"),10) + cell.colSpan - 1;\n\n        if (colSpanEffect === columnIndex && position === \"after\") {\n            return cell;\n        } else if (columnIndex <= colSpanEffect) {\n            cell.setAttribute(COLSPAN, cell.colSpan + 1);\n        }\n    },\n    _resizeCells: function(newCell, cell) {\n        var width = newCell.style.width,\n        parsedWidth, unit, calculatedWidth;\n\n        if (!width) {\n            return;\n        }\n\n        parsedWidth = parseFloat(width);\n        unit = width.slice(parsedWidth.toString().length);\n        calculatedWidth = (parsedWidth / 2) + unit;\n\n        newCell.style.width = calculatedWidth;\n        cell.style.width = calculatedWidth;\n    }\n});\n\nvar DeleteRowCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange();\n        var rows = RangeUtils.mapAll(range, function(node) {\n            return $(node).closest(TR)[0];\n        });\n        var td = dom.closest(range.endContainer, [TD, TH]);\n        var row = rows[0];\n        var rowSpan = td ? td.rowSpan : 1;\n        var rowIndex = $(rows[0]).index();\n        var table = dom.closest(row, TABLE);\n        var rowParent = row.parentElement;\n        var focusElement;\n\n        if (!table || (this.immutables() && Editor.Immutables.immutableParent(row))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        for (var x = 0; x < rowSpan; x++) {\n            if (rows.indexOf(rowParent.rows[rowIndex + x]) < 0) {\n                rows.push(rowParent.rows[rowIndex + x]);\n            }\n        }\n\n        if (table.rows.length <= rows.length) {\n            focusElement = dom.next(table);\n            if (!focusElement || dom.insignificant(focusElement)) {\n                focusElement = dom.prev(table);\n            }\n\n            if (focusElement && focusElement.rows) {\n                focusElement = focusElement.rows[0].cells[0];\n            }\n\n            dom.remove(table);\n            this._resetElementResizing(this.editor);\n        } else if (rowParent.rows.length <= rows.length) {\n            focusElement = rowParent.nextSibling;\n\n            if (!focusElement) {\n                focusElement = rowParent.previousSibling;\n            }\n\n            dom.remove(rowParent);\n        } else {\n            this._mapColIndices(table);\n\n            for (var i = 0; i < rows.length; i++) {\n                row = rows[i];\n                dom.removeTextSiblings(row);\n                focusElement = dom.next(row) || dom.prev(row);\n                focusElement = focusElement.cells[0];\n\n                // IE needs to focus the new row before removing the old one\n                this._focusElement(range, focusElement);\n                focusElement = null;\n\n                this._handleRowSpanCells(table, row);\n\n                dom.remove(row);\n            }\n\n            this._clearColIndexAttr(table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        } else if (dom.is(rowParent, THEAD) && $(table).find(\"[scope]\").length > 0) {\n            this._adjustColgroups(rowParent.rows[0], table);\n        }\n\n        if (focusElement) {\n            this._focusElement(range, focusElement);\n        }\n\n        this._resetElementResizing(this.editor);\n    },\n    _focusElement: function(range, node) {\n        range.setStart(node, 0);\n        range.collapse(true);\n        this.editor.selectRange(range);\n    },\n    _handleRowSpanCells: function(table, row) {\n        var index, cell, adjacentCell, nextRow, rowIndex = dom.findNodeIndex(row, true),\n            firstRow = table.rows[0],\n            lastCell = firstRow.cells[firstRow.cells.length - 1],\n            lastIndex = parseInt(lastCell.getAttribute(\"col-index\"),10) + lastCell.colSpan - 1;\n\n        for (index = 0; index <= lastIndex; index = index + cell.prop(\"colSpan\")) {\n            cell = $(row).find(\"[col-index=\" + index + \"]\");\n\n            if (cell.length && cell.prop(\"rowSpan\") > 1) {\n                nextRow = table.rows[rowIndex + 1];\n                adjacentCell = $(nextRow).find(\"[col-index=\" + (index + 1) + \"]\");\n\n                if (adjacentCell.length) {\n                    adjacentCell.before(cell);\n                } else {\n                    $(nextRow).append(cell);\n                }\n                this._reduceRowSpan(cell);\n            }\n\n            if (!cell.length) {\n                cell = this._findRowSpanCell(row.parentElement, rowIndex, index);\n                this._reduceRowSpan(cell);\n            }\n        }\n    },\n    _reduceRowSpan: function(td) {\n        var rowSpanValue = td.prop(\"rowSpan\") - 1;\n\n        if (rowSpanValue <= 1) {\n            td.removeAttr(ROWSPAN);\n            if (td.attr(SCOPE) === ROWGROUP) {\n                td.attr(SCOPE, ROW);\n            }\n        } else {\n            td.attr(ROWSPAN, rowSpanValue);\n        }\n    }\n});\n\nvar DeleteColumnCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            rows = table && table.rows,\n            columnIndex = dom.findNodeIndex(td, true),\n            columnCount = rows && rows[0].cells.length,\n            colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            focusElement, i, cell, x;\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        if (columnCount == 1 || td.colSpan == columnCount) {\n            focusElement = dom.next(table);\n            if (!focusElement || dom.insignificant(focusElement)) {\n                focusElement = dom.prev(table);\n            }\n\n            if (focusElement && focusElement.rows) {\n                focusElement = focusElement.rows[0].cells[0];\n            }\n\n            dom.remove(table);\n            this._resetElementResizing(this.editor);\n        } else {\n            dom.removeTextSiblings(td);\n\n            focusElement = dom.next(td) || dom.prev(td);\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt(td.getAttribute(\"col-index\"), 10);\n\n            for (x = 0; x < td.colSpan; x++) {\n                for (i = 0; i < rows.length; i = i + (cell.prop(\"rowSpan\") || 1)) {\n                    cell = $(rows[i]).find(\"[col-index=\" + (columnIndex + x) + \"]\");\n\n                    if (cell.length && cell.prop(\"colSpan\") <= 1) {\n                        cell.remove();\n                    } else {\n                        this._handleColSpanCells(rows[i], columnIndex + x);\n                    }\n                }\n            }\n\n            this._clearColIndexAttr(table);\n        }\n\n        if (colElements.length > 0 || colgroupElements.length > 0) {\n            this._adjustColgroups(rows[0], table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        if (focusElement) {\n            range.setStart(focusElement, 0);\n            range.collapse(true);\n            this.editor.selectRange(range);\n        }\n\n        this._resetElementResizing(this.editor);\n    },\n    _handleColSpanCells: function(row, colIndex) {\n        var cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n        if (cell.length && cell.prop(\"colSpan\") > 1) {\n            var clone = cell.clone(true);\n            cell.after(clone);\n            this._reduceColSpan(clone);\n            clone.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n            cell.remove();\n            return;\n        }\n\n        for (var i = colIndex; i >= 0; i--) {\n            cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n            if (cell.length) {\n                this._reduceColSpan(cell);\n                cell.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n                return;\n            }\n        }\n    },\n    _reduceColSpan: function(td) {\n        var colSpanValue = td.prop(\"colSpan\") - 1;\n\n        if (colSpanValue <= 1) {\n            td.removeAttr(COLSPAN);\n            if (td.attr(SCOPE) === COLGROUP) {\n                td.attr(SCOPE, COL);\n            }\n        } else {\n            td.attr(COLSPAN, colSpanValue);\n        }\n    }\n});\n\nvar MergeCellsHorizontallyCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table, row, columnIndex, nextTd, colspan;\n\n            if (!td) {\n                this.releaseRange(range);\n                return;\n            }\n\n            table = dom.closest(td, TABLE);\n            row = td.parentNode;\n            columnIndex = dom.findNodeIndex(td, true);\n            nextTd = row.children[columnIndex + 1];\n\n            if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt($(td).attr(\"col-index\"), 10);\n            nextTd = $(row).find(\"[col-index=\" + (columnIndex + 1 + this._getColspan(td) - 1) + \"]\").get(0);\n\n            if (!nextTd || nextTd.rowSpan !== td.rowSpan || td.tagName !== nextTd.tagName) {\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                return;\n            }\n\n            colspan = this._getColspan(td) + this._getColspan(nextTd);\n\n            $(td).prop(COLSPAN, colspan)\n                 .append(dom.emptyNode(nextTd) ? \"\" : \"<br/>\" + nextTd.innerHTML);\n\n            $(td).width(td.offsetWidth);\n            $(nextTd).remove();\n\n            if (td.getAttribute(SCOPE) === COL) {\n                td.setAttribute(SCOPE, COLGROUP);\n            }\n            if (td.getAttribute(SCOPE) === COLGROUP) {\n                this._adjustColgroups(row, table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n            this._resetElementResizing(this.editor);\n    },\n    _getColspan: function(td) {\n        return parseInt(td.getAttribute(COLSPAN), 10) || 1;\n    }\n});\n\nvar MergeCellsVerticallyCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            tr, parent, table, columnIndex, rowIndex, targetRow, bottomTd;\n\n            if (!td) {\n                this.releaseRange(range);\n                return;\n            }\n\n            tr = dom.closest(td, TR);\n            parent = dom.closest(td, [THEAD, TBODY]);\n            table = dom.closest(td, TABLE);\n            columnIndex = dom.findNodeIndex(td, true);\n            rowIndex = dom.findNodeIndex(tr, true);\n\n            if (rowIndex + 1 === parent.rows.length) {\n                this.releaseRange(range);\n                return;\n            }\n\n            targetRow = parent.rows[rowIndex + this._getRowspan(td)];\n            bottomTd = targetRow && targetRow.children[columnIndex];\n\n            if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = $(td).attr(\"col-index\");\n            bottomTd = $(targetRow).find(\"[col-index=\" + columnIndex + \"]\").get(0);\n\n            if (!bottomTd || bottomTd.colSpan !== td.colSpan || td.tagName !== bottomTd.tagName) {\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                return;\n            }\n\n            $(td).prop(ROWSPAN, this._getRowspan(td) + this._getRowspan(bottomTd))\n                 .append(dom.emptyNode(bottomTd) ? \"\" : \"<br/>\" + bottomTd.innerHTML);\n\n            if (td.getAttribute(SCOPE) === ROW) {\n                td.setAttribute(SCOPE, ROWGROUP);\n            }\n\n            $(bottomTd).remove();\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n    },\n    _getRowspan: function(td) {\n        return parseInt(td.getAttribute(ROWSPAN), 10) || 1;\n    }\n});\n\nvar SplitCellCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            type = this.options.type,\n            attr = type === \"row\" ? COLSPAN : ROWSPAN,\n            td = dom.closest(range.endContainer, [TD, TH]),\n            parent = dom.closest(td, [THEAD, TBODY]),\n            table = dom.closest(td, TABLE),\n            emptyTd = dom.createEmptyNode(this.editor.document, td.nodeName.toLowerCase());\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        if (type === \"row\" && $(td).is(\"[\" + attr + \"]\")) {\n            this._splitCellHorizontally(td, parent, attr, emptyTd);\n        } else if (type === \"column\" && $(td).is(\"[\" + attr + \"]\")) {\n            this._splitCellVertically(td, parent, attr, emptyTd);\n        }\n\n        if ($(td).prop(attr.toLowerCase()) <= 1) {\n            $(td).removeAttr(attr);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n    },\n    _getRowspanValue: function(td) {\n        return parseInt(td.getAttribute(ROWSPAN), 10);\n    },\n    _getColspanValue: function(td) {\n        return parseInt(td.getAttribute(COLSPAN), 10);\n    },\n    _splitCellHorizontally: function(td, parent, attr, emptyTd) {\n        var rowSpan = td.rowSpan,\n            colSpan = td.colSpan,\n            tdToAdd = $(emptyTd),\n            colSpanResult = Math.floor(colSpan / 2);\n\n            if (colSpanResult > 1) {\n                tdToAdd.attr(COLSPAN, colSpanResult);\n            }\n\n            if (rowSpan > 1) {\n                tdToAdd.attr(ROWSPAN, rowSpan);\n            }\n\n            $(td).prop(attr, colSpan - colSpanResult)\n                .after(tdToAdd);\n\n            $(td).width(td.offsetWidth);\n            tdToAdd.width(tdToAdd[0].offsetWidth);\n\n            if (td.hasAttribute(SCOPE)) {\n                if (td.getAttribute(SCOPE) === COLGROUP) {\n                    tdToAdd.attr(SCOPE, COL);\n                    if (!td.getAttribute(COLSPAN) || td.getAttribute(COLSPAN) === \"1\") {\n                        td.setAttribute(SCOPE, COL);\n                    }\n\n                    this._adjustColgroups(td.parentNode, parent.parentNode);\n                } else {\n                    tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                }\n            }\n    },\n    _splitCellVertically: function(td, parent, attr, emptyTd) {\n        var tr = dom.closest(td,TR),\n            columnIndex = parseInt($(td).attr(\"col-index\"), 10),\n            rowIndex = dom.findNodeIndex(tr, true),\n            rowSpan = td.rowSpan,\n            colSpan = td.colSpan,\n            rowSpanResult = Math.floor(rowSpan / 2),\n            targetRow = $(parent).find(TR).eq(rowIndex + rowSpan - rowSpanResult),\n            nextTd = this._findNextTdInRow(targetRow, columnIndex + colSpan),\n            tdToAdd = $(emptyTd);\n\n            if (rowSpanResult > 1) {\n                tdToAdd.attr(ROWSPAN, rowSpanResult);\n            }\n            if (colSpan > 1) {\n                tdToAdd.attr(COLSPAN, colSpan);\n            }\n\n            if (nextTd && nextTd.length) {\n                nextTd.before(tdToAdd);\n            } else {\n                targetRow.append(tdToAdd);\n            }\n\n            $(td).prop(attr, rowSpan - rowSpanResult);\n\n            if (td.hasAttribute(SCOPE)) {\n                if (td.getAttribute(SCOPE) === ROWGROUP) {\n                    tdToAdd.attr(SCOPE, ROW);\n                    if (!td.getAttribute(ROWSPAN) || td.getAttribute(ROWSPAN) === \"1\") {\n                        td.setAttribute(SCOPE, ROW);\n                    }\n                } else {\n                    tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                }\n            }\n    }\n});\n\nvar TableModificationTool = Tool.extend({\n    command: function(options) {\n        var commandsMap = {\n            row: {\n                insert: InsertRowCommand,\n                \"delete\": DeleteRowCommand,\n                merge: MergeCellsHorizontallyCommand,\n                split: SplitCellCommand\n            },\n            column: {\n                insert: InsertColumnCommand,\n                \"delete\": DeleteColumnCommand,\n                merge: MergeCellsVerticallyCommand,\n                split: SplitCellCommand\n            }\n        };\n\n        options = extend(options, this.options);\n        options.action = options.action || \"insert\";\n\n        return new commandsMap[options.type][options.action](options);\n    },\n\n    update: function(ui, nodes) {\n        var isFormatted = !tableFormatFinder.isFormatted(nodes),\n            toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n        if (isFormatted === true) {\n            toolbar.hide(ui);\n        } else {\n            toolbar.show(ui);\n        }\n    }\n});\n\nvar TableFormatCommand = FormatCommand.extend({\n    exec: function() {\n        var that = this;\n        var editor = that.editor;\n\n        FormatCommand.fn.exec.call(this);\n\n        if (editor.elementResizing) {\n            editor.elementResizing._showResizeHandles();\n        }\n    }\n});\n\n// var tableAlignFormatFinder = BlockFormatFinder.extend({\n\n// });\n\nvar TableFormatTool = BlockFormatTool.extend({\n    update: function(ui, nodes) {\n        var isTable = !tableFormatFinder.isFormatted(nodes),\n            isFormatted = this.options.finder.isFormatted(nodes, this.isTable),\n            toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n        if (toolbar) {\n            toolbar.toggle(ui, isFormatted);\n        }\n\n        if (isTable === true) {\n            toolbar.hide(ui);\n        } else {\n            toolbar.show(ui);\n        }\n    },\n    command: function(commandArguments) {\n        var that = this;\n\n        return new TableFormatCommand(extend(commandArguments, {\n            formatter: that.options.formatter\n        }));\n    },\n    isTable: function(node) {\n        return dom.is(node, \"table\");\n    }\n});\n\nextend(kendo.ui.editor, {\n    PopupTool: PopupTool,\n    TableCommand: TableCommand,\n    InsertTableTool: InsertTableTool,\n    TableFormatTool: TableFormatTool,\n    TableFormatCommand: TableFormatCommand,\n    TableModificationTool: TableModificationTool,\n    InsertRowCommand: InsertRowCommand,\n    InsertColumnCommand: InsertColumnCommand,\n    DeleteRowCommand: DeleteRowCommand,\n    DeleteColumnCommand: DeleteColumnCommand,\n    MergeCellsHorizontallyCommand: MergeCellsHorizontallyCommand,\n    MergeCellsVerticallyCommand: MergeCellsVerticallyCommand,\n    SplitCellCommand: SplitCellCommand\n});\n\n\nregisterTool(\"createTable\", new InsertTableTool({ ui: { popup: true, overflow: \"never\" } }));\n\nregisterTool(\"addColumnLeft\", new TableModificationTool({ type: \"column\", position: \"before\" }));\nregisterTool(\"addColumnRight\", new TableModificationTool({ type: \"column\" }));\nregisterTool(\"addRowAbove\", new TableModificationTool({ type: \"row\", position: \"before\" }));\nregisterTool(\"addRowBelow\", new TableModificationTool({ type: \"row\" }));\nregisterTool(\"deleteRow\", new TableModificationTool({ type: \"row\", action: \"delete\" }));\nregisterTool(\"deleteColumn\", new TableModificationTool({ type: \"column\", action: \"delete\" }));\nregisterTool(\"mergeCellsHorizontally\", new TableModificationTool({ type: \"row\", action: \"merge\" }));\nregisterTool(\"mergeCellsVertically\", new TableModificationTool({ type: \"column\", action: \"merge\" }));\nregisterTool(\"splitCellHorizontally\", new TableModificationTool({ type: \"row\", action: \"split\" }));\nregisterTool(\"splitCellVertically\", new TableModificationTool({ type: \"column\", action: \"split\" }));\n\nregisterFormat(\"tableAlignLeft\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"\", marginRight: \"auto\" } } },\n    { tags: [\"table\"], attr: { align: \"left\" } }\n]);\nregisterTool(\"tableAlignLeft\", new TableFormatTool({\n    format: formats.tableAlignLeft,\n    ui: {\n        togglable: true,\n        group: \"tableAlign\"\n    }\n}));\n\nregisterFormat(\"tableAlignCenter\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"auto\" } } },\n    { tags: [\"table\"], attr: { align: \"center\" } }\n]);\nregisterTool(\"tableAlignCenter\", new TableFormatTool({\n    format: formats.tableAlignCenter,\n    ui: {\n        togglable: true,\n        group: \"tableAlign\"\n    }\n}));\n\nregisterFormat(\"tableAlignRight\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"\" } } },\n    { tags: [\"table\"], attr: { align: \"right\" } }\n]);\nregisterTool(\"tableAlignRight\", new TableFormatTool({\n    format: formats.tableAlignRight,\n    ui: {\n        togglable: true,\n        group: \"tableAlign\"\n    }\n}));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        RangeUtils = editorNS.RangeUtils,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        browser = kendo.support.browser,\n        extend = $.extend;\n\nvar Clipboard = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n        var pasteCleanup = editor.options.pasteCleanup;\n        this.nonSplittableTagsOnPaste = editor.options.nonSplittableTagsOnPaste || [];\n        this.cleaners = [\n            new ScriptCleaner(pasteCleanup),\n            new TabCleaner(pasteCleanup),\n            new MSWordFormatCleaner(pasteCleanup),\n            new WebkitFormatCleaner(pasteCleanup),\n            new HtmlTagsCleaner(pasteCleanup),\n            new HtmlAttrCleaner(pasteCleanup),\n            new HtmlContentCleaner(pasteCleanup),\n            new CustomCleaner(pasteCleanup) //always keep at end\n        ];\n    },\n\n    htmlToFragment: function(html) {\n        var editor = this.editor,\n            doc = editor.document,\n            container = dom.create(doc, 'div'),\n            fragment = doc.createDocumentFragment();\n\n        container.innerHTML = html;\n\n        while (container.firstChild) {\n            fragment.appendChild(container.firstChild);\n        }\n\n        return fragment;\n    },\n\n    isBlock: function(html) {\n        return (/<(div|p|ul|ol|table|h[1-6])/i).test(html);\n    },\n\n    _startModification: function() {\n        var range;\n        var restorePoint;\n        var editor = this.editor;\n\n        if (this._inProgress) {\n            return;\n        }\n\n        this._inProgress = true;\n\n        range = editor.getRange();\n        restorePoint = new RestorePoint(range, editor.body);\n\n        dom.persistScrollTop(editor.document);\n\n        return { range: range, restorePoint: restorePoint };\n    },\n\n    _endModification: function(modificationInfo) {\n        editorNS._finishUpdate(this.editor, modificationInfo.restorePoint);\n\n        this.editor._selectionChange();\n\n        this._inProgress = false;\n    },\n\n    _contentModification: function(before, after) {\n        var that = this;\n        var editor = that.editor;\n        var modificationInfo = that._startModification();\n\n        if (!modificationInfo) {\n            return;\n        }\n\n        before.call(that, editor, modificationInfo.range);\n\n        setTimeout(function() {\n            after.call(that, editor, modificationInfo.range);\n\n            that._endModification(modificationInfo);\n        });\n    },\n\n    _removeBomNodes: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n\n        for (var i = 0; i < nodes.length; i++) {\n            nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue) || nodes[i].nodeValue;\n        }\n    },\n\n    _onBeforeCopy: function(range) {\n        var marker = new Marker();\n        marker.add(range);\n\n        this._removeBomNodes(range);\n\n        marker.remove(range);\n\n        this.editor.selectRange(range);\n    },\n\n    oncopy: function() {\n        this._onBeforeCopy(this.editor.getRange());\n    },\n\n    oncut: function() {\n        this._onBeforeCopy(this.editor.getRange());\n        this._contentModification($.noop, $.noop);\n    },\n\n    _fileToDataURL: function(blob) {\n        var deferred = $.Deferred();\n\n        var reader = new FileReader();\n\n        if (!(blob instanceof window.File) && blob.getAsFile) {\n            blob = blob.getAsFile();\n        }\n\n        reader.onload = deferred.resolve.bind(deferred);\n\n        reader.readAsDataURL(blob);\n\n        return deferred.promise();\n    },\n\n    _triggerPaste: function(html, options) {\n        var args = { html: html || \"\" };\n\n        args.html = args.html.replace(/\\ufeff/g, \"\");\n\n        this.editor.trigger(\"paste\", args);\n\n        this.paste(args.html, options || {});\n    },\n\n    _handleImagePaste: function(e) {\n        if (!('FileReader' in window) || (browser.msie && browser.version > 10)) {\n            return;\n        }\n\n        var clipboardData = e.clipboardData || e.originalEvent.clipboardData ||\n                    window.clipboardData || {};\n\n        var items = clipboardData.items || clipboardData.files;\n\n        return this._insertImages(items);\n    },\n\n    _insertImages: function(items) {\n        if (!items) {\n            return;\n        }\n\n        var images = $.grep(items, function(item) { return (/^image\\//i).test(item.type); });\n        var html = $.grep(items, function(item) { return (/^text\\/html/i).test(item.type); });\n\n        if (html.length || !images.length) {\n            return;\n        }\n\n        var modificationInfo = this._startModification();\n\n        if (!modificationInfo) {\n            return;\n        }\n\n        $.when.apply($, $.map(images, this._fileToDataURL))\n            .done((function() {\n                var results = Array.prototype.slice.call(arguments);\n                var html = $.map(results, function(e) {\n                    return '<img src=\"' + e.target.result + '\" />';\n                }).join(\"\");\n\n                this._triggerPaste(html);\n\n                this._endModification(modificationInfo);\n            }).bind(this));\n\n        return true;\n    },\n\n    onpaste: function(e) {\n        if (this.editor.body.contentEditable === \"false\") {\n            return;\n        }\n\n        if (this._handleImagePaste(e)) {\n            e.preventDefault();\n            return;\n        }\n\n        this.expandImmutablesIn();\n\n        this._contentModification(\n            function beforePaste(editor, range) {\n                var clipboardNode = dom.create(editor.document, 'div', {\n                        className: 'k-paste-container',\n                        innerHTML: \"\\ufeff\"\n                    });\n                var browser = kendo.support.browser;\n                var body = editor.body;\n\n                this._decoreateClipboardNode(clipboardNode, body);\n\n                body.appendChild(clipboardNode);\n\n                //Browser scrolls to clipboardNode\n                if (browser.webkit) {\n                    this._moveToCaretPosition(clipboardNode, range);\n                }\n\n                // text ranges are slow in IE10-, DOM ranges are buggy in IE9-10\n                if (browser.msie && browser.version < 11) {\n                    e.preventDefault();\n                    var r = editor.createRange();\n                    r.selectNodeContents(clipboardNode);\n                    editor.selectRange(r);\n                    var textRange = editor.document.body.createTextRange();\n                    textRange.moveToElementText(clipboardNode);\n                    $(body).off('paste');\n                    textRange.execCommand('Paste');\n                    $(body).on('paste', this.onpaste.bind(this));\n                } else {\n                    var clipboardRange = editor.createRange();\n                    clipboardRange.selectNodeContents(clipboardNode);\n                    editor.selectRange(clipboardRange);\n                }\n\n                range.deleteContents();\n            },\n            function afterPaste(editor, range) {\n                var html = \"\", containers;\n\n                editor.selectRange(range);\n\n                containers = $(editor.body).children(\".k-paste-container\");\n\n                containers.each(function() {\n                    var lastChild = this.lastChild;\n\n                    if (lastChild && dom.is(lastChild, 'br')) {\n                        dom.remove(lastChild);\n                    }\n\n                    html += this.innerHTML;\n                });\n\n                containers.remove();\n\n                this._triggerPaste(html, { clean: true });\n            }\n        );\n    },\n    ondragover: function(e) {\n        if (browser.msie || browser.edge) {\n            e.stopPropagation();\n            e.preventDefault();\n        }\n    },\n    ondrop: function(e) {\n        if (!('FileReader' in window)) {\n            return;\n        }\n\n        var dataTransfer = (e.originalEvent || e).dataTransfer || {};\n        var items = dataTransfer.items || dataTransfer.files;\n\n        if (this._insertImages(items)) {\n            e.preventDefault();\n        }\n    },\n    _decoreateClipboardNode: function(node, body) {\n        if (!browser.msie && !browser.webkit) {\n            return;\n        }\n\n        node = $(node);\n        node.css({\n            borderWidth: \"0px\",\n            width: \"0px\",\n            height: \"0px\",\n            overflow: \"hidden\",\n            margin: \"0\",\n            padding: \"0\"\n        });\n\n        if (browser.msie) {\n            //node inherits BODY styles and this causes the browser to add additional\n            var documentElement = $(body.ownerDocument.documentElement);\n\n            node.css({\n                fontVariant: \"normal\",\n                fontWeight: \"normal\",\n                lineSpacing: \"normal\",\n                lineHeight: \"normal\",\n                textDecoration: \"none\"\n            });\n            var color = documentElement.css(\"color\");\n            if (color) {\n                node.css(\"color\", color);\n            }\n            var fontFamily = documentElement.css(\"fontFamily\");\n            if (fontFamily) {\n                node.css(\"fontFamily\", fontFamily);\n            }\n            var fontSize = documentElement.css(\"fontSize\");\n            if (fontSize) {\n                node.css(\"fontSize\", fontSize);\n            }\n        }\n    },\n    _moveToCaretPosition: function(node, range) {\n        var that = this;\n        var body = that.editor.body;\n        var nodeOffset = dom.offset(node, body);\n        var caretOffset = that._caretOffset(range, body);\n        var translateX = caretOffset.left - nodeOffset.left;\n        var translateY = caretOffset.top - nodeOffset.top;\n        var translate = \"translate(\" + translateX + \"px,\" + translateY + \"px)\";\n\n        $(node).css({\n            \"-webkit-transform\": translate,\n            \"transform\": translate\n        });\n    },\n    _caretOffset: function(range, body) {\n        var editor = this.editor;\n        var caret = dom.create(editor.document, 'span', { innerHTML: \"\\ufeff\" });\n        var startContainer = range.startContainer;\n        var rangeChanged;\n\n        if (range.collapsed) {\n            var isStartTextNode = dom.isDataNode(startContainer);\n            if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                dom.insertBefore(caret, startContainer);\n            } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                dom.insertAfter(caret, startContainer);\n            } else {\n                range.insertNode(caret);\n                rangeChanged = true;\n            }\n        } else {\n            startContainer = startContainer === body ?\n                startContainer.childNodes[range.startOffset] : startContainer;\n            dom.insertBefore(caret, startContainer);\n        }\n\n        var offset = dom.offset(caret, body);\n        var prev = caret.previousSibling;\n        var next = caret.nextSibling;\n\n        dom.remove(caret);\n\n        if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n            var prevLength = prev.length;\n            next.data = prev.data + next.data;\n            range.setStart(next, prevLength);\n            dom.remove(prev);\n\n            range.collapse(true);\n            editor.selectRange(range);\n        }\n\n        return offset;\n    },\n\n    expandImmutablesIn: function(range) {\n        var editor = this.editor;\n        if (editor && editor.options.immutables) {\n            var body = editor.body;\n            range = range || editor.getRange();\n            kendo.ui.editor.Immutables.expandImmutablesIn(range);\n            if (range.startContainer === body && range.startOffset === 0) {\n                var doc = body.ownerDocument;\n                var bomNode = doc.createTextNode(\"\\ufeff\");\n                body.insertBefore(bomNode, body.childNodes[0]);\n                range.setStartBefore(bomNode);\n            }\n            editor.selectRange(range);\n        }\n    },\n\n    splittableParent: function(block, node) {\n        var parentNode, body;\n\n        if (block) {\n            return dom.closestEditableOfType(node, ['p', 'ul', 'ol']) || node.parentNode;\n        }\n\n        parentNode = node.parentNode;\n        body = node.ownerDocument.body;\n\n        if (dom.isInline(parentNode)) {\n            while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                parentNode = parentNode.parentNode;\n            }\n        }\n\n        return parentNode;\n    },\n\n    paste: function(html, options) {\n        var editor = this.editor,\n            nonSplittableTagsOnPaste = this.nonSplittableTagsOnPaste,\n            preventSplit = false,\n            unwrapPasted = false,\n            i, l, childNodes, isList;\n\n        this.expandImmutablesIn();\n\n        options = extend({ clean: false, split: true }, options);\n\n        if (!options.skipCleaners) {\n            for (i = 0, l = this.cleaners.length; i < l; i++) {\n                if (this.cleaners[i].applicable(html)) {\n                    html = this.cleaners[i].clean(html);\n                }\n            }\n        }\n\n        if (options.clean) {\n            // remove br elements which immediately precede block elements\n            html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/ig, \"$3\");\n            // remove empty inline elements\n            html = html.replace(/<(a|span)[^>]*><\\/\\1>/ig, \"\");\n        }\n\n        html = html.replace(/<(a|span|font)([^>]*)> <\\/\\1>/ig, \"<$1$2>&nbsp;</$1>\");\n\n        // It is possible in IE to copy just <li> tags\n        html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n\n        var block = this.isBlock(html);\n\n        editor.focus();\n        var range = editor.getRange();\n        range.deleteContents();\n\n        if (range.startContainer == editor.document) {\n            range.selectNodeContents(editor.body);\n        }\n\n        var marker = new Marker();\n        var caret = marker.addCaret(range);\n\n        var parent = this.splittableParent(block, caret);\n        var unwrap = false;\n\n        for (i = 0; i < nonSplittableTagsOnPaste.length; i++) {\n            const splitter = nonSplittableTagsOnPaste[i],\n                tag = splitter.tag || splitter;\n\n            if (dom.is(parent, tag)) {\n                preventSplit = true;\n                unwrapPasted = splitter.unwrap !== false;\n                break;\n            }\n        }\n\n        var splittable = parent != editor.body && !dom.is(parent, \"td\") && !preventSplit;\n\n        if (options.split && splittable && (block || dom.isInline(parent))) {\n            range.selectNode(caret);\n            RangeUtils.split(range, parent, true);\n            unwrap = true;\n        }\n\n        var fragment = this.htmlToFragment(html);\n\n        if (fragment.firstChild && fragment.firstChild.className === \"k-paste-container\") {\n            var fragmentsHtml = [];\n            for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n            }\n\n            fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n        }\n\n        childNodes = fragment.childNodes;\n\n        if (unwrapPasted) {\n            isList = dom.list(childNodes[0]);\n            dom.unwrap(childNodes[0]);\n\n            if (isList) {\n                range.selectNode(caret.parentNode);\n            }\n        }\n\n        $(childNodes)\n            .filter(\"table\").addClass(\"k-table\").end()\n            .find(\"table\").addClass(\"k-table\");\n\n        $(childNodes).each(function(index, elm) {\n           if (dom.isBlock(elm) && !dom.isSelfClosing(elm) && elm.innerHTML === \"\") {\n                elm.appendChild(editor.document.createTextNode(\"\\ufeff\"));\n           }\n        });\n\n        range.insertNode(fragment);\n\n        parent = this.splittableParent(block, caret);\n        if (unwrap) {\n            while (caret.parentNode != parent) {\n                dom.unwrap(caret.parentNode);\n            }\n\n            dom.unwrap(caret.parentNode);\n        }\n\n        dom.normalize(range.commonAncestorContainer);\n        caret.style.display = 'inline';\n        dom.restoreScrollTop(editor.document);\n        dom.scrollTo(caret);\n        marker.removeCaret(range);\n\n        var rangeEnd = range.commonAncestorContainer.parentNode;\n        if (range.collapsed && dom.name(rangeEnd) == \"tbody\" || range.collapsed && dom.name(rangeEnd) == \"thead\") {\n            range.setStartAfter($(rangeEnd).closest(\"table\")[0]);\n            range.collapse(true);\n        }\n\n        var focusedTable = $(range.commonAncestorContainer.parentNode).closest(\"table\");\n\n        if (focusedTable.get(0)) {\n            var siblingNodes = focusedTable.parent().contents();\n            var lastSiblingIndex = siblingNodes.length - 1;\n            var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n            while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n                lastSiblingIndex -= 1;\n                lastSibling = siblingNodes.get(lastSiblingIndex);\n            }\n\n            if (lastSibling === focusedTable.get(0) && !focusedTable.parents(\"table\").length) {\n                dom.insertAfter(dom.createEmptyNode(editor.document, \"p\"), focusedTable[0]);\n            }\n        }\n\n        editor.selectRange(range);\n    }\n});\n\nvar Cleaner = Class.extend({\n    init: function(options) {\n        this.options = options || {};\n        this.replacements = [];\n    },\n\n    clean: function(html, customReplacements) {\n        var that = this,\n            replacements = customReplacements || that.replacements,\n            i, l;\n\n        for (i = 0, l = replacements.length; i < l; i += 2) {\n            html = html.replace(replacements[i], replacements[i + 1]);\n        }\n\n        return html;\n    }\n});\n\nvar ScriptCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.replacements = [\n            /<(\\/?)script([^>]*)>/i, \"<$1telerik:script$2>\"\n        ];\n    },\n\n    applicable: function(html) {\n        return !this.options.none && (/<script[^>]*>/i).test(html);\n    }\n});\n\nvar TabCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        var replacement = ' ';\n        this.replacements = [\n            /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi, replacement,\n            /\\t/gi, replacement,\n            /&nbsp;&nbsp; &nbsp;/gi, replacement\n        ];\n    },\n\n    applicable: function(html) {\n        return (/&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i).test(html);\n    }\n});\n\nvar MSWordFormatCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.junkReplacements = [\n            /<\\?xml[^>]*>/gi, '',\n            /<!--(.|\\n)*?-->/g, '', /* comments */\n            /&quot;/g, \"'\", /* encoded quotes (in attributes) */\n            /<o:p>&nbsp;<\\/o:p>/ig, '&nbsp;',\n            /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/ig, '', /* external references and namespaced tags */\n            /<\\/o>/g, ''\n        ];\n        this.replacements = this.junkReplacements.concat([\n            /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g, '$1',\n            /<br><br>/g, '<BR><BR>',\n            /<br>\\n/g, '<br/>',\n            /<br>(?!\\n)/g, ' ',\n            /<table([^>]*)>(\\s|&nbsp;)+<t/gi, '<table$1><t',\n            /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi, '',\n            /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi, '',\n            /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi, '',\n            /<BR><BR>/g, '<br>',\n            /^\\s*(&nbsp;)+/gi, '',\n            /(&nbsp;|<br[^>]*>)+\\s*$/gi, '',\n            /mso-[^;\"]*;?/ig, '', /* office-related CSS attributes */\n            /<(\\/?)b(\\s[^>]*)?>/ig, '<$1strong$2>',\n            /<(\\/?)font(\\s[^>]*)?>/ig, this.convertFontMatch,\n            /<(\\/?)i(\\s[^>]*)?>/ig, '<$1em$2>',\n            /style=([\"|'])\\s*\\1/g, '', /* empty style attributes */\n            /(<br[^>]*>)?\\n/g, function($0, $1) { return $1 ? $0 : ' '; } /* phantom extra line feeds */\n        ]);\n    },\n\n    convertFontMatch: function(match, closing, args) {\n        var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n        var face = faceRe.exec(args);\n        var family = args && face && face[1];\n\n        if (closing) {\n            return '</span>';\n        } else if (family) {\n            return '<span style=\"font-family:' + family + '\">';\n        } else {\n            return '<span>';\n        }\n    },\n\n    applicable: function(html) {\n        return (/class=\"?Mso/i).test(html) ||\n               (/style=\"[^\"]*mso-/i).test(html) ||\n               (/urn:schemas-microsoft-com:office/).test(html);\n    },\n\n    stripEmptyAnchors: function(html) {\n        return html.replace(/<a([^>]*)>\\s*<\\/a>/ig, function(a, attributes) {\n            if (!attributes || attributes.indexOf(\"href\") < 0) {\n                return \"\";\n            }\n\n            return a;\n        });\n    },\n\n    listType: function(p, listData) {\n        var html = p.innerHTML;\n        var text = dom.innerText(p);\n\n        var startingSymbol;\n        var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n        var symbol = matchSymbol && matchSymbol[1];\n        var isNumber = /^[a-z\\d]/i.test(symbol);//including alpha-numeric and roman numerals\n\n        var trimStartText = function(text) {\n            return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n        };\n\n        if (matchSymbol) {\n            startingSymbol = true;\n        }\n\n        html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\u00a0');\n\n        if ((!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html)) ||\n            (startingSymbol && /^.\\u00a0+/.test(html)) ||\n            (symbol && !isNumber && listData)) {\n            return {\n                tag: 'ul',\n                style: this._guessUnorderedListStyle(trimStartText(text))\n            };\n        }\n\n        if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n            return {\n                tag: 'ol',\n                style: this._guessOrderedListStyle(trimStartText(text))\n            };\n        }\n    },\n\n    _convertToLi: function(p) {\n        var content;\n\n        if (p.childNodes.length == 1) {\n            content = p.firstChild.nodeType === dom.nodeTypes.TEXT_NODE ? dom.innerText(p) : p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, \"\");\n            content = this._checkForBullet(content);\n        } else {\n            content = this._getHtmlNoBullet(p);\n        }\n\n        dom.remove(p);\n\n        return dom.create(document, 'li', { innerHTML: content });\n    },\n\n    _checkForBullet: function(html) {\n        var p = dom.create(document, 'p', { innerHTML: html });\n        var bulletRgx = /^\\s*\\w+[\\.\\)]\\s+/;\n\n        if (bulletRgx.test(p.innerText)) {\n            return this._getHtmlNoBullet(p);\n        }\n\n        return html;\n    },\n\n    _getHtmlNoBullet: function(element) {\n        var content,\n            name = dom.name(element);\n\n        dom.remove(element.firstChild);\n\n        // check for roman numerals\n        if (element.firstChild.nodeType == 3) {\n            if (/^[ivxlcdm]+\\.$/i.test(element.firstChild.nodeValue)) {\n                dom.remove(element.firstChild);\n            }\n        }\n\n        if (/^(&nbsp;|\\s)+$/i.test(element.firstChild.innerHTML)) {\n            dom.remove(element.firstChild);\n        }\n\n        if (name != \"p\") {\n            content = \"<\" + name + \">\" + element.innerHTML + \"</\" + name + \">\";\n        } else {\n            content = element.innerHTML;\n        }\n\n        return content;\n    },\n\n    _guessUnorderedListStyle: function(symbol) {\n        if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n            return null;//return \"disc\"; //default CSS value\n        } else if (/^o/.test(symbol)) {\n            return \"circle\";\n        } else {\n            return \"square\";\n        }\n    },\n    _guessOrderedListStyle: function(symbol) {\n        var listType = null;\n        if (!/^\\d/.test(symbol)) {\n            listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') +\n                       (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n        }\n\n        return listType;\n    },\n\n    extractListLevels: function(html) {\n        var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n\n        html = html.replace(msoListRegExp, function(match, list, level) {\n            return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n        });\n\n        return html;\n    },\n\n    _createList: function(type, styleType) {\n        return dom.create(document, type, {\n            style: { listStyleType: styleType }\n        });\n    },\n\n    lists: function(placeholder) {\n        var blockChildren = $(placeholder).find(dom.blockElements.join(',')),\n            lastMargin = -1,\n            name,\n            levels = {},\n            li,\n            rootMargin,\n            rootIndex,\n            lastRootLi,\n            isLastRootLi,\n            rootList,\n            i, p, type, margin, list, listData,\n            acceptedNameTags = [\"p\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"],\n            isParentTable = false;\n\n        for (i = 0; i < blockChildren.length; i++) {\n            p = blockChildren[i];\n            listData = $(p).data();\n            var listIndex = listData.list;\n            name = dom.name(p);\n            isParentTable = !!$(p).parents(\"table\").length;\n\n            if (isParentTable) {\n                continue;\n            }\n\n            var listType = this.listType(p, listData);\n            type = listType && listType.tag;\n\n            if (!type || acceptedNameTags.indexOf(name) < 0) {\n                if (!p.innerHTML) {\n                    dom.remove(p);\n                } else if (li && !isLastRootLi) {\n                    li.appendChild(p);\n                }\n                continue;\n            }\n\n            // not supported list levels in ie\n            if (browser.msie) {\n                continue;\n            }\n\n            margin = listData.level || parseFloat(p.style.marginLeft || 0);\n\n            var levelType = type + listIndex;\n            if (!levels[margin]) {\n                levels[margin] = {};\n            }\n\n            if (!rootMargin || rootMargin < 0) {\n                rootMargin = margin;\n                rootIndex = listIndex;\n                lastRootLi = $(placeholder).find(\"[data-list='\" + rootIndex + \"']\").last()[0];\n                rootList = this._createList(type, listType.style);\n                dom.insertBefore(rootList, p);\n                lastMargin = margin;\n                levels[margin][levelType] = rootList;\n            }\n\n            isLastRootLi = lastRootLi === p;\n\n            list = levels[margin][levelType];\n\n            if (margin > lastMargin || !list) {\n                list = this._createList(type, listType.style);\n                levels[margin][levelType] = list;\n                li.appendChild(list);\n            }\n\n            li = this._convertToLi(p);\n            list.appendChild(li);\n\n            if (isLastRootLi) {\n                rootMargin = lastMargin = -1;\n            } else {\n                lastMargin = margin;\n            }\n        }\n    },\n\n    removeAttributes: function(element) {\n        var attributes = element.attributes,\n            i = attributes.length,\n            significantStyles = [],\n            isSignificantCss = function(val) {\n                var significantCss = [\"border\", \"background\", \"padding\"];\n\n                return significantCss.filter(function(cssAttr) {\n                    return val.trim().indexOf(cssAttr) === 0;\n                }).length > 0;\n            },\n            addSignificantStyles = function(val) {\n                if (isSignificantCss(val)) {\n                    significantStyles.push(val.trim());\n                }\n            },\n            attr, attributeName, attributeValues;\n\n        while (i--) {\n            if (dom.name(attributes[i]) != \"colspan\") {\n                attr = attributes[i];\n                attributeName = attr.name;\n\n                if (attributeName === \"style\" && (element.nodeName === \"TD\" || element.nodeName === \"TH\")) {\n                    attributeValues = attr.value.split(\";\");\n                    attributeValues.forEach(addSignificantStyles);\n                }\n\n                element.removeAttributeNode(attributes[i]);\n            }\n        }\n\n        if (significantStyles.length > 0) {\n            element.setAttribute(\"style\", significantStyles.join(\";\"));\n        }\n    },\n\n    createColGroup: function(row) {\n        var cells = row.cells;\n        var table = $(row).closest(\"table\");\n        var colgroup = table.children(\"colgroup\");\n\n        if (cells.length < 2) {\n            return;\n        } else if (colgroup.length) {\n            cells = colgroup.children();\n            colgroup[0].parentNode.removeChild(colgroup[0]);\n        }\n\n        colgroup = $($.map(cells, function(cell) {\n                var width = cell.width;\n                if (width && parseInt(width, 10) !== 0) {\n                    return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                }\n\n                return \"<col />\";\n            }).join(\"\"));\n\n        // jquery 1.9/2.0 discrepancy\n        if (!colgroup.is(\"colgroup\")) {\n            colgroup = $(\"<colgroup/>\").append(colgroup);\n        }\n\n        colgroup.prependTo(table);\n    },\n\n    convertHeaders: function(row) {\n        var cells = row.cells,\n            i,\n            boldedCells = $.map(cells, function(cell) {\n                var child = $(cell).children(\"p\").children(\"strong\")[0];\n\n                if (child && dom.name(child) == \"strong\") {\n                    return child;\n                }\n            });\n\n        if (boldedCells.length == cells.length) {\n            for (i = 0; i < boldedCells.length; i++) {\n                dom.unwrap(boldedCells[i]);\n            }\n\n            $(row).closest(\"table\")\n                .find(\"colgroup\").after(\"<thead></thead>\").end()\n                .find(\"thead\").append(row);\n\n            for (i = 0; i < cells.length; i++) {\n                dom.changeTag(cells[i], \"th\");\n            }\n        }\n    },\n\n    removeParagraphs: function(cells) {\n        var i, j, len, cell, paragraphs;\n\n        for (i = 0; i < cells.length; i++) {\n            this.removeAttributes(cells[i]);\n\n            // remove paragraphs and insert line breaks between them\n            cell = $(cells[i]);\n            paragraphs = cell.children(\"p\");\n\n            for (j = 0, len = paragraphs.length; j < len; j++) {\n                if (j < len - 1) {\n                    dom.insertAfter(dom.create(document, \"br\"), paragraphs[j]);\n                }\n\n                dom.unwrap(paragraphs[j]);\n            }\n        }\n    },\n\n    removeTextNodes: function(trs) {\n        var i, j, childNodes, currentNode, row;\n\n        for (i = 0; i < trs.length; i++) {\n            row = trs[i];\n            childNodes = row.childNodes;\n\n            for (j = 0; j < childNodes.length; j++) {\n                currentNode = childNodes[j];\n\n                if (currentNode.nodeType === dom.nodeTypes.TEXT_NODE) {\n                    row.removeChild(currentNode);\n                }\n            }\n        }\n    },\n\n    tables: function(placeholder) {\n        var tables = $(placeholder).find(\"table\"),\n            that = this,\n            rows,\n            firstRow, longestRow, i, j;\n\n        for (i = 0; i < tables.length; i++) {\n            rows = tables[i].rows;\n            longestRow = firstRow = rows[0];\n\n            for (j = 1; j < rows.length; j++) {\n                if (rows[j].cells.length > longestRow.cells.length) {\n                    longestRow = rows[j];\n                }\n            }\n\n            that.createColGroup(longestRow);\n            that.convertHeaders(firstRow);\n\n            that.removeAttributes(tables[i]);\n\n            that.removeParagraphs(tables.eq(i).find(\"td,th\"));\n\n            that.removeTextNodes(tables.eq(i).find(\"tr\"));\n        }\n    },\n\n    headers: function(placeholder) {\n        var titles = $(placeholder).find(\"p.MsoTitle\");\n\n        for (var i = 0; i < titles.length; i++) {\n            dom.changeTag(titles[i], \"h1\");\n        }\n    },\n\n    removeFormatting: function(placeholder) {\n        $(placeholder).find(\"*\").each(function() {\n            $(this).css({\n                fontSize: \"\",\n                fontFamily: \"\"\n            });\n\n            if (!this.getAttribute(\"style\") && !this.style.cssText) {\n                this.removeAttribute(\"style\");\n            }\n        });\n    },\n\n    clean: function(html) {\n        var that = this, placeholder;\n        var filters = this.options;\n\n        if (filters.none) {\n            html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n            html = that.stripEmptyAnchors(html);\n        } else {\n\n            html = filters.msConvertLists ? this.extractListLevels(html) : html;\n            html = Cleaner.fn.clean.call(that, html);\n            html = that.stripEmptyAnchors(html);\n\n            placeholder = dom.create(document, 'div', { innerHTML: html });\n            that.headers(placeholder);\n\n            if (filters.msConvertLists) {\n                that.lists(placeholder);\n            }\n            that.tables(placeholder);\n\n            if (filters.msAllFormatting) {\n                that.removeFormatting(placeholder);\n            }\n\n            html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/ig, '$1');\n        }\n\n        return html;\n    }\n});\n\nvar WebkitFormatCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.replacements = [\n            /\\s+class=\"Apple-style-span[^\"]*\"/gi, '',\n            /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi, '<$1',\n            /^<div>(.*)<\\/div>$/, '$1'\n        ];\n    },\n\n    applicable: function(html) {\n        return (/class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i).test(html);\n    }\n});\n\nvar DomCleaner = Cleaner.extend({\n    clean: function(html) {\n        var container = dom.create(document, 'div', { innerHTML: html });\n        container = this.cleanDom(container);\n        return container.innerHTML;\n    },\n\n    cleanDom: function(container) {\n        return container;\n    }\n});\n\nvar HtmlTagsCleaner = DomCleaner.extend({\n    cleanDom: function(container) {\n        var tags = this.collectTags();\n\n        $(container).find(tags).each(function() {\n            dom.unwrap(this);\n        });\n\n        return container;\n    },\n\n    collectTags: function() {\n        if (this.options.span) {\n            return \"span\";\n        }\n    },\n\n    applicable: function() {\n        return this.options.span;\n    }\n});\n\nvar HtmlAttrCleaner = DomCleaner.extend({\n    cleanDom: function(container) {\n        var attributes = this.collectAttr();\n        var nodes = $(container).find(\"[\" + attributes.join(\"],[\") + \"]\");\n        nodes.removeAttr(attributes.join(\" \"));\n\n        return container;\n    },\n\n    collectAttr: function() {\n        if (this.options.css) {\n            return [\"class\", \"style\"];\n        }\n\n        return [];\n    },\n\n    applicable: function() {\n        return this.options.css;\n    }\n});\n\nvar TextContainer = function() {\n    this.text = \"\";\n    this.add = function(text) {\n        this.text += text;\n    };\n};\n\nvar HtmlTextLines = Class.extend({\n    init: function(separators) {\n        this.separators = separators || {\n                text: \" \",\n                line: \"<br/>\"\n            };\n        this.lines = [];\n        this.inlineBlockText = [];\n        this.resetLine();\n    },\n\n    appendText: function(text) {\n        if (text.nodeType === 3) {\n            text = text.nodeValue;\n        }\n\n        this.textContainer.add(text);\n    },\n\n    appendInlineBlockText: function(text) {\n        this.inlineBlockText.push(text);\n    },\n\n    flashInlineBlockText: function() {\n        if (this.inlineBlockText.length) {\n            this.appendText(this.inlineBlockText.join(\" \"));\n            this.inlineBlockText = [];\n        }\n    },\n\n    endLine: function() {\n        this.flashInlineBlockText();\n        this.resetLine();\n    },\n\n    html: function() {\n        var separators = this.separators;\n        var result = \"\";\n        var lines = this.lines;\n\n        this.flashInlineBlockText();\n\n        for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n            var line = lines[i];\n            for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                var text = line[j].text;\n                result += text;\n                if (j !== jl1) {\n                    result += separators.text;\n                }\n            }\n            if (i !== il1) {\n                result += separators.line;\n            }\n        }\n\n        return result;\n    },\n\n    resetLine: function() {\n        this.textContainer = new TextContainer();\n        this.line = [];\n        this.line.push(this.textContainer);\n        this.lines.push(this.line);\n    }\n});\n\nvar DomEnumerator = Class.extend({\n    init: function(callback) {\n        this.callback = callback;\n    },\n    enumerate: function(node) {\n        if (!node) {\n            return;\n        }\n\n        var preventDown = this.callback(node);\n\n        var child = node.firstChild;\n        if (!preventDown && child) {\n            this.enumerate(child);\n        }\n\n        this.enumerate(node.nextSibling);\n    }\n});\n\nvar HtmlContentCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n        this.hasText = false; //unpleasant flag to prevent an empty line at the beginning of the generated content.\n        this.enumerator = new DomEnumerator(this.buildText.bind(this));\n    },\n\n    clean: function(html) {\n        var container = dom.create(document, 'div', { innerHTML: html });\n\n        return this.cleanDom(container);\n    },\n\n    cleanDom: function(container) {\n        this.separators = this.getDefaultSeparators();\n        this.htmlLines = new HtmlTextLines(this.separators);\n        this.enumerator.enumerate(container.firstChild);\n        this.hasText = false;\n\n        return this.htmlLines.html();\n    },\n\n    buildText: function(node) {\n        if (dom.isDataNode(node)) {\n            if (dom.isEmptyspace(node)) {\n                return;\n            }\n            this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n            this.hasText = true;\n        } else if (dom.isBlock(node) && this.hasText) {\n            var action = this.actions[dom.name(node)] || this.actions.block;\n            return action(this, node);\n        } else if (dom.isBr(node)) {\n            this.htmlLines.appendText(this.separators.line);\n        }\n    },\n\n    applicable: function() {\n        var o = this.options;\n        return o.all || o.keepNewLines;\n    },\n\n    getDefaultSeparators: function() {\n        if (this.options.all) {\n            return { text: \" \", line: \" \" };\n        } else {\n            return { text: \" \", line: \"<br/>\" };\n        }\n    },\n\n    actions: {\n        ul: $.noop,\n        ol: $.noop,\n        table: $.noop,\n        thead: $.noop,\n        tbody: $.noop,\n        td: function(cleaner, node) {\n            var tdCleaner = new HtmlContentCleaner({ all: true });\n\n            var cellText = tdCleaner.cleanDom(node);\n            cleaner.htmlLines.appendInlineBlockText(cellText);\n\n            return true;\n        },\n\n        block: function(cleaner) {\n            cleaner.htmlLines.endLine();\n        }\n    }\n});\n\nvar CustomCleaner = Cleaner.extend({\n    clean: function(html) {\n        return this.options.custom(html);\n    },\n\n    applicable: function() {\n        return typeof(this.options.custom) === \"function\";\n    }\n});\n\nextend(editorNS, {\n    Clipboard: Clipboard,\n    Cleaner: Cleaner,\n    ScriptCleaner: ScriptCleaner,\n    TabCleaner: TabCleaner,\n    MSWordFormatCleaner: MSWordFormatCleaner,\n    WebkitFormatCleaner: WebkitFormatCleaner,\n    HtmlTagsCleaner: HtmlTagsCleaner,\n    HtmlAttrCleaner: HtmlAttrCleaner,\n    HtmlContentCleaner: HtmlContentCleaner,\n    HtmlTextLines: HtmlTextLines,\n    CustomCleaner: CustomCleaner\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    editorNS = kendo.ui.editor,\n    RangeUtils = editorNS.RangeUtils,\n    dom = editorNS.Dom,\n    RestorePoint = editorNS.RestorePoint,\n    Marker = editorNS.Marker,\n    browser = kendo.support.browser,\n    bomSpan = \"<span  class='k-br'>\\ufeff</span>\",\n    extend = $.extend;\nvar nodeTypes = dom.nodeTypes;\nvar PREVIOUS_SIBLING = \"previousSibling\";\n\nfunction selected(node, range) {\n    return range.startContainer === node && range.endContainer === node &&\n        range.startOffset === 0 && range.endOffset == node.childNodes.length;\n}\n\nfunction getSibling(node, direction, condition) {\n    var sibling = node ? node[direction] : null;\n\n    while (sibling && !condition(sibling)) {\n        sibling = sibling[direction];\n    }\n\n    return sibling;\n}\n\nvar tableCells = \"td,th,caption\";\nvar tableCellsWrappers = \"table,tbody,thead,tfoot,tr\";\nvar tableElements = tableCellsWrappers + \",\" + tableCells;\nvar inTable = function(range) { return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers); };\n\nvar RemoveTableContent = Class.extend({\n    remove: function(range) {\n        var that = this;\n        var marker = new Marker();\n        marker.add(range, false);\n\n        var nodes = RangeUtils.getAll(range, function(node) { return $(node).is(tableElements); });\n        var doc = RangeUtils.documentFromRange(range);\n        var start = marker.start;\n        var end = marker.end;\n        var cellsTypes = tableCells.split(\",\");\n        var startCell = dom.parentOfType(start, cellsTypes);\n        var endCell = dom.parentOfType(end, cellsTypes);\n        that._removeContent(start, startCell, true);\n        that._removeContent(end, endCell, false);\n        $(nodes).each(function(i, node) {\n            node = $(node);\n            (node.is(tableCells) ? node : node.find(tableCells)).each(function(j, cell) {\n                cell.innerHTML = \"&#65279;\";\n            });\n        });\n        if (startCell && !start.previousSibling) {\n            dom.insertBefore(doc.createTextNode(\"\\ufeff\"), start);\n        }\n        if (endCell && !end.nextSibling) {\n            dom.insertAfter(doc.createTextNode(\"\\ufeff\"), end);\n        }\n        if (startCell) {\n            range.setStartBefore(start);\n        } else if (nodes[0]) {\n            startCell = $(nodes[0]);\n            startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n            if (startCell.length) {\n                range.setStart(startCell.get(0), 0);\n            }\n        }\n\n        range.collapse(true);\n\n        dom.remove(start);\n        dom.remove(end);\n    },\n    _removeContent: function(start, top, forwards) {\n        if (top) {\n            var sibling = forwards ? \"nextSibling\" : \"previousSibling\",\n                next,\n                getNext = function(node) {\n                    while (node && !node[sibling]) {\n                        node = node.parentNode;\n                    }\n                    return node && $.contains(top, node) ? node[sibling] : null;\n                };\n            start = getNext(start);\n            while (start) {\n                next = getNext(start);\n                dom.remove(start);\n                start = next;\n            }\n        }\n    }\n});\n\nvar TypingHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n\n    keydown: function(e) {\n        var that = this,\n            editor = that.editor,\n            keyboard = editor.keyboard,\n            isTypingKey = keyboard.isTypingKey(e),\n            evt = extend($.Event(), e);\n\n        that.editor.trigger(\"keydown\", evt);\n\n        if (evt.isDefaultPrevented()) {\n            e.preventDefault();\n            return true;\n        }\n\n        if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n            var range = editor.getRange();\n            var body = editor.body;\n            that.startRestorePoint = new RestorePoint(range, body);\n\n            if (inTable(range)) {\n                var removeTableContent = new RemoveTableContent(editor);\n                removeTableContent.remove(range);\n                editor.selectRange(range);\n            }\n\n            if (browser.webkit && !range.collapsed && selected(body, range)) {\n                body.innerHTML = \"\";\n            }\n\n            if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                backspaceHandler.deleteSelection(range);\n            }\n\n            keyboard.startTyping(function() {\n                that._removeBomSpan();\n                that.endRestorePoint = editorNS._finishUpdate(editor, that.startRestorePoint);\n            });\n\n            return true;\n        }\n\n        return false;\n    },\n\n    keyup: function(e) {\n        var keyboard = this.editor.keyboard;\n\n        this.editor.trigger(\"keyup\", e);\n\n        if (keyboard.isTypingInProgress()) {\n            keyboard.endTyping();\n            return true;\n        }\n\n        return false;\n    },\n\n    _removeBomSpan: function() {\n        var node = this.editor.getRange().commonAncestorContainer;\n\n        if (!dom.emptyNode(node)) {\n            if (node.nodeType === 3) {\n                node = node.parentNode;\n            }\n\n            if (dom.insignificant(node)) {\n                // typing in an insignificant node\n                // make it significant\n                node.textContent = dom.stripBom(node.textContent);\n                dom.unwrap(node);\n            }\n        }\n    }\n});\n\nvar BackspaceHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n    _addCaret: function(container) {\n        var caret = dom.create(this.editor.document, \"a\");\n\n        // Only if not Chrome: Make sure to include cared in the formatted inline node\n        if (!kendo.support.browser.chrome && container.firstChild &&\n            container.firstChild.nodeType === nodeTypes.ELEMENT_NODE) {\n\n            container = container.firstChild;\n        }\n\n        dom.insertAt(container, caret, 0);\n        dom.stripBomNode(caret.previousSibling);\n        dom.stripBomNode(caret.nextSibling);\n        return caret;\n    },\n    _restoreCaret: function(caret) {\n        var range = this.editor.createRange();\n\n        if (!caret.nextSibling && dom.isDataNode(caret.previousSibling)) {\n            range.setStart(caret.previousSibling, caret.previousSibling.length);\n        } else {\n            range.setStartAfter(caret);\n        }\n\n        range.collapse(true);\n        this.editor.selectRange(range);\n        dom.remove(caret);\n    },\n    _handleDelete: function(range) {\n        var node = range.endContainer;\n        var block = dom.closestEditableOfType(node, dom.blockElements);\n\n        if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n            // join with next sibling\n            var next = dom.next(block);\n            if (!next || dom.name(next) != \"p\") {\n                return false;\n            }\n\n            var caretPlaceholder = dom.significantChildNodes(next)[0];\n            caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder)) ? caretPlaceholder : next;\n            var caret = this._addCaret(caretPlaceholder);\n\n            this._merge(block, next);\n\n            this._restoreCaret(caret);\n\n            return true;\n        }\n\n        return false;\n    },\n    _cleanBomBefore: function(range) {\n        var offset = range.startOffset;\n        var node = range.startContainer;\n        var text = node.nodeValue;\n        var count = 0;\n        while (offset - count >= 0 && text[offset - count - 1] == \"\\ufeff\") {\n            count++;\n        }\n\n        if (count > 0) {\n            node.deleteData(offset - count, count);\n\n            range.setStart(node, Math.max(0, offset - count));\n            range.collapse(true);\n\n            this.editor.selectRange(range);\n        }\n    },\n    _handleBackspace: function(range) {\n        var node = range.startContainer;\n        var li = dom.closestEditableOfType(node, ['li']);\n        var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n        var editor = this.editor;\n        var previousSibling;\n\n        if (dom.isDataNode(node)) {\n            if (range.collapsed && /^\\s[\\ufeff]+$/.test(node.nodeValue)) {\n                range.setStart(node, 0);\n                range.setEnd(node, node.length);\n                editor.selectRange(range);\n                return false;\n            }\n            this._cleanBomBefore(range);\n        }\n\n        previousSibling = getSibling(block, PREVIOUS_SIBLING, function(sibling) {\n            return !dom.htmlIndentSpace(sibling);\n        });\n\n        //deleting the first list item with empty content in IE results in invalid range\n        if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n            range.startOffset = 0;\n            range.endOffset = 0;\n            editor.selectRange(range);\n        }\n\n        var startAtLi = li && editorNS.RangeUtils.isStartOf(range, li);\n        var liIndex = li && $(li).index();\n        var startAtNonFirstLi = startAtLi && liIndex > 0;\n        if (startAtNonFirstLi) {\n            block = li;\n            previousSibling = dom.prev(li);\n        }\n\n        if (block && previousSibling && dom.is(previousSibling, 'table') && editorNS.RangeUtils.isStartOf(range, block)) {\n            if (block.innerText === '') {\n                block.innerHTML = '\\ufeff';\n            }\n            return true;\n        }\n\n        // outdent\n        if (editorNS.RangeUtils.isStartOf(range, block) && parseInt(block.style.marginLeft,10) > 0) {\n            editor.exec(\"outdent\");\n            return true;\n        }\n\n        // unwrap block\n        if ((block && previousSibling && editorNS.RangeUtils.isStartOf(range, block)) || startAtNonFirstLi) {\n            var caretPlaceholder = dom.significantChildNodes(block)[0];\n            caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder) && !dom.isImg(caretPlaceholder)) ? caretPlaceholder : block;\n\n            var caret = this._addCaret(caretPlaceholder);\n            this._merge(previousSibling, block);\n            this._restoreCaret(caret);\n\n            return true;\n        }\n\n        // unwrap li element\n        if (startAtLi && liIndex === 0) {\n            var child = li.firstChild;\n            if (!child) {\n                li.innerHTML = editorNS.emptyElementContent;\n                child = li.firstChild;\n            }\n\n            var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), \"p\");\n            range.selectNodeContents(li);\n            formatter.toggle(range);\n\n            if (dom.insignificant(child)) {\n                range.setStartBefore(child);\n            } else {\n                range.setStart(child, 0);\n            }\n\n            editor.selectRange(range);\n\n            return true;\n        }\n\n        var rangeStartNode = node.childNodes[range.startOffset - 1];\n        var linkRange = range;\n        var anchor = rangeStartNode && dom.closestEditableOfType(rangeStartNode, ['a']);\n        var previousNode = getSibling(rangeStartNode || node, PREVIOUS_SIBLING, function(sibling) {\n            return !dom.isDataNode(sibling) || (!dom.isBom(sibling) && sibling.length > 0);\n        });\n        if (anchor || ((range.startOffset === 0 || rangeStartNode) && dom.is(previousNode, \"a\"))) {\n            anchor = anchor || previousNode;\n            linkRange = editor.createRange();\n            linkRange.setStart(anchor, anchor.childNodes.length);\n            linkRange.collapse(true);\n        }\n\n        anchor = anchor || dom.closestEditableOfType(rangeStartNode || linkRange.startContainer, ['a']);\n        var isEndOfLink = anchor && editorNS.RangeUtils.isEndOf(linkRange, anchor);\n        if (isEndOfLink) {\n            var command = new editorNS.UnlinkCommand({ range: linkRange, body: editor.body, immutables: !!editor.immutables });\n            editor.execCommand(command);\n            editor._selectionChange();\n        }\n        return false;\n    },\n    _handleSelection: function(range) {\n        var ancestor = range.commonAncestorContainer;\n        var table = dom.closest(ancestor, \"table\");\n        var emptyParagraphContent = editorNS.emptyElementContent;\n        var editor = this.editor;\n        var parentElementOrNode;\n\n        if (inTable(range)) {\n            var removeTableContent = new RemoveTableContent(editor);\n            removeTableContent.remove(range);\n            editor.selectRange(range);\n            return true;\n        }\n\n        var marker = new Marker();\n        marker.add(range, false);\n\n        if (range.commonAncestorContainer === editor.body) {\n            this._surroundFullyContent(marker, range);\n        }\n\n        if (editor.immutables) {\n            this._handleImmutables(marker);\n        }\n\n        this._surroundFullySelectedAnchor(marker, range);\n\n        range.setStartAfter(marker.start);\n        range.setEndBefore(marker.end);\n\n        var start = range.startContainer;\n        var end = range.endContainer;\n\n        range.deleteContents();\n\n        if (end.tagName.toLocaleLowerCase() === \"li\" && dom.emptyNode(end)) {\n            range.selectNode(end);\n            range.deleteContents();\n        }\n\n        if (table && $(table).text() === \"\") {\n            range.selectNode(table);\n            range.deleteContents();\n        }\n\n        ancestor = range.commonAncestorContainer;\n\n        if (dom.name(ancestor) === \"p\" && ancestor.innerHTML === \"\") {\n            ancestor.innerHTML = emptyParagraphContent;\n            range.setStart(ancestor, 0);\n        }\n\n        this._join(start, end);\n\n        dom.insertAfter(editor.document.createTextNode(\"\\ufeff\"), marker.start);\n        marker.remove(range);\n\n        start = range.startContainer;\n        if (dom.name(start) == \"tr\") {\n            start = start.childNodes[Math.max(0, range.startOffset - 1)];\n            range.setStart(start, dom.getNodeLength(start));\n        }\n\n        range.collapse(true);\n\n        editor.selectRange(range);\n\n        parentElementOrNode = start.parentElement || start.parentNode;\n\n        if (dom.isDataNode(start) && !dom.emptyNode(parentElementOrNode)) {\n            this._cleanBomBefore(range);\n        }\n\n        return true;\n    },\n    _handleImmutables: function(marker) {\n        var immutableParent = editorNS.Immutables.immutableParent;\n        var startImmutable = immutableParent(marker.start);\n        var endImmutable = immutableParent(marker.start);\n        if (startImmutable) {\n            dom.insertBefore(marker.start, startImmutable);\n        }\n        if (endImmutable) {\n            dom.insertAfter(marker.end, endImmutable);\n        }\n        if (startImmutable) {\n            dom.remove(startImmutable);\n        }\n        if (endImmutable && endImmutable.parentNode) {\n            dom.remove(endImmutable);\n        }\n    },\n    _surroundFullyContent: function(marker, range) {\n        var children = range.commonAncestorContainer.children,\n            startParent = children[0],\n            endParent = children[children.length - 1];\n\n        this._moveMarker(marker, range, startParent, endParent);\n    },\n    _surroundFullySelectedAnchor: function(marker, range) {\n        var start = marker.start,\n            startParent = $(start).closest(\"a\").get(0),\n            end = marker.end,\n            endParent = $(end).closest(\"a\").get(0);\n\n        this._moveMarker(marker, range, startParent, endParent);\n    },\n    _moveMarker: function(marker, range, startParent, endParent) {\n        var start = marker.start,\n            end = marker.end;\n\n        if (startParent && RangeUtils.isStartOf(range, startParent)) {\n            dom.insertBefore(start, startParent);\n        }\n\n        if (endParent && RangeUtils.isEndOf(range, endParent)) {\n            dom.insertAfter(end, endParent);\n        }\n    },\n    _root: function(node) {\n        while (node && dom.name(node) != \"body\" && node.parentNode && dom.name(node.parentNode) != \"body\") {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n    _join: function(start, end) {\n        start = this._root(start);\n        end = this._root(end);\n\n        if (start != end && dom.is(end, \"p\")) {\n            this._merge(start, end);\n        }\n    },\n    _merge: function(dest, src) {\n        dom.removeTrailingBreak(dest);\n\n        while (dest && src.firstChild) {\n            if (dest.nodeType == 1) {\n                dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n\n                if (dest) {\n                    dest.appendChild(src.firstChild);\n                }\n            } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                this._mergeWithTextNode(dest, src.firstChild);\n            } else {\n                dest.parentNode.appendChild(src.firstChild);\n            }\n        }\n\n        dom.remove(src);\n    },\n\n    _mergeWithTextNode: function(textNode, appendedNode) {\n        if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n            if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                dom.insertAfter(appendedNode, textNode.nextSibling);\n            }\n            else {\n                dom.insertAfter(appendedNode, textNode);\n            }\n        }\n    },\n\n    _isCaret: function(element) {\n        return $(element).is(\"a\");\n    },\n\n    keydown: function(e) {\n        var method, startRestorePoint;\n        var editor = this.editor;\n        var range = editor.getRange();\n        var keyCode = e.keyCode;\n        var keys = kendo.keys;\n        var backspace = keyCode === keys.BACKSPACE;\n        var del = keyCode == keys.DELETE;\n\n        if (editor.immutables && editor.immutables.keydown(e, range)) {\n            return;\n        }\n\n        if ((backspace || del) && !range.collapsed) {\n            method = \"_handleSelection\";\n        } else if (backspace) {\n            method = \"_handleBackspace\";\n        } else if (del) {\n            method = \"_handleDelete\";\n        }\n\n        if (!method) {\n            return;\n        }\n\n        startRestorePoint = new RestorePoint(range, editor.body);\n\n        if (this[method](range)) {\n            e.preventDefault();\n\n            editorNS._finishUpdate(editor, startRestorePoint);\n        }\n    },\n    deleteSelection: function(range) {\n        this._handleSelection(range);\n    },\n    keyup: $.noop\n});\n\nvar SystemHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n        this.systemCommandIsInProgress = false;\n    },\n\n    createUndoCommand: function() {\n        this.startRestorePoint = this.endRestorePoint = editorNS._finishUpdate(this.editor, this.startRestorePoint);\n    },\n\n    changed: function() {\n        if (this.startRestorePoint) {\n            return this.startRestorePoint.html != this.editor.body.innerHTML;\n        }\n\n        return false;\n    },\n\n    keydown: function(e) {\n        var that = this,\n            editor = that.editor,\n            keyboard = editor.keyboard;\n\n        if (keyboard.isModifierKey(e)) {\n\n            if (keyboard.isTypingInProgress()) {\n                keyboard.endTyping(true);\n            }\n\n            that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n            return true;\n        }\n\n        if (keyboard.isSystem(e)) {\n            that.systemCommandIsInProgress = true;\n\n            if (that.changed()) {\n                that.systemCommandIsInProgress = false;\n                that.createUndoCommand();\n            }\n\n            return true;\n        }\n\n        return false;\n    },\n\n    keyup: function() {\n        var that = this;\n\n        if (that.systemCommandIsInProgress && that.changed()) {\n            that.systemCommandIsInProgress = false;\n            that.createUndoCommand();\n            return true;\n        }\n\n        return false;\n    }\n});\n\nvar SelectAllHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n\n    keydown: function(e) {\n        if (!browser.webkit || e.isDefaultPrevented() ||\n            !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n            return;\n        }\n        if (this.editor.options.immutables) {\n            this._toSelectableImmutables();\n        }\n        this._selectEditorBody();\n    },\n\n    _selectEditorBody: function() {\n        var editor = this.editor;\n        var range = editor.getRange();\n        range.selectNodeContents(editor.body);\n\n        setTimeout(function() {\n            editor.selectRange(range);\n        });\n    },\n\n    _toSelectableImmutables: function() {\n        var editor = this.editor,\n            body = editor.body,\n            immutable = editorNS.Immutables.immutable,\n            emptyTextNode = dom.emptyTextNode,\n            first = body.firstChild,\n            last = body.lastChild;\n\n        while (emptyTextNode(first)) {\n            first = first.nextSibling;\n        }\n\n        while (emptyTextNode(last)) {\n            last = last.previousSibling;\n        }\n\n        if (first && immutable(first)) {\n            $(bomSpan).prependTo(body);\n        }\n\n        if (last && immutable(last)) {\n            $(bomSpan).appendTo(body);\n        }\n    },\n\n    keyup: $.noop\n});\n\nvar Keyboard = Class.extend({\n    init: function(handlers) {\n        this.handlers = handlers;\n        this.typingInProgress = false;\n    },\n\n    isCharacter: function(keyCode) {\n        return (keyCode >= 48 && keyCode <= 90) || (keyCode >= 96 && keyCode <= 111) ||\n               (keyCode >= 186 && keyCode <= 192) || (keyCode >= 219 && keyCode <= 222) ||\n               keyCode == 229;\n    },\n\n    toolFromShortcut: function(tools, e) {\n        var key = String.fromCharCode(e.keyCode),\n            toolName,\n            toolOptions,\n            modifier = this._getShortcutModifier(e, navigator.platform);\n\n        for (toolName in tools) {\n            toolOptions = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n            if ((toolOptions.key == key || toolOptions.key == e.keyCode) &&\n                toolOptions.ctrl == modifier &&\n                toolOptions.alt == e.altKey &&\n                toolOptions.shift == e.shiftKey) {\n                return toolName;\n            }\n        }\n    },\n\n    _getShortcutModifier: function(e, platform) {\n        var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n        return mac ? e.metaKey : e.ctrlKey;\n    },\n\n    toolsFromShortcut: function(tools, e) {\n        var key = String.fromCharCode(e.keyCode),\n            toolName,\n            o,\n            matchesKey,\n            found = [];\n        var matchKey = function(toolKey) { return toolKey == key || toolKey == e.keyCode || toolKey == e.charCode; };\n\n        for (toolName in tools) {\n            o = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n            matchesKey = Array.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n            if (matchesKey &&\n                o.ctrl == e.ctrlKey &&\n                o.alt == e.altKey &&\n                o.shift == e.shiftKey) {\n                found.push(tools[toolName]);\n            }\n        }\n\n        return found;\n    },\n\n    isTypingKey: function(e) {\n        var keyCode = e.keyCode;\n        return (this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey) ||\n               keyCode == 32 || keyCode == 13 || keyCode == 8 ||\n               (keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey);\n    },\n\n    isModifierKey: function(e) {\n        var keyCode = e.keyCode;\n        return (keyCode == 17 && !e.shiftKey && !e.altKey) ||\n               (keyCode == 16 && !e.ctrlKey && !e.altKey) ||\n               (keyCode == 18 && !e.ctrlKey && !e.shiftKey);\n    },\n\n    isSystem: function(e) {\n        return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n    },\n\n    startTyping: function(callback) {\n        this.onEndTyping = callback;\n        this.typingInProgress = true;\n    },\n\n    stopTyping: function() {\n        if (this.typingInProgress && this.onEndTyping) {\n            this.onEndTyping();\n        }\n        this.typingInProgress = false;\n    },\n\n    endTyping: function(force) {\n        var that = this;\n        that.clearTimeout();\n        if (force) {\n            that.stopTyping();\n        } else {\n            that.timeout = window.setTimeout(that.stopTyping.bind(that), 1000);\n        }\n    },\n\n    isTypingInProgress: function() {\n        return this.typingInProgress;\n    },\n\n    clearTimeout: function() {\n        window.clearTimeout(this.timeout);\n    },\n\n    notify: function(e, what) {\n        var i, handlers = this.handlers;\n\n        for (i = 0; i < handlers.length; i++) {\n            if (handlers[i][what](e)) {\n                break;\n            }\n        }\n    },\n\n    keydown: function(e) {\n        this.notify(e, 'keydown');\n    },\n\n    keyup: function(e) {\n        this.notify(e, 'keyup');\n    }\n});\n\nextend(editorNS, {\n    TypingHandler: TypingHandler,\n    SystemHandler: SystemHandler,\n    BackspaceHandler: BackspaceHandler,\n    SelectAllHandler: SelectAllHandler,\n    Keyboard: Keyboard\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        extend = $.extend;\n\nvar ExportPdfCommand = Command.extend({\n    init: function(options) {\n        this.async = true;\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var that = this;\n        var range = that.lockRange(true);\n        var editor = that.editor;\n\n        editor._destroyResizings();\n\n        editor.saveAsPDF().then(function() {\n            that.releaseRange(range);\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        });\n    }\n});\n\nextend(editorNS, {\n    ExportPdfCommand: ExportPdfCommand\n});\n\nregisterTool(\"pdf\", new Tool({ command: ExportPdfCommand }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        extend = $.extend;\n\nvar PrintCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.managesUndoRedo = true;\n    },\n\n    exec: function() {\n        var editor = this.editor;\n\n        if (kendo.support.browser.msie) {\n            editor.document.execCommand(\"print\", false, null);\n        } else if (editor.window.print) {\n            editor.window.print();\n        }\n    }\n});\n\nextend(editorNS, {\n    PrintCommand: PrintCommand\n});\n\nregisterTool(\"print\", new Tool({ command: PrintCommand }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    Command = Editor.Command,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    registerTool = EditorUtils.registerTool;\n\nvar CopyFormatCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var range = this.lockRange(true);\n        this.inlineStyles = [];\n        this.blockStyles = [];\n        this.collectStyles(range);\n        this.editor.inlineStyles = this.inlineStyles;\n        this.editor.blockStyles = this.blockStyles;\n        this.releaseRange(range);\n    },\n\n    collectStyles: function(range) {\n        var rangeNodes = RangeUtils.nodes(range);\n        var node;\n\n        if (rangeNodes.length === 1) {\n            node = rangeNodes[0].parentNode;\n        } else {\n            node = range.startContainer;\n        }\n\n        while (node && !dom.is(node, \"body\") && node.getAttribute(\"data-role\") !== \"editor\") {\n            if (dom.isBlock(node)) {\n                this.populateStyles(node, \"blockStyles\");\n                if (dom.is(node, \"li\")) {\n                    node = node.parentNode;\n                } else {\n                    node = null;\n                }\n            } else {\n                this.populateStyles(node, \"inlineStyles\");\n                node = node.parentNode;\n            }\n        }\n    },\n\n    populateStyles: function(node, destination) {\n        var styles = node.style;\n        var attributes = node.attributes;\n        var nodeStyles = {\n            tags: [ node.tagName ],\n            attr: {\n                style: {}\n            }\n        };\n        var styleValue, styleKey, attributeKey, attributeValue, i;\n\n        for (i = 0; styles && i < styles.length; i++) {\n            styleKey = styles[i];\n            styleValue = styles[styleKey];\n            nodeStyles.attr.style[styleKey] = styleValue;\n        }\n\n        for (i = 0; attributes && i < attributes.length; i++) {\n            attributeKey = attributes[i].nodeName;\n            attributeValue = attributes[i].nodeValue;\n            if (attributeKey === \"style\") {\n                continue;\n            } else if (attributeKey === \"class\") {\n                nodeStyles.attr.className = attributeValue;\n            } else {\n                nodeStyles.attr[attributeKey] = attributeValue;\n            }\n        }\n\n        this[destination].push(nodeStyles);\n    }\n});\n\nvar ApplyFormatCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var range = this.lockRange(true);\n        var markers = RangeUtils.getMarkers(range);\n        var editor = this.editor;\n        var inlineStyles = editor.inlineStyles;\n        var blockStyles = editor.blockStyles;\n        var nodes;\n\n        if ((!inlineStyles || inlineStyles.length === 0) && (!blockStyles || blockStyles.length === 0)) {\n            return;\n        }\n\n        if (markers.length === 3) {\n            this.marker.removeCaret(range);\n            this.marker.caret = null;\n        }\n\n        this.removeEmptyElementsFromRange(range);\n        nodes = RangeUtils.nodes(range);\n        this.cleanInlineParents(nodes);\n        dom.normalize(range.commonAncestorContainer);\n\n        if (markers.length === 2) {\n            range.setStartAfter(markers[0]);\n            range.setEndBefore(markers[1]);\n        } else {\n            range.setStartBefore(nodes[0]);\n            range.setEndAfter(nodes[0]);\n        }\n\n        nodes = RangeUtils.nodes(range);\n\n        if (nodes && blockStyles && blockStyles.length) {\n            this.applyBlockStyles(nodes, blockStyles);\n        }\n\n        if (nodes && inlineStyles && inlineStyles.length) {\n            this.applyInlineStyles(nodes, inlineStyles);\n        }\n\n        this.releaseRange(range);\n    },\n\n    removeEmptyElementsFromRange: function(range) {\n        var isEmptyInline = function(node) {\n            return dom.isInline(node) && !node.firstChild && !dom.isMarker(node);\n        };\n        var emptyElements, i;\n\n        emptyElements = RangeUtils.getAll(range, isEmptyInline);\n\n        if (emptyElements && emptyElements.length > 0) {\n            for (i = 0; i < emptyElements.length; i++) {\n                emptyElements[i].parentNode.removeChild(emptyElements[i]);\n            }\n        }\n    },\n\n    cleanInlineParents: function(nodes) {\n        var i, node, parent, children, j, child, newNode;\n\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            parent = node.parentNode;\n\n            if (this.immutableParent(node)) {\n                continue;\n            }\n\n            while (parent && dom.isInline(parent)) {\n                children = parent.childNodes;\n\n                for (j = 0; j < children.length; j++) {\n                    child = children[j];\n\n                    if (!dom.isMarker(child) && child !== node) {\n                        newNode = parent.cloneNode(true);\n                        newNode.innerHTML = \"\";\n                        dom.wrap(child, newNode);\n                    }\n                }\n\n                dom.unwrap(parent);\n                parent = node.parentNode;\n            }\n        }\n    },\n\n    applyBlockStyles: function(nodes, blockStyles) {\n        var formatTag = blockStyles[0].tags[0];\n        var attr = blockStyles[0].attr;\n        var document = this.editor.document;\n        var i, len, node, wrapper, blockParent, outerWrapper;\n        var previousNodes, nextNodes, previous, next, prevWrapper, nextWrapper, child, j, listItems;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            node = nodes[i];\n\n            if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                continue;\n            }\n\n            blockParent = dom.blockParentOrBody(node);\n\n            if (blockParent.tagName !== \"BODY\" && blockParent.tagName !== formatTag) {\n                if (blockParent.tagName !== \"LI\" && blockParent.tagName !== \"TD\" && blockParent.tagName !== \"TH\") {\n                    previousNodes = [];\n                    nextNodes = [];\n                    previous = node.previousSibling;\n                    next = node.nextSibling;\n\n                    while (previous) {\n                        if (!dom.isMarker(previous)) {\n                            previousNodes.push(previous);\n                        }\n\n                        previous = previous.previousSibling;\n                    }\n\n                    if (previousNodes.length) {\n                        prevWrapper = blockParent.cloneNode(true);\n                        prevWrapper.innerHTML = \"\";\n                        dom.insertBefore(prevWrapper, previousNodes[0]);\n\n                        for (j = 0; j < previousNodes.length; j++) {\n                            child = previousNodes[j];\n                            dom.insertAt(prevWrapper, child, 0);\n                        }\n                    }\n\n                    while (next) {\n                        if (!dom.isMarker(next)) {\n                            nextNodes.push(next);\n                        }\n\n                        next = next.nextSibling;\n                    }\n\n                    if (nextNodes.length) {\n                        nextWrapper = blockParent.cloneNode(true);\n                        nextWrapper.innerHTML = \"\";\n                        dom.insertBefore(nextWrapper, nextNodes[0]);\n\n                        for (j = 0; j < nextNodes.length; j++) {\n                            child = nextNodes[j];\n                            nextWrapper.appendChild(child);\n                        }\n                    }\n\n                    dom.unwrap(blockParent);\n                }\n\n                wrapper = dom.create(document, formatTag, attr);\n                dom.wrap(node, wrapper);\n            } else if (blockParent.tagName === formatTag) {\n                dom.attr(blockParent, attr);\n            }\n        }\n\n        if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\" && formatTag === \"LI\") {\n            listItems = [];\n\n            while (dom.is(wrapper, \"li\")) {\n                listItems.push(wrapper);\n                wrapper = dom.prev(wrapper);\n            }\n\n            outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n            dom.insertBefore(outerWrapper, listItems[listItems.length - 1]);\n            outerWrapper.appendChild(listItems[0]);\n\n            for (i = 1, len = listItems.length; i < len; i++) {\n                dom.insertBefore(listItems[i], outerWrapper.firstChild);\n            }\n        } else if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\") {\n            outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n            dom.wrap(wrapper, outerWrapper);\n        }\n    },\n\n    applyInlineStyles: function(nodes, inlineStyles) {\n        var document = this.editor.document;\n        var currentStyle, createdNode, topNode, i, newNode, node;\n\n        for (i = 0; i < inlineStyles.length; i++) {\n            currentStyle = inlineStyles[i];\n            createdNode = dom.create(document, currentStyle.tags[0], currentStyle.attr);\n\n            if (topNode) {\n                createdNode.appendChild(topNode);\n            }\n\n            topNode = createdNode;\n        }\n\n        if (topNode) {\n            for (i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n                if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                    continue;\n                }\n                newNode = topNode.cloneNode(true);\n                dom.insertBefore(newNode, node);\n\n                while (newNode.children && newNode.children.length) {\n                    newNode = newNode.children[0];\n                }\n\n                newNode.appendChild(node);\n            }\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    immutableParent: function(node) {\n        return this.immutables() && Editor.Immutables.immutableParent(node);\n    }\n});\n\nvar CopyFormatTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function(commandArguments) {\n        return new CopyFormatCommand(commandArguments);\n    }\n});\n\nvar ApplyFormatTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function(commandArguments) {\n        return new ApplyFormatCommand(commandArguments);\n    }\n});\n\n$.extend(Editor, {\n    CopyFormatCommand: CopyFormatCommand,\n    ApplyFormatCommand: ApplyFormatCommand,\n    CopyFormatTool: CopyFormatTool,\n    ApplyFormatTool: ApplyFormatTool\n});\n\nregisterTool(\"copyFormat\", new CopyFormatTool({ }));\nregisterTool(\"applyFormat\", new ApplyFormatTool({ }));\n\n})(window.kendo.jQuery);\n\n(function(kendo, undefined$1) {\n    var global = window;\n    var math = global.Math;\n    var min = math.min;\n    var max = math.max;\n    var parseFloat = global.parseFloat;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n\n    var PERCENTAGE = \"%\";\n    var PIXEL = \"px\";\n    var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n    var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n    var STRING = \"string\";\n\n    function constrain(options) {\n        var value = options.value;\n        var lowerBound = options.min;\n        var upperBound = options.max;\n\n        return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n    }\n\n    function getScrollBarWidth(element) {\n        if (element && !$(element).is(\"body\") && element.scrollHeight > element.clientHeight) {\n            return kendo.support.scrollbar();\n        }\n\n        return 0;\n    }\n\n    function calculatePercentageRatio(value, total) {\n        if (inPercentages(value)) {\n            return parseFloat(value);\n        }\n        else {\n            return ((parseFloat(value) / total) * 100);\n        }\n    }\n\n    function inPercentages(value) {\n        return (typeof(value) === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value));\n    }\n\n    function inPixels(value) {\n        return (typeof(value) === STRING && REGEX_NUMBER_IN_PIXELS.test(value));\n    }\n\n    function toPercentages(value) {\n        return (parseFloat(value) + PERCENTAGE);\n    }\n\n    function toPixels(value) {\n        return (parseFloat(value) + PIXEL);\n    }\n\n    var ResizingUtils = {\n        constrain: constrain,\n        getScrollBarWidth: getScrollBarWidth,\n        calculatePercentageRatio: calculatePercentageRatio,\n        inPercentages: inPercentages,\n        inPixels: inPixels,\n        toPercentages: toPercentages,\n        toPixels: toPixels\n    };\n\n    extend(Editor, {\n        ResizingUtils: ResizingUtils\n    });\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n    var noop = $.noop;\n\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n\n    var KEY_DOWN = \"keydown\";\n    var MOUSE_DOWN = \"mousedown\";\n    var MOUSE_ENTER = \"mouseenter\";\n    var MOUSE_LEAVE = \"mouseleave\";\n    var MOUSE_MOVE = \"mousemove\";\n    var MOUSE_UP = \"mouseup\";\n\n    var COMMA = \",\";\n    var DOT = \".\";\n    var LAST_CHILD = \":last-child\";\n\n    var TABLE = \"table\";\n\n    var TableElementResizing = Class.extend({\n        init: function(element, options) {\n            var that = this;\n\n            that.options = extend({}, that.options, options);\n\n            that.options.tags = Array.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n\n            if ($(element).is(TABLE)) {\n                that.element = element;\n                that._attachEventHandlers();\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n            var eventNamespace = that.options.eventNamespace;\n\n            if (that.element) {\n                $(that.element).off(eventNamespace);\n                that.element = null;\n            }\n\n            $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n\n            that._destroyResizeHandle();\n        },\n\n        options: {\n            tags: [],\n            min: 0,\n            rootElement: null,\n            eventNamespace: \"\",\n            rtl: false,\n            handle: {\n                dataAttribute: \"\",\n                height: 0,\n                width: 0,\n                classNames: {},\n                template: \"\"\n            }\n        },\n\n        _attachEventHandlers: function() {\n            var that = this;\n            var options = that.options;\n\n            $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), that.detectElementBorderHovering.bind(that));\n        },\n\n        resizingInProgress: function() {\n            var that = this;\n            var resizable = that._resizable;\n\n            if (resizable) {\n                return !!resizable.resizing;\n            }\n\n            return false;\n        },\n\n        resize: noop,\n\n        detectElementBorderHovering: function(e) {\n            var that = this;\n            var options = that.options;\n            var handleOptions = options.handle;\n            var tableElement = $(e.currentTarget);\n            var resizeHandle = that.resizeHandle;\n            var dataAttribute = handleOptions.dataAttribute;\n\n            if (!that.resizingInProgress()) {\n                if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                    if (resizeHandle) {\n                        if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    }\n                    else {\n                        that.showResizeHandle(tableElement, e);\n                    }\n                }\n                else {\n                    if (resizeHandle) {\n                        that._destroyResizeHandle();\n                    }\n                }\n            }\n        },\n\n        elementBorderHovered: noop,\n\n        showResizeHandle: function(tableElement, e) {\n            var that = this;\n\n            if (e.buttons !== 0) {\n                //prevent showing when a mouse button is still being pressed\n                return;\n            }\n\n            that._initResizeHandle();\n            that.setResizeHandlePosition(tableElement);\n            that.setResizeHandleDimensions();\n            that.setResizeHandleDataAttributes(tableElement[0]);\n            that._attachResizeHandleEventHandlers();\n\n            that._initResizable(tableElement);\n\n            that._hideResizeMarker();\n            that.resizeHandle.show();\n        },\n\n        _initResizeHandle: function() {\n            var that = this;\n            var options = that.options;\n\n            that._destroyResizeHandle();\n\n            that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n        },\n\n        setResizeHandlePosition: noop,\n\n        setResizeHandleDimensions: noop,\n\n        setResizeHandleDataAttributes: function(tableElement) {\n            var that = this;\n\n            that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n        },\n\n        _attachResizeHandleEventHandlers: function() {\n            var that = this;\n            var options = that.options;\n            var eventNamespace = options.eventNamespace;\n            var markerClass = options.handle.classNames.marker;\n            var resizeHandle = that.resizeHandle;\n\n            that.resizeHandle\n                .on(MOUSE_DOWN + eventNamespace, function() {\n                    resizeHandle.find(DOT + markerClass).show();\n                })\n                .on(MOUSE_UP + eventNamespace, function() {\n                    resizeHandle.find(DOT + markerClass).hide();\n                });\n        },\n\n        _hideResizeMarker: function() {\n            var that = this;\n\n            that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n        },\n\n        _destroyResizeHandle: function() {\n            var that = this;\n\n            if (that.resizeHandle) {\n                that._destroyResizable();\n                that.resizeHandle.off(that.options.eventNamespace).remove();\n                that.resizeHandle = null;\n            }\n        },\n\n        _initResizable: function(tableElement) {\n            var that = this;\n\n            if (!that.resizeHandle) {\n                return;\n            }\n\n            that._destroyResizable();\n\n            that._resizable = new kendo.ui.Resizable(tableElement, {\n                draggableElement: that.resizeHandle[0],\n                start: that.onResizeStart.bind(that),\n                resize: that.onResize.bind(that),\n                resizeend: that.onResizeEnd.bind(that)\n            });\n        },\n\n        _destroyResizable: function() {\n            var that = this;\n\n            if (that._resizable) {\n                that._resizable.destroy();\n                that._resizable = null;\n            }\n        },\n\n        onResizeStart: function() {\n            this._disableKeyboard();\n        },\n\n        onResize: function(e) {\n            this.setResizeHandleDragPosition(e);\n        },\n\n        setResizeHandleDragPosition: noop,\n\n        onResizeEnd: function(e) {\n            var that = this;\n\n            that.resize(e);\n            that._destroyResizeHandle();\n            that._enableKeyboard();\n        },\n\n        _enableKeyboard: function() {\n            var options = this.options;\n\n            $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n        },\n\n        _disableKeyboard: function() {\n            var options = this.options;\n\n            $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function(e) {\n                e.preventDefault();\n            });\n        },\n\n        _forceResizing: function(e) {\n            var resizable = this._resizable;\n\n            if (resizable && resizable.userEvents) {\n                resizable.userEvents._end(e);\n            }\n        }\n    });\n\n    var ResizingFactory = Class.extend({\n        create: function(editor, options) {\n            var that = this;\n            var resizingName = options.name;\n            var NS = options.eventNamespace;\n\n            $(editor.body)\n                .on(MOUSE_ENTER + NS, TABLE, function(e) {\n                    var table = e.currentTarget;\n                    var resizing = editor[resizingName];\n\n                    e.stopPropagation();\n\n                    if (resizing) {\n                        if (resizing.element !== table && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, table, options);\n                        }\n                    }\n                    else {\n                        that._initResizing(editor, table, options);\n                    }\n                })\n                .on(MOUSE_LEAVE + NS, TABLE, function(e) {\n                    var parentTable;\n                    var resizing = editor[resizingName];\n\n                    e.stopPropagation();\n\n                    if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                        parentTable = $(resizing.element).parents(TABLE)[0];\n\n                        if (parentTable) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                })\n                .on(MOUSE_LEAVE + NS, function() {\n                    var resizing = editor[resizingName];\n\n                    if (resizing && !resizing.resizingInProgress()) {\n                        that._destroyResizing(editor, options);\n                    }\n                })\n                .on(MOUSE_UP + NS, function(e) {\n                    var resizing = editor[resizingName];\n                    var parentTable;\n\n                    if (resizing && resizing.resizingInProgress()) {\n                        parentTable = $(e.target).parents(TABLE)[0];\n\n                        if (parentTable) {\n                            resizing._forceResizing(e);\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                });\n        },\n\n        dispose: function(editor, options) {\n            $(editor.body).off(options.eventNamespace);\n        },\n\n        _initResizing: function(editor, tableElement, options) {\n            var resizingName = options.name;\n            var resizingType = options.type;\n\n            editor[resizingName] = new resizingType(tableElement, {\n                rtl: kendo.support.isRtl(editor.element),\n                rootElement: editor.body\n            });\n        },\n\n        _destroyResizing: function(editor, options) {\n            var resizingName = options.name;\n\n            if (editor[resizingName]) {\n                editor[resizingName].destroy();\n                editor[resizingName] = null;\n            }\n        }\n    });\n    ResizingFactory.current = new ResizingFactory();\n\n    TableElementResizing.create = function(editor, options) {\n        ResizingFactory.current.create(editor, options);\n    };\n\n    TableElementResizing.dispose = function(editor, options) {\n        ResizingFactory.current.dispose(editor, options);\n    };\n\n    extend(Editor, {\n        TableElementResizing: TableElementResizing\n    });\n\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var global = window;\n    var math = global.Math;\n    var abs = math.abs;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n    var dom = Editor.Dom;\n    var TableElementResizing = Editor.TableElementResizing;\n    var ResizingUtils = Editor.ResizingUtils;\n    var constrain = ResizingUtils.constrain;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n    var inPercentages = ResizingUtils.inPercentages;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerWidth = kendo._outerWidth;\n\n    var NS = \".kendoEditorColumnResizing\";\n    var RESIZE_HANDLE_CLASS = \"k-column-resize-handle\";\n    var RESIZE_MARKER_CLASS = \"k-column-resize-marker\";\n\n    var BODY = \"body\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n    var TD = \"td\";\n    var TH = \"th\";\n    var TR = \"tr\";\n\n    var COLATTR = \"col-index\";\n\n    var COMMA = \",\";\n    var WIDTH = \"width\";\n\n    var ColumnResizing = TableElementResizing.extend({\n        options: {\n            tags: [TD, TH],\n            min: 20,\n            rootElement: null,\n            eventNamespace: NS,\n            rtl: false,\n            handle: {\n                dataAttribute: \"column\",\n                width: 10,\n                height: 0,\n                classNames: {\n                    handle: RESIZE_HANDLE_CLASS,\n                    marker: RESIZE_MARKER_CLASS\n                },\n                template:\n                    '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                        '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                            '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                        '</div>' +\n                    '</div>'\n            }\n        },\n\n        elementBorderHovered: function(column, e) {\n            var that = this;\n            var options = that.options;\n            var handleWidth = options.handle.width;\n            var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n\n\n            var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n\n            if ((mousePosition > (borderOffset - handleWidth)) && (mousePosition < (borderOffset + handleWidth))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        },\n\n        setResizeHandlePosition: function(column) {\n            var that = this;\n            var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n            var options = that.options;\n            var rtl = options.rtl;\n            var handleWidth = options.handle.width;\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var columnWidthOffset = rtl ? 0 : outerWidth(column);\n            var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var columnOffsetLeft = column.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(column.css(\"marginLeft\"));\n            var innerElementOffsetTop = tableInnerElement.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(tableInnerElement.css(\"marginTop\"));\n            var browser = kendo.support.browser;\n\n            if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            that.resizeHandle.css({\n                top: innerElementOffsetTop + scrollTopOffset,\n                left: columnOffsetLeft + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - (handleWidth / 2),\n                position: \"absolute\"\n            });\n        },\n\n        setResizeHandleDimensions: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableBody = $(that.element).children(TBODY);\n            var fullHeight = tableHead.length > 0 ? tableHead.height() + tableBody.height() : tableBody.height();\n\n            that.resizeHandle.css({\n                width: that.options.handle.width,\n                height: fullHeight\n            });\n        },\n\n        setResizeHandleDragPosition: function(e) {\n            var that = this;\n            var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n            var options = that.options;\n            var rootElement = $(options.rootElement);\n            var handleWidth = options.handle ? options.handle.width : 0;\n            var min = options.min;\n            var rtl = options.rtl;\n            var columnWidth = outerWidth(column);\n            var columnLeftOffset = column.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(column.css(\"marginLeft\"));\n            var adjacentColumnWidth = outerWidth(column.next());\n            var resizeHandle = $(that.resizeHandle);\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var resizeHandleOffsetLeft = resizeHandle.offset().left -\n                                            (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                            parseFloat(resizeHandle.css(\"marginLeft\"));\n            var browser = kendo.support.browser;\n\n            if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            var handleOffset = constrain({\n                value: resizeHandleOffsetLeft + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n            });\n\n            resizeHandle.css({ left: handleOffset });\n        },\n\n        resize: function(e) {\n            var that = this;\n            var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n            var options = that.options;\n            var rtlModifier = options.rtl ? (-1) : 1;\n            var min = options.min;\n            var initialDeltaX = rtlModifier * e.x.initialDelta;\n            var newWidth;\n            var initialAdjacentColumnWidth;\n            var initialColumnWidth;\n            var colIndex;\n            var nextColumn;\n\n            dom.reMapTableColumns(that.element, COLATTR);\n\n            colIndex = parseInt(column.attr(COLATTR), 10);\n\n            if (column.prop(\"colSpan\") > 1) {\n                column = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + column.prop(\"colSpan\") - 1) + \"]\").eq(0);\n                colIndex = parseInt(column.attr(COLATTR), 10);\n            }\n\n            nextColumn = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + 1) + \"]:not([colspan])\");\n\n            that._setTableComputedWidth();\n            that._setColumnsComputedWidth();\n\n            initialColumnWidth = outerWidth(column);\n            initialAdjacentColumnWidth = outerWidth(nextColumn);\n\n            newWidth = constrain({\n                value: initialColumnWidth + initialDeltaX,\n                min: min,\n                max: initialColumnWidth + initialAdjacentColumnWidth - min\n            });\n\n            that._resizeColumn(column[0], newWidth);\n            that._resizeTopAndBottomColumns(column[0], newWidth);\n            that._resizeAdjacentColumns(parseInt(column.attr(COLATTR),10), initialAdjacentColumnWidth, initialColumnWidth, (initialColumnWidth - newWidth));\n\n            dom.clearTableMappings(that.element, COLATTR);\n        },\n\n        _setTableComputedWidth: function() {\n            var element = this.element;\n\n            if (element.style[WIDTH] === \"\") {\n                element.style[WIDTH] = toPixels(outerWidth($(element)));\n            }\n        },\n\n        _setColumnsComputedWidth: function() {\n            var that = this;\n            var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n            var innerElementWidth = outerWidth(tableInnerElement);\n            var columns = tableInnerElement.children(TR).children(TD);\n            var length = columns.length;\n            var currentColumnsWidths = columns.map(function() {\n                return outerWidth($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                if (inPercentages(columns[i].style[WIDTH])) {\n                    columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], innerElementWidth));\n                }\n                else {\n                    columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                }\n            }\n        },\n\n        _resizeTopAndBottomColumns: function(column, newWidth) {\n            var that = this;\n            var columnIndex = $(column).attr(COLATTR);\n            var topAndBottomColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                .filter(function() {\n                    var cell = this;\n                    return ($(cell).attr(COLATTR) === columnIndex && cell !== column);\n                });\n            var length = topAndBottomColumns.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that._resizeColumn(topAndBottomColumns[i], newWidth);\n            }\n        },\n\n        _resizeColumn: function(column, newWidth) {\n            var innerTableElement = $(this.element.tHead || this.element.tBodies[0]);\n            if (inPercentages(column.style[WIDTH])) {\n                column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth(innerTableElement)));\n            }\n            else {\n                column.style[WIDTH] = toPixels(newWidth);\n            }\n        },\n\n        _resizeAdjacentColumns: function(columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n            var that = this;\n            var adjacentColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                .filter(function() {\n                    return (parseInt($(this).attr(COLATTR),10) === (columnIndex + 1));\n                });\n            var length = adjacentColumns.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n            }\n        },\n\n        _resizeAdjacentColumn: function(adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n            var that = this;\n            var min = that.options.min;\n            var newWidth;\n\n            newWidth = constrain({\n                value: initialAdjacentColumnWidth + deltaWidth,\n                min: min,\n                max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n            });\n\n            that._resizeColumn(adjacentColumn, newWidth);\n        }\n    });\n\n    ColumnResizing.create = function(editor) {\n        TableElementResizing.create(editor, {\n            name: \"columnResizing\",\n            type: ColumnResizing,\n            eventNamespace: NS\n        });\n    };\n\n    ColumnResizing.dispose = function(editor) {\n        TableElementResizing.dispose(editor, {\n            eventNamespace: NS\n        });\n    };\n\n    extend(Editor, {\n        ColumnResizing: ColumnResizing\n    });\n\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var math = window.Math;\n    var abs = math.abs;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n    var TableElementResizing = Editor.TableElementResizing;\n    var ResizingUtils = Editor.ResizingUtils;\n    var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n    var constrain = ResizingUtils.constrain;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var inPercentages = ResizingUtils.inPercentages;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerHeight = kendo._outerHeight;\n\n    var NS = \".kendoEditorRowResizing\";\n    var RESIZE_HANDLE_CLASS = \"k-row-resize-handle\";\n    var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = \"k-row-resize-marker-wrapper\";\n    var RESIZE_MARKER_CLASS = \"k-row-resize-marker\";\n\n    var BODY = \"body\";\n    var TR = \"tr\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n\n    var COMMA = \",\";\n    var HEIGHT = \"height\";\n\n    var RowResizing = TableElementResizing.extend({\n        options: {\n            tags: [TR],\n            min: 20,\n            rootElement: null,\n            eventNamespace: NS,\n            rtl: false,\n            handle: {\n                dataAttribute: \"row\",\n                width: 0,\n                height: 10,\n                classNames: {\n                    handle: RESIZE_HANDLE_CLASS,\n                    marker: RESIZE_MARKER_CLASS\n                },\n                template:\n                    '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                        '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                            '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' +\n                                '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                            '</div>' +\n                        '</div>' +\n                    '</div>'\n            }\n        },\n\n        elementBorderHovered: function(tableElement, e) {\n            var that = this;\n            var handleHeight = that.options.handle[HEIGHT];\n            var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n            var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n\n            if ((mousePosition > (borderOffset - handleHeight)) && (mousePosition < (borderOffset + handleHeight))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        },\n\n        setResizeHandlePosition: function(row) {\n            var that = this;\n            var options = that.options;\n            var handleHeight = options.handle[HEIGHT];\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n\n            var rowOffsetLeft = row.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(row.css(\"marginLeft\"));\n            var rowOffsetTop = row.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(row.css(\"marginTop\"));\n            var browser = kendo.support.browser;\n\n            if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            that.resizeHandle.css({\n                top: rowOffsetTop + outerHeight(row) + scrollTopOffset - (handleHeight / 2),\n                left: rowOffsetLeft + (scrollLeftOffset - scrollBarWidth),\n                position: \"absolute\"\n            });\n        },\n\n        setResizeHandleDimensions: function() {\n            var that = this;\n            var innerTableElement = $(that.element.tHead || that.element.tBodies[0]);\n\n            that.resizeHandle.css({\n                width: innerTableElement.width(),\n                height: that.options.handle[HEIGHT]\n            });\n        },\n\n        setResizeHandleDragPosition: function(e) {\n            var that = this;\n            var options = that.options;\n            var min = options.min;\n            var tableHead = $(that.element).children(THEAD);\n            var tableBody = $(that.element).children(TBODY);\n            var topInnerTableElement = tableHead.length > 0 ? tableHead : tableBody;\n            var resizeHandle = $(that.resizeHandle);\n            var row = $(e.currentTarget).data(options.handle.dataAttribute);\n            var $row = $(row);\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var tableTopOffset = topInnerTableElement.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(topInnerTableElement.css(\"marginTop\"));\n\n            var rowOffsetTop = $row.offset().top -\n                                (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                parseFloat($row.css(\"marginTop\"));\n\n            var resizeHandleOffsetTop = resizeHandle.offset().top -\n                                (Math.max(0 , rootElement.offset().top) + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                parseFloat(resizeHandle.css(\"marginTop\"));\n\n            var handleOffset = constrain({\n                value: resizeHandleOffsetTop + scrollTopOffset + e.y.delta,\n                min: rowOffsetTop + scrollTopOffset + min,\n                max: tableTopOffset + outerHeight(tableHead) + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n            });\n\n            resizeHandle.css({ top: handleOffset });\n        },\n\n        resize: function(e) {\n            var that = this;\n            var options = that.options;\n            var row = $(e.currentTarget).data(options.handle.dataAttribute);\n            var currentRowHeight = outerHeight($(row));\n            var element = $(that.element);\n            var initialTableHeight = outerHeight(element);\n            var tableHead = element.children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = element.children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var initialStyleHeight = row.style[HEIGHT];\n            var newRowHeight = constrain({\n                value: currentRowHeight + e.y.initialDelta,\n                min: options.min,\n                max: abs(tableHeadHeight + tableBodyHeight - options.min)\n            });\n\n            that._setRowsHeightInPixels();\n            row.style[HEIGHT] = toPixels(newRowHeight);\n            that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n\n            if (inPercentages(initialStyleHeight)) {\n                //resize rows in percentages as late as possible to prevent incorrect precision calculations\n                that._setRowsHeightInPercentages();\n            }\n        },\n\n        _setRowsHeightInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(TBODY + COMMA + THEAD).children(TR);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n            }\n        },\n\n        _setRowsHeightInPercentages: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = $(that.element).children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(TR);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n            }\n        },\n\n        _setTableHeight: function(newHeight) {\n            var element = this.element;\n\n            if (inPercentages(element.style[HEIGHT])) {\n                element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n            }\n            else {\n                element.style[HEIGHT] = toPixels(newHeight);\n            }\n        }\n    });\n\n    RowResizing.create = function(editor) {\n        TableElementResizing.create(editor, {\n            name: \"rowResizing\",\n            type: RowResizing,\n            eventNamespace: NS\n        });\n    };\n\n    RowResizing.dispose = function(editor) {\n        TableElementResizing.dispose(editor, {\n            eventNamespace: NS\n        });\n    };\n\n    extend(Editor, {\n        RowResizing: RowResizing\n    });\n\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n    var noop = $.noop;\n\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n    var Draggable = kendo.ui.Draggable;\n    var Observable = kendo.Observable;\n    var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n\n    var NS = \".kendoEditorElementResizeHandle\";\n    var RESIZE_HANDLE_CLASS = \"k-element-resize-handle\";\n\n    var DRAG_START = \"dragStart\";\n    var DRAG = \"drag\";\n    var DRAG_END = \"dragEnd\";\n    var HALF_INSIDE = \"halfInside\";\n    var MOUSE_OVER = \"mouseover\";\n    var MOUSE_OUT = \"mouseout\";\n\n    var BODY = \"body\";\n    var TABLE = \"table\";\n\n    var EAST = \"east\";\n    var NORTH = \"north\";\n    var NORTHEAST = \"northeast\";\n    var NORTHWEST = \"northwest\";\n    var SOUTH = \"south\";\n    var SOUTHEAST = \"southeast\";\n    var SOUTHWEST = \"southwest\";\n    var WEST = \"west\";\n\n    var DOT = \".\";\n\n    var ElementResizeHandle = Observable.extend({\n        init: function(options) {\n            var that = this;\n\n            Observable.fn.init.call(that);\n\n            that.options = extend({}, that.options, options);\n            that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n\n            that._attachEventHandlers();\n            that._addStyles();\n            that._initDraggable();\n            that._initPositioningStrategy();\n            that._initDraggingStrategy();\n\n            $(that.element).data(TABLE, that.options.resizableElement);\n        },\n\n        destroy: function() {\n            var that = this;\n\n            $(that.element).off(NS).remove();\n            that.element = null;\n\n            that._destroyDraggable();\n\n            that.unbind();\n        },\n\n        options: {\n            appendTo: null,\n            direction: SOUTHEAST,\n            resizableElement: null,\n            rtl: false,\n            template:\n                \"<div class='k-element-resize-handle-wrapper' unselectable='on' contenteditable='false'>\" +\n                    \"<div class='\" + RESIZE_HANDLE_CLASS + \"'></div>\" +\n                \"</div>\"\n        },\n\n        events: [\n            DRAG_START,\n            DRAG,\n            DRAG_END,\n            MOUSE_OVER,\n            MOUSE_OUT\n        ],\n\n        show: function() {\n            this._setPosition();\n        },\n\n        _setPosition: function() {\n            var that = this;\n            var position = that._positioningStrategy.getPosition();\n\n            $(that.element).css({\n                top: position.top,\n                left: position.left,\n                position: \"absolute\"\n            });\n        },\n\n        _attachEventHandlers: function() {\n            var that = this;\n\n            $(that.element)\n                .on(MOUSE_OVER + NS, that._onMouseOver.bind(that))\n                .on(MOUSE_OUT + NS, that._onMouseOut.bind(that));\n        },\n\n        _onMouseOver: function() {\n            this.trigger(MOUSE_OVER);\n        },\n\n        _onMouseOut: function() {\n            this.trigger(MOUSE_OUT);\n        },\n\n        _addStyles: function() {\n            var that = this;\n            $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass(\"k-resize-\" + that.options.direction);\n        },\n\n        _initPositioningStrategy: function() {\n            var that = this;\n            var options = that.options;\n\n            that._positioningStrategy = HandlePositioningStrategy.create({\n                name: options.direction,\n                handle: that.element,\n                resizableElement: options.resizableElement,\n                rootElement: options.rootElement,\n                rtl: options.rtl\n            });\n        },\n\n        _initDraggable: function() {\n            var that = this;\n            var element = that.element;\n\n            if (that._draggable || !element) {\n                return;\n            }\n\n            that._draggable = new Draggable(element, {\n                dragstart: that._onDragStart.bind(that),\n                drag: that._onDrag.bind(that),\n                dragend: that._onDragEnd.bind(that)\n            });\n        },\n\n        _onDragStart: function() {\n            this.trigger(DRAG_START);\n        },\n\n        _onDrag: function(e) {\n            var that = this;\n\n            that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                deltaX: e.x.delta,\n                deltaY: e.y.delta,\n                initialDeltaX: e.x.initialDelta,\n                initialDeltaY: e.y.initialDelta\n            }));\n        },\n\n        _onDragEnd: function() {\n            this.trigger(DRAG_END);\n        },\n\n        _destroyDraggable: function() {\n            var that = this;\n\n            if (that._draggable) {\n                that._draggable.destroy();\n                that._draggable = null;\n            }\n        },\n\n        _initDraggingStrategy: function() {\n            var that = this;\n\n            that._draggingStrategy = HandleDraggingStrategy.create({\n                name: that.options.direction\n            });\n        }\n    });\n\n    var StrategyFactory = Class.extend({\n        init: function() {\n            this._items = [];\n        },\n\n        register: function(name, type) {\n            this._items.push({\n                name: name,\n                type: type\n            });\n        },\n\n        create: function(options) {\n            var items = this._items;\n            var itemsLength = items.length;\n            var name = options.name ? options.name.toLowerCase() : \"\";\n            var match;\n            var item;\n            var i;\n\n            for (i = 0; i < itemsLength; i++) {\n                item = items[i];\n\n                if (item.name.toLowerCase() === name) {\n                    match = item;\n                    break;\n                }\n            }\n\n            if (match) {\n                return new match.type(options);\n            }\n        }\n    });\n\n    var PositioningStrategyFactory = StrategyFactory.extend({});\n    PositioningStrategyFactory.current = new PositioningStrategyFactory();\n\n    var HandlePositioningStrategy = Class.extend({\n        init: function(options) {\n            var that = this;\n            that.options = extend({}, that.options, options);\n        },\n\n        options: {\n            handle: null,\n            offset: HALF_INSIDE,\n            resizableElement: null,\n            rootElement: null,\n            rtl: false\n        },\n\n        getPosition: function() {\n            var that = this;\n\n            var position = that.calculatePosition();\n            var handleOffsetPosition = that.applyHandleOffset(position);\n            var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n\n            return scrollOffsetPosition;\n        },\n\n        calculatePosition: noop,\n\n        applyHandleOffset: function(position) {\n            var options = this.options;\n            var handle = $(options.handle);\n\n            if (options.offset === HALF_INSIDE) {\n                return {\n                    top: position.top - (outerHeight(handle) / 2),\n                    left: position.left - (outerWidth(handle) / 2)\n                };\n            }\n\n            return position;\n        },\n\n        applyScrollOffset: function(position) {\n            var options = this.options;\n            var rootElement = $(options.rootElement);\n            var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var browser = kendo.support.browser;\n            var rootLeft;\n\n            if (!rootElement.is(BODY)) {\n                rootLeft = kendo.scrollLeft(rootElement) || 0;\n\n                if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    rootLeft = rootLeft * -1;\n                }\n\n                return {\n                    top: position.top + (rootElement.scrollTop() || 0),\n                    left: position.left + rootLeft - scrollBarWidth\n                };\n            }\n\n            return position;\n        }\n    });\n\n    HandlePositioningStrategy.create = function(options) {\n        return PositioningStrategyFactory.current.create(options);\n    };\n\n    var EastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + (outerHeight(resizableElement) / 2),\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n\n    var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n\n    var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n\n    var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n\n    var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n\n    var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n\n    var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n\n    var WestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + (outerHeight(resizableElement) / 2),\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n\n    var DraggingStrategyFactory = StrategyFactory.extend({});\n    DraggingStrategyFactory.current = new DraggingStrategyFactory();\n\n    var HandleDraggingStrategy = Class.extend({\n        init: function(options) {\n            var that = this;\n            that.options = extend({}, that.options, options);\n        },\n\n        options: {\n            deltaX: {\n                adjustment: null,\n                modifier: null\n            },\n            deltaY: {\n                adjustment: null,\n                modifier: null\n            }\n        },\n\n        adjustDragDelta: function(deltas) {\n            var options = this.options;\n            var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n            var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n\n            return {\n                deltaX: deltas.deltaX * xAxisAdjustment,\n                deltaY: deltas.deltaY * yAxisAdjustment,\n                initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n            };\n        }\n    });\n\n    HandleDraggingStrategy.create = function(options) {\n        return DraggingStrategyFactory.current.create(options);\n    };\n\n    var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 1,\n                modifier: 1\n            },\n            deltaY: {\n                adjustment: 0,\n                modifier: 0\n            }\n        }\n    });\n\n    var EastDraggingStrategy = HorizontalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n\n    var WestDraggingStrategy = HorizontalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n\n    var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 0,\n                modifier: 0\n            },\n            deltaY: {\n                adjustment: 1,\n                modifier: 1\n            }\n        }\n    });\n\n    var NorthDraggingStrategy = VerticalDraggingStrategy.extend({\n        options: {\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n\n    var SouthDraggingStrategy = VerticalDraggingStrategy.extend({\n        options: {\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n\n    var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 1,\n                modifier: 1\n            },\n            deltaY: {\n                adjustment: 1,\n                modifier: 1\n            }\n        }\n    });\n\n    var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            },\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n\n    var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            },\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n\n    var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            },\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n\n    var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            },\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n\n    extend(Editor, {\n        ElementResizeHandle: ElementResizeHandle\n    });\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var global = window;\n    var math = global.Math;\n    var min = math.min;\n    var max = math.max;\n\n    var $ = kendo.jQuery;\n    var contains = $.contains;\n    var extend = $.extend;\n\n    var browser = kendo.support.browser;\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n    var ElementResizeHandle = Editor.ElementResizeHandle;\n    var ResizingUtils = Editor.ResizingUtils;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var constrain = ResizingUtils.constrain;\n    var inPercentages = ResizingUtils.inPercentages;\n    var inPixels = ResizingUtils.inPixels;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n    var RangeUtils = Editor.RangeUtils;\n\n    var NS = \".kendoEditorElementResizing\";\n    var RESIZE_HANDLE_WRAPPER_CLASS = \"k-element-resize-handle-wrapper\";\n    var TABLE_CLASS = \"k-table\";\n    var ELEMENT_RESIZING_CLASS = \"k-element-resizing\";\n\n    var DRAG_START = \"dragStart\";\n    var DRAG = \"drag\";\n    var DRAG_END = \"dragEnd\";\n    var KEY_DOWN = \"keydown\";\n    var MOUSE_DOWN = \"mousedown\";\n    var SELECT = \"select\";\n    var DROP = \"drop\";\n\n    var COLUMN = \"td\";\n    var ROW = \"tr\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n    var TABLE = \"table\";\n    var IMG = \"img\";\n    var ELEMENT_TYPES = [\"TABLE\", \"IMG\"];\n\n    var COMMA = \",\";\n    var WIDTH = \"width\";\n    var HEIGHT = \"height\";\n\n    var EAST = \"east\";\n    var NORTH = \"north\";\n    var NORTHEAST = \"northeast\";\n    var NORTHWEST = \"northwest\";\n    var SOUTH = \"south\";\n    var SOUTHEAST = \"southeast\";\n    var SOUTHWEST = \"southwest\";\n    var WEST = \"west\";\n\n    var DOT = \".\";\n\n    function isUndefined(value) {\n        return typeof(value) === \"undefined\";\n    }\n\n    var ElementResizing = Class.extend({\n        init: function(element, options) {\n            var that = this;\n\n            that.options = extend({}, that.options, options);\n            that.handles = [];\n\n            // Check whether the element is TABLE or IMG\n            if (ELEMENT_TYPES.indexOf(element.nodeName) >= 0) {\n                that.element = element;\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n\n            $(that.element).off(NS);\n            that.element = null;\n\n            $(that.options.rootElement).off(KEY_DOWN + NS);\n\n            that._destroyResizeHandles();\n        },\n\n        options: {\n            appendHandlesTo: null,\n            rtl: false,\n            rootElement: null,\n            minWidth: 10,\n            minHeight: 10,\n            handles: [{\n                direction: NORTHWEST\n            }, {\n                direction: NORTH\n            }, {\n                direction: NORTHEAST\n            }, {\n                direction: EAST\n            }, {\n                direction: SOUTHEAST\n            }, {\n                direction: SOUTH\n            }, {\n                direction: SOUTHWEST\n            }, {\n                direction: WEST\n            }]\n        },\n\n        resize: function(args) {\n            var that = this;\n            var deltas = extend({}, {\n                deltaX: 0,\n                deltaY: 0,\n                initialDeltaX: 0,\n                initialDeltaY: 0\n            }, args);\n\n            that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n            that.showResizeHandles();\n        },\n\n        _resizeWidth: function() {\n            return false;\n        },\n\n        _resizeHeight: function() {\n            return false;\n        },\n\n        _getMaxDimensionValue: function(dimension) {\n            var that = this;\n            var element = $(that.element);\n            var dimensionLowercase = dimension.toLowerCase();\n            var rtlModifier = that.options.rtl ? (-1) : 1;\n            var parent = $(that.element).parent();\n            var parentElement = parent[0];\n            var parentDimension = parent[dimensionLowercase]();\n            var parentScrollOffset = rtlModifier * (dimension === WIDTH ? kendo.scrollLeft(parent) : parent.scrollTop());\n\n            if (parentElement && parentElement === element.closest(COLUMN)[0]) {\n                if (parentElement.style[dimensionLowercase] === \"\" && !inPercentages(that.element.style[dimensionLowercase])) {\n                    return Infinity;\n                }\n                else {\n                    return (parentDimension + parentScrollOffset);\n                }\n            }\n            else {\n                return (parentDimension + parentScrollOffset);\n            }\n        },\n\n        showResizeHandles: function() {\n            var that = this;\n\n            that._initResizeHandles();\n            that._showResizeHandles();\n        },\n\n        _initResizeHandles: function() {\n            var that = this;\n            var handles = that.handles;\n            var options = that.options;\n            var handleOptions = that.options.handles;\n            var length = handleOptions.length;\n            var i;\n\n            if (handles && handles.length > 0) {\n                return;\n            }\n\n            for (i = 0; i < length; i++) {\n                that.handles.push(new ElementResizeHandle(extend({\n                    appendTo: options.appendHandlesTo,\n                    resizableElement: that.element,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                }, handleOptions[i])));\n            }\n\n            that._bindToResizeHandlesEvents();\n        },\n\n        _destroyResizeHandles: function() {\n            var that = this;\n            var length = that.handles ? that.handles.length : 0;\n\n            for (var i = 0; i < length; i++) {\n                that.handles[i].destroy();\n            }\n\n            that.handles = [];\n        },\n\n        _showResizeHandles: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that.handles[i].show();\n            }\n        },\n\n        _bindToResizeHandlesEvents: function() {\n            return false;\n        },\n\n        _onResizeHandleDragStart: function() {\n            var that = this;\n            var element = $(that.element);\n\n            element.addClass(ELEMENT_RESIZING_CLASS);\n\n            that._initialElementHeight = outerHeight(element);\n            that._initialElementWidth = outerWidth(element);\n            that._disableKeyboard();\n        },\n\n        _onResizeHandleDrag: function(e) {\n            this.resize(e);\n        },\n\n        _onResizeHandleDragEnd: function() {\n            var that = this;\n            $(that.element).removeClass(ELEMENT_RESIZING_CLASS);\n            that._enableKeyboard();\n        },\n\n        _enableKeyboard: function() {\n            $(this.options.rootElement).off(KEY_DOWN + NS);\n        },\n\n        _disableKeyboard: function() {\n            $(this.options.rootElement).on(KEY_DOWN + NS, function(e) {\n                e.preventDefault();\n            });\n        }\n    });\n\n    var TableResizing = ElementResizing.extend({\n        _bindToResizeHandlesEvents: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n            var handle;\n\n            for (i = 0; i < length; i++) {\n                handle = handles[i];\n                handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n                handle.bind(DRAG, that._onResizeHandleDrag.bind(that));\n                handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n            }\n        },\n\n        _hasRowsInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n\n            for (var i = 0; i < rows.length; i++) {\n                if (rows[i].style.height === \"\" || inPixels(rows[i].style.height)) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        _resizeWidth: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var styleWidth = element[0].style[WIDTH];\n            var currentWidth = outerWidth(element);\n            var parentWidth = element.parent().width();\n            var maxWidth = that._getMaxDimensionValue(WIDTH);\n            var newWidth;\n            var ratioValue;\n            var ratioTotalValue;\n            var constrainedWidth;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementWidth)) {\n                that._initialElementWidth = currentWidth;\n            }\n\n            //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedWidth = constrain({\n                value: that._initialElementWidth + initialDelta,\n                min: that.options.minWidth,\n                max: maxWidth\n            });\n\n            if (inPercentages(styleWidth)) {\n                //detect resizing greater than 100%\n                if (currentWidth + delta > parentWidth) {\n                    ratioValue = max(constrainedWidth, parentWidth);\n                    ratioTotalValue = min(constrainedWidth, parentWidth);\n                }\n                else {\n                    ratioValue = min(constrainedWidth, parentWidth);\n                    ratioTotalValue = max(constrainedWidth, parentWidth);\n                }\n\n                newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n            }\n            else {\n                newWidth = toPixels(constrainedWidth);\n            }\n\n            that._setColumnsWidth();\n\n            element[0].style[WIDTH] = newWidth;\n        },\n\n        _resizeHeight: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var styleHeight = element[0].style[HEIGHT];\n            var currentHeight = outerHeight(element);\n            var parent = element.parent();\n            var parentHeight = parent.height();\n            var maxHeight = that._getMaxDimensionValue(HEIGHT);\n            var newHeight;\n            var ratioValue;\n            var ratioTotalValue;\n            var constrainedHeight;\n            var minHeight = that.options.minHeight;\n            var hasRowsInPixels = that._hasRowsInPixels();\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementHeight)) {\n                that._initialElementHeight = currentHeight;\n            }\n\n            //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedHeight = constrain({\n                value: that._initialElementHeight + initialDelta,\n                min: minHeight,\n                max: maxHeight\n            });\n\n            if (hasRowsInPixels && delta < 0) {\n                //decreasing table height when rows are sized in pixels is not possible\n                that._setRowsHeightInPercentages();\n            }\n\n            if (inPercentages(styleHeight)) {\n                //detect resizing greater than 100%\n                if (currentHeight + delta > parentHeight) {\n                    ratioValue = max(constrainedHeight, parentHeight);\n                    ratioTotalValue = min(constrainedHeight, parentHeight);\n                }\n                else {\n                    ratioValue = min(constrainedHeight, parentHeight);\n                    ratioTotalValue = max(constrainedHeight, parentHeight);\n                }\n\n                newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n            }\n            else {\n                newHeight = toPixels(constrainedHeight);\n            }\n\n            element[0].style[HEIGHT] = newHeight;\n\n            if (hasRowsInPixels && delta < 0) {\n                //restore original rows height unit\n                that._setRowsHeightInPixels();\n            }\n        },\n\n        _setColumnsWidth: function() {\n            var that = this;\n            var element = $(that.element);\n            var parentElement = element.parent()[0];\n            var parentColumn = element.closest(COLUMN);\n            var columns = parentColumn.closest(ROW).children();\n            var columnsLength = columns.length;\n            var i;\n\n            function isWidthInPercentages(element) {\n                var styleWidth = element.style.width;\n\n                if (styleWidth !== \"\") {\n                    return inPercentages(styleWidth) ? true : false;\n                }\n                else {\n                    return $(element).hasClass(TABLE_CLASS) ? true : false;\n                }\n            }\n\n            if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === \"\") {\n                for (i = 0; i < columnsLength; i++) {\n                    columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                }\n            }\n        },\n\n        _setRowsHeightInPercentages: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = $(that.element).children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n            }\n        },\n\n        _setRowsHeightInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n            }\n        }\n    });\n\n    var ImageResizing = ElementResizing.extend({\n        _bindToResizeHandlesEvents: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n            var handle;\n\n            for (i = 0; i < length; i++) {\n                handle = handles[i];\n                handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n\n                if (handle.options.direction === \"north\" || handle.options.direction === \"south\") {\n                    handle.bind(DRAG, that._onResizeHandleDragVertical.bind(that));\n                } else if (handle.options.direction === \"east\" || handle.options.direction === \"west\") {\n                    handle.bind(DRAG, that._onResizeHandleDragHorizontal.bind(that));\n                } else {\n                    handle.bind(DRAG, that._onResizeHandleDragLocked.bind(that));\n                }\n\n                handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n            }\n        },\n\n        _getDeltas: function(args) {\n            return extend({}, {\n                deltaX: 0,\n                deltaY: 0,\n                initialDeltaX: 0,\n                initialDeltaY: 0\n            }, args);\n        },\n\n        _onResizeHandleDragVertical: function(args) {\n            var deltas = this._getDeltas(args);\n\n            this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n            this.showResizeHandles();\n        },\n\n        _onResizeHandleDragHorizontal: function(args) {\n            var deltas = this._getDeltas(args);\n\n            this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            this.showResizeHandles();\n        },\n\n        _onResizeHandleDragLocked: function(args) {\n            var min = Math.min(Math.abs(args.initialDeltaX), Math.abs(args.initialDeltaY)),\n                initialWidth = this._initialElementWidth,\n                initialHeight = this._initialElementHeight,\n                deltas;\n\n            if (min === args.initialDeltaX || min === args.initialDeltaX * -1) {\n                args.initialDeltaY = args.initialDeltaX * initialHeight / initialWidth;\n                args.deltaY = args.deltaX;\n            } else if (min === args.initialDeltaY || min === args.initialDeltaY * -1) {\n                args.initialDeltaX = args.initialDeltaY * initialWidth / initialHeight;\n                args.deltaX = args.deltaY;\n            }\n\n            deltas = this._getDeltas(args);\n\n            this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n            this.showResizeHandles();\n        },\n\n        _resizeWidth: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var currentWidth = outerWidth(element);\n            var newWidth;\n            var constrainedWidth;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementWidth)) {\n                that._initialElementWidth = currentWidth;\n            }\n\n            //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedWidth = constrain({\n                value: that._initialElementWidth + initialDelta,\n                min: that.options.minWidth,\n                max: that._getMaxDimensionValue(WIDTH)\n            });\n\n            newWidth = toPixels(constrainedWidth);\n            element[0].style[WIDTH] = newWidth;\n            element.attr(WIDTH, Math.floor(constrainedWidth));\n        },\n\n        _resizeHeight: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var currentHeight = outerHeight(element);\n            var newHeight;\n            var constrainedHeight;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementHeight)) {\n                that._initialElementHeight = currentHeight;\n            }\n\n            //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedHeight = constrain({\n                value: that._initialElementHeight + initialDelta,\n                min: that.options.minHeight,\n                max: Number.MAX_SAFE_INTEGER\n            });\n\n            newHeight = toPixels(constrainedHeight);\n            element[0].style[HEIGHT] = newHeight;\n            element.attr(HEIGHT, Math.floor(constrainedHeight));\n        }\n    });\n\n    var ElementResizingFactory = Class.extend({\n        create: function(editor) {\n            var factory = this;\n\n            $(editor.body)\n                .on(\"dragstart\" + NS, function() {\n                    var nodes = RangeUtils.nodes(editor.getRange()),\n                        hasImg = false;\n\n                    nodes.forEach(function(node) {\n                        if (node.nodeName === \"IMG\") {\n                            hasImg = true;\n                        }\n                    });\n\n                    if (hasImg && nodes.length > 1) {\n                        editor.elementResizing._destroyResizeHandles();\n                    }\n                })\n                .on(DROP + NS, function() {\n                    setTimeout(function() {\n                        var image = RangeUtils.image(editor.getRange());\n\n                        if (image) {\n                            editor.elementResizing._destroyResizeHandles();\n                            editor.elementResizing.element = image;\n                            editor.elementResizing.showResizeHandles();\n                        }\n                    });\n                })\n                .on(MOUSE_DOWN + NS, TABLE + COMMA + IMG, function(e) {\n                    var eventTarget = e.target;\n                    var eventCurrentTarget = e.currentTarget;\n                    var elementResizing = editor.elementResizing;\n                    var element = elementResizing ? elementResizing.element : null;\n\n                    if (elementResizing) {\n                        if (element && eventCurrentTarget !== element) {\n                            if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                //prevent a parent table resizing init when clicking on a nested table when the event bubbles\n                                //instead of stopping event propagation\n                                return;\n                            }\n                            else {\n                                if (element !== eventTarget) {\n                                    editor._destroyElementResizing();\n                                    factory._initResizing(editor, eventCurrentTarget);\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        factory._initResizing(editor, eventCurrentTarget);\n                    }\n\n                    editor._showElementResizeHandles();\n                })\n                .on(MOUSE_DOWN + NS, function(e) {\n                    var elementResizing = editor.elementResizing;\n                    var element = elementResizing ? elementResizing.element : null;\n                    var target = e.target;\n                    var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n\n                    if (elementResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                        editor._destroyElementResizing();\n                    }\n                });\n        },\n\n        dispose: function(editor) {\n            $(editor.body).off(NS);\n        },\n\n        _initResizing: function(editor, element) {\n            // table and image resizing is natively supported in IE\n            // https://stackoverflow.com/questions/53831846/resizing-images-in-contenteditable-div-stopped-working-in-firefox\n            // Enable custom resize handlers for FF too\n            if (!browser.msie) {\n                if ($(element).is(TABLE)) {\n                    editor.elementResizing = editor.tableResizing = new TableResizing(element, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                } else if ($(element).is(IMG)) {\n                    editor.elementResizing = new ImageResizing(element, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                }\n\n                if (editor._showElementResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n                    editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n                }\n            }\n        }\n    });\n\n    ElementResizingFactory.current = new ElementResizingFactory();\n\n    extend(Editor, {\n        TableResizing: TableResizing,\n        ImageResizing: ImageResizing,\n        ElementResizing: ElementResizing,\n        ElementResizingFactory: ElementResizingFactory\n    });\n\n})(window.kendo);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    Command = Editor.Command;\n\nvar tableFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"table\"] }]);\nvar cellsFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"td\",\"th\"] }]);\nvar reUnit = /([a-z]+|%)$/i;\n\nvar COL = \"col\";\nvar ROW = \"row\";\nvar COLGROUP = \"colgroup\";\nvar SCOPE = \"scope\";\nvar COL_INDEX = \"col-index\";\nvar TH = \"th\";\nvar TD = \"td\";\nvar THEAD = \"thead\";\nvar HEADERS = \"headers\";\nvar TABLE = \"table\";\n\nvar TableWizardCommand = Command.extend({\n    exec: function() {\n        var cmd = this;\n        var editor = cmd.editor;\n        var range = cmd.range = cmd.lockRange();\n        var isTableCellWizard = cmd.options.tableCellWizard;\n        var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined$1;\n        var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined$1;\n        var options = {\n            visible: false,\n            messages: editor.options.messages,\n            closeCallback: cmd.onDialogClose.bind(cmd),\n            table: cmd.parseTable(selectedTable, selectedCells),\n            dialogOptions: editor.options.dialogOptions,\n            isRtl: kendo.support.isRtl(editor.wrapper)\n        };\n\n        var dialog = new Editor.TableWizardDialog(options);\n        dialog.open(isTableCellWizard);\n    },\n\n    onDialogClose: function(data) {\n        var cmd = this;\n        cmd.releaseRange(cmd.range);\n\n        if (data) { //Ok button pressed\n            if (cmd.options.insertNewTable) {\n                cmd.insertTable(cmd.createNewTable(data));\n            } else {\n                cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n            }\n        }\n    },\n    releaseRange: function(range) {\n        var cmd = this;\n        var doc = cmd.editor.document;\n        dom.windowFromDocument(doc).focus();\n        Command.fn.releaseRange.call(cmd, range);\n    },\n    insertTable: function(table) {\n        var range = this.range;\n\n        range.insertNode(table);\n        range.collapse(true);\n        this.editor.selectRange(range);\n\n        this._ensureFocusableAfterTable(table);\n    },\n    _ensureFocusableAfterTable: function(table) {\n        var siblingNodes = $(table).parent().contents();\n        var lastSiblingIndex = siblingNodes.length - 1;\n        var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n        while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n            lastSiblingIndex -= 1;\n            lastSibling = siblingNodes.get(lastSiblingIndex);\n        }\n\n        if (lastSibling === table) {\n            dom.insertAfter(dom.createEmptyNode(this.editor.document, \"p\"), table);\n        }\n    },\n    updateTable: function(data, table, selectedCells) {\n        var cmd = this;\n        var tableRows = $(table.rows).toArray();\n        var tableProp = data.tableProperties;\n        var rows = tableProp.rows;\n        var tHead = table.tHead;\n        var last = cmd._lastInCollection;\n        var lastSelectedRow, cellProp;\n\n        //Leave only first selected cell\n        while (selectedCells.length > 1) {\n            selectedCells.pop();\n        }\n\n        lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n\n        cmd._deleteTableRows(tableRows, tableRows.length - rows);\n\n        if (tableRows.length < rows) {\n            cmd._addRows(lastSelectedRow, rows, tableRows);\n        }\n\n        dom.reMapTableColumns(table, COL_INDEX);\n        cmd._updateColumns(tableRows, tableProp.columns, selectedCells, lastSelectedRow);\n        cmd._updateTableProperties(table, tableProp);\n\n        cellProp = data.cellProperties;\n        if (selectedCells[0]) {\n            dom.attr(selectedCells[0], { id: (cellProp || {}).id || null });\n        }\n        if (cellProp) {\n            (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function(i, cell) {\n                cmd._updateCellProperties(cell, cellProp);\n            });\n        }\n\n        cmd._updateCaption(table, tableProp);\n\n        if (tHead) {\n            cmd._updateHeadersWithThead(table, data);\n        } else {\n            cmd._updateHeadersNoThead(table, data);\n        }\n\n        cmd._updateHeaderAssociates(table, tableProp);\n        dom.clearTableMappings(table, COL_INDEX);\n    },\n    _isHeadingRow: function(row) {\n        return dom.is(row.cells[0], TH) && dom.is(row.parentNode, THEAD);\n    },\n    _isHeadingCell: function(cell) {\n        return dom.is(cell, TH);\n    },\n    cellsWithHeadersAssociated: function(table) {\n        var cells = $(table.rows).children();\n        var headingIds = [];\n        var checkHeader = function(header) {\n            return headingIds.indexOf(header) > -1;\n        };\n\n        cells.each(function(c, cell) {\n            if (cell.id && dom.is(cell, TH)) {\n                headingIds.push(cell.id);\n            }\n        });\n\n        var associatedCells = cells.filter(function(c, cell) {\n            var headersAttr = cell.getAttribute(HEADERS);\n            var headersArray;\n\n            if (headersAttr && !dom.is(cell, TH)) {\n                headersArray = headersAttr.split(\" \");\n\n                if (headersArray && headersArray.length > 0) {\n                    return headersArray.some(checkHeader);\n                }\n            }\n\n            return false;\n        });\n\n        return !!associatedCells.length;\n    },\n    _insertCells: function(count, row, index) {\n        index = isNaN(index) ? -1 : index;\n        for (var i = 0, cell; i < count; i++) {\n            cell = row.insertCell(index);\n            cell.innerHTML = \"&nbsp;\";\n        }\n    },\n    _deleteTableRows: function(rows, count) {\n        for (var i = 0, row, rowParent; i < count; i++) {\n            row = rows.pop();\n            rowParent = row.parentNode;\n            rowParent.removeChild(row);\n            if (!rowParent.rows.length) {\n                dom.remove(rowParent);\n            }\n        }\n    },\n    createNewTable: function(data) {\n        var cmd = this;\n        var doc = cmd.editor.document;\n        var tableProp = data.tableProperties;\n        var table = dom.create(doc, TABLE);\n        var rowIndex = 0;\n        var thead;\n\n        cmd._updateTableProperties(table, tableProp);\n        cmd._updateCaption(table, tableProp);\n\n        if (tableProp.headerRows && tableProp.headerRows > 0) {\n            thead = table.createTHead();\n            cmd._createTableRows(data, thead, rowIndex, true);\n            rowIndex += tableProp.headerRows;\n        }\n\n        var tbody = table.createTBody();\n        cmd._createTableRows(data, tbody, rowIndex, false);\n\n        dom.reMapTableColumns(table, COL_INDEX);\n\n        if (tableProp.cellsWithHeaders === \"ids\") {\n            dom.associateWithIds(table);\n        } else if (tableProp.cellsWithHeaders === \"scope\") {\n            cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n        }\n\n        dom.clearTableMappings(table, COL_INDEX);\n\n        return table;\n    },\n    _createTableRows: function(data, container, initialIndex, headerRows) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var cellProp = data.cellProperties;\n        var columns = tableProp.columns;\n        var rows = headerRows ? tableProp.headerRows : tableProp.rows;\n        var headerColumns = tableProp.headerColumns;\n\n        for (var r = initialIndex, row; r < rows; r++) {\n            row = container.insertRow();\n\n            for (var c = 0, cell; c < columns; c++) {\n                if (headerRows || headerColumns > c) {\n                    cell = document.createElement(TH);\n                } else {\n                    cell = document.createElement(TD);\n                }\n\n                row.appendChild(cell);\n                cell.innerHTML = \"&nbsp;\";\n                if (cellProp && r === 0 && c === 0 && cellProp.id) {\n                    cell.id = cellProp.id;\n                }\n\n                cmd._updateCellProperties(cell, cellProp && (cellProp.selectAllCells || (r === 0 && c === 0)) ? cellProp : {});\n            }\n        }\n    },\n    _addRows: function(lastSelectedRow, rows, tableRows) {\n        var cmd = this;\n        var rowIndex = $(lastSelectedRow).index();\n        var cellsLength = lastSelectedRow.cells.length;\n        var newRowsCount = rows - tableRows.length;\n        var parent = lastSelectedRow.parentNode;\n        var row;\n\n        while (newRowsCount) {\n            row = parent.insertRow(rowIndex + 1);\n            cmd._insertCells(cellsLength - row.cells.length, row);\n            newRowsCount--;\n        }\n    },\n    _updateColumns: function(tableRows, columns, selectedCells, lastSelectedRow) {\n        var cmd = this;\n        var last = cmd._lastInCollection;\n        var firstRowLastCell = last(tableRows[0].cells);\n        var numberOfColumns = Number(firstRowLastCell.getAttribute(COL_INDEX)) + firstRowLastCell.colSpan;\n\n        if (numberOfColumns > columns) {\n            $(tableRows).each(function(i, row) {\n                var lastCurrentCell = last(row.cells);\n                var rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n\n                while (rowColumns > columns) {\n                    if (lastCurrentCell.colSpan && lastCurrentCell.colSpan > 1) {\n                        lastCurrentCell.colSpan -= 1;\n                    } else {\n                        row.deleteCell(-1);\n                    }\n\n                    lastCurrentCell = last(row.cells);\n                    rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n                }\n            });\n        }\n\n        if (numberOfColumns < columns) {\n            var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n            $(tableRows).each(function(i, row) {\n                var lastCurrentCell = last(row.cells);\n                cmd._insertCells(columns - Number(lastCurrentCell.getAttribute(COL_INDEX)) - lastCurrentCell.colSpan, row, cellIndex + 1);\n            });\n        }\n    },\n    _updateTableProperties: function(table, data) {\n        var style = this._getStylesData(data);\n        dom.attr(table, {\n            cellSpacing: data.cellSpacing || null,\n            cellPadding: data.cellPadding || null,\n            className: data.className || null,\n            id: data.id || null,\n            summary: data.summary || null,\n            style: style || null\n        });\n        $(table).addClass(\"k-table\");\n    },\n    _updateCellProperties: function(cell, data) {\n        var style = this._getStylesData(data);\n        style.padding = data.cellPadding || null;\n        style.margin = data.cellMargin || null;\n        dom.attr(cell, {\n            style: style || null,\n            className: data.className || null\n        });\n    },\n    _updateCaption: function(table, data) {\n        if (table.caption && !data.captionContent) {\n            table.deleteCaption();\n        } else if (data.captionContent) {\n            var caption = table.createCaption();\n            caption.innerHTML = data.captionContent;\n            var alignment = this._getAlignmentData(data.captionAlignment);\n            dom.attr(caption, {\n                style: {\n                    textAlign: alignment.textAlign,\n                    verticalAlign: alignment.verticalAlign\n                }\n            });\n        }\n    },\n    _updateHeadersNoThead: function(table, data) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var rows = table.rows;\n        var row, cells, cell, i, j;\n\n        for (i = 0; i < rows.length; i++) {\n            row = rows[i];\n            cells = row.cells;\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                if (!cmd._isHeadingCell(cell) && (i < tableProp.headerRows || tableProp.headerColumns > cell.getAttribute(COL_INDEX))) {\n                    dom.changeTag(cell, TH, false);\n                } else if (cmd._isHeadingCell(cell) && i >= tableProp.headerRows && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TD, false);\n                }\n            }\n        }\n    },\n    _updateHeadersWithThead: function(table, data) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var thead = table.tHead;\n        var rowIndex = 0;\n        var tbody = table.tBodies[0];\n        var row, cell, i;\n\n        if (!tbody) {\n            tbody = table.createTBody();\n        }\n\n        if (tableProp.headerRows && tableProp.headerRows > 0) {\n            if (!thead) {\n                thead = table.createTHead();\n            }\n\n            while (thead.rows.length < tableProp.headerRows) {\n                thead.appendChild(tbody.rows[0]);\n            }\n\n            while (thead.rows.length > tableProp.headerRows) {\n                tbody.appendChild(thead.rows[0]);\n            }\n\n            cmd._swapToHeaderCells(thead);\n        } else if (thead) {\n            while (thead.rows.length > 0) {\n                tbody.appendChild(thead.rows[thead.rows.length - 1]);\n            }\n\n            table.deleteTHead();\n        }\n\n        while (tbody.rows.length > rowIndex) {\n            row = tbody.rows[rowIndex];\n            for (i = 0; i < row.cells.length; i++) {\n                cell = row.cells[i];\n                if (cmd._isHeadingCell(cell) && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TD, false);\n                } else if (!cmd._isHeadingCell(cell) && tableProp.headerColumns > cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TH, false);\n                }\n            }\n            rowIndex += 1;\n        }\n    },\n    _updateHeaderAssociates: function(table, tableProp) {\n        var cmd = this;\n\n        if (tableProp.cellsWithHeaders === \"ids\") {\n            if (!cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeScopes(table);\n            }\n            dom.associateWithIds(table);\n        } else if (tableProp.cellsWithHeaders === \"scope\") {\n            if (cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeAssociates(table);\n            }\n            cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n        } else {\n            if (cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeAssociates(table);\n            } else {\n                cmd._removeScopes(table);\n            }\n        }\n    },\n    _addScopes: function(table, headerRows, headerCols) {\n        var rows = table.rows;\n        var i, j, row, cell;\n\n        for (i = 0; i < rows.length; i++) {\n            row = rows[i];\n\n            for (j = 0; j < row.cells.length; j++) {\n                cell = row.cells[j];\n\n                if (i < headerRows) {\n                    cell.setAttribute(SCOPE, COL);\n                } else if (cell.getAttribute(COL_INDEX) < headerCols) {\n                    cell.setAttribute(SCOPE, ROW);\n                }\n            }\n        }\n    },\n    _removeScopes: function(table) {\n        $(table).find(TH).removeAttr(SCOPE);\n        $(table).find(COL).remove();\n        $(table).find(COLGROUP).remove();\n    },\n    _removeAssociates: function(table) {\n        $(table).find(\"th, td\").removeAttr(\"id headers\");\n    },\n    _swapToHeaderCells: function(thead) {\n        var tds = $(thead).find(\"td\");\n        var swapCell = function(index, cell) {\n            dom.changeTag(cell, TH, false);\n        };\n        tds.each(swapCell);\n    },\n    _getStylesData: function(data) {\n        var that = this;\n        var alignment = this._getAlignmentData(data.alignment);\n        var whiteSpace = \"wrapText\" in data ? (data.wrapText ? \"\" : \"nowrap\") : null;\n\n        return $.extend({\n            width: data.width ? data.width + data.widthUnit : null,\n            height: data.height ? data.height + data.heightUnit : null,\n            textAlign: alignment.textAlign,\n            verticalAlign: alignment.verticalAlign,\n            backgroundColor: data.bgColor || \"\",\n            borderWidth: data.borderWidth,\n            borderStyle: data.borderStyle,\n            borderColor: data.borderColor || \"\",\n            borderCollapse: data.collapseBorders ? \"collapse\" : null,\n            whiteSpace: whiteSpace\n        }, that._getTablePositionData(data.position));\n    },\n    _getAlignmentData: function(alignment) {\n        var textAlign = \"\";\n        var verticalAlign = textAlign;\n\n        if (alignment) {\n            if (alignment.indexOf(\" \") != -1) {\n                var align = alignment.split(\" \");\n                textAlign = align[0];\n                verticalAlign = align[1];\n            } else {\n                textAlign = alignment;\n            }\n        }\n        return { textAlign: textAlign, verticalAlign: verticalAlign };\n    },\n    _getTablePositionData: function(position) {\n        if (!position) {\n            return {};\n        }\n\n        return { marginLeft: position != \"left\" ? \"auto\" : \"\", marginRight: position != \"right\" ? \"auto\" : \"\" };\n    },\n    parseTable: function(table, selectedCells) {\n        if (!table) {\n            return { tableProperties: {}, selectedCells: [] };\n        }\n\n        var cmd = this;\n        var tStyle = table.style;\n        var rows = table.rows;\n        var caption = table.caption;\n        var captionClone = $(caption ? caption.cloneNode(true) : undefined$1);\n        captionClone.find(\".k-marker\").remove();\n\n        var cssClass = table.className;\n        cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, \"\");\n        cssClass = cssClass.replace(/\\sk-table\\s/, \" \");\n        cssClass = cssClass.replace(/^k-table$/, \"\");\n\n        var tableAlignment = cmd._getAlignment(table, true);\n        var tablePosition = cmd._getTablePosition(table);\n        var captionAlignment = caption ? cmd._getAlignment(caption) : undefined$1;\n        var numberOfHeaderRows = dom._getNumberOfHeaderRows(table);\n\n        var cellsWithHeaders;\n        if (cmd.cellsWithHeadersAssociated(table)) {\n            cellsWithHeaders = \"ids\";\n        } else if ($(table).find(\"th[scope]\").length > 0) {\n            cellsWithHeaders = \"scope\";\n        } else {\n            cellsWithHeaders = \"none\";\n        }\n\n        dom.reMapTableColumns(table, COL_INDEX);\n        var numberOfColumns = dom._getNumberOfColumns(table);\n        var numberOfHeaderColumns = dom._getNumberOfHeaderColumns(table, numberOfHeaderRows);\n        dom.clearTableMappings(table, COL_INDEX);\n\n        var tableJson = {\n            tableProperties: {\n                width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                columns: numberOfColumns,\n                rows: rows.length,\n                widthUnit: cmd._getUnit(tStyle.width),\n                heightUnit: cmd._getUnit(tStyle.height),\n                cellSpacing: table.cellSpacing,\n                cellPadding: table.cellPadding,\n                alignment: tableAlignment.textAlign,\n                position: tablePosition,\n                bgColor: tStyle.backgroundColor || table.bgColor,\n                className: cssClass,\n                id: table.id,\n                borderWidth: tStyle.borderWidth || table.border,\n                borderColor: tStyle.borderColor,\n                borderStyle: tStyle.borderStyle || \"\",\n                collapseBorders: !!tStyle.borderCollapse,\n                summary: table.summary,\n                captionContent: caption ? captionClone.html() : \"\",\n                captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + \" \" + captionAlignment.verticalAlign : \"\",\n                headerRows: numberOfHeaderRows,\n                headerColumns: numberOfHeaderColumns,\n                cellsWithHeaders: cellsWithHeaders\n            },\n            selectedCells: []\n        };\n\n        tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n\n        return tableJson;\n    },\n    parseTableRows: function(rows, selectedCells, tableJson) {\n        var cmd = this;\n        var data = [], row, rowData, cells, cell, cellData;\n        for (var i = 0; i < rows.length; i++) {\n            row = rows[i];\n            rowData = { cells: [] };\n            cells = row.cells;\n            data.push(rowData);\n            for (var j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                cellData = cmd.parseCell(cell);\n                if ($.inArray(cell, selectedCells) != -1) {\n                    tableJson.selectedCells.push(cellData);\n                }\n                rowData.cells.push(cellData);\n            }\n        }\n        return data;\n    },\n    parseCell: function(cell) {\n        var cmd = this;\n        var cStyle = cell.style;\n        var alignment = cmd._getAlignment(cell);\n        alignment = alignment.textAlign ? alignment.textAlign + \" \" + alignment.verticalAlign : \"\";\n\n        var data = {\n            width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n            height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n            widthUnit: cmd._getUnit(cStyle.width),\n            heightUnit: cmd._getUnit(cStyle.height),\n            cellMargin: cStyle.margin,\n            cellPadding: cStyle.padding,\n            alignment: alignment,\n            bgColor: cStyle.backgroundColor || cell.bgColor,\n            className: cell.className,\n            id: cell.id,\n            borderWidth: cStyle.borderWidth || cell.border,\n            borderColor: cStyle.borderColor,\n            borderStyle: cStyle.borderStyle,\n            wrapText: cStyle.whiteSpace != \"nowrap\"\n        };\n\n        return data;\n    },\n    _getTablePosition: function(element) {\n        var style = element.style;\n        if (style.marginLeft == \"auto\" && style.marginRight == \"auto\") {\n            return \"center\";\n        }\n\n        if (style.marginLeft == \"auto\") {\n            return \"right\";\n        }\n\n        return \"left\";\n    },\n    _getAlignment: function(element, horizontalOnly) {\n        var style = element.style;\n        var hAlign = style.textAlign || element.align || \"\";\n        if (horizontalOnly) {\n            return { textAlign: hAlign };\n        }\n        var vAlign = style.verticalAlign || element.vAlign || \"\";\n        if (hAlign && vAlign) {\n            return { textAlign: hAlign, verticalAlign: vAlign };\n        }\n        if (!hAlign && vAlign) {\n            return { textAlign: \"left\", verticalAlign: vAlign };\n        }\n        if (hAlign && !vAlign) {\n            return { textAlign: hAlign, verticalAlign: \"top\" };\n        }\n        return { textAlign: \"\", verticalAlign: \"\" };\n    },\n    _getUnit: function(value) {\n        var unit = (value || \"\").match(reUnit);\n        return unit ? unit[0] : \"px\";\n    },\n    _selectedTable: function(range) {\n        var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n        return tableFormatFinder.findSuitable(nodes)[0];\n    },\n    _selectedCells: function(range) {\n        var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n        return cellsFormatFinder.findSuitable(nodes);\n    },\n    _lastInCollection: function(collection) {\n        return collection[collection.length - 1];\n    }\n});\n\nvar TableWizardTool = Editor.Tool.extend({\n    command: function(options) {\n        options.insertNewTable = this.options.insertNewTable;\n        options.tableCellWizard = !!this.options.tableCellWizard;\n        return new TableWizardCommand(options);\n    }\n});\n\nvar TableWizardEditTool = TableWizardTool.extend({\n    update: function(ui, nodes) {\n        var isFormatted = !tableFormatFinder.isFormatted(nodes),\n            toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n        if (isFormatted === true) {\n            toolbar.hide(ui);\n        } else {\n            toolbar.show(ui);\n        }\n    }\n});\n\nvar TableCellWizardEditTool = TableWizardTool.extend({\n    update: function(ui, nodes) {\n        var isFormatted = !tableFormatFinder.isFormatted(nodes),\n            toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n        if (isFormatted === true) {\n            toolbar.hide(ui);\n        } else {\n            toolbar.show(ui);\n        }\n    }\n});\n\nkendo.ui.editor.TableWizardTool = TableWizardTool;\nkendo.ui.editor.TableWizardCommand = TableWizardCommand;\n\nregisterTool(\"tableProperties\", new TableWizardEditTool({ command: TableWizardCommand, insertNewTable: false, property: \"tableProperties\" }));\nregisterTool(\"tableCellProperties\", new TableCellWizardEditTool({ command: TableWizardCommand, tableCellWizard: true, insertNewTable: false, property: \"tableCellProperties\" }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    encode = kendo.htmlEncode,\n    numericTextBoxSettings = { format: \"0\", min: 0 },\n    units = [\"px\", \"em\"],\n    borderStyles = [\"solid\", \"dotted\", \"dashed\", \"double\", \"groove\", \"ridge\", \"inset\", \"outset\", \"initial\", \"inherit\", \"none\", \"hidden\"];\n\nvar DEFAULT_NUMBER_OF_COLS_AND_ROWS = 4;\n\nvar textWrapDropDownSettings = {\n    dataSource: [{\n        className: \"text-wrap\",\n        value: \"wrap\"\n    }, {\n        className: \"parameter-string\",\n        value: \"nowrap\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }) + encode(tooltip),\n    valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-text-wrap\" }) + encode(tooltip)\n};\n\nvar tablePositionDropDownSettings = {\n    dataSource: [{\n        className: \"table-position-start\",\n        value: \"left\"\n    }, {\n        className: \"table-position-center\",\n        value: \"center\"\n    }, {\n        className: \"table-position-end\",\n        value: \"right\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }) + encode(tooltip),\n    valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" }) + encode(tooltip)\n};\n\nvar tableAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"table-align-middle-left\",\n        value: \"left\"\n    }, {\n        className: \"table-align-middle-center\",\n        value: \"center\"\n    }, {\n        className: \"table-align-middle-right\",\n        value: \"right\"\n    }, {\n        className: \"align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }) + encode(tooltip),\n    valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" }) + encode(tooltip)\n};\n\nvar cellAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"table-align-top-left\",\n        value: \"left top\"\n    }, {\n        className: \"table-align-top-center\",\n        value: \"center top\"\n    }, {\n        className: \"table-align-top-right\",\n        value: \"right top\"\n    }, {\n        className: \"table-align-middle-left\",\n        value: \"left middle\"\n    }, {\n        className: \"table-align-middle-center\",\n        value: \"center middle\"\n    }, {\n        className: \"table-align-middle-right\",\n        value: \"right middle\"\n    }, {\n        className: \"table-align-bottom-left\",\n        value: \"left bottom\"\n    }, {\n        className: \"table-align-bottom-center\",\n        value: \"center bottom\"\n    }, {\n        className: \"table-align-bottom-right\",\n        value: \"right bottom\"\n    }, {\n        className: \"align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }) + encode(tooltip),\n    valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" }) + encode(tooltip)\n};\n\nvar accessibilityAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"table-align-top-left\",\n        value: \"left top\"\n    }, {\n        className: \"table-align-top-center\",\n        value: \"center top\"\n    }, {\n        className: \"table-align-top-right\",\n        value: \"right top\"\n    }, {\n        className: \"table-align-bottom-left\",\n        value: \"left bottom\"\n    }, {\n        className: \"table-align-bottom-center\",\n        value: \"center bottom\"\n    }, {\n        className: \"table-align-bottom-right\",\n        value: \"right bottom\"\n    }, {\n        className: \"align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }),\n    valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" })\n};\n\nvar tablePropertiesDialogTemplate = ({ messages }) =>\n    '<div class=\"k-editor-dialog k-editor-table-wizard-window k-action-window k-popup-edit-form\">' +\n        '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' +\n            '<ul>' +\n                `<li class=\"k-active\">${ messages.tableTab }</li>` +\n                `<li>${ messages.accessibilityTab }</li>` +\n            '</ul>' +\n            '<div id=\"k-table-properties\"></div>' +\n            '<div id=\"k-accessibility-properties\"></div>' +\n        '</div>' +\n        '<div class=\"k-actions k-actions-start k-actions-horizontal k-window-buttons\">' +\n                kendo.html.renderButton(`<button class=\"k-dialog-ok\"><span class=\"k-button-text\">${ messages.dialogOk }</span></button>`, {\n                    icon: 'check',\n                        themeColor: \"primary\"\n                    }) +\n                    kendo.html.renderButton(`<button class=\"k-dialog-close\"><span class=\"k-button-text\">${ messages.dialogCancel }</span></button>`, {\n                        icon: 'cancel-outline'\n                    }) +\n        '</div>' +\n    '</div>';\n    var cellPropertiesDialogTemplate = ({ messages }) =>\n    '<div class=\"k-editor-dialog k-editor-table-wizard-window k-action-window k-popup-edit-form\">' +\n        '<div id=\"k-cell-properties\"></div>' +\n        '<div class=\"k-actions k-actions-start k-actions-horizontal k-window-buttons\">' +\n                kendo.html.renderButton(`<button class=\"k-dialog-ok\"><span class=\"k-button-text\">${ messages.dialogOk }</span></button>`, {\n                    icon: 'check',\n                        themeColor: \"primary\"\n                    }) +\n                    kendo.html.renderButton(`<button class=\"k-dialog-close\"><span class=\"k-button-text\">${ messages.dialogCancel }</span></button>`, {\n                        icon: 'cancel-outline'\n                    }) +\n        '</div>' +\n    '</div>';\n\nvar TableWizardDialog = kendo.Class.extend({\n    init: function(options) {\n        this.options = options;\n    },\n    _openTablePropertiesDialog: function() {\n        var that = this,\n            options = that.options,\n            dialogOptions = options.dialogOptions,\n            tableData = options.table,\n            dialog,\n            messages = options.messages,\n            isIE = kendo.support.browser.msie;\n\n        function close(e) {\n            e.preventDefault();\n            that.destroy();\n            dialog.destroy();\n        }\n\n        function okHandler(e) {\n            that.collectTableDialogValues(tableData);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n\n            options.closeCallback(tableData);\n        }\n\n        function closeHandler(e) {\n            close(e);\n            options.closeCallback();\n        }\n\n        dialogOptions.close = closeHandler;\n        dialogOptions.minWidth = 400;\n        dialogOptions.title = messages.tableProperties;\n        dialogOptions.visible = options.visible;\n\n        dialog = $(that._dialogTemplate(messages)).appendTo(document.body)\n            .kendoWindow(dialogOptions)\n            .addClass(\"k-editor-window\")\n            .closest(\".k-window\").toggleClass(\"k-rtl\", options.isRtl).end()\n            .find(\".k-dialog-ok\").on(\"click\", okHandler).end()\n            .find(\".k-dialog-close\").on(\"click\", closeHandler).end()\n            .data(\"kendoWindow\");\n\n        var element = dialog.element;\n        this.components = {};\n        that._initTabStripComponent(element);\n        that._tablePropertiesForm = that._createTablePropertiesForm(dialog, messages);\n        that._accessibilityPropertiesForm = that._createAccessibilityPropertiesForm(dialog, messages);\n\n        dialog.center();\n        dialog.open();\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n    },\n    _openCellPropertiesDialog: function() {\n        var that = this,\n            options = that.options,\n            dialogOptions = options.dialogOptions,\n            tableData = options.table,\n            dialog,\n            messages = options.messages,\n            isIE = kendo.support.browser.msie;\n\n        function close(e) {\n            e.preventDefault();\n            that.destroy();\n            dialog.destroy();\n        }\n\n        function okHandler(e) {\n            that.collectCellDialogValues(tableData);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n\n            options.closeCallback(tableData);\n        }\n\n        function closeHandler(e) {\n            close(e);\n            options.closeCallback();\n        }\n\n        dialogOptions.close = closeHandler;\n        dialogOptions.minWidth = 400;\n        dialogOptions.title = messages.tableCellProperties;\n        dialogOptions.visible = options.visible;\n\n        dialog = $(that._dialogTemplate(messages, cellPropertiesDialogTemplate)).appendTo(document.body)\n            .kendoWindow(dialogOptions)\n            .addClass(\"k-editor-window\")\n            .closest(\".k-window\").toggleClass(\"k-rtl\", options.isRtl).end()\n            .find(\".k-dialog-ok\").on(\"click\", okHandler).end()\n            .find(\".k-dialog-close\").on(\"click\", closeHandler).end()\n            .data(\"kendoWindow\");\n\n        var element = dialog.element;\n        that._cellPropertiesForm = that._createCellPropertiesForm(dialog, messages);\n\n        dialog.center();\n        dialog.open();\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n    },\n    open: function(isCellProperties) {\n        if (!isCellProperties) {\n            this._openTablePropertiesDialog();\n        } else {\n            this._openCellPropertiesDialog();\n        }\n    },\n\n    _initTabStripComponent: function(element) {\n        var components = this.components = {};\n        components.tabStrip = element.find(\"#k-table-wizard-tabs\").kendoTabStrip({\n            animation: false\n        }).data(\"kendoTabStrip\");\n    },\n\n    collectTableDialogValues: function() {\n        var that = this;\n        var data = that.options.table;\n        that._collectTableViewValues(data);\n        that._collectAccessibilityViewValues(data);\n    },\n\n    collectCellDialogValues: function() {\n        var that = this;\n        var data = that.options.table;\n        that._collectCellViewValues(data);\n    },\n\n    _collectTableViewValues: function(tableData) {\n        var tableView = this.components.tableView;\n        var tableProperties = tableData.tableProperties;\n        var cellData = tableData.cellProperties = tableData.cellProperties || {};\n        tableProperties.width = tableView.width.value();\n        tableProperties.widthUnit = tableView.widthUnit.value();\n        tableProperties.height = tableView.height.value();\n        tableProperties.columns = tableView.columns.value();\n        tableProperties.rows = tableView.rows.value();\n        tableProperties.heightUnit = tableView.heightUnit.value();\n        tableProperties.cellSpacing = tableView.cellSpacing.value();\n        tableProperties.cellPadding = tableView.cellPadding.value();\n        tableProperties.alignment = tableView.alignment.value();\n        tableProperties.position = tableView.position.value();\n        tableProperties.bgColor = tableView.bgColor.value();\n        tableProperties.borderWidth = tableView.borderWidth.value();\n        tableProperties.borderColor = tableView.borderColor.value();\n        tableProperties.borderStyle = tableView.borderStyle.value();\n        tableProperties.collapseBorders = tableView.collapseBorders.check();\n\n        if (!cellData.width) {\n            cellData.selectAllCells = true;\n            cellData.width = 100 / tableData.tableProperties.columns;\n            cellData.widthUnit = \"%\";\n        }\n    },\n\n    _collectCellViewValues: function(table) {\n        var cellData = table.cellProperties = table.cellProperties || {};\n        var cellView = this.components.cellView;\n\n        cellData.selectAllCells = cellView.selectAllCells.check();\n        cellData.width = cellView.width.value();\n        cellData.widthUnit = cellView.widthUnit.value();\n        cellData.height = cellView.height.value();\n        cellData.heightUnit = cellView.heightUnit.value();\n        cellData.cellMargin = cellView.cellMargin.value();\n        cellData.cellPadding = cellView.cellPadding.value();\n        cellData.alignment = cellView.alignment.value();\n        cellData.bgColor = cellView.bgColor.value();\n        cellData.className = cellView.className.value();\n        cellData.id = cellView.id.value();\n        cellData.borderWidth = cellView.borderWidth.value();\n        cellData.borderColor = cellView.borderColor.value();\n        cellData.borderStyle = cellView.borderStyle.value();\n        cellData.wrapText = cellView.wrapTextValue.value() == \"wrap\";\n\n        if (!cellData.width) {\n            cellData.selectAllCells = true;\n            cellData.width = 100 / table.tableProperties.columns;\n            cellData.widthUnit = \"%\";\n        }\n    },\n\n   _collectAccessibilityViewValues: function(table) {\n        var tableProperties = table.tableProperties;\n        var accessibilityView = this.components.accessibilityView;\n        tableProperties.captionContent = accessibilityView.captionContent.value();\n        tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n        tableProperties.summary = accessibilityView.summary.value();\n        tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.value();\n        tableProperties.className = accessibilityView.className.value();\n        tableProperties.id = accessibilityView.id.value();\n        tableProperties.headerRows = accessibilityView.headerRows.value();\n        tableProperties.headerColumns = accessibilityView.headerColumns.value();\n    },\n    _addUnit: function(units, value) {\n        if (value && $.inArray(value, units) == -1) {\n            units.push(value);\n        }\n    },\n\n    _initNumericTextbox: function(element, property, data, storage, settings) {\n        var component = storage[property] = element.kendoNumericTextBox(\n                settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings\n            ).data(\"kendoNumericTextBox\");\n        if (property in data) {\n            component.value(parseInt(data[property], 10));\n        }\n    },\n\n    _initDropDownList: function(element, property, data, storage, dataSource) {\n        var component = storage[property] = element.kendoDropDownList({\n            dataSource: dataSource\n        }).data(\"kendoDropDownList\");\n        this._setComponentValue(component, data, property);\n    },\n\n    _initBorderStyleDropDown: function(element, property, data, storage, dataSource) {\n        var component = storage[property] = element.kendoDropDownList({\n            dataSource: dataSource,\n            optionLabel: this.options.messages.borderNone\n        }).data(\"kendoDropDownList\");\n        this._setComponentValue(component, data, property);\n    },\n\n    _initTablePositionDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var tableView = this.components.tableView;\n        var dataSource = tablePositionDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.tableAlignLeft;\n        dataSource[1].tooltip = messages.tableAlignCenter;\n        dataSource[2].tooltip = messages.tableAlignRight;\n\n        this._initPositionDropDown(element, tablePositionDropDownSettings, \"position\", data, tableView);\n    },\n\n    _initTableAlignmentDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var tableView = this.components.tableView;\n        var dataSource = tableAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeft;\n        dataSource[1].tooltip = messages.alignCenter;\n        dataSource[2].tooltip = messages.alignRight;\n        dataSource[3].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, \"alignment\", data, tableView);\n    },\n\n    _initCellAlignmentDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var cellView = this.components.cellView;\n        var dataSource = cellAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeftTop;\n        dataSource[1].tooltip = messages.alignCenterTop;\n        dataSource[2].tooltip = messages.alignRightTop;\n        dataSource[3].tooltip = messages.alignLeftMiddle;\n        dataSource[4].tooltip = messages.alignCenterMiddle;\n        dataSource[5].tooltip = messages.alignRightMiddle;\n        dataSource[6].tooltip = messages.alignLeftBottom;\n        dataSource[7].tooltip = messages.alignCenterBottom;\n        dataSource[8].tooltip = messages.alignRightBottom;\n        dataSource[9].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, \"alignment\", data, cellView);\n    },\n\n    _initAccessibilityAlignmentDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var accessibilityView = this.components.accessibilityView;\n        var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeftTop;\n        dataSource[1].tooltip = messages.alignCenterTop;\n        dataSource[2].tooltip = messages.alignRightTop;\n        dataSource[3].tooltip = messages.alignLeftBottom;\n        dataSource[4].tooltip = messages.alignCenterBottom;\n        dataSource[5].tooltip = messages.alignRightBottom;\n        dataSource[6].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, \"captionAlignment\", data, accessibilityView);\n    },\n    _initTextWrapDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var name = \"wrapTextValue\";\n        data.wrapTextValue = data.wrapText ? \"wrap\" : \"nowrap\";\n\n        var cellView = this.components.cellView;\n        var dataSource = textWrapDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.wrapText;\n        dataSource[1].tooltip = messages.fitToCell;\n        var component = cellView[name] =\n            element.kendoDropDownList(textWrapDropDownSettings).data(\"kendoDropDownList\");\n\n        component.list.addClass('k-text-wrap');\n        this._setComponentValue(component, data, name);\n    },\n    _initPositionDropDown: function(element, settings, name, data, storage) {\n        var component = storage[name] =\n            element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n        component.list.addClass('k-position');\n        this._setComponentValue(component, data, name);\n    },\n    _initAlignmentDropDown: function(element, settings, name, data, storage) {\n        var component = storage[name] =\n            element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n        component.list.addClass('k-align');\n        this._setComponentValue(component, data, name);\n    },\n    _initAssociationDropDown: function(element, name, settings, data, storage) {\n        var component = storage[name] =\n            element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n        this._setComponentValue(component, data, name);\n    },\n    _setComponentValue: function(component, data, property) {\n        if (property in data) {\n            component.value(data[property]);\n        }\n    },\n\n    _initColorPicker: function(element, property, data, storage) {\n        var component = storage[property] =\n            element.kendoColorPicker({ buttons: false, clearButton: true }).data(\"kendoColorPicker\");\n\n        if (data[property]) {\n            component.value(data[property]);\n        }\n    },\n    _initInput: function(element, property, data, storage, settings) {\n        var component = storage[property] = element.kendoTextBox(settings || {}).data(\"kendoTextBox\");\n        if (property in data) {\n            component.value(data[property]);\n        }\n    },\n\n    _initCheckbox: function(element, property, data, storage, settings) {\n        var component = storage[property] = element.kendoCheckBox(settings || {}).data(\"kendoCheckBox\");\n        if (property in data) {\n            component.check(data[property]);\n        }\n    },\n\n    _initTextArea: function(element, property, data, storage, settings) {\n        var component = storage[property] = element.kendoTextArea(settings || {}).data(\"kendoTextArea\");\n        if (property in data) {\n            component.value(data[property]);\n        }\n    },\n\n    destroy: function() {\n        var that = this;\n        that._destroyComponents(this.components);\n\n        delete that.components;\n    },\n    _destroyComponents: function(components) {\n        for (var widget in components) {\n            if (components[widget].destroy) {\n                components[widget].destroy();\n            }\n            delete components[widget];\n        }\n    },\n\n    _dialogTemplate: function(messages, dialogTemplate) {\n        return kendo.template(dialogTemplate || tablePropertiesDialogTemplate)({ messages: messages });\n    },\n\n    _onColumnsNumberChange: function(args) {\n        var that = this;\n        var accessibilityView = that.components.accessibilityView;\n        var headerColumnsNumeric = accessibilityView.headerColumns;\n        var currentNumberOfColumnsHeaders = headerColumnsNumeric.value();\n        var numberOfColumns = args.sender.value();\n\n        if (numberOfColumns < currentNumberOfColumnsHeaders) {\n            headerColumnsNumeric.value(numberOfColumns);\n        }\n\n        headerColumnsNumeric.max(numberOfColumns);\n    },\n\n    _onRowsNumberChange: function(args) {\n        var that = this;\n        var accessibilityView = that.components.accessibilityView;\n        var headerRowsNumeric = accessibilityView.headerRows;\n        var currentNumberOfRowHeaders = headerRowsNumeric.value();\n        var numberOfRows = args.sender.value();\n\n        if (numberOfRows < currentNumberOfRowHeaders) {\n            headerRowsNumeric.value(numberOfRows);\n        }\n\n        headerRowsNumeric.max(numberOfRows);\n    },\n\n    _createTablePropertiesForm: function(dialog, messages) {\n        var that = this;\n        var table = that.options.table;\n        var formElement = dialog.element.find(\"#k-table-properties\");\n        var components = that.components;\n        var tableView = components.tableView = {};\n        var tableProperties = table.tableProperties = table.tableProperties || {};\n        var form;\n\n        that._addUnit(units, tableProperties.widthUnit);\n        that._addUnit(units, tableProperties.heightUnit);\n        tableProperties.borderStyle = tableProperties.borderStyle || \"\";\n        form = formElement.kendoForm({\n            renderButtons: false,\n            layout: \"grid\",\n            grid: {\n                cols: 4\n            },\n            items: [\n                {\n                    colSpan: 2,\n                    field: \"k-editor-table-columns\",\n                    label: encode(messages.columns),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input type=\"numeric\" id=\"k-editor-table-columns\" />').appendTo(container),\n                            \"columns\",\n                            tableProperties,\n                            tableView,\n                            {\n                                min: 1,\n                                value: DEFAULT_NUMBER_OF_COLS_AND_ROWS,\n                                change: that._onColumnsNumberChange.bind(that)\n                            });\n                    }\n                },{\n                    colSpan: 2,\n                    field: \"k-editor-table-rows\",\n                    label: encode(messages.rows),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input type=\"numeric\" id=\"k-editor-table-rows\" />').appendTo(container),\n                            \"rows\",\n                            tableProperties,\n                            tableView,\n                            {\n                                min: 1,\n                                value: DEFAULT_NUMBER_OF_COLS_AND_ROWS,\n                                change: that._onRowsNumberChange.bind(that)\n                            });\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-table-width\",\n                    label: encode(messages.width),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-table-width\" />').appendTo(container), \"width\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-table-width-type\",\n                    label: {\n                        encoded: false,\n                        text: '&nbsp;'\n                    },\n                    editor: function(container, options) {\n                        that._initDropDownList($(`<input id=\"k-editor-table-width-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                            \"widthUnit\",\n                            tableProperties,\n                            tableView,\n                            units);\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-table-height\",\n                    label: encode(messages.height),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-table-height\" />').appendTo(container), \"height\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-table-height-type\",\n                    label: {\n                        encoded: false,\n                        text: '&nbsp;'\n                    },\n                    editor: function(container, options) {\n                        that._initDropDownList($(`<input id=\"k-editor-table-height-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                            \"heightUnit\",\n                            tableProperties,\n                            tableView,\n                            units);\n                    }\n                },{\n                    colSpan: 2,\n                    field: \"k-editor-table-position\",\n                    label: encode(messages.position),\n                    editor: function(container, options) {\n                        that._initTablePositionDropDown($('<input id=\"k-editor-table-position\" class=\"k-position\" />').appendTo(container), tableProperties);\n                    }\n                },\n                {\n                    colSpan: 2,\n                    field: \"k-editor-table-alignment\",\n                    label: encode(messages.alignment),\n                    editor: function(container, options) {\n                        that._initTableAlignmentDropDown($('<input id=\"k-editor-table-alignment\" class=\"k-align\" />').appendTo(container), tableProperties);\n                    }\n                },{\n                    colSpan: 2,\n                    field: \"k-editor-table-cell-spacing\",\n                    label: encode(messages.cellSpacing),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-table-cell-spacing\" />').appendTo(container), \"cellSpacing\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                    }\n                },{\n                    colSpan: 2,\n                    field: \"k-editor-table-cell-padding\",\n                    label: encode(messages.cellPadding),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-table-cell-padding\" />').appendTo(container), \"cellPadding\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                    }\n                },{\n                    colSpan: \"full\",\n                    field: \"k-editor-table-bg\",\n                    label: encode(messages.tableBackground),\n                    editor: function(container, options) {\n                        that._initColorPicker($('<input id=\"k-editor-table-bg\" />').appendTo(container), \"bgColor\", tableProperties, tableView);\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-border-width\",\n                    label: encode(messages.borderWidth),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-border-width\" />').appendTo(container), \"borderWidth\", tableProperties, tableView);\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-border-color\",\n                    label: encode(messages.borderColor),\n                    editor: function(container, options) {\n                        that._initColorPicker($('<input id=\"k-editor-border-color\" />').appendTo(container), \"borderColor\", tableProperties, tableView);\n                    }\n                },{\n                    colSpan: 2,\n                    field: \"k-editor-border-style\",\n                    label: encode(messages.borderStyle),\n                    editor: function(container, options) {\n                        that._initBorderStyleDropDown($('<input id=\"k-editor-border-style\" />').appendTo(container),\n                            \"borderStyle\",\n                            tableProperties,\n                            tableView,\n                            borderStyles);\n                    }\n                },{\n                    colSpan: \"full\",\n                    field: \"k-editor-collapse-borders\",\n                    label: \"\",\n                    editor: function(container, options) {\n                        that._initCheckbox($('<input id=\"k-editor-collapse-borders\"/>').appendTo(container), \"collapseBorders\", tableProperties, tableView, { label: encode(messages.collapseBorders) });\n                    }\n                },\n            ]\n        }).data(\"kendoForm\");\n        form.layoutWrapper.addClass(\"k-gap-x-4\");\n\n        return form;\n    },\n\n    _createCellPropertiesForm: function(dialog, messages) {\n        var that = this;\n        var table = that.options.table;\n        var formElement = dialog.element.find(\"#k-cell-properties\");\n        var components = that.components = that.components || {};\n        var cellView = components.cellView = {};\n        var cellProperties = (table.selectedCells && table.selectedCells[0]) || { borderStyle: \"\", wrapText: true };\n        var form;\n\n        that._addUnit(units, cellProperties.widthUnit);\n        that._addUnit(units, cellProperties.heightUnit);\n        form = formElement.kendoForm({\n            renderButtons: false,\n            layout: \"grid\",\n            grid: {\n                cols: 4\n            },\n            items: [\n                {\n                    colSpan: \"full\",\n                    field: \"k-editor-selectAllCells\",\n                    label: \"\",\n                    editor: function(container, options) {\n                        that._initCheckbox($('<input id=\"k-editor-selectAllCells\" />').appendTo(container), \"selectAllCells\", table.tableProperties, cellView, { label: encode(messages.selectAllCells) });\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-cell-width\",\n                    label: encode(messages.width),\n                    hint: encode(messages.applyToColumn),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-cell-width\" />').appendTo(container), \"width\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-cell-width-type\",\n                    label: {\n                        encoded: false,\n                        text: '&nbsp;'\n                    },\n                    editor: function(container, options) {\n                        that._initDropDownList($(`<input id=\"k-editor-cell-width-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                            \"widthUnit\",\n                            cellProperties,\n                            cellView,\n                            units);\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-cell-height\",\n                    label: encode(messages.height),\n                    hint: encode(messages.applyToRow),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-cell-height\" />').appendTo(container), \"height\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-cell-height-type\",\n                    label: {\n                        encoded: false,\n                        text: '&nbsp;'\n                    },\n                    editor: function(container, options) {\n                        that._initDropDownList($(`<input id=\"k-editor-cell-height-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                            \"heightUnit\",\n                            cellProperties,\n                            cellView,\n                            units);\n                    }\n                },{\n                    colSpan: 2,\n                    field: \"k-editor-cell-alignment\",\n                    label: encode(messages.alignment),\n                    editor: function(container, options) {\n                        that._initCellAlignmentDropDown($('<input id=\"k-editor-cell-alignment\" class=\"k-align\" />').appendTo(container), cellProperties);\n                    }\n                },{\n                    colSpan: 2,\n                    field: \"k-editor-wrap-text\",\n                    label: \"Text control\",\n                    editor: function(container, options) {\n                        that._initTextWrapDropDown($('<input id=\"k-editor-wrap-text\" />').appendTo(container),\n                        cellProperties);\n                    }\n                },{\n                    colSpan: \"full\",\n                    field: \"k-editor-cell-bg\",\n                    label: encode(messages.background),\n                    editor: function(container, options) {\n                        that._initColorPicker($('<input id=\"k-editor-cell-bg\" />').appendTo(container), \"bgColor\", cellProperties, cellView);\n                    }\n                },{\n                    colSpan: 2,\n                    field: \"k-editor-table-cell-margin\",\n                    label: encode(messages.cellMargin),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-table-cell-margin\" />').appendTo(container), \"cellMargin\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                    }\n                },{\n                    colSpan: 2,\n                    field: \"k-editor-table-cells-padding\",\n                    label: encode(messages.cellPadding),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-table-cells-padding\" />').appendTo(container), \"cellPadding\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-cell-border-width\",\n                    label: encode(messages.borderWidth),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-cell-border-width\" />').appendTo(container), \"borderWidth\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-cell-border-color\",\n                    label: encode(messages.borderColor),\n                    editor: function(container, options) {\n                        that._initColorPicker($('<input id=\"k-editor-cell-border-color\" />').appendTo(container), \"borderColor\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                    }\n                },{\n                    colSpan: 2,\n                    field: \"k-editor-cell-border-style\",\n                    label: encode(messages.borderStyle),\n                    editor: function(container, options) {\n                        that._initBorderStyleDropDown($('<input id=\"k-editor-cell-border-style\" />').appendTo(container),\n                            \"borderStyle\",\n                            cellProperties,\n                            cellView,\n                            borderStyles);\n                    }\n                },{\n                    colSpan: \"full\",\n                    field: \"k-editor-cell-id\",\n                    label: {\n                        text: encode(messages.id),\n                        optional: true\n                    },\n                    editor: function(container, options) {\n                        that._initInput($('<input id=\"k-editor-cell-id\" />').appendTo(container), \"id\", cellProperties, cellView);\n                    }\n                },{\n                    colSpan: \"full\",\n                    field: \"k-editor-cell-css-class\",\n                    label: {\n                        text: encode(messages.cssClass),\n                        optional: true\n                    },\n                    editor: function(container, options) {\n                        that._initInput($('<input id=\"k-editor-cell-css-class\" />').appendTo(container), \"className\", cellProperties, cellView);\n                    }\n                }\n            ]\n        }).data(\"kendoForm\");\n        form.layoutWrapper.addClass(\"k-gap-x-4\");\n\n        return form;\n    },\n\n    _createAccessibilityPropertiesForm: function(dialog, messages) {\n        var that = this;\n        var table = that.options.table;\n        var formElement = dialog.element.find(\"#k-accessibility-properties\");\n        var components = that.components;\n        var accessibilityView = components.accessibilityView = {};\n        var tableProperties = table.tableProperties;\n        var form;\n\n        form = formElement.kendoForm({\n            renderButtons: false,\n            layout: \"grid\",\n            grid: {\n                cols: 4\n            },\n            items: [\n                {\n                    colSpan: \"full\",\n                    field: \"k-editor-id\",\n                    label: {\n                        text: encode(messages.id),\n                        optional: true\n                    },\n                    editor: function(container, options) {\n                        that._initInput($('<input id=\"k-editor-id\" />').appendTo(container), \"id\", tableProperties, accessibilityView);\n                    }\n                },{\n                    colSpan: \"full\",\n                    field: \"k-editor-css-class\",\n                    label: {\n                        text: encode(messages.cssClass),\n                        optional: true\n                    },\n                    editor: function(container, options) {\n                        that._initInput($('<input id=\"k-editor-css-class\" />').appendTo(container), \"className\", tableProperties, accessibilityView);\n                    }\n                },\n                {\n                    layout: \"grid\",\n                    grid: {\n                        cols: 4,\n                        gutter: 16\n                    },\n                    colSpan: \"full\",\n                    type: \"group\",\n                    label: \"Accessibility\",\n                    items: [\n                        {\n                            colSpan: 2,\n                            field: \"k-editor-table-caption\",\n                            label: {\n                                text: encode(messages.caption),\n                                optional: true\n                            },\n                            editor: function(container, options) {\n                                that._initInput($('<input id=\"k-editor-table-caption\" />').appendTo(container), \"captionContent\", tableProperties, accessibilityView);\n                            }\n                        },{\n                            colSpan: 2,\n                            field: \"k-editor-accessibility-alignment\",\n                            label: encode(messages.captionAlignment),\n                            editor: function(container, options) {\n                                that._initAccessibilityAlignmentDropDown($('<input id=\"k-editor-accessibility-alignment\" />').appendTo(container), tableProperties);\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-table-header-rows\",\n                            label: encode(messages.headerRows),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-table-header-rows\" />').appendTo(container),\n                                \"headerRows\",\n                                tableProperties,\n                                accessibilityView,\n                                {\n                                    max: tableProperties.rows || DEFAULT_NUMBER_OF_COLS_AND_ROWS\n                                });\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-table-header-columns\",\n                            label: encode(messages.headerColumns),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-table-header-columns\" />').appendTo(container),\n                                \"headerColumns\",\n                                tableProperties,\n                                accessibilityView,\n                                {\n                                    max: tableProperties.columns || DEFAULT_NUMBER_OF_COLS_AND_ROWS\n                                });\n                            }\n                        },{\n                            colSpan: 2,\n                            field: \"k-editor-cells-headers\",\n                            label: encode(messages.associateCellsWithHeaders),\n                            editor: function(container, options) {\n                                var element = $(`<select id=\"k-editor-cells-headers\">\n                                    <option value=\"none\">${ messages.associateNone }</option>\n                                    <option value=\"scope\">${ messages.associateScope }</option>\n                                    <option value=\"ids\">${ messages.associateIds }</option>\n                                </select>`).appendTo(container);\n\n                                that._initAssociationDropDown(element, \"cellsWithHeaders\", { valuePrimitive: true }, tableProperties, accessibilityView);\n                            }\n                        },{\n                            colSpan: \"full\",\n                            field: \"k-editor-accessibility-summary\",\n                            label: {\n                                text: encode(messages.summary),\n                                optional: true\n                            },\n                            editor: function(container, options) {\n                                that._initTextArea($('<textarea id=\"k-editor-accessibility-summary\"></textarea>').appendTo(container), \"summary\", tableProperties, accessibilityView, {\n                                    rows: 5,\n                                    placeholder: messages.tableSummaryPlaceholder\n                                });\n                            }\n                        }\n                    ]\n                }\n            ]\n        }).data(\"kendoForm\");\n\n        form.layoutWrapper.addClass(\"k-gap-x-4\");\n\n        return form;\n    }\n});\n\nkendo.ui.editor.TableWizardDialog = TableWizardDialog;\n\n})(window.kendo.jQuery);\n\nvar __meta__ = {\n        id: \"editor\",\n        name: \"Editor\",\n        category: \"web\",\n        description: \"Rich text editor component\",\n        depends: [ \"combobox\", \"dropdownlist\", \"window\", \"colorpicker\", \"toolbar\", \"icons\" ],\n        features: [ {\n            id: \"editor-imagebrowser\",\n            name: \"Image Browser\",\n            description: \"Support for uploading and inserting images\",\n            depends: [ \"imagebrowser\" ]\n        }, {\n            id: \"editor-resizable\",\n            name: \"Resize handle\",\n            description: \"Support for resizing the content area via a resize handle\",\n            depends: [ \"resizable\" ]\n        }, {\n            id: \"editor-tablewizard\",\n            name: \"Table wizard dialog\",\n            description: \"Support for table properties configuration\",\n            depends: [ \"tabstrip\", \"button\", \"numerictextbox\", \"textarea\" ]\n        }, {\n            id: \"editor-pdf-export\",\n            name: \"PDF export\",\n            description: \"Export Editor content as PDF\",\n            depends: [ \"pdf\", \"drawing\" ]\n        }]\n    };\nvar kendo$1 = kendo;\n\nexport { kendo$1 as default };\n"]}