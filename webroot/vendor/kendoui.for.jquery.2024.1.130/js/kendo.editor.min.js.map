{"version":3,"file":"kendo.editor.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendoeditor","js","this","$","editorNS","Command","GenericCommand","registerTool","Tool","RestorePoint","extend","InsertHtmlCommand","InsertHtmlTool","kendo","UndoRedoStack","Observable","init","options","fn","call","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","undefined$1","window","Class","Widget","ui","os","support","mobileOS","browser","keys","outerWidth","_outerWidth","outerHeight","_outerHeight","SELECT","SELECT_OVERLAY_SELECTOR","PLACEHOLDER_CLASS","PLACEHOLDER_TAG_ID","NATIVE_TOOLS","EditorUtils","editorWrapperTemplate","formatByName","name","format","i","inArray","tags","getToolCssClass","icon","cssClass","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","insertUpperRomanList","insertLowerRomanList","import","indent","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","mergeCellsHorizontally","mergeCellsVertically","splitCellHorizontally","splitCellVertically","tableProperties","tableCellProperties","tableWizardInsert","tableAlignLeft","tableAlignCenter","tableAlignRight","cleanFormatting","copyFormat","applyFormat","pdf","nameToKebab","replace","toLowerCase","toolName","tool","Editor","defaultTools","registerFormat","formatName","formats","cacheComments","content","comments","index","retrieveComments","supportedContentEditable","document","documentElement","toolGroups","basic","scripts","alignment","links","lists","dent","tablesWizard","tablesInsert","tablesAddDelete","tablesMerge","tablesPosition","formatPainter","element","toolbarContainer","type","domElement","that","editor","dom","Dom","_registerHandler","closest","update","bind","_setupType","_initToolbar","_setupHeight","_resizable","_initializeContentElement","_setupKeyboard","clipboard","Clipboard","undoRedoStack","_populateValue","mousedown","_endTyping","mouseup","e","_mouseup","_initializeImmutables","_ariaLabel","wrapper","find","toolbar","resize","notify","_showWatermarkOverlay","messages","auto","bold","italic","underline","strikethrough","fitToCell","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","style","emptyFolder","editAreaTitle","uploadFile","overflowAnchor","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","fileText","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableWizard","tableTab","cellTab","accessibilityTab","caption","summary","width","height","units","cellSpacing","cellPadding","cellMargin","captionAlignment","position","background","tableBackground","id","border","borderStyle","borderWidth","borderColor","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","applyToColumn","applyToRow","exportAs","print","headerRows","headerColumns","tableSummaryPlaceholder","associateNone","associateScope","associateIds","borderNone","placeholder","nonce","unsafeInline","encoded","domain","resizable","deserialization","custom","serialization","entities","semantic","optimizeTags","keepEOL","pasteCleanup","all","css","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","stylesheets","dialogOptions","modal","draggable","animation","imageBrowser","fileBrowser","navigateOnTab","text","value","tools","destroy","_deregisterHandlers","clearTimeout","_spellCorrectTimeout","_focusOutside","windowInstance","tablePopup","_destroyUploadWidget","_destroyResizings","setOptions","_setOptionsTools","_initializePlaceholder","createRange","RangeUtils","encodedValue","encode","exec","params","range","Error","body","getAttribute","keyboard","isTypingInProgress","_focusBody","selectRange","_range","getRange","Object","map","key","immutables","test","execCommand","async","change","_selectionChange","managesUndoRedo","focus","restoreSelection","selection","getSelection","rangeCount","getRangeAt","doc","startContainer","endContainer","startOffset","endOffset","setStart","collapse","SelectionUtils","selectionFromDocument","paste","html","refresh","textarea","val","remove","selectionRestorePoint","toRange","saveSelection","container","commonAncestorContainer","contains","selectedHtml","Serializer","domToXhtml","cloneContents","removeAllRanges","addRange","state","textNodes","finder","collapsed","getFormat","isFormatted","_togglePlaceholder","trim","_oldValue","currentHtml","htmlToDom","_refreshTools","_bindTools","unbind","filter","el","each","initialize","_blur","old","_containsRange","isAncestorOrSelf","_createContentElement","iframe","wnd","lang","specifiedDomain","domainScript","src","hide","title","frameBorder","addClass","attr","tabIndex","insertBefore","location","hostname","contentWindow","contentDocument","one","_decorateFormatting","getElementsByTagName","open","write","isRtl","ios","edge","chrome","href","join","close","_deleteSavedRange","component","dataSource","items","tag","className","formattingElement","getKendoDropDownList","data","list","getEffectiveBackground","inlineStyle","handlers","_handlers","h","off","handler","_uploadWidget","endTyping","scrollTop","activeElement","_activeElement","scrollHeight","clientHeight","msie","left","top","opacity","appendTo","_handleToolbarClick","target","_immutablesContext","Immutables","immutablesContext","editableTextNodes","blurTrigger","mousedownTrigger","createElement","setAttribute","appendChild","interval","setInterval","last","clearInterval","setTimeout","_mousedown","touch","keydown","_spellCorrect","parentElement","nodeName","_cachedHeight","restoreHeight","keyCode","BACKSPACE","DELETE","F10","first","preventPopupHide","preventDefault","LEFT","RIGHT","offset","next","nextChar","nodeType","nodeValue","toolFromShortcut","toolOptions","keyPressCommand","_runPostContentKeyCommands","keypress","_showElementResizeHandles","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","_refreshInterval","click","selectNode","focusin","hasAttribute","_showWindow","focusout","active","popup","toolbarContainerElement","get","_toolbarFocused","hasClass","removeClass","_hideWindow","_initializeColumnResizing","_initializeRowResizing","_initializeElementResizing","$head","head","append","assign","defaults","toolbarOptions","_processToolbarItems","_setNativeTools","parentMessages","toggle","evaluateTemplates","ToolBar","on","is","_initToolbarWindow","toolbarEl","wrap","parent","prepend","kendoWindow","dragHandle","effects","minHeight","visible","autoFocus","actions","dragend","_moved","_selectionStarted","parents","stopPropagation","gecko","which","tagName","defaultValue","deserializedRoot","getAllComments","innerHTML","_resetGroups","current","result","optionsTools","assign$1","j","t","guidGroupName","flatDefaultTools","processedObject","currentGroups","Array","isArray","guid","_processToolOptions","gr","includes","values","group","g","to","_processDefaultTool","isPlainObject","view","shortcuts","uiOptions","originalOptions","palette","template","showText","showIcon","tooltip","attributes","ColorTool","componentOptions","views","preview","input","buttons","_shortcutSequence","nodes","filterBy","htmlIndentSpace","_updateImmutablesState","eventNames","NS","hasOwnProperty","applyEventMap","split","toolsFromShortcut","o","changesContent","empty","heightStyle","expectedHeight","parseInt","actualHeight","indexOf","isNaN","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","_wrapTextarea","res","ctrl","shift","alt","beforeCorrection","falseTrigger","contextmenu","mozilla","_finishUpdate","show","$body","toggleClass","overflowPopup","uiElement","trackImmutables","toolsToBeUpdated","w","editorWrap","editArea","draggableElement","insertAfter","kendoResizable","start","currentTarget","initialSize","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","getKendoResizable","ignore","_destroyElementResizing","ElementResizingFactory","dispose","_destroyRowResizing","RowResizing","_destroyColumnResizing","ColumnResizing","create","_showElementResizeHandlesProxy","elementResizing","parentNode","showResizeHandles","columnResizing","rowResizing","_getWindowWidth","editorElement","_overlapsWindow","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","boxOffset","boxOffsetLeft","boxOffsetTop","editorOffset","plugin","commandArguments","noop","UndoTool","enable","removeAttr","emptyElementContent","emptyTableCellContent","PDFMixin","prototype","_drawPDF","drawing","drawDOM","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","proxyTarget","forceProxy","resolve","fail","err","reject","jQuery","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","makeMap","len","obj","nonListBlockElements","blockElements","concat","block","selfClosing","inlineElements","inline","fillAttrs","nonEmptyNonTextContentElements","normalize","node","version","firstChild","prev","nextSibling","persistedScrollTop","whitespace","emptyspace","rgb","bom","whitespaceOrBom","cssAttributes","htmlRe","entityRe","entityTable","findNodeIndex","skipText","previousSibling","isDataNode","isAncestorOf","findClosestAncestor","rootElem","iterator","createNodeIterator","NodeFilter","SHOW_COMMENT","FILTER_ACCEPT","curNode","nextNode","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","deleteData","attrEquals","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","significantChildNodes","isWhitespace","lastTextNode","lastChild","isMarker","allowsTextContent","every","allWhitespaceContent","isEmptyspace","sibling","direction","isBlock","isPrevBlock","isNextBlock","isSelfClosing","isEmpty","isInline","isImg","isBr","scrollContainer","compatMode","scrollingElement","scrollTo","toStart","elementTop","elementHeight","marker","windowHeight","innerHeight","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","undefined","insertAt","newElement","referenceElement","removeChildren","removeTextSiblings","closestBy","condition","rootCondition","ofType","changeTag","skipAttributes","attribute","specified","cssText","editableParent","contentEditable","unwrap","isChildOfBaseContainer","createEmptyNode","removeAttribute","mergeAttributes","origin","traverseCss","unstyle","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","arguments$1","arguments","count","paths","minPathLength","output","reverse","closestSplittableParent","apply","editableParents","editableAncestor","closestEditable","types","editable","closestEditableOfType","invert","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","reMapTableColumns","table","colAttr","_mapColIndices","clearTableMappings","registeredColumns","rowIndex","cells","colIndex","cellIndex","cell","rowSpan","_mapColspan","colSpan","ci","ri","associateWithIds","theadRows","numberOfTheadRows","tableRows","numberOfTableRows","theadMatrix","tbodyMatrix","tHead","_getNumberOfHeaderRows","_generateIdsForColumns","_generateIdsForRows","_assignIds","col","colspan","rowspan","k","l","timestamp","Date","getTime","row","headers","pushHeaderId","forEach","_onlyUnique","_getNumberOfColumns","currentIndex","numberOfCols","Number","_getNumberOfHeaderColumns","numberOfHeaderRows","number","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","bomSpan","div","supportsLeadingWhitespace","isFunction","toEditableHtml","_toEditableImmutables","immutable","prependTo","_fillEmptyElements","p","children","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","_preventScriptExecution","attributesToRemove","deserialize","semanticFilter","mapStart","tagMap","end","skipEncoding","canOptimize","semanticAttributes","specifiedAttributes","textDecoration","font","fontFamily","size","inlineStyles","ignoredStylePrefixes","prop","startsWith","strong","em","b","u","item","styleObj","splice","face","styleAttr","properties","property","lastIndex","cssProperties","$node","htmlEncode","skip","childNode","mapper","previous","jqNode","serialize","shouldOptimize","isEmptyBomNode","runCustom","script","childrenCount","textOnly","selectionFromWindow","W3CSelection","selectionFromRange","rangeDocument","documentFromRange","W3CRange","updateRangeProperties","fixIvalidRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","RangeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","startAncestor","endAncestor","compareBoundaries","ex","isInvalidRange","fromNode","_current","_next","_end","hasNext","traverse","callback","inStartContainer","inEndContainer","nodeIndex","getSubRange","subRange","textRange","createTextRange","adoptContainer","select","duplicate","right","textRangeContainer","adoptEndPoint","compareEndPoints","movedStart","movedEnd","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","moveToElementText","setEndPoint","comparison","appended","RangeEnumerator","enumerate","visit","ImmutablesRangeIterator","ImmutablesRangeEnumerator","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","Marker","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","isExpandable","rangeBoundary","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","isBomSelected","charAt","collapsedToStart","startParent","endParent","startIndex","endIndex","boundary","immutableParent","image","stringify","partition","partitionRange","contents","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","startEditable","endEditable","isEnd","beforeCaret","afterCaret","search","substring","complexBlocks","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","randomId","chars","round","random","updateToolOptions","_initOptions","_toHtml","replaceWith","isDeleting","_cancelDeleting","_cancelTyping","typingInProgress","isTypingKey","backspace","del","cancelDeleting","nextImmutable","closestSelectionLi","closestImmutableLi","_removeImmutable","forwards","commonContainer","_nextNode","startRestorePoint","expandImmutablesIn","startImmutableParent","endImmutableParent","serialized","restorePoint","formatter","lockRange","releaseRange","point","createDialog","_actionButtonsTemplate","ref","insertButtonIcon","cancelButtonIcon","renderButton","themeColor","endRestorePoint","ViewHtmlCommand","cmd","dialog","_footerTemplate","_footerMessages","center","FormatCommand","FormatTool","getKendoToolBar","getKendoToggleButton","MOUSEDOWN_NS","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","activate","formatNode","formatNodes","consolidate","outerMostInline","pop","GreedyInlineFormatFinder","greedyProperty","fontAttr","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parentsUntil","addBack","toArray","GreedyInlineFormatter","toCamelCase","action","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","widget","setDataSource","sender","newRange","ENTER","_widget","getKendoColorPicker","storedRange","_inputFocused","_popup","unselectable","_value","toCssRgba","fontWeight","togglable","fontStyle","overflow","toolIcon","commandOn","closeOnSelect","dataValueField","dataTextField","valuePrimitive","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","a","UnlinkCommand","LinkCommand","url","_initialText","img","minWidth","_close","_form","_createForm","_apply","_keydown","linkUrl","_dialog","formElement","form","kendoForm","renderButtons","field","label","editorOptions","after","ESC","textInput","anchor","AutoLinkCommand","detectedLink","detectLink","linkMarker","linkRange","_ensureWebProtocol","startNode","traverser","LeftDomTextTraverser","cancelAtNode","DomTextLinkDetection","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","isLink","DomPos","_detectEnd","blank","clone","_detectStart","_isLinkDetected","puntuationOptions","extendOptions","RightDomTextTraverser","_skipStartPuntuation","lastIndexOfRegExp","ii","r","str","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","SPACEBAR","BlockFormatFinder","candidate","suitable","f","_resolveListsItems","until","ImmutablesNS","BlockFormatter","ancestor","_handleImmutables","images","imageAttributes","nonImages","applyFormatting","immutableFormat","namedFormat","GreedyBlockFormatter","formatTag","ListFormatter","blockFormatter","BlockFormatTool","listElements","textAlign","float","display","marginLeft","marginRight","listStylePosition","ListFormatFinder","altAttr","matchesType","isList","unwrapTag","li","isImmutable","containsAny","_parentLists","merge","breakable","findSuitableNode","applyOnSection","section","pushAncestor","listStyleType","lastSection","lastNodes","sections","addLastSection","ul","fragment","ListCommand","ListTool","FormattingTool","toFormattingItem","dot","context","decorate","optionLabel","dataItem","toJSON","dataBound","getFormattingValue","n","selectBox","_ancestor","operator","CleanFormatCommand","tagsToClean","clean","listFormatter","unwrapListItem","highlightFirst","autoWidth","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onload","onerror","applied","isIE","showBrowser","ImageBrowser","transport","read","_imageBrowser","ev","selected","dialogHeight","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","upload","kendoUpload","success","_onUploadSuccess","_onUploadProgress","_onUploadSelect","error","_onUploadError","complete","_onUploadComplete","showFileList","multiple","saveUrl","autoUpload","saveField","validation","allowedExtensions","maxFileSize","getKendoUpload","_trigger","clearAllFiles","_removeLoadingOverlay","response","files","validationErrors","_initLoadingOverlay","eventType","uploadEvent","_iframeWrapper","_container","postProcess","genericCommand","initialValue","autoSize","ExportAsCommand","exportType","postToProxy","generateForm","submit","exportAsOptions","method","valueInput","exportTypeInput","fileNameInput","antiForgeryInput","csrf_param","ExportAsTool","changeHandler","_exec","itemTemplate","valueTemplate","iconClass","indentDirection","IndentFormatter","parentList","targets","mapImmutables","siblingList","nestedList","getListTypeAttr","targetIndex","styleType","targetNode","listParent","siblings","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","suitableNodes","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","tableNode","rng","emptyParagraphContent","parentChildrenLength","_insertParagraphAfter","NewLineCommand","filler","kbrParent","oldIE","KEDITORFILEURL","KEDITORFILETEXT","KEDITORFILETITLE","FileCommand","file","FileBrowser","_fileBrowser","ACTIVESTATE","SELECTEDSTATE","SCOPE","ROW","COL","ROWGROUP","COLGROUP","COLSPAN","ROWSPAN","TABLE","THEAD","TBODY","TR","TD","TH","getTouches","columnTemplate","tableFormatFinder","TableCommand","skipCleaners","_tableHtml","columnHtml","rowHeight","insertedTable","PopupTool","btn","popupTemplate","kendoPopup","copyAnchorStyles","_open","_activate","_toggle","_editor","TableWizardTool","TableWizardCommand","insertNewTable","kendoButton","_setTableSize","InsertTableTool","cols","cellWidth","cellHeight","firstCell","eq","lastCell","getOffset","tableFromLocation","floor","clientY","clientX","scrollLeft","offsetWidth","autoApplyNS","_valid","status","initiallyVisible","button","selectedRows","selectedColumns","changed","tableSize","stopImmediatePropagation","TableModificationCommand","_clearColIndexAttr","_findRowSpanCell","_resetElementResizing","_findNextTdInRow","td","lastTd","_adjustColgroups","colgroup","colElements","colgroupElements","numberOfCells","_associateHeaderIds","InsertRowCommand","cellCount","newRow","createdCell","_appendCell","newCell","InsertColumnCommand","columnIndex","_processForColSpan","_resizeCells","selectedCell","colSpanEffect","parsedWidth","unit","calculatedWidth","parseFloat","DeleteRowCommand","focusElement","rowParent","_focusElement","_handleRowSpanCells","adjacentCell","nextRow","firstRow","before","_reduceRowSpan","rowSpanValue","DeleteColumnCommand","columnCount","_handleColSpanCells","_reduceColSpan","colSpanValue","MergeCellsHorizontallyCommand","nextTd","_getColspan","MergeCellsVerticallyCommand","tr","targetRow","bottomTd","_getRowspan","SplitCellCommand","emptyTd","_splitCellHorizontally","_splitCellVertically","_getRowspanValue","_getColspanValue","tdToAdd","colSpanResult","rowSpanResult","TableModificationTool","commandsMap","insert","delete","column","TableFormatCommand","_showResizeHandles","TableFormatTool","isTable","align","nonSplittableTagsOnPaste","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","originalEvent","_insertImages","when","results","onpaste","clipboardNode","_decoreateClipboardNode","webkit","_moveToCaretPosition","clipboardRange","containers","ondragover","ondrop","dataTransfer","margin","padding","fontVariant","lineSpacing","lineHeight","nodeOffset","caretOffset","_caretOffset","translate","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","preventSplit","unwrapPasted","applicable","splitter","splittable","fragmentsHtml","elm","rangeEnd","focusedTable","siblingNodes","lastSiblingIndex","lastSibling","Cleaner","replacements","customReplacements","junkReplacements","convertFontMatch","$0","$1","closing","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","_checkForBullet","_getHtmlNoBullet","extractListLevels","level","_createList","rootMargin","rootIndex","lastRootLi","isLastRootLi","rootList","blockChildren","lastMargin","levels","acceptedNameTags","listIndex","levelType","removeAttributes","significantStyles","addSignificantStyles","isSignificantCss","removeAttributeNode","createColGroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeTextNodes","trs","currentNode","tables","longestRow","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","TextContainer","HtmlTextLines","separators","line","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","thead","tbody","cleaner","cellText","PREVIOUS_SIBLING","getSibling","tableCells","tableCellsWrappers","tableElements","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","getNext","evt","Event","isDefaultPrevented","deleteSelection","startTyping","_removeBomSpan","textContent","_addCaret","_restoreCaret","_handleDelete","caretPlaceholder","_merge","_cleanBomBefore","_handleBackspace","startAtLi","liIndex","startAtNonFirstLi","rangeStartNode","previousNode","_handleSelection","parentElementOrNode","_surroundFullyContent","_surroundFullySelectedAnchor","toLocaleLowerCase","_join","startImmutable","endImmutable","_moveMarker","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","systemCommandIsInProgress","createUndoCommand","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","toUpperCase","metaKey","found","matchKey","toolKey","onEndTyping","stopTyping","force","timeout","what","ExportPdfCommand","PrintCommand","CopyFormatCommand","blockStyles","collectStyles","rangeNodes","populateStyles","destination","styleValue","styleKey","attributeKey","styles","nodeStyles","ApplyFormatCommand","removeEmptyElementsFromRange","cleanInlineParents","applyBlockStyles","applyInlineStyles","emptyElements","blockParent","outerWrapper","previousNodes","nextNodes","prevWrapper","nextWrapper","listItems","currentStyle","createdNode","topNode","CopyFormatTool","ApplyFormatTool","math","REGEX_NUMBER_IN_PERCENTAGES","REGEX_NUMBER_IN_PIXELS","STRING","inPercentages","ResizingUtils","constrain","lowerBound","upperBound","getScrollBarWidth","scrollbar","calculatePercentageRatio","total","inPixels","toPercentages","toPixels","KEY_DOWN","MOUSE_LEAVE","MOUSE_UP","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","onResizeStart","onResize","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","COLATTR","COMMA","WIDTH","handleWidth","borderOffset","mousePosition","tableInnerElement","tBodies","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnOffsetLeft","innerElementOffsetTop","tableHead","tableBody","fullHeight","columnWidth","columnLeftOffset","adjacentColumnWidth","resizeHandleOffsetLeft","handleOffset","newWidth","initialAdjacentColumnWidth","initialColumnWidth","nextColumn","rtlModifier","initialDeltaX","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","innerElementWidth","currentColumnsWidths","topAndBottomColumns","innerTableElement","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","HEIGHT","handleHeight","rowOffsetLeft","rowOffsetTop","topInnerTableElement","$row","tableTopOffset","resizeHandleOffsetTop","currentRowHeight","initialTableHeight","tableHeadHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","ElementResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","HandlePositioningStrategy","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","HandleDraggingStrategy","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","applyScrollOffset","rootLeft","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","RESIZE_HANDLE_WRAPPER_CLASS","ELEMENT_RESIZING_CLASS","MOUSE_DOWN","ELEMENT_TYPES","isUndefined","ElementResizing","handles","_destroyResizeHandles","appendHandlesTo","_resizeWidth","_resizeHeight","_getMaxDimensionValue","dimension","dimensionLowercase","parentDimension","parentScrollOffset","_initResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_initialElementHeight","_initialElementWidth","_onResizeHandleDrag","_onResizeHandleDragEnd","TableResizing","_hasRowsInPixels","ratioValue","ratioTotalValue","constrainedWidth","styleWidth","currentWidth","parentWidth","maxWidth","_setColumnsWidth","constrainedHeight","styleHeight","currentHeight","parentHeight","maxHeight","hasRowsInPixels","parentColumn","columnsLength","isWidthInPercentages","ImageResizing","_onResizeHandleDragVertical","_onResizeHandleDragHorizontal","_onResizeHandleDragLocked","_getDeltas","initialWidth","initialHeight","MAX_SAFE_INTEGER","hasImg","eventTarget","eventCurrentTarget","isResizeHandleOrChild","tableResizing","cellsFormatFinder","reUnit","COL_INDEX","isTableCellWizard","tableCellWizard","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","_ensureFocusableAfterTable","lastSelectedRow","cellProp","tableProp","_lastInCollection","_deleteTableRows","_addRows","_updateColumns","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","_updateHeadersWithThead","_updateHeadersNoThead","_updateHeaderAssociates","_isHeadingRow","_isHeadingCell","cellsWithHeadersAssociated","headingIds","checkHeader","header","headersArray","headersAttr","some","_insertCells","insertCell","createTHead","_createTableRows","createTBody","cellsWithHeaders","_addScopes","initialIndex","insertRow","cellsLength","newRowsCount","firstRowLastCell","numberOfColumns","lastCurrentCell","rowColumns","deleteCell","_getStylesData","captionContent","deleteCaption","createCaption","_getAlignmentData","verticalAlign","_swapToHeaderCells","deleteTHead","_removeScopes","_removeAssociates","headerCols","whiteSpace","widthUnit","heightUnit","backgroundColor","bgColor","borderCollapse","_getTablePositionData","tStyle","captionClone","tableAlignment","_getAlignment","tablePosition","_getTablePosition","numberOfHeaderColumns","tableJson","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","hAlign","vAlign","collection","TableWizardEditTool","TableCellWizardEditTool","numericTextBoxSettings","borderStyles","textWrapDropDownSettings","tablePositionDropDownSettings","tableAlignmentDropDownSettings","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","tablePropertiesDialogTemplate","cellPropertiesDialogTemplate","_openTablePropertiesDialog","tableData","closeHandler","_dialogTemplate","collectTableDialogValues","components","_initTabStripComponent","_tablePropertiesForm","_createTablePropertiesForm","_accessibilityPropertiesForm","_createAccessibilityPropertiesForm","_openCellPropertiesDialog","collectCellDialogValues","_cellPropertiesForm","_createCellPropertiesForm","isCellProperties","tabStrip","kendoTabStrip","_collectTableViewValues","_collectAccessibilityViewValues","_collectCellViewValues","tableView","check","cellView","wrapTextValue","accessibilityView","_addUnit","_initNumericTextbox","storage","settings","kendoNumericTextBox","_initDropDownList","kendoDropDownList","_setComponentValue","_initBorderStyleDropDown","_initTablePositionDropDown","_initPositionDropDown","_initTableAlignmentDropDown","_initAlignmentDropDown","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","_initTextWrapDropDown","_initAssociationDropDown","_initColorPicker","kendoColorPicker","clearButton","_initInput","kendoTextBox","_initCheckbox","kendoCheckBox","_initTextArea","kendoTextArea","_destroyComponents","dialogTemplate","_onColumnsNumberChange","headerColumnsNumeric","currentNumberOfColumnsHeaders","_onRowsNumberChange","headerRowsNumeric","currentNumberOfRowHeaders","numberOfRows","layout","grid","layoutWrapper","hint","optional","gutter"],"sources":["kendo.editor.js"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.combobox.js'), require('kendo.dropdownlist.js'), require('kendo.resizable.js'), require('kendo.window.js'), require('kendo.colorpicker.js'), require('kendo.imagebrowser.js'), require('kendo.numerictextbox.js'), require('kendo.textarea.js'), require('kendo.core.js'), require('kendo.toolbar.js'), require('kendo.icons.js'), require('kendo.form.js'), require('kendo.filebrowser.js'), require('kendo.draganddrop.js'), require('kendo.html.button.js'), require('kendo.tabstrip.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.combobox', 'kendo.dropdownlist', 'kendo.resizable', 'kendo.window', 'kendo.colorpicker', 'kendo.imagebrowser', 'kendo.numerictextbox', 'kendo.textarea', 'kendo.core', 'kendo.toolbar', 'kendo.icons', 'kendo.form', 'kendo.filebrowser', 'kendo.draganddrop', 'kendo.html.button', 'kendo.tabstrip'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendoeditor = global.kendoeditor || {}, global.kendoeditor.js = factory()));\n})(this, (function () {\n    (function(kendo) {\n        var UndoRedoStack = kendo.Observable.extend({\n            init: function(options) {\n                kendo.Observable.fn.init.call(this, options);\n                this.clear();\n            },\n            events: [ \"undo\", \"redo\" ],\n            push: function (command) {\n                this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n                this.currentCommandIndex = this.stack.push(command) - 1;\n            },\n            undo: function () {\n                if (this.canUndo()) {\n                    var command = this.stack[this.currentCommandIndex--];\n                    command.undo();\n                    this.trigger(\"undo\", { command: command });\n                }\n            },\n            redo: function () {\n                if (this.canRedo()) {\n                    var command = this.stack[++this.currentCommandIndex];\n                    command.redo();\n                    this.trigger(\"redo\", { command: command });\n                }\n            },\n            clear: function() {\n                this.stack = [];\n                this.currentCommandIndex = -1;\n            },\n            canUndo: function () {\n                return this.currentCommandIndex >= 0;\n            },\n            canRedo: function () {\n                return this.currentCommandIndex != this.stack.length - 1;\n            }\n        });\n\n        kendo.deepExtend(kendo, {\n            util: {\n                UndoRedoStack: UndoRedoStack\n            }\n        });\n    })(kendo);\n\n    (function($,undefined$1) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            Widget = kendo.ui.Widget,\n            os = kendo.support.mobileOS,\n            browser = kendo.support.browser,\n            extend = $.extend,\n            deepExtend = kendo.deepExtend,\n            keys = kendo.keys,\n            outerWidth = kendo._outerWidth,\n            outerHeight = kendo._outerHeight,\n            NS = \".kendoEditor\";\n\n        var SELECT = \"select\";\n        var SELECT_OVERLAY_SELECTOR = \"select.k-select-overlay\";\n        var PLACEHOLDER_CLASS = \"k-placeholder\";\n        var PLACEHOLDER_TAG_ID = \"placeholder\";\n        var REFRESH_INTERVAL = 200;\n        var DEFAULT_LANGUAGE = \"en\";\n\n        var NATIVE_TOOLS = [\n            \"insertLineBreak\",\n            \"insertParagraph\",\n            \"redo\",\n            \"undo\",\n            \"autoLink\"\n        ];\n\n        var EditorUtils = {\n            editorWrapperTemplate: function () { return '<div class=\"k-editor\">' +\n                    '<div class=\"k-editor-toolbar\" role=\"toolbar\"></div>' +\n                    '<div class=\"k-editable-area k-editor-content\"></div>' +\n                '</div>'; },\n\n            formatByName: function(name, format) {\n                for (var i = 0; i < format.length; i++) {\n                    if ($.inArray(name, format[i].tags) >= 0) {\n                        return format[i];\n                    }\n                }\n            },\n\n            getToolCssClass: function(name, icon) {\n                var toolCssClassNames = {\n                    superscript: \"supscript\",\n                    subscript: \"subscript\",\n                    justifyLeft: \"align-left\",\n                    justifyCenter: \"align-center\",\n                    justifyRight: \"align-right\",\n                    justifyFull: \"align-justify\",\n                    insertUnorderedList: \"list-unordered\",\n                    insertOrderedList: \"list-ordered\",\n                    insertUpperRomanList: \"list-roman-upper\",\n                    insertLowerRomanList: \"list-roman-lower\",\n                    \"import\": \"import\",\n                    indent: \"indent\",\n                    outdent: \"outdent\",\n                    createLink: \"link\",\n                    unlink: \"unlink\",\n                    insertImage: \"image\",\n                    insertFile: \"file-add\",\n                    viewHtml: \"code\",\n                    foreColor: \"foreground-color\",\n                    backColor: \"droplet\",\n                    createTable: \"table-add\",\n                    addColumnLeft: \"table-column-insert-left\",\n                    addColumnRight: \"table-column-insert-right\",\n                    addRowAbove: \"table-row-insert-above\",\n                    addRowBelow: \"table-row-insert-below\",\n                    deleteRow: \"table-row-delete\",\n                    deleteColumn: \"table-column-delete\",\n                    mergeCellsHorizontally: \"cells-merge-horizontally\",\n                    mergeCellsVertically: \"cells-merge-vertically\",\n                    splitCellHorizontally: \"cell-split-horizontally\",\n                    splitCellVertically: \"cell-split-vertically\",\n                    tableProperties: \"table-properties\",\n                    tableCellProperties: \"table-cell-properties\",\n                    tableWizardInsert: \"table-wizard\",\n                    tableAlignLeft: \"table-position-start\",\n                    tableAlignCenter: \"table-position-center\",\n                    tableAlignRight: \"table-position-end\",\n                    cleanFormatting: \"clear-css\",\n                    copyFormat: \"copy-format\",\n                    applyFormat: \"apply-format\",\n                    pdf: \"file-pdf\"\n                };\n\n                var cssClass = toolCssClassNames[name];\n\n                if (cssClass) {\n                    return cssClass;\n                }\n\n                if (icon) {\n                    return icon;\n                }\n\n                return EditorUtils.nameToKebab(name);\n            },\n\n            nameToKebab: function(name) {\n                return name.replace(/([a-z])([A-Z])/g, \"$1-$2\")\n                    .replace(/[\\s_]+/g, '-')\n                    .toLowerCase();\n            },\n\n            registerTool: function(toolName, tool) {\n                if (!tool.name) {\n                    tool.options.name = toolName;\n                    tool.name = toolName.toLowerCase();\n                }\n\n                if (!tool.options.ui) {\n                    tool.options.ui = {};\n                }\n\n                tool.options.ui.command = toolName;\n\n                Editor.defaultTools[toolName] = tool;\n            },\n\n            registerFormat: function(formatName, format) {\n                Editor.fn.options.formats[formatName] = format;\n            },\n\n            cacheComments: function(content, comments) {\n                for (var index in comments) {\n                    content = content.replace(comments[index], \"{\" + index + \"}\");\n                }\n                return content;\n            },\n\n            retrieveComments: function(content, comments) {\n                for (var index in comments) {\n                    content = content.replace(\"{\" + index + \"}\", comments[index]);\n                }\n                return content;\n            }\n        };\n\n        var messages = {\n            auto: \"Auto\",\n            bold: \"Bold\",\n            italic: \"Italic\",\n            underline: \"Underline\",\n            strikethrough: \"Strikethrough\",\n            superscript: \"Superscript\",\n            subscript: \"Subscript\",\n            fitToCell: \"Fit to cell\",\n            justifyCenter: \"Center text\",\n            justifyLeft: \"Align text left\",\n            justifyRight: \"Align text right\",\n            justifyFull: \"Justify\",\n            insertUnorderedList: \"Insert unordered list\",\n            insertOrderedList: \"Insert ordered list\",\n            indent: \"Indent\",\n            outdent: \"Outdent\",\n            createLink: \"Insert hyperlink\",\n            unlink: \"Remove hyperlink\",\n            insertImage: \"Insert image\",\n            insertFile: \"Insert file\",\n            insertHtml: \"Insert HTML\",\n            viewHtml: \"View HTML\",\n            fontName: \"Select font family\",\n            fontNameInherit: \"(inherited font)\",\n            fontSize: \"Select font size\",\n            fontSizeInherit: \"(inherited size)\",\n            formatBlock: \"Format\",\n            formatting: \"Format\",\n            foreColor: \"Color\",\n            backColor: \"Background color\",\n            style: \"Styles\",\n            emptyFolder: \"Empty Folder\",\n            editAreaTitle: \"Editable area. Press F10 for toolbar.\",\n            uploadFile: \"Upload\",\n            overflowAnchor: \"More tools\",\n            orderBy: \"Arrange by:\",\n            orderBySize: \"Size\",\n            orderByName: \"Name\",\n            invalidFileType: \"The selected file \\\"{0}\\\" is not valid. Supported file types are {1}.\",\n            deleteFile: 'Are you sure you want to delete \"{0}\"?',\n            overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n            directoryNotFound: \"A directory with this name was not found.\",\n            imageWebAddress: \"Web address\",\n            imageAltText: \"Alternate text\",\n            imageWidth: \"Width (px)\",\n            imageHeight: \"Height (px)\",\n            fileWebAddress: \"Web address\",\n            fileTitle: \"Title\",\n            fileText: \"Text\",\n            linkWebAddress: \"Web address\",\n            linkText: \"Text\",\n            linkToolTip: \"ToolTip\",\n            linkOpenInNewWindow: \"Open link in new window\",\n            dialogUpdate: \"Update\",\n            dialogInsert: \"Insert\",\n            dialogOk: \"Confirm\",\n            dialogCancel: \"Cancel\",\n            cleanFormatting: \"Clean formatting\",\n            createTable: \"Create a table\",\n            createTableHint: \"Create a {0} x {1} table\",\n            addColumnLeft: \"Add column on the left\",\n            addColumnRight: \"Add column on the right\",\n            addRowAbove: \"Add row above\",\n            addRowBelow: \"Add row below\",\n            deleteRow: \"Delete row\",\n            deleteColumn: \"Delete column\",\n            mergeCellsHorizontally: \"Merge cells horizontally\",\n            mergeCellsVertically: \"Merge cells vertically\",\n            splitCellHorizontally: \"Split cells horizontally\",\n            splitCellVertically: \"Split cells vertically\",\n            tableAlignLeft: \"Table Align Left\",\n            tableAlignCenter: \"Table Align Center\",\n            tableAlignRight: \"Table Align Right\",\n            tableWizard: \"Table Wizard\",\n            tableProperties: \"Table Properties\",\n            tableCellProperties: \"Cell Properties\",\n            tableTab: \"General\",\n            cellTab: \"Cell\",\n            accessibilityTab: \"Advanced\",\n            caption: \"Caption\",\n            summary: \"Summary\",\n            width: \"Width\",\n            height: \"Height\",\n            units: \"Units\",\n            cellSpacing: \"Cell Spacing\",\n            cellPadding: \"Cell Padding\",\n            cellMargin: \"Cell Margin\",\n            alignment: \"Alignment\",\n            captionAlignment: \"Caption alignment\",\n            position: \"Position\",\n            background: \"Background\",\n            tableBackground: \"Table background\",\n            cssClass: \"CSS Class\",\n            id: \"ID\",\n            border: \"Border\",\n            borderStyle: \"Border Style\",\n            borderWidth: \"Border Width\",\n            borderColor: \"Border Color\",\n            collapseBorders: \"Collapse borders\",\n            wrapText: \"Wrap text\",\n            associateCellsWithHeaders: \"Associate headers\",\n            alignLeft: \"Align Left\",\n            alignCenter: \"Align Center\",\n            alignRight: \"Align Right\",\n            alignLeftTop: \"Align Left Top\",\n            alignCenterTop: \"Align Center Top\",\n            alignRightTop: \"Align Right Top\",\n            alignLeftMiddle: \"Align Left Middle\",\n            alignCenterMiddle: \"Align Center Middle\",\n            alignRightMiddle: \"Align Right Middle\",\n            alignLeftBottom: \"Align Left Bottom\",\n            alignCenterBottom: \"Align Center Bottom\",\n            alignRightBottom: \"Align Right Bottom\",\n            alignRemove: \"Remove Alignment\",\n            columns: \"Columns\",\n            rows: \"Rows\",\n            selectAllCells: \"Apply to all cells\",\n            applyToColumn: \"apply to column\",\n            applyToRow: \"apply to row\",\n            exportAs: \"Export As\",\n            \"import\": \"Import\",\n            print: \"Print\",\n            headerRows: \"Header Rows\",\n            headerColumns: \"Header Cols\",\n            tableSummaryPlaceholder: \"Summary attribute is not HTML5 compatible.\",\n            associateNone: \"None\",\n            associateScope: \"Associate using 'scope' attribute\",\n            associateIds: \"Associate using Ids\",\n            copyFormat: \"Copy format\",\n            applyFormat: \"Apply format\",\n            borderNone: \"None\",\n            undo: \"Undo\",\n            redo: \"Redo\"\n        };\n\n        var supportedContentEditable = typeof(document.documentElement.contentEditable) != 'undefined';\n\n        var toolGroups = {\n            basic: [\"bold\", \"italic\", \"underline\", \"strikethrough\"],\n            undo: [\"undo\", \"redo\"],\n            scripts: [\"subscript\", \"superscript\" ],\n            alignment: [\"justifyLeft\", \"justifyCenter\", \"justifyRight\", \"justifyFull\" ],\n            links: [\"insertImage\", \"insertFile\", \"createLink\", \"unlink\"],\n            lists: [\"insertUnorderedList\", \"insertOrderedList\", \"insertUpperRomanList\", \"insertLowerRomanList\" ],\n            dent: [\"indent\", \"outdent\"],\n            tablesWizard: [\"tableProperties\", \"tableCellProperties\"],\n            tablesInsert: [\"createTable\"],\n            tablesAddDelete: [ \"addColumnLeft\", \"addColumnRight\", \"addRowAbove\", \"addRowBelow\", \"deleteRow\", \"deleteColumn\" ],\n            tablesMerge: [ \"mergeCellsHorizontally\", \"mergeCellsVertically\", \"splitCellHorizontally\", \"splitCellVertically\" ],\n            tablesPosition: [ \"tableAlignLeft\", \"tableAlignCenter\", \"tableAlignRight\" ],\n            formatPainter: [ \"copyFormat\", \"applyFormat\" ]\n        };\n\n        var Editor = Widget.extend({\n            init: function(element, options) {\n                var that = this,\n                    editorNS = kendo.ui.editor,\n                    dom = editorNS.Dom,\n                    toolbarContainer,\n                    type, domElement;\n\n                /* suppress initialization in devices w/o proper contenteditable support */\n                if (!supportedContentEditable) {\n                    return;\n                }\n\n                Widget.fn.init.call(that, element, options);\n\n                that.options = deepExtend({}, that.options, options);\n\n                element = that.element;\n                domElement = element[0];\n                type = dom.name(domElement);\n\n                this._registerHandler(\n                    element.closest(\"form\"), \"submit\", that.update.bind(that, undefined$1)\n                );\n\n                toolbarContainer = that._setupType(element);\n\n                that._initToolbar(toolbarContainer);\n                that._setupHeight(type);\n                that._resizable();\n                that._initializeContentElement(that);\n                that._setupKeyboard();\n\n                that.clipboard = new editorNS.Clipboard(this);\n                that.undoRedoStack = new kendo.util.UndoRedoStack();\n\n                that._populateValue(options, domElement);\n\n                that._registerHandler(document, {\n                    \"mousedown\": function() { that._endTyping(); },\n                    \"mouseup\": function(e) { that._mouseup(e); }\n                });\n\n                that._initializeImmutables();\n\n                if (type == \"textarea\") {\n                    that._ariaLabel(that.wrapper.find(\"iframe\"));\n                }\n\n                that.toolbar.resize();\n\n                kendo.notify(that);\n\n                if (that._showWatermarkOverlay) {\n                    that._showWatermarkOverlay((that.wrapper && that.wrapper[0]) || that.element[0]);\n                }\n            },\n\n            events: [\n                \"select\",\n                \"change\",\n                \"execute\",\n                \"error\",\n                \"paste\",\n                \"keydown\",\n                \"keyup\"\n            ],\n\n            options: {\n                name: \"Editor\",\n                messages: messages,\n                placeholder: \"\",\n                nonce: \"\",\n                unsafeInline: true,\n                formats: {},\n                encoded: true,\n                domain: null,\n                resizable: false,\n                deserialization: {\n                    custom: null\n                },\n                serialization: {\n                    entities: true,\n                    semantic: true,\n                    scripts: false,\n                    optimizeTags: false,\n                    keepEOL: false\n                },\n                pasteCleanup: {\n                    all: false,\n                    css: false,\n                    custom: null,\n                    keepNewLines: false,\n                    msAllFormatting: false,\n                    msConvertLists: true,\n                    msTags: true,\n                    none: false,\n                    span: false\n                },\n                stylesheets: [],\n                dialogOptions: {\n                    modal: true, resizable: false, draggable: true,\n                    animation: false\n                },\n                imageBrowser: null,\n                fileBrowser: null,\n                navigateOnTab: false,\n                fontName: [\n                    { text: \"Arial\", value: \"Arial, Helvetica, sans-serif\" },\n                    { text: \"Courier New\", value: \"\\\"Courier New\\\", Courier, monospace\" },\n                    { text: \"Georgia\", value: \"Georgia, serif\" },\n                    { text: \"Impact\", value: \"Impact, Charcoal, sans-serif\" },\n                    { text: \"Lucida Console\", value: \"\\\"Lucida Console\\\", Monaco, monospace\" },\n                    { text: \"Tahoma\", value: \"Tahoma, Geneva, sans-serif\" },\n                    { text: \"Times New Roman\", value: \"\\\"Times New Roman\\\", Times, serif\" },\n                    { text: \"Trebuchet MS\", value: \"\\\"Trebuchet MS\\\", Helvetica, sans-serif\" },\n                    { text: \"Verdana\", value: \"Verdana, Geneva, sans-serif\" }\n                ],\n                fontSize: [\n                    { text: \"1 (8pt)\", value: \"xx-small\" },\n                    { text: \"2 (10pt)\", value: \"x-small\" },\n                    { text: \"3 (12pt)\", value: \"small\" },\n                    { text: \"4 (14pt)\", value: \"medium\" },\n                    { text: \"5 (18pt)\", value: \"large\" },\n                    { text: \"6 (24pt)\", value: \"x-large\" },\n                    { text: \"7 (36pt)\", value: \"xx-large\" }\n                ],\n                formatBlock: [\n                    { text: \"Paragraph\", value: \"p\" },\n                    { text: \"Quotation\", value: \"blockquote\" },\n                    { text: \"Heading 1\", value: \"h1\" },\n                    { text: \"Heading 2\", value: \"h2\" },\n                    { text: \"Heading 3\", value: \"h3\" },\n                    { text: \"Heading 4\", value: \"h4\" },\n                    { text: \"Heading 5\", value: \"h5\" },\n                    { text: \"Heading 6\", value: \"h6\" }\n                ],\n                tools: [\n                    \"formatting\",\n                    \"bold\",\n                    \"italic\",\n                    \"underline\",\n                    \"undo\",\n                    \"redo\",\n                    \"justifyLeft\",\n                    \"justifyCenter\",\n                    \"justifyRight\",\n                    \"copyFormat\",\n                    \"applyFormat\",\n                    \"insertUnorderedList\",\n                    \"insertOrderedList\",\n                    \"indent\",\n                    \"outdent\",\n                    \"createLink\",\n                    \"unlink\",\n                    \"insertImage\",\n                    \"tableProperties\",\n                    \"tableCellProperties\",\n                    \"createTable\",\n                    \"addRowAbove\",\n                    \"addRowBelow\",\n                    \"addColumnLeft\",\n                    \"addColumnRight\",\n                    \"deleteRow\",\n                    \"deleteColumn\",\n                    \"mergeCellsHorizontally\",\n                    \"mergeCellsVertically\",\n                    \"splitCellHorizontally\",\n                    \"splitCellVertically\",\n                    \"tableAlignLeft\",\n                    \"tableAlignCenter\",\n                    \"tableAlignRight\"\n                ]\n            },\n\n            destroy: function() {\n                var editor = this;\n\n                Widget.fn.destroy.call(this);\n\n                this._endTyping(true);\n\n                this._deregisterHandlers();\n\n                clearTimeout(this._spellCorrectTimeout);\n\n                this._focusOutside();\n\n                this.toolbar.destroy();\n\n                if (this.windowInstance) {\n                    this.windowInstance.destroy();\n                }\n                if (this.tablePopup) {\n                    this.tablePopup.destroy();\n                }\n\n                editor._destroyUploadWidget();\n\n                editor._destroyResizings();\n\n                kendo.destroy(this.wrapper);\n            },\n\n            setOptions: function(options) {\n                var editor = this;\n\n                Widget.fn.setOptions.call(editor, options);\n\n                if (options.tools) {\n                    this._setOptionsTools(options.tools);\n                }\n\n                this._initializePlaceholder();\n            },\n\n            createRange: function(document) {\n                return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n            },\n\n            encodedValue: function() {\n                return kendo.ui.editor.Dom.encode(this.value());\n            },\n\n            exec: function(name, params) {\n                var that = this;\n                var command = null;\n                var defaultTools = kendo.ui.Editor.defaultTools;\n                var range, tool, prevented;\n\n                if (!name) {\n                    throw new Error(\"kendoEditor.exec(): `name` parameter cannot be empty\");\n                }\n\n                if (that.body.getAttribute(\"contenteditable\") !== \"true\" &&\n                    name !== \"print\" &&\n                    name !== \"pdf\" &&\n                    name !== \"exportAs\") {\n                    return false;\n                }\n\n                if (!that.keyboard.isTypingInProgress()) {\n                    that._focusBody();\n                    that.selectRange(that._range || that.getRange());\n                }\n\n                tool = that.tools[name] || defaultTools[name];\n\n                if (!tool) {\n                    Object.keys(defaultTools).map(function (key) {\n                        if (key.toLowerCase() === name) {\n                            tool = defaultTools[key];\n                        }\n                    });\n                }\n\n                if (tool) {\n                    range = that.getRange();\n\n                    if (tool.command) {\n                        command = tool.command(extend({ range: range, body: that.body, immutables: !!that.immutables }, params));\n                    }\n\n                    prevented = that.trigger(\"execute\", { name: name, command: command });\n\n                    if (prevented) {\n                        return;\n                    }\n\n                    if (/^(undo|redo)$/i.test(name)) {\n                        that.undoRedoStack[name]();\n                    } else if (command) {\n                        that.execCommand(command);\n\n                        if (command.async) {\n                            command.change = that._selectionChange.bind(that);\n                            return;\n                        }\n                    }\n\n                    that._selectionChange();\n                }\n            },\n\n            execCommand: function(command) {\n                if (!command.managesUndoRedo) {\n                    this.undoRedoStack.push(command);\n                }\n\n                command.editor = this;\n                command.exec();\n            },\n\n            focus: function() {\n                this.restoreSelection();\n            },\n\n            getRange: function() {\n                var selection = this.getSelection(),\n                    range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(),\n                    doc = this.document;\n\n                if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                    range.setStart(this.body, 0);\n                    range.collapse(true);\n                }\n\n                return range;\n            },\n\n            getSelection: function() {\n                return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n            },\n\n            paste: function(html, options) {\n                this.focus();\n\n                var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                    range: this.getRange(),\n                    html: html\n                }, options));\n\n                command.editor = this;\n\n                command.exec();\n            },\n\n            refresh: function() {\n                var that = this;\n\n                if (that.textarea) {\n                    that._destroyResizings();\n                    // preserve updated value before re-initializing\n                    // don't use update() to prevent the editor from encoding the content too early\n                    var value = that.value();\n                    that.textarea.val(value);\n                    that.wrapper.find(\"iframe\").remove();\n                    that._initializeContentElement(that);\n                    that.value(value);\n                }\n            },\n\n            restoreSelection: function() {\n                this._focusBody();\n\n                if (this.selectionRestorePoint) {\n                    this.selectRange(this.selectionRestorePoint.toRange());\n                }\n            },\n\n            saveSelection: function(range) {\n                range = range || this.getRange();\n                var container = range.commonAncestorContainer,\n                    body = this.body;\n\n                if (container == body || $.contains(body, container)) {\n                    this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n                }\n            },\n\n            selectedHtml: function() {\n                return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n            },\n\n            selectRange: function(range) {\n                this._focusBody();\n                var selection = this.getSelection();\n                selection.removeAllRanges();\n                selection.addRange(range);\n                this.saveSelection(range);\n            },\n\n            state: function(toolName) {\n                var tool = kendo.ui.Editor.defaultTools[toolName];\n                var finder = tool && (tool.options.finder || tool.finder);\n                var RangeUtils = kendo.ui.editor.RangeUtils;\n                var range, textNodes;\n\n                if (finder) {\n                    range = this.getRange();\n\n                    textNodes = RangeUtils.textNodes(range);\n\n                    if (!textNodes.length && range.collapsed) {\n                        textNodes = [range.startContainer];\n                    }\n\n                    return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n                }\n\n                return false;\n            },\n\n            update: function(value) {\n                value = value || this.options.encoded ? this.encodedValue() : this.value();\n\n                if (this.textarea) {\n                    this.textarea.val(value);\n                    this._togglePlaceholder(!value.trim());\n                } else {\n                    this._oldValue = value;\n                }\n            },\n\n            value: function(html) {\n                var body = this.body,\n                    editorNS = kendo.ui.editor,\n                    options = this.options,\n                    currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n\n                if (html === undefined$1) {\n                    return currentHtml;\n                }\n\n                if (html == currentHtml) {\n                    return;\n                }\n\n                editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n\n                this.selectionRestorePoint = null;\n                this.update();\n                this._refreshTools();\n            },\n\n            _bindTools: function() {\n                var that = this,\n                    defaultTools = this.tools;\n\n                that.unbind(\"select\", that.toolbar.resize.bind(that.toolbar));\n\n                that.toolbar.element.find(\"[data-command]\")\n                    .filter(function (i, el) { return $(el).find(\"[data-command]\").length === 0; })\n                    .each(function (i, el) {\n                        var toolName = el.getAttribute(\"data-command\"),\n                            tool = defaultTools[toolName];\n\n                        if (tool && tool.initialize) {\n                            tool.initialize($(el), that);\n                        }\n                    });\n\n                that.bind(\"select\", that.toolbar.resize.bind(that.toolbar));\n            },\n\n            _blur: function() {\n                var textarea = this.textarea;\n                var old = textarea ? textarea.val() : this._oldValue;\n                var value = this.options.encoded ? this.encodedValue() : this.value();\n\n                this.update();\n\n                if (textarea) {\n                    textarea.trigger(\"blur\");\n                }\n\n                if (value != old) {\n                    this.trigger(\"change\");\n                    if (textarea) {\n                        textarea.trigger(\"change\");\n                    }\n                }\n            },\n\n            _containsRange: function(range) {\n                var dom = kendo.ui.editor.Dom;\n                var body = this.body;\n                return range && dom.isAncestorOrSelf(body, range.startContainer) &&\n                    dom.isAncestorOrSelf(body, range.endContainer);\n            },\n\n            _createContentElement: function(stylesheets) {\n                var editor = this;\n                var iframe, wnd, doc;\n                var textarea = editor.textarea;\n                var specifiedDomain = editor.options.domain;\n                var domain = specifiedDomain || document.domain;\n                var domainScript = \"\";\n                var src = 'javascript:\"\"';\n                var lang = \"\";\n\n                textarea.hide();\n\n                iframe = $(\"<iframe />\", { title: editor.options.messages.editAreaTitle, frameBorder: \"0\" })[0];\n\n                $(iframe)\n                    .css(\"display\", \"\")\n                    .addClass(\"k-content k-iframe\")\n                    .attr(\"tabindex\", textarea[0].tabIndex)\n                    .insertBefore(textarea);\n\n                // automatically relax same-origin policy if document.domain != location.hostname,\n                // or forcefully relax if options.domain is specified (for document.domain = document.domain scenario)\n                if (specifiedDomain || domain != location.hostname) {\n                    // relax same-origin policy\n                    domainScript = \"<script \" + (editor.options.nonce ? (\"nonce=\\\"\" + (editor.options.nonce) + \"\\\"\") : \"\") + \">document.domain=\\\"\" + domain + \"\\\"</script>\";\n                    src = \"javascript:document.write('\" + domainScript + \"')\";\n                    iframe.src = src;\n                }\n\n                if (!iframe.src) {\n                    iframe.src = \"\";\n                }\n\n                wnd = iframe.contentWindow || iframe;\n                doc = wnd.document || iframe.contentDocument;\n\n                $(iframe).one(\"load\", function() {\n                    editor._decorateFormatting(doc.body);\n                });\n\n                lang = document.getElementsByTagName(\"html\")[0].getAttribute(\"lang\") || DEFAULT_LANGUAGE;\n\n                doc.open();\n                doc.write(\n                    \"<!DOCTYPE html><html lang='\" + lang + \"'><head>\" +\n                    \"<meta charset='utf-8' />\" +\n                    \"<title>Kendo UI Editor content</title>\" +\n                    \"<style \" + (editor.options.nonce ? (\"nonce=\\\"\" + (editor.options.nonce) + \"\\\"\") : \"\") + \">\" +\n                        \"html{padding:0;margin:0;height:100%;min-height:100%;cursor:text;}\" +\n                        \"body{padding:0;margin:0;}\" +\n                        \"body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;\" +\n                        \"word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;\" +\n                        (kendo.support.isRtl(textarea) ? \"direction:rtl;\" : \"\") +\n                        (os.ios ? \"word-break:keep-all;\" : \"\") +\n                        (browser.edge || browser.chrome ? \"height:100%;\" : \"\") +\n                        \"}\" +\n                        \"h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}\" +\n                        \"p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}\" +\n                        \"ul,ol{padding-left:2.5em}\" +\n                        \"span{-ms-high-contrast-adjust:none;}\" +\n                        \"a{color:#00a}\" +\n                        \"code{font-size:1.23em}\" +\n                        \"telerik\\\\3Ascript{display: none;}\" +\n                        \".k-table{width:100%;border-spacing:0;margin: 0 0 1em;}\" +\n                        \".k-table td{min-width:1px;padding:.2em .3em;}\" +\n                        \".k-table,.k-table td{outline:0;border: 1px dotted #ccc;}\" +\n                        \".k-table th{outline:0;border: 1px dotted #999;}\" +\n                        \".k-table p{margin:0;padding:0;}\" +\n                        \".k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}\" +\n                        \".k-column-resize-handle {width: 100%; height: 100%;}\" +\n                        \".k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}\" +\n                        \".k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}\" +\n                        \".k-row-resize-handle {display: table; width: 100%; height: 100%;}\" +\n                        \".k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}\" +\n                        \".k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}\" +\n                        \".k-element-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}\" +\n                        \".k-element-resize-handle {width: 100%; height: 100%;}\" +\n                        \".k-element-resize-handle.k-resize-east{cursor:e-resize;}\" +\n                        \".k-element-resize-handle.k-resize-north{cursor:n-resize;}\" +\n                        \".k-element-resize-handle.k-resize-northeast{cursor:ne-resize;}\" +\n                        \".k-element-resize-handle.k-resize-northwest{cursor:nw-resize;}\" +\n                        \".k-element-resize-handle.k-resize-south{cursor:s-resize;}\" +\n                        \".k-element-resize-handle.k-resize-southeast{cursor:se-resize;}\" +\n                        \".k-element-resize-handle.k-resize-southwest{cursor:sw-resize;}\" +\n                        \".k-element-resize-handle.k-resize-west{cursor:w-resize;}\" +\n                        \".k-table.k-element-resizing{opacity:0.6;}\" +\n                        \".k-placeholder{color:grey}\" +\n                        \"k\\\\:script{display:none;}\" +\n                    \"</style>\" +\n                    domainScript +\n                    $.map(stylesheets, function(href) {\n                        return (\"<link rel='stylesheet' href='\" + href + \"' \" + (editor.options.nonce ? (\"nonce=\\\"\" + (editor.options.nonce) + \"\\\"\") : \"\") + \">\");\n                    }).join(\"\") +\n                    \"</head><body autocorrect='off' contenteditable='true'></body></html>\"\n                );\n                doc.close();\n\n                return wnd;\n            },\n\n            _deleteSavedRange: function() {\n                if (\"_range\" in this) {\n                    delete this._range;\n                }\n            },\n\n            _decorateFormatting: function(body) {\n                var formattingElement = this.toolbar.element.find(\"input[data-command=formatting]\"),\n                    dom = kendo.ui.editor.Dom,\n                    component, dataSource, items, i, tag, className, style;\n\n                if (formattingElement.length) {\n                    component = formattingElement.getKendoDropDownList();\n                    if (!component) {\n                        return;\n                    }\n                    dataSource = component.dataSource;\n                    items = dataSource.data();\n\n                    if (body) {\n                        component.list.css(\"background-color\", dom.getEffectiveBackground($(body)));\n                    }\n\n                    if (this.options.unsafeInline !== false) {\n\n                        for (i = 0; i < items.length; i++) {\n                            tag = items[i].tag || \"span\";\n                            className = items[i].className;\n\n                            style = dom.inlineStyle(body, tag, { className: className });\n                            style = style.replace(/\"/g, \"'\");\n\n                            items[i].style = style + \";display:inline-block\";\n                        }\n                    }\n\n                    dataSource.trigger(\"change\");\n                }\n            },\n\n            _deregisterHandlers: function() {\n                var handlers = this._handlers;\n\n                for (var i = 0; i < handlers.length; i++) {\n                    var h = handlers[i];\n                    h.element.off(h.type, h.handler);\n                }\n\n                this._handlers = [];\n            },\n\n            _destroyUploadWidget: function() {\n                var editor = this;\n                if (editor._uploadWidget) {\n                    editor._uploadWidget.destroy();\n                    editor._uploadWidget = null;\n                }\n            },\n\n            _endTyping: function() {\n                var keyboard = this.keyboard;\n\n                try {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                        this.saveSelection();\n                    }\n                } catch (e) { }\n            },\n\n            _focusBody: function() {\n                var body = this.body;\n                var iframe = this.wrapper && this.wrapper.find(\"iframe\")[0];\n                var documentElement = this.document.documentElement;\n                var activeElement = kendo._activeElement();\n                var scrollTop;\n\n\n                if (!iframe && body.scrollHeight > body.clientHeight) {\n                    scrollTop = body.scrollTop;\n                    body.focus();\n                    body.scrollTop = scrollTop;\n\n                } else if (activeElement != body && activeElement != iframe) {\n                    scrollTop = documentElement.scrollTop;\n                    body.focus();\n                    documentElement.scrollTop = scrollTop;\n                }\n            },\n\n            _focusOutside: function() {\n                // move focus outside the Editor, see https://github.com/telerik/kendo/issues/3673\n                if (kendo.support.browser.msie && this.textarea) {\n                    var tempInput = $(\"<input />\")\n                        .css({\n                            position: \"fixed\",\n                            left: \"1px\",\n                            top: \"1px\",\n                            width: \"1px\",\n                            height: \"1px\",\n                            \"font-size\": \"0\",\n                            border: \"0\",\n                            opacity: \"0\"\n                    })\n                    .appendTo(document.body).trigger(\"focus\");\n                    tempInput.trigger(\"blur\").remove();\n                }\n            },\n\n            _handleToolbarClick: function(e) {\n                var toolName = e.target.data(\"command\");\n\n                if (toolName && toolName !== \"createTable\") {\n                    this.exec(toolName);\n                }\n            },\n\n            _immutablesContext: function(range) {\n                var editorNS = kendo.ui.editor;\n\n                if (this.options.immutables) {\n                    if (range.collapsed) {\n                        return editorNS.Immutables.immutablesContext(range);\n                    } else {\n                        return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                    }\n                }\n            },\n\n            _initializeContentElement: function() {\n                var editor = this;\n                var doc;\n                var blurTrigger;\n                var mousedownTrigger;\n\n                if (editor.textarea) {\n                    editor.window = editor._createContentElement(editor.options.stylesheets);\n                    doc = editor.document = editor.window.contentDocument || editor.window.document;\n\n                    // Ensure that body exists as various Firefox plugins can cause a delay of the body creation\n                    // https://github.com/telerik/kendo-ui-core/issues/3515\n                    if (!doc.body) {\n                        var body = doc.createElement(\"body\");\n                        body.setAttribute(\"contenteditable\", \"true\");\n                        body.setAttribute(\"autocorrect\", \"off\");\n                        doc.getElementsByTagName(\"html\")[0].appendChild(body);\n\n                        var interval = setInterval(function() {\n                            if ($(editor.document).find(\"body\").length > 1) {\n                                $(editor.document).find(\"body\").last().remove();\n                                window.clearInterval(interval);\n                            }\n                        },10);\n                    }\n\n                    editor.body = doc.body;\n\n                    blurTrigger = editor.window;\n                    mousedownTrigger = doc;\n\n                    this._registerHandler(doc, \"mouseup\", this._mouseup.bind(this));\n                } else {\n                    editor.window = window;\n                    doc = editor.document = document;\n                    editor.body = editor.element[0];\n\n                    blurTrigger = editor.body;\n                    mousedownTrigger = editor.body;\n\n                    setTimeout(function () {\n                        editor._decorateFormatting(editor.body);\n                    });\n                }\n\n                this._registerHandler(blurTrigger, \"blur\", this._blur.bind(this));\n                editor._registerHandler(mousedownTrigger, \"down\", editor._mousedown.bind(editor));\n\n                try {\n                    doc.execCommand(\"enableInlineTableEditing\", null, false);\n                } catch (e) { }\n\n                if (kendo.support.touch) {\n                    this._registerHandler(doc, {\n                        \"keydown\": function() {\n                            // necessary in iOS when touch events are bound to the page\n                            if (kendo._activeElement() != doc.body) {\n                                editor.window.focus();\n                            }\n                        }\n                    });\n                }\n\n                this._initializePlaceholder();\n\n                this._spellCorrect(editor);\n\n                this._registerHandler(editor.document, {\n                    \"mouseover dragenter\": function(e) {\n                        var height = $(editor.body).height();\n                        var htmlHeight = $(editor.body.parentElement).height();\n\n                        if (htmlHeight > height && e.target.nodeName.toLowerCase() === \"html\") {\n                            editor._cachedHeight = \"\" + editor.body.style.height;\n                            editor.body.style.height = \"100%\";\n                        }\n                    },\n                    \"mouseout dragleave drop contextmenu\": function(e) {\n                        var restoreHeight = function() {\n                            if (editor._cachedHeight !== undefined$1 && e.target === editor.body) {\n                                editor.body.style.height = editor._cachedHeight;\n                                delete editor._cachedHeight;\n                            }\n                        };\n\n                        if (e.type === \"contextmenu\") {\n                            setTimeout(function() {\n                                restoreHeight();\n                            }, 10);\n                        } else {\n                            restoreHeight();\n                        }\n\n                    }\n                });\n\n                this._registerHandler(editor.body, {\n                    \"keydown\": function(e) {\n                        var range;\n\n                        if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute(\"contenteditable\") !== \"true\") {\n                            return false;\n                        }\n\n                        if (e.keyCode === keys.F10) {\n                            editor.toolbar.element.find(\"[tabindex=0]\").first().trigger(\"focus\");\n                            editor.toolbar.preventPopupHide = true;\n                            e.preventDefault();\n                            return;\n                        } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                            // skip bom nodes when navigating with arrows\n                            range = editor.getRange();\n                            var left = e.keyCode == keys.LEFT;\n                            var container = range[left ? \"startContainer\" : \"endContainer\"];\n                            var offset = range[left ? \"startOffset\" : \"endOffset\"];\n                            var direction = left ? -1 : 1;\n\n                            var next = offset + direction;\n                            var nextChar = left ? next : offset;\n\n                            if (container.nodeType == 3 && container.nodeValue[nextChar] == \"\\ufeff\") {\n                                range.setStart(container, next);\n                                range.collapse(true);\n                                editor.selectRange(range);\n                            }\n                        }\n\n                        var tools = editor.tools;\n                        var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                        var toolOptions = toolName ? tools[toolName].options : {};\n\n                        if (toolName && !toolOptions.keyPressCommand) {\n                            e.preventDefault();\n\n                            if (!/^(undo|redo)$/.test(toolName)) {\n                                editor.keyboard.endTyping(true);\n                            }\n\n                            editor.trigger(\"keydown\", e);\n                            editor.exec(toolName);\n                            editor._runPostContentKeyCommands(e);\n\n                            return false;\n                        }\n\n                        editor.keyboard.clearTimeout();\n\n                        editor.keyboard.keydown(e);\n                    },\n                    \"keypress\": function(e) {\n                        setTimeout(function() {\n                            editor._runPostContentKeyCommands(e);\n                            editor._showElementResizeHandles();\n                        }, 0);\n                    },\n                    \"keyup\": function(e) {\n                        var selectionCodes = [\n                           keys.BACKSPACE,\n                           keys.TAB,\n                           keys.PAGEUP,\n                           keys.PAGEDOWN,\n                           keys.END,\n                           keys.HOME,\n                           keys.LEFT,\n                           keys.UP,\n                           keys.RIGHT,\n                           keys.DOWN,\n                           keys.INSERT,\n                           keys.DELETE\n                        ];\n\n                        if ($.inArray(e.keyCode, selectionCodes) > -1 || (e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey)) {\n                            window.clearTimeout(this._refreshInterval);\n                            this._refreshInterval = window.setTimeout(function() {\n                                editor._selectionChange();\n                            }, REFRESH_INTERVAL);\n                        }\n\n                        editor.keyboard.keyup(e);\n                    },\n                    \"click\": function(e) {\n                        var dom = kendo.ui.editor.Dom, range;\n\n                        if (dom.name(e.target) === \"img\") {\n                            range = editor.createRange();\n                            range.selectNode(e.target);\n                            editor.selectRange(range);\n                        }\n                    },\n                    \"cut copy paste drop dragover\": function(e) {\n                        editor.clipboard[\"on\" + e.type](e);\n                    },\n                    \"focusin\": function() {\n                        if (editor.body.hasAttribute(\"contenteditable\")) {\n                            $(this).addClass(\"k-active\");\n                            // To be moved to the Editor\n                            editor._showWindow();\n                            editor._togglePlaceholder(false);\n                        }\n                    },\n                    \"focusout\": function() {\n                        setTimeout(function() {\n                            var active = kendo._activeElement();\n                            var body = editor.body;\n                            // All below to be moved to the Editor\n                            var toolbar = editor.toolbar;\n\n                            if (toolbar.options.popup) {\n                                var toolbarContainerElement = editor.windowInstance.element.get(0);\n                                if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                    toolbar.preventPopupHide = false;\n                                }\n                            }\n\n                            if (active != body && !$.contains(body, active) && !editor._toolbarFocused() && !toolbar.preventPopupHide && !$(active).hasClass(\"k-context-menu\")) {\n                                $(body).removeClass(\"k-active\");\n                                editor._hideWindow();\n                            }\n\n                            editor._togglePlaceholder(!editor.value().trim());\n                        }, 10);\n                    }\n                });\n\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeElementResizing();\n            },\n\n            _initializeImmutables: function() {\n                var that = this,\n                    editorNS = kendo.ui.editor;\n\n                if (that.options.immutables) {\n                    that.immutables = new editorNS.Immutables(that);\n                }\n            },\n\n            _initializePlaceholder: function() {\n                var that = this,\n                    placeholder = that.options.placeholder,\n                    style, $head;\n\n                if (!that.textarea || !placeholder) {\n                    return;\n                }\n\n                style = \"<style id='\" + PLACEHOLDER_TAG_ID + \"' \" + (that.options.nonce ? (\"nonce=\\\"\" + (that.options.nonce) + \"\\\"\") : \"\") + \" >.\" +\n                            PLACEHOLDER_CLASS + \":before { content: '\" + placeholder + \"'; }\" +\n                        \"</style>\";\n\n                $head = $(that.document.head);\n                $head.find(\"#\" + PLACEHOLDER_TAG_ID).remove();\n                $head.append(style);\n\n                that._togglePlaceholder(!that.value().trim());\n            },\n\n            _initToolbar: function(toolbarContainer) {\n                var assign;\n\n                var that = this,\n                    tools, defaults, toolbarOptions;\n\n                that.tools = [];\n                (assign = that._processToolbarItems(that.options.tools), tools = assign[0], defaults = assign[1]);\n                that._setNativeTools();\n\n                toolbarOptions = {\n                    tools: tools,\n                    defaultTools: defaults,\n                    parentMessages: that.options.messages,\n                    resizable: that.options.resizable && that.options.resizable.toolbar,\n                    toggle: that._handleToolbarClick.bind(this),\n                    click: that._handleToolbarClick.bind(this),\n                    navigateOnTab: that.options.navigateOnTab,\n                    evaluateTemplates: true\n                };\n\n                that.toolbar = new kendo.ui.ToolBar(toolbarContainer, toolbarOptions);\n\n                that._bindTools();\n                that.bind(\"select\", that._refreshTools.bind(that));\n\n                toolbarContainer.on(\"mousedown\" + NS, \".k-toolbar-tool\", function(e) {\n                    if (!$(e.target).is(\"input\")) {\n                        e.preventDefault();\n                    }\n                });\n\n                if (!that.textarea) {\n                    that._initToolbarWindow(toolbarContainer);\n                }\n            },\n\n            _initToolbarWindow: function(toolbarEl) {\n                var that = this;\n\n                this.windowInstance = toolbarEl\n                    .wrap(\"<div class='editorToolbarWindow k-editor-window' />\")\n                    .parent()\n                    .prepend(\"<span class='k-editortoolbar-dragHandle'>\" + kendo.ui.icon(\"handle-drag\") + \"</span>\")\n                    .kendoWindow({\n                        title: false,\n                        resizable: false,\n                        draggable: {\n                            dragHandle: \".k-editortoolbar-dragHandle\"\n                        },\n                        animation: {\n                            open: { effects: \"fade:in\" },\n                            close: { effects: \"fade:out\" }\n                        },\n                        minHeight: 42,\n                        visible: false,\n                        autoFocus: false,\n                        actions: [],\n                        dragend: function() {\n                            this._moved = true;\n                        }\n                    })\n                    .on(\"mousedown\", function(e) {\n                        if (!$(e.target).is(\".k-icon,.k-svg-icon,svg\")) {\n                            that.toolbar.preventPopupHide = true;\n                        }\n                    })\n                    .on(\"focusout\", function() {\n                        that.element.focusout();\n                    })\n                    .data(\"kendoWindow\");\n            },\n\n            _mousedown: function(e) {\n                var editor = this;\n                editor._selectionStarted = true;\n\n                if ($(editor.body).parents('.k-window').length) {\n                    e.stopPropagation();\n                }\n\n                // handle middle-click and ctrl-click on links\n                if (browser.gecko) {\n                    return;\n                }\n\n                var target = $(e.target).closest(\"a[href]\");\n\n                if ((e.which == 2 || (e.which == 1 && e.ctrlKey)) && target && target.is(\"a[href]\")) {\n                    window.open(target.attr(\"href\"), \"_new\");\n                }\n\n                if (e.target.tagName && e.target.tagName.toLowerCase() === \"html\") {\n                    setTimeout(function() {\n                        editor.body.focus();\n                    }, 0);\n                }\n            },\n\n            _mouseup: function(e) {\n                var that = this;\n\n                if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                    return;\n                }\n\n                if (that._selectionStarted) {\n                    setTimeout(function() {\n                        that._selectionChange();\n                    }, 1);\n                }\n            },\n\n            _populateValue: function(options, domElement) {\n                var that = this,\n                    editorNS = kendo.ui.editor,\n                    dom = editorNS.Dom,\n                    value, comments;\n\n                if (options && options.value) {\n                    value = options.value;\n                } else if (that.textarea) {\n                    // indented HTML introduces problematic ranges in IE\n                    value = domElement.value;\n\n                    if (!value.replace(/\\s/g, '').length) {\n                        value = value.replace(/\\s/g, '');\n                    }\n\n                    // revert encoding of value when content is fetched from cache\n                    if (that.options.encoded && domElement.defaultValue && domElement.defaultValue.trim().length) {\n                        value = domElement.defaultValue;\n                    }\n\n                    var deserializedRoot = editorNS.Serializer.htmlToDom(value, $(\"<div></div>\")[0], that.options.deserialization);\n                    comments = dom.getAllComments(deserializedRoot);\n                    value = EditorUtils.cacheComments(value, comments);\n                    value = value.replace(/[\\r\\n\\v\\f\\t ]+/ig, \" \");\n                    value = EditorUtils.retrieveComments(value, comments);\n                } else {\n                    value = domElement.innerHTML;\n                }\n\n                that.value(value || '\\ufeff');\n            },\n\n            _resetGroups: function(current) {\n                var result = {};\n\n                Object.keys(current).map(function (key) {\n                    result[key + \"_\"] = current[key];\n                });\n\n                return result;\n            },\n\n            _processToolbarItems: function(optionsTools) {\n                var assign, assign$1;\n\n                var flatDefaultTools = {},\n                    processedObject = {},\n                    tools = [],\n                    currentGroups = $.extend(true, {}, toolGroups),\n                    i, j, t, name, guidGroupName;\n\n                for (i = 0; i < optionsTools.length; i++) {\n                    t = optionsTools[i];\n\n                    if (Array.isArray(t)) {\n                        guidGroupName = kendo.guid();\n\n                        for (j = 0; j < t.length; j++) {\n                            (assign = this._processToolOptions(t[j], flatDefaultTools), flatDefaultTools = assign[0], name = assign[1]);\n\n                            if (!name) {\n                                continue;\n                            }\n\n                            flatDefaultTools[name].gr = guidGroupName;\n                        }\n                    } else {\n                        (assign$1 = this._processToolOptions(t, flatDefaultTools), flatDefaultTools = assign$1[0], name = assign$1[1]);\n\n                        if (!name) {\n                            continue;\n                        } else if (name === \"separator\") {\n                            currentGroups = this._resetGroups(currentGroups);\n                        }\n\n                        Object.keys(currentGroups).map(function (key) {\n                            var group = currentGroups[key];\n\n                            if (group.includes(name)) {\n                                flatDefaultTools[name].gr = key;\n                            }\n                        });\n                    }\n                }\n\n                Object.values(flatDefaultTools).map(function (tool) {\n                    var group = tool.gr;\n\n                    delete tool.gr;\n\n                    if (group === undefined$1) {\n                        processedObject[tool.name] = tool;\n                    } else {\n                        if (!processedObject[group]) {\n                            processedObject[group] = [];\n                        }\n\n                        processedObject[group].push(tool);\n                    }\n                });\n\n                tools = Object.values(processedObject).map(function (g) {\n                    var result;\n\n                    if (g.length) {\n                        result = g.map(function (to) { return to.name; });\n                    } else {\n                        result = g.name;\n                    }\n\n                    if (result.length === 1) {\n                        result = result[0];\n                    }\n\n                    return result;\n                });\n\n                return [tools, flatDefaultTools];\n            },\n\n            _processDefaultTool: function(tool, defaultTools) {\n                var name = tool.name,\n                    result = {},\n                    options;\n\n                if ($.isPlainObject(tool)) {\n                    if (name && defaultTools[name]) {\n                        // configured tool\n                        result = extend({}, defaultTools[name]);\n                        extend(result.options, tool);\n                    } else {\n                        // custom tool\n                        options = extend({ icon: \"gear\", type: \"button\" }, tool);\n\n                        if (!options.name) {\n                            options.name = \"custom\";\n                        }\n\n                        options.cssClass = \"k-\" + options.name;\n\n                        result = {\n                            options: options\n                        };\n\n                        name = options.name;\n                    }\n                } else if (defaultTools[tool]) {\n                    name = tool;\n                    result = defaultTools[name];\n                } else {\n                    return null;\n                }\n\n                this.tools[name] = result;\n\n                return result;\n            },\n\n            _processToolOptions: function(t, flatDefaultTools) {\n                var that = this,\n                    defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools),\n                    tool, name, view, shortcuts, options, uiOptions, icon, toolOptions, originalOptions, palette;\n\n                tool = this._processDefaultTool(t, defaultTools);\n\n                if (!tool) {\n                    return [flatDefaultTools, null];\n                }\n\n                options = tool.options;\n                name = options.name;\n                uiOptions = options.ui || {};\n                icon = EditorUtils.getToolCssClass(options.name, options.icon);\n\n                // We want to preserve any custom properties from the original tool object.\n                originalOptions = $.isPlainObject(t) ? $.extend({}, t) : {};\n                delete originalOptions.items;\n\n                toolOptions = $.extend({\n                    name: options.name,\n                    command: options.command,\n                    template: options.template,\n                    type: \"button\",\n                    icon: icon,\n                    showText: \"overflow\",\n                    showIcon: \"both\"\n                }, uiOptions, originalOptions);\n\n                if (options.tooltip) {\n                    if (!toolOptions.attributes) {\n                        toolOptions.attributes = {};\n                    }\n\n                    toolOptions.attributes.title = options.tooltip;\n                }\n                if (options.exec) {\n                    toolOptions.click = options.exec.bind(that);\n                    delete toolOptions.exec;\n                }\n\n                if (toolOptions.component === \"ColorPicker\") {\n                    if (options.palette !== undefined$1 || uiOptions.palette !== kendo.ui.editor.ColorTool.fn.options.palette) {\n                        palette = options.palette || kendo.ui.editor.ColorTool.fn.options.palette;\n                        view = options.palette !== undefined$1 && !options.palette ? \"gradient\" : \"palette\";\n                        toolOptions.componentOptions.palette = view === \"palette\" ? palette : undefined$1;\n                        toolOptions.componentOptions.views = [view];\n                        toolOptions.componentOptions.preview = view === \"gradient\";\n                        toolOptions.componentOptions.input = view === \"gradient\";\n                        toolOptions.componentOptions.buttons = view === \"gradient\";\n\n                        if (view === \"gradient\") {\n                            delete toolOptions.componentOptions.columns;\n                        }\n                    }\n                    if (view === \"palette\" && options.columns) {\n                        toolOptions.componentOptions.columns = options.columns;\n                    }\n                }\n\n                if (toolOptions.component === \"DropDownList\" || toolOptions.component === \"ComboBox\") {\n                    if (!toolOptions.componentOptions) {\n                        toolOptions.componentOptions = {};\n                    }\n\n                    if (!toolOptions.componentOptions.dataSource) {\n                        if (that.options[name] && Array.isArray(that.options[name])) {\n                            toolOptions.componentOptions.dataSource = that.options[name];\n                        } else {\n                            toolOptions.componentOptions.dataSource = options.items;\n                        }\n                    }\n                }\n                if (toolOptions.template) {\n                    delete toolOptions.type;\n                }\n\n                shortcuts = this._shortcutSequence(name);\n\n                if (shortcuts !== \"\") {\n                    if (!toolOptions.attributes) {\n                        toolOptions.attributes = {};\n                    }\n\n                    toolOptions.attributes[\"aria-keyshortcuts\"] = shortcuts;\n                }\n\n                flatDefaultTools[name] = toolOptions;\n\n                return [flatDefaultTools, name];\n            },\n\n            _refreshTools: function() {\n                var that = this,\n                    range = that.getRange(),\n                    editorNS = kendo.ui.editor,\n                    rangeUtils = editorNS.RangeUtils,\n                    nodes = rangeUtils.textNodes(range),\n                    immutables = that.options.immutables,\n                    immutablesContext = that._immutablesContext(range),\n                    defaultTools = that.tools;\n\n                nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n\n                if (!nodes.length) {\n                    nodes = [range.startContainer];\n                }\n\n                that.toolbar.element.find(\"[data-command]\")\n                    .filter(function (i, el) { return $(el).find(\"[data-command]\").length === 0; })\n                    .each(function() {\n                        var toolName = this.getAttribute(\"data-command\"),\n                            tool = defaultTools[toolName],\n                            ui;\n\n                        if (tool) {\n                            ui = $(this);\n\n                            if (tool.update) {\n                                tool.update(ui, nodes, that.undoRedoStack);\n                            }\n\n                            if (immutables) {\n                                that._updateImmutablesState(tool, ui, immutablesContext);\n                            }\n                        }\n                    });\n            },\n\n            _registerHandler: function(element, type, handler) {\n                var editor = this;\n                var NS = \".kendoEditor\";\n                var eventNames;\n                var i;\n\n                element = $(element);\n\n                if (!this._handlers) {\n                    this._handlers = [];\n                }\n\n                if (element.length) {\n                    if ($.isPlainObject(type)) {\n                        for (var t in type) {\n                            if (type.hasOwnProperty(t)) {\n                                this._registerHandler(element, t, type[t]);\n                            }\n                        }\n                    } else {\n                        //map the original event to handle interaction on mobile platforms\n                        eventNames = kendo.applyEventMap(type).split(\" \");\n\n                        for (i = 0; i < eventNames.length; i++) {\n                            editor._handlers.push({\n                                element: element,\n                                type: eventNames[i] + NS,\n                                handler: handler\n                            });\n\n                            element.on(eventNames[i] + NS, handler);\n                        }\n                    }\n                }\n            },\n\n            _runPostContentKeyCommands: function(e) {\n                var range = this.getRange();\n                var tools = this.keyboard.toolsFromShortcut(this.tools, e);\n\n                for (var i = 0; i < tools.length; i++) {\n                    var tool = tools[i];\n                    var o = tool.options;\n                    if (!o.keyPressCommand) {\n                        continue;\n                    }\n\n                    var cmd = new o.command({ range: range });\n                    if (cmd.changesContent()) {\n                        this.keyboard.endTyping(true);\n                        this.exec(tool.name);\n                    }\n                }\n            },\n\n            _selectionChange: function() {\n                this._selectionStarted = false;\n                this.saveSelection();\n                this.trigger(\"select\", {});\n            },\n\n            _setOptionsTools: function(optionsTools) {\n                var assign;\n\n                var that = this,\n                    toolbar = that.toolbar,\n                    toolbarContainer = toolbar.element,\n                    tools, defaults, toolbarOptions;\n\n                toolbar.destroy();\n                toolbarContainer.empty();\n\n                that.tools = [];\n                (assign = that._processToolbarItems(optionsTools), tools = assign[0], defaults = assign[1]);\n                that._setNativeTools();\n\n                toolbarOptions = {\n                    tools: tools,\n                    defaultTools: defaults,\n                    parentMessages: that.options.messages,\n                    resizable: that.options.resizable && that.options.resizable.toolbar,\n                    toggle: that._handleToolbarClick.bind(this),\n                    click: that._handleToolbarClick.bind(this)\n                };\n\n                that.toolbar = new kendo.ui.ToolBar(toolbarContainer, toolbarOptions);\n\n                that._bindTools();\n            },\n\n            _setNativeTools: function() {\n                var defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools),\n                    i;\n\n                for (i = 0; i < NATIVE_TOOLS.length; i++) {\n                    if (!this.tools[NATIVE_TOOLS[i]]) {\n                        this.tools[NATIVE_TOOLS[i]] = defaultTools[NATIVE_TOOLS[i]];\n                    }\n                }\n            },\n\n            _setupHeight: function(type) {\n                var that = this;\n\n                if (type == \"textarea\") {\n                    setTimeout(function() {\n                        var heightStyle = that.wrapper[0].style.height;\n                        var expectedHeight = parseInt(heightStyle, 10);\n                        var actualHeight = that.wrapper.height();\n                        if (heightStyle.indexOf(\"px\") > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                            that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                        }\n                    });\n                }\n            },\n\n            _setupKeyboard: function() {\n                var that = this,\n                    editorNS = kendo.ui.editor;\n\n                that.keyboard = new editorNS.Keyboard([\n                    new editorNS.BackspaceHandler(that),\n                    new editorNS.TypingHandler(that),\n                    new editorNS.SystemHandler(that),\n                    new editorNS.SelectAllHandler(that)\n                ]);\n            },\n\n            _setupType: function(element) {\n                var domElement = element[0],\n                    type = kendo.ui.editor.Dom.name(domElement),\n                    id = domElement.id,\n                    toolbarContainer;\n\n                if (type == \"textarea\") {\n                    this._wrapTextarea();\n\n                    toolbarContainer = this.wrapper.find(\".k-editor-toolbar\");\n\n                    if (!id) {\n                        id = kendo.guid();\n                        domElement.setAttribute(\"id\", id);\n                    }\n\n                    toolbarContainer.attr(\"aria-controls\", id);\n                } else {\n                    this.element.attr(\"contenteditable\", true).addClass(\"k-widget k-editor k-editor-inline\");\n                    toolbarContainer = $('<div class=\"k-editor-toolbar\"/>').insertBefore(element);\n                }\n\n                return toolbarContainer;\n            },\n\n            _shortcutSequence: function(name) {\n                var tool = kendo.ui.Editor.defaultTools[name],\n                    res = \"\",\n                    options;\n\n                if (!tool || !tool.options) {\n                    return res;\n                }\n\n                options = tool.options;\n\n                if (options.ctrl) {\n                    res += \"Ctrl+\";\n                }\n\n                if (options.shift) {\n                    res += \"Shift+\";\n                }\n\n                if (options.alt) {\n                    res += \"Alt+\";\n                }\n\n                if (options.key) {\n                    res += options.key;\n                }\n\n                return res;\n            },\n\n            _spellCorrect: function(editor) {\n                var beforeCorrection;\n                var falseTrigger = false;\n\n                this._registerHandler(editor.body, {\n                    \"contextmenu\": function() {\n                        editor.one(\"select\", function() {\n                            beforeCorrection = null;\n                        });\n\n                        editor._spellCorrectTimeout = setTimeout(function() {\n                            beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                            falseTrigger = false;\n                        }, 10);\n                    },\n                    \"input\": function() {\n                        if (!beforeCorrection) {\n                            return;\n                        }\n\n                        if (kendo.support.browser.mozilla && !falseTrigger) {\n                            falseTrigger = true;\n                            return;\n                        }\n\n                        kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                    }\n                });\n            },\n\n            _togglePlaceholder: function(show) {\n                var that = this,\n                    body = that.body,\n                    $body = $(body),\n                    placeholder = that.options.placeholder;\n\n                if (!that.textarea || !placeholder) {\n                    return;\n                }\n\n                $body.attr('aria-label', function() {\n                    return show ? placeholder : \"\";\n                });\n\n                $body.toggleClass(PLACEHOLDER_CLASS, show);\n            },\n\n            _toolbarFocused: function() {\n                var active = kendo._activeElement(),\n                    popup = this.windowInstance,\n                    overflowPopup = this.overflowPopup;\n\n                return (popup && $(active).closest(popup.wrapper).length) ||\n                    (overflowPopup && overflowPopup.visible());\n            },\n\n            _updateImmutablesState: function(tool, ui, immutablesContext) {\n                var toolbar = this.toolbar,\n                    name = tool.name,\n                    uiElement = ui.closest(\".k-toolbar-tool\"),\n                    trackImmutables = tool.options.trackImmutables,\n                    editorNS = kendo.ui.editor;\n\n                if (trackImmutables === undefined$1) {\n                    trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n                }\n\n                if (trackImmutables) {\n                    if (immutablesContext) {\n                        toolbar.hide(uiElement);\n                    } else {\n                        toolbar.show(uiElement);\n                    }\n                }\n            },\n\n            _wrapTextarea: function() {\n                var that = this,\n                    textarea = that.element,\n                    w = textarea[0].style.width,\n                    h = textarea[0].style.height,\n                    template = EditorUtils.editorWrapperTemplate(),\n                    editorWrap = $(template).insertBefore(textarea),\n                    editArea = editorWrap.find(\".k-editable-area\");\n\n                editorWrap.css({\n                    \"width\": w,\n                    \"height\": h\n                });\n\n                textarea.attr(\"autocomplete\", \"off\")\n                    .appendTo(editArea).addClass(\"k-content k-raw-content\").css(\"display\", \"none\");\n\n                that.textarea = textarea;\n                that.wrapper = editorWrap;\n            },\n\n            // Resizing methods\n            _resizable: function() {\n                var resizable = this.options.resizable;\n                var isResizable = $.isPlainObject(resizable) ? (resizable.content === undefined$1 || resizable.content === true) : resizable;\n\n                if (isResizable && this.textarea) {\n                    var draggableElement = $(\"<div class='k-resize-handle'>\" + kendo.ui.icon(\"caret-br\") + \"</div>\")\n                        .insertAfter(this.textarea);\n\n                    this.wrapper.addClass('k-resizable');\n\n                    this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                        draggableElement: draggableElement,\n                        start: function(e) {\n                            var editor = this.editor = $(e.currentTarget).closest(\".k-editor\");\n                            this.initialSize = editor.height();\n                            editor.find(\".k-editable-area\").last().append(\"<div class='k-overlay' />\");\n                        },\n                        resize: function(e) {\n                            var delta = e.y.initialDelta;\n                            var newSize = this.initialSize + delta;\n                            var min = this.options.min || 0;\n                            var max = this.options.max || Infinity;\n\n                            newSize = Math.min(max, Math.max(min, newSize));\n\n                            this.editor.height(newSize);\n                        },\n                        resizeend: function() {\n                            this.editor.find(\".k-overlay\").remove();\n                            this.editor = null;\n                        }\n                    }));\n\n                    if (kendo.support.mobileOS.ios) {\n                        var resizableWidget = this.wrapper.getKendoResizable();\n                        resizableWidget.draggable.options.ignore = SELECT_OVERLAY_SELECTOR;\n                    }\n                }\n            },\n\n            _destroyResizings: function() {\n                var editor = this;\n\n                editor._destroyElementResizing();\n                kendo.ui.editor.ElementResizingFactory.current.dispose(editor);\n                editor._destroyRowResizing();\n                kendo.ui.editor.RowResizing.dispose(editor);\n                editor._destroyColumnResizing();\n                kendo.ui.editor.ColumnResizing.dispose(editor);\n            },\n\n            _initializeElementResizing: function() {\n                var editor = this;\n\n                kendo.ui.editor.ElementResizingFactory.current.create(editor);\n\n                editor._showElementResizeHandlesProxy = editor._showElementResizeHandles.bind(editor);\n                editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n            },\n\n            _destroyElementResizing: function() {\n                var editor = this;\n                var elementResizing = editor.elementResizing;\n\n                if (elementResizing) {\n                    elementResizing.destroy();\n                    editor.elementResizing = null;\n                }\n\n                if (editor._showElementResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n                }\n            },\n\n            _showElementResizeHandles: function() {\n                var editor = this;\n                var elementResizing = editor.elementResizing;\n\n                if (elementResizing && elementResizing.element && elementResizing.element.parentNode) {\n                    elementResizing.showResizeHandles();\n                } else if (elementResizing && (!elementResizing.element || !elementResizing.element.parentNode)) {\n                    editor._destroyElementResizing();\n                }\n            },\n\n            _initializeColumnResizing: function() {\n                kendo.ui.editor.ColumnResizing.create(this);\n            },\n\n            _destroyColumnResizing: function() {\n                var editor = this;\n\n                if (editor.columnResizing) {\n                    editor.columnResizing.destroy();\n                    editor.columnResizing = null;\n                }\n            },\n\n            _initializeRowResizing: function() {\n                kendo.ui.editor.RowResizing.create(this);\n            },\n\n            _destroyRowResizing: function() {\n                var editor = this;\n\n                if (editor.rowResizing) {\n                    editor.rowResizing.destroy();\n                    editor.rowResizing = null;\n                }\n            },\n\n            // ToolBar Window methods\n            _getWindowWidth: function() {\n                var that = this,\n                    wrapper = that.windowInstance.wrapper,\n                    editorElement = that.element;\n\n                return outerWidth(editorElement) - parseInt(wrapper.css(\"border-left-width\"), 10) - parseInt(wrapper.css(\"border-right-width\"), 10);\n            },\n\n            _hideWindow: function() {\n                if (this.windowInstance) {\n                    this.windowInstance.close();\n                }\n            },\n\n            _overlapsWindow: function(box) {\n                var toolbarWrapper = this.windowInstance.wrapper,\n                    toolbarWrapperOffset = toolbarWrapper.offset(),\n                    toolbarWrapperLeft = toolbarWrapperOffset.left,\n                    toolbarWrapperTop = toolbarWrapperOffset.top,\n                    boxOffset = box.offset(),\n                    boxOffsetLeft = boxOffset.left,\n                    boxOffsetTop = boxOffset.top;\n\n                return !(boxOffsetLeft + box.width() < toolbarWrapperLeft ||\n                        boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() ||\n                        boxOffsetTop + box.height() < toolbarWrapperTop ||\n                        boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n            },\n\n            _showWindow: function() {\n                var that = this,\n                    windowInstance = that.windowInstance,\n                    wrapper, editorElement, editorOffset,\n                    browser = kendo.support.browser;\n\n                if (windowInstance) {\n                    wrapper = windowInstance.wrapper;\n                    editorElement = that.element;\n\n                    if (!wrapper.is(\":visible\") || !that.windowInstance.options.visible) {\n\n                        if (!wrapper[0].style.width) {\n                            wrapper.width(this._getWindowWidth());\n                        }\n\n                        // track content position when other parts of page change\n                        if (!windowInstance._moved) {\n                            editorOffset = editorElement.offset();\n                            wrapper.css({\n                                top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.windowInstance.element.css(\"padding-bottom\"), 10)),\n                                left: Math.max(0, parseInt(editorOffset.left, 10))\n                            });\n                        }\n\n                        if ((browser.msie || browser.edge) && that._overlapsWindow(editorElement)) {\n                            setTimeout(function() {\n                                windowInstance.open();\n                            }, 0);\n                        } else {\n                            windowInstance.open();\n                        }\n                    }\n                }\n            }\n        });\n\n        Editor.defaultTools = {};\n\n        kendo.ui.plugin(Editor);\n\n        var Tool = Class.extend({\n            init: function(options) {\n                this.options = options;\n            },\n\n            command: function(commandArguments) {\n                return new this.options.command(commandArguments);\n            },\n\n            update: $.noop\n        });\n\n        Tool.exec = function(editor, name, value) {\n            editor.exec(name, { value: value });\n        };\n\n        var UndoTool = Tool.extend({\n            command: $.noop,\n            update: function(ui, nodes, undoRedoStack) {\n                var that = this,\n                    name = that.options.name,\n                    toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\");\n\n                switch (name) {\n                    case \"undo\":\n                        toolbar.enable(ui, undoRedoStack.canUndo());\n                        break;\n                    case \"redo\":\n                        toolbar.enable(ui, undoRedoStack.canRedo());\n                        break;\n                    default:\n                        break;\n                }\n\n                ui.removeAttr(\"disabled\");\n            }\n        });\n\n        EditorUtils.registerTool(\"separator\", new Tool({ ui: { type: \"separator\" } }));\n        EditorUtils.registerTool(\"undo\", new UndoTool({ key: \"Z\", ctrl: true }));\n        EditorUtils.registerTool(\"redo\", new UndoTool({ key: \"Y\", ctrl: true }));\n\n        // Exports ================================================================\n\n        var emptyElementContent = '\\ufeff';\n        var emptyTableCellContent = emptyElementContent;\n\n        if (browser.msie || browser.edge) {\n            emptyTableCellContent = emptyElementContent = \"&nbsp;\";\n        }\n\n        extend(kendo.ui, {\n            editor: {\n                EditorUtils: EditorUtils,\n                Tool: Tool,\n                emptyElementContent: emptyElementContent,\n                emptyTableCellContent: emptyTableCellContent\n            }\n        });\n\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Editor.prototype);\n            Editor.prototype._drawPDF = function() {\n                return kendo.drawing.drawDOM(this.body, this.options.pdf);\n            };\n            Editor.prototype.saveAsPDF = function() {\n                var progress = new $.Deferred();\n                var promise = progress.promise();\n                var args = { promise: promise };\n\n                if (this.trigger(\"pdfExport\", args)) {\n                    return;\n                }\n\n                var options = this.options.pdf;\n\n                this._drawPDF(progress)\n                .then(function(root) {\n                    return kendo.drawing.exportPDF(root, options);\n                })\n                .done(function(dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: options.fileName,\n                        proxyURL: options.proxyURL,\n                        proxyTarget: options.proxyTarget,\n                        forceProxy: options.forceProxy\n                    });\n                    progress.resolve();\n                })\n                .fail(function(err) {\n                    progress.reject(err);\n                });\n\n                return promise;\n            };\n        }\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        map = $.map,\n        extend = $.extend,\n        browser = kendo.support.browser,\n        STYLE = \"style\",\n        FLOAT = \"float\",\n        CSSFLOAT = \"cssFloat\",\n        STYLEFLOAT = \"styleFloat\",\n        CLASS = \"class\",\n        KMARKER = \"k-marker\";\n\n    function makeMap(items) {\n        var obj = {},\n            i, len;\n\n        for (i = 0, len = items.length; i < len; i++) {\n            obj[items[i]] = true;\n        }\n        return obj;\n    }\n\n    var empty = makeMap(\"area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed\".split(\",\")),\n        nonListBlockElements = \"p,div,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption\".split(\",\"),\n        blockElements = nonListBlockElements.concat([\"ul\",\"ol\",\"li\"]),\n        block = makeMap(blockElements),\n        selfClosing = makeMap(\"area,base,br,col,command,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr\".split(\",\")),\n        inlineElements = \"span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby\".split(\",\"),\n        inline = makeMap(inlineElements),\n        fillAttrs = makeMap(\"checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected\".split(\",\")),\n        nonEmptyNonTextContentElements = [\"hgroup\",\"ol\",\"ul\",\"dl\",\"object\",\"video\",\"audio\",\"table\",\"colgroup\",\"tbody\",\"thead\",\"tfoot\",\"tr\",\"select\",\"optgroup\"];\n\n    var normalize = function(node) {\n        if (node.nodeType == 1) {\n            node.normalize();\n        }\n    };\n\n    if (browser.msie && browser.version >= 8) {\n        normalize = function(parent) {\n            if (parent.nodeType == 1 && parent.firstChild) {\n                var prev = parent.firstChild,\n                    node = prev;\n\n                normalize(node);\n\n                while (true) {\n                    node = node.nextSibling;\n\n                    if (!node) {\n                        break;\n                    }\n\n                    normalize(node);\n\n                    if (node.nodeType == 3 && prev.nodeType == 3) {\n                        node.nodeValue = prev.nodeValue + node.nodeValue;\n                        Dom.remove(prev);\n                    }\n\n                    prev = node;\n                }\n            }\n        };\n    }\n\n    var whitespace = /^\\s+$/,\n        emptyspace = /^[\\n\\r\\t]+$/,\n        rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i,\n        bom = /\\ufeff/g,\n        whitespaceOrBom = /^(\\s+|\\ufeff)$/,\n        persistedScrollTop,\n        cssAttributes =\n               (\"color,padding-left,padding-right,padding-top,padding-bottom,\" +\n                \"background-color,background-attachment,background-image,background-position,background-repeat,\" +\n                \"border-top-style,border-top-width,border-top-color,\" +\n                \"border-bottom-style,border-bottom-width,border-bottom-color,\" +\n                \"border-left-style,border-left-width,border-left-color,\" +\n                \"border-right-style,border-right-width,border-right-color,\" +\n                \"font-family,font-size,font-style,font-variant,font-weight,line-height\"\n               ).split(\",\"),\n        htmlRe = /[<>\\&]/g,\n        entityRe = /[\\u00A0-\\u2666<>\\&]/g,\n        entityTable = {\n                34: 'quot', 38: 'amp', 39: 'apos', 60: 'lt', 62: 'gt',\n                160: 'nbsp', 161: 'iexcl', 162: 'cent', 163: 'pound', 164: 'curren',\n                165: 'yen', 166: 'brvbar', 167: 'sect', 168: 'uml', 169: 'copy',\n                170: 'ordf', 171: 'laquo', 172: 'not', 173: 'shy', 174: 'reg',\n                175: 'macr', 176: 'deg', 177: 'plusmn', 178: 'sup2', 179: 'sup3',\n                180: 'acute', 181: 'micro', 182: 'para', 183: 'middot', 184: 'cedil',\n                185: 'sup1', 186: 'ordm', 187: 'raquo', 188: 'frac14', 189: 'frac12',\n                190: 'frac34', 191: 'iquest', 192: 'Agrave', 193: 'Aacute', 194: 'Acirc',\n                195: 'Atilde', 196: 'Auml', 197: 'Aring', 198: 'AElig', 199: 'Ccedil',\n                200: 'Egrave', 201: 'Eacute', 202: 'Ecirc', 203: 'Euml', 204: 'Igrave',\n                205: 'Iacute', 206: 'Icirc', 207: 'Iuml', 208: 'ETH', 209: 'Ntilde',\n                210: 'Ograve', 211: 'Oacute', 212: 'Ocirc', 213: 'Otilde', 214: 'Ouml',\n                215: 'times', 216: 'Oslash', 217: 'Ugrave', 218: 'Uacute', 219: 'Ucirc',\n                220: 'Uuml', 221: 'Yacute', 222: 'THORN', 223: 'szlig', 224: 'agrave',\n                225: 'aacute', 226: 'acirc', 227: 'atilde', 228: 'auml', 229: 'aring',\n                230: 'aelig', 231: 'ccedil', 232: 'egrave', 233: 'eacute', 234: 'ecirc',\n                235: 'euml', 236: 'igrave', 237: 'iacute', 238: 'icirc', 239: 'iuml',\n                240: 'eth', 241: 'ntilde', 242: 'ograve', 243: 'oacute', 244: 'ocirc',\n                245: 'otilde', 246: 'ouml', 247: 'divide', 248: 'oslash', 249: 'ugrave',\n                250: 'uacute', 251: 'ucirc', 252: 'uuml', 253: 'yacute', 254: 'thorn',\n                255: 'yuml', 402: 'fnof', 913: 'Alpha', 914: 'Beta', 915: 'Gamma',\n                916: 'Delta', 917: 'Epsilon', 918: 'Zeta', 919: 'Eta', 920: 'Theta',\n                921: 'Iota', 922: 'Kappa', 923: 'Lambda', 924: 'Mu', 925: 'Nu',\n                926: 'Xi', 927: 'Omicron', 928: 'Pi', 929: 'Rho', 931: 'Sigma',\n                932: 'Tau', 933: 'Upsilon', 934: 'Phi', 935: 'Chi', 936: 'Psi',\n                937: 'Omega', 945: 'alpha', 946: 'beta', 947: 'gamma', 948: 'delta',\n                949: 'epsilon', 950: 'zeta', 951: 'eta', 952: 'theta', 953: 'iota',\n                954: 'kappa', 955: 'lambda', 956: 'mu', 957: 'nu', 958: 'xi',\n                959: 'omicron', 960: 'pi', 961: 'rho', 962: 'sigmaf', 963: 'sigma',\n                964: 'tau', 965: 'upsilon', 966: 'phi', 967: 'chi', 968: 'psi',\n                969: 'omega', 977: 'thetasym', 978: 'upsih', 982: 'piv', 8226: 'bull',\n                8230: 'hellip', 8242: 'prime', 8243: 'Prime', 8254: 'oline', 8260: 'frasl',\n                8472: 'weierp', 8465: 'image', 8476: 'real', 8482: 'trade', 8501: 'alefsym',\n                8592: 'larr', 8593: 'uarr', 8594: 'rarr', 8595: 'darr', 8596: 'harr',\n                8629: 'crarr', 8656: 'lArr', 8657: 'uArr', 8658: 'rArr', 8659: 'dArr',\n                8660: 'hArr', 8704: 'forall', 8706: 'part', 8707: 'exist', 8709: 'empty',\n                8711: 'nabla', 8712: 'isin', 8713: 'notin', 8715: 'ni', 8719: 'prod',\n                8721: 'sum', 8722: 'minus', 8727: 'lowast', 8730: 'radic', 8733: 'prop',\n                8734: 'infin', 8736: 'ang', 8743: 'and', 8744: 'or', 8745: 'cap',\n                8746: 'cup', 8747: 'int', 8756: 'there4', 8764: 'sim', 8773: 'cong',\n                8776: 'asymp', 8800: 'ne', 8801: 'equiv', 8804: 'le', 8805: 'ge',\n                8834: 'sub', 8835: 'sup', 8836: 'nsub', 8838: 'sube', 8839: 'supe',\n                8853: 'oplus', 8855: 'otimes', 8869: 'perp', 8901: 'sdot', 8968: 'lceil',\n                8969: 'rceil', 8970: 'lfloor', 8971: 'rfloor', 9001: 'lang', 9002: 'rang',\n                9674: 'loz', 9824: 'spades', 9827: 'clubs', 9829: 'hearts', 9830: 'diams',\n                338: 'OElig', 339: 'oelig', 352: 'Scaron', 353: 'scaron', 376: 'Yuml',\n                710: 'circ', 732: 'tilde', 8194: 'ensp', 8195: 'emsp', 8201: 'thinsp',\n                8204: 'zwnj', 8205: 'zwj', 8206: 'lrm', 8207: 'rlm', 8211: 'ndash',\n                8212: 'mdash', 8216: 'lsquo', 8217: 'rsquo', 8218: 'sbquo', 8220: 'ldquo',\n                8221: 'rdquo', 8222: 'bdquo', 8224: 'dagger', 8225: 'Dagger', 8240: 'permil',\n                8249: 'lsaquo', 8250: 'rsaquo', 8364: 'euro'\n            };\n\n    var Dom = {\n        block: block,\n        inline: inline,\n\n        findNodeIndex: function(node, skipText) {\n            var i = 0;\n\n            if (!node) {\n                return -1;\n            }\n\n            while (true) {\n                node = node.previousSibling;\n\n                if (!node) {\n                    break;\n                }\n\n                if (!(skipText && node.nodeType == 3)) {\n                    i++;\n                }\n            }\n\n            return i;\n        },\n\n        isDataNode: function(node) {\n            return node && node.nodeValue !== null && node.data !== null;\n        },\n\n        isAncestorOf: function(parent, node) {\n            try {\n                return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n            } catch (e) {\n                return false;\n            }\n        },\n\n        isAncestorOrSelf: function(root, node) {\n            return Dom.isAncestorOf(root, node) || root == node;\n        },\n\n        findClosestAncestor: function(root, node) {\n            if (Dom.isAncestorOf(root, node)) {\n                while (node && node.parentNode != root) {\n                    node = node.parentNode;\n                }\n            }\n\n            return node;\n        },\n\n        getAllComments: function(rootElem) {\n            var comments = [];\n            // Fourth argument, which is actually obsolete according to the DOM4 standard, is required in IE 11\n            var iterator = document.createNodeIterator(rootElem,\n                NodeFilter.SHOW_COMMENT,\n                function() {\n                    return NodeFilter.FILTER_ACCEPT;\n                }, false);\n\n            var curNode = iterator.nextNode();\n            while (curNode) {\n                comments.push(curNode.nodeValue);\n                curNode = iterator.nextNode();\n            }\n            return comments;\n        },\n\n        getNodeLength: function(node) {\n            return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n        },\n\n        splitDataNode: function(node, offset) {\n            var newNode = node.cloneNode(false);\n            var denormalizedText = \"\";\n            var iterator = node.nextSibling;\n            var temp;\n\n            while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n                denormalizedText += iterator.nodeValue;\n                temp = iterator;\n                iterator = iterator.nextSibling;\n                Dom.remove(temp);\n            }\n\n            node.deleteData(offset, node.length);\n            newNode.deleteData(0, offset);\n            newNode.nodeValue += denormalizedText;\n            Dom.insertAfter(newNode, node);\n        },\n\n        attrEquals: function(node, attributes) {\n            for (var key in attributes) {\n                var value = node[key];\n\n                if (key == FLOAT) {\n                    value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n                }\n\n                if (typeof value == \"object\") {\n                    if (!Dom.attrEquals(value, attributes[key])) {\n                        return false;\n                    }\n                } else if (value != attributes[key]) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        blockParentOrBody: function(node) {\n            return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n        },\n\n        blockParents: function(nodes) {\n            var blocks = [],\n                i, len;\n\n            for (i = 0, len = nodes.length; i < len; i++) {\n                var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n                if (block && $.inArray(block, blocks) < 0) {\n                    blocks.push(block);\n                }\n            }\n\n            return blocks;\n        },\n\n        windowFromDocument: function(document) {\n            return document.defaultView || document.parentWindow;\n        },\n\n        normalize: normalize,\n        blockElements: blockElements,\n        nonListBlockElements: nonListBlockElements,\n        inlineElements: inlineElements,\n        empty: empty,\n        fillAttrs: fillAttrs,\n        nodeTypes: {\n            ELEMENT_NODE: 1,\n            ATTRIBUTE_NODE: 2,\n            TEXT_NODE: 3,\n            CDATA_SECTION_NODE: 4,\n            ENTITY_REFERENCE_NODE: 5,\n            ENTITY_NODE: 6,\n            PROCESSING_INSTRUCTION_NODE: 7,\n            COMMENT_NODE: 8,\n            DOCUMENT_NODE: 9,\n            DOCUMENT_TYPE_NODE: 10,\n            DOCUMENT_FRAGMENT_NODE: 11,\n            NOTATION_NODE: 12\n        },\n\n        toHex: function(color) {\n            var matches = rgb.exec(color);\n\n            if (!matches) {\n                return color;\n            }\n\n            return \"#\" + map(matches.slice(1), function(x) {\n                x = parseInt(x, 10).toString(16);\n                return x.length > 1 ? x : \"0\" + x;\n            }).join(\"\");\n        },\n\n        encode: function(value, options) {\n            var encodableChars = (!options || options.entities) ? entityRe : htmlRe;\n            return value.replace(encodableChars, function(c) {\n                var charCode = c.charCodeAt(0);\n                var entity = entityTable[charCode];\n                return entity ? '&' + entity + ';' : c;\n            });\n        },\n        isBom: function(node) {\n            return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n        },\n        stripBom: function(text) {\n            return (text || \"\").replace(bom, \"\");\n        },\n\n        stripBomNode: function(node) {\n            if (Dom.isBom(node)) {\n                node.parentNode.removeChild(node);\n            }\n        },\n\n        insignificant: function(node) {\n            var attr = node.attributes;\n\n            return node.className == \"k-marker\" || (Dom.is(node, 'br') && (node.className == \"k-br\" || attr._moz_dirty || attr._moz_editor_bogus_node)) || (Dom.is(node, 'span') && (node.className == \"k-br\"));\n        },\n        tableCell: function(node) {\n            return Dom.is(node, \"td\") || Dom.is(node, \"th\");\n        },\n        significantNodes: function(nodes) {\n            return $.grep(nodes, function(child) {\n                var name = Dom.name(child);\n\n                if (name == 'br') {\n                    return false;\n                } else if (Dom.insignificant(child)) {\n                    return false;\n                } else if (Dom.emptyTextNode(child)) {\n                    return false;\n                } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                    return false;\n                }\n\n                return true;\n            });\n        },\n\n        emptyTextNode: function(node) {\n            return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n        },\n\n        emptyNode: function(node) {\n            return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n        },\n\n        name: function(node) {\n            return node.nodeName.toLowerCase();\n        },\n\n        significantChildNodes: function(node) {\n            return $.grep(node.childNodes, function(child) {\n                return child.nodeType != 3 || !Dom.isWhitespace(child);\n            });\n        },\n\n        lastTextNode: function(node) {\n            var result = null;\n\n            if (node.nodeType == 3) {\n                return node;\n            }\n\n            for (var child = node.lastChild; child; child = child.previousSibling) {\n                result = Dom.lastTextNode(child);\n\n                if (result) {\n                    return result;\n                }\n            }\n\n            return result;\n        },\n\n        is: function(node, nodeName) {\n            return node && Dom.name(node) == nodeName;\n        },\n\n        isMarker: function(node) {\n            return node.className == KMARKER;\n        },\n\n        isWhitespace: function(node) {\n            return whitespace.test(node.nodeValue);\n        },\n\n        allowsTextContent: function(node) {\n            var result = true;\n\n            nonEmptyNonTextContentElements.every(function(name) {\n                if (Dom.is(node, name)) {\n                    result = false;\n                    return false;\n                } else {\n                    return true;\n                }\n            });\n\n            return result;\n        },\n\n        allWhitespaceContent: function(node) {\n            var child = node.firstChild;\n            while (child && Dom.isWhitespace(child)) {\n                child = child.nextSibling;\n            }\n\n            return !child;\n        },\n\n        isEmptyspace: function(node) {\n            return emptyspace.test(node.nodeValue);\n        },\n\n        htmlIndentSpace: function(node) {\n            if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n                return false;\n            }\n\n            if (emptyspace.test(node.nodeValue)) {\n                return true;\n            }\n\n            var sibling = function(el, direction) {\n                while (el[direction]) {\n                    el = el[direction];\n                    if (Dom.significantNodes([el]).length > 0) {\n                        return el;\n                    }\n                }\n            };\n\n            var parent = node.parentNode;\n            var prev = sibling(node, \"previousSibling\");\n            var next = sibling(node, \"nextSibling\");\n\n            if (bom.test(node.nodeValue)) {\n                return !!(prev || next);\n            }\n\n            if ($(parent).is(\"tr,tbody,thead,tfoot,table,ol,ul\")) {\n                return true;\n            }\n\n            if (Dom.isBlock(parent) || Dom.is(parent, \"body\")) {\n                var isPrevBlock = prev && Dom.isBlock(prev);\n                var isNextBlock = next && Dom.isBlock(next);\n                if ((!next && isPrevBlock) || (!prev && isNextBlock) || (isPrevBlock && isNextBlock)) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        isBlock: function(node) {\n            return block[Dom.name(node)];\n        },\n\n        isSelfClosing: function(node) {\n            return selfClosing[Dom.name(node)];\n        },\n\n        isEmpty: function(node) {\n            return empty[Dom.name(node)];\n        },\n\n        isInline: function(node) {\n            return inline[Dom.name(node)];\n        },\n\n        isImg: function(node) {\n            return Dom.name(node) == \"img\";\n        },\n\n        isBr: function(node) {\n            return Dom.name(node) == \"br\";\n        },\n\n        list: function(node) {\n            var name = node ? Dom.name(node) : \"\";\n            return name == \"ul\" || name == \"ol\" || name == \"dl\";\n        },\n\n        scrollContainer: function(doc) {\n            var wnd = Dom.windowFromDocument(doc),\n                scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n\n            if (scrollContainer.compatMode == 'BackCompat') {\n                scrollContainer = scrollContainer.body;\n            } else {\n                scrollContainer = scrollContainer.scrollingElement || scrollContainer.documentElement;\n            }\n\n            return scrollContainer;\n        },\n\n        scrollTo: function(node, toStart) {\n            var doc = node.ownerDocument;\n            var wnd = Dom.windowFromDocument(doc);\n            var windowHeight = wnd.innerHeight;\n            var scrollContainer = Dom.scrollContainer(doc);\n            var element, elementTop, elementHeight, marker;\n\n            if (Dom.isDataNode(node)) {\n                if (toStart) {\n                    marker = Dom.create(doc, \"span\", { \"innerHTML\": \"&#xfeff;\" });\n                    Dom.insertBefore(marker, node);\n                    element = $(marker);\n                } else {\n                    element = $(node.parentNode);\n                }\n            } else {\n                element = $(node);\n            }\n\n            elementTop = element.offset().top;\n            elementHeight = element[0].offsetHeight;\n\n            if (toStart || !elementHeight) {\n                elementHeight = parseInt(element.css(\"line-height\"), 10) ||\n                                Math.ceil(1.2 * parseInt(element.css(\"font-size\"), 10)) ||\n                                15;\n            }\n\n            if (marker) {\n                Dom.remove(marker);\n            }\n\n            if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n                scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n            }\n        },\n\n        persistScrollTop: function(doc) {\n            persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n        },\n\n        offset: function(target, offsetParent) {\n            var result = { top: target.offsetTop, left: target.offsetLeft };\n            var parent = target.offsetParent;\n\n            while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n                result.top += parent.offsetTop;\n                result.left += parent.offsetLeft;\n                parent = parent.offsetParent;\n            }\n\n            return result;\n        },\n\n        restoreScrollTop: function(doc) {\n            if (typeof persistedScrollTop == \"number\") {\n                Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n                persistedScrollTop = undefined;\n            }\n        },\n\n        insertAt: function(parent, newElement, position) {\n            parent.insertBefore(newElement, parent.childNodes[position] || null);\n        },\n\n        insertBefore: function(newElement, referenceElement) {\n            if (referenceElement.parentNode) {\n                return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n            } else {\n                return referenceElement;\n            }\n        },\n\n        insertAfter: function(newElement, referenceElement) {\n            return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n        },\n\n        remove: function(node) {\n            if (node.parentNode) {\n                node.parentNode.removeChild(node);\n            }\n        },\n\n        removeChildren: function(node) {\n            while (node.firstChild) {\n                node.removeChild(node.firstChild);\n            }\n        },\n\n        removeTextSiblings: function(node) {\n            var parentNode = node.parentNode;\n\n            while (node.nextSibling && node.nextSibling.nodeType == 3) {\n                parentNode.removeChild(node.nextSibling);\n            }\n\n            while (node.previousSibling && node.previousSibling.nodeType == 3) {\n                parentNode.removeChild(node.previousSibling);\n            }\n        },\n\n        trim: function(parent) {\n            for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n                var node = parent.childNodes[i];\n                if (Dom.isDataNode(node)) {\n                    if (!Dom.stripBom(node.nodeValue).length) {\n                        Dom.remove(node);\n                    }\n                } else if (node.className != KMARKER) {\n                    Dom.trim(node);\n\n                    if ((!Dom.isEmpty(node) && node.childNodes.length === 0) ||\n                        (Dom.isBlock(node) && Dom.allWhitespaceContent(node))) {\n                        Dom.remove(node);\n                    }\n                }\n            }\n\n            return parent;\n        },\n\n        closest: function(node, tags) {\n            if (typeof tags === \"string\") {\n                tags = [tags];\n            }\n\n            while (node && tags.indexOf(Dom.name(node)) < 0) {\n                node = node.parentNode;\n            }\n\n            return node;\n        },\n\n        closestBy: function(node, condition, rootCondition) {\n            while (node && !condition(node)) {\n                if (rootCondition && rootCondition(node)) {\n                    return null;\n                }\n                node = node.parentNode;\n            }\n            return node;\n        },\n\n        sibling: function(node, direction) {\n            do {\n                node = node[direction];\n            } while (node && node.nodeType != 1);\n\n            return node;\n        },\n\n        next: function(node) {\n            return Dom.sibling(node, \"nextSibling\");\n        },\n\n        prev: function(node) {\n            return Dom.sibling(node, \"previousSibling\");\n        },\n\n        parentOfType: function(node, tags) {\n            do {\n                node = node.parentNode;\n            } while (node && !(Dom.ofType(node, tags)));\n\n            return node;\n        },\n\n        ofType: function(node, tags) {\n            return $.inArray(Dom.name(node), tags) >= 0;\n        },\n\n        changeTag: function(referenceElement, tagName, skipAttributes) {\n            var newElement = Dom.create(referenceElement.ownerDocument, tagName),\n                attributes = referenceElement.attributes,\n                i, len, name, value, attribute;\n\n            if (!skipAttributes) {\n                for (i = 0, len = attributes.length; i < len; i++) {\n                    attribute = attributes[i];\n                    if (attribute.specified) {\n                        // IE < 8 cannot set class or style via setAttribute\n                        name = attribute.nodeName;\n                        value = attribute.nodeValue;\n                        if (name == CLASS) {\n                            newElement.className = value;\n                        } else if (name == STYLE) {\n                            newElement.style.cssText = referenceElement.style.cssText;\n                        } else {\n                            newElement.setAttribute(name, value);\n                        }\n                    }\n                }\n            }\n\n            while (referenceElement.firstChild) {\n                newElement.appendChild(referenceElement.firstChild);\n            }\n\n            Dom.insertBefore(newElement, referenceElement);\n            Dom.remove(referenceElement);\n            return newElement;\n        },\n\n        editableParent: function(node) {\n            while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n                node = node.parentNode;\n            }\n\n            return node;\n        },\n\n        wrap: function(node, wrapper) {\n            Dom.insertBefore(wrapper, node);\n            wrapper.appendChild(node);\n            return wrapper;\n        },\n\n        unwrap: function(node) {\n            var parent = node.parentNode;\n            while (node.firstChild) {\n                parent.insertBefore(node.firstChild, node);\n            }\n\n            parent.removeChild(node);\n        },\n\n        wrapper: function(node) {\n            var wrapper = Dom.closestBy(node, function(el) {\n                return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n            });\n\n            return $(wrapper).is(\"body,.k-editor\") ? undefined : wrapper;\n        },\n\n        isChildOfBaseContainer: function(node) {\n            return $(node).parent().is(\"body,.k-editor\");\n        },\n\n        create: function(document, tagName, attributes) {\n            return Dom.attr(document.createElement(tagName), attributes);\n        },\n\n        createEmptyNode: function(document, tagName, attributes) {\n            var node = Dom.attr(document.createElement(tagName), attributes);\n            node.innerHTML = \"\\ufeff\";\n            return node;\n        },\n\n        attr: function(element, attributes) {\n            attributes = extend({}, attributes);\n\n            if (attributes && STYLE in attributes) {\n                Dom.style(element, attributes.style);\n                delete attributes.style;\n            }\n\n            for (var attr in attributes) {\n                if (attributes[attr] === null) {\n                    element.removeAttribute(attr);\n                    delete attributes[attr];\n                } else if (attr == \"className\") {\n                    element[attr] = attributes[attr];\n                }\n            }\n\n            return extend(element, attributes);\n        },\n\n        mergeAttributes: function(origin, target, traverseCss) {\n            if (!origin.attributes.length) {\n                return;\n            }\n\n            $.each(origin.attributes, function() {\n                if (this.name !== \"contenteditable\" && (!traverseCss || this.name !== STYLE)) {\n                    $(target).attr(this.name, this.value);\n                }\n\n                if (traverseCss && this.name === STYLE) {\n                    $.each(origin.style, function() {\n                        target.style[this] = origin.style[this];\n                    });\n                }\n            });\n        },\n\n        style: function(node, value) {\n            $(node).css(value || {});\n        },\n\n        unstyle: function(node, value) {\n            for (var key in value) {\n                if (key == FLOAT) {\n                    key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n                }\n\n                node.style[key] = \"\";\n            }\n\n            if (node.style.cssText === \"\") {\n                node.removeAttribute(STYLE);\n            }\n        },\n\n        inlineStyle: function(body, name, attributes) {\n            var span = $(Dom.create(body.ownerDocument, name, attributes)),\n                style;\n\n            body.appendChild(span[0]);\n\n            style = map(cssAttributes, function(value) {\n                if (browser.msie && value == \"line-height\" && span.css(value) == \"1px\") {\n                    return \"line-height:1.5\";\n                } else {\n                    return value + \":\" + span.css(value);\n                }\n            }).join(\";\");\n\n            span.remove();\n\n            return style;\n        },\n\n        getEffectiveBackground: function(element) {\n            var backgroundStyle = element.css(\"background-color\") || \"\";\n\n            if (backgroundStyle.indexOf(\"rgba(0, 0, 0, 0\") < 0 && backgroundStyle !== \"transparent\") {\n                return backgroundStyle;\n            } else if (element[0].tagName.toLowerCase() === \"html\") {\n                return \"Window\";\n            } else {\n                return Dom.getEffectiveBackground(element.parent());\n            }\n        },\n\n        innerText: function(node) {\n            var text = node.innerHTML;\n            text = text.replace(/<!--(.|\\s)*?-->/gi, \"\");\n            text = text.replace(/<\\/?[^>]+?\\/?>/gm, \"\");\n\n            return text;\n        },\n\n        removeClass: function(node, classNames) {\n            var className = \" \" + node.className + \" \",\n                classes = classNames.split(\" \"),\n                i, len;\n\n            for (i = 0, len = classes.length; i < len; i++) {\n                className = className.replace(\" \" + classes[i] + \" \", \" \");\n            }\n\n            className = kendo.trim(className);\n\n            if (className.length) {\n                node.className = className;\n            } else {\n                node.removeAttribute(CLASS);\n            }\n        },\n\n        commonAncestor: function() {\n            var arguments$1 = arguments;\n\n            var count = arguments.length,\n                paths = [],\n                minPathLength = Infinity,\n                output = null,\n                i, ancestors, node, first, j;\n\n            if (!count) {\n                return null;\n            }\n\n            if (count == 1) {\n                return arguments[0];\n            }\n\n            for (i = 0; i < count; i++) {\n                ancestors = [];\n                node = arguments$1[i];\n                while (node) {\n                    ancestors.push(node);\n                    node = node.parentNode;\n                }\n                paths.push(ancestors.reverse());\n                minPathLength = Math.min(minPathLength, ancestors.length);\n            }\n\n            if (count == 1) {\n                return paths[0][0];\n            }\n\n            for (i = 0; i < minPathLength; i++) {\n                first = paths[0][i];\n\n                for (j = 1; j < count; j++) {\n                    if (first != paths[j][i]) {\n                        return output;\n                    }\n                }\n\n                output = first;\n            }\n            return output;\n        },\n\n        closestSplittableParent: function(nodes) {\n            var result;\n\n            if (nodes.length == 1) {\n                result = Dom.parentOfType(nodes[0], [\"ul\",\"ol\"]);\n            } else {\n                result = Dom.commonAncestor.apply(null, nodes);\n            }\n\n            if (!result) {\n                result = Dom.parentOfType(nodes[0], [\"p\", \"td\"]) || nodes[0].ownerDocument.body;\n            }\n\n            if (Dom.isInline(result)) {\n                result = Dom.blockParentOrBody(result);\n            }\n\n            var editableParents = map(nodes, Dom.editableParent);\n            var editableAncestor = Dom.commonAncestor(editableParents)[0];\n\n            if ($.contains(result, editableAncestor)) {\n                result = editableAncestor;\n            }\n\n            return result;\n        },\n\n        closestEditable: function(node, types) {\n            var closest;\n            var editable = Dom.editableParent(node);\n\n            if (Dom.ofType(node, types)) {\n                closest = node;\n            } else {\n                closest = Dom.parentOfType(node, types);\n            }\n\n            if (closest && editable && $.contains(closest, editable)) {\n                closest = editable;\n            } else if (!closest && editable) {\n                closest = editable;\n            }\n\n            return closest;\n        },\n\n        closestEditableOfType: function(node, types) {\n            var editable = Dom.closestEditable(node, types);\n\n            if (editable && Dom.ofType(editable, types) && !$(editable).is(\".k-editor\")) {\n                return editable;\n            }\n        },\n\n        filter: function(tagName, nodes, invert) {\n            var filterFn = function(node) {\n                return Dom.name(node) == tagName;\n            };\n\n            return Dom.filterBy(nodes, filterFn, invert);\n        },\n\n        filterBy: function(nodes, condition, invert) {\n            var i = 0;\n            var len = nodes.length;\n            var result = [];\n            var match;\n\n            for (; i < len; i++) {\n                match = condition(nodes[i]);\n                if ((match && !invert) || (!match && invert)) {\n                    result.push(nodes[i]);\n                }\n            }\n\n            return result;\n        },\n\n        ensureTrailingBreaks: function(node) {\n            var elements = $(node).find(\"p,td,th\");\n            var length = elements.length;\n            var i = 0;\n\n            if (length) {\n                for (; i < length; i++) {\n                    Dom.ensureTrailingBreak(elements[i]);\n                }\n            } else {\n                Dom.ensureTrailingBreak(node);\n            }\n        },\n\n        removeTrailingBreak: function(node) {\n            $(node).find(\"br[type=_moz],.k-br\").remove();\n        },\n\n        ensureTrailingBreak: function(node) {\n            Dom.removeTrailingBreak(node);\n\n            var lastChild = node.lastChild;\n            var name = lastChild && Dom.name(lastChild);\n            var br;\n\n            if (!name ||\n                (name != \"br\" && name != \"img\") ||\n                (name == \"br\" && lastChild.className != \"k-br\")) {\n                br = node.ownerDocument.createElement(\"br\");\n                br.className = \"k-br\";\n                node.appendChild(br);\n            }\n        },\n\n        // Start: Table Utilities\n\n        reMapTableColumns: function(table, colAttr) {\n            Dom._mapColIndices(table, colAttr);\n        },\n\n        clearTableMappings: function(table, colAttr) {\n            $(table).find(\"[\" + colAttr + \"]\").removeAttr(colAttr);\n        },\n\n        _mapColIndices: function(table, colAttr) {\n            var registeredColumns = {};\n\n            for (var rowIndex = 0; rowIndex < table.rows.length; rowIndex++) {\n                var cells = table.rows[rowIndex].cells;\n                var colIndex = 0;\n                for (var cellIndex = 0; cellIndex < cells.length; cellIndex++, colIndex++) {\n                    var cell = cells[cellIndex];\n\n                    if (cell.rowSpan > 1) {\n                        this._mapColspan(cell, rowIndex, colIndex, registeredColumns);\n                    }\n\n                    if (registeredColumns[rowIndex]) {\n                        while (registeredColumns[rowIndex][colIndex]) {\n                            colIndex++;\n                        }\n                    }\n\n                    cell.setAttribute(colAttr, colIndex);\n\n                    if (cell.colSpan > 1) {\n                        colIndex = colIndex + cell.colSpan - 1;\n                    }\n                }\n            }\n        },\n\n        _mapColspan: function(cell, rowIndex, colIndex, registeredColumns) {\n            var rowSpan = cell.rowSpan,\n                colSpan = cell.colSpan,\n                index;\n\n            for (var ci = 0; ci < colSpan; ci++) {\n                index = colIndex + ci;\n\n                for (var ri = rowIndex + 1; ri < rowIndex + rowSpan; ri++) {\n\n                    if (!registeredColumns[ri]) {\n                        registeredColumns[ri] = {};\n                        registeredColumns[ri].length = 0;\n                    }\n\n                    if (registeredColumns[rowIndex]) {\n                        while (registeredColumns[rowIndex][index]) {\n                            index++;\n                        }\n                    }\n\n                    registeredColumns[ri][index] = true;\n                    registeredColumns[ri].length++;\n                }\n            }\n\n        },\n\n        associateWithIds: function(table) {\n            var that = this;\n            var numberOfTheadRows = 0;\n            var tableRows = table.rows;\n            var numberOfTableRows = tableRows.length;\n            var theadMatrix = [];\n            var tbodyMatrix = [];\n            var theadRows, i;\n\n            if (table.tHead) {\n                theadRows = table.tHead.rows;\n                numberOfTheadRows = theadRows.length;\n            } else {\n                numberOfTheadRows = that._getNumberOfHeaderRows(table);\n                theadRows = [];\n                for (i = 0; i < numberOfTheadRows; i++) {\n                    theadRows.push(tableRows[i]);\n                }\n            }\n            for (i = 0; i < numberOfTheadRows; i++) {\n                theadMatrix.push([]);\n            }\n            for (i = 0; i < numberOfTableRows; i++) {\n                tbodyMatrix.push([]);\n            }\n\n            that._generateIdsForColumns(theadMatrix, theadRows);\n            that._generateIdsForRows(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n            that._assignIds(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n        },\n\n        _generateIdsForColumns: function(theadMatrix, theadRows) {\n            var timestamp = new Date().getTime();\n            var numberOfTheadRows = theadRows ? theadRows.length : 0;\n            var row, cells, cell, col, id, colspan, rowspan, i, j, k, l;\n\n            for (i = 0; i < numberOfTheadRows; i++) {\n                row = theadRows[i];\n                cells = row.cells;\n                col = 0;\n\n                for (j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    id = \"table\" + i + j + (++timestamp);\n                    cell.setAttribute(\"id\", id);\n                    colspan = cell.getAttribute(\"colspan\") || 1;\n                    rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                    while (theadMatrix[i][j + col]) {\n                        col += 1;\n                    }\n\n                    for (k = 0; k < rowspan; k++) {\n                        for (l = 0; l < colspan; l++) {\n                            theadMatrix[i + k][j + col + l] = id;\n                        }\n                    }\n                }\n            }\n        },\n\n        _generateIdsForRows: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n            var that = this;\n            var timestamp = new Date().getTime();\n            var numberOfTableRows = tableRows.length;\n            var row, cells, cell, col, id, colspan, rowspan, i, j, k, l, colIndex, headers;\n\n            var pushHeaderId = function(row) {\n                headers.push(row[colIndex]);\n            };\n\n            for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n                row = tableRows[i];\n                cells = $(row.cells).filter(\"th\");\n                col = 0;\n\n                for (j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    id = \"table\" + i + j + (++timestamp);\n                    cell.setAttribute(\"id\", id);\n                    colspan = cell.getAttribute(\"colspan\") || 1;\n                    rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                    while (tbodyMatrix[i][j + col]) {\n                        col += 1;\n                    }\n\n                    for (k = 0; k < rowspan; k++) {\n                        for (l = 0; l < colspan; l++) {\n                            tbodyMatrix[i + k][j + col + l] = id;\n                        }\n                    }\n\n                    colIndex = cell.getAttribute(\"col-index\");\n                    headers = [];\n                    theadMatrix.forEach(pushHeaderId);\n                    headers = headers.filter(that._onlyUnique);\n                    cell.setAttribute(\"headers\", headers.join(\" \").trim());\n                }\n            }\n        },\n\n        _assignIds: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n            var that = this;\n            var numberOfTableRows = tableRows.length;\n            var row, cells, cell, i, j, colIndex, headers;\n\n            var pushHeaderId = function(row) {\n                headers.push(row[colIndex]);\n            };\n\n            for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n                row = tableRows[i];\n                cells = $(row.cells).filter(\"td\");\n\n                for (j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    colIndex = cell.getAttribute(\"col-index\");\n                    headers = tbodyMatrix[i].slice();\n\n                    theadMatrix.forEach(pushHeaderId);\n                    headers = headers.filter(that._onlyUnique);\n                    cell.setAttribute(\"headers\", headers.join(\" \").trim());\n                }\n            }\n        },\n\n        _getNumberOfColumns: function(table) {\n            var cells = $(table).find(\"th, td\");\n            var numberOfCols = 0;\n            var cell, i, currentIndex;\n\n            for (i = 0; i < cells.length; i++) {\n                cell = cells[i];\n                currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n                if (currentIndex > numberOfCols) {\n                    numberOfCols = currentIndex;\n                }\n            }\n\n            return numberOfCols;\n        },\n\n        _getNumberOfHeaderColumns: function(table, numberOfHeaderRows) {\n            var rows = table.rows;\n            var numberOfCols = 0;\n            var currentIndex, row, i, j, cell;\n\n            for (i = numberOfHeaderRows; i < rows.length; i++) {\n                row = rows[i];\n\n                for (j = 0; j < row.cells.length; j++) {\n                    cell = row.cells[j];\n\n                    if (this.is(cell, \"th\")) {\n                        currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n                        if (currentIndex > numberOfCols) {\n                            numberOfCols = currentIndex;\n                        }\n                    }\n                }\n            }\n\n            return numberOfCols;\n        },\n\n        _getNumberOfHeaderRows: function(table) {\n            var rows = table.rows;\n            var thead = table.tHead;\n            var number = thead && table.tHead.rows ? table.tHead.rows.length : 0;\n            var j, row, cell, length;\n\n            if (number === 0) {\n                row = rows[0];\n                length = row.cells && row.cells.length;\n\n                while (row && length && this.is(row.cells[0], \"th\")) {\n                    for (j = 0; j < length; j++) {\n                        cell = row ? row.cells[j] : null;\n\n                        if (!this.is(cell, \"th\")) {\n                            row = null;\n                        }\n                    }\n\n                    if (row) {\n                        number += 1;\n                        row = this.next(row);\n                        length = row && row.cells && row.cells.length;\n                    }\n                }\n            }\n\n            return number;\n        },\n\n        // End: Table Utilities\n\n        _onlyUnique: function(value, index, self) {\n            return self.indexOf(value) === index;\n        }\n    };\n\n    kendo.ui.editor.Dom = Dom;\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    // Imports ================================================================\n    var kendo = window.kendo;\n    var Editor = kendo.ui.editor;\n    var dom = Editor.Dom;\n    var extend = $.extend;\n\n    var fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\n    var quoteRe = /\"/g; //\"\n    var brRe = /<br[^>]*>/i;\n    var pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\n    var emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\n    var cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\n    var sizzleAttr = /^sizzle-\\d+/i;\n    var scriptAttr = /^k-script-/i;\n    var onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\n    var br = '<br class=\"k-br\">';\n    var bomSpan = \"<span class='k-br'>\\ufeff</span>\";\n\n    var div = document.createElement(\"div\");\n    div.innerHTML = \" <hr>\";\n    var supportsLeadingWhitespace = div.firstChild.nodeType === 3;\n    div = null;\n    var isFunction = kendo.isFunction;\n\n    var TD = \"td\";\n\n    var Serializer = {\n        toEditableHtml: function(html) {\n            return (html || \"\")\n                .replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, \"<!--[CDATA[$1]]-->\")\n                .replace(/<(\\/?)script([^>]*)>/ig, \"<$1k:script$2>\")\n                .replace(/<img([^>]*)>/ig, function(match) {\n                    return match.replace(onerrorRe, \"\");\n                })\n                .replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/ig, \"$1\")\n                .replace(/^<(table|blockquote)/i, br + '<$1')\n                .replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1')\n                .replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n        },\n\n        _toEditableImmutables: function(body) {\n            var immutable = Editor.Immutables.immutable,\n                emptyTextNode = dom.emptyTextNode,\n                first = body.firstChild,\n                last = body.lastChild;\n\n            while (emptyTextNode(first)) {\n                first = first.nextSibling;\n            }\n\n            while (emptyTextNode(last)) {\n                last = last.previousSibling;\n            }\n\n            if (first && immutable(first)) {\n                $(bomSpan).prependTo(body);\n            }\n\n            if (last && immutable(last)) {\n                $(bomSpan).appendTo(body);\n            }\n        },\n\n        _fillEmptyElements: function(body) {\n            // fills empty elements to allow them to be focused\n            $(body).find(\"p,td\").each(function() {\n                var p = $(this);\n                if (/^\\s*$/g.test(p.text()) && !p.find(\"img,input\").length) {\n                    var node = this;\n                    while (node.children[0] && node.children[0].nodeType != 3) {\n                        node = node.children[0];\n                    }\n\n                    if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                        if (dom.is(node, \"td\")) {\n                            node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                        }\n                        else {\n                            node.innerHTML = kendo.ui.editor.emptyElementContent;\n                        }\n                    }\n                }\n            });\n        },\n\n        _removeSystemElements: function(body) {\n            // removes persisted system elements\n            $(\".k-paste-container\", body).remove();\n        },\n\n        _resetOrderedLists: function(root) {\n            // fix for IE9 OL bug -- https://connect.microsoft.com/IE/feedback/details/657695/ordered-list-numbering-changes-from-correct-to-0-0\n            var ols = root.getElementsByTagName(\"ol\"), i, ol, originalStart;\n\n            for (i = 0; i < ols.length; i++) {\n                ol = ols[i];\n                originalStart = ol.getAttribute(\"start\");\n\n                ol.setAttribute(\"start\", 1);\n\n                if (originalStart) {\n                    ol.setAttribute(\"start\", originalStart);\n                } else {\n                    ol.removeAttribute(originalStart);\n                }\n            }\n        },\n\n        _preventScriptExecution: function(root) {\n            $(root).find(\"*\").each(function() {\n                var attributes = this.attributes;\n                var attribute, i, l, name;\n                var attributesToRemove = [];\n\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n\n                    if (attribute.specified && /^on/i.test(name)) {\n                        this.setAttribute(\"k-script-\" + name, attribute.value);\n                        attributesToRemove.push(name);\n                    }\n                }\n\n                for (i = 0, l = attributesToRemove.length; i < l; i++) {\n                    this.removeAttribute(attributesToRemove[i]);\n                }\n            });\n        },\n\n        htmlToDom: function(html, root, options) {\n            var browser = kendo.support.browser;\n            var msie = browser.msie;\n            var o = options || {};\n            var immutables = o.immutables;\n\n            html = Serializer.toEditableHtml(html);\n\n            if (isFunction(o.custom)) {\n                html = o.custom(html) || html;\n            }\n            root.innerHTML = html;\n\n            if (immutables) {\n                immutables.deserialize(root);\n            }\n\n            if (msie) {\n                // unicode characters denormalize the DOM tree in IE9\n                dom.normalize(root);\n\n                Serializer._resetOrderedLists(root);\n            }\n\n            Serializer._preventScriptExecution(root);\n\n            Serializer._fillEmptyElements(root);\n\n            Serializer._removeSystemElements(root);\n\n            Serializer._toEditableImmutables(root);\n\n            // add k-table class to all tables\n            $(\"table\", root).addClass(\"k-table\");\n\n            return root;\n        },\n\n        domToXhtml: function(root, options) {\n            var result = [];\n            var immutables = options && options.immutables;\n\n            function semanticFilter(attributes) {\n                return $.grep(attributes, function(attr) {\n                    return attr.name != \"style\";\n                });\n            }\n\n            function mapStart(node, tag) {\n                result.push('<' + tag);\n                attr(node);\n                result.push('>');\n            }\n\n            var tagMap = {\n                iframe: {\n                    start: function(node) { mapStart(node, \"iframe\"); },\n                    end: function() { result.push('</iframe>'); }\n                },\n                'k:script': {\n                    start: function(node) { mapStart(node, \"script\"); },\n                    end: function() { result.push('</script>'); },\n                    skipEncoding: true\n                },\n                span: {\n                    canOptimize: true,\n                    semantic: true,\n                    start: function(node) {\n                        var style = node.style;\n\n                        var attributes = specifiedAttributes(node);\n                        var semanticAttributes = semanticFilter(attributes);\n\n                        if (semanticAttributes.length) {\n                            result.push(\"<span\"); attr(node, semanticAttributes); result.push(\">\");\n                        }\n\n                        if (style.textDecoration == \"underline\") {\n                            result.push(\"<u>\");\n                        }\n\n                        var font = [];\n                        if (style.color) {\n                            font.push('color=\"' + dom.toHex(style.color) + '\"');\n                        }\n\n                        if (style.fontFamily) {\n                            font.push('face=\"' + style.fontFamily + '\"');\n                        }\n\n                        if (style.fontSize) {\n                            var size = $.inArray(style.fontSize, fontSizeMappings);\n                            font.push('size=\"' + size + '\"');\n                        }\n\n                        // Apply the rest of the inline styles back\n                        var inlineStyles = [];\n                        var ignoredStylePrefixes = [\"text-decoration\", \"color\", \"font\"];\n\n                        for (var i = 0; i < style.length; i++) {\n                            var inlineStyle = style[i];\n\n                            if (ignoredStylePrefixes.filter(function (prop) { return inlineStyle.startsWith(prop); }).length <= 0) {\n                                inlineStyles.push((inlineStyle + \": \" + (style[inlineStyle])));\n                            }\n                        }\n\n                        if (inlineStyles.length) {\n                            font.push('style=\"' + inlineStyles.join(\";\") + '\"');\n                        }\n\n                        if (font.length) {\n                            result.push(\"<font \" + font.join(\" \") + \">\");\n                        }\n                    },\n                    end: function(node) {\n                        var style = node.style;\n\n                        if (style.color || style.fontFamily || style.fontSize) {\n                            result.push(\"</font>\");\n                        }\n\n                        if (style.textDecoration == \"underline\") {\n                            result.push(\"</u>\");\n                        }\n\n                        if (semanticFilter(specifiedAttributes(node)).length) {\n                            result.push(\"</span>\");\n                        }\n                    }\n                },\n                strong: {\n                    semantic: true,\n                    start: function(node) { mapStart(node, \"b\"); },\n                    end: function() { result.push('</b>'); }\n                },\n                em: {\n                    semantic: true,\n                    start: function(node) { mapStart(node, \"i\"); },\n                    end: function() { result.push('</i>'); }\n                },\n                b: {\n                    semantic: false,\n                    start: function(node) { mapStart(node, \"strong\"); },\n                    end: function() { result.push('</strong>'); }\n                },\n                i: {\n                    semantic: false,\n                    start: function(node) { mapStart(node, \"em\"); },\n                    end: function() { result.push('</em>'); }\n                },\n                u: {\n                    semantic: false,\n                    start: function(node) {\n                        result.push('<span');\n\n                        var attributes = specifiedAttributes(node);\n                        var style = $(attributes).filter(function(i, item) { return item.name == \"style\"; })[0];\n                        var styleObj = { nodeName: \"style\", value: \"text-decoration:underline;\" };\n\n                        if (style) {\n                            styleObj.value = style.value;\n                            if (!/text-decoration/i.test(styleObj.value)) {\n                                styleObj.value = \"text-decoration:underline;\" + styleObj.value;\n                            }\n                            attributes.splice($.inArray(style, attributes), 1);\n                        }\n                        attributes.push(styleObj);\n\n                        attr(node, attributes);\n                        result.push('>');\n                    },\n                    end: function() { result.push('</span>'); }\n                },\n                font: {\n                    canOptimize: true,\n                    semantic: false,\n                    start: function(node) {\n                        result.push('<span style=\"');\n\n                        var color = node.getAttribute('color');\n                        var size = fontSizeMappings[node.getAttribute('size')];\n                        var face = node.getAttribute('face');\n\n                        if (color) {\n                            result.push('color:');\n                            result.push(dom.toHex(color));\n                            result.push(';');\n                        }\n\n                        if (face) {\n                            result.push('font-family:');\n                            result.push(face);\n                            result.push(';');\n                        }\n\n                        if (size) {\n                            result.push('font-size:');\n                            result.push(size);\n                            result.push(';');\n                        }\n\n                        result.push('\">');\n                    },\n                    end: function() {\n                        result.push('</span>');\n                    }\n                }\n            };\n\n            tagMap.script = tagMap[\"k:script\"];\n\n            options = options || {};\n\n            if (typeof options.semantic == \"undefined\") {\n                options.semantic = true;\n            }\n\n            function cssProperties(cssText) {\n                var trim = kendo.trim;\n                var css = trim(cssText);\n                var match;\n                var property, value;\n                var properties = [];\n\n                cssDeclaration.lastIndex = 0;\n\n                while (true) {\n                    match = cssDeclaration.exec(css);\n\n                    if (!match) {\n                        break;\n                    }\n\n                    property = trim(match[1].toLowerCase());\n                    value = trim(match[2]);\n\n                    if (property == \"font-size-adjust\" || property == \"font-stretch\") {\n                        continue;\n                    }\n\n                    if (property.indexOf('color') >= 0) {\n                        value = dom.toHex(value);\n                    } else if (property.indexOf('font') >= 0) {\n                        value = value.replace(quoteRe, \"'\");\n                    } else if (/\\burl\\(/g.test(value)) {\n                        value = value.replace(quoteRe, \"\");\n                    }\n\n                    properties.push({ property: property, value: value });\n                }\n\n                return properties;\n            }\n\n            function styleAttr(cssText) {\n                var properties = cssProperties(cssText);\n                var i;\n\n                for (i = 0; i < properties.length; i++) {\n                    result.push(properties[i].property);\n                    result.push(':');\n                    result.push(properties[i].value);\n                    result.push(';');\n                }\n            }\n\n            function specifiedAttributes(node) {\n                var result = [];\n                var attributes = node.attributes;\n                var attribute, i, l;\n                var name, value, specified;\n\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n\n                    name = attribute.nodeName;\n                    value = attribute.value;\n                    specified = attribute.specified;\n\n                    // In IE < 8 the 'value' attribute is not returned as 'specified'. The same goes for type=\"text\"\n                    if (name == 'value' && 'value' in node && node.value) {\n                        specified = true;\n                    } else if (name == 'type' && value == 'text') {\n                        specified = true;\n                    } else if (name == \"class\" && !value) {\n                        specified = false;\n                    } else if (sizzleAttr.test(name)) {\n                        specified = false;\n                    } else if (name == 'complete') {\n                        specified = false;\n                    } else if (name == 'altHtml') {\n                        specified = false;\n                    } else if (name == 'start' && dom.is(node, \"ul\")) {\n                        specified = false;\n                    } else if (name == 'start' && dom.is(node, \"ol\") && value == \"1\") {\n                        specified = false;\n                    } else if (name.indexOf('_moz') >= 0) {\n                        specified = false;\n                    } else if (scriptAttr.test(name)) {\n                        specified = !!options.scripts;\n                    } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, \"tr\") || dom.is(node, \"td\"))) {\n                        specified = false;\n                    }\n\n                    if (specified) {\n                        result.push(attribute);\n                    }\n                }\n\n                return result;\n            }\n\n            function attr(node, attributes) {\n                var i, l, attribute, name, value;\n\n                attributes = attributes || specifiedAttributes(node);\n\n                if (dom.is(node, 'img')) {\n                    var width = node.style.width,\n                        height = node.style.height,\n                        $node = $(node);\n\n                    if (width && pixelRe.test(width)) {\n                        $node.attr('width', parseInt(width, 10));\n                        dom.unstyle(node, { width: undefined$1 });\n                    }\n\n                    if (height && pixelRe.test(height)) {\n                        $node.attr('height', parseInt(height, 10));\n                        dom.unstyle(node, { height: undefined$1 });\n                    }\n                }\n\n                if (!attributes.length) {\n                    return;\n                }\n\n                // Remove the following if everything seems to be in order.\n                // https://github.com/telerik/kendo-ui-core/issues/3639\n                // attributes.sort(function (a, b) {\n                //     return a.nodeName > b.nodeName ? 1 : a.nodeName < b.nodeName ? -1 : 0;\n                // });\n\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n                    value = attribute.value;\n\n                    if (name == \"class\" && value == \"k-table\") {\n                        continue;\n                    }\n\n                    name = name.replace(scriptAttr, \"\");\n\n                    result.push(' ');\n                    result.push(name);\n                    result.push('=\"');\n\n                    if (name == 'style') {\n                        styleAttr(value || node.style.cssText);\n                    } else if (name == 'src' || name == 'href') {\n                        result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                    } else {\n                        result.push(dom.fillAttrs[name] ? name : value);\n                    }\n\n                    result.push('\"');\n                }\n            }\n\n            function children(node, skip, skipEncoding) {\n                for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                    child(childNode, skip, skipEncoding);\n                }\n            }\n\n            function text(node) {\n                return node.nodeValue.replace(/\\ufeff/g, \"\");\n            }\n\n            function isEmptyBomNode(node) {\n                if (dom.isBom(node)) {\n                    do {\n                        node = node.parentNode;\n\n                        if (dom.is(node, TD) && node.childNodes.length === 1) {\n                            return true;\n                        }\n\n                        if (node.childNodes.length !== 1) {\n                            return false;\n                        }\n                    } while (!dom.isBlock(node));\n\n                    return true;\n                }\n\n                return false;\n            }\n\n            function child(node, skip, skipEncoding) {\n                var nodeType = node.nodeType,\n                    tagName, mapper,\n                    parent, value, previous, jqNode;\n\n                if (immutables && Editor.Immutables.immutable(node)) {\n                    result.push(immutables.serialize(node));\n                } else if (nodeType == 1) {\n                    tagName = dom.name(node);\n                    jqNode = $(node);\n\n                    if (jqNode.hasClass(\"k-element-resize-handle-wrapper\") || jqNode.hasClass(\"k-column-resize-handle-wrapper\") || jqNode.hasClass(\"k-row-resize-handle-wrapper\")) {\n                        return;\n                    }\n\n                    if (!tagName || dom.insignificant(node)) {\n                        return;\n                    }\n\n                    if (!options.scripts && (tagName == \"script\" || tagName == \"k:script\")) {\n                        return;\n                    }\n\n                    mapper = tagMap[tagName];\n\n                    if (mapper) {\n                        if (mapper.canOptimize &&\n                            options.optimizeTags &&\n                            shouldOptimize(node)) {\n                                children(node, false, mapper.skipEncoding);\n                            return;\n                        }\n\n                        if (typeof mapper.semantic == \"undefined\" ||\n                            (options.semantic ^ mapper.semantic)) {\n                            mapper.start(node);\n                            children(node, false, mapper.skipEncoding);\n                            mapper.end(node);\n                            return;\n                        }\n                    }\n\n                    result.push('<');\n                    result.push(tagName);\n\n                    attr(node);\n\n                    if (dom.empty[tagName]) {\n                        result.push(' />');\n                    } else {\n                        result.push('>');\n                        children(node, skip || dom.is(node, 'pre'));\n                        result.push('</');\n                        result.push(tagName);\n                        result.push('>');\n                    }\n                } else if (nodeType == 3) {\n                    if (isEmptyBomNode(node)) {\n                        result.push('&nbsp;');\n                        return;\n                    }\n\n                    value = text(node);\n\n                    if (!skip && supportsLeadingWhitespace) {\n                        parent = node.parentNode;\n                        previous = node.previousSibling;\n\n                        if (!previous) {\n                             previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                        }\n\n                        if (!previous || previous.innerHTML === \"\" || dom.isBlock(previous)) {\n                            if (options.keepEOL) {\n                                value = value.replace(/[\\r\\n\\v\\f\\t ]+/, ' ');\n                            } else {\n                                value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                            }\n                        }\n\n                        value = value.replace(/ +/, ' ');\n                    }\n\n                    result.push(skipEncoding ? value : dom.encode(value, options));\n\n                } else if (nodeType == 4) {\n                    result.push('<![CDATA[');\n                    result.push(node.data);\n                    result.push(']]>');\n                } else if (nodeType == 8) {\n                    if (node.data.indexOf('[CDATA[') < 0) {\n                        result.push('<!--');\n                        result.push(node.data);\n                        result.push('-->');\n                    } else {\n                        result.push('<!');\n                        result.push(node.data);\n                        result.push('>');\n                    }\n                }\n            }\n\n            function shouldOptimize(node) {\n                return node.attributes.length === 0;\n            }\n\n            function textOnly(root) {\n                var childrenCount = root.childNodes.length;\n                var textChild = childrenCount && root.firstChild.nodeType == 3;\n\n                return textChild && (childrenCount == 1 || (childrenCount == 2 && dom.insignificant(root.lastChild)));\n            }\n\n            function runCustom() {\n                if (kendo.isFunction(options.custom)) {\n                    result = options.custom(result) || result;\n                }\n            }\n\n            if (textOnly(root)) {\n                result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n                runCustom();\n\n                return result;\n            }\n\n            children(root);\n            result = result.join('');\n            runCustom();\n\n            // if serialized dom contains only whitespace elements, consider it empty (required field validation)\n            if (result.replace(brRe, \"\").replace(emptyPRe, \"\") === \"\") {\n                return \"\";\n            }\n\n            return result;\n        }\n\n    };\n\n    extend(Editor, {\n        Serializer: Serializer\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            extend = $.extend,\n            Editor = kendo.ui.editor,\n            browser = kendo.support.browser,\n            dom = Editor.Dom,\n            findNodeIndex = dom.findNodeIndex,\n            isDataNode = dom.isDataNode,\n            findClosestAncestor = dom.findClosestAncestor,\n            getNodeLength = dom.getNodeLength,\n            normalize = dom.normalize;\n\n    var SelectionUtils = {\n        selectionFromWindow: function(window) {\n            if (!window) {\n                return;\n            }\n\n            if (!(\"getSelection\" in window)) {\n                return new W3CSelection(window.document);\n            }\n\n            return window.getSelection();\n        },\n\n        selectionFromRange: function(range) {\n            var rangeDocument = RangeUtils.documentFromRange(range);\n            return SelectionUtils.selectionFromDocument(rangeDocument);\n        },\n\n        selectionFromDocument: function(document) {\n            return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n        }\n    };\n\n    var W3CRange = Class.extend({\n        init: function(doc) {\n            $.extend(this, {\n                ownerDocument: doc, /* not part of the spec; used when cloning ranges, traversing the dom and creating fragments */\n                startContainer: doc,\n                endContainer: doc,\n                commonAncestorContainer: doc,\n                startOffset: 0,\n                endOffset: 0,\n                collapsed: true\n            });\n        },\n\n        // Positioning Methods\n        setStart: function(node, offset) {\n            this.startContainer = node;\n            this.startOffset = offset;\n            updateRangeProperties(this);\n            fixIvalidRange(this, true);\n        },\n\n        setEnd: function(node, offset) {\n            this.endContainer = node;\n            this.endOffset = offset;\n            updateRangeProperties(this);\n            fixIvalidRange(this, false);\n        },\n\n        setStartBefore: function(node) {\n            this.setStart(node.parentNode, findNodeIndex(node));\n        },\n\n        setStartAfter: function(node) {\n            this.setStart(node.parentNode, findNodeIndex(node) + 1);\n        },\n\n        setEndBefore: function(node) {\n            this.setEnd(node.parentNode, findNodeIndex(node));\n        },\n\n        setEndAfter: function(node) {\n            this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n        },\n\n        selectNode: function(node) {\n            this.setStartBefore(node);\n            this.setEndAfter(node);\n        },\n\n        selectNodeContents: function(node) {\n            this.setStart(node, 0);\n            this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n        },\n\n        collapse: function(toStart) {\n            var that = this;\n\n            if (toStart) {\n                that.setEnd(that.startContainer, that.startOffset);\n            } else {\n                that.setStart(that.endContainer, that.endOffset);\n            }\n        },\n\n        // Editing Methods\n\n        deleteContents: function() {\n            var that = this,\n                range = that.cloneRange();\n\n            if (that.startContainer != that.commonAncestorContainer) {\n                that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n            }\n\n            that.collapse(true);\n\n            (function deleteSubtree(iterator) {\n                while (iterator.next()) {\n                    if (iterator.hasPartialSubtree()) {\n                        deleteSubtree(iterator.getSubtreeIterator());\n                    } else {\n                        iterator.remove();\n                    }\n                }\n            })(new RangeIterator(range));\n        },\n\n        cloneContents: function() {\n            // clone subtree\n            var document = RangeUtils.documentFromRange(this);\n            return (function cloneSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n\n                    while (node = iterator.next()) {\n                        node = node.cloneNode(!iterator.hasPartialSubtree());\n\n                        if (iterator.hasPartialSubtree()) {\n                            node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                        }\n\n                        frag.appendChild(node);\n                    }\n\n                    return frag;\n            })(new RangeIterator(this));\n        },\n\n        extractContents: function() {\n            var that = this,\n                range = that.cloneRange();\n\n            if (that.startContainer != that.commonAncestorContainer) {\n                that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n            }\n\n            that.collapse(true);\n\n            var document = RangeUtils.documentFromRange(that);\n\n            return (function extractSubtree(iterator) {\n                var node, frag = document.createDocumentFragment();\n\n                while (node = iterator.next()) {\n                    if (iterator.hasPartialSubtree()) {\n                        node = node.cloneNode(false);\n                        node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                    } else {\n                        iterator.remove(that.originalRange);\n                    }\n\n                    frag.appendChild(node);\n                }\n\n                return frag;\n            })(new RangeIterator(range));\n        },\n\n        insertNode: function(node) {\n            var that = this;\n\n            if (isDataNode(that.startContainer)) {\n                if (that.startOffset != that.startContainer.nodeValue.length) {\n                    dom.splitDataNode(that.startContainer, that.startOffset);\n                }\n\n                dom.insertAfter(node, that.startContainer);\n            } else {\n                dom.insertAt(that.startContainer, node, that.startOffset);\n            }\n\n            that.setStart(that.startContainer, that.startOffset);\n        },\n\n        cloneRange: function() {\n            // fast copy\n            return $.extend(new W3CRange(this.ownerDocument), {\n                startContainer: this.startContainer,\n                endContainer: this.endContainer,\n                commonAncestorContainer: this.commonAncestorContainer,\n                startOffset: this.startOffset,\n                endOffset: this.endOffset,\n                collapsed: this.collapsed,\n\n                originalRange: this /* not part of the spec; used to update the original range when calling extractContents() on clones */\n            });\n        },\n\n        // used for debug purposes\n        toString: function() {\n            var startNodeName = this.startContainer.nodeName,\n                endNodeName = this.endContainer.nodeName;\n\n            return [startNodeName == \"#text\" ? this.startContainer.nodeValue : startNodeName, '(', this.startOffset, ') : ',\n                    endNodeName == \"#text\" ? this.endContainer.nodeValue : endNodeName, '(', this.endOffset, ')'].join('');\n        }\n    });\n\n    W3CRange.fromNode = function(node) {\n        return new W3CRange(node.ownerDocument);\n    };\n\n    /* can be used in Range.compareBoundaryPoints if we need it one day */\n    function compareBoundaries(start, end, startOffset, endOffset) {\n        if (start == end) {\n            return endOffset - startOffset;\n        }\n\n        // end is child of start\n        var container = end;\n        while (container && container.parentNode != start) {\n            container = container.parentNode;\n        }\n\n        if (container) {\n            return findNodeIndex(container) - startOffset;\n        }\n\n        // start is child of end\n        container = start;\n        while (container && container.parentNode != end) {\n            container = container.parentNode;\n        }\n\n        if (container) {\n            return endOffset - findNodeIndex(container) - 1;\n        }\n\n        // deep traversal\n        var root = dom.commonAncestor(start, end);\n        var startAncestor = start;\n\n        while (startAncestor && startAncestor.parentNode != root) {\n            startAncestor = startAncestor.parentNode;\n        }\n\n        if (!startAncestor) {\n            startAncestor = root;\n        }\n\n        var endAncestor = end;\n        while (endAncestor && endAncestor.parentNode != root) {\n            endAncestor = endAncestor.parentNode;\n        }\n\n        if (!endAncestor) {\n            endAncestor = root;\n        }\n\n        if (startAncestor == endAncestor) {\n            return 0;\n        }\n\n        return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n    }\n\n    function fixIvalidRange(range, toStart) {\n        function isInvalidRange(range) {\n            try {\n                return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n            } catch (ex) {\n                // range was initially invalid (e.g. when cloned from invalid range) - it must be fixed\n                return true;\n            }\n        }\n\n        if (isInvalidRange(range)) {\n            if (toStart) {\n                range.commonAncestorContainer = range.endContainer = range.startContainer;\n                range.endOffset = range.startOffset;\n            } else {\n                range.commonAncestorContainer = range.startContainer = range.endContainer;\n                range.startOffset = range.endOffset;\n            }\n\n            range.collapsed = true;\n        }\n    }\n\n    function updateRangeProperties(range) {\n        range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n\n        var node = range.startContainer;\n        while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n            node = node.parentNode;\n        }\n\n        range.commonAncestorContainer = node;\n    }\n\n    var RangeIterator = Class.extend({\n        init: function(range) {\n            $.extend(this, {\n                range: range,\n                _current: null,\n                _next: null,\n                _end: null\n            });\n\n            if (range.collapsed) {\n                return;\n            }\n\n            var root = range.commonAncestorContainer;\n\n            this._next = range.startContainer == root && !isDataNode(range.startContainer) ?\n            range.startContainer.childNodes[range.startOffset] :\n            findClosestAncestor(root, range.startContainer);\n\n            this._end = range.endContainer == root && !isDataNode(range.endContainer) ?\n            range.endContainer.childNodes[range.endOffset] :\n            findClosestAncestor(root, range.endContainer).nextSibling;\n        },\n\n        hasNext: function() {\n            return !!this._next;\n        },\n\n        next: function() {\n            var that = this,\n                current = that._current = that._next;\n            that._next = that._current && that._current.nextSibling != that._end ?\n            that._current.nextSibling : null;\n\n            if (isDataNode(that._current)) {\n                if (that.range.endContainer == that._current) {\n                    current = current.cloneNode(true);\n                    current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n                }\n\n                if (that.range.startContainer == that._current) {\n                    current = current.cloneNode(true);\n                    current.deleteData(0, that.range.startOffset);\n                }\n            }\n\n            return current;\n        },\n\n        traverse: function(callback) {\n            var that = this,\n                current;\n\n            function next() {\n                that._current = that._next;\n                that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                return that._current;\n            }\n\n            while (current = next()) {\n                if (that.hasPartialSubtree()) {\n                    that.getSubtreeIterator().traverse(callback);\n                } else {\n                    callback(current);\n                }\n            }\n\n            return current;\n        },\n\n        remove: function(originalRange) {\n            var that = this,\n                inStartContainer = that.range.startContainer == that._current,\n                inEndContainer = that.range.endContainer == that._current,\n                start, end, delta;\n\n            if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n                start = inStartContainer ? that.range.startOffset : 0;\n                end = inEndContainer ? that.range.endOffset : that._current.length;\n                delta = end - start;\n\n                if (originalRange && (inStartContainer || inEndContainer)) {\n                    if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                        originalRange.startOffset -= delta;\n                    }\n\n                    if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                        originalRange.endOffset -= delta;\n                    }\n                }\n\n                that._current.deleteData(start, delta);\n            } else {\n                var parent = that._current.parentNode;\n\n                if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                    var nodeIndex = findNodeIndex(that._current);\n\n                    if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                        originalRange.startOffset -= 1;\n                    }\n\n                    if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                        originalRange.endOffset -= 1;\n                    }\n                }\n\n                dom.remove(that._current);\n            }\n        },\n\n        hasPartialSubtree: function() {\n            return !isDataNode(this._current) &&\n            (dom.isAncestorOrSelf(this._current, this.range.startContainer) ||\n                dom.isAncestorOrSelf(this._current, this.range.endContainer));\n        },\n\n        getSubtreeIterator: function() {\n            return new RangeIterator(this.getSubRange());\n        },\n\n        getSubRange: function() {\n            var that = this,\n                subRange = that.range.cloneRange();\n            subRange.selectNodeContents(that._current);\n            if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n                subRange.setStart(that.range.startContainer, that.range.startOffset);\n            }\n            if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n                subRange.setEnd(that.range.endContainer, that.range.endOffset);\n            }\n\n            return subRange;\n        }\n    });\n\n    var W3CSelection = Class.extend({\n        init: function(doc) {\n            this.ownerDocument = doc;\n            this.rangeCount = 1;\n        },\n\n        addRange: function(range) {\n            var textRange = this.ownerDocument.body.createTextRange();\n\n            // end container should be adopted first in order to prevent selection with negative length\n            adoptContainer(textRange, range, false);\n            adoptContainer(textRange, range, true);\n\n            textRange.select();\n        },\n\n        removeAllRanges: function() {\n            var selection = this.ownerDocument.selection;\n\n            if (selection.type != \"None\") {\n                selection.empty();\n            }\n        },\n\n        getRangeAt: function() {\n            var textRange,\n                range = new W3CRange(this.ownerDocument),\n                selection = this.ownerDocument.selection,\n                element, commonAncestor;\n\n            try {\n                textRange = selection.createRange();\n                element = textRange.item ? textRange.item(0) : textRange.parentElement();\n                if (element.ownerDocument != this.ownerDocument) {\n                    return range;\n                }\n            } catch (ex) {\n                return range;\n            }\n\n            if (selection.type == \"Control\") {\n                range.selectNode(textRange.item(0));\n            } else {\n                commonAncestor = textRangeContainer(textRange);\n                adoptEndPoint(textRange, range, commonAncestor, true);\n                adoptEndPoint(textRange, range, commonAncestor, false);\n\n                if (range.startContainer.nodeType == 9) {\n                    range.setStart(range.endContainer, range.startOffset);\n                }\n\n                if (range.endContainer.nodeType == 9) {\n                    range.setEnd(range.startContainer, range.endOffset);\n                }\n\n                if (textRange.compareEndPoints(\"StartToEnd\", textRange) === 0) {\n                    range.collapse(false);\n                }\n\n                var startContainer = range.startContainer,\n                    endContainer = range.endContainer,\n                    body = this.ownerDocument.body;\n\n                if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && // check for full body selection\n                    !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) { // but not when single textnode is selected\n                    var movedStart = false,\n                        movedEnd = false;\n\n                    while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                        startContainer = startContainer.parentNode;\n                        movedStart = true;\n                    }\n\n                    while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                        endContainer = endContainer.parentNode;\n                        movedEnd = true;\n                    }\n\n                    if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                        range.setStart(startContainer, 0);\n                        range.setEnd(endContainer, getNodeLength(body));\n                    }\n                }\n            }\n\n            return range;\n        }\n    });\n\n    function textRangeContainer(textRange) {\n        var left = textRange.duplicate(),\n            right = textRange.duplicate();\n\n        left.collapse(true);\n        right.collapse(false);\n\n        return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n    }\n\n    function adoptContainer(textRange, range, start) {\n        // find anchor node and offset\n        var container = range[start ? \"startContainer\" : \"endContainer\"],\n            offset = range[start ? \"startOffset\" : \"endOffset\"],\n            textOffset = 0,\n            isData = isDataNode(container),\n            anchorNode = isData ? container : container.childNodes[offset] || null,\n            anchorParent = isData ? container.parentNode : container,\n            doc = range.ownerDocument,\n            cursor = doc.body.createTextRange(),\n            cursorNode;\n\n        // visible data nodes need a text offset\n        if (container.nodeType == 3 || container.nodeType == 4) {\n            textOffset = offset;\n        }\n\n        if (!anchorParent) {\n            anchorParent = doc.body;\n        }\n\n        if (anchorParent.nodeName.toLowerCase() == \"img\") {\n            cursor.moveToElementText(anchorParent);\n            cursor.collapse(false);\n            textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n        } else {\n            // create a cursor element node to position range (since we can't select text nodes)\n            cursorNode = anchorParent.insertBefore(dom.create(doc, \"a\"), anchorNode);\n\n            cursor.moveToElementText(cursorNode);\n            dom.remove(cursorNode);\n            cursor[start ? \"moveStart\" : \"moveEnd\"](\"character\", textOffset);\n            cursor.collapse(false);\n            textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n        }\n    }\n\n    function adoptEndPoint(textRange, range, commonAncestor, start) {\n        var cursorNode = dom.create(range.ownerDocument, \"a\"),\n            cursor = textRange.duplicate(),\n            comparison = start ? \"StartToStart\" : \"StartToEnd\",\n            result, parent, target,\n            previous, next,\n            args, index,\n            appended = false;\n\n        cursorNode.innerHTML = \"\\ufeff\";\n        cursor.collapse(start);\n\n        parent = cursor.parentElement();\n\n        if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n            parent = commonAncestor;\n        }\n\n        // detect range end points\n        // insert cursorNode within the textRange parent and move the cursor until it gets outside of the textRange\n        do {\n            if (appended) {\n                parent.insertBefore(cursorNode, cursorNode.previousSibling);\n            } else {\n                parent.appendChild(cursorNode);\n                appended = true;\n            }\n            cursor.moveToElementText(cursorNode);\n        } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n\n        target = cursorNode.nextSibling;\n\n        if (result == -1 && isDataNode(target)) {\n            cursor.setEndPoint(start ? \"EndToStart\" : \"EndToEnd\", textRange);\n\n            dom.remove(cursorNode);\n\n            args = [target, cursor.text.length];\n        } else {\n            previous = !start && cursorNode.previousSibling;\n            next = start && cursorNode.nextSibling;\n\n            if (isDataNode(next)) {\n                args = [next, 0];\n            } else if (isDataNode(previous)) {\n                args = [previous, previous.length];\n            } else {\n                index = findNodeIndex(cursorNode);\n\n                if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                    args = [parent.nextSibling, 0];\n                } else {\n                    args = [parent, index];\n                }\n            }\n\n            dom.remove(cursorNode);\n        }\n\n        range[start ? \"setStart\" : \"setEnd\"].apply(range, args);\n    }\n\n    var RangeEnumerator = Class.extend({\n        init: function(range) {\n            this.enumerate = function() {\n                var nodes = [];\n\n                function visit(node) {\n                    if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                        nodes.push(node);\n                    } else {\n                        node = node.firstChild;\n                        while (node) {\n                            visit(node);\n                            node = node.nextSibling;\n                        }\n                    }\n                }\n\n                new RangeIterator(range).traverse(visit);\n\n                return nodes;\n            };\n        }\n    });\n\n    var ImmutablesRangeIterator = RangeIterator.extend({\n        hasPartialSubtree: function() {\n            var immutable = Editor.Immutables && Editor.Immutables.immutable;\n            return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n        },\n\n        getSubtreeIterator: function() {\n            return new ImmutablesRangeIterator(this.getSubRange());\n        }\n    });\n\n    var ImmutablesRangeEnumerator = Class.extend({\n        init: function(range) {\n            this.enumerate = function() {\n                var nodes = [];\n                var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                function visit(node) {\n                    if (immutable && !immutable(node)) {\n                        if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                            nodes.push(node);\n                        } else {\n                            node = node.firstChild;\n                            while (node) {\n                                visit(node);\n                                node = node.nextSibling;\n                            }\n                        }\n                    }\n                }\n\n                new ImmutablesRangeIterator(range).traverse(visit);\n\n                return nodes;\n            };\n        }\n    });\n\n    var RestorePoint = Class.extend({\n        init: function(range, body, options) {\n            var that = this;\n            that.range = range;\n            that.rootNode = RangeUtils.documentFromRange(range);\n            that.body = body || that.getEditable(range);\n            if (dom.name(that.body) != \"body\") {\n                that.rootNode = that.body;\n            }\n\n            that.startContainer = that.nodeToPath(range.startContainer);\n            that.endContainer = that.nodeToPath(range.endContainer);\n            that.startOffset = that.offset(range.startContainer, range.startOffset);\n            that.endOffset = that.offset(range.endContainer, range.endOffset);\n\n            that.immutables = options && options.immutables;\n\n            if (that.immutables) {\n                that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n            }\n\n            that.html = that.body.innerHTML;\n\n            if (that.immutables && !that.serializedImmutables.empty) {\n                Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n            }\n        },\n\n        index: function(node) {\n            var result = 0,\n                lastType = node.nodeType;\n\n            while (node = node.previousSibling) {\n                var nodeType = node.nodeType;\n\n                if (nodeType != 3 || lastType != nodeType) {\n                    result ++;\n                }\n\n                lastType = nodeType;\n            }\n\n            return result;\n        },\n\n        getEditable: function(range) {\n            var root = range.commonAncestorContainer;\n\n            while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == \"false\"))) {\n                root = root.parentNode;\n            }\n\n            return root;\n        },\n\n        restoreHtml: function() {\n            var that = this;\n\n            dom.removeChildren(that.body);\n            that.body.innerHTML = that.html;\n            if (that.immutables && !that.serializedImmutables.empty) {\n                Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n            }\n        },\n\n        offset: function(node, value) {\n            if (node.nodeType == 3) {\n                while ((node = node.previousSibling) && node.nodeType == 3) {\n                    value += node.nodeValue.length;\n                }\n            }\n\n            return value;\n        },\n\n        nodeToPath: function(node) {\n            var path = [];\n\n            while (node != this.rootNode) {\n                path.push(this.index(node));\n                node = node.parentNode;\n            }\n\n            return path;\n        },\n\n        toRangePoint: function(range, start, path, denormalizedOffset) {\n            var node = this.rootNode,\n                length = path.length,\n                offset = denormalizedOffset;\n\n            while (length-- && node) {\n                node = node.childNodes[path[length]];\n            }\n\n            while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n                offset -= node.nodeValue.length;\n                node = node.nextSibling;\n            }\n\n            if (node && offset >= 0) {\n                range[start ? 'setStart' : 'setEnd'](node, offset);\n            }\n        },\n\n        toRange: function() {\n            var that = this,\n                result = that.range.cloneRange();\n\n            that.toRangePoint(result, true, that.startContainer, that.startOffset);\n            that.toRangePoint(result, false, that.endContainer, that.endOffset);\n\n            return result;\n        }\n\n    });\n\n    var Marker = Class.extend({\n        init: function() {\n            this.caret = null;\n        },\n\n        addCaret: function(range) {\n            var that = this;\n            var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n            range.insertNode(caret);\n\n            dom.stripBomNode(caret.previousSibling);\n            dom.stripBomNode(caret.nextSibling);\n\n            range.selectNode(caret);\n            return caret;\n        },\n\n        removeCaret: function(range) {\n            var that = this,\n                previous = that.caret.previousSibling,\n                startOffset = 0;\n\n            if (previous) {\n                startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n            }\n\n            var container = that.caret.parentNode;\n            var containerIndex = previous ? findNodeIndex(previous) : 0;\n\n            dom.remove(that.caret);\n            normalize(container);\n\n            var node = container.childNodes[containerIndex];\n\n            if (isDataNode(node)) {\n                range.setStart(node, startOffset);\n            } else if (node) {\n                var textNode = dom.lastTextNode(node);\n                if (textNode) {\n                    range.setStart(textNode, textNode.nodeValue.length);\n                } else {\n                    range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n                }\n            } else {\n                if (!browser.msie && !container.innerHTML) {\n                    container.innerHTML = '<br _moz_dirty=\"\" />';\n                }\n\n                range.selectNodeContents(container);\n            }\n            range.collapse(true);\n        },\n\n        add: function(range, expand) {\n            var that = this;\n\n            var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n            var doc = RangeUtils.documentFromRange(range);\n\n            if (expand && range.collapsed) {\n                that.addCaret(range);\n                range = RangeUtils.expand(range);\n            }\n\n            var rangeBoundary = range.cloneRange();\n\n            rangeBoundary.collapse(false);\n            that.end = dom.create(doc, 'span', { className: 'k-marker' });\n            rangeBoundary.insertNode(that.end);\n\n            rangeBoundary = range.cloneRange();\n            rangeBoundary.collapse(true);\n            that.start = that.end.cloneNode(true);\n            rangeBoundary.insertNode(that.start);\n\n            that._removeDeadMarkers(that.start, that.end);\n\n            if (collapsed) {\n                var bom = doc.createTextNode(\"\\ufeff\");\n                dom.insertAfter(bom.cloneNode(), that.start);\n                dom.insertBefore(bom, that.end);\n            }\n\n            normalize(range.commonAncestorContainer);\n\n            range.setStartBefore(that.start);\n            range.setEndAfter(that.end);\n\n            return range;\n        },\n\n        _removeDeadMarkers: function(start, end) {\n            if (start.previousSibling && start.previousSibling.nodeValue == \"\\ufeff\") {\n                dom.remove(start.previousSibling);\n            }\n\n            if (end.nextSibling && end.nextSibling.nodeValue == \"\\ufeff\") {\n                dom.remove(end.nextSibling);\n            }\n        },\n\n        _normalizedIndex: function(node) {\n            var index = findNodeIndex(node);\n            var pointer = node;\n\n            while (pointer.previousSibling) {\n                if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                    index--;\n                }\n\n                pointer = pointer.previousSibling;\n            }\n\n            return index;\n        },\n\n        remove: function(range) {\n            var that = this,\n                start = that.start,\n                end = that.end,\n                shouldNormalizeStart,\n                shouldNormalizeEnd,\n                shouldNormalize;\n\n            normalize(range.commonAncestorContainer);\n\n            while (!start.nextSibling && start.parentNode) {\n                start = start.parentNode;\n            }\n\n            while (!end.previousSibling && end.parentNode) {\n                end = end.parentNode;\n            }\n\n            // merely accessing the siblings will solve range issues in IE\n            shouldNormalizeStart = (start.previousSibling && start.previousSibling.nodeType == 3) &&\n                                   (start.nextSibling && start.nextSibling.nodeType == 3);\n\n            shouldNormalizeEnd = (end.previousSibling && end.previousSibling.nodeType == 3) &&\n                                 (end.nextSibling && end.nextSibling.nodeType == 3);\n\n            shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n\n            start = start.nextSibling;\n            end = end.previousSibling;\n\n            var isBomSelected = start === end && dom.isBom(start);\n            if (isBomSelected && start.length > 1) {\n                start.nodeValue = start.nodeValue.charAt(0);\n            }\n\n            var collapsed = isBomSelected;\n            var collapsedToStart = false;\n            // collapsed range\n            if (start == that.end) {\n                collapsedToStart = !!that.start.previousSibling;\n                start = end = that.start.previousSibling || that.end.nextSibling;\n                collapsed = true;\n            }\n\n            dom.remove(that.start);\n            dom.remove(that.end);\n\n            if (!start || !end) {\n                range.selectNodeContents(range.commonAncestorContainer);\n                range.collapse(true);\n                return;\n            }\n\n            var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n            var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n\n            if (start.nodeType == 3) {\n                while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                    start = start.previousSibling;\n                    startOffset += start.nodeValue.length;\n                }\n            }\n\n            if (end.nodeType == 3) {\n                while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                    end = end.previousSibling;\n                    endOffset += end.nodeValue.length;\n                }\n            }\n\n            var startParent = start.parentNode;\n            var endParent = end.parentNode;\n            var startIndex = this._normalizedIndex(start);\n            var endIndex = this._normalizedIndex(end);\n\n            normalize(startParent);\n            if (start.nodeType == 3) {\n                start = startParent.childNodes[startIndex];\n            }\n\n            normalize(endParent);\n            if (end.nodeType == 3) {\n                end = endParent.childNodes[endIndex];\n            }\n\n            if (collapsed) {\n                if (start.nodeType == 3) {\n                    range.setStart(start, startOffset);\n                } else {\n                    range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n                }\n\n                range.collapse(true);\n\n            } else {\n                if (start.nodeType == 3) {\n                    range.setStart(start, startOffset);\n                } else {\n                    range.setStartBefore(start);\n                }\n\n                if (end.nodeType == 3) {\n                    range.setEnd(end, endOffset);\n                } else {\n                    range.setEndAfter(end);\n                }\n            }\n\n            if (that.caret) {\n                that.removeCaret(range);\n            }\n        }\n    });\n\n    var boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n\n    var RangeUtils = {\n        nodes: function(range) {\n            var nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                range.selectNodeContents(range.commonAncestorContainer);\n                nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                }\n            }\n            return nodes;\n        },\n\n        textNodes: function(range) {\n            var allNodes = new RangeEnumerator(range).enumerate(),\n                result = allNodes.filter(function(node) {\n                    return dom.allowsTextContent(node.parentElement);\n                });\n\n            return result;\n        },\n\n        editableTextNodes: function(range) {\n            var nodes = [],\n                immutableParent = Editor.Immutables && Editor.Immutables.immutableParent,\n                result = [];\n\n            if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n                nodes = new ImmutablesRangeEnumerator(range).enumerate();\n                result = nodes.filter(function(node) {\n                    return dom.allowsTextContent(node.parentElement);\n                });\n            }\n\n            return result;\n        },\n\n        documentFromRange: function(range) {\n            var startContainer = range.startContainer;\n            return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n        },\n\n        createRange: function(document) {\n            return document.createRange();\n        },\n\n        selectRange: function(range) {\n            var image = RangeUtils.image(range);\n            if (image) {\n                range.setStartAfter(image);\n                range.setEndAfter(image);\n            }\n            var selection = SelectionUtils.selectionFromRange(range);\n            selection.removeAllRanges();\n            selection.addRange(range);\n        },\n\n        stringify: function(range) {\n            return kendo.format(\n                \"{0}:{1} - {2}:{3}\",\n                dom.name(range.startContainer), range.startOffset,\n                dom.name(range.endContainer), range.endOffset\n            );\n        },\n\n        split: function(range, node, trim) {\n            function partition(start) {\n                var partitionRange = range.cloneRange();\n                partitionRange.collapse(start);\n                partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n                var contents = partitionRange.extractContents();\n                if (trim) {\n                    contents = dom.trim(contents);\n                }\n                dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n            }\n            partition(true);\n            partition(false);\n        },\n\n        mapAll: function(range, map) {\n            var nodes = [];\n\n            new RangeIterator(range).traverse(function(node) {\n                var mapped = map(node);\n\n                if (mapped && $.inArray(mapped, nodes) < 0) {\n                    nodes.push(mapped);\n                }\n            });\n\n            return nodes;\n        },\n\n        getAll: function(range, predicate) {\n            var selector = predicate;\n\n            if (typeof predicate == \"string\") {\n                predicate = function(node) {\n                    return dom.is(node, selector);\n                };\n            }\n\n            return RangeUtils.mapAll(range, function(node) {\n                if (predicate(node)) {\n                    return node;\n                }\n            });\n        },\n\n        getMarkers: function(range) {\n            return RangeUtils.getAll(range, function(node) {\n                return node.className == 'k-marker';\n            });\n        },\n\n        image: function(range) {\n            var nodes = RangeUtils.getAll(range, \"img\");\n\n            if (nodes.length == 1) {\n                return nodes[0];\n            }\n        },\n\n        isStartOf: function(originalRange, node) {\n            if (originalRange.startOffset !== 0) {\n                return false;\n            }\n\n            var range = originalRange.cloneRange();\n\n            while (range.startOffset === 0 && range.startContainer != node) {\n                var index = dom.findNodeIndex(range.startContainer);\n                var parent = range.startContainer.parentNode;\n\n                while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                    index--;\n                }\n\n                range.setStart(parent, index);\n            }\n\n            return range.startOffset === 0 && range.startContainer == node;\n        },\n\n        isEndOf: function(originalRange, node) {\n            var range = originalRange.cloneRange();\n\n            range.collapse(false);\n\n            var start = range.startContainer;\n\n            if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n                range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n                range.collapse(true);\n            }\n\n            range.setEnd(node, dom.getNodeLength(node));\n\n            var nodes = [];\n\n            function visit(node) {\n                if (!dom.insignificant(node) && !(dom.isDataNode(node) && /^[\\ufeff]*$/.test(node.nodeValue))) {\n                    nodes.push(node);\n                }\n            }\n\n            new RangeIterator(range).traverse(visit);\n\n            return !nodes.length;\n        },\n\n        wrapSelectedElements: function(range) {\n            var startEditable = dom.editableParent(range.startContainer);\n            var endEditable = dom.editableParent(range.endContainer);\n\n            while (range.startOffset === 0 && range.startContainer != startEditable) {\n                range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n            }\n\n            function isEnd(offset, container) {\n                var length = dom.getNodeLength(container);\n\n                if (offset == length) {\n                    return true;\n                }\n\n                for (var i = offset; i < length; i++) {\n                    if (!dom.insignificant(container.childNodes[i])) {\n                        return false;\n                    }\n                }\n\n                return true;\n            }\n\n            while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n                range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n            }\n\n            return range;\n        },\n\n        expand: function(range) {\n            var result = range.cloneRange();\n\n            var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n            var endContainer = result.endContainer.childNodes[result.endOffset];\n\n            if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n                return result;\n            }\n\n            var beforeCaret = startContainer.nodeValue;\n            var afterCaret = endContainer.nodeValue;\n\n            if (!beforeCaret || !afterCaret) {\n                return result;\n            }\n\n            var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n            var endOffset = afterCaret.search(boundary);\n\n            if (!startOffset || !endOffset) {\n                return result;\n            }\n\n            endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n            startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n\n            result.setStart(startContainer, startOffset);\n            result.setEnd(endContainer, endOffset);\n\n            return result;\n        },\n\n        isExpandable: function(range) {\n            var node = range.startContainer;\n            var rangeDocument = RangeUtils.documentFromRange(range);\n\n            if (node == rangeDocument || node == rangeDocument.body) {\n                return false;\n            }\n\n            var result = range.cloneRange();\n\n            var value = node.nodeValue;\n            if (!value) {\n                return false;\n            }\n\n            var beforeCaret = value.substring(0, result.startOffset);\n            var afterCaret = value.substring(result.startOffset);\n\n            var startOffset = 0, endOffset = 0;\n\n            if (beforeCaret) {\n                startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n            }\n\n            if (afterCaret) {\n                endOffset = afterCaret.search(boundary);\n            }\n\n            return startOffset && endOffset;\n        }\n    };\n\n    extend(Editor, {\n        SelectionUtils: SelectionUtils,\n        W3CRange: W3CRange,\n        RangeIterator: RangeIterator,\n        W3CSelection: W3CSelection,\n        RangeEnumerator: RangeEnumerator,\n        RestorePoint: RestorePoint,\n        Marker: Marker,\n        RangeUtils: RangeUtils\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            Editor = kendo.ui.editor,\n            dom = Editor.Dom,\n            template = kendo.template,\n            RangeUtils = Editor.RangeUtils,\n            complexBlocks = [\"ul\", \"ol\", \"tbody\", \"thead\", \"table\"],\n            toolsToBeUpdated = [\n                \"bold\",\n                \"italic\",\n                \"underline\",\n                \"strikethrough\",\n                \"superscript\",\n                \"subscript\",\n                \"forecolor\",\n                \"backcolor\",\n                \"fontname\",\n                \"fontsize\",\n                \"createlink\",\n                \"unlink\",\n                \"autolink\",\n                \"addcolumnleft\",\n                \"addcolumnright\",\n                \"addrowabove\",\n                \"addrowbelow\",\n                \"deleterow\",\n                \"deletecolumn\",\n                \"mergecells\",\n                \"formatting\",\n                \"cleanformatting\" ],\n            IMMUTABALE = \"k-immutable\",\n            IMMUTABALE_MARKER_SELECTOR = \"[\" + IMMUTABALE + \"]\",\n            IMMUTABLE_SELECTOR = \"[contenteditable='false']\";\n\n        var rootCondition = function(node) {\n            return $(node).is(\"body,.k-editor\");\n        };\n\n        var immutable = function(node) {\n            return node.getAttribute && node.getAttribute(\"contenteditable\") == \"false\";\n        };\n\n        var immutableParent = function(node) {\n            return dom.closestBy(node, immutable, rootCondition);\n        };\n\n        var expandImmutablesIn = function(range) {\n            var startImmutableParent = immutableParent(range.startContainer);\n            var endImmutableParent = immutableParent(range.endContainer);\n\n            if (startImmutableParent || endImmutableParent) {\n                if (startImmutableParent) {\n                    range.setStartBefore(startImmutableParent);\n                }\n                if (endImmutableParent) {\n                    range.setEndAfter(endImmutableParent);\n                }\n            }\n        };\n\n        var immutablesContext = function(range) {\n            if (immutableParent(range.commonAncestorContainer)) {\n                return true;\n            } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n                var editableNodes = RangeUtils.editableTextNodes(range);\n                if (editableNodes.length === 0) {\n                    return true;\n                }\n            }\n            return false;\n        };\n\n        var randomId = function(length) {\n            var result = '';\n            var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n            for (var i = length || 10; i > 0; --i) {\n                result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n            }\n            return result;\n        };\n\n        var removeImmutables = function(root) {\n            var serializedImmutables = { empty: true }, nodeName, id, serialized;\n             $(root).find(IMMUTABLE_SELECTOR).each(function(i, node) {\n                nodeName = dom.name(node);\n                id = randomId();\n                serialized = \"<\" + nodeName + \" \" + IMMUTABALE + \"='\" + id + \"'></\" + nodeName + \">\";\n                serializedImmutables[id] = { node: node, style: $(node).attr(\"style\") };\n                serializedImmutables.empty = false;\n                $(node).replaceWith(serialized);\n            });\n\n            return serializedImmutables;\n        };\n\n        var restoreImmutables = function(root, serializedImmutables) {\n            var id, immutable;\n            $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function(i, node) {\n                id = node.getAttribute(IMMUTABALE);\n                immutable = serializedImmutables[id];\n                $(node).replaceWith(immutable.node);\n                if (immutable.style != $(immutable.node).attr(\"style\")) {\n                    $(immutable.node).removeAttr(\"style\").attr(\"style\", immutable.style);\n                }\n            });\n        };\n\n        var deletingKey = function(keyCode) {\n            var keys = kendo.keys;\n            return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n        };\n        var updateToolOptions = function(tool) {\n            var options = tool ? tool.options : undefined$1;\n            if (options && options.finder) {\n                options.finder._initOptions({ immutables: true });\n            }\n        };\n\n        var Immutables = Class.extend({\n            init: function(editor) {\n                this.editor = editor;\n                this.serializedImmutables = {};\n                this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n\n                var tools = kendo.ui.Editor.defaultTools;\n                updateToolOptions(tools.justifyLeft);\n                updateToolOptions(tools.justifyCenter);\n                updateToolOptions(tools.justifyRight);\n                updateToolOptions(tools.justifyFull);\n            },\n\n            serialize: function(node) {\n                var result = this._toHtml(node),\n                    id;\n\n                if (result.indexOf(IMMUTABALE) === -1) {\n                    id = this.randomId();\n                    result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n                } else {\n                    id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n                }\n\n                this.serializedImmutables[id] = node;\n                return result;\n            },\n\n            _toHtml: function(node) {\n                var serialization = this.options.serialization;\n                var serializationType = typeof serialization;\n                var nodeName;\n\n                switch (serializationType) {\n                    case \"string\":\n                        return template(serialization)(node);\n                    case \"function\":\n                        return serialization(node);\n                    default:\n                        nodeName = dom.name(node);\n                        return \"<\" + nodeName + \"></\" + nodeName + \">\";\n                }\n            },\n\n            deserialize: function(node) {\n                var that = this;\n                var deserialization = this.options.deserialization;\n\n                $(IMMUTABALE_MARKER_SELECTOR, node).each(function() {\n                    var id = this.getAttribute(IMMUTABALE);\n                    var immutable = that.serializedImmutables[id];\n                    if (kendo.isFunction(deserialization)) {\n                        deserialization(this, immutable);\n                    }\n                    $(this).replaceWith(immutable);\n                });\n\n                that.serializedImmutables = {};\n            },\n\n            randomId: function(length) {\n                return randomId(length);\n            },\n\n            keydown: function(e, range) {\n                var isDeleting = deletingKey(e.keyCode);\n                var shouldCancelEvent = (isDeleting && this._cancelDeleting(e, range)) ||\n                    (!isDeleting && this._cancelTyping(e, range));\n\n                if (shouldCancelEvent) {\n                    e.preventDefault();\n                    return true;\n                }\n            },\n\n            _cancelTyping: function(e, range) {\n                var editor = this.editor;\n                var keyboard = editor.keyboard;\n\n                return range.collapsed && !keyboard.typingInProgress &&\n                    keyboard.isTypingKey(e) && immutablesContext(range);\n            },\n\n            _cancelDeleting: function(e, range) {\n                var keys = kendo.keys;\n                var backspace = e.keyCode === keys.BACKSPACE;\n                var del = e.keyCode == keys.DELETE;\n\n                if (!backspace && !del) {\n                    return false;\n                }\n                var cancelDeleting = false;\n                if (range.collapsed) {\n                    if (immutablesContext(range)) {\n                        return true;\n                    }\n                    var immutable = this.nextImmutable(range, del);\n                    if (immutable && backspace) {\n                        var closestSelectionLi = dom.closest(range.commonAncestorContainer, \"li\");\n                        if (closestSelectionLi) {\n                            var closestImmutableLi = dom.closest(immutable, \"li\");\n                            if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                                return cancelDeleting;\n                            }\n                        }\n                    }\n                    if (immutable && !dom.tableCell(immutable)) {\n                        if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                            while (immutable && immutable.parentNode.childNodes.length == 1) {\n                                immutable = immutable.parentNode;\n                            }\n                            if (dom.tableCell(immutable)) {\n                                return cancelDeleting;\n                            }\n                            this._removeImmutable(immutable, range);\n                        }\n                        cancelDeleting = true;\n                    }\n                }\n                return cancelDeleting;\n            },\n\n            nextImmutable: function(range, forwards) {\n                var commonContainer = range.commonAncestorContainer;\n                if (dom.isBom(commonContainer) || ((forwards && RangeUtils.isEndOf(range, commonContainer)) || (!forwards && RangeUtils.isStartOf(range, commonContainer)))) {\n                    var next = this._nextNode(commonContainer, forwards);\n                    if (next && dom.isBlock(next) && !immutableParent(next)) {\n                        while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                            next = next.children[forwards ? 0 : next.children.length - 1];\n                        }\n                    }\n                    return immutableParent(next);\n                }\n            },\n\n            _removeImmutable: function(immutable, range) {\n                var editor = this.editor;\n                var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n                dom.remove(immutable);\n                Editor._finishUpdate(editor, startRestorePoint);\n            },\n\n            _nextNode: function(node, forwards) {\n                var sibling = forwards ? \"nextSibling\" : \"previousSibling\";\n                var current = node, next;\n                while (current && !next && !dom.isChildOfBaseContainer(current)) {\n                    next = current[sibling];\n                    if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                        current = next;\n                        next = current[sibling];\n                    }\n                    if (!next) {\n                        current = current.parentNode;\n                    }\n                }\n                return next;\n            }\n        });\n\n        Immutables.immutable = immutable;\n        Immutables.immutableParent = immutableParent;\n        Immutables.expandImmutablesIn = expandImmutablesIn;\n        Immutables.immutablesContext = immutablesContext;\n        Immutables.toolsToBeUpdated = toolsToBeUpdated;\n        Immutables.removeImmutables = removeImmutables;\n        Immutables.restoreImmutables = restoreImmutables;\n\n        Editor.Immutables = Immutables;\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            editorNS = kendo.ui.editor,\n            dom = editorNS.Dom,\n            RestorePoint = editorNS.RestorePoint,\n            Marker = editorNS.Marker,\n            extend = $.extend;\n\n    function finishUpdate(editor, startRestorePoint) {\n        var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n        var command = new GenericCommand(startRestorePoint, endRestorePoint);\n        command.editor = editor;\n\n        editor.undoRedoStack.push(command);\n        editor._refreshTools();\n\n        return endRestorePoint;\n    }\n\n    var Command = Class.extend({\n        init: function(options) {\n            this.options = options;\n            this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n            this.marker = new Marker();\n            this.formatter = options.formatter;\n        },\n\n        getRange: function() {\n            return this.restorePoint.toRange();\n        },\n\n        lockRange: function(expand) {\n            return this.marker.add(this.getRange(), expand);\n        },\n\n        releaseRange: function(range) {\n            this.marker.remove(range);\n            this.editor.selectRange(range);\n        },\n\n        undo: function() {\n            var point = this.restorePoint;\n            point.restoreHtml();\n            this.editor.selectRange(point.toRange());\n        },\n\n        redo: function() {\n            this.exec();\n        },\n\n        createDialog: function(content, options) {\n            var editor = this.editor;\n\n            return $(content).appendTo(document.body)\n                .kendoWindow(extend({}, editor.options.dialogOptions, options))\n                .closest(\".k-window\")\n                .addClass(\"k-editor-window\")\n                .toggleClass(\"k-rtl\", kendo.support.isRtl(editor.wrapper)).end();\n        },\n\n        exec: function() {\n            var range = this.lockRange(true);\n            this.formatter.editor = this.editor;\n            this.formatter.toggle(range);\n            this.releaseRange(range);\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        },\n\n        expandImmutablesIn: function(range) {\n            if (this.immutables()) {\n                kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                this.restorePoint = new RestorePoint(range, this.editor.body);\n            }\n        },\n\n        _actionButtonsTemplate: function(ref) {\n            var messages = ref.messages;\n            var insertButtonIcon = ref.insertButtonIcon;\n            var cancelButtonIcon = ref.cancelButtonIcon;\n\n            return '<div class=\"k-actions k-actions-start k-actions-horizontal k-window-buttons\">' +\n            kendo.html.renderButton((\"<button class=\\\"k-dialog-insert\\\">\" + (messages.dialogInsert) + \"</button>\"), { themeColor: \"primary\", icon: insertButtonIcon }) +\n            kendo.html.renderButton((\"<button class=\\\"k-dialog-close\\\">\" + (messages.dialogCancel) + \"</button>\"), { icon: cancelButtonIcon }) +\n        '</div>';\n        }\n    });\n\n    var GenericCommand = Class.extend({\n        init: function(startRestorePoint, endRestorePoint) {\n            this.body = startRestorePoint.body;\n            this.startRestorePoint = startRestorePoint;\n            this.endRestorePoint = endRestorePoint;\n        },\n\n        redo: function() {\n            dom.removeChildren(this.body);\n\n            this.body.innerHTML = this.endRestorePoint.html;\n            this.editor.selectRange(this.endRestorePoint.toRange());\n        },\n\n        undo: function() {\n            dom.removeChildren(this.body);\n\n            this.body.innerHTML = this.startRestorePoint.html;\n            this.editor.selectRange(this.startRestorePoint.toRange());\n        }\n    });\n\n    extend(editorNS, {\n        _finishUpdate: finishUpdate,\n        Command: Command,\n        GenericCommand: GenericCommand\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        dom = Editor.Dom;\n\n    var ViewHtmlCommand = Command.extend({\n        init: function(options) {\n            var cmd = this;\n            cmd.options = options;\n            Command.fn.init.call(cmd, options);\n            cmd.attributes = null;\n            cmd.async = true;\n        },\n\n        exec: function() {\n            var that = this,\n                editor = that.editor,\n                options = editor.options,\n                messages = editor.options.messages,\n                dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body),\n                textarea = \".k-editor-textarea > textarea\",\n                content, comments;\n\n            options.serialization.immutables = editor.immutables;\n\n            comments = dom.getAllComments(editor.body);\n\n            content = EditorUtils.cacheComments(editor.value(), comments);\n            content = ViewHtmlCommand.indent(content);\n            content = EditorUtils.retrieveComments(content, comments);\n\n            options.serialization.immutables = undefined$1;\n\n            function apply(e) {\n                options.deserialization.immutables = editor.immutables;\n                editor.value(dialog.find(textarea).val());\n                options.deserialization.immutables = undefined$1;\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n\n                editor.trigger(\"change\");\n            }\n\n            function close(e) {\n                e.preventDefault();\n\n                dialog.data(\"kendoWindow\").destroy();\n\n                if (editor.immutables) {\n                    editor.immutables.serializedImmutables = {};\n                }\n\n                editor.focus();\n            }\n\n            var window = this.createDialog(dialog, {\n                title: messages.viewHtml,\n                _footerTemplate: ViewHtmlCommand._footerTemplate,\n                _footerMessages: messages,\n                width: 600,\n                height: 400,\n                resizable: true,\n                close: close,\n                visible: false\n            })\n                .find(textarea).val(content).end()\n                .data(\"kendoWindow\");\n\n                window.center().open();\n\n                window.wrapper.find(\".k-dialog-update\").on(\"click\", apply).end();\n                window.wrapper.find(\".k-dialog-close\").on(\"click\", close).end();\n            dialog.find(textarea).trigger(\"focus\");\n        }\n    });\n\n    extend(ViewHtmlCommand, {\n        template: function () { return '<div class=\"k-editor-dialog k-popup-edit-form k-viewhtml-dialog\">' +\n            '<span class=\"k-input k-textarea k-input-solid k-input-md k-rounded-md k-editor-textarea\"><textarea class=\"k-input-inner !k-overflow-auto !k-resize-none\"></textarea></span>' +\n        '</div>'; },\n        _footerTemplate: function (ref) {\n            var dialogUpdate = ref.dialogUpdate;\n            var dialogCancel = ref.dialogCancel;\n\n            return \"<div class=\\\"k-actions k-actions-start k-actions-horizontal k-window-actions\\\">\" +\n            kendo.html.renderButton((\"<button class=\\\"k-dialog-update\\\">\" + (kendo.htmlEncode(dialogUpdate)) + \"</button>\"), { themeColor: \"primary\", icon: \"check\" }) +\n            kendo.html.renderButton((\"<button class=\\\"k-dialog-close\\\">\" + (kendo.htmlEncode(dialogCancel)) + \"</button>\"), { icon: \"cancel-outline\" }) +\n        \"</div>\";\n    },\n        indent: function(content) {\n            return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/ig, \"</$1>\\n\")\n                          .replace(/<(ul|ol)([^>]*)><li/ig, \"<$1$2>\\n<li\")\n                          .replace(/<br \\/>/ig, \"<br />\\n\")\n                          .replace(/\\n$/, \"\");\n        }\n    });\n\n    kendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n\n    Editor.EditorUtils.registerTool(\"viewHtml\", new Tool({ command: ViewHtmlCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        Tool = Editor.Tool,\n        Command = Editor.Command,\n        EditorUtils = Editor.EditorUtils;\n\n    var FormatCommand = Command.extend({\n        init: function(options) {\n            options.formatter = options.formatter();\n            var finder = options.formatter.finder;\n            if (finder && EditorUtils.formatByName(\"immutable\", finder.format)) {\n                finder._initOptions({ immutables: options.immutables });\n            }\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var FormatTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n        },\n\n        command: function(commandArguments) {\n            var that = this;\n\n            return new FormatCommand(extend(commandArguments, {\n                formatter: that.options.formatter\n            }));\n        },\n\n        update: function(ui, nodes) {\n            var isFormatted = this.options.finder.isFormatted(nodes),\n                toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n            if (toolbar && ui.getKendoToggleButton()) {\n                toolbar.toggle(ui, isFormatted);\n            }\n        }\n    });\n\n    $.extend(Editor, {\n        FormatCommand: FormatCommand,\n        FormatTool: FormatTool\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        Editor = kendo.ui.editor,\n        formats = kendo.ui.Editor.fn.options.formats,\n        Tool = Editor.Tool,\n        FormatTool = Editor.FormatTool,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        extend = $.extend,\n        registerTool = Editor.EditorUtils.registerTool,\n        registerFormat = Editor.EditorUtils.registerFormat,\n        MOUSEDOWN_NS = \"mousedown.kendoEditor\",\n        KEYDOWN_NS = \"keydown.kendoEditor\",\n        KMARKER = \"k-marker\";\n\n    var InlineFormatFinder = Class.extend({\n        init: function(format) {\n            this.format = format;\n        },\n\n        numberOfSiblings: function(referenceNode) {\n            var textNodesCount = 0,\n                elementNodesCount = 0,\n                markerCount = 0,\n                parentNode = referenceNode.parentNode,\n                node;\n\n            for (node = parentNode.firstChild; node; node = node.nextSibling) {\n                if (node != referenceNode) {\n                    if (node.className == KMARKER) {\n                        markerCount++;\n                    } else if (node.nodeType == 3) {\n                        textNodesCount++;\n                    } else {\n                        elementNodesCount++;\n                    }\n                }\n            }\n\n            if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n                // full node selection\n                return 0;\n            } else {\n                return elementNodesCount + textNodesCount;\n            }\n        },\n\n        findSuitable: function(sourceNode, skip) {\n            if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n                return null;\n            }\n\n            var node = sourceNode.parentNode;\n            var tags = this.format[0].tags;\n\n            while (!dom.ofType(node, tags)) {\n                if (this.numberOfSiblings(node) > 0) {\n                    return null;\n                }\n\n                node = node.parentNode;\n            }\n\n            return node;\n        },\n\n        findFormat: function(sourceNode) {\n            var format = this.format,\n                attrEquals = dom.attrEquals,\n                i, len, node, tags, attributes;\n\n            for (i = 0, len = format.length; i < len; i++) {\n                node = sourceNode;\n                tags = format[i].tags;\n                attributes = format[i].attr;\n\n                if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                    return node;\n                }\n\n                while (node) {\n                    node = dom.parentOfType(node, tags);\n                    if (node && attrEquals(node, attributes)) {\n                        return node;\n                    }\n                }\n            }\n\n            return null;\n        },\n\n        isFormatted: function(nodes) {\n            var i, len;\n\n            for (i = 0, len = nodes.length; i < len; i++) {\n                if (this.findFormat(nodes[i])) {\n                    return true;\n                }\n            }\n            return false;\n        }\n    });\n\n    var InlineFormatter = Class.extend({\n        init: function(format, values) {\n            this.finder = new InlineFormatFinder(format);\n            this.attributes = extend({}, format[0].attr, values);\n            this.tag = format[0].tags[0];\n        },\n\n        wrap: function(node) {\n            return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n        },\n\n        activate: function(range, nodes) {\n            if (this.finder.isFormatted(nodes)) {\n                this.split(range);\n                this.remove(nodes);\n            } else {\n                this.apply(nodes);\n            }\n        },\n\n        toggle: function(range) {\n            var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n            var nodes = textNodes(range);\n\n            if (nodes.length > 0) {\n                this.activate(range, nodes);\n            }\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        },\n\n        apply: function(nodes) {\n            var formatNodes = [];\n            var i, l, node, formatNode;\n\n            if (nodes.length > 1) {\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    node = nodes[i];\n                    formatNode = this.format(node, true);\n                    formatNodes.push(formatNode);\n\n                }\n            } else {\n                node = nodes[0];\n                formatNode = this.format(node, false);\n            }\n\n            this.consolidate(formatNodes);\n        },\n\n        format: function(node, outerMostInline) {\n            var formatNode = this.finder.findSuitable(node);\n            var attributes = this.attributes;\n            var styleAttr = attributes ? attributes.style || {} : {};\n\n            if (formatNode) {\n                if (dom.is(formatNode, \"font\")) {\n                    if (styleAttr.color) {\n                        formatNode.removeAttribute(\"color\");\n                    }\n                    if (styleAttr.fontName) {\n                        formatNode.removeAttribute(\"face\");\n                    }\n                    if (styleAttr.fontSize) {\n                        formatNode.removeAttribute(\"size\");\n                    }\n                }\n                dom.attr(formatNode, attributes);\n            } else {\n                while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true' && outerMostInline) {\n                    node = node.parentNode;\n                }\n\n                formatNode = this.wrap(node);\n            }\n\n            return formatNode;\n        },\n\n        remove: function(nodes) {\n            var i, l, formatNode;\n\n            for (i = 0, l = nodes.length; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    if (this.attributes && this.attributes.style) {\n                        dom.unstyle(formatNode, this.attributes.style);\n                        if (!formatNode.style.cssText && !formatNode.attributes[\"class\"]) {\n                            dom.unwrap(formatNode);\n                        }\n                    } else {\n                        dom.unwrap(formatNode);\n                    }\n                }\n            }\n        },\n\n        split: function(range) {\n            var nodes = RangeUtils.textNodes(range);\n            var l = nodes.length;\n            var i, formatNode;\n\n            if (l > 0) {\n                for (i = 0; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        RangeUtils.split(range, formatNode, true);\n                    }\n                }\n            }\n        },\n\n        consolidate: function(nodes) {\n            var node, last;\n\n            while (nodes.length > 1) {\n                node = nodes.pop();\n                last = nodes[nodes.length - 1];\n\n                if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                    last.appendChild(node.previousSibling);\n                }\n\n                if (node.tagName == last.tagName &&\n                    node.previousSibling == last &&\n                    node.style.cssText == last.style.cssText &&\n                    node.className === last.className) {\n\n                    while (node.firstChild) {\n                        last.appendChild(node.firstChild);\n                    }\n\n                    dom.remove(node);\n                }\n            }\n        }\n    });\n\n    var GreedyInlineFormatFinder = InlineFormatFinder.extend({\n        init: function(format, greedyProperty, fontAttr) {\n            this.format = format;\n            this.greedyProperty = greedyProperty;\n            this.fontAttr = fontAttr;\n            InlineFormatFinder.fn.init.call(this, format);\n        },\n\n        getInlineCssValue: function(node) {\n            var attributes = node.attributes;\n            var trim = kendo.trim;\n            var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n            var propertyAndValue, property, value;\n\n            if (!attributes) {\n                return;\n            }\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n                attributeValue = attribute.nodeValue;\n\n                if (attribute.specified && name == \"style\") {\n\n                    css = trim(attributeValue || node.style.cssText).split(\";\");\n\n                    for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                        pair = css[cssIndex];\n                        if (pair.length) {\n                            propertyAndValue = pair.split(\":\");\n                            property = trim(propertyAndValue[0].toLowerCase());\n                            value = trim(propertyAndValue[1]);\n\n                            if (property != this.greedyProperty) {\n                                continue;\n                            }\n\n                            return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n                        }\n                    }\n                }\n\n                if (this.fontAttr && attribute.specified && name == this.fontAttr) {\n                    property = attribute.nodeValue;\n                    value = attribute.nodeValue;\n\n                    return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n                }\n            }\n        },\n\n        getFormatInner: function(node) {\n            var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n            var parents = $node.parentsUntil(\"[contentEditable]\").addBack().toArray().reverse();\n            var i, len, value;\n\n            for (i = 0, len = parents.length; i < len; i++) {\n                value = this.greedyProperty == \"className\" ? parents[i].className : this.getInlineCssValue(parents[i]);\n\n                if (value) {\n                    return value;\n                }\n            }\n\n            return \"inherit\";\n        },\n\n        getFormat: function(nodes) {\n            var result = this.getFormatInner(nodes[0]), i, len;\n\n            for (i = 1, len = nodes.length; i < len; i++) {\n                if (result != this.getFormatInner(nodes[i])) {\n                    return \"\";\n                }\n            }\n\n            return result;\n        },\n\n        isFormatted: function(nodes) {\n            return this.getFormat(nodes) !== \"\";\n        }\n    });\n\n    var GreedyInlineFormatter = InlineFormatter.extend({\n        init: function(format, values, greedyProperty) {\n            InlineFormatter.fn.init.call(this, format, values);\n\n            this.values = values;\n            this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n\n            if (greedyProperty) {\n                this.greedyProperty = kendo.toCamelCase(greedyProperty);\n            }\n\n        },\n\n        activate: function(range, nodes) {\n            var greedyProperty = this.greedyProperty;\n            var action = \"apply\";\n\n            this.split(range);\n\n            if (greedyProperty && this.values.style[greedyProperty] == \"inherit\") {\n                action = \"remove\";\n            }\n\n            this[action](nodes);\n        }\n    });\n\n    var InlineFormatTool = FormatTool.extend({\n        init: function(options) {\n            FormatTool.fn.init.call(this, extend(options, {\n                finder: new InlineFormatFinder(options.format),\n                formatter: function() { return new InlineFormatter(options.format); }\n            }));\n        }\n    });\n\n    var DelayedExecutionTool = Tool.extend({\n        update: function(ui, nodes) {\n            var list = ui.data(this.type);\n\n            list.close();\n            list.value(this.finder.getFormat(nodes));\n        }\n    });\n\n    var FontTool = DelayedExecutionTool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n\n            // IE has single selection hence we are using select box instead of combobox\n            this.type = \"kendoComboBox\";\n            this.format = [{ tags: [\"span\", \"font\"] }];\n            this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr, options.fontAttr);\n        },\n\n        command: function(commandArguments) {\n            var options = this.options,\n                format = this.format,\n                style = {};\n\n            return new Editor.FormatCommand(extend(commandArguments, {\n                formatter: function() {\n                    style[options.domAttr] = commandArguments.value;\n\n                    return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                }\n            }));\n        },\n\n        initialize: function(ui, editor) {\n            var options = this.options,\n                toolName = options.name,\n                dataSource,\n                range,\n                widget = ui.data(\"kendoComboBox\"),\n                defaultValue = [];\n\n            if (!widget) {\n                return;\n            }\n\n            if (options.defaultValue) {\n               defaultValue = [{\n                    text: editor.options.messages[options.defaultValue[0].text],\n                    value: options.defaultValue[0].value\n               }];\n            }\n\n            dataSource = defaultValue.concat(options.items ? options.items : (editor.options[toolName] || [] ));\n            widget.setDataSource(dataSource);\n\n            widget.bind(\"change\", function (e) {\n                editor._range = range;\n                if (e.sender.value() !== \"\") {\n                    Tool.exec(editor, toolName, e.sender.value());\n                }\n            });\n\n            widget.bind(\"close\", function () {\n                setTimeout(function() {\n                    editor._deleteSavedRange();\n                },0);\n            });\n\n            widget.value(\"inherit\");\n\n            widget.wrapper.on(MOUSEDOWN_NS, \".k-select,.k-input-button,.k-input\", function() {\n                var newRange = editor.getRange();\n                range = editor._containsRange(newRange) ? newRange : range;\n            })\n            .on(KEYDOWN_NS, function(e) {\n                if (e.keyCode === kendo.keys.ENTER) {\n                    editor._deleteSavedRange();\n                    e.preventDefault();\n                }\n            });\n        }\n\n    });\n\n    var ColorTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n\n            this.format = [{ tags: [\"span\",\"font\"] }];\n            this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n        },\n\n        options: {\n            palette: \"websafe\",\n            columns: 18\n        },\n\n        update: function() {\n            this._widget.close();\n        },\n\n        command: function(commandArguments) {\n            var options = this.options,\n                format = this.format,\n                style = {};\n\n            return new Editor.FormatCommand(extend(commandArguments, {\n                formatter: function() {\n                    style[options.domAttr] = commandArguments.value;\n\n                    return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                }\n            }));\n        },\n\n        initialize: function(ui, editor) {\n            var that = this,\n                toolName = that.options.name,\n                component = this._widget = ui.getKendoColorPicker();\n\n            if (!component) {\n                return;\n            }\n\n            component.bind(\"change\", function () {\n                var color = component.value();\n\n                if (color) {\n                    Tool.exec(editor, toolName, color);\n                }\n\n                delete that.storedRange;\n                delete that._inputFocused;\n\n                editor.focus();\n            });\n\n            component.bind(\"open\", function () {\n                that.storedRange = editor.getRange();\n\n                component._popup.element.on(MOUSEDOWN_NS, function(e) {\n                    if (!$(e.target).is(\"input.k-color-value\")) {\n                        e.preventDefault();\n                    }\n                });\n\n                if (!component._popup.element.is(\"[unselectable='on']\")) {\n                    component._popup.element\n                        .attr({ unselectable: \"on\" })\n                        .find(\"*:not(input)\").attr(\"unselectable\", \"on\")\n                        .end().find(\"input\").on(\"focus\", function() {\n                            that._inputFocused = true;\n                        });\n                }\n\n                component._popup.one(\"activate\", function () {\n                    component._popup.element.find(\".k-colorpalette\").trigger(\"focus\");\n                });\n            });\n\n            component.bind(\"close\", function (e) {\n                component._popup.element.off(MOUSEDOWN_NS);\n            });\n\n            component.unbind(\"activate\").bind(\"activate\", function (e) {\n                if (!component._value || component._value.toCssRgba() === \"rgba(255, 255, 255, 0)\") {\n                    return;\n                }\n\n                component.trigger(\"change\");\n            });\n\n            component.wrapper\n                .attr({ unselectable: \"on\" })\n                .find(\"*:not(input)\").attr(\"unselectable\", \"on\");\n\n            component.value(\"transparent\");\n        }\n    });\n\n    extend(Editor, {\n        InlineFormatFinder: InlineFormatFinder,\n        InlineFormatter: InlineFormatter,\n        DelayedExecutionTool: DelayedExecutionTool,\n        GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n        GreedyInlineFormatter: GreedyInlineFormatter,\n        InlineFormatTool: InlineFormatTool,\n        FontTool: FontTool,\n        ColorTool: ColorTool\n    });\n\n    registerFormat(\"bold\", [ { tags: [\"strong\", \"b\"] }, { tags: [\"span\"], attr: { style: { fontWeight: \"bold\" } } } ]);\n    registerTool(\"bold\", new InlineFormatTool({\n        key: \"B\",\n        ctrl: true,\n        format: formats.bold,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerFormat(\"italic\", [ { tags: [\"em\", \"i\"] }, { tags: [\"span\"], attr: { style: { fontStyle: \"italic\" } } } ]);\n    registerTool(\"italic\", new InlineFormatTool({\n        key: \"I\",\n        ctrl: true,\n        format: formats.italic,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerFormat(\"underline\", [ { tags: [\"span\"], attr: { style: { textDecoration: \"underline\" } } }, { tags: [\"u\"] } ]);\n    registerTool(\"underline\", new InlineFormatTool({\n        key: \"U\",\n        ctrl: true,\n        format: formats.underline,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerFormat(\"strikethrough\", [ { tags: [\"del\", \"strike\"] }, { tags: [\"span\"], attr: { style: { textDecoration: \"line-through\" } } } ]);\n    registerTool(\"strikethrough\", new InlineFormatTool({\n        format: formats.strikethrough,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerFormat(\"superscript\", [ { tags: [\"sup\"] } ]);\n    registerTool(\"superscript\", new InlineFormatTool({\n        format: formats.superscript,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerFormat(\"subscript\", [ { tags: [\"sub\"] } ]);\n    registerTool(\"subscript\", new InlineFormatTool({\n        format: formats.subscript,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerTool(\"foreColor\", new ColorTool({\n        cssAttr: \"color\",\n        fontAttr: \"color\",\n        domAttr: \"color\",\n        name: \"foreColor\",\n        ui: {\n            type: \"component\",\n            overflow: \"never\",\n            component: \"ColorPicker\",\n            componentOptions: {\n                views: [\"palette\"],\n                toolIcon: \"foreground-color\",\n                palette: \"websafe\",\n                columns: 18,\n                preview: false,\n                input: false,\n                buttons: false,\n                commandOn: \"change\",\n                closeOnSelect: true\n            }\n        }\n    }));\n\n    registerTool(\"backColor\", new ColorTool({\n        cssAttr: \"background-color\",\n        domAttr: \"backgroundColor\",\n        name: \"backColor\",\n        ui: {\n            type: \"component\",\n            overflow: \"never\",\n            component: \"ColorPicker\",\n            componentOptions: {\n                views: [\"palette\"],\n                toolIcon: \"droplet\",\n                palette: \"websafe\",\n                columns: 18,\n                preview: false,\n                input: false,\n                buttons: false,\n                commandOn: \"change\",\n                closeOnSelect: true\n            }\n        }\n    }));\n\n    registerTool(\"fontName\", new FontTool({\n        cssAttr: \"font-family\",\n        fontAttr: \"face\",\n        domAttr: \"fontFamily\",\n        name: \"fontName\",\n        defaultValue: [{ text: \"fontNameInherit\", value: \"inherit\" }],\n        ui: {\n            type: \"component\",\n            component: \"ComboBox\",\n            componentOptions: {\n                dataValueField: \"value\",\n                dataTextField: \"text\",\n                valuePrimitive: true\n            },\n            overflow: \"never\"\n        }\n    }));\n\n    registerTool(\"fontSize\", new FontTool({\n        cssAttr: \"font-size\",\n        fontAttr: \"size\",\n        domAttr: \"fontSize\",\n        name: \"fontSize\",\n        defaultValue: [{ text: \"fontSizeInherit\", value: \"inherit\" }],\n        ui: {\n            type: \"component\",\n            component: \"ComboBox\",\n            componentOptions: {\n                dataValueField: \"value\",\n                dataTextField: \"text\",\n                valuePrimitive: true\n            },\n            overflow: \"never\"\n        }\n    }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        encode = kendo.htmlEncode,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        InlineFormatter = Editor.InlineFormatter,\n        InlineFormatFinder = Editor.InlineFormatFinder,\n        textNodes = RangeUtils.textNodes,\n        editableTextNodes = RangeUtils.editableTextNodes,\n        registerTool = Editor.EditorUtils.registerTool,\n        keys = kendo.keys;\n\n    var HTTP_PROTOCOL = \"http://\";\n    var protocolRegExp = /^\\w*:\\/\\//;\n    var endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n\n    var LinkFormatFinder = Class.extend({\n        findSuitable: function(sourceNode) {\n            return dom.parentOfType(sourceNode, [\"a\"]);\n        }\n    });\n\n    var LinkFormatter = Class.extend({\n        init: function() {\n            this.finder = new LinkFormatFinder();\n        },\n\n        apply: function(range, attributes) {\n            var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n            var markers, doc, formatter, a, parent;\n\n            if (attributes.innerText) {\n                doc = RangeUtils.documentFromRange(range);\n                markers = RangeUtils.getMarkers(range);\n\n                range.deleteContents();\n                a = dom.create(doc, \"a\", attributes);\n                range.insertNode(a);\n\n                parent = a.parentNode;\n                if (dom.name(parent) == \"a\") {\n                    dom.insertAfter(a, parent);\n                }\n\n                if (dom.emptyNode(parent)) {\n                    dom.remove(parent);\n                }\n\n                // move range and markers after inserted link\n                var ref = a;\n                for (var i = 0; i < markers.length; i++) {\n                    dom.insertAfter(markers[i], ref);\n                    ref = markers[i];\n                }\n\n                if (markers.length) {\n                    dom.insertBefore(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                    range.setStartBefore(markers[0]);\n                    range.setEndAfter(markers[markers.length - 1]);\n                }\n            } else {\n                formatter = new InlineFormatter([{ tags: [\"a\"] }], attributes);\n                formatter.finder = this.finder;\n                formatter.apply(nodes);\n            }\n        }\n    });\n\n    var UnlinkCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            options.formatter = /** @ignore */ {\n                toggle: function(range) {\n                    var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                    new InlineFormatter([{ tags: [\"a\"] }]).remove(nodes);\n                }\n            };\n            this.options = options;\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var LinkCommand = Command.extend({\n        init: function(options) {\n            var that;\n            this.options = options;\n            Command.fn.init.call(this, options);\n            this.formatter = new LinkFormatter();\n\n            if (!options.url) {\n                this.attributes = null;\n                this.async = true;\n            } else {\n                this.exec = function() {\n                    this.formatter.immutables = that && that.immutables();\n                    this.formatter.apply(options.range, {\n                        href: options.url,\n                        innerText: options.text || options.url,\n                        target: options.target\n                    });\n                };\n            }\n        },\n\n        exec: function() {\n            var messages = this.editor.options.messages;\n            this._initialText = \"\";\n            this._range = this.lockRange(true);\n            this.formatter.immutables = this.immutables();\n\n            var nodes = textNodes(this._range);\n            var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n            var img = nodes.length && dom.name(nodes[0]) == \"img\";\n\n            var dialog = this.createDialog(\"<div/>\", {\n                title: messages.createLink,\n                minWidth: 340,\n                close: this._close.bind(this),\n                visible: false\n            }).data(\"kendoWindow\");\n\n            this._form = this._createForm(dialog);\n\n            if (a) {\n                this._range.selectNodeContents(a);\n                nodes = textNodes(this._range);\n            }\n\n            this._initialText = this.linkText(nodes);\n\n            dialog.wrapper\n                .find(\".k-dialog-insert\").on(\"click\", this._apply.bind(this)).end()\n                .find(\".k-dialog-close\").on(\"click\", this._close.bind(this)).end()\n                .find(\".k-form-field input\").on(\"keydown\", this._keydown.bind(this)).end()\n                .find(\"#k-editor-link-url\").val(this.linkUrl(a)).end()\n                .find(\"#k-editor-link-text\").val(this._initialText).end()\n                .find(\"#k-editor-link-title\").val(a ? a.title : \"\").end()\n                .find(\"#k-editor-link-target\").prop(\"checked\", a ? a.target == \"_blank\" : false).end()\n                .find(\".k-editor-link-text-row\").toggle(!img);\n\n            this._dialog = dialog.center().open();\n\n            $(\"#k-editor-link-url\", dialog.element).trigger(\"focus\").select();\n        },\n\n        _createForm: function(dialog) {\n            var that = this;\n            var formElement = $(\"<div/>\").appendTo(dialog.element);\n            var messages = that.editor.options.messages;\n            var form = formElement.kendoForm({\n                renderButtons: false,\n                items: [\n                    {\n                        field: \"k-editor-link-url\",\n                        label: encode(messages.linkWebAddress),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-link-text\",\n                        label: encode(messages.linkText),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-link-title\",\n                        label: encode(messages.linkToolTip),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-link-target\",\n                        editorOptions: {\n                            label: encode(messages.linkOpenInNewWindow)\n                        },\n                        label: \"\",\n                        editor: \"CheckBox\"\n                    }\n                ]\n            }).data(\"kendoForm\");\n\n            formElement.find(\"#k-editor-link-text\").parents(\".k-form-field\").addClass(\"k-editor-link-text-row\");\n\n            dialog.element.after($(that._actionButtonsTemplate({ messages: messages, insertButtonIcon: \"link\", cancelButtonIcon: \"cancel-outline\" })));\n\n            return form;\n        },\n\n        _keydown: function(e) {\n            var keys = kendo.keys;\n\n            if (e.keyCode == keys.ENTER) {\n                this._apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                this._close(e);\n            }\n        },\n\n        _apply: function(e) {\n            var element = this._dialog.element;\n            var href = $(\"#k-editor-link-url\", element).val();\n            var title, text, target;\n            var textInput = $(\"#k-editor-link-text\", element);\n\n            if (href && href != HTTP_PROTOCOL) {\n\n                if (href.indexOf(\"@\") > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                    href = \"mailto:\" + href;\n                }\n\n                this.attributes = { href: href };\n\n                title = $(\"#k-editor-link-title\", element).val();\n                if (title) {\n                    this.attributes.title = title;\n                }\n\n                if (textInput.is(\":visible\")) {\n                    text = kendo.trim(textInput.val());\n                    if (!text && !this._initialText) {\n                        this.attributes.innerText = href;\n                    } else if (text && (text !== this._initialText)) {\n                        this.attributes.innerText = dom.stripBom(text);\n                    }\n                }\n\n                target = $(\"#k-editor-link-target\", element).is(\":checked\");\n                this.attributes.target = target ? \"_blank\" : null;\n\n                this.formatter.apply(this._range, this.attributes);\n            }\n\n            this._close(e);\n\n            if (this.change) {\n                this.change();\n            }\n        },\n\n        _close: function(e) {\n            e.preventDefault();\n            this._form.destroy();\n            this._dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n\n            this.releaseRange(this._range);\n        },\n\n        linkUrl: function(anchor) {\n            if (anchor) {\n                // IE < 8 returns absolute url if getAttribute is not used\n                return anchor.getAttribute(\"href\", 2);\n            }\n\n            return HTTP_PROTOCOL;\n        },\n\n        linkText: function(nodes) {\n            var text = \"\";\n            var i;\n\n            for (i = 0; i < nodes.length; i++) {\n                text += nodes[i].nodeValue;\n            }\n\n            return dom.stripBom(text || \"\");\n        },\n\n        redo: function() {\n            var range = this.lockRange(true);\n\n            this.formatter.apply(range, this.attributes);\n            this.releaseRange(range);\n        }\n\n    });\n\n    var AutoLinkCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n\n            this.formatter = new LinkFormatter();\n        },\n\n        exec: function() {\n            var detectedLink = this.detectLink();\n            if (!detectedLink) {\n                return;\n            }\n\n            var range = this.getRange();\n            var linkMarker = new kendo.ui.editor.Marker();\n            var linkRange = range.cloneRange();\n\n            linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n            linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n\n            range = this.lockRange();\n            linkMarker.add(linkRange);\n\n            this.formatter.apply(linkRange, {\n                href: this._ensureWebProtocol(detectedLink.text)\n            });\n\n            linkMarker.remove(linkRange);\n            this.releaseRange(range);\n        },\n\n        detectLink: function() {\n            var range = this.getRange();\n            var startNode = range.startContainer;\n            var startOffset = range.startOffset;\n            var prev = startNode.previousSibling;\n            if (!prev && ((dom.isBom(startNode) && !startNode.nextSibling) || (!startOffset && dom.isDataNode(startNode)))) {\n                startNode = startNode.parentNode;\n                startOffset = 0;\n            }\n            var traverser = new LeftDomTextTraverser({\n                node: startNode,\n                offset: startOffset,\n                cancelAtNode: function(node) { return node && dom.name(node) === \"a\"; }\n            });\n\n            var detection = new DomTextLinkDetection(traverser);\n            return detection.detectLink();\n        },\n\n        changesContent: function() {\n            return !!this.detectLink();\n        },\n\n        _ensureWebProtocol: function(linkText) {\n            var hasProtocol = this._hasProtocolPrefix(linkText);\n            return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n        },\n\n        _hasProtocolPrefix: function(linkText) {\n            return protocolRegExp.test(linkText);\n        },\n\n        _prefixWithWebProtocol: function(linkText) {\n            return HTTP_PROTOCOL + linkText;\n        }\n    });\n\n    var UnlinkTool = Tool.extend({\n        init: function(options) {\n            this.options = options;\n            this.finder = new InlineFormatFinder([{ tags: [\"a\"] }]);\n\n            Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n        },\n\n        update: function(ui, nodes) {\n            var isLink = this.finder.isFormatted(nodes),\n                toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\");\n\n            if (isLink) {\n                toolbar.enable(ui, true);\n            } else {\n                toolbar.enable(ui, false);\n            }\n        }\n    });\n\n    var DomTextLinkDetection = Class.extend({\n        init: function(traverser) {\n            this.traverser = traverser;\n            this.start = DomPos();\n            this.end = DomPos();\n            this.text = \"\";\n        },\n\n        detectLink: function() {\n            var node = this.traverser.node;\n            var offset = this.traverser.offset;\n            if (dom.isDataNode(node)) {\n                var text = node.data.substring(0, offset);\n                if (/\\s{2}$/.test(dom.stripBom(text))) {\n                    return;\n                }\n            } else if (offset === 0) {//heuristic for new line\n                var p = dom.closestEditableOfType(node, dom.blockElements);\n                if (p && p.previousSibling) {\n                    this.traverser.init({\n                        node: p.previousSibling\n                    });\n                }\n            }\n\n            this.traverser.traverse(this._detectEnd.bind(this));\n            if (!this.end.blank()) {\n                this.traverser = this.traverser.clone(this.end);\n                this.traverser.traverse(this._detectStart.bind(this));\n\n                if (!this._isLinkDetected()) {\n                    var puntuationOptions = this.traverser.extendOptions(this.start);\n                    var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                    puntuationTraverser.traverse(this._skipStartPuntuation.bind(this));\n                    if (!this._isLinkDetected()) {\n                        this.start = DomPos();\n                    }\n                }\n            }\n\n            if (this.start.blank()) {\n                return null;\n            } else {\n                return {\n                    start: this.start,\n                    end: this.end,\n                    text: this.text\n                };\n            }\n        },\n\n        _isLinkDetected: function() {\n            return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n        },\n\n        _detectEnd: function(text, node) {\n            var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n            if (i > -1) {\n                this.end.node = node;\n                this.end.offset = i + 1;\n\n                return false;\n            }\n        },\n\n        _detectStart: function(text, node) {\n            var i = lastIndexOfRegExp(text, /\\s/);\n            var ii = i + 1;\n            this.text = text.substring(ii) + this.text;\n\n            this.start.node = node;\n            this.start.offset = ii;\n\n            if (i > -1) {\n                return false;\n            }\n        },\n\n        _skipStartPuntuation: function(text, node, offset) {\n            var i = indexOfRegExp(text, /\\w/);\n            var ii = i;\n            if (i === -1) {\n                ii = text.length;\n            }\n\n            this.text = this.text.substring(ii);\n            this.start.node = node;\n            this.start.offset = ii + (offset | 0);\n\n            if (i > -1) {\n                return false;\n            }\n        }\n    });\n\n    function lastIndexOfRegExp(str, search) {\n        var i = str.length;\n        while (i-- && !search.test(str[i])) {}\n\n        return i;\n    }\n    function indexOfRegExp(str, search) {\n        var r = search.exec(str);\n\n        return r ? r.index : -1;\n    }\n\n    var DomPos = function() {\n        return {\n            node: null,\n            offset: null,\n            blank: function() {\n                return this.node === null && this.offset === null;\n            }\n        };\n    };\n\n    var DomTextTraverser = Class.extend({\n        init: function(options) {\n            this.node = options.node;\n            this.offset = options.offset === undefined$1 ? (dom.isDataNode(this.node) && this.node.length) || 0 : options.offset;\n            this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n        },\n\n        traverse: function(callback) {\n            if (!callback) {\n                return;\n            }\n            this.cancel = false;\n            this._traverse(callback, this.node, this.offset);\n        },\n\n        _traverse: function(callback, node, offset) {\n            if (!node || this.cancel) {\n                return;\n            }\n            if (node.nodeType === 3) {\n                var text = node.data;\n                if (offset !== undefined$1) {\n                    text = this.subText(text, offset);\n                }\n                this.cancel = (callback(text, node, offset) === false);\n            }\n            else {\n                var edgeNode = this.edgeNode(node);\n                this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n                return this._traverse(callback, edgeNode);\n            }\n\n            var next = this.next(node);\n            if (!next) {\n                var parent = node.parentNode;\n                while (!next && dom.isInline(parent)) {\n                    next = this.next(parent);\n                    parent = parent.parentNode;\n                }\n            }\n            this.cancel = this.cancel || this.cancelAtNode(next);\n            this._traverse(callback, next);\n        },\n\n        extendOptions: function(o) {\n            return $.extend({\n                node: this.node,\n                offset: this.offset,\n                cancelAtNode: this.cancelAtNode\n            }, o || {});\n        },\n\n        edgeNode: function(node) {},\n        next: function(node) {},\n        subText: function(text, offset) {}\n\n    });\n\n    var LeftDomTextTraverser = DomTextTraverser.extend({\n        subText: function(text, splitIndex) {\n            return text.substring(0, splitIndex);\n        },\n\n        next: function(node) {\n            return node.previousSibling;\n        },\n\n        edgeNode: function(node) {\n            return node.lastChild;\n        },\n\n        clone: function(options) {\n            var o = this.extendOptions(options);\n            return new LeftDomTextTraverser(o);\n        }\n    });\n\n    var RightDomTextTraverser = DomTextTraverser.extend({\n        subText: function(text, splitIndex) {\n            return text.substring(splitIndex);\n        },\n\n        next: function(node) {\n            return node.nextSibling;\n        },\n\n        edgeNode: function(node) {\n            return node.firstChild;\n        },\n\n        clone: function(options) {\n            var o = this.extendOptions(options);\n            return new RightDomTextTraverser(o);\n        }\n    });\n\n    extend(kendo.ui.editor, {\n        LinkFormatFinder: LinkFormatFinder,\n        LinkFormatter: LinkFormatter,\n        UnlinkCommand: UnlinkCommand,\n        LinkCommand: LinkCommand,\n        AutoLinkCommand: AutoLinkCommand,\n        UnlinkTool: UnlinkTool,\n        DomTextLinkDetection: DomTextLinkDetection,\n        LeftDomTextTraverser: LeftDomTextTraverser,\n        RightDomTextTraverser: RightDomTextTraverser\n    });\n\n    registerTool(\"createLink\", new Tool({ key: \"K\", ctrl: true, command: LinkCommand }));\n    registerTool(\"unlink\", new UnlinkTool({ key: \"K\", ctrl: true, shift: true, ui: { enable: false } }));\n    registerTool(\"autoLink\", new Tool({ key: [keys.ENTER, keys.SPACEBAR], keyPressCommand: true, command: AutoLinkCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        formats = kendo.ui.Editor.fn.options.formats,\n        dom = Editor.Dom,\n        FormatTool = Editor.FormatTool,\n        EditorUtils = Editor.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        registerFormat = EditorUtils.registerFormat,\n        RangeUtils = Editor.RangeUtils;\n\n    var BlockFormatFinder = Class.extend({\n        init: function(format) {\n            this.format = format;\n        },\n\n        contains: function(node, children) {\n            var i, len, child;\n\n            for (i = 0, len = children.length; i < len; i++) {\n                child = children[i];\n                if (!child || !dom.isAncestorOrSelf(node, child)) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        findSuitable: function(nodes) {\n            var format = this.format,\n                suitable = [],\n                i, len, candidate;\n\n            for (i = 0, len = nodes.length; i < len; i++) {\n                for (var f = format.length - 1; f >= 0; f--) {\n                    candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                    if (candidate) {\n                        break;\n                    }\n                }\n\n                if (!candidate || candidate.contentEditable === 'true') {\n                    return [];\n                }\n\n                if ($.inArray(candidate, suitable) < 0) {\n                    suitable.push(candidate);\n                }\n            }\n\n            this._resolveListsItems(suitable);\n\n            for (i = 0, len = suitable.length; i < len; i++) {\n                if (this.contains(suitable[i], suitable)) {\n                    return [suitable[i]];\n                }\n            }\n\n            return suitable;\n        },\n        _resolveListsItems: function(nodes) {\n            var i, node, wrapper;\n            for (i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n                wrapper = dom.is(node, \"li\") ? node : dom.wrapper(node);\n                wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n                if (dom.is(wrapper, \"li\")) {\n                    node = nodes[i] = wrapper;\n                }\n            }\n        },\n\n        findFormat: function(sourceNode, until) {\n            var format = this.format,\n                i, len, node, tags, attributes;\n            var editableParent = dom.editableParent(sourceNode);\n            var immutables = this.options && this.options.immutables;\n            var ImmutablesNS = Editor.Immutables;\n\n            for (i = 0, len = format.length; i < len; i++) {\n                node = sourceNode;\n                tags = format[i].tags;\n                attributes = format[i].attr;\n\n                if (immutables && tags && tags[0] == \"immutable\") {\n                    var immutable = ImmutablesNS.immutableParent(node);\n                    if (immutable && dom.attrEquals(immutable, attributes)) {\n                        return node;\n                    }\n                }\n\n                while (node && dom.isAncestorOf(editableParent, node)) {\n                    if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                        return node;\n                    }\n\n                    if (until && until(node)) {\n                        break;\n                    }\n\n                    node = node.parentNode;\n                }\n            }\n            return null;\n        },\n\n        getFormat: function(nodes) {\n            var that = this,\n                findFormat = function(node) {\n                        return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                    },\n                result = findFormat(nodes[0]),\n                i, len;\n\n            if (!result) {\n                return \"\";\n            }\n\n            for (i = 1, len = nodes.length; i < len; i++) {\n                if (result != findFormat(nodes[i])) {\n                    return \"\";\n                }\n            }\n\n            return result.nodeName.toLowerCase();\n        },\n\n        isFormatted: function(nodes, until) {\n            for (var i = 0, len = nodes.length; i < len; i++) {\n                if (!this.findFormat(nodes[i], until)) {\n                    return false;\n                }\n            }\n\n            return true;\n        }\n    });\n\n    var BlockFormatter = Class.extend({\n        init: function(format, values) {\n            this.format = format;\n            this.values = values;\n            this.finder = new BlockFormatFinder(format);\n        },\n\n        wrap: function(tag, attributes, nodes) {\n\n            var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n\n            if (dom.isInline(commonAncestor)) {\n                commonAncestor = dom.blockParentOrBody(commonAncestor);\n            }\n\n            var ancestors = dom.significantChildNodes(commonAncestor),\n                position = dom.findNodeIndex(ancestors[0]),\n                wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes),\n                i, ancestor;\n\n            for (i = 0; i < ancestors.length; i++) {\n                ancestor = ancestors[i];\n                if (dom.isBlock(ancestor)) {\n                    dom.attr(ancestor, attributes);\n\n                    if (wrapper.childNodes.length) {\n                        dom.insertBefore(wrapper, ancestor);\n                        wrapper = wrapper.cloneNode(false);\n                    }\n\n                    position = dom.findNodeIndex(ancestor) + 1;\n\n                    continue;\n                }\n\n                wrapper.appendChild(ancestor);\n            }\n\n            if (wrapper.firstChild) {\n                dom.insertAt(commonAncestor, wrapper, position);\n            }\n        },\n\n        apply: function(nodes) {\n            var format, values = this.values;\n\n            function attributes(format) {\n                return extend({}, format && format.attr, values);\n            }\n\n            this._handleImmutables(nodes, true);\n\n            var images = dom.filter(\"img\", nodes);\n            var imageFormat = EditorUtils.formatByName(\"img\", this.format);\n            var imageAttributes = attributes(imageFormat);\n            $.each(images, function() {\n                dom.attr(this, imageAttributes);\n            });\n\n            // only images were selected, no need to wrap\n            if (images.length == nodes.length) {\n                return;\n            }\n\n            var nonImages = dom.filter(\"img\", nodes, true);\n            var formatNodes = this.finder.findSuitable(nonImages);\n\n            if (formatNodes.length) {\n                for (var i = 0, len = formatNodes.length; i < len; i++) {\n                    format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                    dom.attr(formatNodes[i], attributes(format));\n                }\n            } else {\n                format = this.format[0];\n                this.wrap(format.tags[0], attributes(format), nonImages);\n            }\n        },\n\n        _handleImmutables: function(nodes, applyFormatting) {\n            if (!this.immutables()) {\n                return;\n            }\n            var immutableFormat = EditorUtils.formatByName(\"immutable\", this.format);\n            if (!immutableFormat) {\n                return;\n            }\n            var ImmutablesNS = Editor.Immutables;\n            var l = nodes.length - 1;\n            for (var i = l; i >= 0; i--) {\n                var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n                if (!immutableParent) {\n                    continue;\n                }\n                if (immutableParent !== nodes[i + 1]) {\n                    if (applyFormatting) {\n                        dom.attr(immutableParent, immutableFormat.attr);\n                    } else {\n                        dom.unstyle(immutableParent, immutableFormat.attr.style);\n                    }\n                }\n                nodes.splice(i, 1);\n            }\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        },\n\n        remove: function(nodes) {\n            var i, l, formatNode, namedFormat, name;\n\n            this._handleImmutables(nodes, false);\n\n            for (i = 0, l = nodes.length; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    name = dom.name(formatNode);\n                    namedFormat = EditorUtils.formatByName(name, this.format);\n                    if (namedFormat.attr.style) {\n                        dom.unstyle(formatNode, namedFormat.attr.style);\n                    }\n                    if (namedFormat.attr.className) {\n                        dom.removeClass(formatNode, namedFormat.attr.className);\n                    }\n                }\n            }\n        },\n\n        toggle: function(range) {\n            var that = this,\n                nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n\n            if (that.finder.isFormatted(nodes)) {\n                that.remove(nodes);\n            } else {\n                that.apply(nodes);\n            }\n        }\n    });\n\n    var GreedyBlockFormatter = Class.extend({\n        init: function(format, values) {\n            var that = this;\n            that.format = format;\n            that.values = values;\n            that.finder = new BlockFormatFinder(format);\n        },\n\n        apply: function(nodes) {\n            var format = this.format;\n            var blocks = dom.blockParents(nodes);\n            var formatTag = format[0].tags[0];\n            var i, len, list, formatter, range;\n            var element;\n            var tagName;\n            var block;\n            var immutalbeParent;\n\n            if (blocks.length) {\n                for (i = 0, len = blocks.length; i < len; i++) {\n                    block = blocks[i];\n                    immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n\n                    if (!immutalbeParent) {\n                        tagName = dom.name(block);\n\n                        if (tagName == \"li\") {\n                            list = block.parentNode;\n                            formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                            range = this.editor.createRange();\n                            range.selectNode(blocks[i]);\n                            formatter.toggle(range);\n                        } else if (formatTag && (tagName == \"td\" || block.attributes.contentEditable)) {\n                            new BlockFormatter(format, this.values).apply(block.childNodes);\n                        } else {\n                            element = dom.changeTag(block, formatTag);\n                            dom.attr(element, format[0].attr);\n                        }\n                    }\n                }\n            } else {\n                var blockFormatter = new BlockFormatter(format, this.values);\n                blockFormatter.editor = this.editor;\n                blockFormatter.apply(nodes);\n            }\n        },\n\n        toggle: function(range) {\n            var nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                range.selectNodeContents(range.commonAncestorContainer);\n                nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                }\n            }\n\n            this.apply(nodes);\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        }\n    });\n\n    var BlockFormatTool = FormatTool.extend({ init: function(options) {\n            FormatTool.fn.init.call(this, extend(options, {\n                finder: new BlockFormatFinder(options.format),\n                formatter: function() {\n                    return new BlockFormatter(options.format);\n                }\n            }));\n        }\n    });\n\n    extend(Editor, {\n        BlockFormatFinder: BlockFormatFinder,\n        BlockFormatter: BlockFormatter,\n        GreedyBlockFormatter: GreedyBlockFormatter,\n        BlockFormatTool: BlockFormatTool\n    });\n\n    var listElements = [\"ul\",\"ol\",\"li\"];\n\n    registerFormat(\"justifyLeft\", [\n        { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"left\" } } },\n        { tags: [\"img\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n        { tags: [\"immutable\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n        { tags: listElements, attr: { style: { textAlign: \"left\", listStylePosition: \"\" } } }\n    ]);\n    registerTool(\"justifyLeft\", new BlockFormatTool({\n        format: formats.justifyLeft,\n        ui: {\n            togglable: true,\n            group: \"align\"\n        }\n    }));\n\n    registerFormat(\"justifyCenter\", [\n        { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"center\" } } },\n        { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n        { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n        { tags: listElements, attr: { style: { textAlign: \"center\", listStylePosition: \"inside\" } } }\n    ]);\n    registerTool(\"justifyCenter\", new BlockFormatTool({\n        format: formats.justifyCenter,\n        ui: {\n            togglable: true,\n            group: \"align\"\n        }\n    }));\n\n    registerFormat(\"justifyRight\", [\n        { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"right\" } } },\n        { tags: [\"img\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n        { tags: [\"immutable\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n        { tags: listElements, attr: { style: { textAlign: \"right\", listStylePosition: \"inside\" } } }\n    ]);\n    registerTool(\"justifyRight\", new BlockFormatTool({\n        format: formats.justifyRight,\n        ui: {\n            togglable: true,\n            group: \"align\"\n        }\n    }));\n\n    registerFormat(\"justifyFull\", [\n        { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"justify\" } } },\n        { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n        { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n        { tags: listElements, attr: { style: { textAlign: \"justify\", listStylePosition: \"\" } } }\n    ]);\n    registerTool(\"justifyFull\", new BlockFormatTool({\n        format: formats.justifyFull,\n        ui: {\n            togglable: true,\n            group: \"align\"\n        }\n    }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n        FormatTool = Editor.FormatTool,\n        BlockFormatFinder = Editor.BlockFormatFinder,\n        textNodes = RangeUtils.textNodes,\n        registerTool = Editor.EditorUtils.registerTool;\n\n    var ListFormatFinder = BlockFormatFinder.extend({\n        init: function(options) {\n            this.tag = options.tag;\n            this.attr = options.attr;\n            this.altAttr = options.altAttr;\n\n            var tags = this.tags = [this.tag == 'ul' ? 'ol' : 'ul', this.tag];\n            var format = [{ tags: tags, attr: this.attr }];\n\n            if (this.altAttr) {\n                format.push({\n                    tags: tags,\n                    attr: this.altAttr\n                });\n            }\n\n            BlockFormatFinder.fn.init.call(this, format);\n        },\n\n        matchesType: function(node) {\n            return dom.attrEquals(node, this.attr) || (this.altAttr && dom.attrEquals(node, this.altAttr));\n        },\n\n        isList: function(node) {\n            return dom.list(node);\n        },\n\n        isFormatted: function(nodes) {\n            var formatNodes = [];\n            var formatNode, i;\n\n            for (i = 0; i < nodes.length; i++) {\n                formatNode = this.findFormat(nodes[i], this.isList);\n\n                if (formatNode && dom.name(formatNode) == this.tag && this.matchesType(formatNode)) {\n                    formatNodes.push(formatNode);\n                }\n            }\n\n            if (formatNodes.length < 1) {\n                return false;\n            }\n\n            if (formatNodes.length != nodes.length) {\n                return false;\n            }\n\n            // check if sequential lists are selected\n            for (i = 0; i < formatNodes.length; i++) {\n                if (formatNodes[i].parentNode != formatNode.parentNode) {\n                    break;\n                }\n\n                if (formatNodes[i] != formatNode) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        findSuitable: function(nodes) {\n            var candidate = this.findFormat(nodes[0], this.isList);\n\n            if (candidate && dom.name(candidate) == this.tag) {\n                return candidate;\n            }\n\n            return null;\n        }\n\n    });\n\n    var ListFormatter = Class.extend({\n        init: function(options, unwrapTag) {\n            var that = this;\n            options = $.isPlainObject(options) ? options : { tag: options, attr: null };\n            that.tag = options.tag;\n            that.attr = options.attr;\n            that.finder = new ListFormatFinder(options);\n            that.unwrapTag = unwrapTag;\n        },\n\n        isList: function(node) {\n            return dom.list(node);\n        },\n\n        immutables: function() {\n            return this.editor && !!this.editor.options.immutables;\n        },\n\n        wrap: function(list, nodes) {\n            var li = dom.create(list.ownerDocument, \"li\"),\n                i, node,\n                isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n\n            for (i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n\n                if (dom.is(node, 'li')) {\n                    list.appendChild(node);\n                    continue;\n                }\n\n                if (this.isList(node)) {\n                    while (node.firstChild) {\n                        list.appendChild(node.firstChild);\n                    }\n                    continue;\n                }\n\n                if (dom.is(node, \"td\")) {\n                    while (node.firstChild) {\n                        li.appendChild(node.firstChild);\n                    }\n                    list.appendChild(li);\n                    node.appendChild(list);\n                    list = list.cloneNode(false);\n                    li = li.cloneNode(false);\n                    continue;\n                }\n\n                li.appendChild(node);\n\n                if (dom.isBlock(node)) {\n                    list.appendChild(li);\n                    if (!isImmutable(node)) {\n                        dom.unwrap(node);\n                    }\n                    li = li.cloneNode(false);\n                }\n            }\n\n            if (li.firstChild) {\n                list.appendChild(li);\n            }\n        },\n\n        containsAny: function(parent, nodes) {\n            for (var i = 0; i < nodes.length; i++) {\n                if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        suitable: function(candidate, nodes) {\n            if (candidate.className == \"k-marker\") {\n                var sibling = candidate.nextSibling;\n\n                if (sibling && dom.isBlock(sibling)) {\n                    return false;\n                }\n\n                sibling = candidate.previousSibling;\n\n                if (sibling && dom.isBlock(sibling)) {\n                    return false;\n                }\n            }\n\n            return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n        },\n\n        _parentLists: function(node) {\n            var editable = dom.closestEditable(node);\n\n            return $(node).parentsUntil(editable, \"ul,ol\");\n        },\n\n        split: function(range) {\n            var nodes = textNodes(range);\n            var start, end, parents;\n\n            if (nodes.length) {\n                start = dom.parentOfType(nodes[0], ['li']);\n                end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n                range.setStartBefore(start);\n                range.setEndAfter(end);\n\n                for (var i = 0, l = nodes.length; i < l; i++) {\n                    var formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        parents = this._parentLists(formatNode);\n                        if (parents.length) {\n                            RangeUtils.split(range, parents.last()[0], true);\n                        } else {\n                            RangeUtils.split(range, formatNode, true);\n                        }\n                    }\n                }\n            }\n        },\n\n        merge: function(tag, formatNode) {\n            var prev = formatNode.previousSibling, next;\n\n            while (prev && (prev.className == \"k-marker\" || (prev.nodeType == 3 && dom.isWhitespace(prev)))) {\n                prev = prev.previousSibling;\n            }\n\n            // merge with previous list\n            if (prev && dom.name(prev) == tag && this.finder.matchesType(prev)) {\n                while (formatNode.firstChild) {\n                    prev.appendChild(formatNode.firstChild);\n                }\n                dom.remove(formatNode);\n                formatNode = prev;\n            }\n\n            next = formatNode.nextSibling;\n            while (next && (next.className == \"k-marker\" || (next.nodeType == 3 && dom.isWhitespace(next)))) {\n                next = next.nextSibling;\n            }\n\n            // merge with next list\n            if (next && dom.name(next) == tag && this.finder.matchesType(next)) {\n                while (formatNode.lastChild) {\n                    next.insertBefore(formatNode.lastChild, next.firstChild);\n                }\n                dom.remove(formatNode);\n            }\n        },\n\n        breakable: function(node) {\n            return (\n                node != node.ownerDocument.body &&\n                !/table|tbody|thead|tr|td/.test(dom.name(node)) &&\n                !node.attributes.contentEditable\n            );\n        },\n\n        findSuitableNode: function(nodes) {\n            var that = this,\n                finder = that.finder,\n                tag = that.tag,\n                formatNode;\n\n            formatNode = finder.findSuitable(nodes);\n\n            if (!formatNode) {\n                // Find the opposite tag\n                finder = new ListFormatFinder({ tag: tag == \"ul\" ? \"ol\" : \"ul\" });\n                formatNode = finder.findSuitable(nodes);\n            }\n\n            if (!formatNode) {\n                // Find the same tag\n                finder = new ListFormatFinder({ tag: tag });\n                formatNode = finder.findSuitable(nodes);\n                formatNode = formatNode && that.finder.matchesType(formatNode) ? null : formatNode;\n            }\n\n\n            return formatNode;\n        },\n\n        applyOnSection: function(section, nodes) {\n            var tag = this.tag;\n            var attr = this.attr;\n            var commonAncestor = dom.closestSplittableParent(nodes);\n\n            var ancestors = [];\n            var formatNode = this.findSuitableNode(nodes);\n\n            var childNodes;\n\n            if (/table|tbody|thead/.test(dom.name(commonAncestor))) {\n                childNodes = $.map(nodes, function(node) {\n                    return dom.parentOfType(node, [\"td\"]);\n                });\n            } else {\n                childNodes = dom.significantChildNodes(commonAncestor);\n\n                if ($.grep(childNodes, dom.isBlock).length) {\n                    childNodes = $.grep(childNodes, (function(node) {\n                        return this.containsAny(node, nodes);\n                    }).bind(this));\n                }\n\n                if (!childNodes.length) {\n                    childNodes = nodes;\n                }\n            }\n\n            function pushAncestor() {\n                ancestors.push(this);\n            }\n\n            for (var i = 0; i < childNodes.length; i++) {\n                var child = childNodes[i];\n                var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n\n                if (!suitable) {\n                    continue;\n                }\n\n                if (formatNode && this.isList(child)) {\n                    // merging lists\n                    $.each(child.children, pushAncestor);\n                    dom.remove(child);\n                } else {\n                    ancestors.push(child);\n                }\n            }\n\n            if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n                ancestors = [commonAncestor];\n            }\n\n            if (!formatNode) {\n                formatNode = dom.create(commonAncestor.ownerDocument, tag, attr);\n                if (dom.isBlock(ancestors[0])) {\n                    dom.mergeAttributes(ancestors[0], formatNode);\n                }\n                dom.insertBefore(formatNode, ancestors[0]);\n            }\n\n            this.wrap(formatNode, ancestors);\n\n            while (dom.isBom(formatNode.nextSibling)) {\n                dom.remove(formatNode.nextSibling);\n            }\n\n            if (!this.finder.matchesType(formatNode)) {\n                formatNode.removeAttribute(\"type\");\n                formatNode.style.listStyleType = \"\";\n                dom.mergeAttributes(dom.create(commonAncestor.ownerDocument, tag, attr), formatNode, true);\n            }\n\n            if (formatNode && formatNode.getAttribute(\"type\") === \"\") {\n                formatNode.removeAttribute(\"type\");\n            }\n\n            if (!dom.is(formatNode, tag)) {\n                dom.changeTag(formatNode, tag);\n            }\n\n            this.merge(tag, formatNode);\n        },\n\n        apply: function(nodes) {\n            var i = 0,\n                sections = [],\n                lastSection,\n                lastNodes,\n                section,\n                node,\n                l = nodes.length,\n                immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n\n            function addLastSection() {\n                if (lastSection) {\n                    sections.push({\n                        section: lastSection,\n                        nodes: lastNodes\n                    });\n                }\n            }\n\n            // split nodes into sections that need to be different lists\n            for (i = 0; i < l; i++) {\n                node = immutableParent(nodes[i]) || nodes[i];\n                section = dom.closestEditable(node, [\"td\",\"th\",\"body\"]);\n                if (!lastSection || section != lastSection) {\n                    addLastSection();\n                    lastNodes = [node];\n                    lastSection = section;\n                } else {\n                    lastNodes.push(node);\n                }\n            }\n\n            addLastSection();\n\n            for (i = 0; i < sections.length; i++) {\n                this.applyOnSection(sections[i].section, sections[i].nodes);\n            }\n        },\n\n        unwrap: function(ul) {\n            var fragment = ul.ownerDocument.createDocumentFragment(),\n                unwrapTag = this.unwrapTag,\n                parents,\n                li,\n                p,\n                child;\n\n            for (li = ul.firstChild; li; li = li.nextSibling) {\n                p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n\n                while (li.firstChild) {\n                    child = li.firstChild;\n\n                    if (dom.isBlock(child)) {\n\n                        if (p.firstChild) {\n                            fragment.appendChild(p);\n                            p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                        }\n\n                        fragment.appendChild(child);\n                    } else {\n                        p.appendChild(child);\n                    }\n                }\n\n                if (p.firstChild) {\n                    fragment.appendChild(p);\n                }\n            }\n\n            parents = this._parentLists(ul);\n\n            if (parents[0]) {\n                dom.insertAfter(fragment, parents.last()[0]);\n                parents.last().remove();\n            } else {\n                dom.insertAfter(fragment, ul);\n            }\n\n            dom.remove(ul);\n        },\n\n        remove: function(nodes) {\n            var formatNode;\n            for (var i = 0, l = nodes.length; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n\n                if (formatNode) {\n                    this.unwrap(formatNode);\n                }\n            }\n        },\n\n        toggle: function(range) {\n            var that = this,\n                nodes = textNodes(range),\n                ancestor = range.commonAncestorContainer;\n\n            if (!nodes.length) {\n                range.selectNodeContents(ancestor);\n                nodes = textNodes(range);\n                if (!nodes.length) {\n                    var text = ancestor.ownerDocument.createTextNode(\"\");\n                    range.startContainer.appendChild(text);\n                    nodes = [text];\n                    range.selectNode(text.parentNode);\n                }\n            }\n            nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n            if (that.finder.isFormatted(nodes)) {\n                that.split(range);\n                that.remove(nodes);\n            } else {\n                that.apply(nodes);\n            }\n        }\n\n    });\n\n    var ListCommand = Command.extend({\n        init: function(options) {\n            options.formatter = new ListFormatter({ tag: options.tag, attr: options.attr });\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var ListTool = FormatTool.extend({\n        init: function(options) {\n            this.options = options;\n\n            FormatTool.fn.init.call(this, extend(options, {\n                finder: new ListFormatFinder(options)\n            }));\n        },\n\n        command: function(commandArguments) {\n            return new ListCommand(extend(commandArguments, { tag: this.options.tag, attr: this.options.attr }));\n        }\n    });\n\n    extend(Editor, {\n        ListFormatFinder: ListFormatFinder,\n        ListFormatter: ListFormatter,\n        ListCommand: ListCommand,\n        ListTool: ListTool\n    });\n\n    registerTool(\"insertUnorderedList\", new ListTool({ tag: 'ul', attr: { style: { listStyleType: \"\" }, type: \"\" }, ui: { togglable: true, group: \"lists\" } }));\n    registerTool(\"insertOrderedList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"\" }, type: \"\" }, ui: { togglable: true, group: \"lists\" } }));\n    registerTool(\"insertUpperRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"upper-roman\" } }, altAttr: { type: \"I\" }, ui: { togglable: true, group: \"lists\" } }));\n    registerTool(\"insertLowerRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"lower-roman\" } }, altAttr: { type: \"i\" }, ui: { togglable: true, group: \"lists\" } }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        Editor = kendo.ui.editor,\n        Tool = Editor.Tool,\n        DelayedExecutionTool = Editor.DelayedExecutionTool,\n        Command = Editor.Command,\n        dom = Editor.Dom,\n        EditorUtils = Editor.EditorUtils,\n        RangeUtils = Editor.RangeUtils,\n        registerTool = EditorUtils.registerTool;\n\n\n    var FormattingTool = DelayedExecutionTool.extend({\n        init: function(options) {\n            var that = this;\n            Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n\n            that.type = \"kendoDropDownList\";\n\n            that.finder = {\n                getFormat: function() { return \"\"; }\n            };\n        },\n\n        options: {\n            items: [\n                { text: \"Paragraph\", value: \"p\" },\n                { text: \"Quotation\", value: \"blockquote\" },\n                { text: \"Heading 1\", value: \"h1\" },\n                { text: \"Heading 2\", value: \"h2\" },\n                { text: \"Heading 3\", value: \"h3\" },\n                { text: \"Heading 4\", value: \"h4\" },\n                { text: \"Heading 5\", value: \"h5\" },\n                { text: \"Heading 6\", value: \"h6\" }\n            ],\n            width: 110\n        },\n\n        toFormattingItem: function(item) {\n            var value = item.value;\n\n            if (!value) {\n                return item;\n            }\n\n            if (item.tag || item.className) {\n                return item;\n            }\n\n            var dot = value.indexOf(\".\");\n\n            if (dot === 0) {\n                item.className = value.substring(1);\n            } else if (dot == -1) {\n                item.tag = value;\n            } else {\n                item.tag = value.substring(0, dot);\n                item.className = value.substring(dot + 1);\n            }\n\n            return item;\n        },\n\n        command: function(args) {\n            var that = this;\n            var item = args.value;\n\n            item = this.toFormattingItem(item);\n\n            return new Editor.FormatCommand({\n                range: args.range,\n                formatter: function() {\n                    var formatter,\n                        tags = (item.tag || item.context || \"span\").split(\",\"),\n                        format = [{\n                            tags: tags,\n                            attr: { className: item.className || \"\" }\n                        }];\n\n                    if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                        formatter = new Editor.GreedyInlineFormatter(format);\n                    } else {\n                        formatter = new Editor.GreedyBlockFormatter(format);\n                    }\n\n                    formatter.editor = that.editor;\n                    return formatter;\n                }\n            });\n        },\n\n        decorate: function(body) {\n            var component = this.component,\n                dataSource = component.dataSource,\n                items = dataSource.data(),\n                i, tag, className, style;\n\n            if (body) {\n                component.list.css(\"background-color\", dom.getEffectiveBackground($(body)));\n            }\n\n            if (this.component && this.component.options && this.component.options.unsafeInline !== false) {\n                for (i = 0; i < items.length; i++) {\n                    tag = items[i].tag || \"span\";\n                    className = items[i].className;\n\n                    style = dom.inlineStyle(body, tag, { className: className });\n\n                    style = style.replace(/\"/g, \"'\");\n\n                    items[i].style = style + \";display:inline-block\";\n                }\n            }\n\n            dataSource.trigger(\"change\");\n        },\n\n        initialize: function(ui, editor) {\n            var options = this.options;\n            var toolName = options.name;\n            var that = this;\n            var component = ui.getKendoDropDownList();\n\n            if (!component) {\n                return;\n            }\n\n            that.editor = editor;\n            that.component = component;\n\n            // must be moved to themes\n            ui.closest(\".k-dropdownlist\").width(options.width);\n\n            component.setOptions({\n                optionLabel: editor.options.messages.formatting,\n                change: function () {\n                    var dataItem = component.dataItem();\n\n                    if (dataItem) {\n                        Tool.exec(editor, toolName, dataItem.toJSON());\n                    }\n                },\n                dataBound: function() {\n                    var i, items = component.dataSource.data(),\n                        optionLabel = component.list.parent().find(\".k-list-optionlabel\");\n\n                    for (i = 0; i < items.length; i++) {\n                        items[i] = that.toFormattingItem(items[i]);\n                    }\n\n                    if (optionLabel.length) {\n                        optionLabel.remove();\n                    }\n                }\n            });\n        },\n\n        getFormattingValue: function(items, nodes) {\n            for (var i = 0; i < items.length; i++) {\n                var item = items[i];\n                var tag = item.tag || item.context || \"\";\n                var className = item.className ? \".\" + item.className : \"\";\n                var selector = tag + className;\n\n                var element = $(nodes[0]).closest(selector)[0];\n\n                if (!element) {\n                    continue;\n                }\n\n                if (nodes.length == 1) {\n                    return item.value;\n                }\n\n                for (var n = 1; n < nodes.length; n++) {\n                    if (!$(nodes[n]).closest(selector)[0]) {\n                        break;\n                    } else if (n == nodes.length - 1) {\n                        return item.value;\n                    }\n                }\n            }\n\n            return \"\";\n        },\n\n        update: function(ui, nodes) {\n            var selectBox = $(ui).data(this.type);\n            // necessary until formatBlock is deleted\n            if (!selectBox) {\n                return;\n            }\n\n            var dataSource = selectBox.dataSource,\n                items = dataSource.data(),\n                i, context,\n                ancestor = dom.commonAncestor.apply(null, nodes);\n\n            if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n                return;\n            } else {\n                this._ancestor = ancestor;\n            }\n\n            for (i = 0; i < items.length; i++) {\n                context = items[i].context;\n\n                items[i].visible = !context || !!$(ancestor).closest(context).length;\n            }\n\n            dataSource.filter([{ field: \"visible\", operator: \"eq\", value: true }]);\n\n            DelayedExecutionTool.fn.update.call(this, ui, nodes);\n\n            selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n\n            selectBox.wrapper.toggleClass(\"k-disabled\", !dataSource.view().length);\n        },\n\n        destroy: function() {\n            this._ancestor = null;\n        }\n    });\n\n    var CleanFormatCommand = Command.extend({\n        exec: function() {\n            var range = this.lockRange(true);\n            this.tagsToClean = this.options.remove || \"strong,em,span,sup,sub,del,b,i,u,font\".split(\",\");\n\n            RangeUtils.wrapSelectedElements(range);\n\n            var nodes = RangeUtils.mapAll(range, function(node) {\n                return node;\n            });\n\n\n            for (var c = nodes.length - 1; c >= 0; c--) {\n                var node = nodes[c];\n                if (!this.immutableParent(node)) {\n                    this.clean(node);\n                }\n            }\n\n            this.releaseRange(range);\n        },\n\n        clean: function(node) {\n            if (!node || dom.isMarker(node)) {\n                return;\n            }\n\n            var name = dom.name(node);\n\n            if (name == \"ul\" || name == \"ol\") {\n                var listFormatter = new Editor.ListFormatter(name);\n                var prev = node.previousSibling;\n                var next = node.nextSibling;\n\n                listFormatter.unwrap(node);\n\n                // clean contents\n                for (; prev && prev != next; prev = prev.nextSibling) {\n                    this.clean(prev);\n                }\n            } else if (name == \"blockquote\") {\n                dom.changeTag(node, \"p\");\n            } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n                for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                    this.clean(node.childNodes[i]);\n                }\n\n                node.removeAttribute(\"style\");\n                node.removeAttribute(\"class\");\n            } else {\n                unwrapListItem(node);\n            }\n\n            if ($.inArray(name, this.tagsToClean) > -1) {\n                dom.unwrap(node);\n            }\n        },\n\n        immutableParent: function(node) {\n            return this.immutables() && Editor.Immutables.immutableParent(node);\n        }\n    });\n\n\n    function unwrapListItem(node) {\n        var li = dom.closestEditableOfType(node, [\"li\"]);\n        if (li) {\n            var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n            var range = kendo.ui.editor.W3CRange.fromNode(node);\n            range.selectNode(li);\n            listFormatter.toggle(range);\n        }\n    }\n\n    $.extend(Editor, {\n        FormattingTool: FormattingTool,\n        CleanFormatCommand: CleanFormatCommand\n    });\n\n    registerTool(\"formatting\", new FormattingTool({\n        ui: {\n            type: \"component\",\n            component: \"DropDownList\",\n            componentOptions: {\n                dataTextField: \"text\",\n                dataValueField: \"value\",\n                highlightFirst: false,\n                autoWidth: true,\n                template: kendo.template(\n                    function (data) { return (\"<span unselectable=\\\"on\\\" \" + (data.style ? (\"class=\\\"k-d-block\\\" style=\\\"display:block;\" + (data.style || \"\")) : \"\") + \"\\\">\" + (kendo.htmlEncode(data.text)) + \"</span>\"); }\n                )\n            },\n            overflow: \"never\"\n        }\n    }));\n\n    registerTool(\"cleanFormatting\", new Tool({ command: CleanFormatCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        encode = kendo.htmlEncode,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        dom = Editor.Dom,\n        registerTool = EditorUtils.registerTool,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n        keys = kendo.keys,\n        KEDITORIMAGEURL = \"#k-editor-image-url\",\n        KEDITORIMAGETITLE = \"#k-editor-image-title\",\n        KEDITORIMAGEWIDTH = \"#k-editor-image-width\",\n        KEDITORIMAGEHEIGHT = \"#k-editor-image-height\";\n\n    var ImageCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            Command.fn.init.call(that, options);\n\n            that.async = true;\n            that.attributes = {};\n        },\n\n        insertImage: function(img, range) {\n            var attributes = this.attributes;\n            var doc = RangeUtils.documentFromRange(range);\n\n            if (attributes.src && attributes.src != \"http://\") {\n\n                var removeIEAttributes = function() {\n                    setTimeout(function() {\n                        if (!attributes.width) {\n                            img.removeAttribute(\"width\");\n                        }\n\n                        if (!attributes.height) {\n                            img.removeAttribute(\"height\");\n                        }\n\n                        img.removeAttribute(\"complete\");\n                    });\n                };\n\n                if (!img) {\n                    img = dom.create(doc, \"img\", attributes);\n                    img.onload = img.onerror = removeIEAttributes;\n\n                    range.deleteContents();\n                    range.insertNode(img);\n\n                    if (!img.nextSibling) {\n                        dom.insertAfter(doc.createTextNode(\"\\ufeff\"), img);\n                    }\n\n                    removeIEAttributes();\n\n                    range.setStartAfter(img);\n                    range.setEndAfter(img);\n                    RangeUtils.selectRange(range);\n                    return true;\n                } else {\n                    img.onload = img.onerror = removeIEAttributes;\n                    dom.attr(img, attributes);\n                    removeIEAttributes();\n                }\n            }\n\n            return false;\n        },\n\n        redo: function() {\n            var that = this,\n                range = that.lockRange();\n\n            if (!that.insertImage(RangeUtils.image(range), range)) {\n                that.releaseRange(range);\n            }\n        },\n\n        exec: function() {\n            var that = this,\n                range = that.lockRange(),\n                applied = false,\n                img = RangeUtils.image(range),\n                imageWidth = img && img.getAttribute(\"width\") || \"\",\n                imageHeight = img && img.getAttribute(\"height\") || \"\",\n                dialog,\n                form,\n                isIE = kendo.support.browser.msie,\n                options = that.editor.options,\n                messages = options.messages,\n                imageBrowser = options.imageBrowser,\n                showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined$1),\n                dialogOptions = {\n                    title: messages.insertImage,\n                    visible: false,\n                    resizable: showBrowser\n                };\n\n            this.expandImmutablesIn(range);\n\n            function apply(e) {\n                var element = dialog.element,\n                    w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10),\n                    h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n\n                that.attributes = {\n                    src: element.find(KEDITORIMAGEURL).val().replace(/ /g, \"%20\"),\n                    alt: element.find(KEDITORIMAGETITLE).val()\n                };\n\n                that.attributes.width = null;\n                that.attributes.height = null;\n\n                if (!isNaN(w) && w > 0) {\n                    that.attributes.width = w;\n                }\n\n                if (!isNaN(h) && h > 0) {\n                    that.attributes.height = h;\n                }\n\n                applied = that.insertImage(img, range);\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n            }\n\n            function close(e) {\n                e.preventDefault();\n                form.destroy();\n                dialog.destroy();\n\n                dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                if (!applied) {\n                    that.releaseRange(range);\n                }\n            }\n\n            function keyDown(e) {\n                if (e.keyCode == keys.ENTER) {\n                    apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    close(e);\n                }\n            }\n\n            dialogOptions.close = close;\n\n            if (showBrowser) {\n                dialogOptions.width = 750;\n            }\n            dialogOptions.minWidth = 350;\n\n            dialog = this.createDialog(\"<div/>\", dialogOptions).data(\"kendoWindow\");\n\n            form = that._createForm(dialog, showBrowser);\n\n            dialog.element.toggleClass(\"k-filebrowser-dialog\", showBrowser);\n            dialog.wrapper\n            .find(\".k-dialog-insert\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .find(\".k-form-field input\").on(\"keydown\", keyDown).end()\n            // IE < 8 returns absolute url if getAttribute is not used\n            .find(KEDITORIMAGEURL).val(img ? img.getAttribute(\"src\", 2) : \"http://\").end()\n            .find(KEDITORIMAGETITLE).val(img ? img.alt : \"\").end()\n            .find(KEDITORIMAGEWIDTH).val(imageWidth).end()\n            .find(KEDITORIMAGEHEIGHT).val(imageHeight).end();\n\n            var element = dialog.element;\n            if (showBrowser) {\n                this._imageBrowser = new kendo.ui.ImageBrowser(\n                    element.find(\".k-imagebrowser\"),\n                    extend({}, imageBrowser)\n                );\n\n                this._imageBrowser.bind(\"change\", function(ev) {\n                    if (ev.selected.get(\"type\") === \"f\") {\n                        element.find(KEDITORIMAGEURL).val(this.value());\n                    }\n                });\n\n                this._imageBrowser.bind(\"apply\", apply);\n            }\n\n            if (isIE) {\n                var dialogHeight = element.closest(\".k-window\").height();\n                element.css(\"max-height\", dialogHeight);\n            }\n            dialog.center().open();\n            element.find(KEDITORIMAGEURL).trigger(\"focus\").select();\n        },\n\n        _createForm: function(dialog, showBrowser) {\n            var that = this;\n            var formElement = $(\"<div/>\").appendTo(dialog.element);\n            var messages = that.editor.options.messages;\n            var form = formElement.kendoForm({\n                renderButtons: false,\n                items: [\n                    {\n                        field: \"k-editor-image-url\",\n                        label: encode(messages.imageWebAddress),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-image-title\",\n                        label: encode(messages.imageAltText),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-image-width\",\n                        label: encode(messages.imageWidth),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-image-height\",\n                        label: encode(messages.imageHeight),\n                        editor: \"TextBox\"\n                    }\n                ]\n            }).data(\"kendoForm\");\n\n            if (showBrowser) {\n                formElement.prepend($('<div class=\"k-filebrowser k-imagebrowser\"></div>'));\n            }\n\n            dialog.element.after($(that._actionButtonsTemplate({ messages: messages, insertButtonIcon: \"image-add\", cancelButtonIcon: \"cancel-outline\" })));\n\n            return form;\n        }\n\n    });\n\n    kendo.ui.editor.ImageCommand = ImageCommand;\n\n    registerTool(\"insertImage\", new Editor.Tool({ command: ImageCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        registerTool = EditorUtils.registerTool,\n        loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n\n    var ImportCommand = Command.extend({\n        exec: function() {\n            (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n        },\n\n        _initializeUploadWidget: function() {\n            var cmd = this;\n            var editor = cmd.editor;\n            var importOptions = editor.options[\"import\"];\n            var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n                success: cmd._onUploadSuccess.bind(cmd),\n                progress: cmd._onUploadProgress.bind(cmd),\n                select: cmd._onUploadSelect.bind(cmd),\n                error: cmd._onUploadError.bind(cmd),\n                complete: cmd._onUploadComplete.bind(cmd),\n                showFileList: false,\n                multiple: false,\n                async: {\n                    saveUrl: importOptions.proxyURL,\n                    autoUpload: true,\n                    saveField: \"file\"\n                },\n                validation: {\n                    allowedExtensions: importOptions.allowedExtensions,\n                    maxFileSize: importOptions.maxFileSize\n                }\n            }).getKendoUpload();\n\n            editor._uploadWidget = upload;\n\n            return upload;\n        },\n        _onUploadComplete: function(ev) {\n            this._trigger(\"complete\", ev);\n            ev.sender.clearAllFiles();\n\n            this._removeLoadingOverlay();\n        },\n        _onUploadSuccess: function(ev) {\n            this.editor.value(ev.response.html.replace(/<\\/?body>/ig, \"\"));\n            this._trigger(\"success\", ev);\n        },\n        _onUploadProgress: function(ev) {\n            this._trigger(\"progress\", ev);\n        },\n        _onUploadSelect: function(ev) {\n            this._trigger(\"select\", ev);\n            if (!ev.files[0].validationErrors) {\n                this._initLoadingOverlay();\n            }\n        },\n        _onUploadError: function(ev) {\n            this._trigger(\"error\", ev);\n        },\n\n        _trigger: function(eventType, uploadEvent) {\n            var editor = this.editor;\n            var importOptions = editor.options[\"import\"];\n            if (typeof importOptions[eventType] === \"function\") {\n                importOptions[eventType].call(editor, uploadEvent);\n            }\n        },\n\n        _initLoadingOverlay: function() {\n            var editable = this.editor.body;\n            if (Editor.Dom.is(editable, \"body\")) {\n                this._iframeWrapper = this._container =\n                    this.editor.wrapper.find(\"iframe\").parent()\n                    .css({ position: \"relative\" }).append(loadingOverlay);\n            } else {\n                this._container = $(editable).append(loadingOverlay);\n            }\n\n            kendo.ui.progress(this._container, true);\n        },\n\n        _removeLoadingOverlay: function() {\n            kendo.ui.progress(this._container, false);\n            $(this._iframeWrapper).css({\n                position: \"\"\n            });\n\n            delete this._container;\n            delete this._iframeWrapper;\n        }\n    });\n\n    extend(Editor, {\n        ImportCommand: ImportCommand\n    });\n\n    registerTool(\"import\", new Tool({\n        command: ImportCommand,\n        ui: {\n            showText: \"both\"\n        }\n    }));\n\n    }(window.kendo.jQuery));\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            editorNS = kendo.ui.editor,\n            Command = editorNS.Command,\n            GenericCommand = editorNS.GenericCommand,\n            EditorUtils = editorNS.EditorUtils,\n            registerTool = EditorUtils.registerTool,\n            Tool = editorNS.Tool,\n            RestorePoint = editorNS.RestorePoint,\n            extend = $.extend;\n\n    var InsertHtmlCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n\n            this.managesUndoRedo = true;\n        },\n\n        exec: function() {\n            var editor = this.editor;\n            var options = this.options;\n            var range = options.range;\n            var body = editor.body;\n            var startRestorePoint = new RestorePoint(range, body);\n            var html = options.html || options.value || '';\n\n            editor.selectRange(range);\n\n            editor.clipboard.paste(html, options);\n\n            if (options.postProcess) {\n                options.postProcess(editor, editor.getRange());\n            }\n\n            var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n            genericCommand.editor = editor;\n            editor.undoRedoStack.push(genericCommand);\n\n            editor.focus();\n        }\n    });\n\n    var InsertHtmlTool = Tool.extend({\n        initialize: function(ui, editor) {\n            var options = this.options,\n                dataSource = options.items ? options.items : editor.options.insertHtml,\n                component = ui.getKendoDropDownList();\n\n            if (!component) {\n                return;\n            }\n\n            component.one(\"open\", function () {\n                var optionLabel = component.list.parent().find(\".k-list-optionlabel\");\n\n                if (optionLabel.length) {\n                    optionLabel.remove();\n                }\n            });\n\n            component.setOptions({\n                dataSource: dataSource,\n                optionLabel: editor.options.messages.insertHtml\n            });\n            component.bind(\"change\", function () {\n                Tool.exec(editor, 'insertHtml', component.value());\n            });\n        },\n\n        command: function(commandArguments) {\n            return new InsertHtmlCommand(commandArguments);\n        },\n\n        update: function(ui) {\n            var component = ui.data(\"kendoDropDownList\");\n            component.close();\n            component.value(null);\n        }\n    });\n\n    extend(editorNS, {\n        InsertHtmlCommand: InsertHtmlCommand,\n        InsertHtmlTool: InsertHtmlTool\n    });\n\n    registerTool(\"insertHtml\", new InsertHtmlTool({\n        ui: {\n            initialValue: \"Insert HTML\",\n            type: \"component\",\n            component: \"DropDownList\",\n            componentOptions: {\n                dataTextField: \"text\",\n                dataValueField: \"value\",\n                autoSize: true,\n                highlightFirst: false\n            },\n            overflow: \"never\"\n        }\n    }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        registerTool = EditorUtils.registerTool,\n        defaultExportAsItems = [\n            { text: 'Docx', value: 'docx' },\n            { text: 'Rtf', value: 'rtf' },\n            { text: 'Pdf', value: 'pdf' },\n            { text: 'Html', value: 'html' },\n            { text: 'Plain Text', value: 'txt' }\n        ];\n\n    var ExportAsCommand = Command.extend({\n        init: function(options) {\n            var cmd = this;\n            cmd.options = options;\n            Command.fn.init.call(cmd, options);\n            cmd.attributes = null;\n            cmd.exportType = options.exportType;\n        },\n\n        exec: function() {\n            var cmd = this;\n            var range = this.lockRange(true);\n            cmd.postToProxy();\n            cmd.releaseRange(range);\n        },\n\n        postToProxy: function() {\n            this.generateForm().appendTo('body').submit().remove();\n        },\n\n        generateForm: function() {\n            var cmd = this;\n            var exportAsOptions = cmd.editor.options.exportAs;\n            var form = $('<form>').attr({\n                action: exportAsOptions && exportAsOptions.proxyURL || \"\",\n                method: 'POST'\n            });\n\n            form.append([\n                cmd.valueInput(),\n                cmd.exportTypeInput(),\n                cmd.fileNameInput(),\n                cmd.antiForgeryInput()\n            ]);\n\n            return form;\n        },\n\n        valueInput: function() {\n            var editor = this.editor;\n            return $('<input>').attr({\n                value: editor.encodedValue(),\n                name: 'value',\n                type: 'hidden'\n            });\n        },\n\n        exportTypeInput: function() {\n            var cmd = this;\n            return $('<input>').attr({\n                value: cmd.exportType,\n                name: 'exportType',\n                type: 'hidden'\n            });\n\n        },\n\n        fileNameInput: function() {\n            var editor = this.editor;\n            var exportAsOptions = editor.options.exportAs;\n            var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr(\"id\") || \"editor\";\n            return $('<input>').attr({\n                value: fileName,\n                name: 'fileName',\n                type: 'hidden'\n            });\n        },\n\n        antiForgeryInput: function() {\n            var csrf_param = $(\"meta[name=csrf-param],meta[name=_csrf_header]\").attr(\"content\");\n\n            return $(\"input[name^='__RequestVerificationToken']\").clone()\n                        .add($(\"input[name^='\" + csrf_param + \"']\").clone());\n        }\n    });\n\n    var ExportAsTool = Tool.extend({\n        init: function(options) {\n            var tool = this;\n            Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n            tool.type = 'kendoDropDownList';\n        },\n\n        options: {\n            items: defaultExportAsItems\n        },\n\n        command: function(args) {\n            var value = args.value;\n            return new Editor.ExportAsCommand({\n                range: args.range,\n                exportType: value.exportType\n            });\n        },\n\n        initialize: function(ui, editor) {\n            var tool = this,\n                component = ui.getKendoDropDownList();\n\n            tool.editor = editor;\n\n            component.bind(\"change\", this.changeHandler.bind(this));\n        },\n\n        changeHandler: function(e) {\n            this._exec(e.sender.value());\n            e.sender.value(null);\n            e.sender.wrapper.find(\".k-export-tool-text\").text(kendo.htmlEncode(this.editor.options.messages.exportAs));\n        },\n\n        update: function(ui, editor) {\n            var component = ui.data(\"kendoDropDownList\");\n\n            component.close();\n            component.value(null);\n            ui.closest(\".k-dropdownlist\").find(\".k-export-tool-text\").text(kendo.htmlEncode(this.editor.options.messages.exportAs));\n        },\n\n        _exec: function(value) {\n            if (value) {\n                Tool.exec(this.editor, this.options.name, { exportType: value } );\n            }\n        },\n\n        destroy: function() {\n            this._ancestor = null;\n        }\n    });\n\n    extend(Editor, {\n        ExportAsTool: ExportAsTool,\n        ExportAsCommand: ExportAsCommand\n    });\n\n    registerTool('exportAs', new ExportAsTool({\n        ui: {\n            type: \"component\",\n            overflow: \"never\",\n            component: \"DropDownList\",\n            componentOptions: {\n                dataTextField: \"text\",\n                dataValueField: \"value\",\n                valuePrimitive: true,\n                value: null,\n                width: \"140px\",\n                highlightFirst: false,\n                autoWidth: true,\n                itemTemplate: function (data) { return (\"<span class=\\\"k-link k-menu-link\\\" data-value=\\\"\" + (data.value) + \"\\\">\" + (data.text) + \"</strong></span>\"); },\n                icon: \"export\",\n                valueTemplate: function () { return (\"<span class=\\\"k-editor-export\\\">\" + (kendo.ui.icon({ icon: \"export\", iconClass: \"k-button-icon\" })) + \"<span class=\\\"k-export-tool-text\\\"></span></span>\"); }\n            }\n        }\n    }));\n\n    }(window.kendo.jQuery));\n\n    (function($, undefined$1) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        EditorUtils = Editor.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        RangeUtils = Editor.RangeUtils,\n        blockElements = dom.blockElements,\n        BlockFormatFinder = Editor.BlockFormatFinder,\n        BlockFormatter = Editor.BlockFormatter;\n\n    function indent(node, value) {\n        var isRtl = $(node).css(\"direction\") == \"rtl\",\n            indentDirection = isRtl ? \"Right\" : \"Left\",\n            property = dom.name(node) != \"td\" ? \"margin\" + indentDirection : \"padding\" + indentDirection;\n        if (value === undefined$1) {\n            return node.style[property] || 0;\n        } else {\n            if (value > 0) {\n                node.style[property] = value + \"px\";\n            } else {\n                node.style[property] = \"\";\n\n                if (!node.style.cssText) {\n                    node.removeAttribute(\"style\");\n                }\n            }\n        }\n    }\n\n    var IndentFormatter = Class.extend({\n        init: function() {\n            this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n        },\n\n        apply: function(nodes) {\n            nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n            var formatNodes = this.finder.findSuitable(nodes),\n                targets = [],\n                i, len, formatNode, parentList, sibling;\n\n            formatNodes = this.mapImmutables(formatNodes);\n\n            if (formatNodes.length) {\n                for (i = 0, len = formatNodes.length; i < len; i++) {\n                    if (dom.is(formatNodes[i], \"li\")) {\n                        if (!$(formatNodes[i]).index()) {\n                            targets.push(formatNodes[i].parentNode);\n                        } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                            targets.push(formatNodes[i]);\n                        }\n                    } else {\n                        targets.push(formatNodes[i]);\n                    }\n                }\n\n                while (targets.length) {\n                    formatNode = targets.shift();\n                    if (dom.is(formatNode, \"li\")) {\n                        parentList = formatNode.parentNode;\n                        sibling = $(formatNode).prev(\"li\");\n                        var siblingList = sibling.find(\"ul,ol\").last();\n\n                        var nestedList = $(formatNode).children(\"ul,ol\")[0];\n\n                        if (nestedList && sibling[0]) {\n                            if (siblingList[0]) {\n                               siblingList.append(formatNode);\n                               siblingList.append($(nestedList).children());\n                               dom.remove(nestedList);\n                            } else {\n                                sibling.append(nestedList);\n                                nestedList.insertBefore(formatNode, nestedList.firstChild);\n                            }\n                        } else {\n                            nestedList = sibling.children(\"ul,ol\")[0];\n                            if (!nestedList) {\n                                nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList), this.getListTypeAttr(parentList));\n                                sibling.append(nestedList);\n                            }\n\n                            while (formatNode && formatNode.parentNode == parentList) {\n                                nestedList.appendChild(formatNode);\n                                formatNode = targets.shift();\n                            }\n                        }\n                    } else {\n                        var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                        indent(formatNode, marginLeft);\n\n                        for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                            if ($.contains(formatNode, targets[targetIndex])) {\n                                targets.splice(targetIndex, 1);\n                            }\n                        }\n                    }\n                }\n            } else {\n                var formatter = new BlockFormatter([{ tags: [\"p\"] }], { style: { marginLeft: 30 } });\n\n                formatter.apply(nodes);\n            }\n        },\n\n        getListTypeAttr: function(list) {\n            var type = list.getAttribute(\"type\");\n            var styleType = list.style.listStyleType;\n\n            return type ? { type: type } : { style: { listStyleType: styleType } };\n        },\n\n        mapImmutables: function(nodes) {\n            if (!this.immutables) {\n                return nodes;\n            } else {\n                var immutables = [];\n                return $.map(nodes, function(node) {\n                    var immutable = Editor.Immutables.immutableParent(node);\n                    if (immutable) {\n                        if ($.inArray(immutable, immutables) === -1) {\n                            immutables.push(immutable);\n                        } else {\n                            return null;\n                        }\n                    }\n                    return immutable || node;\n                });\n            }\n        },\n\n        remove: function(nodes) {\n            nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n            var formatNodes = this.finder.findSuitable(nodes),\n                targetNode, i, len, list, listParent, siblings,\n                formatNode, marginLeft;\n\n            formatNodes = this.mapImmutables(formatNodes);\n\n            for (i = 0, len = formatNodes.length; i < len; i++) {\n                formatNode = $(formatNodes[i]);\n\n                if (formatNode.is(\"li\")) {\n                    list = formatNode.parent();\n                    listParent = list.parent();\n                    // listParent will be ul or ol in case of invalid dom - <ul><li></li><ul><li></li></ul></ul>\n                    if (listParent.is(\"li,ul,ol\") && !indent(list[0])) {\n                        // skip already processed nodes\n                        if (targetNode && $.contains(targetNode, listParent[0])) {\n                            continue;\n                        }\n\n                        siblings = formatNode.nextAll(\"li\");\n                        if (siblings.length) {\n                            $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                        }\n\n                        if (listParent.is(\"li\")) {\n                            formatNode.insertAfter(listParent);\n                        } else {\n                            formatNode.appendTo(listParent);\n                        }\n\n                        if (!list.children(\"li\").length) {\n                            list.remove();\n                        }\n\n                        continue;\n                    } else {\n                        if (targetNode == list[0]) {\n                            // removing format on sibling LI elements\n                            continue;\n                        }\n                        targetNode = list[0];\n                    }\n                } else {\n                    targetNode = formatNodes[i];\n                }\n\n                marginLeft = parseInt(indent(targetNode), 10) - 30;\n                indent(targetNode, marginLeft);\n            }\n        }\n\n    });\n\n    var IndentCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            options.formatter = /** @ignore */ {\n                toggle: (function(range) {\n                    var indentFormatter = new IndentFormatter();\n                    indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                    indentFormatter.apply(RangeUtils.nodes(range));\n                }).bind(that)\n            };\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var OutdentCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            options.formatter = {\n                toggle: (function(range) {\n                    var indentFormatter = new IndentFormatter();\n                    indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                    indentFormatter.remove(RangeUtils.nodes(range));\n                }).bind(that)\n            };\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var OutdentTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n\n            this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n        },\n\n        initialize: function(ui, editor) {\n            $.extend(this.options, {\n                immutables: editor && editor.options.immutables\n            });\n        },\n\n        update: function(ui, nodes) {\n            var suitableNodes = this.finder.findSuitable(nodes),\n                toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\"),\n                isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n\n            for (i = 0, len = suitableNodes.length; i < len; i++) {\n                suitable = suitableNodes[i];\n\n                if (this.options.immutables) {\n                    immutableParent = Editor.Immutables.immutableParent(suitable);\n\n                    if (immutableParent) {\n                        suitable = immutableParent;\n                    }\n                }\n\n                isOutdentable = indent(suitable);\n\n                if (!isOutdentable) {\n                    listParentsCount = $(suitable).parents(\"ul,ol\").length;\n                    isOutdentable = (dom.is(suitable, \"li\") && (listParentsCount > 1 || indent(suitable.parentNode))) ||\n                                    (dom.ofType(suitable, [\"ul\",\"ol\"]) && listParentsCount > 0);\n                }\n\n                if (isOutdentable) {\n                    toolbar.enable(ui, true);\n                    return;\n                }\n            }\n\n            toolbar.enable(ui, false);\n        }\n    });\n\n    extend(Editor, {\n        IndentFormatter: IndentFormatter,\n        IndentCommand: IndentCommand,\n        OutdentCommand: OutdentCommand,\n        OutdentTool: OutdentTool\n    });\n\n    registerTool(\"indent\", new Tool({ command: IndentCommand }));\n    registerTool(\"outdent\", new OutdentTool({ command: OutdentCommand, ui: { enable: false } }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        extend = $.extend,\n        editorNS = kendo.ui.editor,\n        dom = editorNS.Dom,\n        Command = editorNS.Command,\n        Tool = editorNS.Tool,\n        BlockFormatter = editorNS.BlockFormatter,\n        normalize = dom.normalize,\n        RangeUtils = editorNS.RangeUtils,\n        registerTool = editorNS.EditorUtils.registerTool;\n\n    var ParagraphCommand = Command.extend({\n        init: function(options) {\n            this.options = options;\n            Command.fn.init.call(this, options);\n        },\n\n        _insertMarker: function(doc, range) {\n            var marker = dom.create(doc, 'a'), container;\n            marker.className = \"k-marker\";\n\n            range.insertNode(marker);\n\n            if (!marker.parentNode) {\n                // inserting paragraph in Firefox full body range\n                container = range.commonAncestorContainer;\n                container.innerHTML = \"\";\n                container.appendChild(marker);\n            }\n\n            normalize(marker.parentNode);\n\n            return marker;\n        },\n\n        _moveFocus: function(range, candidate) {\n            if (dom.isEmpty(candidate)) {\n                range.setStartBefore(candidate);\n            } else {\n                range.selectNodeContents(candidate);\n\n                var focusNode = RangeUtils.textNodes(range)[0];\n\n                if (!focusNode) {\n                    while (candidate.childNodes.length && !dom.is(candidate.firstChild, \"br\")) {\n                        candidate = candidate.firstChild;\n                    }\n\n                    focusNode = candidate;\n                }\n\n                if (dom.isEmpty(focusNode)) {\n                    range.setStartBefore(focusNode);\n                } else {\n                    if (dom.emptyNode(focusNode)) {\n                        focusNode.innerHTML = \"\\ufeff\";\n                    }\n                    var startNode = focusNode.firstChild || focusNode;\n                    if (dom.isDataNode(startNode)) {\n                        range.setStart(startNode, 0);\n                    } else {\n                        range.setStartBefore(startNode);\n                    }\n                }\n            }\n        },\n\n        shouldTrim: function(range) {\n            var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','),\n                startInBlock = dom.parentOfType(range.startContainer, blocks),\n                endInBlock = dom.parentOfType(range.endContainer, blocks);\n            return (startInBlock && !endInBlock) || (!startInBlock && endInBlock);\n        },\n\n        _blankAfter: function(node) {\n            while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === \"\")) {\n                node = node.nextSibling;\n            }\n\n            return !node;\n        },\n\n        exec: function() {\n            var range = this.getRange(),\n                doc = RangeUtils.documentFromRange(range),\n                parent, previous, next,\n                emptyParagraphContent = editorNS.emptyElementContent,\n                paragraph, marker, li, heading, tableNode, rng,\n                shouldTrim;\n\n            this.expandImmutablesIn(range);\n\n            shouldTrim = this.shouldTrim(range);\n\n            range.deleteContents();\n            marker = this._insertMarker(doc, range);\n\n            dom.stripBomNode(marker.previousSibling);\n            dom.stripBomNode(marker.nextSibling);\n\n            li = dom.closestEditableOfType(marker, ['li']);\n            heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n            tableNode = dom.is(marker.parentNode, 'table') && marker.parentNode;\n\n            if (li) {\n                // hitting 'enter' in empty li\n                if (dom.emptyNode(li)) {\n                    paragraph = dom.create(doc, 'p');\n\n                    if (dom.next(li)) {\n                        rng = range.cloneRange();\n                        rng.selectNode(li);\n\n                        RangeUtils.split(rng, li.parentNode);\n                    }\n\n                    var br = $(\"br\", li);\n                    if (br.length == 1) {\n                        br.remove();\n                    }\n\n                    var parentNode = li.parentNode;\n                    var parentChildrenLength = li.parentNode.children.length;\n                    var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n\n                    dom.insertAfter(paragraph, parentNode);\n                    dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n\n                    if (firstChild && firstChild !== marker) {\n                        paragraph.appendChild(firstChild);\n                        paragraph.appendChild(marker);\n                    } else {\n                        paragraph.innerHTML = emptyParagraphContent;\n                    }\n                    next = paragraph;\n                }\n            } else if (heading && this._blankAfter(marker)) {\n                paragraph = this._insertParagraphAfter(heading);\n                dom.remove(marker);\n                next = paragraph;\n            } else if (tableNode) {\n                paragraph = this._insertParagraphAfter(tableNode);\n                dom.remove(marker);\n                next = paragraph;\n            }\n\n            if (!next) {\n                if (!(li || heading)) {\n                    new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n                }\n\n                range.selectNode(marker);\n\n                parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n\n                RangeUtils.split(range, parent, shouldTrim);\n\n                previous = parent.previousSibling;\n\n                if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                    previous = previous.firstChild;\n                }\n\n                next = parent.nextSibling;\n\n                this.clean(previous, { links: true });\n                this.clean(next, { links: true });\n\n                if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                    next = next.firstChild;\n                }\n\n                dom.remove(parent);\n\n                // normalize updates the caret display in Gecko\n                normalize(previous);\n            }\n\n            normalize(next);\n\n            this._moveFocus(range, next);\n\n            range.collapse(true);\n\n            dom.scrollTo(next, true);\n\n            RangeUtils.selectRange(range);\n        },\n\n        _insertParagraphAfter: function(node) {\n            var range = this.getRange();\n            var doc = RangeUtils.documentFromRange(range);\n            var emptyElementContent = editorNS.emptyElementContent;\n            var paragraph = dom.create(doc, 'p');\n\n            dom.insertAfter(paragraph, node);\n            paragraph.innerHTML = emptyElementContent;\n\n            return paragraph;\n        },\n\n        clean: function(node, options) {\n            var root = node;\n\n            if (node.firstChild && dom.is(node.firstChild, 'br')) {\n                dom.remove(node.firstChild);\n            }\n\n            if (dom.isDataNode(node) && !node.nodeValue) {\n                node = node.parentNode;\n            }\n\n            if (node) {\n                var siblings = false;\n                while (node.firstChild && node.firstChild.nodeType == 1) {\n                    siblings = siblings || (dom.significantNodes(node.childNodes).length > 1);\n                    node = node.firstChild;\n                }\n\n                if (!dom.isEmpty(node) && node.className != \"k-br\" && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                    $(root).find(\".k-br\").remove();\n                    node.innerHTML = editorNS.emptyElementContent;\n                }\n\n                if (options && options.links) {\n                    while (node != root) {\n                        if (dom.is(node, \"a\") && dom.emptyNode(node)) {\n                            dom.unwrap(node);\n                            break;\n                        }\n                        node = node.parentNode;\n                    }\n                }\n            }\n        }\n    });\n\n    var NewLineCommand = Command.extend({\n        init: function(options) {\n            this.options = options;\n            Command.fn.init.call(this, options);\n        },\n\n        exec: function() {\n            var range = this.getRange();\n            this.expandImmutablesIn(range);\n\n            var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n            var node = range.startContainer;\n            var filler;\n            var browser = kendo.support.browser;\n            var oldIE = browser.msie && browser.version < 11;\n            var tableNode = dom.is(node, 'table') && node;\n            var kbrParent;\n\n            range.deleteContents();\n            if (tableNode) {\n                dom.insertAfter(br, tableNode);\n            } else {\n                kbrParent = $(node).closest('.k-br');\n                range.insertNode(br);\n\n                if (kbrParent.length) {\n                    // pressing enter in an k-br node\n                    dom.unwrap(kbrParent[0]);\n                }\n            }\n\n            normalize(br.parentNode);\n\n            if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n                // Gecko and WebKit cannot put the caret after only one br.\n                if (!!br.nextSibling && dom.isWhitespace(br.nextSibling)) {\n                    $(br.nextSibling).remove();\n                }\n                filler = br.cloneNode(true);\n                filler.className = 'k-br';\n                dom.insertAfter(filler, br);\n            }\n\n            range.setStartAfter(br);\n            range.collapse(true);\n\n            dom.scrollTo(br.nextSibling || br, true);\n\n            RangeUtils.selectRange(range);\n        }\n    });\n\n    extend(editorNS, {\n        ParagraphCommand: ParagraphCommand,\n        NewLineCommand: NewLineCommand\n    });\n\n    registerTool(\"insertLineBreak\", new Tool({ key: 13, shift: true, command: NewLineCommand }));\n    registerTool(\"insertParagraph\", new Tool({ key: 13, command: ParagraphCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        encode = kendo.htmlEncode,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        dom = Editor.Dom,\n        registerTool = EditorUtils.registerTool,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n        LinkFormatter = Editor.LinkFormatter,\n        textNodes = RangeUtils.textNodes,\n        keys = kendo.keys,\n        KEDITORFILEURL = \"#k-editor-file-url\",\n        KEDITORFILETEXT = \"#k-editor-file-text\",\n        KEDITORFILETITLE = \"#k-editor-file-title\";\n\n    var FileCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            Command.fn.init.call(that, options);\n\n            that.formatter = new LinkFormatter();\n\n            that.async = true;\n            that.attributes = {};\n        },\n\n        insertFile: function(file, range) {\n            var attributes = this.attributes;\n            var doc = RangeUtils.documentFromRange(range);\n\n            if (attributes.href && attributes.href != \"http://\") {\n\n                if (!file) {\n                    file = dom.create(doc, \"a\", { href: attributes.href });\n                    file.innerHTML = attributes.innerHTML;\n                    file.title = attributes.title;\n\n                    range.deleteContents();\n                    range.insertNode(file);\n\n                    if (!file.nextSibling) {\n                        dom.insertAfter(doc.createTextNode(\"\\ufeff\"), file);\n                    }\n\n                    range.setStartAfter(file);\n                    range.setEndAfter(file);\n                    RangeUtils.selectRange(range);\n                    return true;\n                } else {\n                    dom.attr(file, attributes);\n                }\n            }\n\n            return false;\n        },\n\n        redo: function() {\n            var that = this,\n                range = that.lockRange();\n\n            this.formatter.apply(range, this.attributes);\n            that.releaseRange(range);\n        },\n\n        exec: function() {\n            var that = this,\n                range = that.lockRange(),\n                nodes = textNodes(range),\n                applied = false,\n                file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null,\n                dialog,\n                form,\n                isIE = kendo.support.browser.msie,\n                options = that.editor.options,\n                messages = options.messages,\n                fileBrowser = options.fileBrowser,\n                showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined$1),\n                dialogOptions = {\n                    title: messages.insertFile,\n                    visible: false,\n                    resizable: showBrowser\n                };\n\n            this.expandImmutablesIn(range);\n\n            function apply(e) {\n                var element = dialog.element,\n                    href = element.find(KEDITORFILEURL).val().replace(/ /g, \"%20\"),\n                    innerHTML = element.find(KEDITORFILETEXT).val(),\n                    title = element.find(KEDITORFILETITLE).val();\n\n                that.attributes = {\n                    href: href,\n                    innerHTML: innerHTML !== \"\" ? innerHTML : href,\n                    title: title\n                };\n\n                applied = that.insertFile(file, range);\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n            }\n\n            function close(e) {\n                e.preventDefault();\n                form.destroy();\n                dialog.destroy();\n\n                dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                if (!applied) {\n                    that.releaseRange(range);\n                }\n            }\n\n            function keyDown(e) {\n                if (e.keyCode == keys.ENTER) {\n                    apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    close(e);\n                }\n            }\n\n            dialogOptions.close = close;\n\n            if (showBrowser) {\n                dialogOptions.width = 750;\n            }\n            dialogOptions.minWidth = 350;\n\n            dialog = this.createDialog(\"<div/>\", dialogOptions).data(\"kendoWindow\");\n            form = that._createForm(dialog, showBrowser);\n\n            dialog.element.toggleClass(\"k-filebrowser-dialog\", showBrowser);\n            dialog.wrapper\n            .find(\".k-dialog-insert\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .find(\".k-form-field input\").on(\"keydown\", keyDown).end()\n            // IE < 8 returns absolute url if getAttribute is not used\n            .find(KEDITORFILEURL).val(file ? file.getAttribute(\"href\", 2) : \"http://\").end()\n            .find(KEDITORFILETEXT).val(file ? file.innerText : \"\").end()\n            .find(KEDITORFILETITLE).val(file ? file.title : \"\").end();\n\n            var element = dialog.element;\n            if (showBrowser) {\n                that._fileBrowser = new kendo.ui.FileBrowser(\n                    element.find(\".k-filebrowser\"),\n                    extend({}, fileBrowser)\n                );\n\n                that._fileBrowser.bind(\"change\", function(ev) {\n                    if (ev.selected.get(\"type\") === \"f\") {\n                        element.find(KEDITORFILEURL).val(this.value());\n                    }\n                } );\n\n                that._fileBrowser.bind(\"apply\", apply);\n            }\n\n            if (isIE) {\n                var dialogHeight = element.closest(\".k-window\").height();\n                element.css(\"max-height\", dialogHeight);\n            }\n            dialog.center().open();\n            element.find(KEDITORFILEURL).trigger(\"focus\").select();\n        },\n\n        _createForm: function(dialog, showBrowser) {\n            var that = this;\n            var formElement = $(\"<div/>\").appendTo(dialog.element);\n            var messages = that.editor.options.messages;\n\n            var form = formElement.kendoForm({\n                renderButtons: false,\n                items: [\n                    {\n                        field: \"k-editor-file-url\",\n                        label: encode(messages.fileWebAddress),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-file-text\",\n                        label: encode(messages.fileText),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-file-title\",\n                        label: encode(messages.fileTitle),\n                        editor: \"TextBox\"\n                    }\n                ]\n            }).data(\"kendoForm\");\n\n            if (showBrowser) {\n                formElement.prepend($('<div class=\"k-filebrowser\"></div>'));\n            }\n\n            dialog.element.after($(that._actionButtonsTemplate({ messages: messages, insertButtonIcon: \"file-add\", cancelButtonIcon: \"cancel-outline\" })));\n\n            return form;\n        }\n\n    });\n\n    kendo.ui.editor.FileCommand = FileCommand;\n\n    registerTool(\"insertFile\", new Editor.Tool({ command: FileCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n\n        NS = \"kendoEditor\",\n        ACTIVESTATE = \"k-active\",\n        SELECTEDSTATE = \"k-selected\",\n        SCOPE = \"scope\",\n        ROW = \"row\",\n        COL = \"col\",\n        ROWGROUP = \"rowgroup\",\n        COLGROUP = \"colgroup\",\n        COLSPAN = \"colspan\",\n        ROWSPAN = \"rowspan\",\n        TABLE = \"table\",\n        THEAD = \"thead\",\n        TBODY = \"tbody\",\n        TR = \"tr\",\n        TD = \"td\",\n        TH = \"th\",\n\n        Tool = Editor.Tool,\n        InsertHtmlCommand = Editor.InsertHtmlCommand,\n        BlockFormatFinder = Editor.BlockFormatFinder,\n        BlockFormatTool = Editor.BlockFormatTool,\n        FormatCommand = Editor.FormatCommand,\n        registerTool = Editor.EditorUtils.registerTool,\n        registerFormat = Editor.EditorUtils.registerFormat,\n        formats = kendo.ui.Editor.fn.options.formats,\n        getTouches = kendo.getTouches;\n    var template = kendo.template;\n\n    var columnTemplate = function (ref) {\n        var width = ref.width;\n        var content = ref.content;\n\n        return (\"<td style=\\\"width:\" + width + \"%;\\\">\" + content + \"</td>\");\n    };\n\n    var tableFormatFinder = new BlockFormatFinder([{ tags: [TABLE] }]);\n\n    var TableCommand = InsertHtmlCommand.extend({\n        init: function(options) {\n            var o = $.extend({\n                postProcess: this.postProcess,\n                skipCleaners: true\n            }, options || {});\n\n            InsertHtmlCommand.fn.init.call(this, o);\n        },\n        _tableHtml: function(rows, columns) {\n            rows = rows || 1;\n            columns = columns || 1;\n            var columnHtml = template(columnTemplate)({ width: 100 / columns, content: Editor.emptyTableCellContent });\n            var rowHeight = 100 / rows;\n\n            return \"<table class='k-table' data-last>\" +\n                        new Array(rows + 1).join(\n                        \"<tr style='height:\" + rowHeight + \"%;'>\" +\n                            new Array(columns + 1).join(columnHtml) +\n                        \"</tr>\") +\n                   \"</table>\";\n        },\n\n        postProcess: function(editor, range) {\n            var insertedTable = $(\"table[data-last]\", editor.document).removeAttr(\"data-last\");\n\n            range.setStart(insertedTable.find(TD)[0], 0);\n            range.collapse(true);\n\n            editor.selectRange(range);\n        },\n\n        exec: function() {\n            var options = this.options;\n            options.html = this._tableHtml(options.rows, options.columns);\n\n            InsertHtmlCommand.fn.exec.call(this);\n        }\n    });\n\n    var PopupTool = Tool.extend({\n        initialize: function(ui, editor) {\n            var that = this;\n            var btn = $(\"<button>\" + editor.options.messages.tableWizard + \"</button>\");\n            var popup = $(this.options.popupTemplate).appendTo(\"body\").kendoPopup({\n                anchor: ui,\n                copyAnchorStyles: false,\n                open: this._open.bind(this),\n                activate: this._activate.bind(this),\n                close: this._close.bind(this)\n            }).data(\"kendoPopup\");\n\n            ui.on(\"click\", this._toggle.bind(this))\n              .on(\"keydown\", this._keydown.bind(this));\n\n            this._editor = editor;\n            this._popup = popup;\n\n            editor.tablePopup = this._popup;\n\n            var tableWizard = new Editor.TableWizardTool({\n                command: Editor.TableWizardCommand,\n                insertNewTable: true\n            });\n\n            registerTool(\"tableWizardInsert\", tableWizard);\n\n            btn.appendTo(popup.element);\n            btn.kendoButton({\n                icon: \"table-wizard\"\n            });\n\n            btn.on(\"click\", function () {\n                that._editor.exec(\"tableWizardInsert\");\n            });\n        },\n\n        popup: function() {\n            return this._popup;\n        },\n\n        _activate: $.noop,\n\n        _open: function() {\n            this._popup.options.anchor.addClass(ACTIVESTATE);\n        },\n\n        _close: function() {\n            this._popup.options.anchor.removeClass(ACTIVESTATE);\n        },\n\n        _keydown: function(e) {\n            var that = this,\n                keys = kendo.keys,\n                key = e.keyCode;\n\n            if (key == keys.ESC) {\n                that._popup.close();\n            } else if (key == keys.DOWN && e.altKey) {\n                that._popup.open();\n                that._setTableSize({ row: 1, col: 1 });\n            } else if (key === keys.ENTER) {\n                setTimeout(function () {\n                    that._setTableSize({ row: 1, col: 1 });\n                });\n            }\n        },\n\n        _toggle: function(e) {\n            var button = $(e.target).closest(\".k-tool\");\n\n            if (!button.hasClass(\"k-disabled\")) {\n                this.popup().toggle();\n            }\n        },\n\n        update: function(ui) {\n            var popup = this.popup();\n\n            if (popup.wrapper && popup.wrapper.css(\"display\") == \"block\") {\n                popup.close();\n            }\n\n            ui.removeClass(\"k-hover\");\n        },\n\n        destroy: function() {\n            if (this._popup) {\n                this._popup.destroy();\n            }\n        }\n    });\n\n    var InsertTableTool = PopupTool.extend({\n        init: function(options) {\n            this.cols = 8;\n            this.rows = 6;\n\n            PopupTool.fn.init.call(this, $.extend(options, {\n                command: TableCommand,\n                popupTemplate:\n                    \"<div class='k-ct-popup'>\" +\n                        \"<div>\" +\n                            new Array(this.cols * this.rows + 1).join(\"<span class='k-ct-cell k-disabled'></span>\") +\n                        \"</div>\" +\n                        \"<div class='k-status'></div>\" +\n                    \"</div>\"\n            }));\n        },\n\n        _activate: function() {\n            var that = this,\n                element = that._popup.element,\n                cells = element.find(\".k-ct-cell\"),\n                firstCell = cells.eq(0),\n                lastCell = cells.eq(cells.length - 1),\n                start = kendo.getOffset(firstCell),\n                end = kendo.getOffset(lastCell),\n                cols = that.cols,\n                rows = that.rows,\n                cellWidth, cellHeight;\n\n            element.find(\"*\").addBack().attr(\"unselectable\", \"on\");\n\n            end.left += lastCell[0].offsetWidth;\n            end.top += lastCell[0].offsetHeight;\n\n            cellWidth = (end.left - start.left) / cols;\n            cellHeight = (end.top - start.top) / rows;\n\n            function tableFromLocation(e) {\n                var w = $(window);\n                return {\n                    row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                    col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n                };\n            }\n\n            element.autoApplyNS(NS)\n                .on(\"mousemove\", \".k-ct-cell\", function(e) {\n                    that._setTableSize(tableFromLocation(e));\n                })\n                .on(\"mouseleave\", \".k-ct-cell\", function() {\n                    that._setTableSize();\n                })\n                .on(\"down\", \".k-ct-cell\", function(e) {\n                    e.preventDefault();\n                    var touch = getTouches(e)[0];\n                    that._exec(tableFromLocation(touch.location));\n                });\n        },\n\n        _valid: function(size) {\n            return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n        },\n\n        _exec: function(size) {\n            if (this._valid(size)) {\n                this._editor.exec(\"createTable\", {\n                    rows: size.row,\n                    columns: size.col\n                });\n                this._popup.close();\n            }\n        },\n\n        _setTableSize: function(size) {\n            var element = this._popup.element;\n            var status = element.find(\".k-status\");\n            var cells = element.find(\".k-ct-cell\");\n            var cols = this.cols;\n            var messages = this._editor.options.messages;\n\n            if (this._valid(size)) {\n                status.text(kendo.format(messages.createTableHint, size.row, size.col));\n\n                cells.each(function(i) {\n                    $(this).toggleClass(\n                        SELECTEDSTATE,\n                        i % cols < size.col && i / cols < size.row\n                    );\n                });\n            } else {\n                status.text(messages.createTable);\n                cells.removeClass(SELECTEDSTATE);\n            }\n        },\n\n        _keydown: function(e) {\n            var initiallyVisible = this._popup.visible();\n\n            PopupTool.fn._keydown.call(this, e);\n\n            if (!this._popup.visible()) {\n                return;\n            }\n\n            var keys = kendo.keys;\n            var key = e.keyCode;\n            var cells = this._popup.element.find(\".k-ct-cell\");\n            var focus = Math.max(cells.filter(\".k-selected\").last().index(), 0);\n            var selectedRows = Math.floor(focus / this.cols);\n            var selectedColumns = focus % this.cols;\n\n            var changed = false,\n                button;\n\n            if (key == keys.DOWN && !e.altKey) {\n                changed = true;\n                selectedRows++;\n            } else if (key == keys.UP) {\n                changed = true;\n                selectedRows--;\n            } else if (key == keys.RIGHT) {\n                changed = true;\n                selectedColumns++;\n            } else if (key == keys.LEFT) {\n                changed = true;\n                selectedColumns--;\n            } else if (key == keys.TAB) {\n                button = this._popup.element.find(\".k-button\");\n\n                if (button.length > 0) {\n                    changed = true;\n                    button.trigger(\"focus\");\n                }\n            }\n\n            var tableSize = {\n                row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n                col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n            };\n\n            if (key == keys.ENTER && initiallyVisible) {\n                this._exec(tableSize);\n            } else {\n                this._setTableSize(tableSize);\n            }\n\n            if (changed) {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n            }\n        },\n\n        _open: function() {\n            var messages = this._editor.options.messages;\n\n            PopupTool.fn._open.call(this);\n\n            this.popup().element\n                .find(\".k-status\").text(messages.createTable).end()\n                .find(\".k-ct-cell\").removeClass(SELECTEDSTATE);\n        },\n\n        _close: function() {\n            PopupTool.fn._close.call(this);\n            this.popup().element.off(\".\" + NS);\n        }\n    });\n\n    var TableModificationCommand = Command.extend({\n        undo: function() {\n            var point = this.restorePoint;\n            point.restoreHtml();\n\n            $(this.editor.body).find(\".k-element-resize-handle-wrapper\")\n                .each(function(index,el) {\n                    el.remove();\n                });\n\n            this.editor.selectRange(point.toRange());\n        },\n        _clearColIndexAttr: function(table) {\n            dom.clearTableMappings(table, \"col-index\");\n        },\n        _mapColIndices: function(table) {\n            dom.reMapTableColumns(table, \"col-index\");\n        },\n        _findRowSpanCell: function(parent, rowIndex, colIndex) {\n            var row, cell;\n\n            for (var i = rowIndex; i >= 0; i--) {\n                row = parent.rows[i];\n                cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n                if (cell.length) {\n                    return cell;\n                }\n            }\n        },\n        _resetElementResizing: function(editor) {\n            editor._destroyResizings();\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        },\n        _findNextTdInRow: function(row, colIndex) {\n            var lastTd = row.find(\"td:last-child\"),\n                lastIndex = parseInt(lastTd.attr(\"col-index\"), 10) + lastTd.prop(\"colSpan\") - 1,\n                td;\n\n            for (var i = colIndex; i <= lastIndex; i++) {\n                td = row.find(\"[col-index=\" + i + \"]\");\n                if (td.length) {\n                    return td;\n                }\n            }\n        },\n        _adjustColgroups: function(row, table) {\n            var colElements = table.getElementsByTagName(COL),\n                colgroupElements = table.getElementsByTagName(COLGROUP),\n                cells = row.cells,\n                numberOfCells = cells.length,\n                i, colgroup, cell;\n\n            while (colElements.length > 0) {\n                colElements[0].remove();\n            }\n            while (colgroupElements.length > 0) {\n                colgroupElements[0].remove();\n            }\n\n            for (i = numberOfCells - 1; i >= 0; i--) {\n                cell = cells[i];\n                if (cell.getAttribute(SCOPE) === COLGROUP) {\n                    colgroup = dom.createEmptyNode(this.editor.document, COLGROUP);\n                    colgroup.setAttribute(\"span\", cell.getAttribute(COLSPAN));\n                    table.prepend(colgroup);\n                } else {\n                    table.prepend(dom.createEmptyNode(this.editor.document, COL));\n                }\n            }\n        },\n        _associateHeaderIds: function(table) {\n            dom.clearTableMappings(table, \"col-index\");\n            dom.reMapTableColumns(table, \"col-index\");\n            $(table).find(\"th, td\").removeAttr(\"id headers\");\n            dom.associateWithIds(table);\n        },\n        _getNumberOfColumns: function(table) {\n            return dom._getNumberOfColumns(table, \"td, th\");\n        }\n    });\n\n    var InsertRowCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(true),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                table = dom.closest(td, TABLE),\n                position = this.options.position || \"after\",\n                cellCount, row, cell,\n                newRow, rowIndex, rowSpanIndex, createdCell;\n\n            if (!table || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            row = td.parentNode;\n            rowIndex = dom.findNodeIndex(row, true);\n\n            if (td.rowSpan > 1 && position === \"after\") {\n                row = table.rows[rowIndex + td.rowSpan - 1];\n            }\n\n            cellCount = this._getNumberOfColumns(table);\n            newRow = row.cloneNode(true);\n            $(newRow).empty();\n\n            for (var i = 0; i < cellCount; i = i + cell.prop(\"colSpan\")) {\n                cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n                if (cell.length) {\n                    if (cell.prop(\"rowSpan\") > 1 && position === \"after\" && cell) {\n                        cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                    } else {\n                        this._appendCell(newRow, cell);\n                    }\n                } else {\n                    rowIndex = dom.findNodeIndex(row, true);\n                    cell = this._findRowSpanCell(row.parentElement, rowIndex, i);\n                    rowSpanIndex = cell.closest(TR).index();\n\n                    if (rowSpanIndex + cell.prop(\"rowSpan\") - 1 === rowIndex && position === \"after\") {\n                        this._appendCell(newRow, cell);\n                    } else {\n                        cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                    }\n                }\n\n                createdCell = $(newRow).find(\"[col-index=\" + i + \"]\");\n                if (createdCell.attr(SCOPE) === ROWGROUP && !createdCell.attr(ROWSPAN)) {\n                    createdCell.attr(SCOPE, ROW);\n                }\n            }\n\n            if (position == \"before\") {\n                dom.insertBefore(newRow, row);\n            } else {\n                dom.insertAfter(newRow, row);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n\n            this._resetElementResizing(this.editor);\n        },\n        _appendCell: function(row, cell) {\n            var newCell;\n\n            newCell = cell.clone();\n            newCell.html(Editor.emptyTableCellContent);\n            newCell.removeAttr(ROWSPAN);\n            newCell.appendTo(row);\n        }\n    });\n\n    var InsertColumnCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(true),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                table = dom.closest(td, TABLE),\n                colElements = table.getElementsByTagName(COL),\n                colgroupElements = table.getElementsByTagName(COLGROUP),\n                columnIndex,\n                i,\n                rows = table && table.rows,\n                cell,\n                newCell,\n                position = this.options.position || \"after\";\n\n\n            if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt(td.getAttribute(\"col-index\"),10);\n\n            if (td.colSpan > 1 && position === \"after\") {\n                td.setAttribute(\"col-index\", columnIndex + td.colSpan - 1);\n                columnIndex = columnIndex + td.colSpan - 1;\n            }\n\n            for (i = 0; i < rows.length; i++) {\n                cell = this._processForColSpan(rows[i], columnIndex, position, td);\n\n                if (!cell) {\n                    continue;\n                }\n\n                newCell = cell.cloneNode();\n                newCell.innerHTML = Editor.emptyTableCellContent;\n                newCell.removeAttribute(COLSPAN);\n\n                if (newCell.getAttribute(SCOPE) && newCell.getAttribute(SCOPE) === COLGROUP) {\n                    newCell.setAttribute(SCOPE, COL);\n                }\n\n                if (position == \"before\") {\n                    dom.insertBefore(newCell, cell);\n                } else {\n                    dom.insertAfter(newCell, cell);\n                }\n\n                this._resizeCells(newCell, cell);\n            }\n\n            if (colElements.length > 0 || colgroupElements.length > 0) {\n                this._adjustColgroups(rows[0], table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n\n            this._resetElementResizing(this.editor);\n        },\n        _processForColSpan: function(row, columnIndex, position, selectedCell) {\n            var cell,\n                colSpanEffect,\n                index = columnIndex - 1;\n\n            cell = $(row).find(\"[col-index=\" + columnIndex + \"]\")[0];\n\n            if (cell && cell.colSpan > 1 && position === \"after\" && cell !== selectedCell) {\n                cell.colSpan += 1;\n                return;\n            }\n\n            if (cell) {\n                return cell;\n            }\n\n            for (index; index >= 0; index--) {\n                cell = $(row).find(\"[col-index=\" + index + \"]\")[0];\n\n                if (cell && cell.colSpan > 1) {\n                    break;\n                }\n            }\n\n            if (!cell) {\n                return;\n            }\n\n            colSpanEffect = parseInt(cell.getAttribute(\"col-index\"),10) + cell.colSpan - 1;\n\n            if (colSpanEffect === columnIndex && position === \"after\") {\n                return cell;\n            } else if (columnIndex <= colSpanEffect) {\n                cell.setAttribute(COLSPAN, cell.colSpan + 1);\n            }\n        },\n        _resizeCells: function(newCell, cell) {\n            var width = newCell.style.width,\n            parsedWidth, unit, calculatedWidth;\n\n            if (!width) {\n                return;\n            }\n\n            parsedWidth = parseFloat(width);\n            unit = width.slice(parsedWidth.toString().length);\n            calculatedWidth = (parsedWidth / 2) + unit;\n\n            newCell.style.width = calculatedWidth;\n            cell.style.width = calculatedWidth;\n        }\n    });\n\n    var DeleteRowCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange();\n            var rows = RangeUtils.mapAll(range, function(node) {\n                return $(node).closest(TR)[0];\n            });\n            var td = dom.closest(range.endContainer, [TD, TH]);\n            var row = rows[0];\n            var rowSpan = td ? td.rowSpan : 1;\n            var rowIndex = $(rows[0]).index();\n            var table = dom.closest(row, TABLE);\n            var rowParent = row.parentElement;\n            var focusElement;\n\n            if (!table || (this.immutables() && Editor.Immutables.immutableParent(row))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            for (var x = 0; x < rowSpan; x++) {\n                if (rows.indexOf(rowParent.rows[rowIndex + x]) < 0) {\n                    rows.push(rowParent.rows[rowIndex + x]);\n                }\n            }\n\n            if (table.rows.length <= rows.length) {\n                focusElement = dom.next(table);\n                if (!focusElement || dom.insignificant(focusElement)) {\n                    focusElement = dom.prev(table);\n                }\n\n                if (focusElement && focusElement.rows) {\n                    focusElement = focusElement.rows[0].cells[0];\n                }\n\n                dom.remove(table);\n                this._resetElementResizing(this.editor);\n            } else if (rowParent.rows.length <= rows.length) {\n                focusElement = rowParent.nextSibling;\n\n                if (!focusElement) {\n                    focusElement = rowParent.previousSibling;\n                }\n\n                dom.remove(rowParent);\n            } else {\n                this._mapColIndices(table);\n\n                for (var i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    dom.removeTextSiblings(row);\n                    focusElement = dom.next(row) || dom.prev(row);\n                    focusElement = focusElement.cells[0];\n\n                    // IE needs to focus the new row before removing the old one\n                    this._focusElement(range, focusElement);\n                    focusElement = null;\n\n                    this._handleRowSpanCells(table, row);\n\n                    dom.remove(row);\n                }\n\n                this._clearColIndexAttr(table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            } else if (dom.is(rowParent, THEAD) && $(table).find(\"[scope]\").length > 0) {\n                this._adjustColgroups(rowParent.rows[0], table);\n            }\n\n            if (focusElement) {\n                this._focusElement(range, focusElement);\n            }\n\n            this._resetElementResizing(this.editor);\n        },\n        _focusElement: function(range, node) {\n            range.setStart(node, 0);\n            range.collapse(true);\n            this.editor.selectRange(range);\n        },\n        _handleRowSpanCells: function(table, row) {\n            var index, cell, adjacentCell, nextRow, rowIndex = dom.findNodeIndex(row, true),\n                firstRow = table.rows[0],\n                lastCell = firstRow.cells[firstRow.cells.length - 1],\n                lastIndex = parseInt(lastCell.getAttribute(\"col-index\"),10) + lastCell.colSpan - 1;\n\n            for (index = 0; index <= lastIndex; index = index + cell.prop(\"colSpan\")) {\n                cell = $(row).find(\"[col-index=\" + index + \"]\");\n\n                if (cell.length && cell.prop(\"rowSpan\") > 1) {\n                    nextRow = table.rows[rowIndex + 1];\n                    adjacentCell = $(nextRow).find(\"[col-index=\" + (index + 1) + \"]\");\n\n                    if (adjacentCell.length) {\n                        adjacentCell.before(cell);\n                    } else {\n                        $(nextRow).append(cell);\n                    }\n                    this._reduceRowSpan(cell);\n                }\n\n                if (!cell.length) {\n                    cell = this._findRowSpanCell(row.parentElement, rowIndex, index);\n                    this._reduceRowSpan(cell);\n                }\n            }\n        },\n        _reduceRowSpan: function(td) {\n            var rowSpanValue = td.prop(\"rowSpan\") - 1;\n\n            if (rowSpanValue <= 1) {\n                td.removeAttr(ROWSPAN);\n                if (td.attr(SCOPE) === ROWGROUP) {\n                    td.attr(SCOPE, ROW);\n                }\n            } else {\n                td.attr(ROWSPAN, rowSpanValue);\n            }\n        }\n    });\n\n    var DeleteColumnCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                table = dom.closest(td, TABLE),\n                rows = table && table.rows,\n                columnIndex = dom.findNodeIndex(td, true),\n                columnCount = rows && rows[0].cells.length,\n                colElements = table.getElementsByTagName(COL),\n                colgroupElements = table.getElementsByTagName(COLGROUP),\n                focusElement, i, cell, x;\n\n            if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            if (columnCount == 1 || td.colSpan == columnCount) {\n                focusElement = dom.next(table);\n                if (!focusElement || dom.insignificant(focusElement)) {\n                    focusElement = dom.prev(table);\n                }\n\n                if (focusElement && focusElement.rows) {\n                    focusElement = focusElement.rows[0].cells[0];\n                }\n\n                dom.remove(table);\n                this._resetElementResizing(this.editor);\n            } else {\n                dom.removeTextSiblings(td);\n\n                focusElement = dom.next(td) || dom.prev(td);\n\n                this._mapColIndices(table);\n\n                columnIndex = parseInt(td.getAttribute(\"col-index\"), 10);\n\n                for (x = 0; x < td.colSpan; x++) {\n                    for (i = 0; i < rows.length; i = i + (cell.prop(\"rowSpan\") || 1)) {\n                        cell = $(rows[i]).find(\"[col-index=\" + (columnIndex + x) + \"]\");\n\n                        if (cell.length && cell.prop(\"colSpan\") <= 1) {\n                            cell.remove();\n                        } else {\n                            this._handleColSpanCells(rows[i], columnIndex + x);\n                        }\n                    }\n                }\n\n                this._clearColIndexAttr(table);\n            }\n\n            if (colElements.length > 0 || colgroupElements.length > 0) {\n                this._adjustColgroups(rows[0], table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            if (focusElement) {\n                range.setStart(focusElement, 0);\n                range.collapse(true);\n                this.editor.selectRange(range);\n            }\n\n            this._resetElementResizing(this.editor);\n        },\n        _handleColSpanCells: function(row, colIndex) {\n            var cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n            if (cell.length && cell.prop(\"colSpan\") > 1) {\n                var clone = cell.clone(true);\n                cell.after(clone);\n                this._reduceColSpan(clone);\n                clone.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n                cell.remove();\n                return;\n            }\n\n            for (var i = colIndex; i >= 0; i--) {\n                cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n                if (cell.length) {\n                    this._reduceColSpan(cell);\n                    cell.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n                    return;\n                }\n            }\n        },\n        _reduceColSpan: function(td) {\n            var colSpanValue = td.prop(\"colSpan\") - 1;\n\n            if (colSpanValue <= 1) {\n                td.removeAttr(COLSPAN);\n                if (td.attr(SCOPE) === COLGROUP) {\n                    td.attr(SCOPE, COL);\n                }\n            } else {\n                td.attr(COLSPAN, colSpanValue);\n            }\n        }\n    });\n\n    var MergeCellsHorizontallyCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                table, row, columnIndex, nextTd, colspan;\n\n                if (!td) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                table = dom.closest(td, TABLE);\n                row = td.parentNode;\n                columnIndex = dom.findNodeIndex(td, true);\n                nextTd = row.children[columnIndex + 1];\n\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                this._mapColIndices(table);\n\n                columnIndex = parseInt($(td).attr(\"col-index\"), 10);\n                nextTd = $(row).find(\"[col-index=\" + (columnIndex + 1 + this._getColspan(td) - 1) + \"]\").get(0);\n\n                if (!nextTd || nextTd.rowSpan !== td.rowSpan || td.tagName !== nextTd.tagName) {\n                    this._clearColIndexAttr(table);\n                    this.releaseRange(range);\n                    return;\n                }\n\n                colspan = this._getColspan(td) + this._getColspan(nextTd);\n\n                $(td).prop(COLSPAN, colspan)\n                     .append(dom.emptyNode(nextTd) ? \"\" : \"<br/>\" + nextTd.innerHTML);\n\n                $(td).width(td.offsetWidth);\n                $(nextTd).remove();\n\n                if (td.getAttribute(SCOPE) === COL) {\n                    td.setAttribute(SCOPE, COLGROUP);\n                }\n                if (td.getAttribute(SCOPE) === COLGROUP) {\n                    this._adjustColgroups(row, table);\n                }\n\n                if ($(table).find(\"[headers]\").length > 0) {\n                    this._associateHeaderIds(table);\n                }\n\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                this._resetElementResizing(this.editor);\n        },\n        _getColspan: function(td) {\n            return parseInt(td.getAttribute(COLSPAN), 10) || 1;\n        }\n    });\n\n    var MergeCellsVerticallyCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                tr, parent, table, columnIndex, rowIndex, targetRow, bottomTd;\n\n                if (!td) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                tr = dom.closest(td, TR);\n                parent = dom.closest(td, [THEAD, TBODY]);\n                table = dom.closest(td, TABLE);\n                columnIndex = dom.findNodeIndex(td, true);\n                rowIndex = dom.findNodeIndex(tr, true);\n\n                if (rowIndex + 1 === parent.rows.length) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                targetRow = parent.rows[rowIndex + this._getRowspan(td)];\n                bottomTd = targetRow && targetRow.children[columnIndex];\n\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                this._mapColIndices(table);\n\n                columnIndex = $(td).attr(\"col-index\");\n                bottomTd = $(targetRow).find(\"[col-index=\" + columnIndex + \"]\").get(0);\n\n                if (!bottomTd || bottomTd.colSpan !== td.colSpan || td.tagName !== bottomTd.tagName) {\n                    this._clearColIndexAttr(table);\n                    this.releaseRange(range);\n                    return;\n                }\n\n                $(td).prop(ROWSPAN, this._getRowspan(td) + this._getRowspan(bottomTd))\n                     .append(dom.emptyNode(bottomTd) ? \"\" : \"<br/>\" + bottomTd.innerHTML);\n\n                if (td.getAttribute(SCOPE) === ROW) {\n                    td.setAttribute(SCOPE, ROWGROUP);\n                }\n\n                $(bottomTd).remove();\n\n                if ($(table).find(\"[headers]\").length > 0) {\n                    this._associateHeaderIds(table);\n                }\n\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n        },\n        _getRowspan: function(td) {\n            return parseInt(td.getAttribute(ROWSPAN), 10) || 1;\n        }\n    });\n\n    var SplitCellCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(),\n                type = this.options.type,\n                attr = type === \"row\" ? COLSPAN : ROWSPAN,\n                td = dom.closest(range.endContainer, [TD, TH]),\n                parent = dom.closest(td, [THEAD, TBODY]),\n                table = dom.closest(td, TABLE),\n                emptyTd = dom.createEmptyNode(this.editor.document, td.nodeName.toLowerCase());\n\n            if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            if (type === \"row\" && $(td).is(\"[\" + attr + \"]\")) {\n                this._splitCellHorizontally(td, parent, attr, emptyTd);\n            } else if (type === \"column\" && $(td).is(\"[\" + attr + \"]\")) {\n                this._splitCellVertically(td, parent, attr, emptyTd);\n            }\n\n            if ($(td).prop(attr.toLowerCase()) <= 1) {\n                $(td).removeAttr(attr);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n        },\n        _getRowspanValue: function(td) {\n            return parseInt(td.getAttribute(ROWSPAN), 10);\n        },\n        _getColspanValue: function(td) {\n            return parseInt(td.getAttribute(COLSPAN), 10);\n        },\n        _splitCellHorizontally: function(td, parent, attr, emptyTd) {\n            var rowSpan = td.rowSpan,\n                colSpan = td.colSpan,\n                tdToAdd = $(emptyTd),\n                colSpanResult = Math.floor(colSpan / 2);\n\n                if (colSpanResult > 1) {\n                    tdToAdd.attr(COLSPAN, colSpanResult);\n                }\n\n                if (rowSpan > 1) {\n                    tdToAdd.attr(ROWSPAN, rowSpan);\n                }\n\n                $(td).prop(attr, colSpan - colSpanResult)\n                    .after(tdToAdd);\n\n                $(td).width(td.offsetWidth);\n                tdToAdd.width(tdToAdd[0].offsetWidth);\n\n                if (td.hasAttribute(SCOPE)) {\n                    if (td.getAttribute(SCOPE) === COLGROUP) {\n                        tdToAdd.attr(SCOPE, COL);\n                        if (!td.getAttribute(COLSPAN) || td.getAttribute(COLSPAN) === \"1\") {\n                            td.setAttribute(SCOPE, COL);\n                        }\n\n                        this._adjustColgroups(td.parentNode, parent.parentNode);\n                    } else {\n                        tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                    }\n                }\n        },\n        _splitCellVertically: function(td, parent, attr, emptyTd) {\n            var tr = dom.closest(td,TR),\n                columnIndex = parseInt($(td).attr(\"col-index\"), 10),\n                rowIndex = dom.findNodeIndex(tr, true),\n                rowSpan = td.rowSpan,\n                colSpan = td.colSpan,\n                rowSpanResult = Math.floor(rowSpan / 2),\n                targetRow = $(parent).find(TR).eq(rowIndex + rowSpan - rowSpanResult),\n                nextTd = this._findNextTdInRow(targetRow, columnIndex + colSpan),\n                tdToAdd = $(emptyTd);\n\n                if (rowSpanResult > 1) {\n                    tdToAdd.attr(ROWSPAN, rowSpanResult);\n                }\n                if (colSpan > 1) {\n                    tdToAdd.attr(COLSPAN, colSpan);\n                }\n\n                if (nextTd && nextTd.length) {\n                    nextTd.before(tdToAdd);\n                } else {\n                    targetRow.append(tdToAdd);\n                }\n\n                $(td).prop(attr, rowSpan - rowSpanResult);\n\n                if (td.hasAttribute(SCOPE)) {\n                    if (td.getAttribute(SCOPE) === ROWGROUP) {\n                        tdToAdd.attr(SCOPE, ROW);\n                        if (!td.getAttribute(ROWSPAN) || td.getAttribute(ROWSPAN) === \"1\") {\n                            td.setAttribute(SCOPE, ROW);\n                        }\n                    } else {\n                        tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                    }\n                }\n        }\n    });\n\n    var TableModificationTool = Tool.extend({\n        command: function(options) {\n            var commandsMap = {\n                row: {\n                    insert: InsertRowCommand,\n                    \"delete\": DeleteRowCommand,\n                    merge: MergeCellsHorizontallyCommand,\n                    split: SplitCellCommand\n                },\n                column: {\n                    insert: InsertColumnCommand,\n                    \"delete\": DeleteColumnCommand,\n                    merge: MergeCellsVerticallyCommand,\n                    split: SplitCellCommand\n                }\n            };\n\n            options = extend(options, this.options);\n            options.action = options.action || \"insert\";\n\n            return new commandsMap[options.type][options.action](options);\n        },\n\n        update: function(ui, nodes) {\n            var isFormatted = !tableFormatFinder.isFormatted(nodes),\n                toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n            if (isFormatted === true) {\n                toolbar.hide(ui);\n            } else {\n                toolbar.show(ui);\n            }\n        }\n    });\n\n    var TableFormatCommand = FormatCommand.extend({\n        exec: function() {\n            var that = this;\n            var editor = that.editor;\n\n            FormatCommand.fn.exec.call(this);\n\n            if (editor.elementResizing) {\n                editor.elementResizing._showResizeHandles();\n            }\n        }\n    });\n\n    // var tableAlignFormatFinder = BlockFormatFinder.extend({\n\n    // });\n\n    var TableFormatTool = BlockFormatTool.extend({\n        update: function(ui, nodes) {\n            var isTable = !tableFormatFinder.isFormatted(nodes),\n                isFormatted = this.options.finder.isFormatted(nodes, this.isTable),\n                toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n            if (toolbar) {\n                toolbar.toggle(ui, isFormatted);\n            }\n\n            if (isTable === true) {\n                toolbar.hide(ui);\n            } else {\n                toolbar.show(ui);\n            }\n        },\n        command: function(commandArguments) {\n            var that = this;\n\n            return new TableFormatCommand(extend(commandArguments, {\n                formatter: that.options.formatter\n            }));\n        },\n        isTable: function(node) {\n            return dom.is(node, \"table\");\n        }\n    });\n\n    extend(kendo.ui.editor, {\n        PopupTool: PopupTool,\n        TableCommand: TableCommand,\n        InsertTableTool: InsertTableTool,\n        TableFormatTool: TableFormatTool,\n        TableFormatCommand: TableFormatCommand,\n        TableModificationTool: TableModificationTool,\n        InsertRowCommand: InsertRowCommand,\n        InsertColumnCommand: InsertColumnCommand,\n        DeleteRowCommand: DeleteRowCommand,\n        DeleteColumnCommand: DeleteColumnCommand,\n        MergeCellsHorizontallyCommand: MergeCellsHorizontallyCommand,\n        MergeCellsVerticallyCommand: MergeCellsVerticallyCommand,\n        SplitCellCommand: SplitCellCommand\n    });\n\n\n    registerTool(\"createTable\", new InsertTableTool({ ui: { popup: true, overflow: \"never\" } }));\n\n    registerTool(\"addColumnLeft\", new TableModificationTool({ type: \"column\", position: \"before\" }));\n    registerTool(\"addColumnRight\", new TableModificationTool({ type: \"column\" }));\n    registerTool(\"addRowAbove\", new TableModificationTool({ type: \"row\", position: \"before\" }));\n    registerTool(\"addRowBelow\", new TableModificationTool({ type: \"row\" }));\n    registerTool(\"deleteRow\", new TableModificationTool({ type: \"row\", action: \"delete\" }));\n    registerTool(\"deleteColumn\", new TableModificationTool({ type: \"column\", action: \"delete\" }));\n    registerTool(\"mergeCellsHorizontally\", new TableModificationTool({ type: \"row\", action: \"merge\" }));\n    registerTool(\"mergeCellsVertically\", new TableModificationTool({ type: \"column\", action: \"merge\" }));\n    registerTool(\"splitCellHorizontally\", new TableModificationTool({ type: \"row\", action: \"split\" }));\n    registerTool(\"splitCellVertically\", new TableModificationTool({ type: \"column\", action: \"split\" }));\n\n    registerFormat(\"tableAlignLeft\", [\n        { tags: [\"table\"], attr: { style: { marginLeft: \"\", marginRight: \"auto\" } } },\n        { tags: [\"table\"], attr: { align: \"left\" } }\n    ]);\n    registerTool(\"tableAlignLeft\", new TableFormatTool({\n        format: formats.tableAlignLeft,\n        ui: {\n            togglable: true,\n            group: \"tableAlign\"\n        }\n    }));\n\n    registerFormat(\"tableAlignCenter\", [\n        { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"auto\" } } },\n        { tags: [\"table\"], attr: { align: \"center\" } }\n    ]);\n    registerTool(\"tableAlignCenter\", new TableFormatTool({\n        format: formats.tableAlignCenter,\n        ui: {\n            togglable: true,\n            group: \"tableAlign\"\n        }\n    }));\n\n    registerFormat(\"tableAlignRight\", [\n        { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"\" } } },\n        { tags: [\"table\"], attr: { align: \"right\" } }\n    ]);\n    registerTool(\"tableAlignRight\", new TableFormatTool({\n        format: formats.tableAlignRight,\n        ui: {\n            togglable: true,\n            group: \"tableAlign\"\n        }\n    }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            editorNS = kendo.ui.editor,\n            RangeUtils = editorNS.RangeUtils,\n            dom = editorNS.Dom,\n            RestorePoint = editorNS.RestorePoint,\n            Marker = editorNS.Marker,\n            browser = kendo.support.browser,\n            extend = $.extend;\n\n    var Clipboard = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n            var pasteCleanup = editor.options.pasteCleanup;\n            this.nonSplittableTagsOnPaste = editor.options.nonSplittableTagsOnPaste || [];\n            this.cleaners = [\n                new ScriptCleaner(pasteCleanup),\n                new TabCleaner(pasteCleanup),\n                new MSWordFormatCleaner(pasteCleanup),\n                new WebkitFormatCleaner(pasteCleanup),\n                new HtmlTagsCleaner(pasteCleanup),\n                new HtmlAttrCleaner(pasteCleanup),\n                new HtmlContentCleaner(pasteCleanup),\n                new CustomCleaner(pasteCleanup) //always keep at end\n            ];\n        },\n\n        htmlToFragment: function(html) {\n            var editor = this.editor,\n                doc = editor.document,\n                container = dom.create(doc, 'div'),\n                fragment = doc.createDocumentFragment();\n\n            container.innerHTML = html;\n\n            while (container.firstChild) {\n                fragment.appendChild(container.firstChild);\n            }\n\n            return fragment;\n        },\n\n        isBlock: function(html) {\n            return (/<(div|p|ul|ol|table|h[1-6])/i).test(html);\n        },\n\n        _startModification: function() {\n            var range;\n            var restorePoint;\n            var editor = this.editor;\n\n            if (this._inProgress) {\n                return;\n            }\n\n            this._inProgress = true;\n\n            range = editor.getRange();\n            restorePoint = new RestorePoint(range, editor.body);\n\n            dom.persistScrollTop(editor.document);\n\n            return { range: range, restorePoint: restorePoint };\n        },\n\n        _endModification: function(modificationInfo) {\n            editorNS._finishUpdate(this.editor, modificationInfo.restorePoint);\n\n            this.editor._selectionChange();\n\n            this._inProgress = false;\n        },\n\n        _contentModification: function(before, after) {\n            var that = this;\n            var editor = that.editor;\n            var modificationInfo = that._startModification();\n\n            if (!modificationInfo) {\n                return;\n            }\n\n            before.call(that, editor, modificationInfo.range);\n\n            setTimeout(function() {\n                after.call(that, editor, modificationInfo.range);\n\n                that._endModification(modificationInfo);\n            });\n        },\n\n        _removeBomNodes: function(range) {\n            var nodes = RangeUtils.textNodes(range);\n\n            for (var i = 0; i < nodes.length; i++) {\n                nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue) || nodes[i].nodeValue;\n            }\n        },\n\n        _onBeforeCopy: function(range) {\n            var marker = new Marker();\n            marker.add(range);\n\n            this._removeBomNodes(range);\n\n            marker.remove(range);\n\n            this.editor.selectRange(range);\n        },\n\n        oncopy: function() {\n            this._onBeforeCopy(this.editor.getRange());\n        },\n\n        oncut: function() {\n            this._onBeforeCopy(this.editor.getRange());\n            this._contentModification($.noop, $.noop);\n        },\n\n        _fileToDataURL: function(blob) {\n            var deferred = $.Deferred();\n\n            var reader = new FileReader();\n\n            if (!(blob instanceof window.File) && blob.getAsFile) {\n                blob = blob.getAsFile();\n            }\n\n            reader.onload = deferred.resolve.bind(deferred);\n\n            reader.readAsDataURL(blob);\n\n            return deferred.promise();\n        },\n\n        _triggerPaste: function(html, options) {\n            var args = { html: html || \"\" };\n\n            args.html = args.html.replace(/\\ufeff/g, \"\");\n\n            this.editor.trigger(\"paste\", args);\n\n            this.paste(args.html, options || {});\n        },\n\n        _handleImagePaste: function(e) {\n            if (!('FileReader' in window) || (browser.msie && browser.version > 10)) {\n                return;\n            }\n\n            var clipboardData = e.clipboardData || e.originalEvent.clipboardData ||\n                        window.clipboardData || {};\n\n            var items = clipboardData.items || clipboardData.files;\n\n            return this._insertImages(items);\n        },\n\n        _insertImages: function(items) {\n            if (!items) {\n                return;\n            }\n\n            var images = $.grep(items, function(item) { return (/^image\\//i).test(item.type); });\n            var html = $.grep(items, function(item) { return (/^text\\/html/i).test(item.type); });\n\n            if (html.length || !images.length) {\n                return;\n            }\n\n            var modificationInfo = this._startModification();\n\n            if (!modificationInfo) {\n                return;\n            }\n\n            $.when.apply($, $.map(images, this._fileToDataURL))\n                .done((function() {\n                    var results = Array.prototype.slice.call(arguments);\n                    var html = $.map(results, function(e) {\n                        return '<img src=\"' + e.target.result + '\" />';\n                    }).join(\"\");\n\n                    this._triggerPaste(html);\n\n                    this._endModification(modificationInfo);\n                }).bind(this));\n\n            return true;\n        },\n\n        onpaste: function(e) {\n            if (this.editor.body.contentEditable === \"false\") {\n                return;\n            }\n\n            if (this._handleImagePaste(e)) {\n                e.preventDefault();\n                return;\n            }\n\n            this.expandImmutablesIn();\n\n            this._contentModification(\n                function beforePaste(editor, range) {\n                    var clipboardNode = dom.create(editor.document, 'div', {\n                            className: 'k-paste-container',\n                            innerHTML: \"\\ufeff\"\n                        });\n                    var browser = kendo.support.browser;\n                    var body = editor.body;\n\n                    this._decoreateClipboardNode(clipboardNode, body);\n\n                    body.appendChild(clipboardNode);\n\n                    //Browser scrolls to clipboardNode\n                    if (browser.webkit) {\n                        this._moveToCaretPosition(clipboardNode, range);\n                    }\n\n                    // text ranges are slow in IE10-, DOM ranges are buggy in IE9-10\n                    if (browser.msie && browser.version < 11) {\n                        e.preventDefault();\n                        var r = editor.createRange();\n                        r.selectNodeContents(clipboardNode);\n                        editor.selectRange(r);\n                        var textRange = editor.document.body.createTextRange();\n                        textRange.moveToElementText(clipboardNode);\n                        $(body).off('paste');\n                        textRange.execCommand('Paste');\n                        $(body).on('paste', this.onpaste.bind(this));\n                    } else {\n                        var clipboardRange = editor.createRange();\n                        clipboardRange.selectNodeContents(clipboardNode);\n                        editor.selectRange(clipboardRange);\n                    }\n\n                    range.deleteContents();\n                },\n                function afterPaste(editor, range) {\n                    var html = \"\", containers;\n\n                    editor.selectRange(range);\n\n                    containers = $(editor.body).children(\".k-paste-container\");\n\n                    containers.each(function() {\n                        var lastChild = this.lastChild;\n\n                        if (lastChild && dom.is(lastChild, 'br')) {\n                            dom.remove(lastChild);\n                        }\n\n                        html += this.innerHTML;\n                    });\n\n                    containers.remove();\n\n                    this._triggerPaste(html, { clean: true });\n                }\n            );\n        },\n        ondragover: function(e) {\n            if (browser.msie || browser.edge) {\n                e.stopPropagation();\n                e.preventDefault();\n            }\n        },\n        ondrop: function(e) {\n            if (!('FileReader' in window)) {\n                return;\n            }\n\n            var dataTransfer = (e.originalEvent || e).dataTransfer || {};\n            var items = dataTransfer.items || dataTransfer.files;\n\n            if (this._insertImages(items)) {\n                e.preventDefault();\n            }\n        },\n        _decoreateClipboardNode: function(node, body) {\n            if (!browser.msie && !browser.webkit) {\n                return;\n            }\n\n            node = $(node);\n            node.css({\n                borderWidth: \"0px\",\n                width: \"0px\",\n                height: \"0px\",\n                overflow: \"hidden\",\n                margin: \"0\",\n                padding: \"0\"\n            });\n\n            if (browser.msie) {\n                //node inherits BODY styles and this causes the browser to add additional\n                var documentElement = $(body.ownerDocument.documentElement);\n\n                node.css({\n                    fontVariant: \"normal\",\n                    fontWeight: \"normal\",\n                    lineSpacing: \"normal\",\n                    lineHeight: \"normal\",\n                    textDecoration: \"none\"\n                });\n                var color = documentElement.css(\"color\");\n                if (color) {\n                    node.css(\"color\", color);\n                }\n                var fontFamily = documentElement.css(\"fontFamily\");\n                if (fontFamily) {\n                    node.css(\"fontFamily\", fontFamily);\n                }\n                var fontSize = documentElement.css(\"fontSize\");\n                if (fontSize) {\n                    node.css(\"fontSize\", fontSize);\n                }\n            }\n        },\n        _moveToCaretPosition: function(node, range) {\n            var that = this;\n            var body = that.editor.body;\n            var nodeOffset = dom.offset(node, body);\n            var caretOffset = that._caretOffset(range, body);\n            var translateX = caretOffset.left - nodeOffset.left;\n            var translateY = caretOffset.top - nodeOffset.top;\n            var translate = \"translate(\" + translateX + \"px,\" + translateY + \"px)\";\n\n            $(node).css({\n                \"-webkit-transform\": translate,\n                \"transform\": translate\n            });\n        },\n        _caretOffset: function(range, body) {\n            var editor = this.editor;\n            var caret = dom.create(editor.document, 'span', { innerHTML: \"\\ufeff\" });\n            var startContainer = range.startContainer;\n            var rangeChanged;\n\n            if (range.collapsed) {\n                var isStartTextNode = dom.isDataNode(startContainer);\n                if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                    dom.insertBefore(caret, startContainer);\n                } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                    dom.insertAfter(caret, startContainer);\n                } else {\n                    range.insertNode(caret);\n                    rangeChanged = true;\n                }\n            } else {\n                startContainer = startContainer === body ?\n                    startContainer.childNodes[range.startOffset] : startContainer;\n                dom.insertBefore(caret, startContainer);\n            }\n\n            var offset = dom.offset(caret, body);\n            var prev = caret.previousSibling;\n            var next = caret.nextSibling;\n\n            dom.remove(caret);\n\n            if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n                var prevLength = prev.length;\n                next.data = prev.data + next.data;\n                range.setStart(next, prevLength);\n                dom.remove(prev);\n\n                range.collapse(true);\n                editor.selectRange(range);\n            }\n\n            return offset;\n        },\n\n        expandImmutablesIn: function(range) {\n            var editor = this.editor;\n            if (editor && editor.options.immutables) {\n                var body = editor.body;\n                range = range || editor.getRange();\n                kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                if (range.startContainer === body && range.startOffset === 0) {\n                    var doc = body.ownerDocument;\n                    var bomNode = doc.createTextNode(\"\\ufeff\");\n                    body.insertBefore(bomNode, body.childNodes[0]);\n                    range.setStartBefore(bomNode);\n                }\n                editor.selectRange(range);\n            }\n        },\n\n        splittableParent: function(block, node) {\n            var parentNode, body;\n\n            if (block) {\n                return dom.closestEditableOfType(node, ['p', 'ul', 'ol']) || node.parentNode;\n            }\n\n            parentNode = node.parentNode;\n            body = node.ownerDocument.body;\n\n            if (dom.isInline(parentNode)) {\n                while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                    parentNode = parentNode.parentNode;\n                }\n            }\n\n            return parentNode;\n        },\n\n        paste: function(html, options) {\n            var editor = this.editor,\n                nonSplittableTagsOnPaste = this.nonSplittableTagsOnPaste,\n                preventSplit = false,\n                unwrapPasted = false,\n                i, l, childNodes, isList;\n\n            this.expandImmutablesIn();\n\n            options = extend({ clean: false, split: true }, options);\n\n            if (!options.skipCleaners) {\n                for (i = 0, l = this.cleaners.length; i < l; i++) {\n                    if (this.cleaners[i].applicable(html)) {\n                        html = this.cleaners[i].clean(html);\n                    }\n                }\n            }\n\n            if (options.clean) {\n                // remove br elements which immediately precede block elements\n                html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/ig, \"$3\");\n                // remove empty inline elements\n                html = html.replace(/<(a|span)[^>]*><\\/\\1>/ig, \"\");\n            }\n\n            html = html.replace(/<(a|span|font)([^>]*)> <\\/\\1>/ig, \"<$1$2>&nbsp;</$1>\");\n\n            // It is possible in IE to copy just <li> tags\n            html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n\n            var block = this.isBlock(html);\n\n            editor.focus();\n            var range = editor.getRange();\n            range.deleteContents();\n\n            if (range.startContainer == editor.document) {\n                range.selectNodeContents(editor.body);\n            }\n\n            var marker = new Marker();\n            var caret = marker.addCaret(range);\n\n            var parent = this.splittableParent(block, caret);\n            var unwrap = false;\n\n            for (i = 0; i < nonSplittableTagsOnPaste.length; i++) {\n                var splitter = nonSplittableTagsOnPaste[i],\n                    tag = splitter.tag || splitter;\n\n                if (dom.is(parent, tag)) {\n                    preventSplit = true;\n                    unwrapPasted = splitter.unwrap !== false;\n                    break;\n                }\n            }\n\n            var splittable = parent != editor.body && !dom.is(parent, \"td\") && !preventSplit;\n\n            if (options.split && splittable && (block || dom.isInline(parent))) {\n                range.selectNode(caret);\n                RangeUtils.split(range, parent, true);\n                unwrap = true;\n            }\n\n            var fragment = this.htmlToFragment(html);\n\n            if (fragment.firstChild && fragment.firstChild.className === \"k-paste-container\") {\n                var fragmentsHtml = [];\n                for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                    fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n                }\n\n                fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n            }\n\n            childNodes = fragment.childNodes;\n\n            if (unwrapPasted) {\n                isList = dom.list(childNodes[0]);\n                dom.unwrap(childNodes[0]);\n\n                if (isList) {\n                    range.selectNode(caret.parentNode);\n                }\n            }\n\n            $(childNodes)\n                .filter(\"table\").addClass(\"k-table\").end()\n                .find(\"table\").addClass(\"k-table\");\n\n            $(childNodes).each(function(index, elm) {\n               if (dom.isBlock(elm) && !dom.isSelfClosing(elm) && elm.innerHTML === \"\") {\n                    elm.appendChild(editor.document.createTextNode(\"\\ufeff\"));\n               }\n            });\n\n            range.insertNode(fragment);\n\n            parent = this.splittableParent(block, caret);\n            if (unwrap) {\n                while (caret.parentNode != parent) {\n                    dom.unwrap(caret.parentNode);\n                }\n\n                dom.unwrap(caret.parentNode);\n            }\n\n            dom.normalize(range.commonAncestorContainer);\n            caret.style.display = 'inline';\n            dom.restoreScrollTop(editor.document);\n            dom.scrollTo(caret);\n            marker.removeCaret(range);\n\n            var rangeEnd = range.commonAncestorContainer.parentNode;\n            if (range.collapsed && dom.name(rangeEnd) == \"tbody\" || range.collapsed && dom.name(rangeEnd) == \"thead\") {\n                range.setStartAfter($(rangeEnd).closest(\"table\")[0]);\n                range.collapse(true);\n            }\n\n            var focusedTable = $(range.commonAncestorContainer.parentNode).closest(\"table\");\n\n            if (focusedTable.get(0)) {\n                var siblingNodes = focusedTable.parent().contents();\n                var lastSiblingIndex = siblingNodes.length - 1;\n                var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n                while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n                    lastSiblingIndex -= 1;\n                    lastSibling = siblingNodes.get(lastSiblingIndex);\n                }\n\n                if (lastSibling === focusedTable.get(0) && !focusedTable.parents(\"table\").length) {\n                    dom.insertAfter(dom.createEmptyNode(editor.document, \"p\"), focusedTable[0]);\n                }\n            }\n\n            editor.selectRange(range);\n        }\n    });\n\n    var Cleaner = Class.extend({\n        init: function(options) {\n            this.options = options || {};\n            this.replacements = [];\n        },\n\n        clean: function(html, customReplacements) {\n            var that = this,\n                replacements = customReplacements || that.replacements,\n                i, l;\n\n            for (i = 0, l = replacements.length; i < l; i += 2) {\n                html = html.replace(replacements[i], replacements[i + 1]);\n            }\n\n            return html;\n        }\n    });\n\n    var ScriptCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n\n            this.replacements = [\n                /<(\\/?)script([^>]*)>/i, \"<$1telerik:script$2>\"\n            ];\n        },\n\n        applicable: function(html) {\n            return !this.options.none && (/<script[^>]*>/i).test(html);\n        }\n    });\n\n    var TabCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n\n            var replacement = ' ';\n            this.replacements = [\n                /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi, replacement,\n                /\\t/gi, replacement,\n                /&nbsp;&nbsp; &nbsp;/gi, replacement\n            ];\n        },\n\n        applicable: function(html) {\n            return (/&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i).test(html);\n        }\n    });\n\n    var MSWordFormatCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n\n            this.junkReplacements = [\n                /<\\?xml[^>]*>/gi, '',\n                /<!--(.|\\n)*?-->/g, '', /* comments */\n                /&quot;/g, \"'\", /* encoded quotes (in attributes) */\n                /<o:p>&nbsp;<\\/o:p>/ig, '&nbsp;',\n                /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/ig, '', /* external references and namespaced tags */\n                /<\\/o>/g, ''\n            ];\n            this.replacements = this.junkReplacements.concat([\n                /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g, '$1',\n                /<br><br>/g, '<BR><BR>',\n                /<br>\\n/g, '<br/>',\n                /<br>(?!\\n)/g, ' ',\n                /<table([^>]*)>(\\s|&nbsp;)+<t/gi, '<table$1><t',\n                /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi, '',\n                /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi, '',\n                /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi, '',\n                /<BR><BR>/g, '<br>',\n                /^\\s*(&nbsp;)+/gi, '',\n                /(&nbsp;|<br[^>]*>)+\\s*$/gi, '',\n                /mso-[^;\"]*;?/ig, '', /* office-related CSS attributes */\n                /<(\\/?)b(\\s[^>]*)?>/ig, '<$1strong$2>',\n                /<(\\/?)font(\\s[^>]*)?>/ig, this.convertFontMatch,\n                /<(\\/?)i(\\s[^>]*)?>/ig, '<$1em$2>',\n                /style=([\"|'])\\s*\\1/g, '', /* empty style attributes */\n                /(<br[^>]*>)?\\n/g, function($0, $1) { return $1 ? $0 : ' '; } /* phantom extra line feeds */\n            ]);\n        },\n\n        convertFontMatch: function(match, closing, args) {\n            var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n            var face = faceRe.exec(args);\n            var family = args && face && face[1];\n\n            if (closing) {\n                return '</span>';\n            } else if (family) {\n                return '<span style=\"font-family:' + family + '\">';\n            } else {\n                return '<span>';\n            }\n        },\n\n        applicable: function(html) {\n            return (/class=\"?Mso/i).test(html) ||\n                   (/style=\"[^\"]*mso-/i).test(html) ||\n                   (/urn:schemas-microsoft-com:office/).test(html);\n        },\n\n        stripEmptyAnchors: function(html) {\n            return html.replace(/<a([^>]*)>\\s*<\\/a>/ig, function(a, attributes) {\n                if (!attributes || attributes.indexOf(\"href\") < 0) {\n                    return \"\";\n                }\n\n                return a;\n            });\n        },\n\n        listType: function(p, listData) {\n            var html = p.innerHTML;\n            var text = dom.innerText(p);\n\n            var startingSymbol;\n            var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n            var symbol = matchSymbol && matchSymbol[1];\n            var isNumber = /^[a-z\\d]/i.test(symbol);//including alpha-numeric and roman numerals\n\n            var trimStartText = function(text) {\n                return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n            };\n\n            if (matchSymbol) {\n                startingSymbol = true;\n            }\n\n            html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\u00a0');\n\n            if ((!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html)) ||\n                (startingSymbol && /^.\\u00a0+/.test(html)) ||\n                (symbol && !isNumber && listData)) {\n                return {\n                    tag: 'ul',\n                    style: this._guessUnorderedListStyle(trimStartText(text))\n                };\n            }\n\n            if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n                return {\n                    tag: 'ol',\n                    style: this._guessOrderedListStyle(trimStartText(text))\n                };\n            }\n        },\n\n        _convertToLi: function(p) {\n            var content;\n\n            if (p.childNodes.length == 1) {\n                content = p.firstChild.nodeType === dom.nodeTypes.TEXT_NODE ? dom.innerText(p) : p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, \"\");\n                content = this._checkForBullet(content);\n            } else {\n                content = this._getHtmlNoBullet(p);\n            }\n\n            dom.remove(p);\n\n            return dom.create(document, 'li', { innerHTML: content });\n        },\n\n        _checkForBullet: function(html) {\n            var p = dom.create(document, 'p', { innerHTML: html });\n            var bulletRgx = /^\\s*\\w+[\\.\\)]\\s+/;\n\n            if (bulletRgx.test(p.innerText)) {\n                return this._getHtmlNoBullet(p);\n            }\n\n            return html;\n        },\n\n        _getHtmlNoBullet: function(element) {\n            var content,\n                name = dom.name(element);\n\n            dom.remove(element.firstChild);\n\n            // check for roman numerals\n            if (element.firstChild.nodeType == 3) {\n                if (/^[ivxlcdm]+\\.$/i.test(element.firstChild.nodeValue)) {\n                    dom.remove(element.firstChild);\n                }\n            }\n\n            if (/^(&nbsp;|\\s)+$/i.test(element.firstChild.innerHTML)) {\n                dom.remove(element.firstChild);\n            }\n\n            if (name != \"p\") {\n                content = \"<\" + name + \">\" + element.innerHTML + \"</\" + name + \">\";\n            } else {\n                content = element.innerHTML;\n            }\n\n            return content;\n        },\n\n        _guessUnorderedListStyle: function(symbol) {\n            if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n                return null;//return \"disc\"; //default CSS value\n            } else if (/^o/.test(symbol)) {\n                return \"circle\";\n            } else {\n                return \"square\";\n            }\n        },\n        _guessOrderedListStyle: function(symbol) {\n            var listType = null;\n            if (!/^\\d/.test(symbol)) {\n                listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') +\n                           (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n            }\n\n            return listType;\n        },\n\n        extractListLevels: function(html) {\n            var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n\n            html = html.replace(msoListRegExp, function(match, list, level) {\n                return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n            });\n\n            return html;\n        },\n\n        _createList: function(type, styleType) {\n            return dom.create(document, type, {\n                style: { listStyleType: styleType }\n            });\n        },\n\n        lists: function(placeholder) {\n            var blockChildren = $(placeholder).find(dom.blockElements.join(',')),\n                lastMargin = -1,\n                name,\n                levels = {},\n                li,\n                rootMargin,\n                rootIndex,\n                lastRootLi,\n                isLastRootLi,\n                rootList,\n                i, p, type, margin, list, listData,\n                acceptedNameTags = [\"p\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"],\n                isParentTable = false;\n\n            for (i = 0; i < blockChildren.length; i++) {\n                p = blockChildren[i];\n                listData = $(p).data();\n                var listIndex = listData.list;\n                name = dom.name(p);\n                isParentTable = !!$(p).parents(\"table\").length;\n\n                if (isParentTable) {\n                    continue;\n                }\n\n                var listType = this.listType(p, listData);\n                type = listType && listType.tag;\n\n                if (!type || acceptedNameTags.indexOf(name) < 0) {\n                    if (!p.innerHTML) {\n                        dom.remove(p);\n                    } else if (li && !isLastRootLi) {\n                        li.appendChild(p);\n                    }\n                    continue;\n                }\n\n                // not supported list levels in ie\n                if (browser.msie) {\n                    continue;\n                }\n\n                margin = listData.level || parseFloat(p.style.marginLeft || 0);\n\n                var levelType = type + listIndex;\n                if (!levels[margin]) {\n                    levels[margin] = {};\n                }\n\n                if (!rootMargin || rootMargin < 0) {\n                    rootMargin = margin;\n                    rootIndex = listIndex;\n                    lastRootLi = $(placeholder).find(\"[data-list='\" + rootIndex + \"']\").last()[0];\n                    rootList = this._createList(type, listType.style);\n                    dom.insertBefore(rootList, p);\n                    lastMargin = margin;\n                    levels[margin][levelType] = rootList;\n                }\n\n                isLastRootLi = lastRootLi === p;\n\n                list = levels[margin][levelType];\n\n                if (margin > lastMargin || !list) {\n                    list = this._createList(type, listType.style);\n                    levels[margin][levelType] = list;\n                    li.appendChild(list);\n                }\n\n                li = this._convertToLi(p);\n                list.appendChild(li);\n\n                if (isLastRootLi) {\n                    rootMargin = lastMargin = -1;\n                } else {\n                    lastMargin = margin;\n                }\n            }\n        },\n\n        removeAttributes: function(element) {\n            var attributes = element.attributes,\n                i = attributes.length,\n                significantStyles = [],\n                isSignificantCss = function(val) {\n                    var significantCss = [\"border\", \"background\", \"padding\"];\n\n                    return significantCss.filter(function(cssAttr) {\n                        return val.trim().indexOf(cssAttr) === 0;\n                    }).length > 0;\n                },\n                addSignificantStyles = function(val) {\n                    if (isSignificantCss(val)) {\n                        significantStyles.push(val.trim());\n                    }\n                },\n                attr, attributeName, attributeValues;\n\n            while (i--) {\n                if (dom.name(attributes[i]) != \"colspan\") {\n                    attr = attributes[i];\n                    attributeName = attr.name;\n\n                    if (attributeName === \"style\" && (element.nodeName === \"TD\" || element.nodeName === \"TH\")) {\n                        attributeValues = attr.value.split(\";\");\n                        attributeValues.forEach(addSignificantStyles);\n                    }\n\n                    element.removeAttributeNode(attributes[i]);\n                }\n            }\n\n            if (significantStyles.length > 0) {\n                element.setAttribute(\"style\", significantStyles.join(\";\"));\n            }\n        },\n\n        createColGroup: function(row) {\n            var cells = row.cells;\n            var table = $(row).closest(\"table\");\n            var colgroup = table.children(\"colgroup\");\n\n            if (cells.length < 2) {\n                return;\n            } else if (colgroup.length) {\n                cells = colgroup.children();\n                colgroup[0].parentNode.removeChild(colgroup[0]);\n            }\n\n            colgroup = $($.map(cells, function(cell) {\n                    var width = cell.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                    }\n\n                    return \"<col />\";\n                }).join(\"\"));\n\n            // jquery 1.9/2.0 discrepancy\n            if (!colgroup.is(\"colgroup\")) {\n                colgroup = $(\"<colgroup/>\").append(colgroup);\n            }\n\n            colgroup.prependTo(table);\n        },\n\n        convertHeaders: function(row) {\n            var cells = row.cells,\n                i,\n                boldedCells = $.map(cells, function(cell) {\n                    var child = $(cell).children(\"p\").children(\"strong\")[0];\n\n                    if (child && dom.name(child) == \"strong\") {\n                        return child;\n                    }\n                });\n\n            if (boldedCells.length == cells.length) {\n                for (i = 0; i < boldedCells.length; i++) {\n                    dom.unwrap(boldedCells[i]);\n                }\n\n                $(row).closest(\"table\")\n                    .find(\"colgroup\").after(\"<thead></thead>\").end()\n                    .find(\"thead\").append(row);\n\n                for (i = 0; i < cells.length; i++) {\n                    dom.changeTag(cells[i], \"th\");\n                }\n            }\n        },\n\n        removeParagraphs: function(cells) {\n            var i, j, len, cell, paragraphs;\n\n            for (i = 0; i < cells.length; i++) {\n                this.removeAttributes(cells[i]);\n\n                // remove paragraphs and insert line breaks between them\n                cell = $(cells[i]);\n                paragraphs = cell.children(\"p\");\n\n                for (j = 0, len = paragraphs.length; j < len; j++) {\n                    if (j < len - 1) {\n                        dom.insertAfter(dom.create(document, \"br\"), paragraphs[j]);\n                    }\n\n                    dom.unwrap(paragraphs[j]);\n                }\n            }\n        },\n\n        removeTextNodes: function(trs) {\n            var i, j, childNodes, currentNode, row;\n\n            for (i = 0; i < trs.length; i++) {\n                row = trs[i];\n                childNodes = row.childNodes;\n\n                for (j = 0; j < childNodes.length; j++) {\n                    currentNode = childNodes[j];\n\n                    if (currentNode.nodeType === dom.nodeTypes.TEXT_NODE) {\n                        row.removeChild(currentNode);\n                    }\n                }\n            }\n        },\n\n        tables: function(placeholder) {\n            var tables = $(placeholder).find(\"table\"),\n                that = this,\n                rows,\n                firstRow, longestRow, i, j;\n\n            for (i = 0; i < tables.length; i++) {\n                rows = tables[i].rows;\n                longestRow = firstRow = rows[0];\n\n                for (j = 1; j < rows.length; j++) {\n                    if (rows[j].cells.length > longestRow.cells.length) {\n                        longestRow = rows[j];\n                    }\n                }\n\n                that.createColGroup(longestRow);\n                that.convertHeaders(firstRow);\n\n                that.removeAttributes(tables[i]);\n\n                that.removeParagraphs(tables.eq(i).find(\"td,th\"));\n\n                that.removeTextNodes(tables.eq(i).find(\"tr\"));\n            }\n        },\n\n        headers: function(placeholder) {\n            var titles = $(placeholder).find(\"p.MsoTitle\");\n\n            for (var i = 0; i < titles.length; i++) {\n                dom.changeTag(titles[i], \"h1\");\n            }\n        },\n\n        removeFormatting: function(placeholder) {\n            $(placeholder).find(\"*\").each(function() {\n                $(this).css({\n                    fontSize: \"\",\n                    fontFamily: \"\"\n                });\n\n                if (!this.getAttribute(\"style\") && !this.style.cssText) {\n                    this.removeAttribute(\"style\");\n                }\n            });\n        },\n\n        clean: function(html) {\n            var that = this, placeholder;\n            var filters = this.options;\n\n            if (filters.none) {\n                html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n                html = that.stripEmptyAnchors(html);\n            } else {\n\n                html = filters.msConvertLists ? this.extractListLevels(html) : html;\n                html = Cleaner.fn.clean.call(that, html);\n                html = that.stripEmptyAnchors(html);\n\n                placeholder = dom.create(document, 'div', { innerHTML: html });\n                that.headers(placeholder);\n\n                if (filters.msConvertLists) {\n                    that.lists(placeholder);\n                }\n                that.tables(placeholder);\n\n                if (filters.msAllFormatting) {\n                    that.removeFormatting(placeholder);\n                }\n\n                html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/ig, '$1');\n            }\n\n            return html;\n        }\n    });\n\n    var WebkitFormatCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n\n            this.replacements = [\n                /\\s+class=\"Apple-style-span[^\"]*\"/gi, '',\n                /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi, '<$1',\n                /^<div>(.*)<\\/div>$/, '$1'\n            ];\n        },\n\n        applicable: function(html) {\n            return (/class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i).test(html);\n        }\n    });\n\n    var DomCleaner = Cleaner.extend({\n        clean: function(html) {\n            var container = dom.create(document, 'div', { innerHTML: html });\n            container = this.cleanDom(container);\n            return container.innerHTML;\n        },\n\n        cleanDom: function(container) {\n            return container;\n        }\n    });\n\n    var HtmlTagsCleaner = DomCleaner.extend({\n        cleanDom: function(container) {\n            var tags = this.collectTags();\n\n            $(container).find(tags).each(function() {\n                dom.unwrap(this);\n            });\n\n            return container;\n        },\n\n        collectTags: function() {\n            if (this.options.span) {\n                return \"span\";\n            }\n        },\n\n        applicable: function() {\n            return this.options.span;\n        }\n    });\n\n    var HtmlAttrCleaner = DomCleaner.extend({\n        cleanDom: function(container) {\n            var attributes = this.collectAttr();\n            var nodes = $(container).find(\"[\" + attributes.join(\"],[\") + \"]\");\n            nodes.removeAttr(attributes.join(\" \"));\n\n            return container;\n        },\n\n        collectAttr: function() {\n            if (this.options.css) {\n                return [\"class\", \"style\"];\n            }\n\n            return [];\n        },\n\n        applicable: function() {\n            return this.options.css;\n        }\n    });\n\n    var TextContainer = function() {\n        this.text = \"\";\n        this.add = function(text) {\n            this.text += text;\n        };\n    };\n\n    var HtmlTextLines = Class.extend({\n        init: function(separators) {\n            this.separators = separators || {\n                    text: \" \",\n                    line: \"<br/>\"\n                };\n            this.lines = [];\n            this.inlineBlockText = [];\n            this.resetLine();\n        },\n\n        appendText: function(text) {\n            if (text.nodeType === 3) {\n                text = text.nodeValue;\n            }\n\n            this.textContainer.add(text);\n        },\n\n        appendInlineBlockText: function(text) {\n            this.inlineBlockText.push(text);\n        },\n\n        flashInlineBlockText: function() {\n            if (this.inlineBlockText.length) {\n                this.appendText(this.inlineBlockText.join(\" \"));\n                this.inlineBlockText = [];\n            }\n        },\n\n        endLine: function() {\n            this.flashInlineBlockText();\n            this.resetLine();\n        },\n\n        html: function() {\n            var separators = this.separators;\n            var result = \"\";\n            var lines = this.lines;\n\n            this.flashInlineBlockText();\n\n            for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n                var line = lines[i];\n                for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                    var text = line[j].text;\n                    result += text;\n                    if (j !== jl1) {\n                        result += separators.text;\n                    }\n                }\n                if (i !== il1) {\n                    result += separators.line;\n                }\n            }\n\n            return result;\n        },\n\n        resetLine: function() {\n            this.textContainer = new TextContainer();\n            this.line = [];\n            this.line.push(this.textContainer);\n            this.lines.push(this.line);\n        }\n    });\n\n    var DomEnumerator = Class.extend({\n        init: function(callback) {\n            this.callback = callback;\n        },\n        enumerate: function(node) {\n            if (!node) {\n                return;\n            }\n\n            var preventDown = this.callback(node);\n\n            var child = node.firstChild;\n            if (!preventDown && child) {\n                this.enumerate(child);\n            }\n\n            this.enumerate(node.nextSibling);\n        }\n    });\n\n    var HtmlContentCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n            this.hasText = false; //unpleasant flag to prevent an empty line at the beginning of the generated content.\n            this.enumerator = new DomEnumerator(this.buildText.bind(this));\n        },\n\n        clean: function(html) {\n            var container = dom.create(document, 'div', { innerHTML: html });\n\n            return this.cleanDom(container);\n        },\n\n        cleanDom: function(container) {\n            this.separators = this.getDefaultSeparators();\n            this.htmlLines = new HtmlTextLines(this.separators);\n            this.enumerator.enumerate(container.firstChild);\n            this.hasText = false;\n\n            return this.htmlLines.html();\n        },\n\n        buildText: function(node) {\n            if (dom.isDataNode(node)) {\n                if (dom.isEmptyspace(node)) {\n                    return;\n                }\n                this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n                this.hasText = true;\n            } else if (dom.isBlock(node) && this.hasText) {\n                var action = this.actions[dom.name(node)] || this.actions.block;\n                return action(this, node);\n            } else if (dom.isBr(node)) {\n                this.htmlLines.appendText(this.separators.line);\n            }\n        },\n\n        applicable: function() {\n            var o = this.options;\n            return o.all || o.keepNewLines;\n        },\n\n        getDefaultSeparators: function() {\n            if (this.options.all) {\n                return { text: \" \", line: \" \" };\n            } else {\n                return { text: \" \", line: \"<br/>\" };\n            }\n        },\n\n        actions: {\n            ul: $.noop,\n            ol: $.noop,\n            table: $.noop,\n            thead: $.noop,\n            tbody: $.noop,\n            td: function(cleaner, node) {\n                var tdCleaner = new HtmlContentCleaner({ all: true });\n\n                var cellText = tdCleaner.cleanDom(node);\n                cleaner.htmlLines.appendInlineBlockText(cellText);\n\n                return true;\n            },\n\n            block: function(cleaner) {\n                cleaner.htmlLines.endLine();\n            }\n        }\n    });\n\n    var CustomCleaner = Cleaner.extend({\n        clean: function(html) {\n            return this.options.custom(html);\n        },\n\n        applicable: function() {\n            return typeof(this.options.custom) === \"function\";\n        }\n    });\n\n    extend(editorNS, {\n        Clipboard: Clipboard,\n        Cleaner: Cleaner,\n        ScriptCleaner: ScriptCleaner,\n        TabCleaner: TabCleaner,\n        MSWordFormatCleaner: MSWordFormatCleaner,\n        WebkitFormatCleaner: WebkitFormatCleaner,\n        HtmlTagsCleaner: HtmlTagsCleaner,\n        HtmlAttrCleaner: HtmlAttrCleaner,\n        HtmlContentCleaner: HtmlContentCleaner,\n        HtmlTextLines: HtmlTextLines,\n        CustomCleaner: CustomCleaner\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        RangeUtils = editorNS.RangeUtils,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        browser = kendo.support.browser,\n        bomSpan = \"<span  class='k-br'>\\ufeff</span>\",\n        extend = $.extend;\n    var nodeTypes = dom.nodeTypes;\n    var PREVIOUS_SIBLING = \"previousSibling\";\n\n    function selected(node, range) {\n        return range.startContainer === node && range.endContainer === node &&\n            range.startOffset === 0 && range.endOffset == node.childNodes.length;\n    }\n\n    function getSibling(node, direction, condition) {\n        var sibling = node ? node[direction] : null;\n\n        while (sibling && !condition(sibling)) {\n            sibling = sibling[direction];\n        }\n\n        return sibling;\n    }\n\n    var tableCells = \"td,th,caption\";\n    var tableCellsWrappers = \"table,tbody,thead,tfoot,tr\";\n    var tableElements = tableCellsWrappers + \",\" + tableCells;\n    var inTable = function(range) { return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers); };\n\n    var RemoveTableContent = Class.extend({\n        remove: function(range) {\n            var that = this;\n            var marker = new Marker();\n            marker.add(range, false);\n\n            var nodes = RangeUtils.getAll(range, function(node) { return $(node).is(tableElements); });\n            var doc = RangeUtils.documentFromRange(range);\n            var start = marker.start;\n            var end = marker.end;\n            var cellsTypes = tableCells.split(\",\");\n            var startCell = dom.parentOfType(start, cellsTypes);\n            var endCell = dom.parentOfType(end, cellsTypes);\n            that._removeContent(start, startCell, true);\n            that._removeContent(end, endCell, false);\n            $(nodes).each(function(i, node) {\n                node = $(node);\n                (node.is(tableCells) ? node : node.find(tableCells)).each(function(j, cell) {\n                    cell.innerHTML = \"&#65279;\";\n                });\n            });\n            if (startCell && !start.previousSibling) {\n                dom.insertBefore(doc.createTextNode(\"\\ufeff\"), start);\n            }\n            if (endCell && !end.nextSibling) {\n                dom.insertAfter(doc.createTextNode(\"\\ufeff\"), end);\n            }\n            if (startCell) {\n                range.setStartBefore(start);\n            } else if (nodes[0]) {\n                startCell = $(nodes[0]);\n                startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n                if (startCell.length) {\n                    range.setStart(startCell.get(0), 0);\n                }\n            }\n\n            range.collapse(true);\n\n            dom.remove(start);\n            dom.remove(end);\n        },\n        _removeContent: function(start, top, forwards) {\n            if (top) {\n                var sibling = forwards ? \"nextSibling\" : \"previousSibling\",\n                    next,\n                    getNext = function(node) {\n                        while (node && !node[sibling]) {\n                            node = node.parentNode;\n                        }\n                        return node && $.contains(top, node) ? node[sibling] : null;\n                    };\n                start = getNext(start);\n                while (start) {\n                    next = getNext(start);\n                    dom.remove(start);\n                    start = next;\n                }\n            }\n        }\n    });\n\n    var TypingHandler = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n        },\n\n        keydown: function(e) {\n            var that = this,\n                editor = that.editor,\n                keyboard = editor.keyboard,\n                isTypingKey = keyboard.isTypingKey(e),\n                evt = extend($.Event(), e);\n\n            that.editor.trigger(\"keydown\", evt);\n\n            if (evt.isDefaultPrevented()) {\n                e.preventDefault();\n                return true;\n            }\n\n            if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n                var range = editor.getRange();\n                var body = editor.body;\n                that.startRestorePoint = new RestorePoint(range, body);\n\n                if (inTable(range)) {\n                    var removeTableContent = new RemoveTableContent(editor);\n                    removeTableContent.remove(range);\n                    editor.selectRange(range);\n                }\n\n                if (browser.webkit && !range.collapsed && selected(body, range)) {\n                    body.innerHTML = \"\";\n                }\n\n                if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                    var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                    backspaceHandler.deleteSelection(range);\n                }\n\n                keyboard.startTyping(function() {\n                    that._removeBomSpan();\n                    that.endRestorePoint = editorNS._finishUpdate(editor, that.startRestorePoint);\n                });\n\n                return true;\n            }\n\n            return false;\n        },\n\n        keyup: function(e) {\n            var keyboard = this.editor.keyboard;\n\n            this.editor.trigger(\"keyup\", e);\n\n            if (keyboard.isTypingInProgress()) {\n                keyboard.endTyping();\n                return true;\n            }\n\n            return false;\n        },\n\n        _removeBomSpan: function() {\n            var node = this.editor.getRange().commonAncestorContainer;\n\n            if (!dom.emptyNode(node)) {\n                if (node.nodeType === 3) {\n                    node = node.parentNode;\n                }\n\n                if (dom.insignificant(node)) {\n                    // typing in an insignificant node\n                    // make it significant\n                    node.textContent = dom.stripBom(node.textContent);\n                    dom.unwrap(node);\n                }\n            }\n        }\n    });\n\n    var BackspaceHandler = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n        },\n        _addCaret: function(container) {\n            var caret = dom.create(this.editor.document, \"a\");\n\n            // Only if not Chrome: Make sure to include cared in the formatted inline node\n            if (!kendo.support.browser.chrome && container.firstChild &&\n                container.firstChild.nodeType === nodeTypes.ELEMENT_NODE) {\n\n                container = container.firstChild;\n            }\n\n            dom.insertAt(container, caret, 0);\n            dom.stripBomNode(caret.previousSibling);\n            dom.stripBomNode(caret.nextSibling);\n            return caret;\n        },\n        _restoreCaret: function(caret) {\n            var range = this.editor.createRange();\n\n            if (!caret.nextSibling && dom.isDataNode(caret.previousSibling)) {\n                range.setStart(caret.previousSibling, caret.previousSibling.length);\n            } else {\n                range.setStartAfter(caret);\n            }\n\n            range.collapse(true);\n            this.editor.selectRange(range);\n            dom.remove(caret);\n        },\n        _handleDelete: function(range) {\n            var node = range.endContainer;\n            var block = dom.closestEditableOfType(node, dom.blockElements);\n\n            if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n                // join with next sibling\n                var next = dom.next(block);\n                if (!next || dom.name(next) != \"p\") {\n                    return false;\n                }\n\n                var caretPlaceholder = dom.significantChildNodes(next)[0];\n                caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder)) ? caretPlaceholder : next;\n                var caret = this._addCaret(caretPlaceholder);\n\n                this._merge(block, next);\n\n                this._restoreCaret(caret);\n\n                return true;\n            }\n\n            return false;\n        },\n        _cleanBomBefore: function(range) {\n            var offset = range.startOffset;\n            var node = range.startContainer;\n            var text = node.nodeValue;\n            var count = 0;\n            while (offset - count >= 0 && text[offset - count - 1] == \"\\ufeff\") {\n                count++;\n            }\n\n            if (count > 0) {\n                node.deleteData(offset - count, count);\n\n                range.setStart(node, Math.max(0, offset - count));\n                range.collapse(true);\n\n                this.editor.selectRange(range);\n            }\n        },\n        _handleBackspace: function(range) {\n            var node = range.startContainer;\n            var li = dom.closestEditableOfType(node, ['li']);\n            var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n            var editor = this.editor;\n            var previousSibling;\n\n            if (dom.isDataNode(node)) {\n                if (range.collapsed && /^\\s[\\ufeff]+$/.test(node.nodeValue)) {\n                    range.setStart(node, 0);\n                    range.setEnd(node, node.length);\n                    editor.selectRange(range);\n                    return false;\n                }\n                this._cleanBomBefore(range);\n            }\n\n            previousSibling = getSibling(block, PREVIOUS_SIBLING, function(sibling) {\n                return !dom.htmlIndentSpace(sibling);\n            });\n\n            //deleting the first list item with empty content in IE results in invalid range\n            if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n                range.startOffset = 0;\n                range.endOffset = 0;\n                editor.selectRange(range);\n            }\n\n            var startAtLi = li && editorNS.RangeUtils.isStartOf(range, li);\n            var liIndex = li && $(li).index();\n            var startAtNonFirstLi = startAtLi && liIndex > 0;\n            if (startAtNonFirstLi) {\n                block = li;\n                previousSibling = dom.prev(li);\n            }\n\n            if (block && previousSibling && dom.is(previousSibling, 'table') && editorNS.RangeUtils.isStartOf(range, block)) {\n                if (block.innerText === '') {\n                    block.innerHTML = '\\ufeff';\n                }\n                return true;\n            }\n\n            // outdent\n            if (editorNS.RangeUtils.isStartOf(range, block) && parseInt(block.style.marginLeft,10) > 0) {\n                editor.exec(\"outdent\");\n                return true;\n            }\n\n            // unwrap block\n            if ((block && previousSibling && editorNS.RangeUtils.isStartOf(range, block)) || startAtNonFirstLi) {\n                var caretPlaceholder = dom.significantChildNodes(block)[0];\n                caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder) && !dom.isImg(caretPlaceholder)) ? caretPlaceholder : block;\n\n                var caret = this._addCaret(caretPlaceholder);\n                this._merge(previousSibling, block);\n                this._restoreCaret(caret);\n\n                return true;\n            }\n\n            // unwrap li element\n            if (startAtLi && liIndex === 0) {\n                var child = li.firstChild;\n                if (!child) {\n                    li.innerHTML = editorNS.emptyElementContent;\n                    child = li.firstChild;\n                }\n\n                var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), \"p\");\n                range.selectNodeContents(li);\n                formatter.toggle(range);\n\n                if (dom.insignificant(child)) {\n                    range.setStartBefore(child);\n                } else {\n                    range.setStart(child, 0);\n                }\n\n                editor.selectRange(range);\n\n                return true;\n            }\n\n            var rangeStartNode = node.childNodes[range.startOffset - 1];\n            var linkRange = range;\n            var anchor = rangeStartNode && dom.closestEditableOfType(rangeStartNode, ['a']);\n            var previousNode = getSibling(rangeStartNode || node, PREVIOUS_SIBLING, function(sibling) {\n                return !dom.isDataNode(sibling) || (!dom.isBom(sibling) && sibling.length > 0);\n            });\n            if (anchor || ((range.startOffset === 0 || rangeStartNode) && dom.is(previousNode, \"a\"))) {\n                anchor = anchor || previousNode;\n                linkRange = editor.createRange();\n                linkRange.setStart(anchor, anchor.childNodes.length);\n                linkRange.collapse(true);\n            }\n\n            anchor = anchor || dom.closestEditableOfType(rangeStartNode || linkRange.startContainer, ['a']);\n            var isEndOfLink = anchor && editorNS.RangeUtils.isEndOf(linkRange, anchor);\n            if (isEndOfLink) {\n                var command = new editorNS.UnlinkCommand({ range: linkRange, body: editor.body, immutables: !!editor.immutables });\n                editor.execCommand(command);\n                editor._selectionChange();\n            }\n            return false;\n        },\n        _handleSelection: function(range) {\n            var ancestor = range.commonAncestorContainer;\n            var table = dom.closest(ancestor, \"table\");\n            var emptyParagraphContent = editorNS.emptyElementContent;\n            var editor = this.editor;\n            var parentElementOrNode;\n\n            if (inTable(range)) {\n                var removeTableContent = new RemoveTableContent(editor);\n                removeTableContent.remove(range);\n                editor.selectRange(range);\n                return true;\n            }\n\n            var marker = new Marker();\n            marker.add(range, false);\n\n            if (range.commonAncestorContainer === editor.body) {\n                this._surroundFullyContent(marker, range);\n            }\n\n            if (editor.immutables) {\n                this._handleImmutables(marker);\n            }\n\n            this._surroundFullySelectedAnchor(marker, range);\n\n            range.setStartAfter(marker.start);\n            range.setEndBefore(marker.end);\n\n            var start = range.startContainer;\n            var end = range.endContainer;\n\n            range.deleteContents();\n\n            if (end.tagName.toLocaleLowerCase() === \"li\" && dom.emptyNode(end)) {\n                range.selectNode(end);\n                range.deleteContents();\n            }\n\n            if (table && $(table).text() === \"\") {\n                range.selectNode(table);\n                range.deleteContents();\n            }\n\n            ancestor = range.commonAncestorContainer;\n\n            if (dom.name(ancestor) === \"p\" && ancestor.innerHTML === \"\") {\n                ancestor.innerHTML = emptyParagraphContent;\n                range.setStart(ancestor, 0);\n            }\n\n            this._join(start, end);\n\n            dom.insertAfter(editor.document.createTextNode(\"\\ufeff\"), marker.start);\n            marker.remove(range);\n\n            start = range.startContainer;\n            if (dom.name(start) == \"tr\") {\n                start = start.childNodes[Math.max(0, range.startOffset - 1)];\n                range.setStart(start, dom.getNodeLength(start));\n            }\n\n            range.collapse(true);\n\n            editor.selectRange(range);\n\n            parentElementOrNode = start.parentElement || start.parentNode;\n\n            if (dom.isDataNode(start) && !dom.emptyNode(parentElementOrNode)) {\n                this._cleanBomBefore(range);\n            }\n\n            return true;\n        },\n        _handleImmutables: function(marker) {\n            var immutableParent = editorNS.Immutables.immutableParent;\n            var startImmutable = immutableParent(marker.start);\n            var endImmutable = immutableParent(marker.start);\n            if (startImmutable) {\n                dom.insertBefore(marker.start, startImmutable);\n            }\n            if (endImmutable) {\n                dom.insertAfter(marker.end, endImmutable);\n            }\n            if (startImmutable) {\n                dom.remove(startImmutable);\n            }\n            if (endImmutable && endImmutable.parentNode) {\n                dom.remove(endImmutable);\n            }\n        },\n        _surroundFullyContent: function(marker, range) {\n            var children = range.commonAncestorContainer.children,\n                startParent = children[0],\n                endParent = children[children.length - 1];\n\n            this._moveMarker(marker, range, startParent, endParent);\n        },\n        _surroundFullySelectedAnchor: function(marker, range) {\n            var start = marker.start,\n                startParent = $(start).closest(\"a\").get(0),\n                end = marker.end,\n                endParent = $(end).closest(\"a\").get(0);\n\n            this._moveMarker(marker, range, startParent, endParent);\n        },\n        _moveMarker: function(marker, range, startParent, endParent) {\n            var start = marker.start,\n                end = marker.end;\n\n            if (startParent && RangeUtils.isStartOf(range, startParent)) {\n                dom.insertBefore(start, startParent);\n            }\n\n            if (endParent && RangeUtils.isEndOf(range, endParent)) {\n                dom.insertAfter(end, endParent);\n            }\n        },\n        _root: function(node) {\n            while (node && dom.name(node) != \"body\" && node.parentNode && dom.name(node.parentNode) != \"body\") {\n                node = node.parentNode;\n            }\n\n            return node;\n        },\n        _join: function(start, end) {\n            start = this._root(start);\n            end = this._root(end);\n\n            if (start != end && dom.is(end, \"p\")) {\n                this._merge(start, end);\n            }\n        },\n        _merge: function(dest, src) {\n            dom.removeTrailingBreak(dest);\n\n            while (dest && src.firstChild) {\n                if (dest.nodeType == 1) {\n                    dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n\n                    if (dest) {\n                        dest.appendChild(src.firstChild);\n                    }\n                } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                    this._mergeWithTextNode(dest, src.firstChild);\n                } else {\n                    dest.parentNode.appendChild(src.firstChild);\n                }\n            }\n\n            dom.remove(src);\n        },\n\n        _mergeWithTextNode: function(textNode, appendedNode) {\n            if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n                if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                    dom.insertAfter(appendedNode, textNode.nextSibling);\n                }\n                else {\n                    dom.insertAfter(appendedNode, textNode);\n                }\n            }\n        },\n\n        _isCaret: function(element) {\n            return $(element).is(\"a\");\n        },\n\n        keydown: function(e) {\n            var method, startRestorePoint;\n            var editor = this.editor;\n            var range = editor.getRange();\n            var keyCode = e.keyCode;\n            var keys = kendo.keys;\n            var backspace = keyCode === keys.BACKSPACE;\n            var del = keyCode == keys.DELETE;\n\n            if (editor.immutables && editor.immutables.keydown(e, range)) {\n                return;\n            }\n\n            if ((backspace || del) && !range.collapsed) {\n                method = \"_handleSelection\";\n            } else if (backspace) {\n                method = \"_handleBackspace\";\n            } else if (del) {\n                method = \"_handleDelete\";\n            }\n\n            if (!method) {\n                return;\n            }\n\n            startRestorePoint = new RestorePoint(range, editor.body);\n\n            if (this[method](range)) {\n                e.preventDefault();\n\n                editorNS._finishUpdate(editor, startRestorePoint);\n            }\n        },\n        deleteSelection: function(range) {\n            this._handleSelection(range);\n        },\n        keyup: $.noop\n    });\n\n    var SystemHandler = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n            this.systemCommandIsInProgress = false;\n        },\n\n        createUndoCommand: function() {\n            this.startRestorePoint = this.endRestorePoint = editorNS._finishUpdate(this.editor, this.startRestorePoint);\n        },\n\n        changed: function() {\n            if (this.startRestorePoint) {\n                return this.startRestorePoint.html != this.editor.body.innerHTML;\n            }\n\n            return false;\n        },\n\n        keydown: function(e) {\n            var that = this,\n                editor = that.editor,\n                keyboard = editor.keyboard;\n\n            if (keyboard.isModifierKey(e)) {\n\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping(true);\n                }\n\n                that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n                return true;\n            }\n\n            if (keyboard.isSystem(e)) {\n                that.systemCommandIsInProgress = true;\n\n                if (that.changed()) {\n                    that.systemCommandIsInProgress = false;\n                    that.createUndoCommand();\n                }\n\n                return true;\n            }\n\n            return false;\n        },\n\n        keyup: function() {\n            var that = this;\n\n            if (that.systemCommandIsInProgress && that.changed()) {\n                that.systemCommandIsInProgress = false;\n                that.createUndoCommand();\n                return true;\n            }\n\n            return false;\n        }\n    });\n\n    var SelectAllHandler = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n        },\n\n        keydown: function(e) {\n            if (!browser.webkit || e.isDefaultPrevented() ||\n                !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n                return;\n            }\n            if (this.editor.options.immutables) {\n                this._toSelectableImmutables();\n            }\n            this._selectEditorBody();\n        },\n\n        _selectEditorBody: function() {\n            var editor = this.editor;\n            var range = editor.getRange();\n            range.selectNodeContents(editor.body);\n\n            setTimeout(function() {\n                editor.selectRange(range);\n            });\n        },\n\n        _toSelectableImmutables: function() {\n            var editor = this.editor,\n                body = editor.body,\n                immutable = editorNS.Immutables.immutable,\n                emptyTextNode = dom.emptyTextNode,\n                first = body.firstChild,\n                last = body.lastChild;\n\n            while (emptyTextNode(first)) {\n                first = first.nextSibling;\n            }\n\n            while (emptyTextNode(last)) {\n                last = last.previousSibling;\n            }\n\n            if (first && immutable(first)) {\n                $(bomSpan).prependTo(body);\n            }\n\n            if (last && immutable(last)) {\n                $(bomSpan).appendTo(body);\n            }\n        },\n\n        keyup: $.noop\n    });\n\n    var Keyboard = Class.extend({\n        init: function(handlers) {\n            this.handlers = handlers;\n            this.typingInProgress = false;\n        },\n\n        isCharacter: function(keyCode) {\n            return (keyCode >= 48 && keyCode <= 90) || (keyCode >= 96 && keyCode <= 111) ||\n                   (keyCode >= 186 && keyCode <= 192) || (keyCode >= 219 && keyCode <= 222) ||\n                   keyCode == 229;\n        },\n\n        toolFromShortcut: function(tools, e) {\n            var key = String.fromCharCode(e.keyCode),\n                toolName,\n                toolOptions,\n                modifier = this._getShortcutModifier(e, navigator.platform);\n\n            for (toolName in tools) {\n                toolOptions = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n                if ((toolOptions.key == key || toolOptions.key == e.keyCode) &&\n                    toolOptions.ctrl == modifier &&\n                    toolOptions.alt == e.altKey &&\n                    toolOptions.shift == e.shiftKey) {\n                    return toolName;\n                }\n            }\n        },\n\n        _getShortcutModifier: function(e, platform) {\n            var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n            return mac ? e.metaKey : e.ctrlKey;\n        },\n\n        toolsFromShortcut: function(tools, e) {\n            var key = String.fromCharCode(e.keyCode),\n                toolName,\n                o,\n                matchesKey,\n                found = [];\n            var matchKey = function(toolKey) { return toolKey == key || toolKey == e.keyCode || toolKey == e.charCode; };\n\n            for (toolName in tools) {\n                o = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n                matchesKey = Array.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n                if (matchesKey &&\n                    o.ctrl == e.ctrlKey &&\n                    o.alt == e.altKey &&\n                    o.shift == e.shiftKey) {\n                    found.push(tools[toolName]);\n                }\n            }\n\n            return found;\n        },\n\n        isTypingKey: function(e) {\n            var keyCode = e.keyCode;\n            return (this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey) ||\n                   keyCode == 32 || keyCode == 13 || keyCode == 8 ||\n                   (keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey);\n        },\n\n        isModifierKey: function(e) {\n            var keyCode = e.keyCode;\n            return (keyCode == 17 && !e.shiftKey && !e.altKey) ||\n                   (keyCode == 16 && !e.ctrlKey && !e.altKey) ||\n                   (keyCode == 18 && !e.ctrlKey && !e.shiftKey);\n        },\n\n        isSystem: function(e) {\n            return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n        },\n\n        startTyping: function(callback) {\n            this.onEndTyping = callback;\n            this.typingInProgress = true;\n        },\n\n        stopTyping: function() {\n            if (this.typingInProgress && this.onEndTyping) {\n                this.onEndTyping();\n            }\n            this.typingInProgress = false;\n        },\n\n        endTyping: function(force) {\n            var that = this;\n            that.clearTimeout();\n            if (force) {\n                that.stopTyping();\n            } else {\n                that.timeout = window.setTimeout(that.stopTyping.bind(that), 1000);\n            }\n        },\n\n        isTypingInProgress: function() {\n            return this.typingInProgress;\n        },\n\n        clearTimeout: function() {\n            window.clearTimeout(this.timeout);\n        },\n\n        notify: function(e, what) {\n            var i, handlers = this.handlers;\n\n            for (i = 0; i < handlers.length; i++) {\n                if (handlers[i][what](e)) {\n                    break;\n                }\n            }\n        },\n\n        keydown: function(e) {\n            this.notify(e, 'keydown');\n        },\n\n        keyup: function(e) {\n            this.notify(e, 'keyup');\n        }\n    });\n\n    extend(editorNS, {\n        TypingHandler: TypingHandler,\n        SystemHandler: SystemHandler,\n        BackspaceHandler: BackspaceHandler,\n        SelectAllHandler: SelectAllHandler,\n        Keyboard: Keyboard\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            editorNS = kendo.ui.editor,\n            Command = editorNS.Command,\n            EditorUtils = editorNS.EditorUtils,\n            registerTool = EditorUtils.registerTool,\n            Tool = editorNS.Tool,\n            extend = $.extend;\n\n    var ExportPdfCommand = Command.extend({\n        init: function(options) {\n            this.async = true;\n            Command.fn.init.call(this, options);\n        },\n\n        exec: function() {\n            var that = this;\n            var range = that.lockRange(true);\n            var editor = that.editor;\n\n            editor._destroyResizings();\n\n            editor.saveAsPDF().then(function() {\n                that.releaseRange(range);\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeElementResizing();\n            });\n        }\n    });\n\n    extend(editorNS, {\n        ExportPdfCommand: ExportPdfCommand\n    });\n\n    registerTool(\"pdf\", new Tool({ command: ExportPdfCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            editorNS = kendo.ui.editor,\n            Command = editorNS.Command,\n            EditorUtils = editorNS.EditorUtils,\n            registerTool = EditorUtils.registerTool,\n            Tool = editorNS.Tool,\n            extend = $.extend;\n\n    var PrintCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n\n            this.managesUndoRedo = true;\n        },\n\n        exec: function() {\n            var editor = this.editor;\n\n            if (kendo.support.browser.msie) {\n                editor.document.execCommand(\"print\", false, null);\n            } else if (editor.window.print) {\n                editor.window.print();\n            }\n        }\n    });\n\n    extend(editorNS, {\n        PrintCommand: PrintCommand\n    });\n\n    registerTool(\"print\", new Tool({ command: PrintCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        Editor = kendo.ui.editor,\n        Tool = Editor.Tool,\n        Command = Editor.Command,\n        EditorUtils = Editor.EditorUtils,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        registerTool = EditorUtils.registerTool;\n\n    var CopyFormatCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n        },\n\n        exec: function() {\n            var range = this.lockRange(true);\n            this.inlineStyles = [];\n            this.blockStyles = [];\n            this.collectStyles(range);\n            this.editor.inlineStyles = this.inlineStyles;\n            this.editor.blockStyles = this.blockStyles;\n            this.releaseRange(range);\n        },\n\n        collectStyles: function(range) {\n            var rangeNodes = RangeUtils.nodes(range);\n            var node;\n\n            if (rangeNodes.length === 1) {\n                node = rangeNodes[0].parentNode;\n            } else {\n                node = range.startContainer;\n            }\n\n            while (node && !dom.is(node, \"body\") && node.getAttribute(\"data-role\") !== \"editor\") {\n                if (dom.isBlock(node)) {\n                    this.populateStyles(node, \"blockStyles\");\n                    if (dom.is(node, \"li\")) {\n                        node = node.parentNode;\n                    } else {\n                        node = null;\n                    }\n                } else {\n                    this.populateStyles(node, \"inlineStyles\");\n                    node = node.parentNode;\n                }\n            }\n        },\n\n        populateStyles: function(node, destination) {\n            var styles = node.style;\n            var attributes = node.attributes;\n            var nodeStyles = {\n                tags: [ node.tagName ],\n                attr: {\n                    style: {}\n                }\n            };\n            var styleValue, styleKey, attributeKey, attributeValue, i;\n\n            for (i = 0; styles && i < styles.length; i++) {\n                styleKey = styles[i];\n                styleValue = styles[styleKey];\n                nodeStyles.attr.style[styleKey] = styleValue;\n            }\n\n            for (i = 0; attributes && i < attributes.length; i++) {\n                attributeKey = attributes[i].nodeName;\n                attributeValue = attributes[i].nodeValue;\n                if (attributeKey === \"style\") {\n                    continue;\n                } else if (attributeKey === \"class\") {\n                    nodeStyles.attr.className = attributeValue;\n                } else {\n                    nodeStyles.attr[attributeKey] = attributeValue;\n                }\n            }\n\n            this[destination].push(nodeStyles);\n        }\n    });\n\n    var ApplyFormatCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n        },\n\n        exec: function() {\n            var range = this.lockRange(true);\n            var markers = RangeUtils.getMarkers(range);\n            var editor = this.editor;\n            var inlineStyles = editor.inlineStyles;\n            var blockStyles = editor.blockStyles;\n            var nodes;\n\n            if ((!inlineStyles || inlineStyles.length === 0) && (!blockStyles || blockStyles.length === 0)) {\n                return;\n            }\n\n            if (markers.length === 3) {\n                this.marker.removeCaret(range);\n                this.marker.caret = null;\n            }\n\n            this.removeEmptyElementsFromRange(range);\n            nodes = RangeUtils.nodes(range);\n            this.cleanInlineParents(nodes);\n            dom.normalize(range.commonAncestorContainer);\n\n            if (markers.length === 2) {\n                range.setStartAfter(markers[0]);\n                range.setEndBefore(markers[1]);\n            } else {\n                range.setStartBefore(nodes[0]);\n                range.setEndAfter(nodes[0]);\n            }\n\n            nodes = RangeUtils.nodes(range);\n\n            if (nodes && blockStyles && blockStyles.length) {\n                this.applyBlockStyles(nodes, blockStyles);\n            }\n\n            if (nodes && inlineStyles && inlineStyles.length) {\n                this.applyInlineStyles(nodes, inlineStyles);\n            }\n\n            this.releaseRange(range);\n        },\n\n        removeEmptyElementsFromRange: function(range) {\n            var isEmptyInline = function(node) {\n                return dom.isInline(node) && !node.firstChild && !dom.isMarker(node);\n            };\n            var emptyElements, i;\n\n            emptyElements = RangeUtils.getAll(range, isEmptyInline);\n\n            if (emptyElements && emptyElements.length > 0) {\n                for (i = 0; i < emptyElements.length; i++) {\n                    emptyElements[i].parentNode.removeChild(emptyElements[i]);\n                }\n            }\n        },\n\n        cleanInlineParents: function(nodes) {\n            var i, node, parent, children, j, child, newNode;\n\n            for (i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n                parent = node.parentNode;\n\n                if (this.immutableParent(node)) {\n                    continue;\n                }\n\n                while (parent && dom.isInline(parent)) {\n                    children = parent.childNodes;\n\n                    for (j = 0; j < children.length; j++) {\n                        child = children[j];\n\n                        if (!dom.isMarker(child) && child !== node) {\n                            newNode = parent.cloneNode(true);\n                            newNode.innerHTML = \"\";\n                            dom.wrap(child, newNode);\n                        }\n                    }\n\n                    dom.unwrap(parent);\n                    parent = node.parentNode;\n                }\n            }\n        },\n\n        applyBlockStyles: function(nodes, blockStyles) {\n            var formatTag = blockStyles[0].tags[0];\n            var attr = blockStyles[0].attr;\n            var document = this.editor.document;\n            var i, len, node, wrapper, blockParent, outerWrapper;\n            var previousNodes, nextNodes, previous, next, prevWrapper, nextWrapper, child, j, listItems;\n\n            for (i = 0, len = nodes.length; i < len; i++) {\n                node = nodes[i];\n\n                if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                    continue;\n                }\n\n                blockParent = dom.blockParentOrBody(node);\n\n                if (blockParent.tagName !== \"BODY\" && blockParent.tagName !== formatTag) {\n                    if (blockParent.tagName !== \"LI\" && blockParent.tagName !== \"TD\" && blockParent.tagName !== \"TH\") {\n                        previousNodes = [];\n                        nextNodes = [];\n                        previous = node.previousSibling;\n                        next = node.nextSibling;\n\n                        while (previous) {\n                            if (!dom.isMarker(previous)) {\n                                previousNodes.push(previous);\n                            }\n\n                            previous = previous.previousSibling;\n                        }\n\n                        if (previousNodes.length) {\n                            prevWrapper = blockParent.cloneNode(true);\n                            prevWrapper.innerHTML = \"\";\n                            dom.insertBefore(prevWrapper, previousNodes[0]);\n\n                            for (j = 0; j < previousNodes.length; j++) {\n                                child = previousNodes[j];\n                                dom.insertAt(prevWrapper, child, 0);\n                            }\n                        }\n\n                        while (next) {\n                            if (!dom.isMarker(next)) {\n                                nextNodes.push(next);\n                            }\n\n                            next = next.nextSibling;\n                        }\n\n                        if (nextNodes.length) {\n                            nextWrapper = blockParent.cloneNode(true);\n                            nextWrapper.innerHTML = \"\";\n                            dom.insertBefore(nextWrapper, nextNodes[0]);\n\n                            for (j = 0; j < nextNodes.length; j++) {\n                                child = nextNodes[j];\n                                nextWrapper.appendChild(child);\n                            }\n                        }\n\n                        dom.unwrap(blockParent);\n                    }\n\n                    wrapper = dom.create(document, formatTag, attr);\n                    dom.wrap(node, wrapper);\n                } else if (blockParent.tagName === formatTag) {\n                    dom.attr(blockParent, attr);\n                }\n            }\n\n            if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\" && formatTag === \"LI\") {\n                listItems = [];\n\n                while (dom.is(wrapper, \"li\")) {\n                    listItems.push(wrapper);\n                    wrapper = dom.prev(wrapper);\n                }\n\n                outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n                dom.insertBefore(outerWrapper, listItems[listItems.length - 1]);\n                outerWrapper.appendChild(listItems[0]);\n\n                for (i = 1, len = listItems.length; i < len; i++) {\n                    dom.insertBefore(listItems[i], outerWrapper.firstChild);\n                }\n            } else if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\") {\n                outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n                dom.wrap(wrapper, outerWrapper);\n            }\n        },\n\n        applyInlineStyles: function(nodes, inlineStyles) {\n            var document = this.editor.document;\n            var currentStyle, createdNode, topNode, i, newNode, node;\n\n            for (i = 0; i < inlineStyles.length; i++) {\n                currentStyle = inlineStyles[i];\n                createdNode = dom.create(document, currentStyle.tags[0], currentStyle.attr);\n\n                if (topNode) {\n                    createdNode.appendChild(topNode);\n                }\n\n                topNode = createdNode;\n            }\n\n            if (topNode) {\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                        continue;\n                    }\n                    newNode = topNode.cloneNode(true);\n                    dom.insertBefore(newNode, node);\n\n                    while (newNode.children && newNode.children.length) {\n                        newNode = newNode.children[0];\n                    }\n\n                    newNode.appendChild(node);\n                }\n            }\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        },\n\n        immutableParent: function(node) {\n            return this.immutables() && Editor.Immutables.immutableParent(node);\n        }\n    });\n\n    var CopyFormatTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n        },\n\n        command: function(commandArguments) {\n            return new CopyFormatCommand(commandArguments);\n        }\n    });\n\n    var ApplyFormatTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n        },\n\n        command: function(commandArguments) {\n            return new ApplyFormatCommand(commandArguments);\n        }\n    });\n\n    $.extend(Editor, {\n        CopyFormatCommand: CopyFormatCommand,\n        ApplyFormatCommand: ApplyFormatCommand,\n        CopyFormatTool: CopyFormatTool,\n        ApplyFormatTool: ApplyFormatTool\n    });\n\n    registerTool(\"copyFormat\", new CopyFormatTool({ }));\n    registerTool(\"applyFormat\", new ApplyFormatTool({ }));\n\n    })(window.kendo.jQuery);\n\n    (function(kendo, undefined$1) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var parseFloat = global.parseFloat;\n\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n\n        var Editor = kendo.ui.editor;\n\n        var PERCENTAGE = \"%\";\n        var PIXEL = \"px\";\n        var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n        var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n        var STRING = \"string\";\n\n        function constrain(options) {\n            var value = options.value;\n            var lowerBound = options.min;\n            var upperBound = options.max;\n\n            return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n        }\n\n        function getScrollBarWidth(element) {\n            if (element && !$(element).is(\"body\") && element.scrollHeight > element.clientHeight) {\n                return kendo.support.scrollbar();\n            }\n\n            return 0;\n        }\n\n        function calculatePercentageRatio(value, total) {\n            if (inPercentages(value)) {\n                return parseFloat(value);\n            }\n            else {\n                return ((parseFloat(value) / total) * 100);\n            }\n        }\n\n        function inPercentages(value) {\n            return (typeof(value) === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value));\n        }\n\n        function inPixels(value) {\n            return (typeof(value) === STRING && REGEX_NUMBER_IN_PIXELS.test(value));\n        }\n\n        function toPercentages(value) {\n            return (parseFloat(value) + PERCENTAGE);\n        }\n\n        function toPixels(value) {\n            return (parseFloat(value) + PIXEL);\n        }\n\n        var ResizingUtils = {\n            constrain: constrain,\n            getScrollBarWidth: getScrollBarWidth,\n            calculatePercentageRatio: calculatePercentageRatio,\n            inPercentages: inPercentages,\n            inPixels: inPixels,\n            toPercentages: toPercentages,\n            toPixels: toPixels\n        };\n\n        extend(Editor, {\n            ResizingUtils: ResizingUtils\n        });\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n\n        var KEY_DOWN = \"keydown\";\n        var MOUSE_DOWN = \"mousedown\";\n        var MOUSE_ENTER = \"mouseenter\";\n        var MOUSE_LEAVE = \"mouseleave\";\n        var MOUSE_MOVE = \"mousemove\";\n        var MOUSE_UP = \"mouseup\";\n\n        var COMMA = \",\";\n        var DOT = \".\";\n        var LAST_CHILD = \":last-child\";\n\n        var TABLE = \"table\";\n\n        var TableElementResizing = Class.extend({\n            init: function(element, options) {\n                var that = this;\n\n                that.options = extend({}, that.options, options);\n\n                that.options.tags = Array.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                    that._attachEventHandlers();\n                }\n            },\n\n            destroy: function() {\n                var that = this;\n                var eventNamespace = that.options.eventNamespace;\n\n                if (that.element) {\n                    $(that.element).off(eventNamespace);\n                    that.element = null;\n                }\n\n                $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n\n                that._destroyResizeHandle();\n            },\n\n            options: {\n                tags: [],\n                min: 0,\n                rootElement: null,\n                eventNamespace: \"\",\n                rtl: false,\n                handle: {\n                    dataAttribute: \"\",\n                    height: 0,\n                    width: 0,\n                    classNames: {},\n                    template: \"\"\n                }\n            },\n\n            _attachEventHandlers: function() {\n                var that = this;\n                var options = that.options;\n\n                $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), that.detectElementBorderHovering.bind(that));\n            },\n\n            resizingInProgress: function() {\n                var that = this;\n                var resizable = that._resizable;\n\n                if (resizable) {\n                    return !!resizable.resizing;\n                }\n\n                return false;\n            },\n\n            resize: noop,\n\n            detectElementBorderHovering: function(e) {\n                var that = this;\n                var options = that.options;\n                var handleOptions = options.handle;\n                var tableElement = $(e.currentTarget);\n                var resizeHandle = that.resizeHandle;\n                var dataAttribute = handleOptions.dataAttribute;\n\n                if (!that.resizingInProgress()) {\n                    if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                        if (resizeHandle) {\n                            if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                                that.showResizeHandle(tableElement, e);\n                            }\n                        }\n                        else {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    }\n                    else {\n                        if (resizeHandle) {\n                            that._destroyResizeHandle();\n                        }\n                    }\n                }\n            },\n\n            elementBorderHovered: noop,\n\n            showResizeHandle: function(tableElement, e) {\n                var that = this;\n\n                if (e.buttons !== 0) {\n                    //prevent showing when a mouse button is still being pressed\n                    return;\n                }\n\n                that._initResizeHandle();\n                that.setResizeHandlePosition(tableElement);\n                that.setResizeHandleDimensions();\n                that.setResizeHandleDataAttributes(tableElement[0]);\n                that._attachResizeHandleEventHandlers();\n\n                that._initResizable(tableElement);\n\n                that._hideResizeMarker();\n                that.resizeHandle.show();\n            },\n\n            _initResizeHandle: function() {\n                var that = this;\n                var options = that.options;\n\n                that._destroyResizeHandle();\n\n                that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n            },\n\n            setResizeHandlePosition: noop,\n\n            setResizeHandleDimensions: noop,\n\n            setResizeHandleDataAttributes: function(tableElement) {\n                var that = this;\n\n                that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n            },\n\n            _attachResizeHandleEventHandlers: function() {\n                var that = this;\n                var options = that.options;\n                var eventNamespace = options.eventNamespace;\n                var markerClass = options.handle.classNames.marker;\n                var resizeHandle = that.resizeHandle;\n\n                that.resizeHandle\n                    .on(MOUSE_DOWN + eventNamespace, function() {\n                        resizeHandle.find(DOT + markerClass).show();\n                    })\n                    .on(MOUSE_UP + eventNamespace, function() {\n                        resizeHandle.find(DOT + markerClass).hide();\n                    });\n            },\n\n            _hideResizeMarker: function() {\n                var that = this;\n\n                that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n            },\n\n            _destroyResizeHandle: function() {\n                var that = this;\n\n                if (that.resizeHandle) {\n                    that._destroyResizable();\n                    that.resizeHandle.off(that.options.eventNamespace).remove();\n                    that.resizeHandle = null;\n                }\n            },\n\n            _initResizable: function(tableElement) {\n                var that = this;\n\n                if (!that.resizeHandle) {\n                    return;\n                }\n\n                that._destroyResizable();\n\n                that._resizable = new kendo.ui.Resizable(tableElement, {\n                    draggableElement: that.resizeHandle[0],\n                    start: that.onResizeStart.bind(that),\n                    resize: that.onResize.bind(that),\n                    resizeend: that.onResizeEnd.bind(that)\n                });\n            },\n\n            _destroyResizable: function() {\n                var that = this;\n\n                if (that._resizable) {\n                    that._resizable.destroy();\n                    that._resizable = null;\n                }\n            },\n\n            onResizeStart: function() {\n                this._disableKeyboard();\n            },\n\n            onResize: function(e) {\n                this.setResizeHandleDragPosition(e);\n            },\n\n            setResizeHandleDragPosition: noop,\n\n            onResizeEnd: function(e) {\n                var that = this;\n\n                that.resize(e);\n                that._destroyResizeHandle();\n                that._enableKeyboard();\n            },\n\n            _enableKeyboard: function() {\n                var options = this.options;\n\n                $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n            },\n\n            _disableKeyboard: function() {\n                var options = this.options;\n\n                $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function(e) {\n                    e.preventDefault();\n                });\n            },\n\n            _forceResizing: function(e) {\n                var resizable = this._resizable;\n\n                if (resizable && resizable.userEvents) {\n                    resizable.userEvents._end(e);\n                }\n            }\n        });\n\n        var ResizingFactory = Class.extend({\n            create: function(editor, options) {\n                var that = this;\n                var resizingName = options.name;\n                var NS = options.eventNamespace;\n\n                $(editor.body)\n                    .on(MOUSE_ENTER + NS, TABLE, function(e) {\n                        var table = e.currentTarget;\n                        var resizing = editor[resizingName];\n\n                        e.stopPropagation();\n\n                        if (resizing) {\n                            if (resizing.element !== table && !resizing.resizingInProgress()) {\n                                that._destroyResizing(editor, options);\n                                that._initResizing(editor, table, options);\n                            }\n                        }\n                        else {\n                            that._initResizing(editor, table, options);\n                        }\n                    })\n                    .on(MOUSE_LEAVE + NS, TABLE, function(e) {\n                        var parentTable;\n                        var resizing = editor[resizingName];\n\n                        e.stopPropagation();\n\n                        if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                            parentTable = $(resizing.element).parents(TABLE)[0];\n\n                            if (parentTable) {\n                                that._destroyResizing(editor, options);\n                                that._initResizing(editor, parentTable, options);\n                            }\n                        }\n                    })\n                    .on(MOUSE_LEAVE + NS, function() {\n                        var resizing = editor[resizingName];\n\n                        if (resizing && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                        }\n                    })\n                    .on(MOUSE_UP + NS, function(e) {\n                        var resizing = editor[resizingName];\n                        var parentTable;\n\n                        if (resizing && resizing.resizingInProgress()) {\n                            parentTable = $(e.target).parents(TABLE)[0];\n\n                            if (parentTable) {\n                                resizing._forceResizing(e);\n                                that._destroyResizing(editor, options);\n                                that._initResizing(editor, parentTable, options);\n                            }\n                        }\n                    });\n            },\n\n            dispose: function(editor, options) {\n                $(editor.body).off(options.eventNamespace);\n            },\n\n            _initResizing: function(editor, tableElement, options) {\n                var resizingName = options.name;\n                var resizingType = options.type;\n\n                editor[resizingName] = new resizingType(tableElement, {\n                    rtl: kendo.support.isRtl(editor.element),\n                    rootElement: editor.body\n                });\n            },\n\n            _destroyResizing: function(editor, options) {\n                var resizingName = options.name;\n\n                if (editor[resizingName]) {\n                    editor[resizingName].destroy();\n                    editor[resizingName] = null;\n                }\n            }\n        });\n        ResizingFactory.current = new ResizingFactory();\n\n        TableElementResizing.create = function(editor, options) {\n            ResizingFactory.current.create(editor, options);\n        };\n\n        TableElementResizing.dispose = function(editor, options) {\n            ResizingFactory.current.dispose(editor, options);\n        };\n\n        extend(Editor, {\n            TableElementResizing: TableElementResizing\n        });\n\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var global = window;\n        var math = global.Math;\n        var abs = math.abs;\n\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n\n        var Editor = kendo.ui.editor;\n        var dom = Editor.Dom;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n\n        var NS = \".kendoEditorColumnResizing\";\n        var RESIZE_HANDLE_CLASS = \"k-column-resize-handle\";\n        var RESIZE_MARKER_CLASS = \"k-column-resize-marker\";\n\n        var BODY = \"body\";\n        var TBODY = \"tbody\";\n        var THEAD = \"thead\";\n        var TD = \"td\";\n        var TH = \"th\";\n        var TR = \"tr\";\n\n        var COLATTR = \"col-index\";\n\n        var COMMA = \",\";\n        var WIDTH = \"width\";\n\n        var ColumnResizing = TableElementResizing.extend({\n            options: {\n                tags: [TD, TH],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: \"column\",\n                    width: 10,\n                    height: 0,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template:\n                        '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                            '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                                '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                            '</div>' +\n                        '</div>'\n                }\n            },\n\n            elementBorderHovered: function(column, e) {\n                var that = this;\n                var options = that.options;\n                var handleWidth = options.handle.width;\n                var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n\n\n                var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n\n                if ((mousePosition > (borderOffset - handleWidth)) && (mousePosition < (borderOffset + handleWidth))) {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            },\n\n            setResizeHandlePosition: function(column) {\n                var that = this;\n                var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n                var options = that.options;\n                var rtl = options.rtl;\n                var handleWidth = options.handle.width;\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n                var columnWidthOffset = rtl ? 0 : outerWidth(column);\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var columnOffsetLeft = column.offset().left -\n                                        (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                        parseFloat(column.css(\"marginLeft\"));\n                var innerElementOffsetTop = tableInnerElement.offset().top -\n                                        (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                        parseFloat(tableInnerElement.css(\"marginTop\"));\n                var browser = kendo.support.browser;\n\n                if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    scrollLeftOffset = scrollLeftOffset * -1;\n                }\n\n                that.resizeHandle.css({\n                    top: innerElementOffsetTop + scrollTopOffset,\n                    left: columnOffsetLeft + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - (handleWidth / 2),\n                    position: \"absolute\"\n                });\n            },\n\n            setResizeHandleDimensions: function() {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableBody = $(that.element).children(TBODY);\n                var fullHeight = tableHead.length > 0 ? tableHead.height() + tableBody.height() : tableBody.height();\n\n                that.resizeHandle.css({\n                    width: that.options.handle.width,\n                    height: fullHeight\n                });\n            },\n\n            setResizeHandleDragPosition: function(e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rootElement = $(options.rootElement);\n                var handleWidth = options.handle ? options.handle.width : 0;\n                var min = options.min;\n                var rtl = options.rtl;\n                var columnWidth = outerWidth(column);\n                var columnLeftOffset = column.offset().left -\n                                        (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                        parseFloat(column.css(\"marginLeft\"));\n                var adjacentColumnWidth = outerWidth(column.next());\n                var resizeHandle = $(that.resizeHandle);\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var resizeHandleOffsetLeft = resizeHandle.offset().left -\n                                                (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                                parseFloat(resizeHandle.css(\"marginLeft\"));\n                var browser = kendo.support.browser;\n\n                if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    scrollLeftOffset = scrollLeftOffset * -1;\n                }\n\n                var handleOffset = constrain({\n                    value: resizeHandleOffsetLeft + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                    min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                    max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n                });\n\n                resizeHandle.css({ left: handleOffset });\n            },\n\n            resize: function(e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rtlModifier = options.rtl ? (-1) : 1;\n                var min = options.min;\n                var initialDeltaX = rtlModifier * e.x.initialDelta;\n                var newWidth;\n                var initialAdjacentColumnWidth;\n                var initialColumnWidth;\n                var colIndex;\n                var nextColumn;\n\n                dom.reMapTableColumns(that.element, COLATTR);\n\n                colIndex = parseInt(column.attr(COLATTR), 10);\n\n                if (column.prop(\"colSpan\") > 1) {\n                    column = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + column.prop(\"colSpan\") - 1) + \"]\").eq(0);\n                    colIndex = parseInt(column.attr(COLATTR), 10);\n                }\n\n                nextColumn = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + 1) + \"]:not([colspan])\");\n\n                that._setTableComputedWidth();\n                that._setColumnsComputedWidth();\n\n                initialColumnWidth = outerWidth(column);\n                initialAdjacentColumnWidth = outerWidth(nextColumn);\n\n                newWidth = constrain({\n                    value: initialColumnWidth + initialDeltaX,\n                    min: min,\n                    max: initialColumnWidth + initialAdjacentColumnWidth - min\n                });\n\n                that._resizeColumn(column[0], newWidth);\n                that._resizeTopAndBottomColumns(column[0], newWidth);\n                that._resizeAdjacentColumns(parseInt(column.attr(COLATTR),10), initialAdjacentColumnWidth, initialColumnWidth, (initialColumnWidth - newWidth));\n\n                dom.clearTableMappings(that.element, COLATTR);\n            },\n\n            _setTableComputedWidth: function() {\n                var element = this.element;\n\n                if (element.style[WIDTH] === \"\") {\n                    element.style[WIDTH] = toPixels(outerWidth($(element)));\n                }\n            },\n\n            _setColumnsComputedWidth: function() {\n                var that = this;\n                var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n                var innerElementWidth = outerWidth(tableInnerElement);\n                var columns = tableInnerElement.children(TR).children(TD);\n                var length = columns.length;\n                var currentColumnsWidths = columns.map(function() {\n                    return outerWidth($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    if (inPercentages(columns[i].style[WIDTH])) {\n                        columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], innerElementWidth));\n                    }\n                    else {\n                        columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                    }\n                }\n            },\n\n            _resizeTopAndBottomColumns: function(column, newWidth) {\n                var that = this;\n                var columnIndex = $(column).attr(COLATTR);\n                var topAndBottomColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                    .filter(function() {\n                        var cell = this;\n                        return ($(cell).attr(COLATTR) === columnIndex && cell !== column);\n                    });\n                var length = topAndBottomColumns.length;\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    that._resizeColumn(topAndBottomColumns[i], newWidth);\n                }\n            },\n\n            _resizeColumn: function(column, newWidth) {\n                var innerTableElement = $(this.element.tHead || this.element.tBodies[0]);\n                if (inPercentages(column.style[WIDTH])) {\n                    column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth(innerTableElement)));\n                }\n                else {\n                    column.style[WIDTH] = toPixels(newWidth);\n                }\n            },\n\n            _resizeAdjacentColumns: function(columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var adjacentColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                    .filter(function() {\n                        return (parseInt($(this).attr(COLATTR),10) === (columnIndex + 1));\n                    });\n                var length = adjacentColumns.length;\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n                }\n            },\n\n            _resizeAdjacentColumn: function(adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var min = that.options.min;\n                var newWidth;\n\n                newWidth = constrain({\n                    value: initialAdjacentColumnWidth + deltaWidth,\n                    min: min,\n                    max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n                });\n\n                that._resizeColumn(adjacentColumn, newWidth);\n            }\n        });\n\n        ColumnResizing.create = function(editor) {\n            TableElementResizing.create(editor, {\n                name: \"columnResizing\",\n                type: ColumnResizing,\n                eventNamespace: NS\n            });\n        };\n\n        ColumnResizing.dispose = function(editor) {\n            TableElementResizing.dispose(editor, {\n                eventNamespace: NS\n            });\n        };\n\n        extend(Editor, {\n            ColumnResizing: ColumnResizing\n        });\n\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var math = window.Math;\n        var abs = math.abs;\n\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerHeight = kendo._outerHeight;\n\n        var NS = \".kendoEditorRowResizing\";\n        var RESIZE_HANDLE_CLASS = \"k-row-resize-handle\";\n        var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = \"k-row-resize-marker-wrapper\";\n        var RESIZE_MARKER_CLASS = \"k-row-resize-marker\";\n\n        var BODY = \"body\";\n        var TR = \"tr\";\n        var TBODY = \"tbody\";\n        var THEAD = \"thead\";\n\n        var COMMA = \",\";\n        var HEIGHT = \"height\";\n\n        var RowResizing = TableElementResizing.extend({\n            options: {\n                tags: [TR],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: \"row\",\n                    width: 0,\n                    height: 10,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template:\n                        '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                            '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                                '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' +\n                                    '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                                '</div>' +\n                            '</div>' +\n                        '</div>'\n                }\n            },\n\n            elementBorderHovered: function(tableElement, e) {\n                var that = this;\n                var handleHeight = that.options.handle[HEIGHT];\n                var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n                var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n\n                if ((mousePosition > (borderOffset - handleHeight)) && (mousePosition < (borderOffset + handleHeight))) {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            },\n\n            setResizeHandlePosition: function(row) {\n                var that = this;\n                var options = that.options;\n                var handleHeight = options.handle[HEIGHT];\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n\n                var rowOffsetLeft = row.offset().left -\n                                        (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                        parseFloat(row.css(\"marginLeft\"));\n                var rowOffsetTop = row.offset().top -\n                                        (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                        parseFloat(row.css(\"marginTop\"));\n                var browser = kendo.support.browser;\n\n                if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    scrollLeftOffset = scrollLeftOffset * -1;\n                }\n\n                that.resizeHandle.css({\n                    top: rowOffsetTop + outerHeight(row) + scrollTopOffset - (handleHeight / 2),\n                    left: rowOffsetLeft + (scrollLeftOffset - scrollBarWidth),\n                    position: \"absolute\"\n                });\n            },\n\n            setResizeHandleDimensions: function() {\n                var that = this;\n                var innerTableElement = $(that.element.tHead || that.element.tBodies[0]);\n\n                that.resizeHandle.css({\n                    width: innerTableElement.width(),\n                    height: that.options.handle[HEIGHT]\n                });\n            },\n\n            setResizeHandleDragPosition: function(e) {\n                var that = this;\n                var options = that.options;\n                var min = options.min;\n                var tableHead = $(that.element).children(THEAD);\n                var tableBody = $(that.element).children(TBODY);\n                var topInnerTableElement = tableHead.length > 0 ? tableHead : tableBody;\n                var resizeHandle = $(that.resizeHandle);\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var $row = $(row);\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var tableTopOffset = topInnerTableElement.offset().top -\n                                        (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                        parseFloat(topInnerTableElement.css(\"marginTop\"));\n\n                var rowOffsetTop = $row.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat($row.css(\"marginTop\"));\n\n                var resizeHandleOffsetTop = resizeHandle.offset().top -\n                                    (Math.max(0 , rootElement.offset().top) + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(resizeHandle.css(\"marginTop\"));\n\n                var handleOffset = constrain({\n                    value: resizeHandleOffsetTop + scrollTopOffset + e.y.delta,\n                    min: rowOffsetTop + scrollTopOffset + min,\n                    max: tableTopOffset + outerHeight(tableHead) + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n                });\n\n                resizeHandle.css({ top: handleOffset });\n            },\n\n            resize: function(e) {\n                var that = this;\n                var options = that.options;\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var currentRowHeight = outerHeight($(row));\n                var element = $(that.element);\n                var initialTableHeight = outerHeight(element);\n                var tableHead = element.children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = element.children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var initialStyleHeight = row.style[HEIGHT];\n                var newRowHeight = constrain({\n                    value: currentRowHeight + e.y.initialDelta,\n                    min: options.min,\n                    max: abs(tableHeadHeight + tableBodyHeight - options.min)\n                });\n\n                that._setRowsHeightInPixels();\n                row.style[HEIGHT] = toPixels(newRowHeight);\n                that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n\n                if (inPercentages(initialStyleHeight)) {\n                    //resize rows in percentages as late as possible to prevent incorrect precision calculations\n                    that._setRowsHeightInPercentages();\n                }\n            },\n\n            _setRowsHeightInPixels: function() {\n                var that = this;\n                var rows = $(that.element).children(TBODY + COMMA + THEAD).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function() {\n                    return outerHeight($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n\n            _setRowsHeightInPercentages: function() {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function() {\n                    return outerHeight($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n                }\n            },\n\n            _setTableHeight: function(newHeight) {\n                var element = this.element;\n\n                if (inPercentages(element.style[HEIGHT])) {\n                    element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n                }\n                else {\n                    element.style[HEIGHT] = toPixels(newHeight);\n                }\n            }\n        });\n\n        RowResizing.create = function(editor) {\n            TableElementResizing.create(editor, {\n                name: \"rowResizing\",\n                type: RowResizing,\n                eventNamespace: NS\n            });\n        };\n\n        RowResizing.dispose = function(editor) {\n            TableElementResizing.dispose(editor, {\n                eventNamespace: NS\n            });\n        };\n\n        extend(Editor, {\n            RowResizing: RowResizing\n        });\n\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var Draggable = kendo.ui.Draggable;\n        var Observable = kendo.Observable;\n        var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n\n        var NS = \".kendoEditorElementResizeHandle\";\n        var RESIZE_HANDLE_CLASS = \"k-element-resize-handle\";\n\n        var DRAG_START = \"dragStart\";\n        var DRAG = \"drag\";\n        var DRAG_END = \"dragEnd\";\n        var HALF_INSIDE = \"halfInside\";\n        var MOUSE_OVER = \"mouseover\";\n        var MOUSE_OUT = \"mouseout\";\n\n        var BODY = \"body\";\n        var TABLE = \"table\";\n\n        var EAST = \"east\";\n        var NORTH = \"north\";\n        var NORTHEAST = \"northeast\";\n        var NORTHWEST = \"northwest\";\n        var SOUTH = \"south\";\n        var SOUTHEAST = \"southeast\";\n        var SOUTHWEST = \"southwest\";\n        var WEST = \"west\";\n\n        var DOT = \".\";\n\n        var ElementResizeHandle = Observable.extend({\n            init: function(options) {\n                var that = this;\n\n                Observable.fn.init.call(that);\n\n                that.options = extend({}, that.options, options);\n                that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n\n                that._attachEventHandlers();\n                that._addStyles();\n                that._initDraggable();\n                that._initPositioningStrategy();\n                that._initDraggingStrategy();\n\n                $(that.element).data(TABLE, that.options.resizableElement);\n            },\n\n            destroy: function() {\n                var that = this;\n\n                $(that.element).off(NS).remove();\n                that.element = null;\n\n                that._destroyDraggable();\n\n                that.unbind();\n            },\n\n            options: {\n                appendTo: null,\n                direction: SOUTHEAST,\n                resizableElement: null,\n                rtl: false,\n                template:\n                    \"<div class='k-element-resize-handle-wrapper' unselectable='on' contenteditable='false'>\" +\n                        \"<div class='\" + RESIZE_HANDLE_CLASS + \"'></div>\" +\n                    \"</div>\"\n            },\n\n            events: [\n                DRAG_START,\n                DRAG,\n                DRAG_END,\n                MOUSE_OVER,\n                MOUSE_OUT\n            ],\n\n            show: function() {\n                this._setPosition();\n            },\n\n            _setPosition: function() {\n                var that = this;\n                var position = that._positioningStrategy.getPosition();\n\n                $(that.element).css({\n                    top: position.top,\n                    left: position.left,\n                    position: \"absolute\"\n                });\n            },\n\n            _attachEventHandlers: function() {\n                var that = this;\n\n                $(that.element)\n                    .on(MOUSE_OVER + NS, that._onMouseOver.bind(that))\n                    .on(MOUSE_OUT + NS, that._onMouseOut.bind(that));\n            },\n\n            _onMouseOver: function() {\n                this.trigger(MOUSE_OVER);\n            },\n\n            _onMouseOut: function() {\n                this.trigger(MOUSE_OUT);\n            },\n\n            _addStyles: function() {\n                var that = this;\n                $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass(\"k-resize-\" + that.options.direction);\n            },\n\n            _initPositioningStrategy: function() {\n                var that = this;\n                var options = that.options;\n\n                that._positioningStrategy = HandlePositioningStrategy.create({\n                    name: options.direction,\n                    handle: that.element,\n                    resizableElement: options.resizableElement,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                });\n            },\n\n            _initDraggable: function() {\n                var that = this;\n                var element = that.element;\n\n                if (that._draggable || !element) {\n                    return;\n                }\n\n                that._draggable = new Draggable(element, {\n                    dragstart: that._onDragStart.bind(that),\n                    drag: that._onDrag.bind(that),\n                    dragend: that._onDragEnd.bind(that)\n                });\n            },\n\n            _onDragStart: function() {\n                this.trigger(DRAG_START);\n            },\n\n            _onDrag: function(e) {\n                var that = this;\n\n                that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                    deltaX: e.x.delta,\n                    deltaY: e.y.delta,\n                    initialDeltaX: e.x.initialDelta,\n                    initialDeltaY: e.y.initialDelta\n                }));\n            },\n\n            _onDragEnd: function() {\n                this.trigger(DRAG_END);\n            },\n\n            _destroyDraggable: function() {\n                var that = this;\n\n                if (that._draggable) {\n                    that._draggable.destroy();\n                    that._draggable = null;\n                }\n            },\n\n            _initDraggingStrategy: function() {\n                var that = this;\n\n                that._draggingStrategy = HandleDraggingStrategy.create({\n                    name: that.options.direction\n                });\n            }\n        });\n\n        var StrategyFactory = Class.extend({\n            init: function() {\n                this._items = [];\n            },\n\n            register: function(name, type) {\n                this._items.push({\n                    name: name,\n                    type: type\n                });\n            },\n\n            create: function(options) {\n                var items = this._items;\n                var itemsLength = items.length;\n                var name = options.name ? options.name.toLowerCase() : \"\";\n                var match;\n                var item;\n                var i;\n\n                for (i = 0; i < itemsLength; i++) {\n                    item = items[i];\n\n                    if (item.name.toLowerCase() === name) {\n                        match = item;\n                        break;\n                    }\n                }\n\n                if (match) {\n                    return new match.type(options);\n                }\n            }\n        });\n\n        var PositioningStrategyFactory = StrategyFactory.extend({});\n        PositioningStrategyFactory.current = new PositioningStrategyFactory();\n\n        var HandlePositioningStrategy = Class.extend({\n            init: function(options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n\n            options: {\n                handle: null,\n                offset: HALF_INSIDE,\n                resizableElement: null,\n                rootElement: null,\n                rtl: false\n            },\n\n            getPosition: function() {\n                var that = this;\n\n                var position = that.calculatePosition();\n                var handleOffsetPosition = that.applyHandleOffset(position);\n                var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n\n                return scrollOffsetPosition;\n            },\n\n            calculatePosition: noop,\n\n            applyHandleOffset: function(position) {\n                var options = this.options;\n                var handle = $(options.handle);\n\n                if (options.offset === HALF_INSIDE) {\n                    return {\n                        top: position.top - (outerHeight(handle) / 2),\n                        left: position.left - (outerWidth(handle) / 2)\n                    };\n                }\n\n                return position;\n            },\n\n            applyScrollOffset: function(position) {\n                var options = this.options;\n                var rootElement = $(options.rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var browser = kendo.support.browser;\n                var rootLeft;\n\n                if (!rootElement.is(BODY)) {\n                    rootLeft = kendo.scrollLeft(rootElement) || 0;\n\n                    if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                        rootLeft = rootLeft * -1;\n                    }\n\n                    return {\n                        top: position.top + (rootElement.scrollTop() || 0),\n                        left: position.left + rootLeft - scrollBarWidth\n                    };\n                }\n\n                return position;\n            }\n        });\n\n        HandlePositioningStrategy.create = function(options) {\n            return PositioningStrategyFactory.current.create(options);\n        };\n\n        var EastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + (outerHeight(resizableElement) / 2),\n                    left: offset.left + outerWidth(resizableElement) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n\n        var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top,\n                    left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n\n        var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n\n        var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top,\n                    left: offset.left + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n\n        var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n\n        var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n\n        var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n\n        var WestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + (outerHeight(resizableElement) / 2),\n                    left: offset.left + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n\n        var DraggingStrategyFactory = StrategyFactory.extend({});\n        DraggingStrategyFactory.current = new DraggingStrategyFactory();\n\n        var HandleDraggingStrategy = Class.extend({\n            init: function(options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n\n            options: {\n                deltaX: {\n                    adjustment: null,\n                    modifier: null\n                },\n                deltaY: {\n                    adjustment: null,\n                    modifier: null\n                }\n            },\n\n            adjustDragDelta: function(deltas) {\n                var options = this.options;\n                var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n                var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n\n                return {\n                    deltaX: deltas.deltaX * xAxisAdjustment,\n                    deltaY: deltas.deltaY * yAxisAdjustment,\n                    initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                    initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n                };\n            }\n        });\n\n        HandleDraggingStrategy.create = function(options) {\n            return DraggingStrategyFactory.current.create(options);\n        };\n\n        var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 0,\n                    modifier: 0\n                }\n            }\n        });\n\n        var EastDraggingStrategy = HorizontalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: 1\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n\n        var WestDraggingStrategy = HorizontalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: (-1)\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n\n        var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 0,\n                    modifier: 0\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n\n        var NorthDraggingStrategy = VerticalDraggingStrategy.extend({\n            options: {\n                deltaY: {\n                    modifier: (-1)\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n\n        var SouthDraggingStrategy = VerticalDraggingStrategy.extend({\n            options: {\n                deltaY: {\n                    modifier: 1\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n\n        var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n\n        var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: 1\n                },\n                deltaY: {\n                    modifier: (-1)\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n\n        var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: (-1)\n                },\n                deltaY: {\n                    modifier: (-1)\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n\n        var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: 1\n                },\n                deltaY: {\n                    modifier: 1\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n\n        var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: (-1)\n                },\n                deltaY: {\n                    modifier: 1\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n\n        extend(Editor, {\n            ElementResizeHandle: ElementResizeHandle\n        });\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n\n        var $ = kendo.jQuery;\n        var contains = $.contains;\n        var extend = $.extend;\n\n        var browser = kendo.support.browser;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var ElementResizeHandle = Editor.ElementResizeHandle;\n        var ResizingUtils = Editor.ResizingUtils;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var constrain = ResizingUtils.constrain;\n        var inPercentages = ResizingUtils.inPercentages;\n        var inPixels = ResizingUtils.inPixels;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var RangeUtils = Editor.RangeUtils;\n\n        var NS = \".kendoEditorElementResizing\";\n        var RESIZE_HANDLE_WRAPPER_CLASS = \"k-element-resize-handle-wrapper\";\n        var TABLE_CLASS = \"k-table\";\n        var ELEMENT_RESIZING_CLASS = \"k-element-resizing\";\n\n        var DRAG_START = \"dragStart\";\n        var DRAG = \"drag\";\n        var DRAG_END = \"dragEnd\";\n        var KEY_DOWN = \"keydown\";\n        var MOUSE_DOWN = \"mousedown\";\n        var SELECT = \"select\";\n        var DROP = \"drop\";\n\n        var COLUMN = \"td\";\n        var ROW = \"tr\";\n        var TBODY = \"tbody\";\n        var THEAD = \"thead\";\n        var TABLE = \"table\";\n        var IMG = \"img\";\n        var ELEMENT_TYPES = [\"TABLE\", \"IMG\"];\n\n        var COMMA = \",\";\n        var WIDTH = \"width\";\n        var HEIGHT = \"height\";\n\n        var EAST = \"east\";\n        var NORTH = \"north\";\n        var NORTHEAST = \"northeast\";\n        var NORTHWEST = \"northwest\";\n        var SOUTH = \"south\";\n        var SOUTHEAST = \"southeast\";\n        var SOUTHWEST = \"southwest\";\n        var WEST = \"west\";\n\n        var DOT = \".\";\n\n        function isUndefined(value) {\n            return typeof(value) === \"undefined\";\n        }\n\n        var ElementResizing = Class.extend({\n            init: function(element, options) {\n                var that = this;\n\n                that.options = extend({}, that.options, options);\n                that.handles = [];\n\n                // Check whether the element is TABLE or IMG\n                if (ELEMENT_TYPES.indexOf(element.nodeName) >= 0) {\n                    that.element = element;\n                }\n            },\n\n            destroy: function() {\n                var that = this;\n\n                $(that.element).off(NS);\n                that.element = null;\n\n                $(that.options.rootElement).off(KEY_DOWN + NS);\n\n                that._destroyResizeHandles();\n            },\n\n            options: {\n                appendHandlesTo: null,\n                rtl: false,\n                rootElement: null,\n                minWidth: 10,\n                minHeight: 10,\n                handles: [{\n                    direction: NORTHWEST\n                }, {\n                    direction: NORTH\n                }, {\n                    direction: NORTHEAST\n                }, {\n                    direction: EAST\n                }, {\n                    direction: SOUTHEAST\n                }, {\n                    direction: SOUTH\n                }, {\n                    direction: SOUTHWEST\n                }, {\n                    direction: WEST\n                }]\n            },\n\n            resize: function(args) {\n                var that = this;\n                var deltas = extend({}, {\n                    deltaX: 0,\n                    deltaY: 0,\n                    initialDeltaX: 0,\n                    initialDeltaY: 0\n                }, args);\n\n                that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n                that.showResizeHandles();\n            },\n\n            _resizeWidth: function() {\n                return false;\n            },\n\n            _resizeHeight: function() {\n                return false;\n            },\n\n            _getMaxDimensionValue: function(dimension) {\n                var that = this;\n                var element = $(that.element);\n                var dimensionLowercase = dimension.toLowerCase();\n                var rtlModifier = that.options.rtl ? (-1) : 1;\n                var parent = $(that.element).parent();\n                var parentElement = parent[0];\n                var parentDimension = parent[dimensionLowercase]();\n                var parentScrollOffset = rtlModifier * (dimension === WIDTH ? kendo.scrollLeft(parent) : parent.scrollTop());\n\n                if (parentElement && parentElement === element.closest(COLUMN)[0]) {\n                    if (parentElement.style[dimensionLowercase] === \"\" && !inPercentages(that.element.style[dimensionLowercase])) {\n                        return Infinity;\n                    }\n                    else {\n                        return (parentDimension + parentScrollOffset);\n                    }\n                }\n                else {\n                    return (parentDimension + parentScrollOffset);\n                }\n            },\n\n            showResizeHandles: function() {\n                var that = this;\n\n                that._initResizeHandles();\n                that._showResizeHandles();\n            },\n\n            _initResizeHandles: function() {\n                var that = this;\n                var handles = that.handles;\n                var options = that.options;\n                var handleOptions = that.options.handles;\n                var length = handleOptions.length;\n                var i;\n\n                if (handles && handles.length > 0) {\n                    return;\n                }\n\n                for (i = 0; i < length; i++) {\n                    that.handles.push(new ElementResizeHandle(extend({\n                        appendTo: options.appendHandlesTo,\n                        resizableElement: that.element,\n                        rootElement: options.rootElement,\n                        rtl: options.rtl\n                    }, handleOptions[i])));\n                }\n\n                that._bindToResizeHandlesEvents();\n            },\n\n            _destroyResizeHandles: function() {\n                var that = this;\n                var length = that.handles ? that.handles.length : 0;\n\n                for (var i = 0; i < length; i++) {\n                    that.handles[i].destroy();\n                }\n\n                that.handles = [];\n            },\n\n            _showResizeHandles: function() {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    that.handles[i].show();\n                }\n            },\n\n            _bindToResizeHandlesEvents: function() {\n                return false;\n            },\n\n            _onResizeHandleDragStart: function() {\n                var that = this;\n                var element = $(that.element);\n\n                element.addClass(ELEMENT_RESIZING_CLASS);\n\n                that._initialElementHeight = outerHeight(element);\n                that._initialElementWidth = outerWidth(element);\n                that._disableKeyboard();\n            },\n\n            _onResizeHandleDrag: function(e) {\n                this.resize(e);\n            },\n\n            _onResizeHandleDragEnd: function() {\n                var that = this;\n                $(that.element).removeClass(ELEMENT_RESIZING_CLASS);\n                that._enableKeyboard();\n            },\n\n            _enableKeyboard: function() {\n                $(this.options.rootElement).off(KEY_DOWN + NS);\n            },\n\n            _disableKeyboard: function() {\n                $(this.options.rootElement).on(KEY_DOWN + NS, function(e) {\n                    e.preventDefault();\n                });\n            }\n        });\n\n        var TableResizing = ElementResizing.extend({\n            _bindToResizeHandlesEvents: function() {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                var handle;\n\n                for (i = 0; i < length; i++) {\n                    handle = handles[i];\n                    handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n                    handle.bind(DRAG, that._onResizeHandleDrag.bind(that));\n                    handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n                }\n            },\n\n            _hasRowsInPixels: function() {\n                var that = this;\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n\n                for (var i = 0; i < rows.length; i++) {\n                    if (rows[i].style.height === \"\" || inPixels(rows[i].style.height)) {\n                        return true;\n                    }\n                }\n\n                return false;\n            },\n\n            _resizeWidth: function(delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleWidth = element[0].style[WIDTH];\n                var currentWidth = outerWidth(element);\n                var parentWidth = element.parent().width();\n                var maxWidth = that._getMaxDimensionValue(WIDTH);\n                var newWidth;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedWidth;\n\n                if (delta === 0) {\n                    return;\n                }\n\n                if (isUndefined(that._initialElementWidth)) {\n                    that._initialElementWidth = currentWidth;\n                }\n\n                //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n                //on each drag does not work due to browser calculation of computed styles\n                constrainedWidth = constrain({\n                    value: that._initialElementWidth + initialDelta,\n                    min: that.options.minWidth,\n                    max: maxWidth\n                });\n\n                if (inPercentages(styleWidth)) {\n                    //detect resizing greater than 100%\n                    if (currentWidth + delta > parentWidth) {\n                        ratioValue = max(constrainedWidth, parentWidth);\n                        ratioTotalValue = min(constrainedWidth, parentWidth);\n                    }\n                    else {\n                        ratioValue = min(constrainedWidth, parentWidth);\n                        ratioTotalValue = max(constrainedWidth, parentWidth);\n                    }\n\n                    newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                }\n                else {\n                    newWidth = toPixels(constrainedWidth);\n                }\n\n                that._setColumnsWidth();\n\n                element[0].style[WIDTH] = newWidth;\n            },\n\n            _resizeHeight: function(delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleHeight = element[0].style[HEIGHT];\n                var currentHeight = outerHeight(element);\n                var parent = element.parent();\n                var parentHeight = parent.height();\n                var maxHeight = that._getMaxDimensionValue(HEIGHT);\n                var newHeight;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedHeight;\n                var minHeight = that.options.minHeight;\n                var hasRowsInPixels = that._hasRowsInPixels();\n\n                if (delta === 0) {\n                    return;\n                }\n\n                if (isUndefined(that._initialElementHeight)) {\n                    that._initialElementHeight = currentHeight;\n                }\n\n                //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n                //on each drag does not work due to browser calculation of computed styles\n                constrainedHeight = constrain({\n                    value: that._initialElementHeight + initialDelta,\n                    min: minHeight,\n                    max: maxHeight\n                });\n\n                if (hasRowsInPixels && delta < 0) {\n                    //decreasing table height when rows are sized in pixels is not possible\n                    that._setRowsHeightInPercentages();\n                }\n\n                if (inPercentages(styleHeight)) {\n                    //detect resizing greater than 100%\n                    if (currentHeight + delta > parentHeight) {\n                        ratioValue = max(constrainedHeight, parentHeight);\n                        ratioTotalValue = min(constrainedHeight, parentHeight);\n                    }\n                    else {\n                        ratioValue = min(constrainedHeight, parentHeight);\n                        ratioTotalValue = max(constrainedHeight, parentHeight);\n                    }\n\n                    newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                }\n                else {\n                    newHeight = toPixels(constrainedHeight);\n                }\n\n                element[0].style[HEIGHT] = newHeight;\n\n                if (hasRowsInPixels && delta < 0) {\n                    //restore original rows height unit\n                    that._setRowsHeightInPixels();\n                }\n            },\n\n            _setColumnsWidth: function() {\n                var that = this;\n                var element = $(that.element);\n                var parentElement = element.parent()[0];\n                var parentColumn = element.closest(COLUMN);\n                var columns = parentColumn.closest(ROW).children();\n                var columnsLength = columns.length;\n                var i;\n\n                function isWidthInPercentages(element) {\n                    var styleWidth = element.style.width;\n\n                    if (styleWidth !== \"\") {\n                        return inPercentages(styleWidth) ? true : false;\n                    }\n                    else {\n                        return $(element).hasClass(TABLE_CLASS) ? true : false;\n                    }\n                }\n\n                if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === \"\") {\n                    for (i = 0; i < columnsLength; i++) {\n                        columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                    }\n                }\n            },\n\n            _setRowsHeightInPercentages: function() {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function() {\n                    return outerHeight($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n                }\n            },\n\n            _setRowsHeightInPixels: function() {\n                var that = this;\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function() {\n                    return outerHeight($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            }\n        });\n\n        var ImageResizing = ElementResizing.extend({\n            _bindToResizeHandlesEvents: function() {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                var handle;\n\n                for (i = 0; i < length; i++) {\n                    handle = handles[i];\n                    handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n\n                    if (handle.options.direction === \"north\" || handle.options.direction === \"south\") {\n                        handle.bind(DRAG, that._onResizeHandleDragVertical.bind(that));\n                    } else if (handle.options.direction === \"east\" || handle.options.direction === \"west\") {\n                        handle.bind(DRAG, that._onResizeHandleDragHorizontal.bind(that));\n                    } else {\n                        handle.bind(DRAG, that._onResizeHandleDragLocked.bind(that));\n                    }\n\n                    handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n                }\n            },\n\n            _getDeltas: function(args) {\n                return extend({}, {\n                    deltaX: 0,\n                    deltaY: 0,\n                    initialDeltaX: 0,\n                    initialDeltaY: 0\n                }, args);\n            },\n\n            _onResizeHandleDragVertical: function(args) {\n                var deltas = this._getDeltas(args);\n\n                this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n                this.showResizeHandles();\n            },\n\n            _onResizeHandleDragHorizontal: function(args) {\n                var deltas = this._getDeltas(args);\n\n                this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                this.showResizeHandles();\n            },\n\n            _onResizeHandleDragLocked: function(args) {\n                var min = Math.min(Math.abs(args.initialDeltaX), Math.abs(args.initialDeltaY)),\n                    initialWidth = this._initialElementWidth,\n                    initialHeight = this._initialElementHeight,\n                    deltas;\n\n                if (min === args.initialDeltaX || min === args.initialDeltaX * -1) {\n                    args.initialDeltaY = args.initialDeltaX * initialHeight / initialWidth;\n                    args.deltaY = args.deltaX;\n                } else if (min === args.initialDeltaY || min === args.initialDeltaY * -1) {\n                    args.initialDeltaX = args.initialDeltaY * initialWidth / initialHeight;\n                    args.deltaX = args.deltaY;\n                }\n\n                deltas = this._getDeltas(args);\n\n                this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n                this.showResizeHandles();\n            },\n\n            _resizeWidth: function(delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var currentWidth = outerWidth(element);\n                var newWidth;\n                var constrainedWidth;\n\n                if (delta === 0) {\n                    return;\n                }\n\n                if (isUndefined(that._initialElementWidth)) {\n                    that._initialElementWidth = currentWidth;\n                }\n\n                //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n                //on each drag does not work due to browser calculation of computed styles\n                constrainedWidth = constrain({\n                    value: that._initialElementWidth + initialDelta,\n                    min: that.options.minWidth,\n                    max: that._getMaxDimensionValue(WIDTH)\n                });\n\n                newWidth = toPixels(constrainedWidth);\n                element[0].style[WIDTH] = newWidth;\n                element.attr(WIDTH, Math.floor(constrainedWidth));\n            },\n\n            _resizeHeight: function(delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var currentHeight = outerHeight(element);\n                var newHeight;\n                var constrainedHeight;\n\n                if (delta === 0) {\n                    return;\n                }\n\n                if (isUndefined(that._initialElementHeight)) {\n                    that._initialElementHeight = currentHeight;\n                }\n\n                //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n                //on each drag does not work due to browser calculation of computed styles\n                constrainedHeight = constrain({\n                    value: that._initialElementHeight + initialDelta,\n                    min: that.options.minHeight,\n                    max: Number.MAX_SAFE_INTEGER\n                });\n\n                newHeight = toPixels(constrainedHeight);\n                element[0].style[HEIGHT] = newHeight;\n                element.attr(HEIGHT, Math.floor(constrainedHeight));\n            }\n        });\n\n        var ElementResizingFactory = Class.extend({\n            create: function(editor) {\n                var factory = this;\n\n                $(editor.body)\n                    .on(\"dragstart\" + NS, function() {\n                        var nodes = RangeUtils.nodes(editor.getRange()),\n                            hasImg = false;\n\n                        nodes.forEach(function(node) {\n                            if (node.nodeName === \"IMG\") {\n                                hasImg = true;\n                            }\n                        });\n\n                        if (hasImg && nodes.length > 1) {\n                            editor.elementResizing._destroyResizeHandles();\n                        }\n                    })\n                    .on(DROP + NS, function() {\n                        setTimeout(function() {\n                            var image = RangeUtils.image(editor.getRange());\n\n                            if (image) {\n                                editor.elementResizing._destroyResizeHandles();\n                                editor.elementResizing.element = image;\n                                editor.elementResizing.showResizeHandles();\n                            }\n                        });\n                    })\n                    .on(MOUSE_DOWN + NS, TABLE + COMMA + IMG, function(e) {\n                        var eventTarget = e.target;\n                        var eventCurrentTarget = e.currentTarget;\n                        var elementResizing = editor.elementResizing;\n                        var element = elementResizing ? elementResizing.element : null;\n\n                        if (elementResizing) {\n                            if (element && eventCurrentTarget !== element) {\n                                if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                    //prevent a parent table resizing init when clicking on a nested table when the event bubbles\n                                    //instead of stopping event propagation\n                                    return;\n                                }\n                                else {\n                                    if (element !== eventTarget) {\n                                        editor._destroyElementResizing();\n                                        factory._initResizing(editor, eventCurrentTarget);\n                                    }\n                                }\n                            }\n                        }\n                        else {\n                            factory._initResizing(editor, eventCurrentTarget);\n                        }\n\n                        editor._showElementResizeHandles();\n                    })\n                    .on(MOUSE_DOWN + NS, function(e) {\n                        var elementResizing = editor.elementResizing;\n                        var element = elementResizing ? elementResizing.element : null;\n                        var target = e.target;\n                        var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n\n                        if (elementResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                            editor._destroyElementResizing();\n                        }\n                    });\n            },\n\n            dispose: function(editor) {\n                $(editor.body).off(NS);\n            },\n\n            _initResizing: function(editor, element) {\n                // table and image resizing is natively supported in IE\n                // https://stackoverflow.com/questions/53831846/resizing-images-in-contenteditable-div-stopped-working-in-firefox\n                // Enable custom resize handlers for FF too\n                if (!browser.msie) {\n                    if ($(element).is(TABLE)) {\n                        editor.elementResizing = editor.tableResizing = new TableResizing(element, {\n                            appendHandlesTo: editor.body,\n                            rtl: kendo.support.isRtl(editor.element),\n                            rootElement: editor.body\n                        });\n                    } else if ($(element).is(IMG)) {\n                        editor.elementResizing = new ImageResizing(element, {\n                            appendHandlesTo: editor.body,\n                            rtl: kendo.support.isRtl(editor.element),\n                            rootElement: editor.body\n                        });\n                    }\n\n                    if (editor._showElementResizeHandlesProxy) {\n                        editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n                        editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n                    }\n                }\n            }\n        });\n\n        ElementResizingFactory.current = new ElementResizingFactory();\n\n        extend(Editor, {\n            TableResizing: TableResizing,\n            ImageResizing: ImageResizing,\n            ElementResizing: ElementResizing,\n            ElementResizingFactory: ElementResizingFactory\n        });\n\n    })(window.kendo);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        RangeUtils = Editor.RangeUtils,\n        dom = Editor.Dom,\n        registerTool = EditorUtils.registerTool,\n        Command = Editor.Command;\n\n    var tableFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"table\"] }]);\n    var cellsFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"td\",\"th\"] }]);\n    var reUnit = /([a-z]+|%)$/i;\n\n    var COL = \"col\";\n    var ROW = \"row\";\n    var COLGROUP = \"colgroup\";\n    var SCOPE = \"scope\";\n    var COL_INDEX = \"col-index\";\n    var TH = \"th\";\n    var TD = \"td\";\n    var THEAD = \"thead\";\n    var HEADERS = \"headers\";\n    var TABLE = \"table\";\n\n    var TableWizardCommand = Command.extend({\n        exec: function() {\n            var cmd = this;\n            var editor = cmd.editor;\n            var range = cmd.range = cmd.lockRange();\n            var isTableCellWizard = cmd.options.tableCellWizard;\n            var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined$1;\n            var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined$1;\n            var options = {\n                visible: false,\n                messages: editor.options.messages,\n                closeCallback: cmd.onDialogClose.bind(cmd),\n                table: cmd.parseTable(selectedTable, selectedCells),\n                dialogOptions: editor.options.dialogOptions,\n                isRtl: kendo.support.isRtl(editor.wrapper)\n            };\n\n            var dialog = new Editor.TableWizardDialog(options);\n            dialog.open(isTableCellWizard);\n        },\n\n        onDialogClose: function(data) {\n            var cmd = this;\n            cmd.releaseRange(cmd.range);\n\n            if (data) { //Ok button pressed\n                if (cmd.options.insertNewTable) {\n                    cmd.insertTable(cmd.createNewTable(data));\n                } else {\n                    cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n                }\n            }\n        },\n        releaseRange: function(range) {\n            var cmd = this;\n            var doc = cmd.editor.document;\n            dom.windowFromDocument(doc).focus();\n            Command.fn.releaseRange.call(cmd, range);\n        },\n        insertTable: function(table) {\n            var range = this.range;\n\n            range.insertNode(table);\n            range.collapse(true);\n            this.editor.selectRange(range);\n\n            this._ensureFocusableAfterTable(table);\n        },\n        _ensureFocusableAfterTable: function(table) {\n            var siblingNodes = $(table).parent().contents();\n            var lastSiblingIndex = siblingNodes.length - 1;\n            var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n            while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n                lastSiblingIndex -= 1;\n                lastSibling = siblingNodes.get(lastSiblingIndex);\n            }\n\n            if (lastSibling === table) {\n                dom.insertAfter(dom.createEmptyNode(this.editor.document, \"p\"), table);\n            }\n        },\n        updateTable: function(data, table, selectedCells) {\n            var cmd = this;\n            var tableRows = $(table.rows).toArray();\n            var tableProp = data.tableProperties;\n            var rows = tableProp.rows;\n            var tHead = table.tHead;\n            var last = cmd._lastInCollection;\n            var lastSelectedRow, cellProp;\n\n            //Leave only first selected cell\n            while (selectedCells.length > 1) {\n                selectedCells.pop();\n            }\n\n            lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n\n            cmd._deleteTableRows(tableRows, tableRows.length - rows);\n\n            if (tableRows.length < rows) {\n                cmd._addRows(lastSelectedRow, rows, tableRows);\n            }\n\n            dom.reMapTableColumns(table, COL_INDEX);\n            cmd._updateColumns(tableRows, tableProp.columns, selectedCells, lastSelectedRow);\n            cmd._updateTableProperties(table, tableProp);\n\n            cellProp = data.cellProperties;\n            if (selectedCells[0]) {\n                dom.attr(selectedCells[0], { id: (cellProp || {}).id || null });\n            }\n            if (cellProp) {\n                (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function(i, cell) {\n                    cmd._updateCellProperties(cell, cellProp);\n                });\n            }\n\n            cmd._updateCaption(table, tableProp);\n\n            if (tHead) {\n                cmd._updateHeadersWithThead(table, data);\n            } else {\n                cmd._updateHeadersNoThead(table, data);\n            }\n\n            cmd._updateHeaderAssociates(table, tableProp);\n            dom.clearTableMappings(table, COL_INDEX);\n        },\n        _isHeadingRow: function(row) {\n            return dom.is(row.cells[0], TH) && dom.is(row.parentNode, THEAD);\n        },\n        _isHeadingCell: function(cell) {\n            return dom.is(cell, TH);\n        },\n        cellsWithHeadersAssociated: function(table) {\n            var cells = $(table.rows).children();\n            var headingIds = [];\n            var checkHeader = function(header) {\n                return headingIds.indexOf(header) > -1;\n            };\n\n            cells.each(function(c, cell) {\n                if (cell.id && dom.is(cell, TH)) {\n                    headingIds.push(cell.id);\n                }\n            });\n\n            var associatedCells = cells.filter(function(c, cell) {\n                var headersAttr = cell.getAttribute(HEADERS);\n                var headersArray;\n\n                if (headersAttr && !dom.is(cell, TH)) {\n                    headersArray = headersAttr.split(\" \");\n\n                    if (headersArray && headersArray.length > 0) {\n                        return headersArray.some(checkHeader);\n                    }\n                }\n\n                return false;\n            });\n\n            return !!associatedCells.length;\n        },\n        _insertCells: function(count, row, index) {\n            index = isNaN(index) ? -1 : index;\n            for (var i = 0, cell; i < count; i++) {\n                cell = row.insertCell(index);\n                cell.innerHTML = \"&nbsp;\";\n            }\n        },\n        _deleteTableRows: function(rows, count) {\n            for (var i = 0, row, rowParent; i < count; i++) {\n                row = rows.pop();\n                rowParent = row.parentNode;\n                rowParent.removeChild(row);\n                if (!rowParent.rows.length) {\n                    dom.remove(rowParent);\n                }\n            }\n        },\n        createNewTable: function(data) {\n            var cmd = this;\n            var doc = cmd.editor.document;\n            var tableProp = data.tableProperties;\n            var table = dom.create(doc, TABLE);\n            var rowIndex = 0;\n            var thead;\n\n            cmd._updateTableProperties(table, tableProp);\n            cmd._updateCaption(table, tableProp);\n\n            if (tableProp.headerRows && tableProp.headerRows > 0) {\n                thead = table.createTHead();\n                cmd._createTableRows(data, thead, rowIndex, true);\n                rowIndex += tableProp.headerRows;\n            }\n\n            var tbody = table.createTBody();\n            cmd._createTableRows(data, tbody, rowIndex, false);\n\n            dom.reMapTableColumns(table, COL_INDEX);\n\n            if (tableProp.cellsWithHeaders === \"ids\") {\n                dom.associateWithIds(table);\n            } else if (tableProp.cellsWithHeaders === \"scope\") {\n                cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n            }\n\n            dom.clearTableMappings(table, COL_INDEX);\n\n            return table;\n        },\n        _createTableRows: function(data, container, initialIndex, headerRows) {\n            var cmd = this;\n            var tableProp = data.tableProperties;\n            var cellProp = data.cellProperties;\n            var columns = tableProp.columns;\n            var rows = headerRows ? tableProp.headerRows : tableProp.rows;\n            var headerColumns = tableProp.headerColumns;\n\n            for (var r = initialIndex, row; r < rows; r++) {\n                row = container.insertRow();\n\n                for (var c = 0, cell; c < columns; c++) {\n                    if (headerRows || headerColumns > c) {\n                        cell = document.createElement(TH);\n                    } else {\n                        cell = document.createElement(TD);\n                    }\n\n                    row.appendChild(cell);\n                    cell.innerHTML = \"&nbsp;\";\n                    if (cellProp && r === 0 && c === 0 && cellProp.id) {\n                        cell.id = cellProp.id;\n                    }\n\n                    cmd._updateCellProperties(cell, cellProp && (cellProp.selectAllCells || (r === 0 && c === 0)) ? cellProp : {});\n                }\n            }\n        },\n        _addRows: function(lastSelectedRow, rows, tableRows) {\n            var cmd = this;\n            var rowIndex = $(lastSelectedRow).index();\n            var cellsLength = lastSelectedRow.cells.length;\n            var newRowsCount = rows - tableRows.length;\n            var parent = lastSelectedRow.parentNode;\n            var row;\n\n            while (newRowsCount) {\n                row = parent.insertRow(rowIndex + 1);\n                cmd._insertCells(cellsLength - row.cells.length, row);\n                newRowsCount--;\n            }\n        },\n        _updateColumns: function(tableRows, columns, selectedCells, lastSelectedRow) {\n            var cmd = this;\n            var last = cmd._lastInCollection;\n            var firstRowLastCell = last(tableRows[0].cells);\n            var numberOfColumns = Number(firstRowLastCell.getAttribute(COL_INDEX)) + firstRowLastCell.colSpan;\n\n            if (numberOfColumns > columns) {\n                $(tableRows).each(function(i, row) {\n                    var lastCurrentCell = last(row.cells);\n                    var rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n\n                    while (rowColumns > columns) {\n                        if (lastCurrentCell.colSpan && lastCurrentCell.colSpan > 1) {\n                            lastCurrentCell.colSpan -= 1;\n                        } else {\n                            row.deleteCell(-1);\n                        }\n\n                        lastCurrentCell = last(row.cells);\n                        rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n                    }\n                });\n            }\n\n            if (numberOfColumns < columns) {\n                var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n                $(tableRows).each(function(i, row) {\n                    var lastCurrentCell = last(row.cells);\n                    cmd._insertCells(columns - Number(lastCurrentCell.getAttribute(COL_INDEX)) - lastCurrentCell.colSpan, row, cellIndex + 1);\n                });\n            }\n        },\n        _updateTableProperties: function(table, data) {\n            var style = this._getStylesData(data);\n            dom.attr(table, {\n                cellSpacing: data.cellSpacing || null,\n                cellPadding: data.cellPadding || null,\n                className: data.className || null,\n                id: data.id || null,\n                summary: data.summary || null,\n                style: style || null\n            });\n            $(table).addClass(\"k-table\");\n        },\n        _updateCellProperties: function(cell, data) {\n            var style = this._getStylesData(data);\n            style.padding = data.cellPadding || null;\n            style.margin = data.cellMargin || null;\n            dom.attr(cell, {\n                style: style || null,\n                className: data.className || null\n            });\n        },\n        _updateCaption: function(table, data) {\n            if (table.caption && !data.captionContent) {\n                table.deleteCaption();\n            } else if (data.captionContent) {\n                var caption = table.createCaption();\n                caption.innerHTML = data.captionContent;\n                var alignment = this._getAlignmentData(data.captionAlignment);\n                dom.attr(caption, {\n                    style: {\n                        textAlign: alignment.textAlign,\n                        verticalAlign: alignment.verticalAlign\n                    }\n                });\n            }\n        },\n        _updateHeadersNoThead: function(table, data) {\n            var cmd = this;\n            var tableProp = data.tableProperties;\n            var rows = table.rows;\n            var row, cells, cell, i, j;\n\n            for (i = 0; i < rows.length; i++) {\n                row = rows[i];\n                cells = row.cells;\n\n                for (j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    if (!cmd._isHeadingCell(cell) && (i < tableProp.headerRows || tableProp.headerColumns > cell.getAttribute(COL_INDEX))) {\n                        dom.changeTag(cell, TH, false);\n                    } else if (cmd._isHeadingCell(cell) && i >= tableProp.headerRows && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                        dom.changeTag(cell, TD, false);\n                    }\n                }\n            }\n        },\n        _updateHeadersWithThead: function(table, data) {\n            var cmd = this;\n            var tableProp = data.tableProperties;\n            var thead = table.tHead;\n            var rowIndex = 0;\n            var tbody = table.tBodies[0];\n            var row, cell, i;\n\n            if (!tbody) {\n                tbody = table.createTBody();\n            }\n\n            if (tableProp.headerRows && tableProp.headerRows > 0) {\n                if (!thead) {\n                    thead = table.createTHead();\n                }\n\n                while (thead.rows.length < tableProp.headerRows) {\n                    thead.appendChild(tbody.rows[0]);\n                }\n\n                while (thead.rows.length > tableProp.headerRows) {\n                    tbody.appendChild(thead.rows[0]);\n                }\n\n                cmd._swapToHeaderCells(thead);\n            } else if (thead) {\n                while (thead.rows.length > 0) {\n                    tbody.appendChild(thead.rows[thead.rows.length - 1]);\n                }\n\n                table.deleteTHead();\n            }\n\n            while (tbody.rows.length > rowIndex) {\n                row = tbody.rows[rowIndex];\n                for (i = 0; i < row.cells.length; i++) {\n                    cell = row.cells[i];\n                    if (cmd._isHeadingCell(cell) && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                        dom.changeTag(cell, TD, false);\n                    } else if (!cmd._isHeadingCell(cell) && tableProp.headerColumns > cell.getAttribute(COL_INDEX)) {\n                        dom.changeTag(cell, TH, false);\n                    }\n                }\n                rowIndex += 1;\n            }\n        },\n        _updateHeaderAssociates: function(table, tableProp) {\n            var cmd = this;\n\n            if (tableProp.cellsWithHeaders === \"ids\") {\n                if (!cmd.cellsWithHeadersAssociated(table)) {\n                    cmd._removeScopes(table);\n                }\n                dom.associateWithIds(table);\n            } else if (tableProp.cellsWithHeaders === \"scope\") {\n                if (cmd.cellsWithHeadersAssociated(table)) {\n                    cmd._removeAssociates(table);\n                }\n                cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n            } else {\n                if (cmd.cellsWithHeadersAssociated(table)) {\n                    cmd._removeAssociates(table);\n                } else {\n                    cmd._removeScopes(table);\n                }\n            }\n        },\n        _addScopes: function(table, headerRows, headerCols) {\n            var rows = table.rows;\n            var i, j, row, cell;\n\n            for (i = 0; i < rows.length; i++) {\n                row = rows[i];\n\n                for (j = 0; j < row.cells.length; j++) {\n                    cell = row.cells[j];\n\n                    if (i < headerRows) {\n                        cell.setAttribute(SCOPE, COL);\n                    } else if (cell.getAttribute(COL_INDEX) < headerCols) {\n                        cell.setAttribute(SCOPE, ROW);\n                    }\n                }\n            }\n        },\n        _removeScopes: function(table) {\n            $(table).find(TH).removeAttr(SCOPE);\n            $(table).find(COL).remove();\n            $(table).find(COLGROUP).remove();\n        },\n        _removeAssociates: function(table) {\n            $(table).find(\"th, td\").removeAttr(\"id headers\");\n        },\n        _swapToHeaderCells: function(thead) {\n            var tds = $(thead).find(\"td\");\n            var swapCell = function(index, cell) {\n                dom.changeTag(cell, TH, false);\n            };\n            tds.each(swapCell);\n        },\n        _getStylesData: function(data) {\n            var that = this;\n            var alignment = this._getAlignmentData(data.alignment);\n            var whiteSpace = \"wrapText\" in data ? (data.wrapText ? \"\" : \"nowrap\") : null;\n\n            return $.extend({\n                width: data.width ? data.width + data.widthUnit : null,\n                height: data.height ? data.height + data.heightUnit : null,\n                textAlign: alignment.textAlign,\n                verticalAlign: alignment.verticalAlign,\n                backgroundColor: data.bgColor || \"\",\n                borderWidth: data.borderWidth,\n                borderStyle: data.borderStyle,\n                borderColor: data.borderColor || \"\",\n                borderCollapse: data.collapseBorders ? \"collapse\" : null,\n                whiteSpace: whiteSpace\n            }, that._getTablePositionData(data.position));\n        },\n        _getAlignmentData: function(alignment) {\n            var textAlign = \"\";\n            var verticalAlign = textAlign;\n\n            if (alignment) {\n                if (alignment.indexOf(\" \") != -1) {\n                    var align = alignment.split(\" \");\n                    textAlign = align[0];\n                    verticalAlign = align[1];\n                } else {\n                    textAlign = alignment;\n                }\n            }\n            return { textAlign: textAlign, verticalAlign: verticalAlign };\n        },\n        _getTablePositionData: function(position) {\n            if (!position) {\n                return {};\n            }\n\n            return { marginLeft: position != \"left\" ? \"auto\" : \"\", marginRight: position != \"right\" ? \"auto\" : \"\" };\n        },\n        parseTable: function(table, selectedCells) {\n            if (!table) {\n                return { tableProperties: {}, selectedCells: [] };\n            }\n\n            var cmd = this;\n            var tStyle = table.style;\n            var rows = table.rows;\n            var caption = table.caption;\n            var captionClone = $(caption ? caption.cloneNode(true) : undefined$1);\n            captionClone.find(\".k-marker\").remove();\n\n            var cssClass = table.className;\n            cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, \"\");\n            cssClass = cssClass.replace(/\\sk-table\\s/, \" \");\n            cssClass = cssClass.replace(/^k-table$/, \"\");\n\n            var tableAlignment = cmd._getAlignment(table, true);\n            var tablePosition = cmd._getTablePosition(table);\n            var captionAlignment = caption ? cmd._getAlignment(caption) : undefined$1;\n            var numberOfHeaderRows = dom._getNumberOfHeaderRows(table);\n\n            var cellsWithHeaders;\n            if (cmd.cellsWithHeadersAssociated(table)) {\n                cellsWithHeaders = \"ids\";\n            } else if ($(table).find(\"th[scope]\").length > 0) {\n                cellsWithHeaders = \"scope\";\n            } else {\n                cellsWithHeaders = \"none\";\n            }\n\n            dom.reMapTableColumns(table, COL_INDEX);\n            var numberOfColumns = dom._getNumberOfColumns(table);\n            var numberOfHeaderColumns = dom._getNumberOfHeaderColumns(table, numberOfHeaderRows);\n            dom.clearTableMappings(table, COL_INDEX);\n\n            var tableJson = {\n                tableProperties: {\n                    width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                    height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                    columns: numberOfColumns,\n                    rows: rows.length,\n                    widthUnit: cmd._getUnit(tStyle.width),\n                    heightUnit: cmd._getUnit(tStyle.height),\n                    cellSpacing: table.cellSpacing,\n                    cellPadding: table.cellPadding,\n                    alignment: tableAlignment.textAlign,\n                    position: tablePosition,\n                    bgColor: tStyle.backgroundColor || table.bgColor,\n                    className: cssClass,\n                    id: table.id,\n                    borderWidth: tStyle.borderWidth || table.border,\n                    borderColor: tStyle.borderColor,\n                    borderStyle: tStyle.borderStyle || \"\",\n                    collapseBorders: !!tStyle.borderCollapse,\n                    summary: table.summary,\n                    captionContent: caption ? captionClone.html() : \"\",\n                    captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + \" \" + captionAlignment.verticalAlign : \"\",\n                    headerRows: numberOfHeaderRows,\n                    headerColumns: numberOfHeaderColumns,\n                    cellsWithHeaders: cellsWithHeaders\n                },\n                selectedCells: []\n            };\n\n            tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n\n            return tableJson;\n        },\n        parseTableRows: function(rows, selectedCells, tableJson) {\n            var cmd = this;\n            var data = [], row, rowData, cells, cell, cellData;\n            for (var i = 0; i < rows.length; i++) {\n                row = rows[i];\n                rowData = { cells: [] };\n                cells = row.cells;\n                data.push(rowData);\n                for (var j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    cellData = cmd.parseCell(cell);\n                    if ($.inArray(cell, selectedCells) != -1) {\n                        tableJson.selectedCells.push(cellData);\n                    }\n                    rowData.cells.push(cellData);\n                }\n            }\n            return data;\n        },\n        parseCell: function(cell) {\n            var cmd = this;\n            var cStyle = cell.style;\n            var alignment = cmd._getAlignment(cell);\n            alignment = alignment.textAlign ? alignment.textAlign + \" \" + alignment.verticalAlign : \"\";\n\n            var data = {\n                width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n                height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n                widthUnit: cmd._getUnit(cStyle.width),\n                heightUnit: cmd._getUnit(cStyle.height),\n                cellMargin: cStyle.margin,\n                cellPadding: cStyle.padding,\n                alignment: alignment,\n                bgColor: cStyle.backgroundColor || cell.bgColor,\n                className: cell.className,\n                id: cell.id,\n                borderWidth: cStyle.borderWidth || cell.border,\n                borderColor: cStyle.borderColor,\n                borderStyle: cStyle.borderStyle,\n                wrapText: cStyle.whiteSpace != \"nowrap\"\n            };\n\n            return data;\n        },\n        _getTablePosition: function(element) {\n            var style = element.style;\n            if (style.marginLeft == \"auto\" && style.marginRight == \"auto\") {\n                return \"center\";\n            }\n\n            if (style.marginLeft == \"auto\") {\n                return \"right\";\n            }\n\n            return \"left\";\n        },\n        _getAlignment: function(element, horizontalOnly) {\n            var style = element.style;\n            var hAlign = style.textAlign || element.align || \"\";\n            if (horizontalOnly) {\n                return { textAlign: hAlign };\n            }\n            var vAlign = style.verticalAlign || element.vAlign || \"\";\n            if (hAlign && vAlign) {\n                return { textAlign: hAlign, verticalAlign: vAlign };\n            }\n            if (!hAlign && vAlign) {\n                return { textAlign: \"left\", verticalAlign: vAlign };\n            }\n            if (hAlign && !vAlign) {\n                return { textAlign: hAlign, verticalAlign: \"top\" };\n            }\n            return { textAlign: \"\", verticalAlign: \"\" };\n        },\n        _getUnit: function(value) {\n            var unit = (value || \"\").match(reUnit);\n            return unit ? unit[0] : \"px\";\n        },\n        _selectedTable: function(range) {\n            var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n            return tableFormatFinder.findSuitable(nodes)[0];\n        },\n        _selectedCells: function(range) {\n            var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n            return cellsFormatFinder.findSuitable(nodes);\n        },\n        _lastInCollection: function(collection) {\n            return collection[collection.length - 1];\n        }\n    });\n\n    var TableWizardTool = Editor.Tool.extend({\n        command: function(options) {\n            options.insertNewTable = this.options.insertNewTable;\n            options.tableCellWizard = !!this.options.tableCellWizard;\n            return new TableWizardCommand(options);\n        }\n    });\n\n    var TableWizardEditTool = TableWizardTool.extend({\n        update: function(ui, nodes) {\n            var isFormatted = !tableFormatFinder.isFormatted(nodes),\n                toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n            if (isFormatted === true) {\n                toolbar.hide(ui);\n            } else {\n                toolbar.show(ui);\n            }\n        }\n    });\n\n    var TableCellWizardEditTool = TableWizardTool.extend({\n        update: function(ui, nodes) {\n            var isFormatted = !tableFormatFinder.isFormatted(nodes),\n                toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n            if (isFormatted === true) {\n                toolbar.hide(ui);\n            } else {\n                toolbar.show(ui);\n            }\n        }\n    });\n\n    kendo.ui.editor.TableWizardTool = TableWizardTool;\n    kendo.ui.editor.TableWizardCommand = TableWizardCommand;\n\n    registerTool(\"tableProperties\", new TableWizardEditTool({ command: TableWizardCommand, insertNewTable: false, property: \"tableProperties\" }));\n    registerTool(\"tableCellProperties\", new TableCellWizardEditTool({ command: TableWizardCommand, tableCellWizard: true, insertNewTable: false, property: \"tableCellProperties\" }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        encode = kendo.htmlEncode,\n        numericTextBoxSettings = { format: \"0\", min: 0 },\n        units = [\"px\", \"em\"],\n        borderStyles = [\"solid\", \"dotted\", \"dashed\", \"double\", \"groove\", \"ridge\", \"inset\", \"outset\", \"initial\", \"inherit\", \"none\", \"hidden\"];\n\n    var DEFAULT_NUMBER_OF_COLS_AND_ROWS = 4;\n\n    var textWrapDropDownSettings = {\n        dataSource: [{\n            className: \"text-wrap\",\n            value: \"wrap\"\n        }, {\n            className: \"parameter-string\",\n            value: \"nowrap\"\n        }],\n        dataTextField: \"className\",\n        dataValueField: \"value\",\n        template: function (ref) {\n           var className = ref.className;\n           var tooltip = ref.tooltip;\n\n           return kendo.ui.icon($((\"<span title=\\\"\" + (encode(tooltip)) + \"\\\"></span>\")), { icon: encode(className) }) + encode(tooltip);\n    },\n        valueTemplate: function (ref) {\n           var className = ref.className;\n           var tooltip = ref.tooltip;\n\n           return kendo.ui.icon($((\"<span title=\\\"\" + (encode(tooltip)) + \"\\\"></span>\")), { icon: encode(className), iconClass: \"k-text-wrap\" }) + encode(tooltip);\n    }\n    };\n\n    var tablePositionDropDownSettings = {\n        dataSource: [{\n            className: \"table-position-start\",\n            value: \"left\"\n        }, {\n            className: \"table-position-center\",\n            value: \"center\"\n        }, {\n            className: \"table-position-end\",\n            value: \"right\"\n        }],\n        dataTextField: \"className\",\n        dataValueField: \"value\",\n        template: function (ref) {\n           var className = ref.className;\n           var tooltip = ref.tooltip;\n\n           return kendo.ui.icon($((\"<span title=\\\"\" + (encode(tooltip)) + \"\\\"></span>\")), { icon: encode(className) }) + encode(tooltip);\n    },\n        valueTemplate: function (ref) {\n           var className = ref.className;\n           var tooltip = ref.tooltip;\n\n           return kendo.ui.icon($((\"<span title=\\\"\" + (encode(tooltip)) + \"\\\"></span>\")), { icon: encode(className), iconClass: \"k-align-group\" }) + encode(tooltip);\n    }\n    };\n\n    var tableAlignmentDropDownSettings = {\n        dataSource: [{\n            className: \"table-align-middle-left\",\n            value: \"left\"\n        }, {\n            className: \"table-align-middle-center\",\n            value: \"center\"\n        }, {\n            className: \"table-align-middle-right\",\n            value: \"right\"\n        }, {\n            className: \"align-remove\",\n            value: \"\"\n        }],\n        dataTextField: \"className\",\n        dataValueField: \"value\",\n        template: function (ref) {\n           var className = ref.className;\n           var tooltip = ref.tooltip;\n\n           return kendo.ui.icon($((\"<span title=\\\"\" + (encode(tooltip)) + \"\\\"></span>\")), { icon: encode(className) }) + encode(tooltip);\n    },\n        valueTemplate: function (ref) {\n           var className = ref.className;\n           var tooltip = ref.tooltip;\n\n           return kendo.ui.icon($((\"<span title=\\\"\" + (encode(tooltip)) + \"\\\"></span>\")), { icon: encode(className), iconClass: \"k-align-group\" }) + encode(tooltip);\n    }\n    };\n\n    var cellAlignmentDropDownSettings = {\n        dataSource: [{\n            className: \"table-align-top-left\",\n            value: \"left top\"\n        }, {\n            className: \"table-align-top-center\",\n            value: \"center top\"\n        }, {\n            className: \"table-align-top-right\",\n            value: \"right top\"\n        }, {\n            className: \"table-align-middle-left\",\n            value: \"left middle\"\n        }, {\n            className: \"table-align-middle-center\",\n            value: \"center middle\"\n        }, {\n            className: \"table-align-middle-right\",\n            value: \"right middle\"\n        }, {\n            className: \"table-align-bottom-left\",\n            value: \"left bottom\"\n        }, {\n            className: \"table-align-bottom-center\",\n            value: \"center bottom\"\n        }, {\n            className: \"table-align-bottom-right\",\n            value: \"right bottom\"\n        }, {\n            className: \"align-remove\",\n            value: \"\"\n        }],\n        dataTextField: \"className\",\n        dataValueField: \"value\",\n        template: function (ref) {\n           var className = ref.className;\n           var tooltip = ref.tooltip;\n\n           return kendo.ui.icon($((\"<span title=\\\"\" + (encode(tooltip)) + \"\\\"></span>\")), { icon: encode(className) }) + encode(tooltip);\n    },\n        valueTemplate: function (ref) {\n           var className = ref.className;\n           var tooltip = ref.tooltip;\n\n           return kendo.ui.icon($((\"<span title=\\\"\" + (encode(tooltip)) + \"\\\"></span>\")), { icon: encode(className), iconClass: \"k-align-group\" }) + encode(tooltip);\n    }\n    };\n\n    var accessibilityAlignmentDropDownSettings = {\n        dataSource: [{\n            className: \"table-align-top-left\",\n            value: \"left top\"\n        }, {\n            className: \"table-align-top-center\",\n            value: \"center top\"\n        }, {\n            className: \"table-align-top-right\",\n            value: \"right top\"\n        }, {\n            className: \"table-align-bottom-left\",\n            value: \"left bottom\"\n        }, {\n            className: \"table-align-bottom-center\",\n            value: \"center bottom\"\n        }, {\n            className: \"table-align-bottom-right\",\n            value: \"right bottom\"\n        }, {\n            className: \"align-remove\",\n            value: \"\"\n        }],\n        dataTextField: \"className\",\n        dataValueField: \"value\",\n        template: function (ref) {\n           var className = ref.className;\n           var tooltip = ref.tooltip;\n\n           return kendo.ui.icon($((\"<span title=\\\"\" + (encode(tooltip)) + \"\\\"></span>\")), { icon: encode(className) });\n    },\n        valueTemplate: function (ref) {\n           var className = ref.className;\n           var tooltip = ref.tooltip;\n\n           return kendo.ui.icon($((\"<span title=\\\"\" + (encode(tooltip)) + \"\\\"></span>\")), { icon: encode(className), iconClass: \"k-align-group\" });\n    }\n    };\n\n    var tablePropertiesDialogTemplate = function (ref) {\n           var messages = ref.messages;\n\n           return '<div class=\"k-editor-dialog k-editor-table-wizard-window k-action-window k-popup-edit-form\">' +\n            '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' +\n                '<ul>' +\n                    \"<li class=\\\"k-active\\\">\" + (messages.tableTab) + \"</li>\" +\n                    \"<li>\" + (messages.accessibilityTab) + \"</li>\" +\n                '</ul>' +\n                '<div id=\"k-table-properties\"></div>' +\n                '<div id=\"k-accessibility-properties\"></div>' +\n            '</div>' +\n            '<div class=\"k-actions k-actions-start k-actions-horizontal k-window-buttons\">' +\n                    kendo.html.renderButton((\"<button class=\\\"k-dialog-ok\\\"><span class=\\\"k-button-text\\\">\" + (messages.dialogOk) + \"</span></button>\"), {\n                        icon: 'check',\n                            themeColor: \"primary\"\n                        }) +\n                        kendo.html.renderButton((\"<button class=\\\"k-dialog-close\\\"><span class=\\\"k-button-text\\\">\" + (messages.dialogCancel) + \"</span></button>\"), {\n                            icon: 'cancel-outline'\n                        }) +\n            '</div>' +\n        '</div>';\n    };\n        var cellPropertiesDialogTemplate = function (ref) {\n           var messages = ref.messages;\n\n           return '<div class=\"k-editor-dialog k-editor-table-wizard-window k-action-window k-popup-edit-form\">' +\n            '<div id=\"k-cell-properties\"></div>' +\n            '<div class=\"k-actions k-actions-start k-actions-horizontal k-window-buttons\">' +\n                    kendo.html.renderButton((\"<button class=\\\"k-dialog-ok\\\"><span class=\\\"k-button-text\\\">\" + (messages.dialogOk) + \"</span></button>\"), {\n                        icon: 'check',\n                            themeColor: \"primary\"\n                        }) +\n                        kendo.html.renderButton((\"<button class=\\\"k-dialog-close\\\"><span class=\\\"k-button-text\\\">\" + (messages.dialogCancel) + \"</span></button>\"), {\n                            icon: 'cancel-outline'\n                        }) +\n            '</div>' +\n        '</div>';\n    };\n\n    var TableWizardDialog = kendo.Class.extend({\n        init: function(options) {\n            this.options = options;\n        },\n        _openTablePropertiesDialog: function() {\n            var that = this,\n                options = that.options,\n                dialogOptions = options.dialogOptions,\n                tableData = options.table,\n                dialog,\n                messages = options.messages,\n                isIE = kendo.support.browser.msie;\n\n            function close(e) {\n                e.preventDefault();\n                that.destroy();\n                dialog.destroy();\n            }\n\n            function okHandler(e) {\n                that.collectTableDialogValues(tableData);\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n\n                options.closeCallback(tableData);\n            }\n\n            function closeHandler(e) {\n                close(e);\n                options.closeCallback();\n            }\n\n            dialogOptions.close = closeHandler;\n            dialogOptions.minWidth = 400;\n            dialogOptions.title = messages.tableProperties;\n            dialogOptions.visible = options.visible;\n\n            dialog = $(that._dialogTemplate(messages)).appendTo(document.body)\n                .kendoWindow(dialogOptions)\n                .addClass(\"k-editor-window\")\n                .closest(\".k-window\").toggleClass(\"k-rtl\", options.isRtl).end()\n                .find(\".k-dialog-ok\").on(\"click\", okHandler).end()\n                .find(\".k-dialog-close\").on(\"click\", closeHandler).end()\n                .data(\"kendoWindow\");\n\n            var element = dialog.element;\n            this.components = {};\n            that._initTabStripComponent(element);\n            that._tablePropertiesForm = that._createTablePropertiesForm(dialog, messages);\n            that._accessibilityPropertiesForm = that._createAccessibilityPropertiesForm(dialog, messages);\n\n            dialog.center();\n            dialog.open();\n\n            if (isIE) {\n                var dialogHeight = element.closest(\".k-window\").height();\n                element.css(\"max-height\", dialogHeight);\n            }\n        },\n        _openCellPropertiesDialog: function() {\n            var that = this,\n                options = that.options,\n                dialogOptions = options.dialogOptions,\n                tableData = options.table,\n                dialog,\n                messages = options.messages,\n                isIE = kendo.support.browser.msie;\n\n            function close(e) {\n                e.preventDefault();\n                that.destroy();\n                dialog.destroy();\n            }\n\n            function okHandler(e) {\n                that.collectCellDialogValues(tableData);\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n\n                options.closeCallback(tableData);\n            }\n\n            function closeHandler(e) {\n                close(e);\n                options.closeCallback();\n            }\n\n            dialogOptions.close = closeHandler;\n            dialogOptions.minWidth = 400;\n            dialogOptions.title = messages.tableCellProperties;\n            dialogOptions.visible = options.visible;\n\n            dialog = $(that._dialogTemplate(messages, cellPropertiesDialogTemplate)).appendTo(document.body)\n                .kendoWindow(dialogOptions)\n                .addClass(\"k-editor-window\")\n                .closest(\".k-window\").toggleClass(\"k-rtl\", options.isRtl).end()\n                .find(\".k-dialog-ok\").on(\"click\", okHandler).end()\n                .find(\".k-dialog-close\").on(\"click\", closeHandler).end()\n                .data(\"kendoWindow\");\n\n            var element = dialog.element;\n            that._cellPropertiesForm = that._createCellPropertiesForm(dialog, messages);\n\n            dialog.center();\n            dialog.open();\n\n            if (isIE) {\n                var dialogHeight = element.closest(\".k-window\").height();\n                element.css(\"max-height\", dialogHeight);\n            }\n        },\n        open: function(isCellProperties) {\n            if (!isCellProperties) {\n                this._openTablePropertiesDialog();\n            } else {\n                this._openCellPropertiesDialog();\n            }\n        },\n\n        _initTabStripComponent: function(element) {\n            var components = this.components = {};\n            components.tabStrip = element.find(\"#k-table-wizard-tabs\").kendoTabStrip({\n                animation: false\n            }).data(\"kendoTabStrip\");\n        },\n\n        collectTableDialogValues: function() {\n            var that = this;\n            var data = that.options.table;\n            that._collectTableViewValues(data);\n            that._collectAccessibilityViewValues(data);\n        },\n\n        collectCellDialogValues: function() {\n            var that = this;\n            var data = that.options.table;\n            that._collectCellViewValues(data);\n        },\n\n        _collectTableViewValues: function(tableData) {\n            var tableView = this.components.tableView;\n            var tableProperties = tableData.tableProperties;\n            var cellData = tableData.cellProperties = tableData.cellProperties || {};\n            tableProperties.width = tableView.width.value();\n            tableProperties.widthUnit = tableView.widthUnit.value();\n            tableProperties.height = tableView.height.value();\n            tableProperties.columns = tableView.columns.value();\n            tableProperties.rows = tableView.rows.value();\n            tableProperties.heightUnit = tableView.heightUnit.value();\n            tableProperties.cellSpacing = tableView.cellSpacing.value();\n            tableProperties.cellPadding = tableView.cellPadding.value();\n            tableProperties.alignment = tableView.alignment.value();\n            tableProperties.position = tableView.position.value();\n            tableProperties.bgColor = tableView.bgColor.value();\n            tableProperties.borderWidth = tableView.borderWidth.value();\n            tableProperties.borderColor = tableView.borderColor.value();\n            tableProperties.borderStyle = tableView.borderStyle.value();\n            tableProperties.collapseBorders = tableView.collapseBorders.check();\n\n            if (!cellData.width) {\n                cellData.selectAllCells = true;\n                cellData.width = 100 / tableData.tableProperties.columns;\n                cellData.widthUnit = \"%\";\n            }\n        },\n\n        _collectCellViewValues: function(table) {\n            var cellData = table.cellProperties = table.cellProperties || {};\n            var cellView = this.components.cellView;\n\n            cellData.selectAllCells = cellView.selectAllCells.check();\n            cellData.width = cellView.width.value();\n            cellData.widthUnit = cellView.widthUnit.value();\n            cellData.height = cellView.height.value();\n            cellData.heightUnit = cellView.heightUnit.value();\n            cellData.cellMargin = cellView.cellMargin.value();\n            cellData.cellPadding = cellView.cellPadding.value();\n            cellData.alignment = cellView.alignment.value();\n            cellData.bgColor = cellView.bgColor.value();\n            cellData.className = cellView.className.value();\n            cellData.id = cellView.id.value();\n            cellData.borderWidth = cellView.borderWidth.value();\n            cellData.borderColor = cellView.borderColor.value();\n            cellData.borderStyle = cellView.borderStyle.value();\n            cellData.wrapText = cellView.wrapTextValue.value() == \"wrap\";\n\n            if (!cellData.width) {\n                cellData.selectAllCells = true;\n                cellData.width = 100 / table.tableProperties.columns;\n                cellData.widthUnit = \"%\";\n            }\n        },\n\n       _collectAccessibilityViewValues: function(table) {\n            var tableProperties = table.tableProperties;\n            var accessibilityView = this.components.accessibilityView;\n            tableProperties.captionContent = accessibilityView.captionContent.value();\n            tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n            tableProperties.summary = accessibilityView.summary.value();\n            tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.value();\n            tableProperties.className = accessibilityView.className.value();\n            tableProperties.id = accessibilityView.id.value();\n            tableProperties.headerRows = accessibilityView.headerRows.value();\n            tableProperties.headerColumns = accessibilityView.headerColumns.value();\n        },\n        _addUnit: function(units, value) {\n            if (value && $.inArray(value, units) == -1) {\n                units.push(value);\n            }\n        },\n\n        _initNumericTextbox: function(element, property, data, storage, settings) {\n            var component = storage[property] = element.kendoNumericTextBox(\n                    settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings\n                ).data(\"kendoNumericTextBox\");\n            if (property in data) {\n                component.value(parseInt(data[property], 10));\n            }\n        },\n\n        _initDropDownList: function(element, property, data, storage, dataSource) {\n            var component = storage[property] = element.kendoDropDownList({\n                dataSource: dataSource\n            }).data(\"kendoDropDownList\");\n            this._setComponentValue(component, data, property);\n        },\n\n        _initBorderStyleDropDown: function(element, property, data, storage, dataSource) {\n            var component = storage[property] = element.kendoDropDownList({\n                dataSource: dataSource,\n                optionLabel: this.options.messages.borderNone\n            }).data(\"kendoDropDownList\");\n            this._setComponentValue(component, data, property);\n        },\n\n        _initTablePositionDropDown: function(element, data) {\n            var messages = this.options.messages;\n            var tableView = this.components.tableView;\n            var dataSource = tablePositionDropDownSettings.dataSource;\n            dataSource[0].tooltip = messages.tableAlignLeft;\n            dataSource[1].tooltip = messages.tableAlignCenter;\n            dataSource[2].tooltip = messages.tableAlignRight;\n\n            this._initPositionDropDown(element, tablePositionDropDownSettings, \"position\", data, tableView);\n        },\n\n        _initTableAlignmentDropDown: function(element, data) {\n            var messages = this.options.messages;\n            var tableView = this.components.tableView;\n            var dataSource = tableAlignmentDropDownSettings.dataSource;\n            dataSource[0].tooltip = messages.alignLeft;\n            dataSource[1].tooltip = messages.alignCenter;\n            dataSource[2].tooltip = messages.alignRight;\n            dataSource[3].tooltip = messages.alignRemove;\n\n            this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, \"alignment\", data, tableView);\n        },\n\n        _initCellAlignmentDropDown: function(element, data) {\n            var messages = this.options.messages;\n            var cellView = this.components.cellView;\n            var dataSource = cellAlignmentDropDownSettings.dataSource;\n            dataSource[0].tooltip = messages.alignLeftTop;\n            dataSource[1].tooltip = messages.alignCenterTop;\n            dataSource[2].tooltip = messages.alignRightTop;\n            dataSource[3].tooltip = messages.alignLeftMiddle;\n            dataSource[4].tooltip = messages.alignCenterMiddle;\n            dataSource[5].tooltip = messages.alignRightMiddle;\n            dataSource[6].tooltip = messages.alignLeftBottom;\n            dataSource[7].tooltip = messages.alignCenterBottom;\n            dataSource[8].tooltip = messages.alignRightBottom;\n            dataSource[9].tooltip = messages.alignRemove;\n\n            this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, \"alignment\", data, cellView);\n        },\n\n        _initAccessibilityAlignmentDropDown: function(element, data) {\n            var messages = this.options.messages;\n            var accessibilityView = this.components.accessibilityView;\n            var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n            dataSource[0].tooltip = messages.alignLeftTop;\n            dataSource[1].tooltip = messages.alignCenterTop;\n            dataSource[2].tooltip = messages.alignRightTop;\n            dataSource[3].tooltip = messages.alignLeftBottom;\n            dataSource[4].tooltip = messages.alignCenterBottom;\n            dataSource[5].tooltip = messages.alignRightBottom;\n            dataSource[6].tooltip = messages.alignRemove;\n\n            this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, \"captionAlignment\", data, accessibilityView);\n        },\n        _initTextWrapDropDown: function(element, data) {\n            var messages = this.options.messages;\n            var name = \"wrapTextValue\";\n            data.wrapTextValue = data.wrapText ? \"wrap\" : \"nowrap\";\n\n            var cellView = this.components.cellView;\n            var dataSource = textWrapDropDownSettings.dataSource;\n            dataSource[0].tooltip = messages.wrapText;\n            dataSource[1].tooltip = messages.fitToCell;\n            var component = cellView[name] =\n                element.kendoDropDownList(textWrapDropDownSettings).data(\"kendoDropDownList\");\n\n            component.list.addClass('k-text-wrap');\n            this._setComponentValue(component, data, name);\n        },\n        _initPositionDropDown: function(element, settings, name, data, storage) {\n            var component = storage[name] =\n                element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n            component.list.addClass('k-position');\n            this._setComponentValue(component, data, name);\n        },\n        _initAlignmentDropDown: function(element, settings, name, data, storage) {\n            var component = storage[name] =\n                element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n            component.list.addClass('k-align');\n            this._setComponentValue(component, data, name);\n        },\n        _initAssociationDropDown: function(element, name, settings, data, storage) {\n            var component = storage[name] =\n                element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n            this._setComponentValue(component, data, name);\n        },\n        _setComponentValue: function(component, data, property) {\n            if (property in data) {\n                component.value(data[property]);\n            }\n        },\n\n        _initColorPicker: function(element, property, data, storage) {\n            var component = storage[property] =\n                element.kendoColorPicker({ buttons: false, clearButton: true }).data(\"kendoColorPicker\");\n\n            if (data[property]) {\n                component.value(data[property]);\n            }\n        },\n        _initInput: function(element, property, data, storage, settings) {\n            var component = storage[property] = element.kendoTextBox(settings || {}).data(\"kendoTextBox\");\n            if (property in data) {\n                component.value(data[property]);\n            }\n        },\n\n        _initCheckbox: function(element, property, data, storage, settings) {\n            var component = storage[property] = element.kendoCheckBox(settings || {}).data(\"kendoCheckBox\");\n            if (property in data) {\n                component.check(data[property]);\n            }\n        },\n\n        _initTextArea: function(element, property, data, storage, settings) {\n            var component = storage[property] = element.kendoTextArea(settings || {}).data(\"kendoTextArea\");\n            if (property in data) {\n                component.value(data[property]);\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n            that._destroyComponents(this.components);\n\n            delete that.components;\n        },\n        _destroyComponents: function(components) {\n            for (var widget in components) {\n                if (components[widget].destroy) {\n                    components[widget].destroy();\n                }\n                delete components[widget];\n            }\n        },\n\n        _dialogTemplate: function(messages, dialogTemplate) {\n            return kendo.template(dialogTemplate || tablePropertiesDialogTemplate)({ messages: messages });\n        },\n\n        _onColumnsNumberChange: function(args) {\n            var that = this;\n            var accessibilityView = that.components.accessibilityView;\n            var headerColumnsNumeric = accessibilityView.headerColumns;\n            var currentNumberOfColumnsHeaders = headerColumnsNumeric.value();\n            var numberOfColumns = args.sender.value();\n\n            if (numberOfColumns < currentNumberOfColumnsHeaders) {\n                headerColumnsNumeric.value(numberOfColumns);\n            }\n\n            headerColumnsNumeric.max(numberOfColumns);\n        },\n\n        _onRowsNumberChange: function(args) {\n            var that = this;\n            var accessibilityView = that.components.accessibilityView;\n            var headerRowsNumeric = accessibilityView.headerRows;\n            var currentNumberOfRowHeaders = headerRowsNumeric.value();\n            var numberOfRows = args.sender.value();\n\n            if (numberOfRows < currentNumberOfRowHeaders) {\n                headerRowsNumeric.value(numberOfRows);\n            }\n\n            headerRowsNumeric.max(numberOfRows);\n        },\n\n        _createTablePropertiesForm: function(dialog, messages) {\n            var that = this;\n            var table = that.options.table;\n            var formElement = dialog.element.find(\"#k-table-properties\");\n            var components = that.components;\n            var tableView = components.tableView = {};\n            var tableProperties = table.tableProperties = table.tableProperties || {};\n            var form;\n\n            that._addUnit(units, tableProperties.widthUnit);\n            that._addUnit(units, tableProperties.heightUnit);\n            tableProperties.borderStyle = tableProperties.borderStyle || \"\";\n            form = formElement.kendoForm({\n                renderButtons: false,\n                layout: \"grid\",\n                grid: {\n                    cols: 4\n                },\n                items: [\n                    {\n                        colSpan: 2,\n                        field: \"k-editor-table-columns\",\n                        label: encode(messages.columns),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input type=\"numeric\" id=\"k-editor-table-columns\" />').appendTo(container),\n                                \"columns\",\n                                tableProperties,\n                                tableView,\n                                {\n                                    min: 1,\n                                    value: DEFAULT_NUMBER_OF_COLS_AND_ROWS,\n                                    change: that._onColumnsNumberChange.bind(that)\n                                });\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-table-rows\",\n                        label: encode(messages.rows),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input type=\"numeric\" id=\"k-editor-table-rows\" />').appendTo(container),\n                                \"rows\",\n                                tableProperties,\n                                tableView,\n                                {\n                                    min: 1,\n                                    value: DEFAULT_NUMBER_OF_COLS_AND_ROWS,\n                                    change: that._onRowsNumberChange.bind(that)\n                                });\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-table-width\",\n                        label: encode(messages.width),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-table-width\" />').appendTo(container), \"width\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-table-width-type\",\n                        label: {\n                            encoded: false,\n                            text: '&nbsp;'\n                        },\n                        editor: function(container, options) {\n                            that._initDropDownList($((\"<input id=\\\"k-editor-table-width-type\\\" aria-label=\\\"\" + (messages.units) + \"\\\" />\")).appendTo(container),\n                                \"widthUnit\",\n                                tableProperties,\n                                tableView,\n                                units);\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-table-height\",\n                        label: encode(messages.height),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-table-height\" />').appendTo(container), \"height\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-table-height-type\",\n                        label: {\n                            encoded: false,\n                            text: '&nbsp;'\n                        },\n                        editor: function(container, options) {\n                            that._initDropDownList($((\"<input id=\\\"k-editor-table-height-type\\\" aria-label=\\\"\" + (messages.units) + \"\\\" />\")).appendTo(container),\n                                \"heightUnit\",\n                                tableProperties,\n                                tableView,\n                                units);\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-table-position\",\n                        label: encode(messages.position),\n                        editor: function(container, options) {\n                            that._initTablePositionDropDown($('<input id=\"k-editor-table-position\" class=\"k-position\" />').appendTo(container), tableProperties);\n                        }\n                    },\n                    {\n                        colSpan: 2,\n                        field: \"k-editor-table-alignment\",\n                        label: encode(messages.alignment),\n                        editor: function(container, options) {\n                            that._initTableAlignmentDropDown($('<input id=\"k-editor-table-alignment\" class=\"k-align\" />').appendTo(container), tableProperties);\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-table-cell-spacing\",\n                        label: encode(messages.cellSpacing),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-table-cell-spacing\" />').appendTo(container), \"cellSpacing\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-table-cell-padding\",\n                        label: encode(messages.cellPadding),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-table-cell-padding\" />').appendTo(container), \"cellPadding\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        colSpan: \"full\",\n                        field: \"k-editor-table-bg\",\n                        label: encode(messages.tableBackground),\n                        editor: function(container, options) {\n                            that._initColorPicker($('<input id=\"k-editor-table-bg\" />').appendTo(container), \"bgColor\", tableProperties, tableView);\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-border-width\",\n                        label: encode(messages.borderWidth),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-border-width\" />').appendTo(container), \"borderWidth\", tableProperties, tableView);\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-border-color\",\n                        label: encode(messages.borderColor),\n                        editor: function(container, options) {\n                            that._initColorPicker($('<input id=\"k-editor-border-color\" />').appendTo(container), \"borderColor\", tableProperties, tableView);\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-border-style\",\n                        label: encode(messages.borderStyle),\n                        editor: function(container, options) {\n                            that._initBorderStyleDropDown($('<input id=\"k-editor-border-style\" />').appendTo(container),\n                                \"borderStyle\",\n                                tableProperties,\n                                tableView,\n                                borderStyles);\n                        }\n                    },{\n                        colSpan: \"full\",\n                        field: \"k-editor-collapse-borders\",\n                        label: \"\",\n                        editor: function(container, options) {\n                            that._initCheckbox($('<input id=\"k-editor-collapse-borders\"/>').appendTo(container), \"collapseBorders\", tableProperties, tableView, { label: encode(messages.collapseBorders) });\n                        }\n                    } ]\n            }).data(\"kendoForm\");\n            form.layoutWrapper.addClass(\"k-gap-x-4\");\n\n            return form;\n        },\n\n        _createCellPropertiesForm: function(dialog, messages) {\n            var that = this;\n            var table = that.options.table;\n            var formElement = dialog.element.find(\"#k-cell-properties\");\n            var components = that.components = that.components || {};\n            var cellView = components.cellView = {};\n            var cellProperties = (table.selectedCells && table.selectedCells[0]) || { borderStyle: \"\", wrapText: true };\n            var form;\n\n            that._addUnit(units, cellProperties.widthUnit);\n            that._addUnit(units, cellProperties.heightUnit);\n            form = formElement.kendoForm({\n                renderButtons: false,\n                layout: \"grid\",\n                grid: {\n                    cols: 4\n                },\n                items: [\n                    {\n                        colSpan: \"full\",\n                        field: \"k-editor-selectAllCells\",\n                        label: \"\",\n                        editor: function(container, options) {\n                            that._initCheckbox($('<input id=\"k-editor-selectAllCells\" />').appendTo(container), \"selectAllCells\", table.tableProperties, cellView, { label: encode(messages.selectAllCells) });\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-cell-width\",\n                        label: encode(messages.width),\n                        hint: encode(messages.applyToColumn),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-cell-width\" />').appendTo(container), \"width\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-cell-width-type\",\n                        label: {\n                            encoded: false,\n                            text: '&nbsp;'\n                        },\n                        editor: function(container, options) {\n                            that._initDropDownList($((\"<input id=\\\"k-editor-cell-width-type\\\" aria-label=\\\"\" + (messages.units) + \"\\\" />\")).appendTo(container),\n                                \"widthUnit\",\n                                cellProperties,\n                                cellView,\n                                units);\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-cell-height\",\n                        label: encode(messages.height),\n                        hint: encode(messages.applyToRow),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-cell-height\" />').appendTo(container), \"height\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-cell-height-type\",\n                        label: {\n                            encoded: false,\n                            text: '&nbsp;'\n                        },\n                        editor: function(container, options) {\n                            that._initDropDownList($((\"<input id=\\\"k-editor-cell-height-type\\\" aria-label=\\\"\" + (messages.units) + \"\\\" />\")).appendTo(container),\n                                \"heightUnit\",\n                                cellProperties,\n                                cellView,\n                                units);\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-cell-alignment\",\n                        label: encode(messages.alignment),\n                        editor: function(container, options) {\n                            that._initCellAlignmentDropDown($('<input id=\"k-editor-cell-alignment\" class=\"k-align\" />').appendTo(container), cellProperties);\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-wrap-text\",\n                        label: \"Text control\",\n                        editor: function(container, options) {\n                            that._initTextWrapDropDown($('<input id=\"k-editor-wrap-text\" />').appendTo(container),\n                            cellProperties);\n                        }\n                    },{\n                        colSpan: \"full\",\n                        field: \"k-editor-cell-bg\",\n                        label: encode(messages.background),\n                        editor: function(container, options) {\n                            that._initColorPicker($('<input id=\"k-editor-cell-bg\" />').appendTo(container), \"bgColor\", cellProperties, cellView);\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-table-cell-margin\",\n                        label: encode(messages.cellMargin),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-table-cell-margin\" />').appendTo(container), \"cellMargin\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-table-cells-padding\",\n                        label: encode(messages.cellPadding),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-table-cells-padding\" />').appendTo(container), \"cellPadding\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-cell-border-width\",\n                        label: encode(messages.borderWidth),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-cell-border-width\" />').appendTo(container), \"borderWidth\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-cell-border-color\",\n                        label: encode(messages.borderColor),\n                        editor: function(container, options) {\n                            that._initColorPicker($('<input id=\"k-editor-cell-border-color\" />').appendTo(container), \"borderColor\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-cell-border-style\",\n                        label: encode(messages.borderStyle),\n                        editor: function(container, options) {\n                            that._initBorderStyleDropDown($('<input id=\"k-editor-cell-border-style\" />').appendTo(container),\n                                \"borderStyle\",\n                                cellProperties,\n                                cellView,\n                                borderStyles);\n                        }\n                    },{\n                        colSpan: \"full\",\n                        field: \"k-editor-cell-id\",\n                        label: {\n                            text: encode(messages.id),\n                            optional: true\n                        },\n                        editor: function(container, options) {\n                            that._initInput($('<input id=\"k-editor-cell-id\" />').appendTo(container), \"id\", cellProperties, cellView);\n                        }\n                    },{\n                        colSpan: \"full\",\n                        field: \"k-editor-cell-css-class\",\n                        label: {\n                            text: encode(messages.cssClass),\n                            optional: true\n                        },\n                        editor: function(container, options) {\n                            that._initInput($('<input id=\"k-editor-cell-css-class\" />').appendTo(container), \"className\", cellProperties, cellView);\n                        }\n                    }\n                ]\n            }).data(\"kendoForm\");\n            form.layoutWrapper.addClass(\"k-gap-x-4\");\n\n            return form;\n        },\n\n        _createAccessibilityPropertiesForm: function(dialog, messages) {\n            var that = this;\n            var table = that.options.table;\n            var formElement = dialog.element.find(\"#k-accessibility-properties\");\n            var components = that.components;\n            var accessibilityView = components.accessibilityView = {};\n            var tableProperties = table.tableProperties;\n            var form;\n\n            form = formElement.kendoForm({\n                renderButtons: false,\n                layout: \"grid\",\n                grid: {\n                    cols: 4\n                },\n                items: [\n                    {\n                        colSpan: \"full\",\n                        field: \"k-editor-id\",\n                        label: {\n                            text: encode(messages.id),\n                            optional: true\n                        },\n                        editor: function(container, options) {\n                            that._initInput($('<input id=\"k-editor-id\" />').appendTo(container), \"id\", tableProperties, accessibilityView);\n                        }\n                    },{\n                        colSpan: \"full\",\n                        field: \"k-editor-css-class\",\n                        label: {\n                            text: encode(messages.cssClass),\n                            optional: true\n                        },\n                        editor: function(container, options) {\n                            that._initInput($('<input id=\"k-editor-css-class\" />').appendTo(container), \"className\", tableProperties, accessibilityView);\n                        }\n                    },\n                    {\n                        layout: \"grid\",\n                        grid: {\n                            cols: 4,\n                            gutter: 16\n                        },\n                        colSpan: \"full\",\n                        type: \"group\",\n                        label: \"Accessibility\",\n                        items: [\n                            {\n                                colSpan: 2,\n                                field: \"k-editor-table-caption\",\n                                label: {\n                                    text: encode(messages.caption),\n                                    optional: true\n                                },\n                                editor: function(container, options) {\n                                    that._initInput($('<input id=\"k-editor-table-caption\" />').appendTo(container), \"captionContent\", tableProperties, accessibilityView);\n                                }\n                            },{\n                                colSpan: 2,\n                                field: \"k-editor-accessibility-alignment\",\n                                label: encode(messages.captionAlignment),\n                                editor: function(container, options) {\n                                    that._initAccessibilityAlignmentDropDown($('<input id=\"k-editor-accessibility-alignment\" />').appendTo(container), tableProperties);\n                                }\n                            },{\n                                colSpan: 1,\n                                field: \"k-editor-table-header-rows\",\n                                label: encode(messages.headerRows),\n                                editor: function(container, options) {\n                                    that._initNumericTextbox($('<input id=\"k-editor-table-header-rows\" />').appendTo(container),\n                                    \"headerRows\",\n                                    tableProperties,\n                                    accessibilityView,\n                                    {\n                                        max: tableProperties.rows || DEFAULT_NUMBER_OF_COLS_AND_ROWS\n                                    });\n                                }\n                            },{\n                                colSpan: 1,\n                                field: \"k-editor-table-header-columns\",\n                                label: encode(messages.headerColumns),\n                                editor: function(container, options) {\n                                    that._initNumericTextbox($('<input id=\"k-editor-table-header-columns\" />').appendTo(container),\n                                    \"headerColumns\",\n                                    tableProperties,\n                                    accessibilityView,\n                                    {\n                                        max: tableProperties.columns || DEFAULT_NUMBER_OF_COLS_AND_ROWS\n                                    });\n                                }\n                            },{\n                                colSpan: 2,\n                                field: \"k-editor-cells-headers\",\n                                label: encode(messages.associateCellsWithHeaders),\n                                editor: function(container, options) {\n                                    var element = $((\"<select id=\\\"k-editor-cells-headers\\\">\\n                                    <option value=\\\"none\\\">\" + (messages.associateNone) + \"</option>\\n                                    <option value=\\\"scope\\\">\" + (messages.associateScope) + \"</option>\\n                                    <option value=\\\"ids\\\">\" + (messages.associateIds) + \"</option>\\n                                </select>\")).appendTo(container);\n\n                                    that._initAssociationDropDown(element, \"cellsWithHeaders\", { valuePrimitive: true }, tableProperties, accessibilityView);\n                                }\n                            },{\n                                colSpan: \"full\",\n                                field: \"k-editor-accessibility-summary\",\n                                label: {\n                                    text: encode(messages.summary),\n                                    optional: true\n                                },\n                                editor: function(container, options) {\n                                    that._initTextArea($('<textarea id=\"k-editor-accessibility-summary\"></textarea>').appendTo(container), \"summary\", tableProperties, accessibilityView, {\n                                        rows: 5,\n                                        placeholder: messages.tableSummaryPlaceholder\n                                    });\n                                }\n                            }\n                        ]\n                    }\n                ]\n            }).data(\"kendoForm\");\n\n            form.layoutWrapper.addClass(\"k-gap-x-4\");\n\n            return form;\n        }\n    });\n\n    kendo.ui.editor.TableWizardDialog = TableWizardDialog;\n\n    })(window.kendo.jQuery);\n\n    var __meta__ = {\n            id: \"editor\",\n            name: \"Editor\",\n            category: \"web\",\n            description: \"Rich text editor component\",\n            depends: [ \"combobox\", \"dropdownlist\", \"window\", \"colorpicker\", \"toolbar\", \"icons\" ],\n            features: [ {\n                id: \"editor-imagebrowser\",\n                name: \"Image Browser\",\n                description: \"Support for uploading and inserting images\",\n                depends: [ \"imagebrowser\" ]\n            }, {\n                id: \"editor-resizable\",\n                name: \"Resize handle\",\n                description: \"Support for resizing the content area via a resize handle\",\n                depends: [ \"resizable\" ]\n            }, {\n                id: \"editor-tablewizard\",\n                name: \"Table wizard dialog\",\n                description: \"Support for table properties configuration\",\n                depends: [ \"tabstrip\", \"button\", \"numerictextbox\", \"textarea\" ]\n            }, {\n                id: \"editor-pdf-export\",\n                name: \"PDF export\",\n                description: \"Export Editor content as PDF\",\n                depends: [ \"pdf\", \"drawing\" ]\n            }]\n        };\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}