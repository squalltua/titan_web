{"version":3,"file":"kendo.grid.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendogrid","js","this","$","undefined$1","kendo","window","ContextMenu","ui","extend","encode","htmlEncode","ACTION","GridContextMenu","init","element","options","that","fn","call","_overrideTemplates","_extendItems","bind","_onSelect","_onOpen","templates","sprite","ref","icon","spriteCssClass","iconClass","defaultItems","separator","name","create","text","command","rules","edit","destroy","select","items","softRules","copySelection","copySelectionNoHeaders","paste","reorderRow","exportPDF","exportExcel","sortAsc","sortDesc","moveGroupPrevious","moveGroupNext","events","concat","ev","item","data","split","map","val","obj","obj$1","indexOf","key","reduce","acc","v","Object","assign","target","action","this$1$1","menu","sender","elTarget","event","isEmptyObject","closest","length","preventDefault","_toggleSeparatorVisibility","find","attr","each","i","enable","_validateSoftRules","filter","prev","next","hide","isPlainObject","keys","_append","_extendItem","messages","j","forEach","subItem","commands","uid","guid","_readState","_validateRules","tool","state","states","isFunction","append","args","trigger","grid","jQuery","Command","Class","MoveGroupCommand","exec","groupable","method","dir","_change","SortCommand","idx","dataSource","sort","field","_getCellField","multipleMode","sortable","mode","compare","splice","push","AddCommand","addRow","EditCommand","inCellMode","_editMode","editCell","editRow","DeleteCommand","removeRow","CopySelectionCommand","withHeaders","copySelectionToClipboard","SelectRowCommand","selectMode","Selectable","parseOptions","selectable","cell","SelectAllRowsCommand","rows","ClearSelectionCommand","clearSelection","ReorderRowCommand","newIndex","index","reorderRowTo","ExportPDFCommand","saveAsPDF","ExportExcelCommand","selection","exportSelectedToExcel","saveAsExcel","GridCommand","GroupsPager","DataSource","ObservableObject","tbodySupportsInnerHtml","support","tbodyInnerHtml","activeElement","_activeElement","Widget","outerWidth","_outerWidth","outerHeight","_outerHeight","getType","type","grep","isArray","Array","inArray","prototype","contains","math","Math","DOT","PROGRESS","ERROR","DATA_CELL","DATA_CELL_HIDDENINCLUDED","NAVROW","NAVCELL","ITEMROW","COLGROUP","HEADERCELLS","CARET_ALT_DOWN","CARET_ALT_RIGHT","CARET_ALT_RIGHT_CACHE","NS","EDIT","BEFOREEDIT","SAVE","REMOVE","DETAILINIT","FILTERMENUINIT","COLUMNMENUINIT","FILTERMENUOPEN","COLUMNMENUOPEN","CELLCLOSE","CHANGING","CHANGE","COLUMNHIDE","COLUMNSHOW","SAVECHANGES","DATABOUND","DETAILEXPAND","DETAILCOLLAPSE","ITEM_CHANGE","PAGE","PAGING","PASTE","SCROLL","SYNC","LOAD_START","LOAD_END","FOCUSED","HOVER","ACTIVE","FOCUSABLE","SELECTED","CHECKBOX","CHECKBOXINPUT","NORECORDSCLASS","LINK_CLASS","ICON_CLASS","SVG_ICON_CLASS","ORDER_CLASS","SORTED_CLASS","HEADER_CLASS","HEADER_COLUMN_MENU_CLASS","FILTER_MENU_CLASS","STICKY_CELL_CLASS","STICKY_HEADER_CLASS","STICKY_FOOTER_CLASS","STICKY_HEADER_NO_BORDER_CLASS","GROUPING_ROW","RESIZE","ROWRESIZE","COLUMNRESIZE","COLUMNREORDER","COLUMNLOCK","COLUMNUNLOCK","COLUMNSTICK","COLUMNUNSTICK","ROWREORDER","NAVIGATE","CLICK","MOUSEDOWN","MOUSEUP","MOUSEENTER","MOUSELEAVE","MOUSEMOVE","DUBLECLICK","HEIGHT","WIDTH","AUTO","TABINDEX","FUNCTION","STRING","NUMBER","BOTTOM","CONTAINER_FOR","FIELD","INPUT","INCELL","INLINE","OVERFLOW","SORT","GROUP_SORT","COLLAPSE","EXPAND","ID","PX","TR","DIV","ARIA_LABEL","ARIA_OWNS","ARIA_ROWCOUNT","ARIA_COLCOUNT","ARIA_COLINDEX","ARIA_ROWINDEX","ARIA_EXPANDED","ARIA_CHECKED","ARIA_ACTIVEDESCENDANT","ROLE","NONE","ROW","ROWGROUP","COLUMNHEADER","GRIDCELL","formatRegExp","whitespaceRegExp","nonDataCellsRegExp","RegExp","filterRowRegExp","COMMANDBUTTONTMPL","className","DEFAULTSELECTCOLUMNTMPL","size","ariaLabel","SELECTCOLUMNTMPL","SELECTCOLUMNHEADERTMPL","DRAGHANDLECOLUMNTMPL","DEFAULTHEADERTEMPLATE","isRtl","browser","isIE11","msie","version","isMac","test","navigator","userAgent","classNames","defaultBodyContextMenu","defaultHeadContextMenu","defaultGroupsContextMenu","Pager","useRanges","_omitPrefetch","totalPages","ceil","_collapsedTotal","pageSize","groupsTotal","VirtualScrollable","_refreshHandler","refresh","setDataSource","wrap","unbind","virtual","itemHeight","noop","prefetch","maxScrollHeight","wrapper","add","verticalScrollbar","off","clearTimeout","_timeout","_scrollingTimeout","drag","scrollbar","css","width","overflow","content","children","first","parent","on","_wheelScroll","_wrapper","kineticScrollNeeded","touch","UserEvents","allowSelection","start","e","capture","move","scrollTop","y","delta","scrollLeft","x","appendTo","_scroll","ctrlKey","wheelDeltaY","clientHeight","scrollHeight","delayLoading","currentTarget","rowHeight","skip","_rangeStart","height","innerHeight","isScrollingUp","_scrollbarTop","firstItemIndex","max","floor","lastItemOffset","lastItemIndex","_preventScroll","_prevScrollTop","_scrollTop","_scrolling","_fetch","setTimeout","_page","take","scrollToTop","_scrollTo","scrollToBottom","_scrollWrapperToTop","_scrollWrapperToBottom","_scrollWrapperOnColumnResize","initialScrollTop","scrollWidth","clientWidth","_wrapperScrolled","_isScrolledToBottom","_isWrapperScrolledToBottom","_isScrolledToTop","parseInt","itemIndex","rowIndex","position","result","rangeStart","scrollIntoView","row","container","containerHeight","containerScroll","elementOffset","offsetTop","elementHeight","offsetHeight","scrollingUp","currentSkip","fetching","webkitCorrection","webkit","total","_isGroupPaged","min","_fetching","callback","isGroupPaged","_groupRangeExists","inRange","range","repaintScrollbar","shouldScrollWrapper","totalHeight","maxHeight","wrapperElement","wasScrolledToBottom","addScrollBarHeight","offsetWidth","divElements","join","empty","cancel","page","attrEquals","attrName","attrValue","groupCells","count","stringifyAttributes","attributes","defaultCommands","save","themeColor","update","canceledit","excel","pdf","search","columns","fillMode","cursor","context","value","document","body","reorder","selector","source","dest","before","sourceIndex","eq","elements","lockedContent","attachCustomCommandEvent","commandName","click","replace","normalizeColumns","encoded","locked","parentIds","column","hidden","Function","_attributesFunction","isVisible","addHiddenStyle","footerAttributes","headerAttributes","headers","id","columnParent","parents","columnParents","inserted","setColumnVisibility","visible","setVisibility","show","removeHiddenStyle","setColumnMediaVisibility","setColumnMatchesMedia","_hideByMedia","matchesMedia","columnMatchesMedia","isUndefined","media","isCellVisible","style","display","visibleColumns","columnsWithMedia","minScreenWidth","Error","toJQuery","toArray","findColumnByField","moveCellsBetweenContainers","sources","leafs","destination","groups","sourcesDepth","depth","targetDepth","insertAfter","last","cells","rowSpan","addRowSpanValue","moveCells","updateCellIndex","thead","offset","allColumns","leafColumns","el","hasClass","columnPosition","temp","sourcePosition","columnVisiblePosition","ths","t","cellCounts","decorateCellWithClass","html","classes","match","cssClasses","pop","findReorderTarget","masterColumns","parentColumns","rtl","targetLocked","findParentColumnWithChildren","targetIndex","flatColumnsInDomOrder","flatColumns","lockedColumns","nonLockedColumns","targetParentContainerIndex","hiddenLeafColumnsCount","counter","sumWidths","cols","columnsWidth","colWidth","removeEmptyRows","emptyRowsCount","remove","mapColumnToCellRows","setLeftAndRightStyles","left","right","createColumnAttribute","attribute","property","addColumnAttribute","removeColumnAttribute","removeAttributeProperty","stickyColumns","sticky","visibleNonLockedColumns","visibleLockedColumns","visibleLeafColumns","visibleLeafExportColumns","values","title","childColumns","visibleChildColumns","getColumnsFields","editField","format","editor","editorOptions","label","leafDataCells","indexAttr","a","b","indexA","indexB","parentColumnsCells","headerRows","level","parentCellsWithChildren","prevCells","prevAll","colSpan","parentCell","getAttribute","childColumnsCells","colSpanAttr","child","appendContent","tbody","table","placeholder","tmp","$html","applyStylesFromKendoAttributes","_","appendChild","createElement","innerHTML","addClass","getValidCssClass","firstChild","replaceChild","kendoStyleAttrObject","normalizeCols","hasDetails","resizable","minWidth","colgroup","tableWidth","totalWidth","col","is","prepend","convertToObject","array","formatGroupValue","columnValues","groupValue","setCellVisibility","pad","classList","hideColumnCells","columnIndex","groupRows","hasSubgroups","showColumnCells","updateColspan","toAdd","toRemove","num","Grid","DataBoundWidget","_events","_element","_ariaId","_columns","_foreignKeyPromises","when","apply","then","_continueInit","_dataSource","_stickyColumns","_tbody","_thead","_rowResizing","_groupable","_toolbar","columnsToolbarButton","_globalColumnsMenu","_pageable","_setContentHeight","_templates","_navigatable","_initSelectableAggregates","_selectable","_statusBar","_clipboard","_paste","_details","_editable","_attachCustomCommandsEvent","_adaptiveColumns","_minScreenSupport","autoBind","fetch","_group","_groups","_footer","contextMenu","_initContextMenu","_resizeHandler","resize","notify","_showWatermarkOverlay","scrollableContent","scrollable","leftMostPosition","virtualScrollable","navigatable","toolbar","filterable","allowCopy","allowPaste","pageable","persistSelection","editable","encodeTitles","rowTemplate","altRowTemplate","statusBarTemplate","noRecords","reorderable","columnMenu","detailTemplate","columnResizeHandleWidth","mobile","loaderType","cancelDelete","confirmation","confirmDelete","selectRow","selectAllRows","reorderRowUp","reorderRowDown","reorderRowTop","reorderRowBottom","exportPdf","exportToExcelAll","exportToExcelSelection","exportToExcelSelectionNoHeaders","expandCollapseColumnHeader","groupHeader","ungroupHeader","itemsSelected","dragHandleLabel","toolbarLabel","groupingHeaderLabel","filterCellTitle","reorderableInstance","_destroyColumnAttachments","_navigatableTables","_headertables","pager","timer","_progressTimeOut","_collapseGroupsTimeOut","_endlessFetchTimeOut","_destroyGroupable","pasteHandler","pasteActionsDropDownList","clearArea","_selectedIds","copyHandler","updateClipBoardState","clearAreaHandler","_selectableAggregatesOptions","_resizeUserEvents","_resizeHandleDocumentClickHandler","_destroyRowResizing","_destroyVirtualScrollable","editableUserEvents","_lockedContentUserEvents","_destroyEditable","_progressHandler","_errorHandler","_clearSortClasses","_sortHandler","scrollables","lockedHeader","_removeLockedContainers","pane","_isMobile","minScreenResizeHandler","_detachColumnMediaResizeHandler","_draggableInstance","_draggableRowsInstance","tbodyContextMenu","theadContextMenu","lockedRowTemplate","lockedAltRowTemplate","footerTemplate","groupFooterTemplate","lockedGroupFooterTemplate","noRecordsTemplate","statusBar","footer","lockedTable","lockedFooter","_groupableClickHandler","_groupRows","_setContentWidthHandler","getOptions","deepExtend","initialData","_data","group","aggregate","transport","setOptions","currentOptions","mobileWrapper","roleSelector","after","removeClass","_setEvents","_items","includeGroupRows","tr","dataItems","n","resizeHandle","th","filterMenu","_aria","tbodyId","headerGroupId","footerGroupId","tableOwned","rowsCount","gridRole","_hasDetails","groupingHeader","gridId","_ariaGridId","tableTabindex","numberOfFixedRows","trailingColumns","_trailingColumns","virtualScroll","_ariaRowIndex","_ariaColumnIndex","role","_ariaHeaderFooter","_ariaLockedContent","_ariaGroupTitles","previousIndex","dataIndex","cellsIndex","dataVirtual","not","lockedHeaderRows","firstIndex","Number","MAX_VALUE","lastIndex","lockedLastIndex","previousVirtual","nextVirtual","eachHeaderCell","current","currentIndex","lockedParent","setAttribute","rowGroup","groupId","_ariaLocked","_cellId","lockedRows","ownedCells","_cellsIds","tableRows","_ariaAddHiddenColIndex","leafColsCount","_ariaRemoveHiddenColIndex","removeAttr","currentRow","numberOfHeaderRows","bodyRows","footerRows","totalNumberOfItems","previousItems","previousMaster","prefix","_createResizeHandle","headerWrap","ieCorrection","leftMargin","leftBorderWidth","top","indicatorWidth","halfResizeHandle","rtlCorrection","mozilla","parseFloat","_autoFitLeafColumn","_positionColumnResizeHandle","lockedHead","button","buttons","which","hasAttribute","_resizeHandleDocumentClick","_resetResizeHandleHeader","_hideResizeHandle","_positionColumnResizeHandleTouch","threshold","minHold","hold","resizeColumn","columnWidth","isLocked","isHidden","mobileOS","contentTable","header","columnMinWidth","minResizableWidth","gridWidth","constrain","_footerWidth","_scrollVirtualWrapperOnColumnResize","_applyLockedContainersWidth","_syncLockedContentHeight","_syncLockedHeaderHeight","_updateStickyColumns","_resizable","columnStart","isMobile","Resizable","handle","hint","location","rtlMultiplier","currentWidth","resizeend","newWidth","oldWidth","_addLockedRowResizing","_getMinRowHeight","minHeight","currentMinHeight","_cacheRowHeight","_cachedRowsHeight","_clearCachedRowsHeight","_mapCachedRowsHeight","input","ds","output","_rowResizerDblClick","newHeight","resizer","rowResizer","oldHeight","rowPair","pairMinHeight","_setupRowResizer","_attachRowResizerEvents","isIn","_getResizerTop","inner","paddingTop","getComputedStyle","_getResizerContainer","_createRowResizer","targetHeight","positionIntarget","offsetY","previousRow","_detachRowResizerEvents","_mapResizedRows","multiSelectionLocked","pairNew","pairMin","r","rowStart","rowResizing","_draggable","kendoDraggable","autoScroll","dragstart","dragend","_reorderable","kendoReorderable","draggable","dropFilter","dragOverContainers","lockable","inSameContainer","sourceParent","targetParent","_isLocked","change","oldIndex","reorderColumn","_reorderHeader","destPosition","sourceLockedColumnsCount","lockedColumnDepth","nonLockedColumnDepth","sourceLockedColumns","targetLockedColumns","_reorderContent","headerCol","footerCol","beforeVisibleColumn","visibleSources","destIndex","colSourceIndex","colDest","lockedCount","columnsArray","_findClosestVisibleColumnIndex","slice","_hasFilterRow","_hasVirtualColumns","reverse","closestVisibleColumn","leafIndex","autoFitColumn","_hasReorderableRows","_hasDragHandleColumn","_draggableRows","_checkBoxSelection","clickMoveClick","holdToDrag","showHintOnHold","preventOsHoldFeatures","clone","elm","innerText","cursorOffset","_reorderableRows","smartPosition","allowIcon","orientation","reorderDropCue","positionDropCue","dropTarget","firstCellLeft","getOffset","transform","externalDraggable","_triggerRowRorder","reorderRows","dataItem","pushMove","rowsLength","targetItem","_rowDropping","autoFitColumns","headerTable","leafCols","contentDiv","thWidth","visibleLocked","notGroupOrHierarchyCol","notGroupOrHierarchyVisibleCell","footerTable","tables","safari","oldColumnWidth","newColumnWidth","lockChanged","destColumn","groupHeaderColumnTemplateColumns","groupHeaderColumnTemplate","sourceColumns","_updateLockedCols","_updateCols","_updateColumnCellIndex","_updateColumnSorters","_renderGroupRows","_updateTablesWidth","_updateFirstColumnClass","lockColumn","unstickColumn","unlockColumn","stickColumn","_removeStickyAttributes","_removeStickyStyles","_anyStickyColumns","_updateStickyFilterCells","cellIndex","td","lockedColumnOffset","_modelForContainer","getByUid","_calculateColumnIndex","virtualOffset","useDoubleTapEditing","editContainer","_editContainer","_mousedownOnEditCell","supportDoubleTap","fastTap","isLockedCell","has","end","closeCell","_scrollVirtualWrapper","shouldCloseCell","_virtualColScroll","_belongsToGrid","_isVirtualInlineEditable","stopPropagation","_confirmation","model","isColumnEditable","_attachModelChange","_shouldClearEditableState","_clearEditableState","kendoEditable","fields","skipFocus","_isVirtualIncellEditable","_editableState","adjustRowHeight","_relatedRow","_syncLockedScroll","_adjustLockedHorizontalScrollBar","touchScroller","_adjustRowsHeight","table1","table2","diff","lockedHeigth","tableHeigth","syncTableHeight","_syncLockedFooterHeight","editView","_editCancelClickHandler","_editUpdateClickHandler","_detachModelChange","_destroyEditView","_editableIsClosing","close","_confirmDialog","purge","navigate","_modelChangeHandler","_modelChange","isCancel","dirtyFields","_displayCell","ns","storage","settings","Template","templateSettings","tmpl","template","_cellTmpl","_removeRow","schema","cancelRow","_removeGroupIfEmpty","idField","sync","_createPopupEditor","_createInlineEditor","_editCancelClick","_editUpdateClick","saveRow","_setCurrent","focusTable","_editFields","updateText","cancelText","updateIconClass","cancelIconClass","tempCommand","buttonsHTML","editMenuGuid","unescape","getCommand","_createButton","kendoWindow","modal","userTriggered","clearContainer","Form","buttonsTemplate","formData","_openPopUpEditor","windowEditor","windowOptions","_editAnimation","center","open","Editable","cancelChanges","_displayRow","valid","deferred","Deferred","reject","promise","resolve","related","newRow","nextRow","isSelected","isAlt","replaceWith","_showMessage","Confirm","preventScroll","closable","okText","done","fail","confirmDialog","confirm","_shouldMapHights","_isVirtualEditable","_virtualPageToTop","saveChanges","createAt","view","createAtBottom","toLowerCase","virtualEditable","serverPaging","_removeCurrent","_virtualAddRow","insert","_editModel","_firstEditableColumnIndex","_virtualAddRowAtBottom","_virtualAddRowAtTop","at","_virtualPageToBottom","_virtualPage","_clickAdd","_clickCancel","_clickExcel","_clickPdf","_pdfInitialized","_clickSave","_searchInput","_searchTimeOut","searchFields","expression","filters","logic","endless","_endlessPageSize","_pushExpression","_pasteToolbarDropDown","kendoDropDownList","dataTextField","dataValueField","_allowFilterPaste","isServerFiltering","serverFiltering","defaultOperators","string","number","date","enums","boolean","operator","modelInfo","reader","fieldInfo","parseFn","parse","_createClickHandler","_addClickHandler","_cancelClickHandler","_saveClickHandler","_excelClickHandler","_pdfClickHandler","_serachHandler","_attachToolbarClicks","prependTo","_processItems","kendoToolBar","navigateOnTab","tools","itemsCollectionHasSpacer","searchText","_processAttr","keyValue","replaceAll","attributeClassMatch","renderButton","_hasFooters","groupRow","collapseGroup","expandGroup","_attachGroupable","draggables","enabled","chrome","Groupable","groupContainer","draggableElements","allowDrag","enableContextMenu","removeGroup","_showUngroupedColumn","_hideGroupedColumns","_resetEndless","_addGroupableOptionsToHeader","colID","hideOnGroup","showColumn","hideColumn","_skip","_pageSize","_take","headerCell","columnOptions","columnFieldMap","headerCells","_headerCells","kendoGroupable","_removeGroupableOptionsFromHeader","removeData","_continuousItems","lockedItems","nonLockedItems","multi","notString","checkboxSelection","multiple","aria","toggleable","dragToSelect","changing","originalEvent","selectedValues","_persistSelectedRows","_uncheckCheckBoxes","_checkRows","_toggleHeaderCheckState","_calculateAggregatesForSelected","cellAggregates","_cellAggregates","useAllItems","relatedTarget","continuousItems","ignoreOverlapped","addIdToRanges","triggerChange","lastSelection","eventObject","keyCode","SPACEBAR","shiftKey","_deselectCheckRows","clear","_lastActive","LEFT","RIGHT","UP","DOWN","selectRange","_firstSelectee","toCompare","compareElements","_pasteReplaceHandler","plain","currentRowUid","currentField","uids","f","nextAll","_executePaste","_pasteInsertHandler","dataItemIndex","selectedUids","_getSelectedRowUids","selectedColumnFields","_getSelectedColumnFields","changedItems","startingIndex","c","j$1","set","dirty","j$2","_pasteKeyboardHandler","rowUid","clipBoardData","clipboardData","operation","getData","trimEnd","_currentRowIndex","_restoreCurrent","stopImmediatePropagation","tableClick","areaClipBoard","getTSV","includeHeaders","_createAreaClipBoard","execCommand","Event","metaKey","getSelection","toString","createRange","opacity","selected","delimeter","hasLockedCols","cellsOffset","lockedCols","inLockedArea","cellText","rowsOffset","getTitle","headerIndex","findIndex","_anyColumnHasMediaQuery","_setColumnsMediaVisibility","_attachColumnMediaResizeHandler","_columnsWithMediaQuery","_columnMediaResizeHandler","_onColumnMediaResize","_setContentMediaWidth","_setColumnMediaVisibility","_showColumnByMedia","_hideColumnByMedia","initiallyHidden","headerColumns","headerColgroup","headerColumnsCount","visibleHeaderColumnsCount","hiddenHeaderColumnsCount","totalHeaderWidth","currentHeaderWidth","colgroupChild","columnStyleWidth","hideMinScreenCols","screenWidth","innerWidth","screen","_iterateMinScreenCols","any","_setStickyColumns","filterCells","stickyStyle","updateStyles","visibleStickyColumns","stickyWidths","_calculateStickyWidths","_setStickyClassAttributes","_setStickyStyleAttributes","_setStickyStyles","initialLeftWidth","initialRightWidth","nextColumnLeft","nextColumnRight","fill","_sumColumnWidth","masterIndex","stickyLeft","stickyRight","childCols","childStickyWidths","cellClassRegExp","headerClassRegExp","footerClassRegExp","headerClassNoBorderRegExp","leafsCols","_getColumnHeader","groupHeaderColumnTemplateClass","_sumCurrentWidths","getSelectedData","selectedRanges","selectedRangeNames","selectedSingleItems","_mapSelectionToData","getSelectedDataByKeys","selectedKeyNames","columnMapHandler","get","ooxml","exporter","ExcelExporter","book","sheets","autoWidth","freezePane","exportData","sortHandler","exportDataSort","isExcelExportableColumn","_addRangeSelectionRows","_addSingleSelectionRows","workbook","Workbook","skipCustomHeight","toDataURLAsync","dataURI","saveAs","fileName","proxyURL","forceProxy","_setExporterColumns","_createExportRows","_rows","_dataRows","_prepareColumn","columnsFilter","ignoreOffset","curr","isRowSelection","nodeName","fieldAttr","indexOffset","_relatedCell","_parseSelectableAggregatesOptions","sum","average","earliest","latest","isTrue","isFalse","selectedData","cellsLength","columnFields","isCellSelection","numberAggregates","dateAggregates","booleanAggregates","$cell","hasCheckbox","hasWrappedCheckbox","Date","checked","prop","rangeSelectedAttr","modelId","allRows","selectedViewIds","ids","_updateCurrentAttr","nextId","descId","headerId","_current","_scrollCurrent","tableContainer","isInLockedContainer","isInContent","scrollableContainer","addBack","_rowVirtualIndex","preventTrigger","_filterFocusable","siblings","colspan","_virtualCellIndex","_lastCellIndex","_updateSelctCheckbox","nextCheckbox","focus","elementToLowercase","tagName","isHorizontal","elementOffsetDir","containerOffsetDir","abs","offsetLeft","bottomDistance","firefoxCorrection","edge","dataTables","headerTables","_tableFocus","_tableBlur","_tableKeyDown","_filterFocus","_findCellIndex","startIndex","reversed","_scrollToColumn","HOME","END","requestInProgress","canHandle","isDefaultPrevented","altKey","handled","F10","_focusToolbar","_moveUp","_moveDown","_moveRight","_moveLeft","PAGEDOWN","_handlePageDown","PAGEUP","_handlePageUp","_handleHome","_handleEnd","_handleSpaceKey","ENTER","F2","_handleEnterKey","ESC","_handleEscKey","TAB","_handleTabKey","focusable","currentTable","collapseRow","_moveColumn","_prevHorizontalCell","_tabNext","_horizontalContainer","expandRow","_nextHorizontalCell","_prevVerticalCell","_verticalContainer","_nextVerticalCell","_findVisibleCell","isLeft","ctrl","rowContainer","isInLockedTable","isInBody","filterFocusable","_handleEditing","active","isInCell","blur","_toggleCurrent","descriptors","aggregates","_canDrag","link","originalIndex","cellToFocus","_currentDataIndex","lockedColumnsCount","$newFocus","hiddenCount","prevUntil","offset$1","nextCell","originalRow","up","step","back","switchRow","isEdited","isIE","_initMobile","groupsContextMenu","head","mainOptions","_action","_buildStates","showOn","isEditable","isSelectable","isSortable","isRowReorderable","isGroupable","alwaysDisabled","hasSelection","isSorted","canMoveGroupPrev","canMoveGroupNext","commandOptions","_createPane","Pane","viewEngine","viewOptions","renderOnInit","wrapInSections","detachOnHide","detachOnDestroy","_scrollable","asLowerString","parseVirtualSettings","insertBefore","_createVirtualScrollable","_scrollLeft","isScrollingLeft","originalPageSize","_endlessFetchInProgress","_skipRerenderItemsCount","_cacheEditableState","_restoreEditableState","movable","one","_averageRowHeight","scroll","_focusEditable","loadStart","_progress","loadEnd","_onVirtualPaging","_isVirtualPopupEditable","editableState","editedModel","inlineMode","incellMode","virtualColumns","_getByUid","editedField","_canFocusEditable","isElementVisibleInWrapper","widget","widgetInstance","_renderNoRecordsContent","noRecordsElement","_setContentWidth","expander","hiddenDivClass","hiddenDiv","isNaN","footerWrap","contentWidth","nonLockedCols","nonLockedColsWidth","initialHeight","scrollableHeight","itemsCount","_rowHeight","_sum","_measures","currentRowHeight","_requestStart","_error","relatedRow","selectableRow","childCells","originalCells","tmpResult","pagerWrap","_groupPaging","_togglePagerVisibility","_wrapFooter","_appendLockedColumnFooter","footerRow","_appendCols","menuOptions","autoSize","clearAllFilters","columnsExpanderOptions","expanded","animation","hideExpanderIndicator","hideAutoSizeColumn","owner","closeCallback","componentType","kendoColumnMenu","_columnMenu","hasMultiColumnHeaders","hasLockableColumns","hasStickableColumns","stickable","initCallback","openCallback","stickCallback","unstickCallback","filterHandler","forceUnique","checkSource","stick","unstick","filtering","_hasFilterMenu","_filterable","filterInit","filterOpen","columnFilterable","kendoFilterMultiCheck","kendoFilterMenu","_filterRow","rowheader","_updateHeader","suggestDataSource","operators","customDataSource","cellOptions","delay","inputWidth","suggestionOperator","minLength","showOperators","kendoFilterCell","_sortable","sorterInstance","kendoColumnSorter","draggableColumns","initialColumns","len","normalizeHeaderCells","_updateColumnIDs","_checkboxClick","_headerCheckboxClick","_foreignKeyBindings","_fetchForeignKeyValues","_hasBoundForeignKey","checkBox","isSelecting","_tmpl","alt","skipGroupCells","classAttribute","compiledAttributes","rowTemplateFunc","paramName","getter","rowTemplateResult","dirtyCellTemplate","_dirtyCellTemplate","columnAttributes","colSpanAttributes","charAt","_headerCellText","headerTemplate","_dirtyIndicatorTemplate","useWithBlock","fieldValue","_virtualCols","considerNext","widths","sumOfWidths","colsToRender","firstColspan","lastColspan","hiddenColumns","widthOfHiddenColumns","virtualCols","columnLeafs","columnsLocked","groupHeaderColumnTemplateLockedColumns","groupHeaderColumnTemplateNonLockedColumns","_detailTmpl","_footerTmpl","g","_groupHeaderTmpl","lockedGroupHeaderColumnTemplate","_noRecordsTmpl","resultTemplate","scrollableNoGridHeightStyles","currentCustomTemplate","templateName","rowClass","scope","fieldsMap","_emptyAggregates","headerTemplateIndex","resultHtml","groupCellBuilder","groupCellLockedContentBuilder","stickyAttributes","templateFunctionStorage","templateFunctionCount","hasFiltering","columnsWithoutFiltering","_toggleDetails","omitAnimation","detailRow","expanding","masterRow","masterRowIndex","ariaLabelText","ariaExpandText","detailCell","toggle","correctIdx","classesRegEx","sectionRowIndex","_createHeaderCells","currentTh","isGroupedBy","outerHTML","_appendLockedColumnContent","spanIdx","skipHiddenCount","colOffset","detach","lockedCells","_appendLockedColumnHeader","filtercellCells","hasFilterRow","filterCellOffset","leafColumnsCount","removeRowSpanValue","syncHeight","hasTHead","headerContent","_updateHeadersAttr","_prepareColumns","filterRow","existingFilterRow","hasLockedColumns","_retrieveFirstColumn","parentRow","childRow","totalColSpan","_updateHeaderCols","_autoColumns","toJSON","_setRowCachedHeight","$row","cachedHeight","_rowsHtml","cachedHeights","_groupData","skipFooter","firstColumn","footerDefaults","_groupAggregatesDefaultObject","groupItems","headerData","footerData","subgroupsCount","_groupRowHtml","groupHeaderBuilder","skipColspan","skipLastGroup","isLockedTable","groupData","firstVisibleColumnGroupHeaderTemplate","groupHeaderTemplate","currentItems","_groupsState","isNew","excludeHeader","templateColspan","groupHtmlBuilder","_skippedGroups","shift","groupToCollapse","footerCount","showFooter","relatedGroup","groupCountAfterCollapse","groupUid","groupObject","_getGroupByUid","currentGroupCount","_calculateGroupsTotal","_serverGroupsTotal","_currentRangeStart","toHide","_groupToCollapse","footersVisibility","groupsCount","groupCountAfterExpand","groupCount","toggleVisibility","_firstDataItem","grouped","headerCellIndex","_columnVisibilitySetter","_setParentsVisibility","_updateContentWidth","predicate","p","originalColumn","columnLeafIndex","_buildSkeleton","loaderHTML","columnsCount","skeleton","progress","_resize","force","_isActiveInTable","contentScrollLeft","cachedItemsToSkip","isCurrentInHeader","_renderContent","_renderLockedContent","contentResized","resetTouchEvents","_restoreSelection","selectedRows","dataItemKey","vc","_cleanupDetailItems","endlessAppend","flatViewLength","flatView","groupRowLockedContentBuilder","groupRowBuilder","groupRowBuilderFunc","groupHeaderData","prevElement","newGroupRowElement","firstColumnGroupData","alwaysVisible","rows2","containers","containersLength","heights","offsetHeight1","offsetHeight2","row1","row2","direct","focusElement","isInputElement","isHeader","isInput","activeEl","halfHeight","includeAdditionalData","backslashEscapeQuotes","exportable","ExcelMixin","PDFMixin","_drawPDF_autoPageBreak","allPages","origBody","cont","toggleUnexportableColumns","paddingRight","_initPDFProgress","startingPage","draw","_destructive","pageNumber","pageNum","drawing","drawDOM","always","err","renderPage","restore","visibleInExport","visibleInExportOnly","_toggledDuringExport","_drawPDF","paperSize","doc","Group","exportPage","_drawPDFShadow","avoidLinks","loading","pb","kendoProgressBar","chunkCount","plugin"],"sources":["kendo.grid.js"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.data.js'), require('kendo.columnsorter.js'), require('kendo.editable.js'), require('kendo.window.js'), require('kendo.filtermenu.js'), require('kendo.filtercell.js'), require('kendo.columnmenu.js'), require('kendo.groupable.js'), require('kendo.pager.js'), require('kendo.selectable.js'), require('kendo.sortable.js'), require('kendo.reorderable.js'), require('kendo.resizable.js'), require('kendo.ooxml.js'), require('kendo.excel.js'), require('kendo.pane.js'), require('kendo.progressbar.js'), require('kendo.pdf.js'), require('kendo.dialog.js'), require('kendo.switch.js'), require('kendo.html.button.js'), require('kendo.textbox.js'), require('kendo.form.js'), require('kendo.toolbar.js'), require('kendo.icons.js'), require('kendo.menu.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.data', 'kendo.columnsorter', 'kendo.editable', 'kendo.window', 'kendo.filtermenu', 'kendo.filtercell', 'kendo.columnmenu', 'kendo.groupable', 'kendo.pager', 'kendo.selectable', 'kendo.sortable', 'kendo.reorderable', 'kendo.resizable', 'kendo.ooxml', 'kendo.excel', 'kendo.pane', 'kendo.progressbar', 'kendo.pdf', 'kendo.dialog', 'kendo.switch', 'kendo.html.button', 'kendo.textbox', 'kendo.form', 'kendo.toolbar', 'kendo.icons', 'kendo.menu'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendogrid = global.kendogrid || {}, global.kendogrid.js = factory()));\n})(this, (function () {\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            ui = kendo.ui,\n            ContextMenu = ui.ContextMenu,\n            extend = $.extend,\n            encode = kendo.htmlEncode;\n\n        var ACTION = \"action\";\n\n        var GridContextMenu = ContextMenu.extend({\n            init: function(element, options) {\n                var that = this;\n\n                ContextMenu.fn.init.call(that, element, options);\n\n                that._overrideTemplates();\n                that._extendItems();\n\n                that.bind(\"select\", that._onSelect.bind(that));\n                that.bind(\"open\", that._onOpen.bind(that));\n            },\n\n            _overrideTemplates: function() {\n                this.templates.sprite = function (ref) {\n                    var icon = ref.icon;\n                    var spriteCssClass = ref.spriteCssClass;\n\n                    return (\"\" + ((icon || spriteCssClass) ? kendo.ui.icon({ icon: encode(icon || \"\"), iconClass: encode(spriteCssClass || \"\") }) : ''));\n                };\n            },\n\n            defaultItems: {\n                \"separator\": { name: \"separator\", separator: true },\n                \"create\": { name: \"create\", text: \"Add\", icon: \"plus\", command: \"AddCommand\", rules: \"isEditable\" },\n                \"edit\": { name: \"edit\", text: \"Edit\", icon: \"pencil\", command: \"EditCommand\", rules: \"isEditable\" },\n                \"destroy\": { name: \"destroy\", text: \"Delete\", icon: \"trash\", command: \"DeleteCommand\", rules: \"isEditable\" },\n                \"select\": { name: \"select\", text: \"Select\", icon: \"table-body\", rules: \"isSelectable\", items: [\n                    { name: \"selectRow\", text: \"Row\", icon: \"table-row-groups\", command: \"SelectRowCommand\" },\n                    { name: \"selectAllRows\", text: \"All rows\", icon: \"grid\", command: \"SelectAllRowsCommand\" },\n                    { name: \"clearSelection\", text: \"Clear selection\", icon: \"table-unmerge\", softRules: \"hasSelection\", command: \"ClearSelectionCommand\" } ] },\n                \"copySelection\": { name: \"copySelection\", text: \"Copy selection\", icon: \"page-header-section\", rules: \"isSelectable\", softRules: \"hasSelection\", command: \"CopySelectionCommand\", options: \"withHeaders\" },\n                \"copySelectionNoHeaders\": { name: \"copySelectionNoHeaders\", text: \"Copy selection (No Headers)\", icon: \"file-txt\", rules: \"isSelectable\", softRules: \"hasSelection\", command: \"CopySelectionCommand\" },\n                \"paste\": { name: \"paste\", text: \"Paste (use CTRL/ + V)\", rules: \"allowPaste\", softRules: \"alwaysDisabled\", icon: \"clipboard\" },\n                \"reorderRow\": { name: \"reorderRow\", text: \"Reorder row\", icon: \"caret-alt-expand\", rules: \"isRowReorderable\", softRules: \"isSorted\", items: [\n                    { name: \"reorderRowUp\", text: \"Up\", icon: \"caret-alt-up\", command: \"ReorderRowCommand\", options: \"dir:up\" },\n                    { name: \"reorderRowDown\", text: \"Down\", icon: \"caret-alt-down\", command: \"ReorderRowCommand\", options: \"dir:down\" },\n                    { name: \"reorderRowTop\", text: \"Top\", icon: \"caret-alt-to-top\", command: \"ReorderRowCommand\", options: \"dir:top\" },\n                    { name: \"reorderRowBottom\", text: \"Bottom\", icon: \"caret-alt-to-bottom\", command: \"ReorderRowCommand\", options: \"dir:bottom\" }\n                ] },\n                \"exportPDF\": { name: \"exportPDF\", text: \"Export to PDF\", icon: \"file-pdf\", command: \"ExportPDFCommand\" },\n                \"exportExcel\": { name: \"exportExcel\", text: \"Export to Excel\", icon: \"file-excel\", items: [\n                    { name: \"exportToExcelAll\", text: \"All\", command: \"ExportExcelCommand\" },\n                    { name: \"exportToExcelSelection\", text: \"Selection\", command: \"ExportExcelCommand\", softRules: \"hasSelection\", options: \"selection,withHeaders\" },\n                    { name: \"exportToExcelSelectionNoHeaders\", text: \"Selection (No Headers)\", softRules: \"hasSelection\", command: \"ExportExcelCommand\", options: \"selection\" }\n                ] },\n                \"sortAsc\": { name: \"sortAsc\", text: \"Sort Ascending\", icon: \"sort-asc-small\", rules: \"isSortable\", command: \"SortCommand\", options: \"dir:asc\" },\n                \"sortDesc\": { name: \"sortDesc\", text: \"Sort Descending\", icon: \"sort-desc-small\", rules: \"isSortable\", command: \"SortCommand\", options: \"dir:desc\" },\n                \"moveGroupPrevious\": { name: \"moveGroupPrevious\", text: \"Move previous\", icon: \"arrow-left\", rules: \"isGroupable\", softRules: \"canMoveGroupPrev\", command: \"MoveGroupCommand\", options: \"dir:prev\" },\n                \"moveGroupNext\": { name: \"moveGroupNext\", text: \"Move next\", icon: \"arrow-right\", rules: \"isGroupable\", softRules: \"canMoveGroupNext\", command: \"MoveGroupCommand\", options: \"dir:next\" }\n                // \"filter\": { name: \"filter\", text: \"Filter\", icon: \"filter\", attr: { [kendo.attr(\"is-filter\")]: true }, items: [\n                //     { content: '<div class=\"k-columnmenu-item-wrapper\"><div class=\"k-columnmenu-item-content k-column-menu-filter\"><div class=\"k-filterable\"></div></div></div>' }\n                // ] },\n            },\n\n            events: ContextMenu.fn.events.concat([\n                ACTION\n            ]),\n\n            _onSelect: function(ev) {\n                var command = $(ev.item).data(\"command\");\n                var options = $(ev.item).data(\"options\");\n                    options = options ? options.split(\",\")\n                    .map(function (val) {\n                        var obj, obj$1;\n\n                        if (val.indexOf(\":\") > -1) {\n                            var ref = val.split(\":\");\n                            var key = ref[0];\n                            var val = ref[1];\n                            return ( obj = {}, obj[key || \"_\"] = val, obj );\n                        }\n\n                        return ( obj$1 = {}, obj$1[val] = true, obj$1 );\n                    })\n                    .reduce(function (acc, v) { return Object.assign(acc, v); }, {}) : {};\n\n                var target = $(ev.target);\n\n                if (!command) {\n                    return;\n                }\n\n                this.action({\n                    command: command,\n                    options: Object.assign(options, { target: target })\n                });\n            },\n\n            _onOpen: function(ev) {\n                var this$1$1 = this;\n\n                var menu = ev.sender,\n                    items = menu.options.items,\n                    elTarget = $(ev.event ? ev.event.target : null);\n\n                if ((!items && $.isEmptyObject(this.defaultItems)) || elTarget.closest(\".k-grid-column-menu\").length) {\n                    ev.preventDefault();\n                    return;\n                }\n\n                this._toggleSeparatorVisibility();\n\n                menu.element.find((\"[\" + (kendo.attr('soft-rules')) + \"]\")).each(function (i, item) {\n                    var rules = $(item).attr(kendo.attr('soft-rules')).split(\";\");\n                    menu.enable(item, this$1$1._validateSoftRules(rules, elTarget));\n                });\n            },\n\n            _toggleSeparatorVisibility: function() {\n                var that = this,\n                    items = that.element.find(\".k-item.k-separator\").filter(function (i, item) {\n                        var prev = $(item).prev(\".k-item:not(.k-separator)\");\n                        var next = $(item).next(\".k-item:not(.k-separator)\");\n\n                        return !(prev.length && next.length);\n                    });\n\n                items.hide();\n            },\n\n            _extendItems: function() {\n                var that = this,\n                    items = that.options.items,\n                    item, isBuiltInTool;\n\n                if (items && items.length) {\n                    for (var i = 0; i < items.length; i++) {\n                        item = items[i];\n                        isBuiltInTool = $.isPlainObject(item) && Object.keys(item).length === 1 && item.name;\n\n                        if (isBuiltInTool) {\n                            item = item.name;\n                        }\n\n                        if ($.isPlainObject(item)) {\n                            that._append(item);\n                        } else if (that.defaultItems[item]) {\n                            item = that.defaultItems[item];\n                            that._append(item);\n                        } else if (typeof(item) === \"string\") {\n                            item = { name: item, text: item, spriteCssClass: item, command: item + \"Command\" };\n                            that._append(item);\n                        }\n                    }\n                } else {\n                    for (var key in that.defaultItems) {\n                        item = that.defaultItems[key];\n                        that._append(item);\n                    }\n                }\n            },\n\n            _extendItem: function(item) {\n                var that = this,\n                    messages = that.options.messages,\n                    attr = item.attr || {};\n\n                if (item.command) {\n                    attr[kendo.attr(\"command\")] = item.command;\n                }\n\n                if (item.options) {\n                    attr[kendo.attr(\"options\")] = item.options;\n                }\n\n                if (item.softRules) {\n                    attr[kendo.attr(\"soft-rules\")] = item.softRules;\n                }\n\n                if (item.items) {\n                    for (var j = 0; j < item.items.length; j++) {\n                        item.items.forEach(function (subItem) {\n                            that._extendItem(subItem);\n                        });\n                    }\n                }\n\n                extend(item, {\n                    text: messages.commands[item.name],\n                    icon: item.icon || \"\",\n                    spriteCssClass: item.spriteCssClass || \"\",\n                    attr: attr,\n                    uid: kendo.guid()\n                });\n            },\n\n            _validateSoftRules: function(rules, target) {\n                var that = this;\n\n                if (!rules || !(rules && rules.length)) {\n                    return true;\n                }\n\n                for (var i = 0; i < rules.length; i++) {\n                    if (!this._readState(rules[i], target)) {\n                        return false;\n                    }\n                }\n\n                return true;\n            },\n\n            _validateRules: function(tool) {\n                var that = this,\n                    rules = tool.rules ? tool.rules.split(\";\") : [];\n\n                if (!rules.length) {\n                    return true;\n                }\n\n                for (var i = 0; i < rules.length; i++) {\n                    if (!this._readState(rules[i])) {\n                        return false;\n                    }\n                }\n\n                return true;\n            },\n\n            _readState: function(state, target) {\n                var that = this,\n                    states = that.options.states;\n\n                if (kendo.isFunction(states[state])) {\n                    return states[state](target);\n                } else {\n                    return states[state];\n                }\n            },\n\n            _append: function(item) {\n                var that = this;\n\n                that._extendItem(item);\n\n                if (that._validateRules(item)) {\n                    that.append(item);\n                }\n            },\n\n            action: function(args) {\n                this.trigger(ACTION, args);\n            }\n        });\n\n        kendo.ui.grid = kendo.ui.grid || {};\n\n        extend(kendo.ui.grid, {\n            ContextMenu: GridContextMenu\n        });\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            extend = $.extend,\n            Class = kendo.Class;\n\n        var Command = Class.extend({\n            init: function(options) {\n                this.options = options;\n                this.grid = options.grid;\n            }\n        });\n\n        var MoveGroupCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    groupable = grid.groupable,\n                    options = that.options,\n                    target = options.target.closest(\".k-chip\"),\n                    method = options.dir === \"next\" ? \"after\" : \"before\",\n                    position = options.dir === \"next\" ? target.next() : target.prev();\n\n                position[method](target);\n                groupable._change();\n            },\n        });\n\n        var SortCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    dataSource = grid.dataSource,\n                    sort = dataSource.sort() || [],\n                    options = that.options,\n                    dir = options.dir,\n                    field = grid._getCellField(options.target),\n                    multipleMode = grid.options.sortable.mode && grid.options.sortable.mode === \"multiple\",\n                    compare = grid.options.compare,\n                    length, idx;\n\n                if (multipleMode) {\n                    for (idx = 0, length = sort.length; idx < length; idx++) {\n                        if (sort[idx].field === field) {\n                            sort.splice(idx, 1);\n                            break;\n                        }\n                    }\n                    sort.push({ field: field, dir: dir, compare: compare });\n                } else {\n                    sort = [{ field: field, dir: dir, compare: compare }];\n                }\n\n                dataSource.sort(sort);\n            },\n        });\n\n        var AddCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid;\n\n                grid.addRow();\n            }\n        });\n\n        var EditCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    inCellMode = grid._editMode() === \"incell\",\n                    target = inCellMode ? that.options.target : that.options.target.closest(\"tr\");\n\n                if (inCellMode) {\n                    grid.editCell(target);\n                } else {\n                    grid.editRow(target);\n                }\n            }\n        });\n\n        var DeleteCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    target = that.options.target.closest(\"tr\");\n\n                grid.removeRow(target);\n            }\n        });\n\n        var CopySelectionCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    withHeaders = that.options.withHeaders;\n\n                grid.copySelectionToClipboard(withHeaders);\n            }\n        });\n\n        var SelectRowCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    selectMode = kendo.ui.Selectable.parseOptions(grid.options.selectable),\n                    target = that.options.target.closest(\"tr\");\n\n                grid.select(selectMode.cell ? target.find('td') : target);\n            }\n        });\n\n        var SelectAllRowsCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    selectMode = kendo.ui.Selectable.parseOptions(grid.options.selectable),\n                    rows = grid.items();\n\n                grid.select(selectMode.cell ? rows.find('td') : rows);\n            }\n        });\n\n        var ClearSelectionCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid;\n\n                grid.clearSelection();\n            }\n        });\n\n        var ReorderRowCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    dir = that.options.dir,\n                    target = that.options.target.closest(\"tr\"),\n                    index = target.index(),\n                    newIndex;\n\n                switch (dir) {\n                    case \"up\":\n                        newIndex = index - 1;\n                        break;\n                    case \"down\":\n                        newIndex = index + 2;\n                        break;\n                    case \"top\":\n                        newIndex = 0;\n                        break;\n                    case \"bottom\":\n                        newIndex = grid.items().length;\n                        break;\n                }\n\n                grid.reorderRowTo(target, newIndex);\n            }\n        });\n\n        var ExportPDFCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid;\n\n                grid.saveAsPDF();\n            }\n        });\n\n        var ExportExcelCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    selection = that.options.selection,\n                    withHeaders = that.options.withHeaders,\n                    grid = that.grid;\n\n                if (selection) {\n                    grid.exportSelectedToExcel(withHeaders);\n                } else {\n                    grid.saveAsExcel();\n                }\n            }\n        });\n\n        kendo.ui.grid = kendo.ui.grid || {};\n\n        extend(kendo.ui.grid, {\n            GridCommand: Command,\n            commands: {\n                SortCommand: SortCommand,\n                AddCommand: AddCommand,\n                EditCommand: EditCommand,\n                DeleteCommand: DeleteCommand,\n                CopySelectionCommand: CopySelectionCommand,\n                SelectRowCommand: SelectRowCommand,\n                SelectAllRowsCommand: SelectAllRowsCommand,\n                ClearSelectionCommand: ClearSelectionCommand,\n                ReorderRowCommand: ReorderRowCommand,\n                ExportPDFCommand: ExportPDFCommand,\n                ExportExcelCommand: ExportExcelCommand,\n                MoveGroupCommand: MoveGroupCommand\n            }\n        });\n    })(window.kendo.jQuery);\n\n    var __meta__ = {\n        id: \"grid\",\n        name: \"Grid\",\n        category: \"web\",\n        description: \"The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.\",\n        depends: [ \"data\", \"columnsorter\", \"sortable\", \"toolbar\", \"html.button\", \"icons\", \"menu\" ],\n        features: [ {\n            id: \"grid-editing\",\n            name: \"Editing\",\n            description: \"Support for record editing\",\n            depends: [ \"editable\", \"window\", \"textbox\", \"form\" ]\n        }, {\n            id: \"grid-filtering\",\n            name: \"Filtering\",\n            description: \"Support for record filtering\",\n            depends: [ \"filtermenu\" ]\n        }, {\n            id: \"grid-columnmenu\",\n            name: \"Column menu\",\n            description: \"Support for header column menu\",\n            depends: [ \"columnmenu\" ]\n        }, {\n            id: \"grid-grouping\",\n            name: \"Grouping\",\n            description: \"Support for grid grouping\",\n            depends: [ \"groupable\" ]\n        }, {\n            id: \"grid-filtercell\",\n            name: \"Row filter\",\n            description: \"Support for grid header filtering\",\n            depends: [ \"filtercell\" ]\n        }, {\n            id: \"grid-paging\",\n            name: \"Paging\",\n            description: \"Support for grid paging\",\n            depends: [ \"pager\" ]\n        }, {\n            id: \"grid-selection\",\n            name: \"Selection\",\n            description: \"Support for row selection\",\n            depends: [ \"selectable\" ]\n        }, {\n            id: \"grid-column-reorder\",\n            name: \"Column reordering\",\n            description: \"Support for column reordering\",\n            depends: [ \"reorderable\" ]\n        }, {\n            id: \"grid-column-resize\",\n            name: \"Column resizing\",\n            description: \"Support for column resizing\",\n            depends: [ \"resizable\" ]\n        }, {\n            id: \"grid-mobile\",\n            name: \"Grid adaptive rendering\",\n            description: \"Support for adaptive rendering\",\n            depends: [ \"dialog\", \"pane\", \"switch\" ]\n        }, {\n            id: \"grid-excel-export\",\n            name: \"Excel export\",\n            description: \"Export grid data as Excel spreadsheet\",\n            depends: [ \"excel\" ]\n        }, {\n            id: \"grid-pdf-export\",\n            name: \"PDF export\",\n            description: \"Export grid data as PDF\",\n            depends: [ \"pdf\", \"drawing\", \"progressbar\" ]\n        } ]\n    };\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            ui = kendo.ui,\n            DataSource = kendo.data.DataSource,\n            ObservableObject = kendo.data.ObservableObject,\n            tbodySupportsInnerHtml = kendo.support.tbodyInnerHtml,\n            activeElement = kendo._activeElement,\n            Widget = ui.Widget,\n            outerWidth = kendo._outerWidth,\n            outerHeight = kendo._outerHeight,\n            keys = kendo.keys,\n            getType = kendo.type,\n\n            isPlainObject = $.isPlainObject,\n            extend = $.extend,\n            map = $.map,\n            grep = $.grep,\n            isArray = Array.isArray,\n            inArray = $.inArray,\n            push = Array.prototype.push,\n            isFunction = kendo.isFunction,\n            encode = kendo.htmlEncode,\n            isEmptyObject = $.isEmptyObject,\n            contains = $.contains,\n            math = Math,\n\n            DOT = \".\",\n            PROGRESS = \"progress\",\n            ERROR = \"error\",\n            HIERARCHY_CELL_CLASS = \"k-hierarchy-cell\",\n            DATA_CELL = \":not(.k-group-cell):not([\" + kendo.attr(\"virtual\") + \"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left))):visible\",\n            DATA_CELL_HIDDENINCLUDED = \":not([\" + kendo.attr(\"virtual\") + \"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left)))\",\n            SELECTION_CELL_SELECTOR = \"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)\",\n            NAVROW = \"tr:not(.k-footer-template):visible\",\n            NAVCELL = \":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible\",\n            ITEMROW = \"tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible\",\n            COLGROUP = \"col:not(.k-group-col, .k-hierarchy-col)\",\n            HEADERCELLS = \"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)\",\n            CARET_ALT_DOWN = \"a[class*='-i-caret-alt-down']\",\n            CARET_ALT_RIGHT = \"a[class*='-i-caret-alt-right']\",\n            CARET_ALT_RIGHT_CACHE = CARET_ALT_RIGHT,\n            CARET_ALT_LEFT = \"a[class*='-i-caret-alt-left']\",\n            WRAPPER = \".k-grid\",\n            NS = \".kendoGrid\",\n            CONTENTRLOCKEDCONTAINER = \"k-grid-content-locked\",\n            GROUPCELLCLASS = \"k-group-cell\",\n\n            EDIT = \"edit\",\n            BEFOREEDIT = \"beforeEdit\",\n            SAVE = \"save\",\n            REMOVE = \"remove\",\n            DETAILINIT = \"detailInit\",\n            FILTERMENUINIT = \"filterMenuInit\",\n            COLUMNMENUINIT = \"columnMenuInit\",\n            FILTERMENUOPEN = \"filterMenuOpen\",\n            COLUMNMENUOPEN = \"columnMenuOpen\",\n            CELLCLOSE = \"cellClose\",\n            CHANGING = \"changing\",\n            CHANGE = \"change\",\n            COLUMNHIDE = \"columnHide\",\n            COLUMNSHOW = \"columnShow\",\n            SAVECHANGES = \"saveChanges\",\n            DATABOUND = \"dataBound\",\n            DETAILEXPAND = \"detailExpand\",\n            DETAILCOLLAPSE = \"detailCollapse\",\n            ITEM_CHANGE = \"itemchange\",\n            PAGE = \"page\",\n            PAGING = \"paging\",\n            PASTE = \"paste\",\n            SCROLL = \"scroll\",\n            SYNC = \"sync\",\n            LOAD_START = \"loadStart\",\n            LOAD_END = \"loadEnd\",\n\n            FOCUSED = \"k-focus\",\n            HOVER = \"k-hover\",\n            ACTIVE = \"k-active\",\n            FOCUSABLE = \":kendoFocusable\",\n            SELECTED = \"k-selected\",\n            CHECKBOX = \"k-checkbox\",\n            CHECKBOXINPUT = \"input[data-role='checkbox'].k-select-checkbox.\" + CHECKBOX,\n            NORECORDSCLASS = \"k-grid-norecords\",\n            LINK_CLASS = \"k-link\",\n            ICON_CLASS = \"k-icon\",\n            SVG_ICON_CLASS = \"k-svg-icon\",\n            ORDER_CLASS = \"k-sort-order\",\n            SORTED_CLASS = \"k-sorted\",\n            HEADER_CLASS = \"k-header\",\n            HEADER_COLUMN_MENU_CLASS = \"k-grid-column-menu\",\n            FILTER_MENU_CLASS = \"k-grid-filter-menu\",\n            STICKY_CELL_CLASS = \"k-grid-content-sticky\",\n            STICKY_HEADER_CLASS = \"k-grid-header-sticky\",\n            STICKY_FOOTER_CLASS = \"k-grid-footer-sticky\",\n            STICKY_HEADER_NO_BORDER_CLASS = \"k-grid-no-left-border\",\n            ROW_RESIZER = \"k-row-resizer\",\n            ROW_RESIZER_WRAP = \"k-resizer-wrap\",\n            GROUPING_ROW = \"k-grouping-row\",\n            RESIZE = \"resize\",\n            ROWRESIZE = \"rowResize\",\n            COLUMNRESIZE = \"columnResize\",\n            COLUMNREORDER = \"columnReorder\",\n            COLUMNLOCK = \"columnLock\",\n            COLUMNUNLOCK = \"columnUnlock\",\n            COLUMNSTICK = \"columnStick\",\n            COLUMNUNSTICK = \"columnUnstick\",\n            ROWREORDER = \"rowReorder\",\n            NAVIGATE = \"navigate\",\n            CLICK = \"click\",\n            MOUSEDOWN = \"mousedown\",\n            MOUSEUP = \"mouseup\",\n            MOUSEENTER = \"mouseenter\",\n            MOUSELEAVE = \"mouseleave\",\n            MOUSEMOVE = \"mousemove\",\n            DUBLECLICK = \"dblclick\",\n            HEIGHT = \"height\",\n            WIDTH = \"width\",\n            AUTO = \"auto\",\n            TABINDEX = \"tabIndex\",\n            FUNCTION = \"function\",\n            STRING = \"string\",\n            NUMBER = \"number\",\n            BOTTOM = \"bottom\",\n            CONTAINER_FOR = \"container-for\",\n            FIELD = \"field\",\n            INPUT = \"input\",\n            INCELL = \"incell\",\n            INLINE = \"inline\",\n            UNIQUE_ID = \"uid\",\n            MINCOLSPANVALUE = 1,\n            COLSPAN = \"colSpan\",\n            OVERFLOW = \"overflow\",\n            HIDDEN = \"hidden\",\n            SORT = \"sort\",\n            GROUP_SORT = \"group-sort\",\n            DELETECONFIRM = \"Are you sure you want to delete this record?\",\n            NORECORDS = \"No records available.\",\n            CONFIRMDELETE = \"Delete\",\n            CANCELDELETE = \"Cancel\",\n            COLLAPSE = \"Collapse\",\n            EXPAND = \"Expand\",\n            ID = \"id\",\n            PX = \"px\",\n            TR = \"tr\",\n            TD = \"td\",\n            DIV = \"div\",\n\n            ARIA_LABEL = \"aria-label\",\n            ARIA_OWNS = \"aria-owns\",\n            ARIA_ROWCOUNT = \"aria-rowcount\",\n            ARIA_COLCOUNT = \"aria-colcount\",\n            ARIA_CONTROLS = \"aria-controls\",\n            ARIA_COLINDEX = \"aria-colindex\",\n            ARIA_ROWINDEX = \"aria-rowindex\",\n            ARIA_EXPANDED = \"aria-expanded\",\n            ARIA_CHECKED = \"aria-checked\",\n            ARIA_ACTIVEDESCENDANT = \"aria-activedescendant\",\n            ROLE = \"role\",\n            NONE = \"none\",\n            ROW = \"row\",\n            ROWGROUP = \"rowgroup\",\n            COLUMNHEADER = \"columnheader\",\n            GRIDCELL = \"gridcell\",\n\n            formatRegExp = /(\\}|\\#)/ig,\n            templateHashRegExp = /#/ig,\n            whitespaceRegExp = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n            leftRegExp = new RegExp(\"(\\\\s*left\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n            rightRegExp = new RegExp(\"(\\\\s*right\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n            nonDataCellsRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-group-cell|k-hierarchy-cell)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n            filterRowRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-filter-row)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n            COMMANDBUTTONTMPL = function (ref) {\n               var className = ref.className;\n               var attr = ref.attr;\n               var text = ref.text;\n\n               return (\"<button type=\\\"button\\\" class=\\\"\" + className + \"\\\" \" + attr + \">\" + text + \"</button>\");\n        },\n            DEFAULTSELECTCOLUMNTMPL = function (size, ariaLabel) { return (\"<span class=\\\"k-checkbox-wrap\\\"><input tabindex=\\\"-1\\\" class=\\\"k-select-checkbox \" + CHECKBOX + \" \" + size + \" k-rounded-md\\\" data-role=\\\"checkbox\\\" aria-label=\\\"\" + ariaLabel + \"\\\" aria-checked=\\\"false\\\" type=\\\"checkbox\\\"></span>\"); },\n            SELECTCOLUMNTMPL = function (ref) {\n               var size = ref.size;\n\n               return DEFAULTSELECTCOLUMNTMPL(size, \"Select row\");\n        },\n            SELECTCOLUMNHEADERTMPL = function (ref) {\n               var size = ref.size;\n\n               return DEFAULTSELECTCOLUMNTMPL(size, \"Select all rows\");\n        },\n            DRAGHANDLECOLUMNTMPL = function () { return kendo.ui.icon(\"reorder\"); },\n            DEFAULTHEADERTEMPLATE = function (ref) {\n               var text = ref.text;\n\n               return (\"<span class=\\\"k-cell-inner\\\"><span class=\\\"k-link\\\"><span class=\\\"k-column-title\\\">\" + text + \"</span></span></span>\");\n        },\n            isRtl = false,\n            browser = kendo.support.browser;\n\n        var isIE11 = browser.msie && browser.version === 11;\n        var isMac = /Mac OS/.test(navigator.userAgent);\n        var classNames = {\n            content: \"k-content\",\n            scrollContainer: \"k-scroll-container\",\n            headerCellInner: \"k-cell-inner\"\n        };\n        var GroupsPager;\n\n        var defaultBodyContextMenu = [\n            \"copySelection\",\n            \"copySelectionNoHeaders\",\n            \"paste\",\n            \"separator\",\n            \"create\",\n            \"edit\",\n            \"destroy\",\n            \"select\",\n            \"separator\",\n            \"reorderRow\",\n            \"exportPDF\",\n            \"exportExcel\",\n            \"separator\"\n        ];\n\n        var defaultHeadContextMenu = [\n            \"sortAsc\",\n            \"sortDesc\",\n            \"separator\"\n        ];\n\n        var defaultGroupsContextMenu = [\n            \"moveGroupPrevious\",\n            \"moveGroupNext\",\n            \"separator\"\n        ];\n\n        if (ui.Pager) {\n            GroupsPager = ui.Pager.extend({\n                init: function(element, options) {\n                    ui.Pager.fn.init.call(this, element, extend(true, {}, options));\n                    this.dataSource.options.useRanges = true;\n                    this.dataSource._omitPrefetch = true;\n                },\n                options: {\n                    name: \"GroupsPager\"\n                },\n\n                totalPages: function() {\n                    var that = this;\n\n                    return Math.ceil((that._collapsedTotal() || 0) / (that.pageSize() || 1));\n                },\n                _collapsedTotal: function() {\n                    var dataSource = this.dataSource;\n                    return dataSource ? (dataSource.groupsTotal(true) || 0) : 0;\n                }\n            });\n        }\n\n        var VirtualScrollable = Widget.extend({\n            init: function(element, options) {\n                var that = this;\n\n                Widget.fn.init.call(that, element, options);\n                that._refreshHandler = that.refresh.bind(that);\n                that.setDataSource(options.dataSource);\n                that.wrap();\n            },\n\n            setDataSource: function(dataSource) {\n                var that = this;\n                if (that.dataSource) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler);\n                }\n                that.dataSource = dataSource;\n                that.dataSource.bind(CHANGE, that._refreshHandler);\n                that.dataSource.options.useRanges = true;\n                that.dataSource.options.virtual = true;\n            },\n\n            options: {\n                name: \"VirtualScrollable\",\n                itemHeight: $.noop,\n                prefetch: true,\n                maxScrollHeight: 250000\n            },\n\n            events: [\n                PAGING,\n                PAGE,\n                SCROLL,\n                LOAD_START,\n                LOAD_END\n            ],\n\n            destroy: function() {\n                var that = this;\n\n                Widget.fn.destroy.call(that);\n\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n                that.wrapper.add(that.verticalScrollbar).off(NS);\n\n                clearTimeout(that._timeout);\n                if (that._scrollingTimeout) {\n                    clearTimeout(that._scrollingTimeout);\n                }\n\n                if (that.drag) {\n                    that.drag.destroy();\n                    that.drag = null;\n                }\n                that.wrapper = that.element = that.verticalScrollbar = null;\n                that._refreshHandler = null;\n            },\n\n            wrap: function() {\n                var that = this,\n                    // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n                    scrollbar = kendo.support.scrollbar() + 1,\n                    element = that.element,\n                    wrapper;\n\n                element.css( {\n                    width: AUTO,\n                    overflow: \"hidden\"\n                }).css((isRtl ? \"padding-left\" : \"padding-right\"), scrollbar);\n                that.content = element.children().first();\n                wrapper = that.wrapper = that.content.wrap('<div class=\"k-virtual-scrollable-wrap\"/>')\n                                    .parent()\n                                    .on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n                that._wrapper();\n\n                if (kendo.support.kineticScrollNeeded || kendo.support.touch) {\n                    that.wrapper.css(\"touch-action\", NONE);\n                    that.drag = new kendo.UserEvents(that.wrapper, {\n                        global: true,\n                        allowSelection: true,\n                        start: function(e) {\n                            e.sender.capture();\n                        },\n                        move: function(e) {\n                            that.verticalScrollbar.scrollTop(that.verticalScrollbar.scrollTop() - e.y.delta);\n                            kendo.scrollLeft(wrapper, kendo.scrollLeft(wrapper) - e.x.delta);\n                            e.preventDefault();\n                        }\n                    });\n                }\n\n                that.verticalScrollbar = $('<div class=\"k-scrollbar k-scrollbar-vertical\" />')\n                                            .css({\n                                                width: scrollbar\n                                            }).appendTo(element)\n                                            .on(\"scroll\" + NS, that._scroll.bind(that));\n            },\n\n            _wrapper: function() {\n                var that = this;\n\n                if (isIE11) {\n                    //scrolling the virtual scrollbar to the bottom and then\n                    //scrolling the horizontal content scrollbar does not fire the \"scroll\" event\n                    //seems like a problem in IE 11 only (after version 11.0.9600.18860)\n                    //https://github.com/telerik/kendo-ui-core/issues/3779\n                    that.wrapper.css({\n                        \"overflow-y\": SCROLL\n                    });\n\n                    //hide the wrapper behind the virtual scrollbar\n                    that.element.css((isRtl ? \"padding-left\" : \"padding-right\"), 0);\n                }\n            },\n\n            _wheelScroll: function(e) {\n                if (e.ctrlKey) {\n                    return;\n                }\n\n                var scrollbar = this.verticalScrollbar,\n                    scrollTop = scrollbar.scrollTop(),\n                    delta = kendo.wheelDeltaY(e);\n\n                if (delta && !(delta > 0 && scrollTop === 0) && !(delta < 0 && scrollTop + scrollbar[0].clientHeight == scrollbar[0].scrollHeight)) {\n                    e.preventDefault();\n                    this.verticalScrollbar.scrollTop(scrollTop + (-delta));\n                }\n            },\n\n            _scroll: function(e) {\n                var that = this,\n                    delayLoading = !that.options.prefetch,\n                    scrollTop = e.currentTarget.scrollTop,\n                    dataSource = that.dataSource,\n                    rowHeight = that.itemHeight,\n                    skip = dataSource.skip() || 0,\n                    start = that._rangeStart || skip,\n                    height = that.element.innerHeight(),\n                    isScrollingUp = !!(that._scrollbarTop && that._scrollbarTop > scrollTop),\n                    firstItemIndex = math.max(math.floor(scrollTop / rowHeight), 0),\n                    lastItemOffset = isScrollingUp ? math.ceil(height / rowHeight) : math.floor(height / rowHeight),\n                    lastItemIndex = math.max(firstItemIndex + lastItemOffset, 0);\n\n                if (that._preventScroll) {\n                    that._preventScroll = false;\n                    return;\n                }\n                that._prevScrollTop = that._scrollTop;\n                that._scrollTop = scrollTop - (start * rowHeight);\n                that._scrollbarTop = scrollTop;\n\n                that._scrolling = delayLoading;\n\n                if (!that._fetch(firstItemIndex, lastItemIndex, isScrollingUp)) {\n                    that.wrapper[0].scrollTop = that._scrollTop;\n                }\n\n                that.trigger(SCROLL);\n\n                if (delayLoading) {\n                    if (that._scrollingTimeout) {\n                        clearTimeout(that._scrollingTimeout);\n                    }\n\n                    that._scrollingTimeout = setTimeout(function() {\n                        that._scrolling = false;\n                        that._page(that._rangeStart, that.dataSource.take());\n                    }, 100);\n                }\n            },\n\n            scrollToTop: function() {\n                this._scrollTo(0);\n            },\n\n            scrollToBottom: function() {\n                var scrollbar = this.verticalScrollbar;\n                this._scrollTo(scrollbar[0].scrollHeight - scrollbar.height());\n            },\n\n            _scrollWrapperToTop: function() {\n                this.wrapper.scrollTop(0);\n            },\n\n            _scrollWrapperToBottom: function() {\n                this.wrapper.scrollTop(this.wrapper[0].scrollHeight);\n            },\n\n            _scrollWrapperOnColumnResize: function() {\n                var that = this;\n                var wrapper = this.wrapper;\n                var initialScrollTop = wrapper.scrollTop();\n\n                if (wrapper[0].scrollWidth > wrapper[0].clientWidth) {\n                    if ((!that._wrapperScrolled && initialScrollTop) || that._isScrolledToBottom()) {\n                        wrapper.scrollTop(initialScrollTop + kendo.support.scrollbar());\n                        that._scrollTop = wrapper.scrollTop();\n                        that._wrapperScrolled = true;\n                    }\n                } else if (that._wrapperScrolled) {\n                    if (!that._isWrapperScrolledToBottom()) {\n                        wrapper.scrollTop(initialScrollTop - kendo.support.scrollbar());\n                        that._scrollTop = wrapper.scrollTop();\n                    }\n\n                    that._wrapperScrolled = false;\n                }\n            },\n\n            _scrollTo: function(scrollTop) {\n                var that = this;\n                var scrollbar = that.verticalScrollbar;\n\n                if (scrollbar.scrollTop() !== scrollTop) {\n                    that._preventScroll = true;\n                }\n\n                that.wrapper.scrollTop(scrollTop);\n                that._scrollTop = that.wrapper.scrollTop();\n\n                scrollbar.scrollTop(scrollTop);\n                that._scrollbarTop = scrollbar.scrollTop();\n            },\n\n            _isScrolledToTop: function() {\n                return this.verticalScrollbar.scrollTop() === 0;\n            },\n\n            _isScrolledToBottom: function() {\n                var scrollbar = this.verticalScrollbar;\n                var scrollTop = scrollbar.scrollTop();\n\n                return (scrollTop > 0 && scrollTop >= parseInt(scrollbar[0].scrollHeight - scrollbar.height(), 10));\n            },\n\n            _isWrapperScrolledToBottom: function() {\n                var wrapper = this.wrapper;\n\n                return (wrapper.scrollTop() >= parseInt(wrapper[0].scrollHeight - wrapper.height(), 10));\n            },\n\n            itemIndex: function(rowIndex) {\n                var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n\n                return rangeStart + rowIndex;\n            },\n\n            position: function(index) {\n                var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n                var pageSize = this.dataSource.pageSize();\n                var result;\n\n                if (index > rangeStart) {\n                    result = index - rangeStart;\n                } else {\n                    result = rangeStart - index - 1;\n                }\n\n                return result > pageSize ? pageSize : result;\n            },\n\n            scrollIntoView: function(row) {\n                var container = this.wrapper[0];\n                var containerHeight = container.clientHeight;\n                var containerScroll = !this._isScrolledToBottom() ? (this._scrollTop || container.scrollTop) : container.scrollTop;\n                var elementOffset = row[0].offsetTop;\n                var elementHeight = row[0].offsetHeight;\n\n                if (containerScroll > elementOffset) {\n                    this.verticalScrollbar[0].scrollTop -= containerHeight / 2;\n                } else if (elementOffset + elementHeight >= containerScroll + containerHeight) {\n                    this.verticalScrollbar[0].scrollTop += containerHeight / 2;\n                }\n            },\n\n            _fetch: function(firstItemIndex, lastItemIndex, scrollingUp) {\n                var that = this,\n                    dataSource = that.dataSource,\n                    itemHeight = that.itemHeight,\n                    take = dataSource.take(),\n                    rangeStart = that._rangeStart || dataSource.skip() || 0,\n                    currentSkip = math.floor(firstItemIndex / take) * take,\n                    fetching = false,\n                    prefetchAt = 0.33;\n                var scrollbar = that.verticalScrollbar;\n                var webkitCorrection = browser.webkit ? 1 : 0;\n                var total = dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total();\n\n                if (firstItemIndex < rangeStart) {\n\n                    fetching = true;\n                    rangeStart = math.max(0, lastItemIndex - take);\n                    that._scrollTop = scrollbar.scrollTop() - (rangeStart * itemHeight);\n                    that._page(rangeStart, take);\n\n                } else if (lastItemIndex >= rangeStart + take && !scrollingUp) {\n\n                    fetching = true;\n                    rangeStart = math.min(firstItemIndex, total - take);\n\n                    //ensure the scrollbar can be scrolled to bottom with mouse drag\n                    if (scrollbar.scrollTop() >= scrollbar[0].scrollHeight - scrollbar[0].offsetHeight - webkitCorrection) {\n                        that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight;\n                    } else if (that.dataSource._isGroupPaged() && firstItemIndex >= total - take) {\n                        that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight - (that._scrollTop - that._prevScrollTop);\n                    } else {\n                        that._scrollTop = itemHeight;\n                    }\n\n                    that._page(rangeStart, take);\n\n                } else if (!that._fetching && that.options.prefetch) {\n\n                    if (firstItemIndex < (currentSkip + take) - take * prefetchAt && firstItemIndex > take) {\n                        dataSource.prefetch(currentSkip - take, take, $.noop);\n                    }\n                    if (lastItemIndex > currentSkip + take * prefetchAt) {\n                        dataSource.prefetch(currentSkip + take, take, $.noop);\n                    }\n\n                }\n                return fetching;\n            },\n\n            fetching: function() {\n                return this._fetching;\n            },\n\n            _page: function(skip, take, callback) {\n                var that = this,\n                    delayLoading = !that.options.prefetch,\n                    dataSource = that.dataSource,\n                    isGroupPaged = dataSource._isGroupPaged();\n                callback = isFunction(callback) ? callback : $.noop;\n\n                if (that.trigger(PAGING, { skip: skip, take: take })) {\n                    return;\n                }\n\n                clearTimeout(that._timeout);\n                that._fetching = true;\n                that._rangeStart = skip;\n\n                if ((isGroupPaged && dataSource._groupRangeExists(skip, skip + take)) || (!isGroupPaged && dataSource.inRange(skip, take))) {\n                    that.trigger(LOAD_START);\n\n                    dataSource.range(skip, take, function() {\n                        that.trigger(LOAD_END);\n                        callback();\n                        that.trigger(PAGE);\n                    }, \"page\");\n                } else {\n                    if (!delayLoading) {\n                        that.trigger(LOAD_START);\n                    }\n\n                    that._timeout = setTimeout(function() {\n                        if (!that._scrolling) {\n\n                            if (delayLoading) {\n                                that.trigger(LOAD_START);\n                            }\n\n                            dataSource.range(skip, take, function() {\n                                that.trigger(LOAD_END);\n                                callback();\n                                that.trigger(PAGE);\n                            });\n                        }\n                    }, 100);\n                }\n            },\n\n            repaintScrollbar: function(shouldScrollWrapper) {\n                var that = this,\n                    maxHeight = that.options.maxScrollHeight,\n                    dataSource = that.dataSource,\n                    scrollbar = !kendo.support.kineticScrollNeeded ? kendo.support.scrollbar() : 0,\n                    wrapperElement = that.wrapper[0],\n                    totalHeight,\n                    idx,\n                    itemHeight;\n                var wasScrolledToBottom = that._isScrolledToBottom();\n\n                itemHeight = that.itemHeight = that.options.itemHeight() || 0;\n\n                var addScrollBarHeight = (wrapperElement.scrollWidth > wrapperElement.offsetWidth) ? scrollbar : 0;\n\n                totalHeight = (dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total()) * itemHeight + addScrollBarHeight;\n\n                var divElements = $(new Array(math.floor(totalHeight / maxHeight) + 1).join('<div></div>'))\n                    .css({\n                        width: \"1px\",\n                        height: (maxHeight + \"px\")\n                    });\n\n                if (totalHeight % maxHeight) {\n                    divElements = divElements.add($(\"<div></div>\").css({\n                        width: \"1px\",\n                        height: (((totalHeight % maxHeight)) + \"px\")\n                    }));\n                }\n\n                that.verticalScrollbar.empty().append(divElements);\n\n                if (wasScrolledToBottom && !that._isScrolledToBottom() && !that.dataSource._isGroupPaged()) {\n                    that.scrollToBottom();\n                }\n\n                if (typeof(that._scrollTop) !== \"undefined\" && !!shouldScrollWrapper) {\n                    wrapperElement.scrollTop = that._scrollTop;\n                    that._scrollWrapperOnColumnResize();\n                }\n            },\n\n            refresh: function(e) {\n                var that = this,\n                    dataSource = that.dataSource,\n                    rangeStart = that._rangeStart;\n                var action = (e || {}).action;\n                var shouldScrollWrapper = that._isScrolledToBottom() || !action || (action !== ITEM_CHANGE && action !== REMOVE && action !== SYNC);\n\n                that.trigger(LOAD_END);\n                clearTimeout(that._timeout);\n\n                that.repaintScrollbar(shouldScrollWrapper);\n\n                if (that.drag) {\n                    that.drag.cancel();\n                }\n\n                if (typeof(rangeStart) !== \"undefined\" && !that._fetching) { // we are rebound from outside local range should be reset\n                    if (!action || (action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\")) {\n                        that._rangeStart = dataSource.skip();\n                    }\n\n                    if (dataSource.page() === 1 && (!action || (action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\" && action !== \"collapseGroup\"))) {\n                        // reset the scrollbar position if datasource is filtered\n                        that.verticalScrollbar[0].scrollTop = 0;\n                    }\n                }\n\n                that._fetching = false;\n            }\n        });\n\n        function attrEquals(attrName, attrValue) {\n            return \"[\" + kendo.attr(attrName) + \"=\" + attrValue + \"]\";\n        }\n\n        function groupCells(count) {\n            return new Array(count + 1).join('<td class=\"k-table-td k-group-cell\">&nbsp;</td>');\n        }\n\n        function cellsExcludingSpecialColumns(cells) {\n            return cells.filter(function (i,cell) {\n                var $cell = $(cell);\n                var hasCheckbox = $cell.children(\".k-select-checkbox\").length > 0;\n                var hasWrappedCheckbox = $cell.find(\"> .k-checkbox-wrap > .k-select-checkbox\").length > 0;\n                return !$cell.hasClass(\"k-drag-cell\") && !$cell.hasClass(\"k-command-cell\") && !hasCheckbox && !hasWrappedCheckbox;\n            });\n        }\n\n        function stringifyAttributes(attributes) {\n            var attr,\n                result = \" \";\n\n            if (attributes) {\n                if (typeof attributes === STRING) {\n                    return attributes;\n                }\n\n                for (attr in attributes) {\n                    if (attributes[attr] !== '') {\n                        result += attr + '=\"' + attributes[attr] + '\"';\n                    }\n                }\n            }\n            return result;\n        }\n\n        var defaultCommands = {\n            create: {\n                text: \"Add new record\",\n                className: \"k-grid-add\",\n                iconClass: \"k-i-plus\"\n            },\n            cancel: {\n                text: \"Cancel changes\",\n                className: \"k-grid-cancel-changes\",\n                iconClass: \"k-i-cancel\"\n            },\n            save: {\n                text: \"Save changes\",\n                className: \"k-grid-save-changes\",\n                iconClass: \"k-i-check\"\n            },\n            destroy: {\n                text: \"Delete\",\n                className: \"k-grid-remove-command\",\n                iconClass: \"k-i-x\"\n            },\n            edit: {\n                text: \"Edit\",\n                className: \"k-grid-edit-command\",\n                iconClass: \"k-i-pencil\",\n                themeColor: \"primary\"\n            },\n            update: {\n                text: \"Save\",\n                className: \"k-grid-save-command\",\n                iconClass: \"k-i-save\",\n                themeColor: \"primary\"\n            },\n            canceledit: {\n                text: \"Cancel\",\n                className: \"k-grid-cancel-command\",\n                iconClass: \"k-i-cancel-outline\"\n            },\n            excel: {\n                text: \"Export to Excel\",\n                className: \"k-grid-excel\",\n                iconClass: \"k-i-file-excel\"\n            },\n            pdf: {\n                text: \"Export to PDF\",\n                className: \"k-grid-pdf\",\n                iconClass: \"k-i-file-pdf\"\n            },\n            search: {\n                text: \"Search...\",\n                className: \"k-grid-search\"\n            },\n            columns: {\n                text: \"Columns\",\n                type: \"button\",\n                icon: \"columns\",\n                fillMode: \"flat\",\n                overflow: \"never\",\n                className: \"k-grid-column-menu\",\n                attr: {\n                    \"aria-haspopup\": \"menu\"\n                }\n            }\n        };\n\n        function cursor(context, value) {\n            $('th, th .k-grid-filter-menu, th .k-link', context)\n                .add(document.body)\n                .css('cursor', value);\n        }\n\n        function reorder(selector, source, dest, before, count) {\n            var sourceIndex = source;\n            source = $();\n            count = count || 1;\n            for (var idx = 0; idx < count; idx++) {\n                source = source.add(selector.eq(sourceIndex + idx));\n            }\n\n            if (typeof dest == \"number\") {\n                source[before ? \"insertBefore\" : \"insertAfter\"](selector.eq(dest));\n            } else {\n                source.appendTo(dest);\n            }\n        }\n\n        function elements(lockedContent, content, filter) {\n            return $(lockedContent).add(content).find(filter);\n        }\n\n        function attachCustomCommandEvent(context, container, commands) {\n            var idx,\n                length,\n                command,\n                commandName;\n\n            commands = !isArray(commands) ? [commands] : commands;\n\n            for (idx = 0, length = commands.length; idx < length; idx++) {\n                command = commands[idx];\n\n                if (isPlainObject(command) && command.click) {\n                    commandName = command.name || command.text;\n                    container.on(CLICK + NS, \".k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"), { commandName: commandName }, command.click.bind(context));\n                }\n            }\n        }\n\n        function normalizeColumns(columns, encoded, hide, locked, parentIds) {\n            return map(columns, function(column) {\n                column = typeof column === STRING ? { field: column } : column;\n\n                var hidden;\n                column.parentIds = parentIds;\n\n                if (column.attributes instanceof Function) {\n                    column._attributesFunction = column.attributes;\n                }\n\n                if (!isVisible(column) || hide) {\n                    column.attributes = addHiddenStyle(column.attributes);\n                    column.footerAttributes = addHiddenStyle(column.footerAttributes);\n                    column.headerAttributes = addHiddenStyle(column.headerAttributes);\n                    hidden = true;\n                }\n\n                var uid = kendo.guid();\n                if (locked && !column.locked) {\n                    column.locked = locked;\n                }\n\n                column.headerAttributes = extend({ headers: parentIds }, column.headerAttributes);\n                if (!column.headerAttributes.id) {\n                    column.headerAttributes = extend({ id: uid }, column.headerAttributes);\n                    column.uid = uid;\n                } else {\n                    column.uid = uid = column.headerAttributes.id;\n                }\n\n                if (column.columns) {\n                    column.columns = normalizeColumns(column.columns, encoded, hidden, column.locked, parentIds ? (parentIds + \" \" + uid) : uid);\n                }\n                return extend({ encoded: encoded, hidden: hidden, locked: locked }, column);\n            });\n        }\n\n        function columnParent(column, columns) {\n            var parents = [];\n            columnParents(column, columns, parents);\n            return parents[parents.length - 1];\n        }\n\n        function columnParents(column, columns, parents) {\n            parents = parents || [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (column === columns[idx]) {\n                    return true;\n                } else if (columns[idx].columns) {\n                    var inserted = parents.length;\n                    parents.push(columns[idx]);\n                    if (!columnParents(column, columns[idx].columns, parents)) {\n                        parents.splice(inserted, parents.length - inserted);\n                    } else {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        }\n\n        function setColumnVisibility(column, visible) {\n            setVisibility(column, visible, visible);\n        }\n\n        function setVisibility(column, visible, show) {\n            var method = show ? removeHiddenStyle : addHiddenStyle;\n            column.hidden = !visible;\n            column.attributes = method(column.attributes);\n            column.footerAttributes = method(column.footerAttributes);\n            column.headerAttributes = method(column.headerAttributes);\n        }\n\n\n        function setColumnMediaVisibility(column, visible) {\n            setColumnMatchesMedia(column);\n            var hideByMedia = column._hideByMedia;\n            setVisibility(column, visible, hideByMedia ? column.matchesMedia : visible);\n        }\n\n        function setColumnMatchesMedia(column) {\n            column.matchesMedia = columnMatchesMedia(column);\n        }\n\n        function columnMatchesMedia(column) {\n            return column && (isUndefined(column.media) || (!isUndefined(column.media) && kendo.matchesMedia(column.media)));\n        }\n\n        function isCellVisible() {\n            return this.style.display !== NONE;\n        }\n\n        function isElementVisible(element) {\n            return $(element)[0].style.display !== NONE;\n        }\n\n        function isVisible(column) {\n            return visibleColumns([column]).length > 0;\n        }\n\n        function visibleColumns(columns) {\n            return grep(columns, function(column) {\n                var result = !column.hidden && column.matchesMedia !== false;\n\n                if (result && column.columns) {\n                    result = visibleColumns(column.columns).length > 0;\n                }\n                return result;\n            });\n        }\n\n        function columnsWithMedia(columns) {\n            var result = [];\n            var column;\n\n            for (var i = 0; i < columns.length; i++) {\n                column = columns[i];\n\n                if (!isUndefined(column.media)) {\n                    if (!isUndefined(column.minScreenWidth)) {\n                        throw new Error(\"Using 'media' and 'minScreenWidth' options at the same time is not supported.\");\n                    }\n\n                    result.push(column);\n                }\n\n                if (column.columns) {\n                    result = result.concat(columnsWithMedia(column.columns));\n                }\n            }\n\n            return result;\n        }\n\n        function isUndefined(value) {\n            return typeof value === \"undefined\";\n        }\n\n        function toJQuery(elements) {\n            return $(elements).map(function() { return this.toArray(); });\n        }\n\n        function updateCellRowSpan(cell, columns, sourceLockedColumnsCount) {\n            var lockedColumnDepth = depth(lockedColumns(columns));\n            var nonLockedColumnDepth = depth(nonLockedColumns(columns));\n\n            var rowSpan = cell.rowSpan;\n            if (sourceLockedColumnsCount) {\n                if (lockedColumnDepth > nonLockedColumnDepth) {\n                    cell.rowSpan = (rowSpan - (lockedColumnDepth - nonLockedColumnDepth)) || 1;\n                } else {\n                    cell.rowSpan = rowSpan + (nonLockedColumnDepth - lockedColumnDepth);\n                }\n            } else {\n                if (lockedColumnDepth > nonLockedColumnDepth) {\n                    cell.rowSpan = rowSpan + (lockedColumnDepth - nonLockedColumnDepth);\n                } else {\n                    cell.rowSpan = (rowSpan - (nonLockedColumnDepth - lockedColumnDepth)) || 1;\n                }\n            }\n        }\n\n        function findColumnByField(columns, field) {\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].field == field) {\n                    return columns[i];\n                }\n            }\n        }\n\n        function moveCellsBetweenContainers(sources, target, leafs, columns, container, destination, groups, action) {\n            var sourcesDepth = depth(sources);\n            var targetDepth = depth([target]);\n\n            if (sourcesDepth > targetDepth) {\n                var groupCells = new Array(groups + 1).join('<th class=\"k-group-cell k-header k-table-th\" scope=\"col\">&nbsp;</th>');\n                var rows = destination.children(\":not(.k-filter-row)\");\n                $(new Array((sourcesDepth - targetDepth) + 1).join(\"<tr class='k-table-row'>\" + groupCells + \"</tr>\")).insertAfter(rows.last());\n            }\n\n            addRowSpanValue(destination, sourcesDepth - targetDepth);\n\n            moveCells(leafs, columns, container, destination, action);\n        }\n\n        function updateCellIndex(thead, columns, offset) {\n            offset = offset || 0;\n\n            var position;\n            var cell;\n            var allColumns = columns;\n            columns = leafColumns(columns);\n\n            var cells = {};\n            var rows = thead.find(\">tr:not(.k-filter-row)\");\n\n            var filter = function() {\n                var el = $(this);\n                return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n            };\n\n            for (var idx = 0, length = columns.length; idx < length; idx++) {\n                position = columnPosition(columns[idx], allColumns);\n\n                if (!cells[position.row]) {\n                    cells[position.row] = rows.eq(position.row)\n                        .find(DOT + HEADER_CLASS)\n                        .filter(filter);\n                }\n\n                cell = cells[position.row].eq(position.cell);\n                cell.attr(kendo.attr(\"index\"), offset + idx);\n            }\n\n\n            return columns.length;\n        }\n\n        function depth(columns) {\n            var result = 1;\n            var max = 0;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].columns) {\n                    var temp = depth(columns[idx].columns);\n                    if (temp > max) {\n                        max = temp;\n                    }\n                }\n            }\n            return result + max;\n        }\n\n        function moveCells(leafs, columns, container, destination, action) {\n            var sourcePosition = columnVisiblePosition(leafs[0], columns);\n\n            var ths = container.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row).children(\"th.k-header:not(.k-group-cell)\");\n\n            var t = $();\n            var sourceIndex = sourcePosition.cell;\n            var idx;\n\n            for (idx = 0; idx < leafs.length; idx++) {\n                t = t.add(ths.eq(sourceIndex + idx));\n            }\n\n            destination.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row)[action](t);\n\n            var children = [];\n            for (idx = 0; idx < leafs.length; idx++) {\n                if (leafs[idx].columns) {\n                    children = children.concat(leafs[idx].columns);\n                }\n            }\n\n            if (children.length) {\n                moveCells(children, columns, container, destination, action);\n            }\n        }\n\n        function columnPosition(column, columns, row, cellCounts) {\n            var result;\n            var idx;\n\n            row = row || 0;\n            cellCounts = cellCounts || {};\n            cellCounts[row] = cellCounts[row] || 0;\n\n            for (idx = 0; idx < columns.length; idx++) {\n               if (columns[idx] == column) {\n                    result = { cell: cellCounts[row], row: row };\n                    break;\n               } else if (columns[idx].columns) {\n                   result = columnPosition(column, columns[idx].columns, row + 1, cellCounts);\n                   if (result) {\n                        break;\n                   }\n               }\n\n               cellCounts[row]++;\n            }\n            return result;\n        }\n        function findParentColumnWithChildren(columns, index, source, rtl) {\n            var target;\n            var locked = !!source.locked;\n            var targetLocked;\n\n            do {\n                target = columns[index];\n                index += rtl ? 1 : -1;\n                targetLocked = !!target.locked;\n            } while (target && index > -1 && index < columns.length && target != source && !target.columns && targetLocked === locked);\n\n            return target;\n        }\n\n        function decorateCellWithClass(html) {\n            var element = html;\n            var classes = element.match(/class=[\"][^\"]+/g);\n            if (classes) {\n                var cssClasses = classes[0].split('\\\"').pop();\n                element = element.replace(cssClasses, cssClasses + \" k-table-td\");\n            } else {\n                element = element.replace(\"<td\",\"<td class='k-table-td'\");\n            }\n\n            return element;\n        }\n\n        function findReorderTarget(columns, target, source, before, masterColumns) {\n            if (target.columns) {\n                target = target.columns;\n                return target[before ? 0 : target.length - 1];\n            } else {\n                var parent = columnParent(target, columns);\n                var parentColumns;\n\n                if (parent) {\n                    parentColumns = parent.columns;\n                } else {\n                    parentColumns = columns;\n                }\n\n                var index = inArray(target, parentColumns);\n                if (index === 0 && before) {\n                    index++;\n                } else if ((index == parentColumns.length - 1 && !before) || (!source.locked && !target.columns && !before)) {\n                    index--;\n                } else if (index > 0 || (index === 0 && !before)) {\n                    index++;\n                }\n\n                var sourceIndex = inArray(source, parentColumns);\n                target = findParentColumnWithChildren(parentColumns, index, source, sourceIndex > index);\n                var targetIndex = inArray(target, masterColumns);\n                if (target.columns && (!targetIndex || targetIndex === parentColumns.length - 1)) {\n                    return null;\n                }\n\n                if (target && target != source && target.columns) {\n                    return findReorderTarget(columns, target, source, before, masterColumns);\n                }\n            }\n            return null;\n        }\n\n        function columnVisiblePosition(column, columns, row, cellCounts) {\n            var result;\n            var idx;\n\n            row = row || 0;\n            cellCounts = cellCounts || {};\n            cellCounts[row] = cellCounts[row] || 0;\n\n            for (idx = 0; idx < columns.length; idx++) {\n               if (columns[idx] == column) {\n                    result = { cell: cellCounts[row], row: row };\n                    break;\n               } else if (columns[idx].columns) {\n                   result = columnVisiblePosition(column, columns[idx].columns, row + 1, cellCounts);\n                   if (result) {\n                        break;\n                   }\n               }\n\n               if (!columns[idx].hidden) {\n                   cellCounts[row]++;\n               }\n            }\n            return result;\n        }\n\n        function flatColumnsInDomOrder(columns) {\n            var result = flatColumns(lockedColumns(columns));\n            return result.concat(flatColumns(nonLockedColumns(columns)));\n        }\n\n        function targetParentContainerIndex(flatColumns, columns, sourceIndex, targetIndex) {\n            var column = flatColumns[sourceIndex];\n            var target = flatColumns[targetIndex];\n\n            var parent = columnParent(column, columns);\n            columns = parent ? parent.columns : columns;\n\n            return inArray(target, columns);\n        }\n\n        function flatColumns(columns) {\n            var result = [];\n            var children = [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                result.push(columns[idx]);\n                if (columns[idx].columns) {\n                    children = children.concat(columns[idx].columns);\n                }\n\n            }\n            if (children.length) {\n                result = result.concat(flatColumns(children));\n            }\n            return result;\n        }\n\n        function hiddenLeafColumnsCount(columns) {\n            var counter = 0;\n            var column;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                column = columns[idx];\n\n                if (column.columns) {\n                    counter += hiddenLeafColumnsCount(column.columns);\n                } else if (column.hidden) {\n                    counter++;\n                }\n            }\n            return counter;\n        }\n\n        function sumWidths(cols) {\n            var width = 0;\n\n            for (var idx = 0, length = cols.length; idx < length; idx++) {\n                if (!cols[idx].hidden) {\n                    width += parseInt(cols[idx].width, 10);\n                }\n            }\n\n            return width;\n        }\n\n        function columnsWidth(cols) {\n            var colWidth, width = 0;\n\n            for (var idx = 0, length = cols.length; idx < length; idx++) {\n                colWidth = cols[idx].style.width;\n                if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                    width += parseInt(colWidth, 10);\n                }\n            }\n\n            return width;\n        }\n\n        function removeRowSpanValue(container, count) {\n            var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n            var rowSpan;\n            for (var idx = 0; idx < cells.length; idx++) {\n                rowSpan = cells[idx].rowSpan;\n                if (rowSpan > 1) {\n                    cells[idx].rowSpan = (rowSpan - count) || 1;\n                }\n            }\n        }\n\n        function addRowSpanValue(container, count) {\n            var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n            for (var idx = 0; idx < cells.length; idx++) {\n                cells[idx].rowSpan += count;\n            }\n        }\n\n        function removeEmptyRows(container) {\n            var rows = container.find(\"tr:not(.k-filter-row)\");\n\n            var emptyRowsCount = rows.filter(function() {\n                return !$(this).children().length;\n            }).remove().length;\n\n            var cells = rows.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n            for (var idx = 0; idx < cells.length; idx++) {\n                if (cells[idx].rowSpan > 1) {\n                    cells[idx].rowSpan -= emptyRowsCount;\n                }\n            }\n            return rows.length - emptyRowsCount;\n        }\n\n        function mapColumnToCellRows(columns, cells, rows, rowIndex, offset) {\n            var idx, row, length, children = [];\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                row = rows[rowIndex] || [];\n                row.push(cells.eq(offset + idx));\n                rows[rowIndex] = row;\n\n                if (columns[idx].columns) {\n                    children = children.concat(columns[idx].columns);\n                }\n            }\n\n            if (children.length) {\n                mapColumnToCellRows(children, cells, rows, rowIndex + 1, offset + columns.length);\n            }\n        }\n\n        function setLeftAndRightStyles(element, left, right) {\n            element.css({\n                \"left\": left,\n                \"right\": right\n            });\n        }\n\n        function createColumnAttribute(column, attribute, property) {\n            column[attribute] = column[attribute] || {};\n            column[attribute][property] = column[attribute][property] || \"\";\n        }\n\n        function addColumnAttribute(column, attribute, property, value) {\n            createColumnAttribute(column, attribute, property);\n\n            if (column[attribute][property] !== \"\") {\n                column[attribute][property] += \" \" + value;\n            } else {\n                column[attribute][property] = value;\n            }\n        }\n\n        function removeColumnAttribute(column, attribute, property, value, removeAttributeProperty) {\n            createColumnAttribute(column, attribute, property);\n            if (removeAttributeProperty) {\n                delete column[attribute][property];\n            } else {\n                column[attribute][property] = column[attribute][property].replace(value, \"\");\n            }\n        }\n\n        function lockedColumns(columns) {\n            return grep(columns, function(column) {\n                return column.locked;\n            });\n        }\n\n        function nonLockedColumns(columns) {\n            return grep(columns, function(column) {\n                return !column.locked;\n            });\n        }\n\n        function stickyColumns(columns) {\n            return grep(columns, function(column) {\n                return column.sticky && !column.locked;\n            });\n        }\n\n        function visibleStickyColumns(columns) {\n            return grep(columns, function(column) {\n                return column.sticky && !column.locked && isVisible(column);\n            });\n        }\n\n        function visibleNonLockedColumns(columns) {\n            return grep(columns, function(column) {\n                return !column.locked && isVisible(column);\n            });\n        }\n\n        function visibleLockedColumns(columns) {\n            return grep(columns, function(column) {\n                return column.locked && isVisible(column);\n            });\n        }\n\n        function visibleLeafColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].hidden) {\n                    continue;\n                }\n\n                if (columns[idx].columns) {\n                    result = result.concat(visibleLeafColumns(columns[idx].columns));\n                } else {\n                    result.push(columns[idx]);\n                }\n            }\n\n            return result;\n        }\n\n        function visibleLeafExportColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].hidden) {\n                    continue;\n                }\n\n                if (columns[idx].columns) {\n                    result = result.concat(visibleLeafColumns(columns[idx].columns));\n                } else {\n                    result.push({\n                        field: columns[idx].field,\n                        width: columns[idx].width,\n                        values: columns[idx].values,\n                        title: columns[idx].title\n                    });\n                }\n            }\n\n            return result;\n        }\n\n        function childColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].columns) {\n                    result = result.concat(columns[idx].columns);\n                }\n            }\n\n            return result;\n        }\n\n        function visibleChildColumns(columns) {\n            var result = childColumns(columns);\n\n            result = result.filter(function(e) {\n                return !e.hidden;\n            });\n\n            return result;\n        }\n\n        function leafColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (!columns[idx].columns) {\n                    result.push(columns[idx]);\n                    continue;\n                }\n                result = result.concat(leafColumns(columns[idx].columns));\n            }\n\n            return result;\n        }\n\n        function getColumnsFields(columns) {\n            var result = [];\n            columns = leafColumns(columns);\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (typeof columns[idx] === \"string\") {\n                    result.push(columns[idx]);\n                } else if (columns[idx].field) {\n                    result.push(columns[idx].field);\n                }\n            }\n            return result;\n        }\n\n        function editField(column) {\n            return {\n                field: column.field,\n                title: column.title,\n                format: column.format,\n                editor: column.editor,\n                values: column.values,\n                editorOptions: extend(true, { format: column.format }, column.editorOptions),\n                label: column.title || column.field || \"\"\n            };\n        }\n\n        function leafDataCells(container) {\n            var rows = container.find(\">tr:not(.k-filter-row)\");\n\n            var filter = function() {\n                var el = $(this);\n                return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n            };\n\n            var cells = $();\n            if (rows.length > 1) {\n                cells = rows.find(\"th\")\n                    .filter(filter)\n                    .filter(function() { return this.rowSpan > 1; });\n            }\n\n            cells = cells.add(rows.last().find(\"th\").filter(filter));\n\n            var indexAttr = kendo.attr(\"index\");\n            cells.sort(function(a, b) {\n                a = $(a);\n                b = $(b);\n\n                var indexA = a.attr(indexAttr);\n                var indexB = b.attr(indexAttr);\n\n                if (indexA === undefined$1) {\n                    indexA = $(a).index();\n                }\n                if (indexB === undefined$1) {\n                    indexB = $(b).index();\n                }\n\n                indexA = parseInt(indexA, 10);\n                indexB = parseInt(indexB, 10);\n                return indexA > indexB ? 1 : (indexA < indexB ? -1 : 0);\n            });\n\n            return cells;\n        }\n\n        function parentColumnsCells(cell) {\n            var container = cell.closest(\"table\");\n            var result = $().add(cell);\n\n            var row = cell.closest(TR);\n            var headerRows = container.find(\"tr:not(.k-filter-row)\");\n            var level = headerRows.index(row);\n            if (level > 0) {\n                var parent = headerRows.eq(level - 1);\n                var parentCellsWithChildren = parent.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").filter(function() {\n                    return !$(this).attr(\"rowspan\");\n                });\n\n                var offset = 0;\n                var index = row.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").index(cell);\n\n                var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\").filter(function() {\n                    return this.colSpan > 1;\n                });\n\n                for (var idx = 0; idx < prevCells.length; idx++) {\n                    offset += prevCells[idx].colSpan || 1;\n                }\n\n                index += Math.max(offset - 1, 0);\n\n                offset = 0;\n                for (idx = 0; idx < parentCellsWithChildren.length; idx++) {\n                    var parentCell = parentCellsWithChildren.eq(idx);\n                    if (parentCell.attr(\"data-colspan\")) {\n                        offset += parentCell[0].getAttribute(\"data-colspan\");\n                    } else {\n                        offset += 1;\n                    }\n                    if (index >= idx && index < offset) {\n                        result = parentColumnsCells(parentCell).add(result);\n                        break;\n                    }\n                }\n            }\n            return result;\n        }\n\n        function childColumnsCells(cell) {\n            var container = cell.closest(\"thead\");\n            var result = $().add(cell);\n\n            var row = cell.closest(TR);\n            var headerRows = container.find(\"tr:not(.k-filter-row)\");\n            var level = headerRows.index(row) + cell[0].rowSpan;\n            var colSpanAttr = kendo.attr(\"colspan\");\n\n            if (level <= headerRows.length - 1) {\n                var child = row.next();\n                var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n                var idx;\n\n                prevCells = prevCells.filter(function() {\n                    return !this.rowSpan || this.rowSpan === 1;\n                });\n\n                var offset = 0;\n\n                for (idx = 0; idx < prevCells.length; idx++) {\n                    offset += parseInt(prevCells.eq(idx).attr(colSpanAttr), 10) || 1;\n                }\n\n                var cells = child.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n                var colSpan = parseInt(cell.attr(colSpanAttr), 10) || 1;\n\n                idx = 0;\n\n                while (idx < colSpan) {\n                    child = cells.eq(idx + offset);\n                    result = result.add(childColumnsCells(child));\n                    var value = parseInt(child.attr(colSpanAttr), 10);\n                    if (value > 1) {\n                        colSpan -= value - 1;\n                    }\n                    idx++;\n                }\n            }\n\n            return result;\n        }\n\n        function appendContent(tbody, table, html, size) {\n            var placeholder,\n                tmp = tbody;\n\n            if (tbodySupportsInnerHtml) {\n                var $html = $(html);\n                kendo.applyStylesFromKendoAttributes($html, [\"display\", \"left\", \"right\"]);\n                tbody.empty();\n                $html.each(function (_, el) { return tbody[0].appendChild(el); });\n            } else {\n                placeholder = document.createElement(DIV);\n                placeholder.innerHTML = \"<table class='k-grid-table k-table'><tbody class='k-table-tbody'>\" + html + \"</tbody></table>\";\n                $(placeholder).find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", size));\n                tbody = placeholder.firstChild.firstChild;\n                table[0].replaceChild(tbody, tmp[0]);\n                tbody = $(tbody);\n            }\n            return tbody;\n        }\n\n        function addHiddenStyle(attr) {\n            attr = attr || {};\n            var kendoStyleAttrObject = {};\n            kendoStyleAttrObject[kendo.attr(\"style-display\")] = \"none\";\n\n            return extend({}, attr, kendoStyleAttrObject);\n        }\n\n        function hasHiddenStyle(attr) {\n            attr = attr || {};\n\n            return !!attr[kendo.attr(\"style-display\")];\n        }\n\n        function removeHiddenStyle(attr) {\n            attr = attr || {};\n            delete attr[kendo.attr(\"style-display\")];\n\n            return attr;\n        }\n\n        function normalizeCols(table, visibleColumns, hasDetails, groups, resizable) {\n            var colgroup = table.find(\">colgroup\"),\n                tableWidth = table.width(),\n                width,\n                minWidth,\n                parsedWidth,\n                totalWidth = visibleColumns.reduce(function (total, col) { return total += parseInt(col.width, 10); }, 0),\n                cols = map(visibleColumns, function(column, i) {\n                        width = column.width;\n                        if (width && parseInt(width, 10) !== 0) {\n                            parsedWidth = parseInt(width, 10);\n                            if (tableWidth > totalWidth && (typeof width === NUMBER || width.indexOf(PX) > -1) && resizable && !colgroup.length) {\n                                minWidth = tableWidth / visibleColumns.length;\n                                return kendo.format((\"<col \" + (kendo.attr('style-width')) + \"=\\\"{0}\\\"/>\"), minWidth + PX);\n                            }\n                            return kendo.format((\"<col \" + (kendo.attr('style-width')) + \"=\\\"{0}\\\"/>\"), typeof width === STRING ? width : width + PX);\n                        }\n\n                        return \"<col />\";\n                    });\n\n            if (hasDetails || colgroup.find(\".k-hierarchy-col\").length) {\n                cols.splice(0, 0, '<col class=\"k-hierarchy-col\" />');\n            }\n\n            if (colgroup.length) {\n                colgroup.remove();\n            }\n\n            colgroup = $(new Array(groups + 1).join('<col class=\"k-group-col\">') + cols.join(\"\"));\n            kendo.applyStylesFromKendoAttributes(colgroup, [\"width\"]);\n\n            if (!colgroup.is(\"colgroup\")) {\n                colgroup = $(\"<colgroup/>\").append(colgroup);\n            }\n\n            table.prepend(colgroup);\n        }\n\n        function normalizeHeaderCells(container, columns) {\n            var lastIndex = 0;\n            var idx , len;\n            var th = container.find(\"th:not(.k-group-cell)\");\n\n            for (idx = 0, len = columns.length; idx < len; idx ++) {\n                if (columns[idx].locked) {\n                    th.eq(idx).insertBefore(th.eq(lastIndex));\n                    th = container.find(\"th:not(.k-group-cell)\");\n                    lastIndex ++;\n                }\n            }\n        }\n\n        function convertToObject(array) {\n            var result = {},\n                item,\n                idx,\n                length;\n\n            for (idx = 0, length = array.length; idx < length; idx++) {\n                item = array[idx];\n                result[item.value] = item.text;\n            }\n\n            return result;\n        }\n\n        function formatGroupValue(value, format, columnValues, encoded) {\n            var isForeignKey = columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0],\n                groupValue = isForeignKey ? convertToObject(columnValues)[value] : value;\n\n            groupValue = groupValue != null ? groupValue : \"\";\n\n            return format ? kendo.format(format, groupValue) : (encoded === false ? groupValue : kendo.htmlEncode(groupValue));\n        }\n\n        function setCellVisibility(cells, index, visible) {\n            var pad = 0,\n                state,\n                cell = cells[pad];\n\n            while (cell) {\n                state = visible ? true : cell.style.display !== NONE;\n\n                if (visible && cell.classList.contains(\"k-hidden\")) {\n                    cell.classList.remove(\"k-hidden\");\n                }\n\n                if (state && !nonDataCellsRegExp.test(cell.className) && --index < 0) {\n                    cell.style.display = visible ? \"\" : NONE;\n                    break;\n                }\n\n                cell = cells[++pad];\n            }\n        }\n\n        function hideColumnCells(rows, columnIndex) {\n            var idx = 0,\n                length = rows.length,\n                cell, row;\n\n            for ( ; idx < length; idx += 1) {\n                row = rows.eq(idx);\n                if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                    cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                    cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n                } else {\n                    if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                        cell = $(cell);\n                        cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n                        cell.find(\"col\").eq(columnIndex).remove();\n                        row = cell.find(TR).first();\n                    }\n\n                    setCellVisibility(row[0].cells, columnIndex, false);\n                }\n            }\n        }\n\n        function groupRows(data) {\n            var result = [];\n            var item;\n\n            for (var idx = 0; idx < data.length; idx++) {\n                item = data[idx];\n                if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                    break;\n                }\n\n                result.push(item);\n\n                if (item.hasSubgroups) {\n                    result = result.concat(groupRows(item.items));\n                }\n            }\n\n            return result;\n        }\n\n        function groupFooters(data) {\n            var result = [];\n            var item;\n\n            for (var idx = 0; idx < data.length; idx++) {\n                item = data[idx];\n                if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                    break;\n                }\n\n                if (item.hasSubgroups) {\n                    result = result.concat(groupFooters(item.items));\n                }\n\n                result.push(item.aggregates);\n            }\n\n            return result;\n        }\n\n        function showColumnCells(rows, columnIndex) {\n            var idx = 0,\n                length = rows.length,\n                cell, row, columns;\n\n            for ( ; idx < length; idx += 1) {\n                row = rows.eq(idx);\n                if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                    cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                    cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n                } else {\n                    if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                        cell = $(cell);\n                        cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n                        normalizeCols(cell.find(\">form>table\"), visibleColumns(columns), false, 0);\n                        row = cell.find(TR).first();\n                    }\n\n                    setCellVisibility(row[0].cells, columnIndex, true);\n                }\n            }\n        }\n\n        function updateColspan(toAdd, toRemove, num) {\n            num = num || 1;\n\n            var item, idx, length;\n            for (idx = 0, length = toAdd.length; idx < length; idx++) {\n                item = toAdd.eq(idx).children(\":not([hidden])\").last();\n                item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) + num);\n\n                item = toRemove.eq(idx).children(\":not([hidden])\").last();\n                item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) - num);\n            }\n        }\n\n        function tableWidth(table) {\n            var idx, length, width = 0;\n            var cols = table.find(\">colgroup>col\");\n\n            for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                width += parseInt(cols[idx].style.width, 10);\n            }\n\n            return width;\n        }\n        var Grid = kendo.ui.DataBoundWidget.extend({\n            init: function(element, options, events) {\n                var that = this;\n\n                options = isArray(options) ? { dataSource: options } : options;\n\n                Widget.fn.init.call(that, element, options);\n\n                if (events) {\n                    that._events = events;\n                }\n\n                isRtl = kendo.support.isRtl(element);\n                CARET_ALT_RIGHT = isRtl ? CARET_ALT_LEFT : CARET_ALT_RIGHT_CACHE;\n\n                that._element();\n\n                that._ariaId();\n\n                that._columns($.extend(true, [], that.options.columns));\n\n                if (that._foreignKeyPromises) {\n                    $.when.apply(null, that._foreignKeyPromises)\n                        .then(function() {\n                            that._foreignKeyPromises = null;\n                            that._continueInit();\n                        });\n                } else {\n                    that._continueInit();\n                }\n            },\n\n            _continueInit: function() {\n                var that = this;\n\n                that._dataSource();\n\n                that._stickyColumns();\n\n                that._tbody();\n\n                that._thead();\n\n                that._rowResizing();\n\n                that._groupable();\n\n                that._toolbar();\n\n                var columnsToolbarButton = that.wrapper.find(\".k-grid-toolbar .k-toolbar-button.k-grid-column-menu.k-toolbar-tool\");\n                if (columnsToolbarButton.length > 0) {\n                    that._globalColumnsMenu(columnsToolbarButton);\n                }\n\n                that._pageable();\n\n                that._setContentHeight();\n\n                that._templates();\n\n                that._navigatable();\n\n                that._initSelectableAggregates();\n\n                that._selectable();\n\n                that._statusBar();\n\n                that._clipboard();\n\n                that._paste();\n\n                that._details();\n\n                that._editable();\n\n                that._attachCustomCommandsEvent();\n\n                that._adaptiveColumns();\n\n                that._minScreenSupport();\n\n                if (that.options.autoBind) {\n                    that.dataSource.fetch();\n                } else {\n                    that._group = that._groups() > 0;\n                    that._footer();\n                }\n\n                if (that.options.contextMenu) {\n                    that._initContextMenu();\n                }\n\n                if (that.lockedContent) {\n                    that.wrapper.addClass(\"k-grid-lockedcolumns\");\n                    that._resizeHandler = function() {\n                        that.resize();\n                    };\n                    $(window).on(\"resize\" + NS, that._resizeHandler);\n                }\n\n                kendo.notify(that);\n\n                if (that._showWatermarkOverlay) {\n                    that._showWatermarkOverlay(that.wrapper[0]);\n                }\n            },\n\n            events: [\n               CHANGE,\n               CHANGING,\n               \"dataBinding\",\n               \"cancel\",\n               DATABOUND,\n               DETAILEXPAND,\n               DETAILCOLLAPSE,\n               DETAILINIT,\n               FILTERMENUINIT,\n               FILTERMENUOPEN,\n               COLUMNMENUINIT,\n               COLUMNMENUOPEN,\n               EDIT,\n               BEFOREEDIT,\n               SAVE,\n               REMOVE,\n               SAVECHANGES,\n               CELLCLOSE,\n               ROWRESIZE,\n               COLUMNRESIZE,\n               COLUMNREORDER,\n               COLUMNSHOW,\n               COLUMNHIDE,\n               COLUMNLOCK,\n               COLUMNUNLOCK,\n               COLUMNSTICK,\n               COLUMNUNSTICK,\n               ROWREORDER,\n               NAVIGATE,\n               PASTE,\n               \"page\",\n               \"sort\",\n               \"filter\",\n               \"group\",\n               \"groupExpand\",\n               \"groupCollapse\",\n               \"kendoKeydown\"\n            ],\n\n            setDataSource: function(dataSource) {\n                var that = this;\n                var scrollable = that.options.scrollable;\n                var scrollableContent;\n\n                that.options.dataSource = dataSource;\n\n                that._dataSource();\n\n                that._pageable();\n\n                that._thead();\n\n                that._rowResizing();\n\n                if (scrollable) {\n                    if (scrollable.virtual) {\n                        scrollableContent = that.content.find(\">.k-virtual-scrollable-wrap\");\n                        kendo.scrollLeft(scrollableContent, leftMostPosition(scrollableContent, isRtl));\n                    } else {\n                        scrollableContent = that.tbody;\n                        kendo.scrollLeft(that.content, leftMostPosition(scrollableContent, isRtl));\n                    }\n                }\n\n                if (that.options.groupable) {\n                    that._groupable();\n                }\n\n                if (that.virtualScrollable) {\n                    that.virtualScrollable.setDataSource(that.options.dataSource);\n                }\n\n                if (that.options.navigatable) {\n                    that._navigatable();\n                }\n\n                if (that.options.selectable) {\n                    that._selectable();\n                }\n\n                if (that.options.autoBind) {\n                    that.dataSource.fetch();\n                } else {\n                    that._footer();\n                }\n            },\n\n            options: {\n                name: \"Grid\",\n                columns: [],\n                toolbar: null,\n                autoBind: true,\n                filterable: false,\n                scrollable: true,\n                sortable: false,\n                selectable: false,\n                allowCopy: false,\n                allowPaste: false,\n                navigatable: false,\n                pageable: false,\n                persistSelection: false,\n                editable: false,\n                encodeTitles: false,\n                groupable: false,\n                rowTemplate: \"\",\n                altRowTemplate: \"\",\n                statusBarTemplate: null,\n                search: false,\n                noRecords: false,\n                dataSource: {},\n                height: null,\n                resizable: false,\n                reorderable: false,\n                columnMenu: false,\n                detailTemplate: null,\n                contextMenu: false,\n                columnResizeHandleWidth: 3,\n                size: \"medium\",\n                mobile: \"\",\n                loaderType: \"loadingPanel\",\n                messages: {\n                    editable: {\n                        cancelDelete: CANCELDELETE,\n                        confirmation: DELETECONFIRM,\n                        confirmDelete: CONFIRMDELETE\n                    },\n                    commands: {\n                        create: defaultCommands.create.text,\n                        cancel: defaultCommands.cancel.text,\n                        save: defaultCommands.save.text,\n                        destroy: defaultCommands.destroy.text,\n                        edit: defaultCommands.edit.text,\n                        update: defaultCommands.update.text,\n                        canceledit: defaultCommands.canceledit.text,\n                        excel: defaultCommands.excel.text,\n                        pdf: defaultCommands.pdf.text,\n                        search: defaultCommands.search.text,\n                        columns: defaultCommands.columns.text,\n                        select: \"Select\",\n                        selectRow: \"Select Row\",\n                        selectAllRows: \"All rows\",\n                        clearSelection: \"Clear selection\",\n                        copySelection: \"Copy selection\",\n                        copySelectionNoHeaders: \"Copy selection (No Headers)\",\n                        paste: \"Paste (use CTRL/ + V)\",\n                        reorderRow: \"Reorder row\",\n                        reorderRowUp: \"Up\",\n                        reorderRowDown: \"Down\",\n                        reorderRowTop: \"Top\",\n                        reorderRowBottom: \"Bottom\",\n                        exportPdf: \"Export to PDF\",\n                        exportExcel: \"Export to Excel\",\n                        exportToExcelAll: \"All\",\n                        exportToExcelSelection: \"Selection\",\n                        exportToExcelSelectionNoHeaders: \"Selection (No Headers)\",\n                        sortAsc: \"Sort Ascending\",\n                        sortDesc: \"Sort Descending\",\n                        moveGroupPrevious: \"Move previous\",\n                        moveGroupNext: \"Move next\",\n                    },\n                    noRecords: NORECORDS,\n                    expandCollapseColumnHeader: \"\",\n                    groupHeader: \"Press ctrl + space to group\",\n                    ungroupHeader: \"Press ctrl + space to ungroup\",\n                    itemsSelected: \"items selected\",\n                    dragHandleLabel: \"Drag row\",\n                    toolbarLabel: \"grid toolbar\",\n                    groupingHeaderLabel: \"grid grouping header\",\n                    filterCellTitle: \"filter cell\"\n                },\n                width: null\n            },\n\n            destroy: function() {\n                var that = this,\n                    element,\n                    reorderableInstance;\n\n                that._destroyColumnAttachments();\n\n                Widget.fn.destroy.call(that);\n\n                if (this._navigatableTables) {\n                    this._navigatableTables.off(NS);\n                    this._navigatableTables = null;\n                    this._headertables = null;\n                }\n\n                if (that._resizeHandler) {\n                    $(window).off(\"resize\" + NS, that._resizeHandler);\n                }\n\n                if (that.pager && that.pager.element) {\n                    that.pager.destroy();\n                }\n\n                if (that.timer) {\n                    clearTimeout(that.timer);\n                }\n\n                if (that._progressTimeOut) {\n                    clearTimeout(that._progressTimeOut);\n                }\n\n                if (that._collapseGroupsTimeOut) {\n                    clearTimeout(that._collapseGroupsTimeOut);\n                }\n\n                if (that._endlessFetchTimeOut) {\n                    clearTimeout(that._endlessFetchTimeOut);\n                }\n\n                that.pager = null;\n\n                that._destroyGroupable();\n\n                reorderableInstance = that.wrapper.data(\"kendoReorderable\");\n                if (reorderableInstance) {\n                    reorderableInstance.destroy();\n                }\n\n                reorderableInstance = that.tbody ? that.tbody.data(\"kendoReorderable\") : null;\n                if (reorderableInstance) {\n                    reorderableInstance.destroy();\n                }\n\n                if (that.allowPaste) {\n                    that.wrapper.off(\"paste\", that.pasteHandler);\n                    that.unbind(that.pasteHandler);\n                }\n\n                if (that.pasteActionsDropDownList) {\n                    that.pasteActionsDropDownList.destroy();\n                    that.pasteActionsDropDownList = null;\n                }\n\n                if (that.selectable && that.selectable.element) {\n                    that.selectable.destroy();\n\n                    that.clearArea();\n                    that._selectedIds = null;\n\n                    if (that.copyHandler) {\n                        that.wrapper.off(\"keydown\", that.copyHandler);\n                        that.unbind(that.copyHandler);\n                    }\n                    if (that.updateClipBoardState) {\n                        that.unbind(that.updateClipBoardState);\n                        that.updateClipBoardState = null;\n                    }\n                    if (that.clearAreaHandler) {\n                        that.wrapper.off(\"keyup\", that.clearAreaHandler);\n                    }\n                }\n\n                that.selectable = null;\n                that._selectableAggregatesOptions = null;\n\n                if (that.resizable) {\n                    that.resizable.destroy();\n\n                    if (that._resizeUserEvents) {\n                        if (that._resizeHandleDocumentClickHandler) {\n                            $(document).off(\"click\", that._resizeHandleDocumentClickHandler);\n                        }\n                        that._resizeUserEvents.destroy();\n                        that._resizeUserEvents = null;\n                    }\n                    that.resizable = null;\n                }\n\n                that._destroyRowResizing();\n\n                that._destroyVirtualScrollable();\n\n                if (that.editableUserEvents) {\n                    that.editableUserEvents.destroy();\n                    that.editableUserEvents = null;\n                }\n\n                if (that._lockedContentUserEvents) {\n                    that._lockedContentUserEvents.destroy();\n                    that._lockedContentUserEvents = null;\n                }\n\n                that._destroyEditable();\n\n                if (that.dataSource) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler)\n                               .unbind(PROGRESS, that._progressHandler)\n                               .unbind(ERROR, that._errorHandler)\n                               .unbind(SORT, that._clearSortClasses);\n\n                    that._refreshHandler = that._progressHandler = that._errorHandler = that._sortHandler = null;\n                }\n\n                element = that.element\n                    .add(that.wrapper)\n                    .add(that.table)\n                    .add(that.thead)\n                    .add(that.wrapper.find(\">.k-grid-toolbar\"));\n\n                if (that.content) {\n                    element = element\n                            .add(that.content)\n                            .add(that.content.find(\">.k-virtual-scrollable-wrap\"));\n                }\n\n                if (that.scrollables && that.scrollables.first()) {\n                    element = element.add(that.scrollables.first());\n                }\n\n                if (that.lockedHeader) {\n                    that._removeLockedContainers();\n                }\n\n                if (that.pane) {\n                    that.pane.destroy();\n                }\n\n                if (that._isMobile) {\n                    that.wrapper.off(\"transitionend\" + NS);\n                    that.wrapper.off(\"contextmenu\" + NS);\n                }\n\n                if (that.minScreenResizeHandler) {\n                    $(window).off(\"resize\", that.minScreenResizeHandler);\n                }\n\n                that._detachColumnMediaResizeHandler();\n\n                if (that._draggableInstance && that._draggableInstance.element) {\n                    that._draggableInstance.destroy();\n                }\n\n                that._draggableInstance = null;\n\n                if (that._draggableRowsInstance && that._draggableRowsInstance.element) {\n                    that._draggableRowsInstance.destroy();\n                }\n\n                if (that.tbodyContextMenu) {\n                    that.tbodyContextMenu.destroy();\n                }\n\n                if (that.theadContextMenu) {\n                    that.theadContextMenu.destroy();\n                }\n\n                that._draggableRowsInstance = null;\n\n                element.off(NS);\n\n                kendo.destroy(that.wrapper);\n\n                that.rowTemplate =\n                that.altRowTemplate =\n                that.lockedRowTemplate =\n                that.lockedAltRowTemplate =\n                that.detailTemplate =\n                that.footerTemplate =\n                that.groupFooterTemplate =\n                that.lockedGroupFooterTemplate =\n                that.noRecordsTemplate = null;\n\n                that.scrollables =\n                that.thead =\n                that.tbody =\n                that.element =\n                that.table =\n                that.content =\n                that.statusBar =\n                that.footer =\n                that.wrapper =\n                that.lockedTable =\n                that.lockedContent =\n                that.lockedHeader =\n                that.lockedFooter =\n                that._groupableClickHandler =\n                that._groupRows =\n                that._setContentWidthHandler = null;\n            },\n\n            getOptions: function() {\n                var options = this.options;\n                options.dataSource = null;\n\n                var result = extend(true, {}, this.options);\n                result.columns = kendo.deepExtend([], this.columns);\n\n                var dataSource = this.dataSource;\n\n                var initialData = dataSource.options.data && dataSource._data;\n                dataSource.options.data = null;\n\n                result.dataSource = $.extend(true, {}, dataSource.options);\n\n                dataSource.options.data = initialData;\n\n                result.dataSource.data = initialData;\n                result.dataSource.page = dataSource.page();\n                result.dataSource.filter = $.extend(true, {}, dataSource.filter());\n                result.dataSource.pageSize = dataSource.pageSize();\n                result.dataSource.sort = dataSource.sort();\n                result.dataSource.group = dataSource.group();\n                result.dataSource.aggregate = dataSource.aggregate();\n\n                if (result.dataSource.transport) {\n                    result.dataSource.transport.dataSource = null;\n                }\n\n                if (result.pageable && result.pageable.pageSize) {\n                    result.pageable.pageSize = dataSource.pageSize();\n                }\n\n                return result;\n            },\n\n            setOptions: function(options) {\n                var currentOptions = this.getOptions();\n                kendo.deepExtend(currentOptions, options);\n                if (!options.dataSource) {\n                    currentOptions.dataSource = this.dataSource;\n                } else {\n                  if (options.dataSource.filter) {\n                      currentOptions.dataSource.filter = options.dataSource.filter;\n                  }\n                }\n                var wrapper = this.wrapper;\n                var events = this._events;\n                var element = this.element;\n\n                this.destroy();\n                this.options = null;\n                if (this._isMobile) {\n                    var mobileWrapper = wrapper.closest(kendo.roleSelector(\"pane\")).parent();\n                    mobileWrapper.after(wrapper);\n                    mobileWrapper.remove();\n                    wrapper.removeClass(\"k-grid-mobile\");\n                }\n                if (wrapper[0] !== element[0]) {\n                    wrapper.before(element);\n                    wrapper.remove();\n                }\n                element.empty();\n\n                this.init(element, currentOptions, events);\n                this._setEvents(currentOptions);\n            },\n\n            items: function() {\n                if (this.lockedContent) {\n                    return this._items(this.tbody).add(this._items(this.lockedTable.children(\"tbody\")));\n                } else {\n                    return this._items(this.tbody);\n                }\n            },\n\n            _items: function(container, includeGroupRows) {\n                return container.children().filter(function() {\n                    var tr = $(this);\n                    return (includeGroupRows ? !tr.hasClass(\"k-detail-row\") : !tr.hasClass(GROUPING_ROW)) && !tr.hasClass(\"k-detail-row\") && !tr.hasClass(\"k-group-footer\");\n                });\n            },\n\n            dataItems: function() {\n                var dataItems = kendo.ui.DataBoundWidget.fn.dataItems.call(this);\n                if (this.lockedContent) {\n                    var n = dataItems.length, tmp = new Array(2 * n);\n                    for (var i = n; --i >= 0;) {\n                        tmp[i] = tmp[i + n] = dataItems[i];\n                    }\n                    dataItems = tmp;\n                }\n\n                return dataItems;\n            },\n\n            _destroyColumnAttachments: function() {\n                var that = this;\n\n                that.resizeHandle = null;\n\n                if (!that.thead) {\n                    return;\n                }\n\n                that.thead.add(that.lockedHeader).find(\"th\").each(function() {\n                    var th = $(this),\n                        filterMenu = th.data(\"kendoFilterMenu\"),\n                        sortable = th.data(\"kendoColumnSorter\"),\n                        columnMenu = th.data(\"kendoColumnMenu\");\n\n                    if (filterMenu) {\n                        filterMenu.destroy();\n                    }\n\n                    if (sortable) {\n                        sortable.destroy();\n                    }\n\n                    if (columnMenu) {\n                        columnMenu.destroy();\n                    }\n                });\n            },\n\n            _attachCustomCommandsEvent: function() {\n                var that = this,\n                    columns = leafColumns(that.columns || []),\n                    command,\n                    idx,\n                    length;\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    command = columns[idx].command;\n\n                    if (command) {\n                        attachCustomCommandEvent(that, that.wrapper, command);\n                    }\n                }\n            },\n\n            _aria: function() {\n                var wrapper = this.wrapper,\n                    gridRole = this._hasDetails() ? \"treegrid\" : this.options.navigatable ? \"grid\" : null,\n                    table = this.table,\n                    toolbar = wrapper.find(\".k-grid-toolbar\"),\n                    groupingHeader = wrapper.find(\".k-grouping-header\"),\n                    gridId = this._ariaGridId(),\n                    tableTabindex = table.attr(TABINDEX),\n                    tbodyId, headerGroupId, footerGroupId, tableOwned,\n                    numberOfFixedRows = this.thead.find(TR).length + this.wrapper.find(\".k-grid-footer-wrap table tr\").length,\n                    trailingColumns = this._trailingColumns(),\n                    virtual = this.virtualScroll,\n                    pageable = this.options.pageable,\n                    rowsCount;\n\n                table.attr(TABINDEX, tableTabindex >= 0 ? tableTabindex : 0);\n\n                if (gridRole) {\n                    table.attr(ROLE, gridRole);\n                }\n\n                table.find(\"tbody, thead, tfoot\").attr(ROLE, ROWGROUP);\n                table.find(TR).attr(ROLE, ROW);\n                table.find(\"th\").attr(ROLE, COLUMNHEADER);\n                table.find(\"td\").attr(ROLE, GRIDCELL);\n\n                if ((pageable && this.dataSource.totalPages() > 1) || (virtual && virtual.rows)) {\n                    if (this._groups() > 0) {\n                        rowsCount = -1;\n                    } else if (this._hasDetails()) {\n                        rowsCount = numberOfFixedRows + (this.dataSource.total() * 2);\n                    } else {\n                        rowsCount = numberOfFixedRows + this.dataSource.total();\n                    }\n\n                    table.attr(ARIA_ROWCOUNT, rowsCount);\n                } else if (this._hasDetails()) {\n                    if (this._groups() > 0) {\n                        rowsCount = -1;\n                    } else {\n                        rowsCount = numberOfFixedRows + (this.dataSource.total() * 2);\n                    }\n\n                    table.attr(ARIA_ROWCOUNT, rowsCount);\n                }\n\n                if (rowsCount && rowsCount > 0) {\n                    this._ariaRowIndex();\n                }\n\n                if ((virtual && virtual.columns) ||\n                    (!table.attr(ARIA_COLCOUNT) &&\n                        (table.find(\"td:not([group-header-spanned-hidden]):hidden\").length > 0 ||\n                        wrapper.find(\".k-grid-content-locked td:not([group-header-spanned-hidden]):hidden\").length > 0))) {\n                            table.attr(ARIA_COLCOUNT, trailingColumns + leafColumns(this.columns).length);\n                            this._ariaColumnIndex();\n                }\n\n                if (this.pager) {\n                    this.pager.element.attr(ARIA_CONTROLS, gridId);\n                }\n\n                toolbar.attr({\n                    role: \"toolbar\",\n                    \"aria-label\": this.options.messages.toolbarLabel,\n                    \"aria-controls\": gridId\n                });\n\n                groupingHeader.attr({\n                    role: \"toolbar\",\n                    \"aria-label\": this.options.messages.groupingHeaderLabel,\n                    \"aria-controls\": gridId\n                });\n\n                headerGroupId = this._ariaHeaderFooter(\"header\", \"thead\", \"th, td\", COLUMNHEADER);\n                footerGroupId = this._ariaHeaderFooter(\"footer\", \"tfoot\", \"td\", GRIDCELL);\n\n                if (wrapper.find(\".k-grid-content-locked\").length > 0) {\n                    this._ariaLockedContent();\n                }\n\n                if (!!headerGroupId || !!footerGroupId) {\n                    tbodyId = this.tbody.attr(ID) || kendo.guid();\n                    tableOwned = [headerGroupId, tbodyId, footerGroupId].join(\" \");\n\n                    this.tbody.attr(ID, tbodyId);\n                    table.attr(ARIA_OWNS, tableOwned);\n                }\n\n                if (this.options.groupable) {\n                    this._ariaGroupTitles();\n                }\n            },\n\n            _ariaColumnIndex: function() {\n                var trailingColumns = this._trailingColumns(),\n                    dataVirtual = this.tbody.find(\">tr\").last().find(\"> td[data-virtual]\"),\n                    headerRows = this.thead.find(\">tr\").not(\".k-filter-row\"),\n                    lockedHeaderRows = this.wrapper.find(\".k-grid-header-locked thead > tr\").not(\".k-filter-row\"),\n                    firstIndex = Number.MAX_VALUE,\n                    lastIndex = 0,\n                    lockedLastIndex = 0,\n                    previousVirtual = 0,\n                    nextVirtual = 0,\n                    previousIndex, i, cells, dataIndex, cellsIndex,\n                    eachHeaderCell = function(j, cell) {\n                        var current = cell.getAttribute(\"data-index\"),\n                            currentIndex = Number(current),\n                            lockedParent = $(cell).closest(\".k-grid-header-locked\");\n\n                        if (lockedParent.length === 0 && currentIndex < firstIndex) {\n                            firstIndex = currentIndex;\n                        }\n\n                        if (lockedParent.length > 0 && lockedLastIndex < currentIndex) {\n                            lockedLastIndex = currentIndex;\n                        }\n\n                        if (lockedParent.length === 0 && lastIndex < currentIndex) {\n                            lastIndex = currentIndex;\n                        }\n\n                        if (current !== null) {\n                            cell.setAttribute(ARIA_COLINDEX, Number(currentIndex) + 1);\n                            previousIndex = Number(currentIndex) + 1 + cell.getAttribute(\"colspan\");\n                        } else {\n                            cell.setAttribute(ARIA_COLINDEX, previousIndex + 1);\n                            previousIndex = previousIndex + cell.getAttribute(\"colspan\");\n                        }\n                    };\n\n                if (dataVirtual.length === 2) {\n                    previousVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n                    nextVirtual = Number(dataVirtual[1].getAttribute(\"colspan\"));\n                } else if (dataVirtual.length === 1 && dataVirtual.prev().length === 0) {\n                    previousVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n                } else if (dataVirtual.length === 1 && dataVirtual.prev().length === 1) {\n                    nextVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n                }\n\n                for (i = 0; i < lockedHeaderRows.length; i++) {\n                    previousIndex = 0;\n                    lockedHeaderRows.eq(i).find(\"th\").each(eachHeaderCell);\n                }\n\n                for (i = 0; i < headerRows.length; i++) {\n                    previousIndex = 0;\n                    headerRows.eq(i).find(\"th\").each(eachHeaderCell);\n                }\n\n                for (i = 0; i <= lockedLastIndex; i++) {\n                    dataIndex = i + trailingColumns;\n                    cells = this.wrapper.find(\".k-grid-content-locked tbody > tr > td:nth-child(\" + (i + 1) + \")\");\n                    cells.attr(ARIA_COLINDEX, dataIndex + 1);\n                }\n\n                for (i = previousVirtual; i <= lastIndex - firstIndex - nextVirtual; i++) {\n                    if (previousVirtual === 0 ) {\n                        cellsIndex = i + 1;\n                    } else {\n                        cellsIndex = i - previousVirtual + 2;\n                    }\n\n                    dataIndex = firstIndex + i + trailingColumns;\n\n                    cells = this.tbody.find(\"> tr > td:nth-child(\" + cellsIndex + \")\");\n                    cells.attr(ARIA_COLINDEX, dataIndex + 1);\n                }\n            },\n\n            _ariaGroupTitles: function() {\n                var that = this,\n                    groups = that.dataSource.group(),\n                    ths = that.wrapper.find(\".k-grid-header th\");\n\n                ths.each(function(i, el) {\n                    if (el.getAttribute(\"title\") === that.options.messages.ungroupHeader) {\n                            el.setAttribute(\"title\", that.options.messages.groupHeader);\n                    }\n                });\n\n                if (groups && groups.length > 0) {\n                    groups.forEach(function(group) {\n                        var field = group.field,\n                            el = ths.filter(\"[\" + kendo.attr(\"field\") + \"='\" + field + \"']\");\n\n                        if (el.attr(\"title\") === that.options.messages.groupHeader) {\n                            el.attr(\"title\", that.options.messages.ungroupHeader);\n                        }\n                    });\n                }\n            },\n\n            _ariaHeaderFooter: function(type, group, el, role) {\n                var that = this,\n                    wrapper = that.wrapper,\n                    table = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-wrap table\"),\n                    lockedTable = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-locked table\"),\n                    groupId = \"\",\n                    rowGroup;\n\n                if (table.length > 0) {\n                    rowGroup = table.find(group + \", tbody\");\n                    groupId = rowGroup.attr(ID) || kendo.guid();\n\n                    table.attr(ROLE, NONE);\n                    table.find(TR).attr(ROLE, ROW);\n                    table.find(el).attr(ROLE, role);\n                    rowGroup.attr({\n                        role: ROWGROUP,\n                        id: groupId\n                    });\n                }\n\n                if (lockedTable.length > 0) {\n                    that._ariaLocked(type, group, el, role);\n                }\n\n                lockedTable.find(\"td\").attr(ROLE, GRIDCELL);\n                table.find(\"td\").attr(ROLE, GRIDCELL);\n\n                return groupId;\n            },\n\n            _ariaId: function() {\n                var id = this.element.attr(ID) || \"aria\";\n\n                if (id) {\n                    this._cellId = id + \"_active_cell\";\n                }\n            },\n\n            _ariaGridId: function() {\n                var table = this.table,\n                    gridId = table.attr(ID);\n\n                if (!gridId) {\n                    gridId = kendo.guid();\n                    table.attr(ID, gridId);\n                }\n\n                return gridId;\n            },\n\n            _ariaLocked: function(type, group, el, role) {\n                var that = this,\n                    wrapper = that.wrapper,\n                    table = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-wrap table\"),\n                    lockedTable = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-locked table\"),\n                    rows = table.find(TR),\n                    lockedRows = lockedTable.find(TR);\n\n                lockedTable.attr(ROLE, NONE);\n                lockedTable.find(group + \", tbody\").attr(ROLE, NONE);\n                lockedRows.attr(ROLE, NONE);\n\n                lockedTable.find(el).attr(ROLE, role);\n\n                rows.each(function(i, row) {\n                    var ownedCells = [];\n\n                    ownedCells = that._cellsIds(lockedRows.eq(i).find(el), \"locked_\" + type, i);\n                    ownedCells = ownedCells.concat(that._cellsIds($(row).find(el), type, i));\n\n                    row.setAttribute(ARIA_OWNS, ownedCells.join(\" \"));\n                });\n            },\n\n            _ariaLockedContent: function() {\n                var that = this,\n                    table = that.table,\n                    tableRows = table.find(TR),\n                    lockedTable = that.wrapper.find(\".k-grid-content-locked table\"),\n                    lockedRows = lockedTable.find(TR);\n\n                lockedTable.attr(ROLE, NONE);\n                lockedTable.find(\"tbody\").attr(ROLE, NONE);\n                lockedRows.attr(ROLE, NONE);\n                lockedTable.find(\"td\").attr(ROLE, GRIDCELL);\n\n                tableRows.each(function(i, row) {\n                    var ownedCells = [];\n\n                    ownedCells = that._cellsIds(lockedRows.eq(i).find(\"td\"), \"locked_datacell\", i);\n                    ownedCells = ownedCells.concat(that._cellsIds($(row).find(\"td\"), \"datacell\", i));\n\n                    row.setAttribute(ARIA_OWNS, ownedCells.join(\" \"));\n                });\n            },\n\n            _ariaAddHiddenColIndex: function() {\n                var virtualScroll = this.virtualScroll || {},\n                    columns = this.columns,\n                    table = this.table,\n                    leafColsCount = leafColumns(columns).length;\n\n                if (!virtualScroll.columns && !table.attr(ARIA_COLCOUNT)) {\n                    this._ariaColumnIndex();\n\n                    table.attr(ARIA_COLCOUNT, leafColsCount);\n                }\n            },\n\n            _ariaRemoveHiddenColIndex: function() {\n                var virtualScroll = this.virtualScroll || {},\n                    columns = this.columns,\n                    leafColsCount = leafColumns(columns).length;\n\n                if (!virtualScroll.columns && (leafColsCount === visibleLeafColumns(this.columns).length)) {\n                    this.wrapper.find(\"td, th\").removeAttr(ARIA_COLINDEX);\n\n                    this.table.removeAttr(ARIA_COLCOUNT);\n                }\n            },\n\n            _ariaRowIndex: function() {\n                var headerRows = this.thead.find(\">tr\"),\n                    numberOfHeaderRows = headerRows.length,\n                    bodyRows = this.tbody.find(\">tr\"),\n                    footerRows = this.wrapper.find(\".k-grid-footer-wrap tfoot > tr\"),\n                    totalNumberOfItems = this.dataSource.total(),\n                    previousItems = this.dataSource.skip() || 0,\n                    currentIndex = 1,\n                    previousMaster = false,\n                    i, currentRow;\n\n                if (this._hasDetails()) {\n                    totalNumberOfItems = totalNumberOfItems * 2;\n                    previousItems = previousItems * 2;\n                }\n\n                for (i = 0; i < numberOfHeaderRows; i++) {\n                    headerRows.eq(i).attr(ARIA_ROWINDEX, currentIndex + i);\n                }\n\n                currentIndex = numberOfHeaderRows + previousItems;\n\n                for (i = 0; i < bodyRows.length; i++) {\n                    currentRow = bodyRows.eq(i);\n\n                    if (this._hasDetails() && currentRow.hasClass(\"k-master-row\")) {\n                        if (previousMaster) {\n                            currentIndex = currentIndex + 2;\n                        } else {\n                            currentIndex = currentIndex + 1;\n                        }\n\n                        previousMaster = true;\n                    } else {\n                        currentIndex = currentIndex + 1;\n                        previousMaster = false;\n                    }\n\n                    currentRow.attr(ARIA_ROWINDEX, currentIndex);\n                }\n\n                currentIndex = numberOfHeaderRows + totalNumberOfItems + 1;\n\n                for (i = 0; i < footerRows.length; i++) {\n                    footerRows.eq(i).attr(ARIA_ROWINDEX, currentIndex + i);\n                }\n            },\n\n            _cellsIds: function(elements, prefix, i) {\n                var ownedCells = [],\n                gridId = this._ariaGridId();\n\n                elements.each(function(j, cell) {\n                    var id = cell.getAttribute(ID) || gridId + \"_\" + prefix + \"_\" + i + \"_\" + j;\n\n                    cell.setAttribute(ID, id);\n\n                    ownedCells.push(id);\n                });\n\n                return ownedCells;\n            },\n\n            _trailingColumns: function() {\n                return this._groups() + (this._hasDetails() ? 1 : 0);\n            },\n\n            _element: function() {\n                var that = this,\n                    table = that.element;\n\n                if (!table.is(\"table\")) {\n                    if (that.options.scrollable) {\n                        table = that.element.find(\"> .k-grid-content > table\");\n                    } else {\n                        table = that.element.children(\"table\");\n                    }\n\n                    if (!table.length) {\n                        table = $(\"<table />\").appendTo(that.element);\n                    }\n                }\n\n                table.addClass(\"k-grid-table k-table\");\n                table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n                that.table = table;\n\n                that._wrapper();\n            },\n\n            _createResizeHandle: function(container, th) {\n                var that = this;\n                var indicatorWidth = that.options.columnResizeHandleWidth;\n                var scrollable = that.options.scrollable;\n                var resizeHandle = that.resizeHandle;\n                var halfResizeHandle = (indicatorWidth * 3) / 2;\n                var rtlCorrection = 0;\n                var headerWrap;\n                var ieCorrection;\n                var webkitCorrection;\n                var firefoxCorrection;\n                var leftMargin;\n                var invisibleSpace;\n                var leftBorderWidth;\n                var scrollLeft;\n                var left;\n                var top;\n\n                if (resizeHandle && that.lockedContent && resizeHandle.data(\"th\")[0] !== th[0]) {\n                    resizeHandle.off(NS).remove();\n                    resizeHandle = null;\n                }\n\n                if (!resizeHandle) {\n                    resizeHandle = that.resizeHandle = $('<div class=\"k-resize-handle\"><div class=\"k-resize-handle-inner\"></div></div>');\n                    container.append(resizeHandle);\n                }\n\n                scrollLeft = kendo.scrollLeft(container);\n\n                if (isRtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    scrollLeft = scrollLeft * -1;\n                }\n\n                leftBorderWidth = parseFloat(container.css(\"borderLeftWidth\"));\n\n                left = th.offset().left + scrollLeft - parseFloat(th.css(\"marginLeft\")) - (container.offset().left + leftBorderWidth);\n\n                if (!isRtl) {\n                    left += th[0].offsetWidth;\n               } else {\n                    if (scrollable) {\n                        rtlCorrection = (left <= scrollLeft ? halfResizeHandle : 0);// when shown on first column headers are misaligned due to the width of the resize handler\n                        headerWrap = th.closest(\".k-grid-header-wrap, .k-grid-header-locked\");\n                        invisibleSpace = headerWrap[0].scrollWidth - headerWrap[0].offsetWidth; // the difference between the entire width and the visible area\n                        leftMargin = parseFloat(headerWrap.css(\"marginLeft\"));\n                        ieCorrection = browser.msie ? 2 * kendo.scrollLeft(headerWrap) + leftBorderWidth - leftMargin - rtlCorrection : 0;\n                        webkitCorrection = -rtlCorrection;\n                        firefoxCorrection = browser.mozilla ? leftBorderWidth - leftMargin - rtlCorrection : 0;\n\n                        left -= webkitCorrection + firefoxCorrection + ieCorrection;\n                    }\n                }\n\n                top = th.offset().top - parseFloat(th.css(\"marginTop\")) - (container.offset().top + parseFloat(container.css(\"borderTopWidth\")));\n\n                resizeHandle.css({\n                    top: top, //scrollable ? 0 : heightAboveHeader(that.wrapper),\n                    left: left - halfResizeHandle,\n                    height: outerHeight(th),\n                    width: indicatorWidth * 3 - rtlCorrection\n                })\n                .data(\"th\", th)\n                .show();\n\n                resizeHandle.off(DUBLECLICK + NS).on(DUBLECLICK + NS, function() {\n                    that._autoFitLeafColumn(parseInt(th.attr(kendo.attr(\"index\")), 10));\n                });\n            },\n\n            _positionColumnResizeHandle: function() {\n                var that = this,\n                    lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n\n                that.thead.add(lockedHead).on(MOUSEMOVE + NS, \"tr:not(.k-filter-row) > th\", function(e) {\n                    var button = typeof e.buttons !== \"undefined\" ? e.buttons : (e.which || e.button);\n\n                    var th = $(this);\n                    if (th.hasClass(\"k-group-cell\") || th.hasClass(\"k-hierarchy-cell\")) {\n                        return;\n                    }\n\n                    if (typeof button !== \"undefined\" && button !== 0) {\n                        //do not create a new resize handle if a mouse button is still pressed\n                        //this happens during resizing or before UserEvents trigger \"start\"\n                        return;\n                    }\n\n                    if (th[0].hasAttribute(kendo.attr(COLSPAN))) {\n                        // resizing multi-column headers is not supported\n                        return;\n                    }\n\n                    that._createResizeHandle(th.closest(DIV), th);\n                });\n            },\n\n            _resizeHandleDocumentClick: function(e) {\n                if ($(e.target).closest(\".k-column-active\").length) {\n                    return;\n                }\n\n                $(document).off(e);\n\n                this._resetResizeHandleHeader();\n                this._hideResizeHandle();\n            },\n\n            _resetResizeHandleHeader: function() {\n                var th;\n\n                if (!this.resizeHandle) {\n                    return;\n                }\n\n                th = $(this.resizeHandle).data(\"th\");\n\n                if (th) {\n                    th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS + \",\" + DOT + SVG_ICON_CLASS).show();\n                    th.find(DOT + ORDER_CLASS).show();\n                    th.find(DOT + HEADER_COLUMN_MENU_CLASS).show();\n                    th.find(DOT + FILTER_MENU_CLASS).show();\n                }\n            },\n\n            _hideResizeHandle: function() {\n                if (this.resizeHandle) {\n                    this.resizeHandle.data(\"th\")\n                        .removeClass(\"k-column-active\");\n\n                    if (this.lockedContent && !this._isMobile) {\n                        this.resizeHandle.off(NS).remove();\n                        this.resizeHandle = null;\n                    } else {\n                        this.resizeHandle.hide();\n                    }\n                }\n            },\n\n            _positionColumnResizeHandleTouch: function() {\n                var that = this,\n                    lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n\n                that._resizeUserEvents = new kendo.UserEvents(lockedHead.add(that.thead), {\n                    filter: \"th:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                    threshold: 10,\n                    minHold: 500,\n                    hold: function(e) {\n                        var th = $(e.target);\n\n                        e.preventDefault();\n\n                        if (that.resizeHandle) {\n                            that.resizeHandle.data(\"th\")\n                                .removeClass(\"k-column-active\");\n                            that._resetResizeHandleHeader();\n                        }\n\n                        th.addClass(\"k-column-active\");\n\n                        th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS + \",\" + DOT + SVG_ICON_CLASS).hide();\n                        th.find(DOT + ORDER_CLASS).hide();\n                        th.find(DOT + HEADER_COLUMN_MENU_CLASS).hide();\n                        th.find(DOT + FILTER_MENU_CLASS).hide();\n\n                        that._createResizeHandle(th.closest(DIV), th);\n\n                        if (!that._resizeHandleDocumentClickHandler) {\n                            that._resizeHandleDocumentClickHandler = that._resizeHandleDocumentClick.bind(that);\n                        }\n\n                        $(document).on(\"click\", that._resizeHandleDocumentClickHandler);\n                    }\n                });\n            },\n\n            resizeColumn: function(column, columnWidth) {\n                var that = this;\n                var isLocked = !!column.locked;\n                var isHidden = !!column.hidden;\n                var options = this.options;\n                var scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n                var index = isLocked ? inArray(column, visibleLockedColumns(visibleLeafColumns(that.columns))) : inArray(column, visibleNonLockedColumns(visibleLeafColumns(that.columns)));\n                var contentTable = isLocked ? that.lockedTable : that.table;\n                var footer = that.footer || $();\n                var header = isLocked ? that.lockedHeader.find(\"table\") : that.thead.closest(\"table\");\n                var columnMinWidth = column.minResizableWidth || 10;\n                var gridWidth = isLocked ? outerWidth(contentTable.find(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n                var col;\n\n                if (isHidden) {\n                    column.width = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n                    return;\n                }\n\n                if (that.footer && that.lockedContent) {\n                    footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n                }\n\n                if (options.scrollable) {\n\n                    col = header.find(\"col:not(.k-group-col,.k-hierarchy-col)\").eq(index)\n                        .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                        .add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n                } else {\n                    col = contentTable.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n                }\n\n                if (options.scrollable) {\n                    var constrain = false;\n                    var totalWidth = that.wrapper.width() - scrollbar;\n                    var width = columnWidth = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n\n                    if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                        width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                        if (width < 0) {\n                            width = columnWidth;\n                        }\n                        constrain = true;\n                    }\n\n                    if (width > 10 && width >= columnMinWidth) {\n                        col.css('width', width);\n\n                        if (gridWidth) {\n                            if (constrain) {\n                                width = totalWidth - scrollbar * 2;\n                            } else {\n                                width = gridWidth + (columnWidth - column.width);\n                            }\n\n                            contentTable\n                                .add(header)\n                                .add(footer)\n                                .css('width', width);\n\n                            if (!isLocked) {\n                                that._footerWidth = width;\n                            }\n                        }\n                    }\n\n                that._scrollVirtualWrapperOnColumnResize();\n                } else if (columnWidth > 10 && columnWidth >= columnMinWidth) {\n                    col.css('width', columnWidth);\n                }\n\n                column.width = columnWidth;\n\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n                that._updateStickyColumns();\n            },\n\n            _resizable: function() {\n                var that = this,\n                    options = that.options,\n                    container,\n                    columnStart,\n                    columnWidth,\n                    columnMinWidth,\n                    gridWidth,\n                    isMobile = this._isMobile,\n                    scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0,\n                    isLocked,\n                    col, th;\n\n                if (options.resizable === true || (options.resizable && options.resizable.columns === true)) {\n                    container = options.scrollable ? that.wrapper.find(\".k-grid-header-wrap\").first() : that.wrapper;\n\n                    if (isMobile) {\n                        that._positionColumnResizeHandleTouch(container);\n                    } else {\n                        that._positionColumnResizeHandle(container);\n                    }\n\n                    if (that.resizable) {\n                        that.resizable.destroy();\n                    }\n\n                    that.resizable = new ui.Resizable(container.add(that.lockedHeader), {\n                        handle: (!!options.scrollable ? \"\" : \">\") + \".k-resize-handle\",\n                        hint: function(handle) {\n                            return $('<div class=\"k-grid-resize-indicator\" />').css({\n                                height: outerHeight(handle.data(\"th\")) + that.tbody.attr(\"clientHeight\")\n                            });\n                        },\n                        start: function(e) {\n                            th = $(e.currentTarget).data(\"th\");\n\n                            if (isMobile) {\n                                that._hideResizeHandle();\n                            }\n\n                            var header = th.closest(\"table\"),\n                                index = $.inArray(th[0], leafDataCells(th.closest(\"thead\")).filter(\":visible\"));\n\n                            isLocked = header.parent().hasClass(\"k-grid-header-locked\");\n\n                            var contentTable = isLocked ? that.lockedTable : that.table,\n                                footer = that.footer || $();\n\n                            if (that.footer && that.lockedContent) {\n                                footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n                            }\n\n                            cursor(that.wrapper, 'col-resize');\n\n                            if (options.scrollable) {\n                                col = header.find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index)\n                                    .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                                    .add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n                            } else {\n                                col = contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n                            }\n\n                            var columns = $.map(that.columns, function(a) {\n                                return !a.hidden && ((isLocked && a.locked) || ((!isLocked && !a.locked))) ? a : null;\n                            });\n\n                            columnStart = e.x.location;\n                            columnWidth = outerWidth(th);\n                            columnMinWidth = leafColumns(columns)[index].minResizableWidth || 10;\n                            gridWidth = isLocked ? outerWidth(contentTable.children(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n\n                            // fix broken UI in Chrome38+\n                            if (browser.webkit) {\n                                that.wrapper.addClass(\"k-grid-column-resizing\");\n                            }\n                        },\n                        resize: function(e) {\n                            var rtlMultiplier = isRtl ? -1 : 1,\n                                currentWidth = columnWidth + (e.x.location * rtlMultiplier) - (columnStart * rtlMultiplier);\n\n                            if (options.scrollable) {\n                                var footer;\n                                if (isLocked && that.lockedFooter) {\n                                    footer = that.lockedFooter.children(\"table\");\n                                } else if (that.footer) {\n                                    footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                                }\n                                if (!footer || !footer[0]) {\n                                    footer = $();\n                                }\n                                var header = th.closest(\"table\");\n                                var contentTable = isLocked ? that.lockedTable : that.table;\n                                var constrain = false;\n                                var totalWidth = that.wrapper.width() - scrollbar;\n                                var width = currentWidth;\n\n                                if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                                    width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                                    if (width < 0) {\n                                        width = currentWidth;\n                                    }\n                                    constrain = true;\n                                }\n\n                                if (width > 10 && width >= columnMinWidth) {\n                                    col.css('width', width);\n\n                                    if (gridWidth) {\n                                        if (constrain) {\n                                            width = totalWidth - scrollbar * 2;\n                                        } else {\n                                            width = gridWidth + (e.x.location * rtlMultiplier) - (columnStart * rtlMultiplier);\n                                        }\n\n                                        contentTable\n                                            .add(header)\n                                            .add(footer)\n                                            .css('width', width);\n\n                                        if (!isLocked) {\n                                            that._footerWidth = width;\n                                        }\n                                    }\n                                }\n\n                                that._scrollVirtualWrapperOnColumnResize();\n                            } else if (currentWidth > 10 && currentWidth >= columnMinWidth) {\n                                col.css('width', currentWidth);\n                            }\n                        },\n                        resizeend: function() {\n                            var newWidth = outerWidth(th),\n                                column,\n                                header;\n\n                            cursor(that.wrapper, \"\");\n\n                            if (browser.webkit) {\n                                that.wrapper.removeClass(\"k-grid-column-resizing\");\n                            }\n\n                            if (th && columnWidth != newWidth) {\n                                header = that.lockedHeader ? that.lockedHeader.find(\"thead\").first().find(TR).first().add(that.thead.find(TR).first()) : th.parent();\n\n                                var index = th.attr(kendo.attr(\"index\"));\n                                if (!index) {\n                                    index = header.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").index(th);\n                                }\n                                column = leafColumns(that.columns)[index];\n\n                                column.width = newWidth;\n\n                                that.trigger(COLUMNRESIZE, {\n                                    column: column,\n                                    oldWidth: columnWidth,\n                                    newWidth: newWidth\n                                });\n\n                                that._applyLockedContainersWidth();\n                                that._syncLockedContentHeight();\n                                that._syncLockedHeaderHeight();\n                                that._updateStickyColumns();\n                            }\n\n                            that._resetResizeHandleHeader();\n                            that._hideResizeHandle();\n                            th = null;\n                        }\n                    });\n\n                }\n            },\n\n            // Row resizing functionality below\n            _addLockedRowResizing: function(tr) {\n                var index = tr.index();\n\n                return this.lockedTable.find(TR).eq(index)\n                    .add(this.tbody.find(TR).eq(index));\n            },\n\n            _getMinRowHeight: function(row) {\n                var minHeight = 0;\n\n                row.each(function (i, el) {\n                    var currentMinHeight;\n\n                    el.style.height = '';\n                    currentMinHeight = outerHeight(el);\n\n                    if (currentMinHeight > minHeight) {\n                        minHeight = currentMinHeight;\n                    }\n                });\n\n                return minHeight;\n            },\n\n            _cacheRowHeight: function(rows, height) {\n                var that = this;\n\n                if (!that._cachedRowsHeight) {\n                    that._cachedRowsHeight = {};\n                }\n\n                rows.each(function (i, el) {\n                    var uid = el.getAttribute(\"data-uid\");\n\n                    that._cachedRowsHeight[uid] = height;\n                });\n            },\n\n            _clearCachedRowsHeight: function(rows) {\n                var that = this;\n\n                if (rows && that._cachedRowsHeight) {\n                    rows.each(function (i, el) {\n                        var uid = el.getAttribute(\"data-uid\");\n\n                        delete that._cachedRowsHeight[uid];\n                    });\n                } else {\n                    that._cachedRowsHeight = null;\n                }\n            },\n\n            _mapCachedRowsHeight: function(method, target) {\n                var input = this._cachedRowsHeight,\n                    ds = this.dataSource,\n                    output = {};\n\n                Object.keys(input).forEach(function (key) {\n                    var item = ds[method](key);\n\n                    output[item[target]] = input[key];\n                });\n\n                this._cachedRowsHeight = output;\n            },\n\n            _rowResizerDblClick: function() {\n                var that = this,\n                    resizer = that.rowResizer,\n                    row = resizer.data(TR),\n                    oldHeight = outerHeight(row),\n                    newHeight, rows;\n\n                if (row.hasClass(SELECTED)) {\n                    rows = that.select();\n                } else {\n                    rows = row;\n                }\n\n                if (that.lockedTable) {\n                    row = that._addLockedRowResizing(row);\n\n                    if (row.hasClass(SELECTED)) {\n                        rows = that.lockedTable.find(DOT + SELECTED);\n                    } else {\n                        rows = that.lockedTable.find(TR).eq(row.index());\n                    }\n\n                    rows.each(function (i, el) {\n                        var rowIndex = el.rowIndex,\n                            rowPair = $(el).add(that.tbody.find(TR).eq(rowIndex)),\n                            pairMinHeight = that._getMinRowHeight(rowPair);\n\n                        rowPair.css(HEIGHT, pairMinHeight);\n                    });\n                } else {\n                    rows.css(HEIGHT, AUTO);\n                }\n\n                that._clearCachedRowsHeight(rows);\n\n                resizer.removeClass(HOVER);\n                resizer.removeClass(ACTIVE);\n\n                newHeight = outerHeight(row);\n\n                if (oldHeight != newHeight) {\n                    that.trigger(ROWRESIZE, {\n                        row: row,\n                        rows: rows,\n                        oldHeight: oldHeight,\n                        newHeight: newHeight\n                    });\n                }\n            },\n\n            _setupRowResizer: function _setupRowResizer(resizer, row, top) {\n                resizer\n                    .data(TR, row)\n                    .css({\n                        top: top\n                    });\n            },\n\n            _attachRowResizerEvents: function() {\n                var rowResizer = this.rowResizer,\n                    delay = 200,\n                    isIn = false;\n\n                rowResizer\n                    .on(MOUSEDOWN + NS, function (e) {\n                        if (e.button === 0) {\n                            rowResizer.removeClass(HOVER);\n                            rowResizer.addClass(ACTIVE);\n                        }\n                    })\n                    .on(MOUSEUP + NS, function (e) {\n                        if (e.button === 0) {\n                            rowResizer.removeClass(ACTIVE);\n                            rowResizer.addClass(HOVER);\n                        }\n                    })\n                    .on(MOUSEENTER + NS, function () {\n                        isIn = true;\n\n                        setTimeout(function () {\n                            if (isIn) {\n                                rowResizer.addClass(HOVER);\n                            }\n                        }, delay);\n                    })\n                    .on(MOUSELEAVE + NS, function () {\n                        isIn = false;\n                        rowResizer.removeClass(HOVER);\n                    });\n            },\n\n            _getResizerTop: function(tr, container) {\n                var resizer = this.rowResizer,\n                    inner = resizer.find(DOT + ROW_RESIZER)[0],\n                    paddingTop = parseInt(getComputedStyle(resizer[0]).paddingTop);\n\n                return tr.offset().top -\n                    parseFloat(tr.css(\"marginTop\")) -\n                    (container.offset().top + parseFloat(container.css(\"borderTopWidth\"))) -\n                    inner.clientHeight -\n                    paddingTop +\n                    container.scrollTop();\n            },\n\n            _getResizerContainer: function() {\n                var container = this.tbody.closest(DIV);\n\n                if (this.lockedTable) {\n                    container = container.closest(DOT + \"k-grid-container\");\n                }\n\n                return container;\n            },\n\n            _createRowResizer: function(e) {\n                var that = this,\n                    tr = $(e.currentTarget),\n                    targetHeight = e.currentTarget.clientHeight,\n                    positionIntarget = e.offsetY,\n                    rowResizer = that.rowResizer,\n                    previousRow = tr.prev(TR + \":visible\"),\n                    container = that._getResizerContainer(),\n                    top;\n\n                if (!rowResizer) {\n                    rowResizer = that.rowResizer = $('<div class=\"k-resizer-wrap\"><div class=\"k-row-resizer\"></div></div>');\n                    container.append(rowResizer);\n                    that._attachRowResizerEvents();\n\n                    rowResizer.off(DUBLECLICK + NS).on(DUBLECLICK + NS, that._rowResizerDblClick.bind(that));\n                }\n\n                top = that._getResizerTop(tr, container);\n\n                if (previousRow.length !== 0 && targetHeight / 2 > positionIntarget) {\n                    if (!previousRow.hasClass(GROUPING_ROW)) {\n                        that._setupRowResizer(rowResizer, previousRow, top);\n                    }\n                } else {\n                    if (!tr.hasClass(GROUPING_ROW)) {\n                        that._setupRowResizer(rowResizer, tr, top + targetHeight);\n                    }\n                }\n            },\n\n            _detachRowResizerEvents: function() {\n                var rowResizer = this.rowResizer;\n\n                rowResizer\n                    .off(MOUSEDOWN + NS)\n                    .off(MOUSEUP + NS)\n                    .off(MOUSEENTER + NS)\n                    .off(MOUSELEAVE + NS);\n            },\n\n            _mapResizedRows: function(rows, multiSelectionLocked, newHeight) {\n                var that = this;\n\n                rows.each(function (i, el) {\n                    var minHeight;\n\n                    if (multiSelectionLocked) {\n                        var rowIndex = el.rowIndex,\n                            pairNew = newHeight,\n                            pairMin = 0,\n                            rowPair = $(el).add(that.tbody.find(TR).eq(rowIndex));\n\n                        rowPair.each(function (i, r) {\n                            var currentMinHeight;\n\n                            r.style.height = '';\n                            currentMinHeight = outerHeight(r);\n\n                            if (currentMinHeight > pairMin) {\n                                pairMin = currentMinHeight;\n                            }\n                        });\n\n                        if (pairNew < pairMin) {\n                            pairNew = pairMin;\n\n                            that._clearCachedRowsHeight(rowPair.eq(0));\n                        } else {\n                            that._cacheRowHeight(rowPair.eq(0), pairNew);\n                        }\n\n                        rowPair.css(HEIGHT, pairNew);\n                    } else {\n                        el.style.height = '';\n                        minHeight = outerHeight(el);\n\n                        if (newHeight > minHeight) {\n                            el.style.height = newHeight + PX;\n\n                            that._cacheRowHeight($(el), newHeight);\n                        } else {\n                            that._clearCachedRowsHeight($(el));\n                        }\n                    }\n                });\n            },\n\n            _rowResizing: function() {\n                var that = this,\n                    options = that.options,\n                    container, rowStart, rowHeight, tr;\n\n                if (options.resizable && options.resizable.rows === true) {\n                    that.tbody\n                        .parent()\n                        .add(that.lockedTable)\n                        .on(MOUSEMOVE + NS, \".k-grid-footer tr, .k-table-tbody tr\", that._createRowResizer.bind(that));\n\n                    if (that.rowResizing) {\n                        that.rowResizing.destroy();\n                    }\n\n                    container = that._getResizerContainer();\n\n                    that.rowResizing = new ui.Resizable(container, {\n                        handle: DOT + ROW_RESIZER_WRAP,\n                        start: function(e) {\n                            tr = $(e.currentTarget).data(TR);\n\n                            if (that.lockedTable) {\n                                tr = that._addLockedRowResizing(tr);\n                            }\n\n                            tr.addClass(HOVER);\n\n                            that._detachRowResizerEvents();\n\n                            rowStart = e.y.location;\n                            rowHeight = outerHeight(tr);\n                        },\n                        resize: function(e) {\n                            var newHeight = rowHeight + e.y.location - rowStart,\n                                minHeight = 0;\n\n                            if (tr.length > 1) {\n                                minHeight = that._getMinRowHeight(tr);\n                            }\n\n                            if (newHeight < minHeight) {\n                                newHeight = minHeight;\n                            }\n\n                            tr.css('height', newHeight);\n\n                            that._setupRowResizer(that.rowResizer, tr, that._getResizerTop(tr, container) + newHeight);\n                        },\n                        resizeend: function() {\n                            var newHeight = outerHeight(tr),\n                                multiSelectionLocked = false,\n                                rows;\n\n                            if (tr.hasClass(SELECTED)) {\n                                rows = that.select();\n\n                                if (tr.length > 1 && rows.length > tr.length) {\n                                    rows = that.lockedTable.find(DOT + SELECTED).not(tr);\n                                    multiSelectionLocked = true;\n                                }\n                            } else {\n                                rows = tr;\n                            }\n\n                            that._mapResizedRows(rows, multiSelectionLocked, newHeight);\n\n                            tr.removeClass(HOVER);\n\n                            that.rowResizer.removeClass(ACTIVE);\n                            that.rowResizer.addClass(HOVER);\n                            that._attachRowResizerEvents();\n\n                            if (multiSelectionLocked) {\n                                rows = that.select();\n                            }\n\n                            if (rowHeight != newHeight) {\n                                that.trigger(ROWRESIZE, {\n                                    row: tr,\n                                    rows: rows,\n                                    oldHeight: rowHeight,\n                                    newHeight: newHeight\n                                });\n                            }\n\n                            tr = null;\n                        }\n                    });\n                }\n            },\n\n            _draggable: function() {\n                var that = this,\n                    reorderable = that.options.reorderable;\n\n                if (reorderable === true || (reorderable && reorderable.columns)) {\n\n                    if (that._draggableInstance) {\n                        that._draggableInstance.destroy();\n                    }\n\n                    var header = that.wrapper.children(\".k-grid-header\");\n\n                    that._draggableInstance = that.wrapper.kendoDraggable({\n                        group: kendo.guid(),\n                        autoScroll: true,\n                        filter: that.content ? \".k-grid-header:first \" + HEADERCELLS : \"table:first>.k-grid-header \" + HEADERCELLS,\n                        dragstart: function() {\n                            header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\").on(\"scroll\" + NS + \"scrolling\", function(e) {\n                                if (that.virtualScrollable) {\n                                    kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\"), this.scrollLeft);\n                                } else {\n                                    kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                                }\n                            });\n                        },\n                        dragend: function() {\n                            that._resetResizeHandleHeader();\n                            header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\");\n                        },\n                        drag: function() {\n                            that._hideResizeHandle();\n                        },\n                        hint: function(target) {\n                            var title = target.attr(kendo.attr(\"title\"));\n                            if (title) {\n                                title = kendo.htmlEncode(title);\n                            }\n                            return $('<div class=\"k-reorder-clue k-drag-clue\" />')\n                                .html(title || target.attr(kendo.attr(\"field\")) || target.text())\n                                .prepend(kendo.ui.icon({ icon: \"cancel\", iconClass: \"k-drag-status\" }));\n                        }\n                    }).data(\"kendoDraggable\");\n                }\n            },\n\n            _reorderable: function() {\n                var that = this,\n                    reorderable = that.options.reorderable;\n\n                if (reorderable === true || (reorderable && reorderable.columns)) {\n                    if (that.wrapper.data(\"kendoReorderable\")) {\n                        that.wrapper.data(\"kendoReorderable\").destroy();\n                    }\n\n                    that.wrapper.kendoReorderable({\n                        draggable: that._draggableInstance,\n                        dropFilter: HEADERCELLS,\n                        dragOverContainers: function(sourceIndex, targetIndex) {\n                            var columns = flatColumnsInDomOrder(that.columns);\n                            return columns[sourceIndex].lockable !== false && targetParentContainerIndex(columns, that.columns, sourceIndex, targetIndex) > -1;\n                        },\n                        inSameContainer: function(e) {\n                            var sourceParent = $(e.source).parent()[0],\n                                targetParent = $(e.target).parent()[0];\n\n                            /* If there are locked columns, check if the grid header is the same instead.\n                            Otherwise the locked/unlocked headers are treated as separate(in the case of column reordering they shouldn't be). */\n                            if (that._isLocked()) {\n                                sourceParent = $(e.source.closest(\".k-grid-header\"))[0];\n                                targetParent = $(e.target.closest(\".k-grid-header\"))[0];\n                            }\n\n                            return sourceParent === targetParent && targetParentContainerIndex(flatColumnsInDomOrder(that.columns), that.columns, e.sourceIndex, e.targetIndex) > -1;\n                        },\n                        change: function(e) {\n                            var columns = flatColumnsInDomOrder(that.columns);\n                            var column = columns[e.oldIndex];\n                            var newIndex = targetParentContainerIndex(columns, that.columns, e.oldIndex, e.newIndex);\n\n                            that.trigger(COLUMNREORDER, {\n                                newIndex: newIndex,\n                                oldIndex: inArray(column, columns),\n                                column: column\n                            });\n\n                            that.reorderColumn(newIndex, column, e.position === \"before\");\n                        }\n                    });\n                }\n            },\n\n            _reorderHeader: function(sources, target, before, container) {\n                var that = this;\n                var sourcePosition = columnPosition(sources[0], that.columns);\n                var destPosition = columnPosition(target, that.columns);\n                var action;\n                var ths;\n\n                var leafs = [];\n                for (var idx = 0; idx < sources.length; idx++) {\n                    if (sources[idx].columns) {\n                        leafs = leafs.concat(sources[idx].columns);\n                    }\n                }\n                if (container) {\n                    ths = elements(container, container, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n                } else {\n                    ths = elements(that.lockedHeader, that.thead, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n                }\n\n                var sourceLockedColumns = lockedColumns(sources).length;\n                var targetLockedColumns = lockedColumns([target]).length;\n\n                if (leafs.length) {\n                    if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                        action = \"prepend\";\n                        moveCellsBetweenContainers(sources, target, leafs, that.columns, that.lockedHeader.find(\"thead\"), that.thead, this._groups(), action);\n                    } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                        action = destPosition.cell === 0 && sources[0].columns && !target.columns && !that._group ? \"prepend\" : \"append\";\n                        moveCellsBetweenContainers(sources, target, leafs, nonLockedColumns(that.columns), that.thead, that.lockedHeader.find(\"thead\"), this._groups(), action);\n                    }\n\n                    if (target.columns || sourcePosition.cell - destPosition.cell > 1 || destPosition.cell - sourcePosition.cell > 1) {\n                        target = findReorderTarget(that.columns, target, sources[0], before, that.columns);\n                        if (target) {\n                            if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                                that._reorderHeader(leafs, target, before, that.thead);\n                            } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                                that._reorderHeader(leafs, target, before, that.lockedHead);\n                            } else {\n                                that._reorderHeader(leafs, target, before);\n                            }\n                        }\n                    }\n                } else if (sourceLockedColumns !== targetLockedColumns) { // move between containers\n                    updateCellRowSpan(ths[sourcePosition.cell], that.columns, sourceLockedColumns);\n                }\n\n                reorder(ths, sourcePosition.cell, destPosition.cell, before, sources.length);\n            },\n\n            _reorderContent: function(sources, destination, before) {\n                var that = this;\n                var lockedRows = $();\n                var source = sources[0];\n                var visibleSources = visibleColumns(sources);\n                var sourceIndex = inArray(source, leafColumns(that.columns));\n                var destIndex = inArray(destination, leafColumns(that.columns));\n\n                var colSourceIndex = inArray(visibleSources[0], visibleLeafColumns(that.columns));\n                var colDest = inArray(destination, visibleLeafColumns(that.columns));\n                var lockedCount = lockedColumns(that.columns).length;\n                var isLocked = !!destination.locked;\n                var footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n                var headerCol, footerCol, beforeVisibleColumn;\n                headerCol = footerCol = colDest;\n\n                if (destination.hidden) {\n                    var columnsArray = isLocked ? lockedColumns(that.columns) : nonLockedColumns(that.columns);\n\n                    if (visibleColumns(columnsArray).length > 0) {\n                        headerCol = footerCol = colDest = this._findClosestVisibleColumnIndex(columnsArray, destIndex);\n                        beforeVisibleColumn = visibleColumns(columnsArray.slice(destIndex)).length > 0;\n                    }\n                    else {\n                        if (isLocked) {\n                            colDest = that.lockedTable.find(\"colgroup\");\n                            headerCol = that.lockedHeader.find(\"colgroup\");\n                            footerCol = $(that.lockedFooter).find(\">table>colgroup\");\n                        } else {\n                            colDest = that.tbody.prev();\n                            headerCol = that.thead.prev();\n                            footerCol = footer.find(\".k-grid-footer-wrap\").find(\">table>colgroup\");\n                        }\n                    }\n                }\n\n                if (that._hasFilterRow()) {\n                    reorder(that.wrapper.find(\".k-filter-row td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n                }\n\n                if (colSourceIndex >= 0) {\n                    reorder(elements(that.lockedHeader, that.thead.prev(), COLGROUP), colSourceIndex, headerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                }\n\n                if (that.options.scrollable) {\n                    if (colSourceIndex >= 0 && !that._hasVirtualColumns()) {\n                        reorder(elements(that.lockedTable, that.tbody.prev(), COLGROUP), colSourceIndex, colDest, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                    }\n                }\n\n                if (footer && footer.length) {\n                    if (colSourceIndex >= 0) {\n                        reorder(elements(that.lockedFooter, footer.find(\".k-grid-footer-wrap\"), \">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)\"), colSourceIndex, footerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                    }\n                    reorder(footer.find(\".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n                }\n\n                var rows = that.tbody.children(\":not(.k-grouping-row,.k-detail-row)\");\n                if (that.lockedTable) {\n                    if (lockedCount > destIndex) {\n                        if (lockedCount <= sourceIndex) {\n                            updateColspan(\n                                that.lockedTable.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                                that.table.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                                sources.length\n                            );\n                        }\n                    } else if (lockedCount > sourceIndex) {\n                        updateColspan(\n                            that.table.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                            that.lockedTable.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                            sources.length\n                        );\n                    }\n\n                    lockedRows = that.lockedTable.find(\">tbody>tr:not(.k-grouping-row,.k-detail-row)\");\n                }\n\n                for (var idx = 0, length = rows.length; idx < length; idx += 1) {\n                    reorder(elements(lockedRows[idx], rows[idx], \">td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n                }\n            },\n\n            _findClosestVisibleColumnIndex: function(columns, columnIndex) {\n                var columnsArray = visibleColumns(columns.slice(columnIndex)).length > 0 ? columns.slice(columnIndex) : columns.slice(0, columnIndex + 1).reverse(),\n                    closestVisibleColumn = visibleColumns(columnsArray)[0];\n\n                return inArray(closestVisibleColumn, visibleColumns(this.columns));\n            },\n\n            _autoFitLeafColumn: function(leafIndex) {\n                this.autoFitColumn(leafColumns(this.columns)[leafIndex]);\n            },\n\n            _hasReorderableRows: function() {\n                return this._hasDragHandleColumn || (this.options.reorderable && this.options.reorderable.rows);\n            },\n\n            _draggableRows: function() {\n                var that = this,\n                    selectable = that._checkBoxSelection ||\n                        (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell),\n                    clickMoveClick = false,\n                    isMobile = !!(that._isMobile || kendo.support.mobileOS);\n\n                if (that._draggableRowsInstance) {\n                    that._draggableRowsInstance.destroy();\n                }\n\n                if (this.options.reorderable.rows.clickMoveClick !== false && this._hasDragHandleColumn) {\n                    clickMoveClick = true;\n                }\n\n                that._draggableRowsInstance = that.tbody.kendoDraggable({\n                    holdToDrag: isMobile,\n                    showHintOnHold: isMobile,\n                    preventOsHoldFeatures: isMobile,\n                    group: \"row-draggable\",\n                    autoScroll: true,\n                    filter: (selectable ? \" > .k-selected\" : \" > \" + ITEMROW) + (that._hasDragHandleColumn ? \" > .k-drag-cell\" : \"\"),\n                    hint: function(target) {\n                        var hint = $('<div class=\"k-reorder-clue k-drag-clue\">' + kendo.ui.icon({ icon: \"cancel\", iconClass: \"k-drag-status\" }) + '</div>');\n\n                        if (selectable && that.select().length > 1) {\n                            hint.append(\"<span>\" + that.select().length + \" \" + encode(that.options.messages.itemsSelected) + \"</span>\");\n                        } else {\n                            var clone = target.closest(ITEMROW).clone();\n                            clone.find(\"td.k-command-cell\").remove();\n                            clone.find(\"td\").each(function(index, elm) {\n                                hint.append(\"<span>\" + elm.innerText + \"&nbsp;</span>\");\n                            });\n                        }\n\n                        return hint;\n                    },\n                    clickMoveClick: clickMoveClick,\n                    cursorOffset: { top: 0, left: 0 }\n                }).data(\"kendoDraggable\");\n            },\n\n            _reorderableRows: function() {\n                var that = this,\n                    selectable = that._checkBoxSelection ||\n                                (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n                if (that.tbody.data(\"kendoReorderable\")) {\n                    that.tbody.data(\"kendoReorderable\").destroy();\n                }\n\n                that.tbody.kendoReorderable({\n                    smartPosition: false,\n                    draggable: that._draggableRowsInstance,\n                    dragOverContainers: function(sourceIndex, targetIndex) {\n                        var result = true,\n                            target = $(ITEMROW, that.content).eq(targetIndex);\n\n                        if (selectable) {\n                            result = !target.is(\".k-selected\");\n                        }\n\n                        return result;\n                    },\n                    inSameContainer: function(e) {\n                        if (selectable) {\n                            return !$(e.target).is(\".k-selected\");\n                        }\n\n                        return true;\n                    },\n                    dropFilter: \"> \" + ITEMROW,\n                    allowIcon: \"insert-middle\",\n                    orientation: \"vertical\",\n                    reorderDropCue: $('<div class=\"k-drop-hint k-drop-hint-h\"><div class=\"k-drop-hint-start\"></div><div class=\"k-drop-hint-line\"></div></div>'),\n                    positionDropCue: function(reorderDropCue, dropTarget) {\n                        var firstCellLeft = kendo.getOffset(dropTarget.children(DATA_CELL).eq(0)).left;\n                        reorderDropCue.css({\n                            transform: \"translate(0,-50%)\",\n                            left: firstCellLeft\n                        });\n                    },\n                    externalDraggable: function(e) {\n                        var draggable = e.draggable;\n\n                        if (draggable) {\n                            return draggable;\n                        }\n                    },\n                    change: function(e) {\n                        that._triggerRowRorder(e);\n                    }\n                });\n            },\n\n            _triggerRowRorder: function(e) {\n                var that = this,\n                    args = {\n                        newIndex: e.position === \"after\" ? e.newIndex + 1 : e.newIndex,\n                        oldIndex: e.oldIndex\n                    },\n                    row = e.element,\n                    selectable = that._checkBoxSelection ||\n                    (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n                if (selectable && that.select().length > 1) {\n                    args = extend(args, {\n                        rows: that.select()\n                    });\n                } else {\n                    args = extend(args, {\n                        row: row\n                    });\n                }\n\n                if (!that.trigger(ROWREORDER, args)) {\n                    that.reorderRows(selectable ? that.select() : row, args.newIndex);\n                }\n            },\n\n            reorderRowTo: function(row, index) {\n                var that = this,\n                    item = that.dataItem(row),\n                    oldIndex = row.index();\n\n                if (index < 0 || index === oldIndex) {\n                    return;\n                }\n\n                if (!that.trigger(ROWREORDER, {\n                    row: row,\n                    oldIndex: row.index(),\n                    newIndex: index\n                })) {\n                    that.dataSource.pushMove(index, [item]);\n                }\n            },\n\n            reorderRows: function(rows, index) {\n                var that = this,\n                    dataSource = that.dataSource,\n                    rowsLength = that.tbody.children(ITEMROW).length,\n                    targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(index)),\n                    items = rows.toArray().map(function(row) {\n                        return that.dataItem(row);\n                    });\n\n                if (!targetItem) {\n                    // If index is after last row dataItem wouldn't exist\n                    targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(rowsLength - 1));\n                    index = dataSource.indexOf(targetItem) + 1;\n                } else {\n                    index = dataSource.indexOf(targetItem);\n                }\n\n                if (index >= 0) {\n                    that._rowDropping = true;\n                    dataSource.pushMove(index, items);\n                    that._rowDropping = false;\n                }\n            },\n\n            autoFitColumns: function(columns) {\n                var that = this;\n\n                columns = columns || that.columns;\n\n                for (var i = 0; i < columns.length; i++) {\n                    var column = columns[i];\n\n                    if (column.columns) {\n                        that.autoFitColumns(column.columns);\n                    } else {\n                        that.autoFitColumn(column);\n                    }\n                }\n            },\n\n            autoFitColumn: function(column) {\n                var that = this,\n                    options = that.options,\n                    columns = that.columns,\n                    index,\n                    th,\n                    headerTable,\n                    leafCols,\n                    isLocked,\n                    visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                    col,\n                    minWidth,\n                    contentDiv, scrollLeft,\n                    notGroupOrHierarchyCol = \"col:not(.k-group-col):not(.k-hierarchy-col)\",\n                    notGroupOrHierarchyVisibleCell = \"td:visible:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                    menu,\n                    thWidth;\n\n                //  retrieve the column object, depending on the method argument\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    column = grep(flatColumns(columns), function(item) {\n                        return item === column;\n                    })[0];\n                } else {\n                    column = grep(flatColumns(columns), function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || !isVisible(column)) {\n                    return;\n                }\n\n                leafCols = leafColumns(columns);\n                minWidth = column.minResizableWidth;\n                index = inArray(column, leafCols);\n                isLocked = column.locked;\n\n                if (isLocked) {\n                    headerTable = that.lockedHeader.children(\"table\");\n                } else {\n                    headerTable = that.thead.parent();\n                }\n\n                th = headerTable.find(\"[data-index='\" + index + \"']\");\n                menu = th.find('a.k-grid-column-menu, a.k-grid-filter-menu');\n\n                var contentTable = isLocked ? that.lockedTable : that.table,\n                    footer = that.footer || $();\n\n                if (that.footer && that.lockedContent) {\n                    footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n                }\n\n                var footerTable = footer.find(\"table\").first();\n\n                if (that.lockedHeader && !isLocked) {\n                    index -= visibleLocked;\n                }\n\n                // adjust column index, depending on previous hidden columns\n                for (var j = 0; j < leafCols.length; j++) {\n                    if (leafCols[j] === column) {\n                        break;\n                    } else {\n                        if (leafCols[j].hidden) {\n                            index--;\n                        }\n                    }\n                }\n\n                // get col elements\n                if (options.scrollable) {\n                    col = headerTable.find(notGroupOrHierarchyCol).eq(index)\n                        .add(contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index))\n                        .add(footerTable.find(\"colgroup\").find(notGroupOrHierarchyCol).eq(index));\n\n                    if (!isLocked) {\n                        contentDiv = contentTable.parent();\n                        scrollLeft = kendo.scrollLeft(contentDiv);\n                    }\n                } else {\n                    col = contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index);\n                }\n\n                var tables = headerTable.add(contentTable).add(footerTable);\n\n                if (browser.safari) {\n                    th.css(\"white-space\", \"initial\");\n                }\n\n                var oldColumnWidth = outerWidth(th);\n\n                // reset the table and autofitted column widths\n                // if scrolling is disabled, we need some additional repainting of the table\n                col.width(\"\");\n                tables.css(\"table-layout\", \"fixed\");\n                col.width(AUTO);\n                tables.addClass(\"k-autofitting\");\n                tables.css(\"table-layout\", \"\");\n\n                thWidth = menu.length ? outerWidth(menu) + outerWidth(th) : outerWidth(th);\n\n                // +1 is required by IE, regardless of the border widths, otherwise unexpected wrapping may occur with hyphenated text\n                var newColumnWidth = Math.ceil(Math.max(\n                    thWidth,\n                    outerWidth(contentTable.find(\"tr:not(.k-grouping-row)\").eq(0).children(notGroupOrHierarchyVisibleCell).eq(index)),\n                    outerWidth(footerTable.find(TR).eq(0).children(notGroupOrHierarchyVisibleCell).eq(index))\n                )) + 1;\n\n                if (minWidth && minWidth > newColumnWidth) {\n                    newColumnWidth = minWidth;\n                }\n\n                col.width(newColumnWidth);\n                column.width = newColumnWidth;\n\n                if (browser.safari) {\n                    th.css(\"white-space\", \"\");\n                }\n\n                // if all visible columns have widths, the table needs a pixel width as well\n                if (options.scrollable) {\n                    var cols = headerTable.find(\"col\"),\n                        colWidth,\n                        totalWidth = 0;\n                    for (var idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n                        if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                            totalWidth += parseInt(colWidth, 10);\n                        } else if (cols.eq(idx).hasClass(\"k-group-col\")) {\n                            totalWidth += parseInt(cols.eq(idx).width(), 10);\n                        } else {\n                            totalWidth = 0;\n                            break;\n                        }\n                    }\n\n                    if (totalWidth) {\n                        tables.each(function() {\n                            this.style.width = totalWidth + PX;\n                        });\n                    }\n                }\n\n                tables.removeClass(\"k-autofitting\");\n\n                if (scrollLeft) {\n                    kendo.scrollLeft(contentDiv, scrollLeft);\n                }\n\n                that.trigger(COLUMNRESIZE, {\n                    column: column,\n                    oldWidth: oldColumnWidth,\n                    newWidth: newColumnWidth\n                });\n\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n                that._updateStickyColumns();\n            },\n\n            reorderColumn: function(destIndex, column, before) {\n                var that = this,\n                    parent = columnParent(column, that.columns),\n                    columns = parent ? parent.columns : that.columns,\n                    sourceIndex = inArray(column, columns),\n                    destColumn = columns[destIndex],\n                    virtualScroll = that.virtualScroll || {},\n                    lockChanged,\n                    isLocked = !!destColumn.locked,\n                    lockedCount = lockedColumns(that.columns).length,\n                    groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n                if (sourceIndex === destIndex) {\n                    return;\n                }\n\n                if (!column.locked && isLocked && nonLockedColumns(that.columns).length == 1) {\n                    return;\n                }\n\n                if (column.locked && !isLocked && lockedCount == 1) {\n                    return;\n                }\n\n                that._hideResizeHandle();\n\n                if (before === undefined$1) {\n                    before = destIndex < sourceIndex;\n                }\n\n                var sourceColumns = [column];\n\n                that._reorderHeader(sourceColumns, destColumn, before);\n\n                if (that.lockedHeader) {\n                    removeEmptyRows(that.thead);\n                    removeEmptyRows(that.lockedHeader);\n                }\n\n                if (destColumn.columns) {\n                    destColumn = leafColumns(destColumn.columns);\n                    destColumn = destColumn[before ? 0 : destColumn.length - 1];\n                }\n\n                if (column.columns) {\n                    sourceColumns = leafColumns(column.columns);\n                }\n\n                that._reorderContent(sourceColumns, destColumn, before);\n\n                lockChanged = !!column.locked;\n                lockChanged = lockChanged != isLocked;\n                column.locked = isLocked;\n\n                columns.splice(before ? destIndex : destIndex + 1, 0, column);\n                columns.splice(sourceIndex < destIndex ? sourceIndex : sourceIndex + 1, 1);\n\n                that._updateLockedCols();\n                that._updateCols();\n                that._templates();\n\n                that._updateColumnCellIndex();\n                that._updateColumnSorters();\n\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n                that._updateTablesWidth();\n                that._applyLockedContainersWidth();\n                that._syncLockedHeaderHeight();\n                that._syncLockedContentHeight();\n                that._updateFirstColumnClass();\n                that._updateStickyColumns();\n\n                if (virtualScroll.columns) {\n                    that.refresh();\n                }\n\n                if (!lockChanged) {\n                    return;\n                }\n\n                if (isLocked) {\n                    that.trigger(COLUMNLOCK, {\n                        column: column\n                    });\n                } else {\n                    that.trigger(COLUMNUNLOCK, {\n                        column: column\n                    });\n                }\n            },\n\n            _updateColumnCellIndex: function() {\n                var header;\n                var offset = 0;\n\n                if (this.lockedHeader) {\n                    header = this.lockedHeader.find(\"thead\");\n                    offset = updateCellIndex(header, lockedColumns(this.columns));\n                }\n                updateCellIndex(this.thead, nonLockedColumns(this.columns), offset);\n            },\n\n            lockColumn: function(column) {\n                var columns = this.columns;\n\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || column.locked || column.hidden) {\n                    return;\n                }\n\n                if (column.sticky) {\n                    this.unstickColumn(columns.indexOf(column));\n                }\n\n                var index = lockedColumns(columns).length - 1;\n                this.reorderColumn(index, column, false);\n            },\n\n            unlockColumn: function(column) {\n                var columns = this.columns;\n\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || !column.locked || column.hidden) {\n                    return;\n                }\n\n                var index = lockedColumns(columns).length;\n                this.reorderColumn(index, column, true);\n            },\n\n            stickColumn: function(column) {\n                var columns = this.columns;\n\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || column.sticky || column.hidden) {\n                    return;\n                }\n\n                if (column.locked) {\n                    this.unlockColumn(columns.indexOf(column));\n\n                    if (column.locked) {\n                        return;\n                    }\n                }\n\n                column.sticky = true;\n                this._updateStickyColumns();\n            },\n\n            unstickColumn: function(column) {\n                var columns = this.columns;\n\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || !column.sticky || column.locked || column.hidden) {\n                    return;\n                }\n\n                this._removeStickyAttributes([column]);\n                this._removeStickyStyles(stickyColumns(columns));\n\n                column.sticky = false;\n                this._updateStickyColumns();\n\n                if (this._anyStickyColumns() === 0) {\n                    this._templates();\n                    if (this._hasFilterRow()) {\n                        this._updateStickyFilterCells();\n                    }\n                }\n            },\n\n            cellIndex: function(td) {\n                var lockedColumnOffset = 0;\n\n                if (this.lockedTable && !$.contains(this.lockedTable[0], td[0])) {\n                    lockedColumnOffset = leafColumns(lockedColumns(this.columns)).length;\n                }\n\n                return $(td).parent().children('td:not(.k-group-cell,.k-hierarchy-cell)').index(td) + lockedColumnOffset;\n            },\n\n            _modelForContainer: function(container) {\n                container = $(container);\n\n                if (!container.is(TR) && this._editMode() !== \"popup\") {\n                    container = container.closest(TR);\n                }\n\n                var id = container.attr(kendo.attr(\"uid\")) || container.find(\".k-popup-edit-form\").attr(kendo.attr(\"uid\"));\n\n                return this.dataSource.getByUid(id);\n            },\n\n            _calculateColumnIndex: function(cell) {\n                var cellIndex = this.cellIndex(cell);\n                var virtualOffset = 0;\n\n                if (this._hasVirtualColumns()) {\n                    virtualOffset = parseInt($(cell).closest(TR).find(\"td\").first().attr(\"colspan\"), 10);\n                    virtualOffset = (virtualOffset > 1 ? virtualOffset - 1 : 0);\n                }\n\n                return cellIndex + virtualOffset;\n            },\n\n            _editable: function() {\n                var obj;\n\n                var that = this,\n                    editable = that.options.editable,\n                    handler = function() {\n                        var target = activeElement(),\n                            cell = that._editContainer;\n\n                        if (cell && cell[0] && !$.contains(cell[0], target) && cell[0] !== target && !$(target).closest(\".k-animation-container\").length) {\n                            if (that.editable.end()) {\n                                that.closeCell();\n                            } else {\n                                that._scrollVirtualWrapper();\n                            }\n                        }\n                    },\n                    useDoubleTapEditing = !!(that._isMobile || kendo.support.mobileOS);\n\n                if (editable) {\n                    this.wrapper.addClass(\"k-editable\");\n\n                    var mode = that._editMode();\n                    if (mode === \"incell\") {\n                        that.table.add(that.lockedTable)\n                            .on(MOUSEDOWN + NS, NAVROW + \">\" + NAVCELL, function(e) {\n                                var target = $(e.target);\n                                if (that._editMode() === \"incell\" && target.hasClass(\"k-checkbox\") && target.prev().attr(kendo.attr(\"bind\"))) {\n                                    e.preventDefault();\n                                }\n                            });\n\n                        if (editable.update !== false) {\n                            if (isMac) {\n                                that.wrapper\n                                    .on(CLICK + NS, \".k-edit-cell > input[type='checkbox']\", function(e) {\n                                        // checking /unchecking a checkbox does not change the document.activeElement to be the checkbox\n                                        // this is necessary for the \"focusout\" event to be fired\n                                        $(e.target).trigger(\"focus\");\n                                    })\n                                    .on(CLICK + NS, \".k-edit-cell\", function(e) {\n                                        if (!$(e.target).is(\"input\")) {\n                                            $(e.currentTarget).find(\"input[type='checkbox']\").trigger(\"focus\");\n                                        }\n                                    })\n                                    .on(MOUSEDOWN + NS, \"tr:not(.k-grouping-row) > td\", function(e) {\n                                        var editContainer = that._editContainer;\n\n                                        if (editContainer && editContainer[0] && ($.contains(editContainer[0], e.target) || editContainer[0] === e.target)) {\n                                            that._mousedownOnEditCell = true;\n                                        } else {\n                                            that._mousedownOnEditCell = false;\n                                        }\n                                    });\n                            }\n\n                            that.editableUserEvents = new kendo.UserEvents(that.wrapper, ( obj = {\n                                filter: \"tr:not(.k-grouping-row) > td\",\n                                allowSelection: true,\n                                supportDoubleTap: useDoubleTapEditing,\n                                fastTap: useDoubleTapEditing\n                            }, obj[useDoubleTapEditing ? 'doubleTap' : 'tap'] = function(e) {\n                                    var td = $(e.target),\n                                    isLockedCell = that.lockedTable && td.closest(\"table\")[0] === that.lockedTable[0];\n\n                                    that._mousedownOnEditCell = false;\n\n                                    if (td.hasClass(\"k-hierarchy-cell\") ||\n                                        td.hasClass(\"k-detail-cell\") ||\n                                        td.hasClass(\"k-group-cell\") ||\n                                        td.hasClass(\"k-edit-cell\") ||\n                                        td.has(\".k-grid-remove-command\").length ||\n                                        (td.closest(\"tbody\")[0] !== that.tbody[0] && !isLockedCell) ||\n                                        $(e.target).is(\":input\")) {\n                                        return;\n                                    }\n\n                                    if (that.editable) {\n                                        if (that.editable.end()) {\n                                            $(activeElement()).trigger(\"blur\");\n                                            that.closeCell();\n                                            that.editCell(td);\n                                        } else {\n                                            that._scrollVirtualWrapper();\n                                        }\n                                    } else {\n                                        that.editCell(td);\n                                    }\n                                }, obj ));\n\n                            that.wrapper.on(\"focusin\" + NS, function() {\n                                // fix focus issue in IE\n                                if (!$.contains(this, activeElement())) {\n                                    clearTimeout(that.timer);\n                                    that.timer = null;\n                                }\n                            })\n                            .on(\"focusout\" + NS, function(e) {\n                                var shouldCloseCell = true;\n\n                                if ((isMac && that._mousedownOnEditCell) || that._virtualColScroll) {\n                                    shouldCloseCell = false;\n                                }\n\n                                that._mousedownOnEditCell = false;\n\n                                if (shouldCloseCell) {\n                                    that.timer = setTimeout(function() {\n                                        handler(e);\n                                    }, 1);\n                                }\n                            });\n                        }\n                    } else {\n                        if (editable.update !== false) {\n                            that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit-command\", function(e) {\n                                var element = $(this);\n                                if (!that._belongsToGrid(element)) {\n                                    return;\n                                }\n                                e.preventDefault();\n                                that.editRow(element.closest(TR));\n                            });\n\n                            if (that._isVirtualInlineEditable()) {\n                                that.wrapper.on(\"focusout\" + NS, \"tr:not(.k-grouping-row) > td\", function() {\n                                    if (that.editable && !that.editable.end()) {\n                                        that._scrollVirtualWrapper();\n                                    }\n                                });\n                            }\n                        }\n                    }\n\n                    if (editable.destroy !== false) {\n                        that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command\", function(e) {\n                            var element = $(this);\n                            if (!that._belongsToGrid(element)) {\n                                return;\n                            }\n                            e.preventDefault();\n                            e.stopPropagation();\n                            that.removeRow(element.closest(TR));\n                        });\n                    } else {\n                        //Required for the MVC server wrapper delete button\n                        that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command\", function(e) {\n                            if (!that._belongsToGrid($(this))) {\n                                return;\n                            }\n                            e.stopPropagation();\n\n                            if (!that._confirmation()) {\n                                e.preventDefault();\n                            }\n                        });\n                    }\n                }\n            },\n\n            editCell: function(cell) {\n                cell = $(cell);\n\n                var that = this,\n                column = leafColumns(that.columns)[that._calculateColumnIndex(cell)],\n                    model = that._modelForContainer(cell);\n\n                that.closeCell();\n\n                if (model && isColumnEditable(column, model) && !column.command) {\n                    if (that.trigger(BEFOREEDIT, { model: model })) {\n                        return;\n                    }\n\n                    that._attachModelChange(model);\n\n                    that._editContainer = cell;\n\n                    if (that._shouldClearEditableState) {\n                        that._clearEditableState();\n                    }\n                    that.editable = cell.addClass(\"k-edit-cell\")\n                        .kendoEditable({\n                            fields: editField(column),\n                            model: model,\n                            size: that.options.size,\n                            target: that,\n                            change: function(e) {\n                                if (that.trigger(SAVE, { values: e.values, container: cell, model: model } )) {\n                                    e.preventDefault();\n                                }\n                            },\n                            skipFocus: (that._isVirtualIncellEditable() || that._hasVirtualColumns()) && that._editableState ? true : false\n\n                        }).data(\"kendoEditable\");\n\n                    var tr = cell.parent().addClass(\"k-grid-edit-row\");\n\n                    if (that.lockedContent) {\n                        adjustRowHeight(tr[0], that._relatedRow(tr).addClass(\"k-grid-edit-row\")[0]);\n                        that._syncLockedScroll();\n                    }\n\n                    that.trigger(EDIT, { container: cell, model: model });\n                }\n            },\n\n            _adjustLockedHorizontalScrollBar: function() {\n                var table = this.table,\n                    content = table.parent();\n\n                var scrollbar = table[0].offsetWidth > content[0].clientWidth ? kendo.support.scrollbar() : 0;\n                this.lockedContent.height(content[0].offsetHeight - scrollbar);\n            },\n\n            _syncLockedScroll: function() {\n                this.lockedContent[0].scrollTop = this.content[0].scrollTop;\n                if (this.virtualScrollable) {\n                    this.lockedContent[0].scrollTop = this.wrapper.find(\".k-virtual-scrollable-wrap\")[0].scrollTop;\n                }\n            },\n\n            _syncLockedContentHeight: function() {\n                if (this.lockedTable) {\n                    if (!this.touchScroller) {\n                        this._adjustLockedHorizontalScrollBar();\n                    }\n                    this._adjustRowsHeight(this.table, this.lockedTable);\n                }\n            },\n\n            _syncLockedHeaderHeight: function() {\n                if (this.lockedHeader) {\n                    var lockedTable = this.lockedHeader.children(\"table\");\n                    var table = this.thead.parent();\n\n                    this._adjustRowsHeight(lockedTable, table);\n\n                    syncTableHeight(lockedTable, table);\n                }\n            },\n\n            _syncLockedFooterHeight: function() {\n                if (this.lockedFooter && this.footer && this.footer.length) {\n                    this._adjustRowsHeight(this.lockedFooter.children(\"table\"), this.footer.find(\".k-grid-footer-wrap > table\"));\n                }\n            },\n\n            _destroyEditable: function() {\n                var that = this;\n\n                var destroy = function() {\n                    if (that.editable) {\n\n                        var container = that.editView ? that.editView.element : that._editContainer;\n                        var window = that._editContainer.data(\"kendoWindow\");\n\n                        if (container) {\n                            container.off(CLICK + NS, \".k-grid-cancel-command\", that._editCancelClickHandler);\n                            container.off(CLICK + NS, \".k-grid-save-command\", that._editUpdateClickHandler);\n                        }\n\n                        that._detachModelChange();\n                        that.editable.destroy();\n                        that.editable = null;\n                        if (window) {\n                            window.destroy();\n                        }\n                        that._editContainer = null;\n                        that._destroyEditView();\n                        that._editableIsClosing = null;\n                    }\n                };\n\n                if (that.editable) {\n                    if (that._editMode() === \"popup\" && !that._isMobile) {\n                        if (that._editableIsClosing) {\n                            that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy);\n                        }\n                        else {\n                            that._editableIsClosing = true;\n                            that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy).close();\n                        }\n                    } else {\n                        destroy();\n                    }\n                }\n                if (that._confirmDialog) {\n                    that._confirmDialog.close();\n                    that._confirmDialog.destroy();\n                    that._confirmDialog = null;\n                }\n            },\n\n            _destroyEditView: function() {\n                if (this.editView) {\n                    this.editView.purge();\n                    this.editView = null;\n                    this.pane.navigate(\"\");\n                }\n            },\n\n            _attachModelChange: function(model) {\n                var that = this;\n\n                that._modelChangeHandler = function(e) {\n                    that._modelChange({ field: e.field, model: this });\n                };\n\n                model.bind(\"change\", that._modelChangeHandler);\n            },\n\n            _detachModelChange: function() {\n                var that = this,\n                    container = that._editContainer,\n                    model = that._modelForContainer(container);\n\n                if (model) {\n                    model.unbind(CHANGE, that._modelChangeHandler);\n                }\n            },\n\n            closeCell: function(isCancel) {\n                var that = this,\n                    cell = that._editContainer,\n                    column,\n                    tr,\n                    model;\n\n                if (!cell) {\n                    return;\n                }\n\n                model = that._modelForContainer(cell);\n\n                if (isCancel && that.trigger(\"cancel\", { container: cell, model: model })) {\n                    return;\n                }\n\n                that.trigger(CELLCLOSE, { type: isCancel ? \"cancel\" : \"save\", model: model, container: cell });\n\n                cell.removeClass(\"k-edit-cell\");\n                column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                if (isCancel && model.dirtyFields && model.dirtyFields[column.field]) {\n                    delete model.dirtyFields[column.field];\n                }\n\n                tr = cell.parent().removeClass(\"k-grid-edit-row\");\n\n                if (that.lockedContent) {\n                    that._relatedRow(tr).removeClass(\"k-grid-edit-row\");\n                }\n\n                that._destroyEditable(); // editable should be destroyed before content of the container is changed\n\n                that._displayCell(cell, column, model);\n\n                if (that._shouldClearEditableState) {\n                    that._clearEditableState();\n                }\n\n                that.trigger(\"itemChange\", { item: tr, data: model, ns: ui });\n\n                if (that.lockedContent) {\n                    adjustRowHeight(tr.css(HEIGHT, \"\")[0], that._relatedRow(tr).css(HEIGHT, \"\")[0]);\n                }\n            },\n\n            _displayCell: function(cell, column, dataItem) {\n                var that = this,\n                    state = { storage: {}, count: 0 },\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n                if (state.count > 0) {\n                    tmpl = tmpl.bind(state.storage);\n                }\n\n                cell.empty().html(tmpl(dataItem));\n            },\n\n            removeRow: function(row) {\n                if (!this._confirmation(row)) {\n                    return;\n                }\n\n                this._removeRow(row);\n            },\n\n            _removeRow: function(row) {\n                var that = this,\n                    model,\n                    modelId,\n                    key,\n                    schema,\n                    mode = that._editMode();\n\n                if (mode !== \"incell\") {\n                    that.cancelRow();\n                }\n\n                row = $(row);\n\n                if (that.lockedContent) {\n                    row = row.add(that._relatedRow(row));\n                }\n\n                row = row.hide();\n                if (that.dataSource._isGroupPaged()) {\n                    that._removeGroupIfEmpty(row);\n                }\n\n                model = that._modelForContainer(row);\n\n                if (model && !that.trigger(REMOVE, { row: row, model: model })) {\n                    schema = that.dataSource.options.schema;\n                    if (that._selectedIds && schema && schema.model) {\n                        modelId = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n                        key = model[modelId];\n                        delete that._selectedIds[key];\n                    }\n\n                    that.dataSource.remove(model);\n\n                    if (mode === \"inline\" || mode === \"popup\") {\n                        that.dataSource.sync();\n                    }\n                } else if (mode === \"incell\") {\n                    that._destroyEditable();\n                }\n            },\n\n            _editMode: function() {\n                var mode = \"incell\",\n                    editable = this.options.editable;\n\n                if (editable !== true) {\n                    if (typeof editable == \"string\") {\n                        mode = editable;\n                    } else {\n                        mode = editable.mode || mode;\n                    }\n                }\n\n                return mode;\n            },\n\n            editRow: function(row) {\n                var model;\n                var that = this;\n\n                if (row instanceof ObservableObject) {\n                    model = row;\n                } else {\n                    row = $(row);\n                    model = that._modelForContainer(row);\n                }\n\n                var mode = that._editMode();\n                var container;\n\n                that.cancelRow();\n\n                if (model) {\n                    row = that.tbody.children(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\");\n                    that._attachModelChange(model);\n\n                    if (mode === \"popup\") {\n                        that._createPopupEditor(model);\n                    } else if (mode === \"inline\") {\n                        that._createInlineEditor(row, model);\n                    } else if (mode === \"incell\") {\n                        $(row).children(DATA_CELL).each(function() {\n                            var cell = $(this);\n                            var column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                            model = that._modelForContainer(cell);\n\n                            if (model && (!model.editable || model.editable(column.field)) && column.field && !column.selectable) {\n                                that.editCell(cell);\n                                return false;\n                            }\n                        });\n                    }\n\n\n                    container = that.editView ? that.editView.element : that._editContainer;\n\n                    if (container) {\n                        if (!this._editCancelClickHandler) {\n                            this._editCancelClickHandler = this._editCancelClick.bind(this);\n                        }\n\n                        container.on(CLICK + NS, \".k-grid-cancel-command\", this._editCancelClickHandler);\n\n                        if (!this._editUpdateClickHandler) {\n                            this._editUpdateClickHandler = this._editUpdateClick.bind(this);\n                        }\n\n                        container.on(CLICK + NS, \".k-grid-save-command\", this._editUpdateClickHandler);\n                    }\n                }\n            },\n\n            _editUpdateClick: function(e) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                this.saveRow();\n            },\n\n            _editCancelClick: function(e) {\n                var that = this;\n                var navigatable = that.options.navigatable;\n                var model = that.editable.options.model;\n                var container = that.editView ? that.editView.element : that._editContainer;\n\n                e.preventDefault();\n                e.stopPropagation();\n\n                if (that.trigger(\"cancel\", { container: container, model: model })) {\n                    return;\n                }\n\n                var currentIndex = that.items().index($(that.current()).parent());\n\n                that.cancelRow();\n\n                if (navigatable) {\n                    that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                    focusTable(that.table, true);\n                }\n            },\n\n            _editFields: function(columns, model) {\n                var fields = [];\n                var column;\n\n                for (var idx = 0; idx < columns.length; idx++) {\n                    column = columns[idx];\n                    if (column.selectable || column.command) {\n                        continue;\n                    }\n                    if (isColumnEditable(column, model)) {\n                        fields.push(editField(column));\n                    }\n                }\n                return fields;\n            },\n\n            _createPopupEditor: function(model) {\n                var that = this;\n                var html = '<div ' + kendo.attr(\"uid\") + '=\"' + model.uid + '\" class=\"k-popup-edit-form\"><' + (that._isMobile ? 'ul class=\"k-edit-form-container k-listgroup k-listgroup-flush\">' : 'div class=\"k-edit-form-container\">');\n                var column;\n                var command;\n                var idx;\n                var length;\n                var tmpl;\n                var updateText;\n                var cancelText;\n                var updateIconClass;\n                var cancelIconClass;\n                var tempCommand;\n                var columns = leafColumns(that.columns);\n                var attr;\n                var editMenuGuid = kendo.guid();\n                var editable = that.options.editable;\n                var template = editable.template;\n                var options = isPlainObject(editable) ? editable.window : {};\n                var settings = extend({}, kendo.Template, that.options.templateSettings);\n                var state;\n                var container;\n                var buttonsHTML;\n\n                if (that.trigger(BEFOREEDIT, { model: model })) {\n                    return;\n                }\n\n                options = options || {};\n\n                if (template) {\n                    if (typeof template === STRING) {\n                        template = kendo.unescape(template);\n                    }\n\n                    html += (kendo.template(template, settings))(model);\n\n                    for (idx = 0, length = columns.length; idx < length; idx++) {\n                        column = columns[idx];\n                        if (column.command) {\n                            tempCommand = getCommand(column.command, \"edit\");\n                            if (tempCommand) {\n                                command = tempCommand;\n                            }\n                        }\n                    }\n                } else {\n                    for (idx = 0, length = columns.length; idx < length; idx++) {\n                        column = columns[idx];\n                        if (column.selectable) {\n                            continue;\n                        }\n                        if (!column.command) {\n                            if (that._isMobile) {\n                                html += '<li class=\"k-item k-listgroup-item\">';\n\n                                if (isColumnEditable(column, model)) {\n                                    html += '<label class=\"k-label k-listgroup-form-row\">';\n                                    html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                                    html += '<div class=\"k-listgroup-form-field-wrapper\" id=\"' + column.field + '_' + editMenuGuid + '\" ' + kendo.attr(\"container-for\") + '=\"' + column.field + '\"></div>';\n                                    html += '</label>';\n                                } else {\n                                    state = { storage: {}, count: 0 };\n\n                                    tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n                                    if (state.count > 0) {\n                                        tmpl = tmpl.bind(state.storage);\n                                    }\n\n                                    html += '<label class=\"k-label k-listgroup-form-row k-no-click\">';\n                                    html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                                    html += '<span class=\"k-no-editor k-listgroup-form-field-wrapper\">' + tmpl(model) + '</span>';\n                                    html += '</label>';\n                                }\n\n                                html += \"</li>\";\n                            }\n                        } else if (column.command) {\n                            tempCommand = getCommand(column.command, \"edit\");\n                            if (tempCommand) {\n                                command = tempCommand;\n                            }\n                        }\n                    }\n                }\n\n                if (command) {\n                    if (isPlainObject(command)) {\n                        if (isPlainObject(command.text)) {\n                            updateText = command.text.update;\n                            cancelText = command.text.cancel;\n                        }\n                        if (isPlainObject(command.iconClass)) {\n                            updateIconClass = command.iconClass.update;\n                            cancelIconClass = command.iconClass.cancel;\n                        }\n\n                       if (command.attr) {\n                           attr = command.attr;\n                       }\n                    }\n                }\n\n                if (!that._isMobile) {\n                    buttonsHTML = '<div class=\"k-edit-buttons k-actions-start\">';\n                    buttonsHTML += that._createButton({ name: \"update\", text: updateText, attr: attr, iconClass: updateIconClass, size: \"medium\" }) + that._createButton({ name: \"canceledit\", text: cancelText, attr: attr, iconClass: cancelIconClass, size: \"medium\" });\n                    buttonsHTML += '</div>';\n\n                    html += template ? buttonsHTML + '</div>' : '</div>';\n\n                    container = that._editContainer = $(html)\n                    .appendTo(that.wrapper).eq(0)\n                    .kendoWindow(extend({\n                        modal: true,\n                        resizable: false,\n                        draggable: true,\n                        title: that.options.messages.commands.edit || \"Edit\",\n                        visible: false,\n                        close: function(e) {\n                            if (e.userTriggered) {\n                                //The bellow line is required due to: draggable window in IE, change event will be triggered while the window is closing\n                                e.sender.element.trigger(\"focus\");\n                                if (that.trigger(\"cancel\", { container: container, model: model })) {\n                                    e.preventDefault();\n                                    return;\n                                }\n\n                                var currentIndex = that.items().index($(that.current()).parent());\n\n                                that._editableIsClosing = true;\n                                that.cancelRow();\n                                if (that.options.navigatable) {\n                                    that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                                    focusTable(that.table, true);\n                                }\n                            }\n                        }\n                    }, options));\n                } else {\n                    html += \"</ul></div>\";\n                    that.editView = that.pane.append(\n                        '<div data-' + kendo.ns + 'role=\"view\" class=\"k-grid-edit-form\">' +\n                            '<div data-' + kendo.ns + 'role=\"header\" class=\"k-header\">' +\n                                '<a href=\"\\\\#\" class=\"k-header-cancel k-link k-grid-cancel-command\" title=\"#=messages.cancel#\" ' +\n                                'aria-label=\"#=messages.cancel#\">' + kendo.ui.icon(\"chevron-left\") + '</a>' +\n                                encode(that.options.messages.commands.edit || \"Edit\") +\n                                '<a href=\"\\\\#\" class=\"k-header-done k-link k-grid-save-command\" title=\"#=messages.done#\" ' +\n                                'aria-label=\"#=messages.done#\">' + kendo.ui.icon(\"check\") + '</a>' +\n                            '</div>' +\n                            '<div data-' + kendo.ns + 'role=\"content\" class=\"' + classNames.content + '\">' +\n                                html +\n                            '</div>' +\n                        '</div>');\n                    container = that._editContainer = that.editView.element.find(\".k-popup-edit-form\");\n                }\n\n                if (!template && !that._isMobile) {\n                    that.editable = new ui.Form(that._editContainer.find(\".k-edit-form-container\"), {\n                        items: that._editFields(columns, model),\n                        buttonsTemplate: function () { return ''; },\n                        formData: model\n                    }).editable;\n                    that._editContainer.append(buttonsHTML);\n                } else {\n                    that.editable = that._editContainer\n                    .kendoEditable({\n                        fields: (that._isMobile && !template) ? that._editFields(columns, model) : null,\n                        model: model,\n                        clearContainer: false,\n                        target: that,\n                        skipFocus: true\n                    }).data(\"kendoEditable\");\n                }\n\n                that._openPopUpEditor();\n\n                that.trigger(EDIT, { container: container, model: model });\n            },\n\n            _openPopUpEditor: function() {\n                var that = this;\n                var windowEditor = that._editContainer ? that._editContainer.data(\"kendoWindow\") : null;\n                var windowOptions = (that.options.editable || {}).window || {};\n\n                if (!this._isMobile) {\n                    if (windowEditor) {\n                        if (!windowOptions.position) {\n                            windowEditor.center();\n                        }\n\n                        windowEditor.open();\n                    }\n                } else {\n                    this.pane.navigate(this.editView, this._editAnimation);\n                }\n            },\n\n            _createInlineEditor: function(row, model) {\n                var that = this;\n                var column;\n                var cell;\n                var command;\n                var fields = [];\n\n                if (that.trigger(BEFOREEDIT, { model: model })) {\n                    return;\n                }\n\n                if (that.lockedContent) {\n                    row = row.add(that._relatedRow(row));\n                }\n\n                row.children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function() {\n                    cell = $(this);\n                    column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                    if (!column.command && isColumnEditable(column, model)) {\n                        fields.push(editField(column));\n                        cell.attr(kendo.attr(\"container-for\"), column.field);\n                        cell.empty();\n                    } else if (column.command) {\n                        command = getCommand(column.command, \"edit\");\n                        if (command) {\n                            cell.empty();\n\n                            var updateText,\n                                cancelText,\n                                updateIconClass,\n                                cancelIconClass,\n                                attr;\n\n                            if (isPlainObject(command)) {\n                                    if (isPlainObject(command.text)) {\n                                        updateText = command.text.update;\n                                        cancelText = command.text.cancel;\n                                    }\n                                    if (isPlainObject(command.iconClass)) {\n                                        updateIconClass = command.iconClass.update;\n                                        cancelIconClass = command.iconClass.cancel;\n                                    }\n\n                                if (command.attr) {\n                                    attr = command.attr;\n                                }\n                            }\n\n                            $(that._createButton({ name: \"update\", text: updateText, attr: attr, iconClass: updateIconClass }) +\n                                that._createButton({ name: \"canceledit\", text: cancelText, attr: attr, iconClass: cancelIconClass })).appendTo(cell);\n                        }\n                    }\n                });\n\n                that._editContainer = row;\n                that._editContainer.addClass(\"k-grid-edit-row\");\n\n                if (that._shouldClearEditableState) {\n                    that._clearEditableState();\n                }\n\n                that.editable = new kendo.ui.Editable(that._editContainer, {\n                    target: that,\n                    fields: fields,\n                    size: that.options.size,\n                    model: model,\n                    skipFocus: (that._isVirtualInlineEditable() && that._editableState && (that._editableState.field ? true : false)) || that._hasVirtualColumns(),\n                    clearContainer: false\n                });\n\n                if (row.length > 1) {\n\n                    adjustRowHeight(row[0], row[1]);\n                    that._applyLockedContainersWidth();\n                }\n\n                that.trigger(EDIT, { container: row, model: model });\n            },\n\n            cancelRow: function(notify) {\n                var that = this,\n                    container = that._editContainer,\n                    model;\n\n                if (container) {\n                    model = that._modelForContainer(container);\n\n                    if (!model || (notify && that.trigger(\"cancel\", { container: container, model: model }))) {\n                        return;\n                    }\n\n                    that._destroyEditable();\n\n                    that.dataSource.cancelChanges(model);\n\n                    that._clearEditableState();\n\n                    if (that._editMode() !== \"popup\") {\n                        that._displayRow(container);\n                    } else {\n                        that._displayRow(that.tbody.find(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"));\n                    }\n\n                    that._aria();\n                }\n            },\n\n            saveRow: function() {\n                var that = this;\n                var container = this._editContainer;\n                var model = this._modelForContainer(container);\n                var deferred = $.Deferred();\n                var valid;\n\n                if (!container || !this.editable) {\n                    return deferred.resolve().promise();\n                }\n\n                valid = that.editable && that.editable.end();\n\n                if (!valid || this.trigger(SAVE, { container: container, model: model })) {\n                    if (!valid) {\n                        that._scrollVirtualWrapper();\n                    }\n\n                    return deferred.reject().promise();\n                }\n\n                that._clearEditableState();\n\n                return this.dataSource.sync();\n            },\n\n            _displayRow: function(row) {\n                    var that = this,\n                    model = that._modelForContainer(row),\n                    related,\n                    newRow,\n                    nextRow,\n                    isSelected = row.hasClass(SELECTED),\n                    isAlt = row.hasClass(\"k-alt\");\n\n                if (model) {\n\n                    if (that.lockedContent) {\n                        related = $((isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model));\n                        kendo.applyStylesFromKendoAttributes(related, [\"display\"]);\n                        that._relatedRow(row.last()).replaceWith(related);\n                    }\n\n                    newRow = $((isAlt ? that.altRowTemplate : that.rowTemplate)(model));\n                    if (!row.is(\":visible\")) {\n                        newRow.hide();\n                    }\n\n                    kendo.applyStylesFromKendoAttributes(newRow, [\"display\"]);\n                    row.replaceWith(newRow);\n\n                    that.trigger(\"itemChange\", { item: newRow, data: model, ns: ui });\n\n                    if (related && related.length) {\n                        that.trigger(\"itemChange\", { item: related, data: model, ns: ui });\n                    }\n\n                    if (isSelected && (that.options.selectable || that._checkBoxSelection)) {\n                        that.select(newRow.add(related));\n                    }\n\n                    if (related) {\n                        adjustRowHeight(newRow[0], related[0]);\n                    }\n\n                    nextRow = newRow.next();\n                    if (nextRow.hasClass(\"k-detail-row\") && nextRow.is(\":visible\")) {\n                        kendo.ui.icon(newRow.find(\".k-hierarchy-cell .k-icon,.k-hierarchy-cell .k-svg-icon\"), { icon: \"caret-alt-down\" });\n                    }\n                }\n            },\n\n            _showMessage: function(messages, row) {\n                var that = this;\n\n                if (!that._isMobile) {\n                    // eslint-disable-next-line no-alert\n                    return window.confirm(messages.title);\n                }\n\n                var confirmDialog = that._confirmDialog = new kendo.ui.Confirm($(\"<div />\").appendTo(document.body), {\n                    modal: {\n                        preventScroll: true\n                    },\n                    closable: false,\n                    title: false,\n                    content: messages.title,\n                    messages: {\n                        okText: messages.confirmDelete,\n                        cancel: messages.cancelDelete\n                    },\n                    open: function() {\n                        if (that.content) {\n                            that.content.data(OVERFLOW, that.content.css(OVERFLOW));\n                            that.content.css(OVERFLOW, HIDDEN);\n                        }\n                    },\n                    close: function() {\n                        if (that.content) {\n                            that.content.css(OVERFLOW, that.content.data(OVERFLOW));\n                        }\n                    }\n                });\n\n                confirmDialog.result\n                    .done(function() {\n                        that._removeRow(row);\n                    })\n                    .fail(function() {\n                        var confirmDialog = that._confirmDialog;\n\n                        if (confirmDialog) {\n                            confirmDialog.close();\n                            confirmDialog.destroy();\n                        }\n                    });\n\n                return false;\n            },\n\n            _confirmation: function(row) {\n                var that = this,\n                    editable = that.options.editable,\n                    confirmation = (editable === true || typeof editable === STRING) ? that.options.messages.editable.confirmation : editable.confirmation;\n\n                if (isPlainObject(editable) && typeof editable.mode === STRING && typeof confirmation !== FUNCTION && typeof confirmation !== STRING && confirmation !== false) {\n                    confirmation = that.options.messages.editable.confirmation;\n                }\n\n                if (confirmation !== false && confirmation != null) {\n\n                    if (typeof confirmation === FUNCTION) {\n                        confirmation = confirmation(that._modelForContainer(row));\n                    }\n\n                    return that._showMessage({\n                            confirmDelete: editable.confirmDelete || that.options.messages.editable.confirmDelete,\n                            cancelDelete: editable.cancelDelete || that.options.messages.editable.cancelDelete,\n                            title: confirmation === true ? that.options.messages.editable.confirmation : confirmation\n                        }, row);\n                }\n\n                return true;\n            },\n\n            cancelChanges: function() {\n                var that = this;\n\n                if (that._cachedRowsHeight) {\n                    that._mapCachedRowsHeight(\"getByUid\", \"id\");\n                    that._shouldMapHights = true;\n                }\n\n                that.dataSource.cancelChanges();\n\n                if (that._isVirtualEditable()) {\n                    that._virtualPageToTop(function() {\n                        that.virtualScrollable.scrollToTop();\n                    });\n                }\n            },\n\n            saveChanges: function() {\n                var that = this;\n                var valid = that.editable && that.editable.end();\n\n                if ((valid || !that.editable) && !that.trigger(SAVECHANGES)) {\n                    that.dataSource.sync();\n                } else if (!valid) {\n                    that._scrollVirtualWrapper();\n                }\n            },\n\n            addRow: function() {\n                var that = this,\n                    index,\n                    dataSource = that.dataSource,\n                    mode = that._editMode(),\n                    createAt = that.options.editable.createAt || \"\",\n                    pageSize = dataSource.pageSize(),\n                    view = dataSource.view() || [];\n                var createAtBottom = createAt.toLowerCase() === BOTTOM;\n                var model;\n                var virtualEditable = that._isVirtualEditable();\n\n                if ((that.editable && that.editable.end()) || !that.editable) {\n                    if (mode != \"incell\") {\n                        that.cancelRow();\n                    }\n\n                    index = dataSource.indexOf(view[0]);\n\n                    if (createAtBottom) {\n                        index += view.length;\n\n                        if (pageSize && !dataSource.options.serverPaging && pageSize <= view.length) {\n                            index -= 1;\n                        }\n                    }\n\n                    if (index < 0) {\n                        if (dataSource.page() > dataSource.totalPages()) {\n                            index = (dataSource.page() - 1) * pageSize;\n                        } else {\n                            index = 0;\n                        }\n                    }\n\n                    if (that.options.navigatable && mode == \"incell\") {\n                        that._removeCurrent();\n                    }\n\n                    if (virtualEditable) {\n                        that._virtualAddRow();\n                    } else {\n                        model = dataSource.insert(index, {});\n                        that._editModel(model);\n                    }\n                } else {\n                    that._scrollVirtualWrapper();\n                }\n            },\n\n            _editModel: function(model) {\n                var that = this;\n                var createAt = that.options.editable.createAt || \"\";\n                var mode = that._editMode();\n\n                if (model) {\n                    var id = model.uid,\n                        table = that.lockedContent ? that.lockedTable : that.table,\n                        row = table.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + id + \"]\"),\n                        cell = row.children(\"td:not(.k-group-cell,.k-hierarchy-cell)\").eq(that._firstEditableColumnIndex(row));\n\n                    if (mode === \"inline\" && row.length) {\n                        that.editRow(row);\n                    } else if (mode === \"popup\") {\n                        that.editRow(model);\n                    } else if (cell.length) {\n                        that.editCell(cell);\n                    }\n\n                    if (createAt.toLowerCase() == \"bottom\" && that.lockedContent) {\n                        //scroll the containers to the bottom\n                        that.lockedContent[0].scrollTop = that.content[0].scrollTop = that.table[0].offsetHeight;\n                    }\n                }\n            },\n\n            _virtualAddRow: function() {\n                var that = this;\n                var createAtBottom = (that.options.editable.createAt || \"\").toLowerCase() === BOTTOM;\n\n                that._clearEditableState();\n\n                if (createAtBottom) {\n                    that._virtualAddRowAtBottom();\n                } else {\n                    that._virtualAddRowAtTop();\n                }\n            },\n\n            _virtualAddRowAtTop: function() {\n                var that = this;\n                var dataSource = that.dataSource;\n                var virtualScrollable = that.virtualScrollable;\n                var model;\n\n                if (dataSource.page() === 1) {\n                    model = dataSource.insert(0, {});\n                    that._editModel(model);\n                    virtualScrollable.scrollToTop();\n                } else {\n                    that._virtualPageToTop(function() {\n                        model = dataSource.insert(0, {});\n                        that._editModel(model);\n                        virtualScrollable.scrollToTop();\n                    });\n                }\n            },\n\n            _virtualAddRowAtBottom: function() {\n                var that = this;\n                var dataSource = that.dataSource;\n                var virtualScrollable = that.virtualScrollable;\n                var index = dataSource.total();\n                var model;\n\n                if (dataSource.at(index - 1) instanceof ObservableObject) {\n                    model = dataSource.insert(index, {});\n\n                    that._virtualPageToBottom(function() {\n                        that._editModel(model);\n                        virtualScrollable.scrollToBottom();\n                    });\n                } else {\n                    that._virtualPageToBottom(function() {\n                        model = dataSource.insert(index, {});\n                        that._editModel(model);\n                        virtualScrollable.scrollToBottom();\n                    });\n                }\n            },\n\n            _virtualPageToTop: function(callback) {\n                var that = this;\n\n                that._virtualPage(0, that.dataSource.take(), function() {\n                    callback();\n                });\n            },\n\n            _virtualPageToBottom: function(callback) {\n                var that = this;\n                var dataSource = that.dataSource;\n                var take = dataSource.take();\n                var total = dataSource.total();\n                var skip = total > take ? (total - take) : 0;\n\n                that._virtualPage(skip, take, function() {\n                    callback();\n                });\n            },\n\n            _virtualPage: function(skip, take, callback) {\n                var that = this;\n\n                if (that._isVirtualEditable()) {\n                    that.virtualScrollable._preventScroll = true;\n                    that.virtualScrollable._page(skip, take, callback);\n                }\n            },\n\n            _firstEditableColumnIndex: function(container) {\n                var that = this,\n                    column,\n                    columns = leafColumns(that.columns),\n                    idx,\n                    length,\n                    model = that._modelForContainer(container);\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n\n                    if (model && (!model.editable || model.editable(column.field)) && !column.command && column.field && column.hidden !== true) {\n                        return idx;\n                    }\n                }\n                return -1;\n            },\n\n            _clickAdd: function(e) {\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n\n                this.addRow();\n            },\n\n            _clickCancel: function(e) {\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n\n                this.cancelChanges();\n            },\n\n            _clickExcel: function(e) {\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n\n                this.saveAsExcel();\n            },\n\n            _clickPdf: function(e) {\n                var that = this;\n\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n\n                var promise = that.saveAsPDF();\n\n                if (promise) {\n                    promise.done(function() {\n                        that._pdfInitialized = false;\n                    });\n                }\n            },\n\n            _clickSave: function(e) {\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n\n                this.saveChanges();\n            },\n\n            _searchInput: function(e) {\n                var that = this,\n                    input = e.currentTarget;\n\n                clearTimeout(that._searchTimeOut);\n\n                that._searchTimeOut = setTimeout(function() {\n                    that._searchTimeOut = null;\n\n                    var options = that.options;\n                    var searchFields = options.search ? options.search.fields : null;\n                    var expression = { filters: [], logic: \"or\" };\n                    var value = input.value;\n\n                    if (!searchFields) {\n                        searchFields = getColumnsFields(options.columns);\n                    }\n\n                    if (that.dataSource.options.endless) {\n                        that.dataSource.options.endless = null;\n                        that._endlessPageSize = that.dataSource.options.pageSize;\n                    }\n\n                    if (value) {\n                        for (var i = 0; i < searchFields.length; i++) {\n                            that._pushExpression(expression.filters, searchFields[i], value);\n                        }\n                    } else {\n                        expression = {};\n                    }\n\n                    that.dataSource.filter(expression);\n                }, 300);\n            },\n\n            _pasteToolbarDropDown: function() {\n                var that = this;\n\n                if (that.wrapper.find(\".k-grid-paste-action\").length) {\n                    that.pasteActionsDropDownList = that.wrapper\n                        .find(\".k-grid-paste-action\")\n                        .kendoDropDownList({\n                            dataSource: [{ value: \"insert\", text: \"Paste (Insert)\" }, { value: \"replace\", text: \"Paste (Replace)\" }],\n                            dataTextField: \"text\",\n                            dataValueField: \"value\",\n                            _allowFilterPaste: false,\n                        }).data(\"kendoDropDownList\");\n                }\n            },\n\n            _pushExpression: function(filters, field, value) {\n                var that = this,\n                    isServerFiltering = that.dataSource.options.serverFiltering,\n                    defaultOperators = {\n                        string: \"contains\",\n                        number: \"gte\",\n                        date: \"gte\",\n                        enums: \"eq\",\n                        boolean: \"eq\"\n                    },\n                    name = field.name || field,\n                    operator = field.operator,\n                    modelInfo = that.dataSource.reader.model && that.dataSource.reader.model.fields,\n                    fieldInfo = modelInfo && modelInfo[name],\n                    parseFn = fieldInfo && fieldInfo.parse,\n                    expression = {\n                        field: name,\n                        operator: operator || defaultOperators.string,\n                        value: value\n                    };\n\n                if ((operator || isServerFiltering) && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) !== null) {\n                    extend(expression, {\n                        operator: operator || defaultOperators[fieldInfo.type],\n                        value: parseFn(value)\n                    });\n                }\n\n                if (isServerFiltering && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) === null) {\n                    return;\n                }\n\n                filters.push(expression);\n            },\n\n            _toolbar: function() {\n                var that = this,\n                    wrapper = that.wrapper,\n                    toolbar = that.options.toolbar,\n\n                    container, items;\n\n                if (toolbar) {\n                    that._createClickHandler = that._addClickHandler = that._clickAdd.bind(that);\n                    that._cancelClickHandler = that._clickCancel.bind(that);\n                    that._saveClickHandler = that._clickSave.bind(that);\n                    that._excelClickHandler = that._clickExcel.bind(that);\n                    that._pdfClickHandler = that._clickPdf.bind(that);\n                    that._serachHandler = that._searchInput.bind(that);\n\n                    container = that.wrapper.find(\".k-grid-toolbar\");\n\n                    if (!container.length) {\n                        container = $('<div class=\"k-grid-toolbar k-toolbar\" />')\n                            .prependTo(wrapper);\n\n                        if (typeof toolbar === STRING || isFunction(toolbar)) {\n                            if (typeof toolbar === STRING) {\n                                toolbar = kendo.template(toolbar).bind(that);\n                            }\n\n                            container.html(toolbar({ grid: that }));\n                            that._attachToolbarClicks();\n                        } else if (isArray(toolbar)) {\n                            items = that._processItems(toolbar);\n\n                            container.kendoToolBar({\n                                navigateOnTab: !that.options.navigatable,\n                                size: that.options.size,\n                                items: items\n                            });\n                        }\n                    } else {\n                        that._attachToolbarClicks();\n                    }\n\n                    container.on(INPUT + NS, \".k-grid-search input\", this._serachHandler);\n                }\n            },\n\n            _attachToolbarClicks: function() {\n                var editable = this.options.editable,\n                    container = this.wrapper.find(\".k-grid-toolbar\");\n\n                if (editable && editable.create !== false) {\n                    container.on(CLICK + NS, \".k-grid-add\", this._createClickHandler)\n                        .on(CLICK + NS, \".k-grid-cancel-changes\", this._cancelClickHandler)\n                        .on(CLICK + NS, \".k-grid-save-changes\", this._saveClickHandler);\n                }\n\n                container.on(CLICK + NS, \".k-grid-excel\", this._excelClickHandler);\n                container.on(CLICK + NS, \".k-grid-pdf\", this._pdfClickHandler);\n            },\n\n            _processItems: function(tools) {\n                var that = this,\n                    options = that.options,\n                    items = [],\n                    messages = this.options.messages.commands,\n                    itemsCollectionHasSpacer = false;\n\n                tools.map(function (t) {\n                    var command, searchText, icon, className, inputSize, template = \"\";\n\n                    if (typeof t === 'string') {\n                        command = t.toLowerCase();\n                        t = {};\n                        t.text = messages[command] || command;\n                    } else {\n                        command = (t.name || t.text || \"\").toLowerCase();\n                        t.text = t.text || messages[command] || command;\n                    }\n\n                    if (!itemsCollectionHasSpacer && (command === \"search\" || command === \"columns\")) {\n                        itemsCollectionHasSpacer = true;\n                        items.push({\n                            type: \"spacer\"\n                        });\n                    }\n\n                    if (command === \"search\") {\n                        searchText = t.text || messages.search;\n                        icon = t.icon || t.iconClass || \"search\";\n\n                        inputSize = kendo.getValidCssClass(\"k-input-\", \"size\", that.options.size);\n                        template += \"<span class='k-searchbox k-input \" + inputSize + \" k-rounded-md k-input-solid k-grid-search'>\";\n                        template += kendo.ui.icon({ icon: icon, iconClass: \"k-input-icon\" });\n                        template += \"<input autocomplete='off' placeholder='\" + searchText + \"' title='\" + searchText + \"' aria-label='\" + searchText + \"' class='k-input-inner' />\";\n                        template += \"</span>\";\n\n                        items.push({\n                            name: \"search\",\n                            overflow: \"never\",\n                            template: template\n                        });\n                    } else if (command === \"paste\" && options.allowPaste) {\n                        items.push({\n                            template: \"<input class='k-grid-paste-action' />\"\n                        });\n                    } else {\n                        if (!command && !(isPlainObject(t) && t.template)) {\n                            throw new Error(\"Custom commands should have name specified\");\n                        }\n\n                        t = extend({ type: \"button\" }, defaultCommands[command], t);\n                        className = t.className || \"k-grid-\" + (command || \"\").replace(/\\s/g, \"\");\n                        t.spriteCssClass = t.icon ? null : t.iconClass;\n\n                        t.attributes = that._processAttr(t.attr);\n                        delete t.attr;\n\n                        if (!!className) {\n                            if (t.attributes[\"class\"] === undefined$1) {\n                                t.attributes[\"class\"] = \"\";\n                            }\n\n                            t.attributes[\"class\"] += (\" \" + className);\n                        }\n\n                        if (t.template) {\n                            delete t.type;\n                        }\n\n                        if (!!that[\"_\" + command + \"ClickHandler\"]) {\n                            t.click = that[\"_\" + command + \"ClickHandler\"];\n                        }\n\n                        items.push(t);\n                    }\n                });\n\n                return items;\n            },\n\n            _processAttr: function(attr) {\n                var attributes = {},\n                    attrArray;\n\n                if (typeof attr === STRING && attr.length > 0) {\n                    attrArray = attr.split(\" \");\n                    attrArray.map(function (a) {\n                        var keyValue = a.split(\"=\");\n\n                        if (keyValue.length === 2) {\n                            attributes[keyValue[0]] = keyValue[1].replaceAll('\"', \"\").replaceAll(\"'\", \"\");\n                        }\n                    });\n                } else if (isPlainObject(attr)) {\n                    attributes = attr;\n                }\n\n                return attributes;\n            },\n\n            _createButton: function(command) {\n                var button,\n                    template = command.template || COMMANDBUTTONTMPL,\n                    commandName = typeof command === STRING ? command : command.name || command.text,\n                    className = defaultCommands[commandName] ? defaultCommands[commandName].className : \"k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"),\n                    options = { className: className, text: commandName, attr: \"\", iconClass: \"\", size: command.size || this.options.size },\n                    messages = this.options.messages.commands,\n                    attributeClassMatch;\n\n                if (!commandName && !(isPlainObject(command) && command.template)) {\n                    throw new Error(\"Custom commands should have name specified\");\n                }\n\n                if (isPlainObject(command)) {\n                    command = extend(true, {}, command);\n\n                    if (command.className && inArray(options.className, command.className.split(\" \")) < 0) {\n                        command.className += \" \" + options.className;\n                    } else if (command.className === undefined$1) {\n                        command.className = options.className;\n                    }\n\n                    if (command.className.indexOf(\"k-primary\") > -1) {\n                        command.className = command.className.replace(\"k-primary\", \"\");\n                        command.themeColor = \"primary\";\n                    }\n\n                    if (commandName === \"edit\") {\n                        command = extend(true, {}, command);\n                        command.text = isPlainObject(command.text) ? command.text.edit : command.text;\n                        command.iconClass = isPlainObject(command.iconClass) ? command.iconClass.edit : command.iconClass;\n                    }\n\n                    if (command.attr) {\n                        if (isPlainObject(command.attr)) {\n                            command.attr = stringifyAttributes(command.attr);\n                        }\n\n                        if (typeof command.attr === STRING) {\n                            attributeClassMatch = command.attr.match(/class=\"(.+?)\"/);\n\n                            if (attributeClassMatch && inArray(attributeClassMatch[1], command.className.split(\" \")) < 0) {\n                                command.className += \" \" + attributeClassMatch[1];\n                            }\n                        }\n                    }\n\n                    options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] }, command);\n                } else {\n                    options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] });\n                }\n\n                button = kendo.template(template)(options);\n\n                if (!command.template) {\n                    return kendo.html.renderButton($(button), options);\n                } else {\n                    return button;\n                }\n            },\n\n            _hasFooters: function() {\n                return !!this.footerTemplate ||\n                    !!this.groupFooterTemplate ||\n                    (this.footer && this.footer.length > 0) ||\n                    this.wrapper.find(\".k-grid-footer\").length > 0;\n            },\n\n            _groupable: function() {\n                var that = this;\n\n                if (that._groupableClickHandler) {\n                    that.table.add(that.lockedTable).off(CLICK + NS, that._groupableClickHandler);\n                } else {\n                    that._groupableClickHandler = function(e) {\n                        var element = $(this),\n                        groupRow = element.closest(TR);\n\n                        var group = that._groupRows ? that._groupRows[that.wrapper.find(DOT + GROUPING_ROW).index(groupRow)] : { };\n\n                        if (element.is(CARET_ALT_DOWN)) {\n                            if (!that.trigger(\"groupCollapse\", { group: group, element: groupRow })) {\n                                that.collapseGroup(groupRow);\n                            }\n                        } else {\n                            if (!that.trigger(\"groupExpand\", { group: group, element: groupRow })) {\n                                that.expandGroup(groupRow);\n                            }\n                        }\n                        e.preventDefault();\n                        e.stopPropagation();\n                    };\n                }\n\n                if (that._isLocked()) {\n                    that.lockedTable.on(CLICK + NS, \".k-grouping-row \" + CARET_ALT_RIGHT + \", .k-grouping-row \" + CARET_ALT_DOWN, that._groupableClickHandler);\n                } else {\n                    that.table.on(CLICK + NS, \".k-grouping-row \" + CARET_ALT_RIGHT + \", .k-grouping-row \" + CARET_ALT_DOWN, that._groupableClickHandler);\n                }\n\n                that._attachGroupable();\n            },\n\n            _attachGroupable: function() {\n                var that = this,\n                    wrapper = that.wrapper,\n                    groupable = that.options.groupable,\n                    draggables = HEADERCELLS + \"[\" + kendo.attr(\"field\") + \"]\",\n                    filter = that.content ? \".k-grid-header:first \" + draggables : \"table:first>.k-grid-header \" + draggables;\n\n                if (groupable && groupable.enabled !== false) {\n                    if (!wrapper.has(\"div.k-grouping-header\")[0]) {\n                        $(\"<div/>\").addClass(\"k-grouping-header\").prependTo(wrapper);\n                    }\n\n                    if (that.groupable) {\n                        that._destroyGroupable();\n                    }\n\n                    if (browser.chrome) {\n                        wrapper.find(\"div.k-grouping-header\").css(\"touch-action\", NONE);\n                        wrapper.find(filter).css(\"touch-action\", NONE);\n                    }\n\n                    that.groupable = new ui.Groupable(wrapper, extend({}, groupable, {\n                        draggable: that._draggableInstance,\n                        groupContainer: \">div.k-grouping-header\",\n                        dataSource: that.dataSource,\n                        draggableElements: filter,\n                        filter: filter,\n                        size: that.options.size,\n                        allowDrag: that.options.reorderable,\n                        enableContextMenu: !!that.options.contextMenu,\n                        removeGroup: function(e) {\n                            that._showUngroupedColumn(e);\n                        },\n                        change: function(e) {\n                            if (that.trigger(\"group\", { groups: e.groups })) {\n                                e.preventDefault();\n                            } else {\n                                that._clearEditableState();\n                                that._hideGroupedColumns(e.groups);\n                                if (that.dataSource.options.endless) {\n                                    that._resetEndless();\n                                }\n                            }\n                        }\n                    }));\n\n                    that._addGroupableOptionsToHeader();\n                }\n            },\n\n            _showUngroupedColumn: function(group) {\n                var columns = leafColumns(this.columns);\n                var i;\n\n                for (i = 0; i < columns.length; i++) {\n                    if (columns[i].uid == group.colID && columns[i].hideOnGroup) {\n                        this.showColumn(columns[i]);\n                    }\n                }\n            },\n\n            _hideGroupedColumns: function(groups) {\n                if (!groups) {\n                    return;\n                }\n                var columns = leafColumns(this.columns);\n                var fields = [];\n                var i;\n\n                for (i = 0; i < groups.length; i++) {\n                    if (groups[i].colID) {\n                        fields.push(groups[i].colID);\n                    }\n                }\n\n                for (i = 0; i < columns.length; i++) {\n                    if (fields.indexOf(columns[i].uid) >= 0 && columns[i].hideOnGroup) {\n                        this.hideColumn(columns[i]);\n                    }\n                }\n            },\n\n            _resetEndless: function() {\n                var that = this;\n                that.dataSource.options.endless = null;\n                that._endlessPageSize = that.dataSource.options.pageSize;\n                that.dataSource._skip = 0;\n                that.dataSource._pageSize = that.dataSource._take = that._endlessPageSize;\n                that.dataSource._page = 1;\n            },\n\n            _addGroupableOptionsToHeader: function() {\n                var that = this;\n                var columns = flatColumns(that.columns);\n                var columnFieldMap = {};\n                var field = \"\";\n                var headerCells = that._headerCells();\n                var cellFieldAttr = \"\";\n                var headerCell;\n                var columnOptions;\n                var i;\n\n                for (i = 0; i < columns.length; i++) {\n                    field = columns[i].field;\n                    columnFieldMap[columns[i].field] = columns[i];\n                }\n\n                for (i = 0; i < headerCells.length; i++) {\n                    headerCell = headerCells.eq(i);\n                    cellFieldAttr = headerCell.attr(kendo.attr(FIELD));\n                    columnOptions = columnFieldMap[cellFieldAttr];\n\n                    if (columnOptions && columnOptions.groupable && columnOptions.groupable.sort) {\n                        headerCell.data(GROUP_SORT, columnOptions.groupable.sort);\n                    }\n                }\n            },\n\n            _destroyGroupable: function() {\n                var that = this;\n\n                if (that.groupable && that.groupable.element) {\n                    that.groupable.element.kendoGroupable(\"destroy\");\n                }\n\n                that.groupable = null;\n\n                that._removeGroupableOptionsFromHeader();\n            },\n\n            _removeGroupableOptionsFromHeader: function() {\n                var that = this;\n                var headerCells = that._headerCells();\n\n                for (var i = 0; i < headerCells.length; i++) {\n                    headerCells.eq(i).removeData(GROUP_SORT);\n                }\n            },\n\n            _continuousItems: function(filter, cell) {\n                if (!this.lockedContent) {\n                    return;\n                }\n\n                var that = this;\n\n                var elements = that.table.add(that.lockedTable);\n\n                var lockedItems = $(filter, elements[0]);\n                var nonLockedItems = $(filter, elements[1]);\n                var columns = cell ? lockedColumns(leafColumns(that.columns)).length : 1;\n                var nonLockedColumns = cell ? leafColumns(that.columns).length - columns : 1;\n                var result = [];\n\n                for (var idx = 0; idx < lockedItems.length; idx += columns) {\n                    push.apply(result, lockedItems.slice(idx, idx + columns));\n                    push.apply(result, nonLockedItems.splice(0, nonLockedColumns));\n                }\n\n                return result;\n            },\n\n            _selectable: function() {\n                var that = this,\n                    multi,\n                    cell,\n                    notString = [],\n                    isLocked = that._isLocked(),\n                    selectable = that.options.selectable;\n\n                if (selectable && !selectable.checkboxSelection) {\n\n                    if (that.selectable) {\n                        that.selectable.destroy();\n                    }\n\n                    that._selectedIds = {};\n\n                    selectable = kendo.ui.Selectable.parseOptions(selectable);\n\n                    multi = selectable.multiple;\n                    cell = selectable.cell;\n\n                    if (that._hasDetails()) {\n                        notString[notString.length] = \".k-detail-row\";\n                    }\n                    if (that.options.groupable || that._hasFooters() || that._groups()) {\n                        notString[notString.length] = \".k-grouping-row,.k-group-footer\";\n                    }\n\n                    notString = notString.join(\",\");\n\n                    if (notString !== \"\") {\n                        notString = \":not(\" + notString + \")\";\n                    }\n\n                    var elements = that.table;\n                    if (isLocked) {\n                        elements = elements.add(that.lockedTable);\n                    }\n\n                    var filter = \">\" + (cell ? SELECTION_CELL_SELECTOR : \"tbody>tr\" + notString);\n                    that.selectable = new kendo.ui.Selectable(elements, {\n                        filter: filter,\n                        aria: true,\n                        multiple: multi,\n                        holdToDrag: !!(that._isMobile || kendo.support.mobileOS),\n                        toggleable: !!(that._isMobile || kendo.support.mobileOS),\n                        dragToSelect: that.options.selectable && that.options.selectable.dragToSelect,\n                        changing: function(e) {\n                            if (that.trigger(CHANGING, { target: e.target, originalEvent: e.originalEvent })) {\n                                e.preventDefault();\n                            }\n                        },\n                        change: function(e) {\n                            var selectedValues;\n                            if (!cell) {\n                                that._persistSelectedRows();\n                            }\n\n                            if (that._checkBoxSelection) {\n                                selectedValues = that.selectable.value();\n                                that._uncheckCheckBoxes();\n                                that._checkRows(selectedValues);\n                                if (selectedValues.length && selectedValues.length === that.items().length) {\n                                    that._toggleHeaderCheckState(true);\n                                } else {\n                                    that._toggleHeaderCheckState(false);\n                                }\n                            }\n\n                            that._calculateAggregatesForSelected();\n\n                            if (e.event) {\n                                that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n                            }\n                        },\n                        useAllItems: isLocked && multi && cell,\n                        relatedTarget: function(items) {\n                            if (cell || !isLocked) {\n                                return;\n                            }\n\n                            var related;\n                            var result = $();\n                            for (var idx = 0, length = items.length; idx < length; idx ++) {\n                                related = that._relatedRow(items[idx]);\n\n                                if (inArray(related[0], items) < 0) {\n                                    result = result.add(related);\n                                }\n                            }\n\n                            return result;\n                        },\n                        continuousItems: function() {\n                            return that._continuousItems(filter, cell);\n                        },\n                        ignoreOverlapped: that.options.selectable && that.options.selectable.ignoreOverlapped,\n                        addIdToRanges: true\n                    });\n\n                    if (that.options.navigatable) {\n                        elements.on(\"keydown\" + NS, function(e) {\n                            var current = that.current();\n                            var target = e.target;\n                            var eventObject = { event: e };\n                            var triggerChange;\n                            var triggerChanging;\n                            var lastSelection;\n                            if (!current) {\n                                return;\n                            }\n                            if (e.keyCode === keys.SPACEBAR && !e.shiftKey && $.inArray(target, elements) > -1 &&\n                                !current.is(\".k-edit-cell,.k-header\") &&\n                                current.parent().is(\":not(.k-grouping-row,.k-detail-row,.k-group-footer)\")) {\n                                    e.preventDefault();\n                                    e.stopPropagation();\n                                    current = cell ? current : current.parent();\n                                    triggerChange = !current.hasClass(SELECTED) || that.selectable.value().length > 1;\n                                    triggerChanging = triggerChange || (multi && current.hasClass(SELECTED) && e.ctrlKey);\n\n                                    if (triggerChanging && that.trigger(CHANGING, { target: current, originalEvent: e })) {\n                                        return;\n                                    }\n\n                                    if (isLocked && !cell) {\n                                        current = current.add(that._relatedRow(current));\n                                    }\n\n                                    if (multi) {\n                                        if (!e.ctrlKey) {\n                                            that.selectable.clear();\n                                        } else {\n                                            if (current.hasClass(SELECTED)) {\n                                                that._deselectCheckRows(current);\n                                                that._calculateAggregatesForSelected();\n                                                that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n                                                return;\n                                            }\n                                        }\n                                    } else {\n                                        that.selectable.clear();\n                                    }\n                                    if (!cell) {\n                                        that.selectable._lastActive = current;\n                                    }\n                                    that.selectable.value(current);\n                                    if (triggerChange) {\n                                        that._calculateAggregatesForSelected();\n                                        that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n                                    }\n                            } else if (!cell &&\n                                ($(target).is(\"td\") || ($(target).is(\"table\") && inArray(target, this._navigatableTables))) &&\n                              ((e.shiftKey && e.keyCode == keys.LEFT) ||\n                               (e.shiftKey && e.keyCode == keys.RIGHT) ||\n                               (e.shiftKey && e.keyCode == keys.UP) ||\n                               (e.shiftKey && e.keyCode == keys.DOWN) ||\n                               (e.keyCode === keys.SPACEBAR && e.shiftKey))) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                current = current.parent();\n\n                                if (that.trigger(CHANGING, { target: current, originalEvent: e })) {\n                                    return;\n                                }\n\n                                lastSelection = that.selectable.value();\n\n                                if (isLocked) {\n                                    current = current.add(that._relatedRow(current));\n                                }\n\n                                if (multi) {\n                                    if (!that.selectable._lastActive) {\n                                        that.selectable._lastActive = current;\n                                    }\n                                    that.selectable.selectRange(that.selectable._firstSelectee(), current);\n\n                                    if (!compareElements(lastSelection, that.selectable.value())) {\n                                        that.trigger(CHANGE, eventObject);\n                                    }\n                                } else if (!current.hasClass(SELECTED)) {\n                                    that.selectable.clear();\n                                    that.selectable.value(current);\n                                    that._calculateAggregatesForSelected();\n                                    that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n                                }\n                            }\n                        });\n                    }\n                }\n            },\n\n            _pasteReplaceHandler: function(plain) {\n                var that = this,\n                    rows,\n                    current,\n                    currentRow,\n                    currentRowUid,\n                    currentField,\n                    uids = [];\n\n                current = that.select().first();\n\n                if (!current.length) {\n                    return;\n                }\n\n                if (current.is(TR)) {\n                    current = current.children(TD).first();\n                }\n\n                rows = plain.split(\"\\n\").filter(function (f) { return f; });\n                currentRow = current.closest(\"tr\");\n                currentField = that.thead.find(\"th:eq(\" + current.index() + \")\").data(\"field\");\n                currentRowUid = currentRow.data(\"uid\");\n\n                uids.push(currentRowUid);\n\n                currentRow.nextAll(ITEMROW).slice(0, rows.length - 1).each(function (i, item) {\n                    uids.push($(item).data(\"uid\"));\n                });\n\n                that._executePaste(rows, uids, null, currentField);\n            },\n\n            _pasteInsertHandler: function(plain) {\n                var that = this,\n                    dataSource = that.dataSource,\n                    rows,\n                    current,\n                    currentRow,\n                    dataItemIndex,\n                    dataItem;\n\n                current = that.select().first();\n\n                if (!current.length) {\n                    return;\n                }\n\n                if (current.is(TR)) {\n                    current = current.children(TD).first();\n                }\n\n                rows = plain.split(\"\\n\").filter(function (f) { return f; });\n                currentRow = current.closest(\"tr\");\n                dataItem = that.dataItem(currentRow);\n                dataItemIndex = dataSource.indexOf(dataItem) + 1;\n\n                that._executePaste(rows, null, dataItemIndex, null);\n            },\n\n            _executePaste: function(rows, uids, index, currentField) {\n                var that = this,\n                    dataSource = that.dataSource,\n                    update = uids || false,\n                    dataItem,\n                    row,\n                    cells,\n                    cell,\n                    column,\n                    field,\n                    selectedUids = that._getSelectedRowUids(),\n                    selectedColumnFields = that._getSelectedColumnFields(),\n                    changedItems = [],\n                    visibleColumns = visibleLeafColumns(that.columns).filter(function (col) { return !col.selectable && !col.draggable & !col.command; }),\n                    startingIndex = currentField && visibleColumns.map(function (c) { return c.field; }).indexOf(currentField);\n\n                // If only one value is copied and multiple cells are selected, replace all values in all selected cells with the copied value.\n                if (rows.length === 1 && rows[0].split(\"\\t\").length === 1 && update) {\n                    for (var j = 0; j < selectedUids.length; j++) {\n                        var uid = selectedUids[j];\n                        dataItem = dataSource.getByUid(uid);\n                        cell = rows[0].split(\"\\t\")[0];\n\n                        for (var j$1 = 0; j$1 < selectedColumnFields.length; j$1++) {\n                            field = selectedColumnFields[j$1];\n                            if (dataItem && cell) {\n                                dataItem.set(field, cell);\n                            }\n                        }\n\n                        if (dataItem && dataItem.dirty) {\n                            changedItems.push(dataItem);\n                        }\n                    }\n                } else {\n                    // If more than one value is copied, proceed with the standard replace.\n                    for (var i = 0; i < rows.length; i++) {\n                        row = rows[i];\n                        cells = row.split(\"\\t\");\n                        dataItem = update ? dataSource.getByUid(uids[i]) : dataSource.insert(index + i, {});\n\n                        for (var j$2 = 0; j$2 < cells.length; j$2++) {\n                            cell = cells[j$2].replace(/\\r/, \"\");\n                            column = visibleColumns[j$2 + startingIndex || 0];\n\n                            if (column && dataItem && cell) {\n                                field = column.field;\n                                dataItem.set(field, cell);\n                            }\n                        }\n\n                        if (dataItem && dataItem.dirty) {\n                            changedItems.push(dataItem);\n                        }\n                    }\n                }\n                that.trigger(PASTE, { items: changedItems, type: update ? \"replace\" : \"insert\" });\n            },\n\n            _pasteKeyboardHandler: function(e) {\n                var that = this,\n                    current = that.current(),\n                    clipBoardData = e.originalEvent.clipboardData,\n                    operation = (that.pasteActionsDropDownList && that.pasteActionsDropDownList.value()) || \"insert\",\n                    rowUid,\n                    cellIndex,\n                    plain;\n\n                if ($(e.target).is(\".k-edit-cell input:visible\")) {\n                    return;\n                }\n\n                if (clipBoardData) {\n                    e.preventDefault();\n                    plain = clipBoardData.getData(\"text\").trimEnd();\n\n                    // If the copied value consists only of white spaces or new lines, reduce it to a single white space.\n                    if (isEmptyString(plain)) {\n                        plain = \" \";\n                    }\n\n                    if (current && current.length) {\n                        cellIndex = current.index();\n                        rowUid = current.closest(TR).data(\"uid\");\n                    }\n\n                    if (operation === \"replace\") {\n                        that._pasteReplaceHandler(plain);\n                    }\n\n                    if (operation === \"insert\") {\n                        that._pasteInsertHandler(plain);\n                    }\n\n                    // Restore the focus to the last focused cell.\n                    if (cellIndex && rowUid) {\n                        that._currentRowIndex = that.wrapper.find(TR + \"[data-uid='\" + rowUid + \"']\").index();\n                        that._restoreCurrent(cellIndex);\n                    }\n                }\n            },\n\n            _paste: function() {\n                var that = this,\n                    options = that.options,\n                    selectable = options.selectable,\n                    allowPaste = options.allowPaste;\n\n                if (allowPaste && selectable) {\n                    that.pasteHandler = that._pasteKeyboardHandler.bind(that);\n                    that.wrapper.on(\"paste\", that.pasteHandler);\n\n                    if (that.options.toolbar) {\n                        that._pasteToolbarDropDown();\n                    }\n                }\n            },\n\n            _clipboard: function() {\n                var options = this.options;\n                var selectable = options.selectable;\n\n                if (selectable && options.allowCopy) {\n                    var grid = this;\n                    if (!options.navigatable) {\n                        grid.table.attr(TABINDEX, 0);\n\n                        grid.table.add(grid.lockedTable)\n                            .on(MOUSEDOWN + NS + \" keydown\" + NS, \".k-detail-cell\", function(e) {\n                                if (e.target !== e.currentTarget) {\n                                    e.stopImmediatePropagation();\n                                }\n                            })\n                            .on(MOUSEDOWN + NS, NAVROW + \">\" + NAVCELL, tableClick.bind(grid));\n                    }\n                    grid.copyHandler = grid.copySelection.bind(grid);\n                    grid.updateClipBoardState = function() {\n                        if (grid.areaClipBoard) {\n                            grid.areaClipBoard.val(grid.getTSV()).trigger(\"focus\").select();\n                        }\n                    };\n                    grid.bind(\"change\",grid.updateClipBoardState);\n                    grid.wrapper.on(\"keydown\", grid.copyHandler);\n                    grid.clearAreaHandler = grid.clearArea.bind(grid);\n                    grid.wrapper.on(\"keyup\", grid.clearAreaHandler);\n                }\n            },\n\n            copySelectionToClipboard: function(includeHeaders) {\n                this._createAreaClipBoard();\n                this.areaClipBoard.val(this.getTSV(includeHeaders)).trigger(\"focus\").select();\n                document.execCommand('copy');\n            },\n\n            copySelection: function(e) {\n                if ((e instanceof jQuery.Event && !(e.ctrlKey || e.metaKey)) ||\n                    !(e.keyCode === 67 && (e.ctrlKey || e.metaKey)) ||\n                    $(e.target).is(\"input:visible,textarea:visible\") ||\n                    (window.getSelection && window.getSelection().toString()) ||\n                    (document.selection && document.selection.createRange().text) ) {\n                    return;\n                }\n\n                this._createAreaClipBoard();\n                this.areaClipBoard.val(this.getTSV()).trigger(\"focus\").select();\n            },\n\n            _createAreaClipBoard: function() {\n                if (!this.areaClipBoard) {\n                    this.areaClipBoard =\n                        $(\"<textarea />\")\n                        .css({\n                            position: \"fixed\",\n                            top: \"50%\",\n                            left: \"50%\",\n                            opacity: 0,\n                            width: 0,\n                            height: 0\n                        })\n                        .appendTo(this.wrapper);\n                }\n            },\n\n            getTSV: function(includeHeaders) {\n                var grid = this;\n                var selected = grid.select();\n                var delimeter = \"\\t\";\n                var allowCopy = grid.options.allowCopy;\n                var onlyVisible = true;\n                var hasLockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n\n                if ($.isPlainObject(allowCopy) && allowCopy.delimeter) {\n                    delimeter = allowCopy.delimeter;\n                }\n                var text = \"\";\n                if (selected.length) {\n                    if (selected.eq(0).is(TR)) {\n                        selected = selected.find(\"td:not(.k-group-cell)\");\n                    }\n                    if (onlyVisible) {\n                        selected.filter(\":visible\");\n                    }\n\n                    var result = [];\n                    var cellsOffset = this.columns.length;\n                    var lockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n                    var inLockedArea = true;\n                    var fields = [];\n                    var field;\n                    var columns = visibleLeafColumns(this.columns);\n\n                    $.each(selected, function(idx, cell) {\n                        cell = $(cell);\n                        field = grid._getCellField(cell, hasLockedCols);\n\n                        var tr = cell.closest(TR);\n                        var rowIndex = tr.index();\n                        var cellIndex = cell.index();\n                        if (onlyVisible) {\n                            cellIndex -= cell.prevAll(\":hidden\").length;\n                        }\n                        if (lockedCols && inLockedArea) {\n                            inLockedArea = $.contains(grid.lockedTable[0], cell[0]);\n                        }\n                        if (grid._groups() && inLockedArea) {\n                            cellIndex -= grid._groups();\n                        }\n                        cellIndex = inLockedArea ? cellIndex : (cellIndex + lockedCols );\n                        if (field) {\n                            fields[cellIndex] = field;\n                        }\n                        if (cellsOffset > cellIndex) {\n                            cellsOffset = cellIndex;\n                        }\n                        var cellText = cell.text();\n                        if (!result[rowIndex]) {\n                            result[rowIndex] = [];\n                        }\n                        result[rowIndex][cellIndex] = cellText;\n                    });\n\n                    var rowsOffset = result.length;\n                    result = $.each(result, function(idx, val) {\n                        if (val) {\n                            result[idx] = val.slice(cellsOffset);\n                            if (rowsOffset > idx) {\n                                rowsOffset = idx;\n                            }\n                        }\n                    });\n\n                    if (includeHeaders && fields.length) {\n                        result.splice(rowsOffset, 0, fields.map(function(field) {\n                            return getTitle(field, columns);\n                        }));\n\n                        var headerIndex = result.findIndex(function(el) {\n                            return el !== undefined$1;\n                        });\n\n                        result[headerIndex] = result[headerIndex].slice(cellsOffset);\n                    }\n\n                    $.each(result.slice(rowsOffset), function(idx, val) {\n                        if (val) {\n                            text += val.join(delimeter) + \"\\r\\n\";\n                        } else {\n                            text += \"\\r\\n\";\n                        }\n                    });\n                }\n                return text;\n            },\n\n            clearArea: function(e) {\n                if (this.areaClipBoard && e && e.target === this.areaClipBoard[0]) {\n                    focusTable(this.table, true);\n                }\n\n                if (this.areaClipBoard) {\n                    this.areaClipBoard.remove();\n                    this.areaClipBoard = null;\n                }\n            },\n\n            _adaptiveColumns: function() {\n                var that = this;\n\n                if (that._anyColumnHasMediaQuery()) {\n                    that._setColumnsMediaVisibility(that.columns);\n                    that._attachColumnMediaResizeHandler();\n                }\n            },\n\n            _anyColumnHasMediaQuery: function() {\n                return this._columnsWithMediaQuery().length;\n            },\n\n            _columnsWithMediaQuery: function() {\n                return columnsWithMedia(this.columns);\n            },\n\n            _attachColumnMediaResizeHandler: function() {\n                var that = this;\n\n                that._detachColumnMediaResizeHandler();\n                that._columnMediaResizeHandler = that._onColumnMediaResize.bind(that);\n                $(window).on(RESIZE + NS, that._columnMediaResizeHandler);\n            },\n\n            _detachColumnMediaResizeHandler: function() {\n                var that = this;\n\n                if (that._columnMediaResizeHandler) {\n                    $(window).off(RESIZE + NS, that._columnMediaResizeHandler);\n                }\n            },\n\n            _onColumnMediaResize: function() {\n                var that = this;\n                that._setColumnsMediaVisibility(that.columns);\n                that._setContentMediaWidth();\n            },\n\n            _setColumnsMediaVisibility: function(columns) {\n                var cols = columns || [];\n\n                for (var i = 0; i < cols.length; i++) {\n                    this._setColumnMediaVisibility(cols[i]);\n                }\n            },\n\n            _setColumnMediaVisibility: function(column) {\n                var that = this;\n\n                if (isUndefined(column.media)) {\n                    that._setColumnsMediaVisibility(column.columns);\n                } else {\n                    if (columnMatchesMedia(column)) {\n                        that._showColumnByMedia(column);\n\n                        if (!column.hidden) {\n                            that._setColumnsMediaVisibility(column.columns);\n                        }\n                    } else {\n                        that._hideColumnByMedia(column);\n                    }\n                }\n            },\n\n            _showColumnByMedia: function(column) {\n                if (!column.hidden) {\n                    // \"hidden\" has a priority over \"matchesMedia\"\n                    this.showColumn(column);\n                }\n\n                setColumnMatchesMedia(column);\n            },\n\n            _hideColumnByMedia: function(column) {\n                var initiallyHidden = column.hidden;\n\n                if (!initiallyHidden) {\n                    column._hideByMedia = true;\n                    this.hideColumn(column);\n                    column._hideByMedia = false;\n\n                    // hiding is tracked in \"matchesMedia\" instead of \"hidden\" flag\n                    column.hidden = initiallyHidden;\n                }\n\n                setColumnMatchesMedia(column);\n            },\n\n            _setContentMediaWidth: function() {\n                var that = this;\n                var options = that.options;\n                var isLocked = that._isLocked();\n                var footer;\n\n                if (options.scrollable && (options.resizable === true || (options.resizable && options.resizable.columns === true))) {\n                    if (isLocked && that.lockedFooter) {\n                        footer = that.lockedFooter.children(\"table\");\n                    } else if (that.footer) {\n                        footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                    }\n\n                    if (!footer || !footer[0]) {\n                        footer = $();\n                    }\n\n                    var header = isLocked ? that.wrapper.find(\".k-grid-header-locked\").find(\"table\") : that.wrapper.find(\".k-grid-header\").find(\"table\");\n                    var contentTable = isLocked ? that.lockedTable : that.table;\n\n                    var headerColumns = header.find(\"th\");\n                    var headerColgroup = header.find(\"colgroup\");\n\n                    var headerColumnsCount = headerColumns.length;\n                    var visibleHeaderColumnsCount = headerColumns.filter(isCellVisible).length;\n                    var hiddenHeaderColumnsCount = headerColumns.length - visibleHeaderColumnsCount;\n\n                    var totalHeaderWidth = 0;\n\n                    if (header[0].style.width !== \"\" && parseFloat(header[0].style.width) !== totalHeaderWidth) {\n                        var currentHeaderWidth = header.css(WIDTH);\n\n                        for (var i = 0; i < headerColumnsCount; i++) {\n                            if (isElementVisible(headerColumns[i])) {\n                                var columnWidth;\n                                var cellIndex = Math.max(i, (i - hiddenHeaderColumnsCount));\n                                var colgroupChild = headerColgroup.children()[cellIndex];\n                                var columnStyleWidth = colgroupChild ? colgroupChild.style.width : \"\";\n\n                                if (columnStyleWidth !== \"\") {\n                                    columnWidth = parseFloat(columnStyleWidth);\n                                } else {\n                                    // remove the header width to calculate the height of a column without fixed width\n                                    header.css(WIDTH, AUTO);\n                                    columnWidth = outerWidth(headerColumns.eq(i));\n                                    header.css(WIDTH, currentHeaderWidth);\n                                }\n\n                                totalHeaderWidth += columnWidth;\n                            }\n                        }\n\n                        contentTable.css('width', totalHeaderWidth - 1); // subtract 1 to remove the horizontal scroll\n                        header.css('width', totalHeaderWidth);\n                        footer.css('width', totalHeaderWidth);\n                        that._updateStickyColumns();\n                    }\n                }\n            },\n\n            _minScreenSupport: function() {\n                var any = this.hideMinScreenCols();\n\n                if (any) {\n                    this.minScreenResizeHandler = this.hideMinScreenCols.bind(this);\n                    $(window).on(\"resize\", this.minScreenResizeHandler);\n                }\n            },\n\n            hideMinScreenCols: function() {\n                var cols = this.columns,\n                    screenWidth = (window.innerWidth > 0) ? window.innerWidth : screen.width;\n\n                return this._iterateMinScreenCols(cols, screenWidth);\n            },\n\n            _iterateMinScreenCols: function(cols, screenWidth) {\n                var any = false;\n\n                for (var i = 0; i < cols.length; i++) {\n                    var col = cols[i];\n                    var minWidth = col.minScreenWidth;\n                    if (minWidth !== undefined$1 && minWidth !== null) {\n                        any = true;\n                        if (minWidth > screenWidth) {\n                            this.hideColumn(col);\n                        } else {\n                            this.showColumn(col);\n                        }\n                    }\n                    if (!col.hidden && col.columns) {\n                        any = this._iterateMinScreenCols(col.columns, screenWidth) || any;\n                    }\n                }\n                return any;\n            },\n\n            _stickyColumns: function() {\n                var that = this;\n\n                if (that._anyStickyColumns()) {\n                    that._setStickyColumns(false);\n                }\n            },\n\n            _updateStickyColumns: function() {\n                var that = this;\n                var groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n                if (that._anyStickyColumns()) {\n                    that._setStickyColumns(true);\n                    that._templates();\n\n                    if (groupHeaderColumnTemplateColumns.length > 0) {\n                        that._renderGroupRows();\n                    }\n\n                    if (that._hasFilterRow()) {\n                        that._updateStickyFilterCells();\n                    }\n                }\n            },\n\n            _updateStickyFilterCells: function() {\n                var that = this;\n                var filterCells = that.thead.find(\".k-filter-row\").find(\"td:not(.k-group-cell,.k-hierarchy-cell)\");\n                if (filterCells.length) {\n                    filterCells.each(function() {\n                        var th = $(this);\n                        var column = th.data(\"column\");\n\n                        if (column.sticky) {\n                            if (isPlainObject(column.stickyStyle)) {\n                                th.css({\n                                    left: column.stickyStyle.left || \"\",\n                                    right: column.stickyStyle.right || \"\"\n                                });\n                            }\n\n                            th.addClass(STICKY_HEADER_CLASS);\n                        } else {\n                            th.css({\n                                left: \"\",\n                                right: \"\"\n                            });\n\n                            th.removeClass(STICKY_HEADER_CLASS);\n                        }\n                    });\n                }\n            },\n\n            _anyStickyColumns: function() {\n                var that = this;\n\n                return stickyColumns(that.columns).length;\n            },\n\n            _setStickyColumns: function(updateStyles) {\n                var that = this;\n                var columns = stickyColumns(that.columns);\n                var visibleColumns = visibleStickyColumns(that.columns);\n                var stickyWidths = that._calculateStickyWidths(visibleColumns);\n\n                that._removeStickyAttributes(columns);\n                that._setStickyClassAttributes(columns);\n                that._setStickyStyleAttributes(visibleColumns, stickyWidths, updateStyles);\n\n                if (updateStyles) {\n                    that._setStickyStyles(visibleColumns, stickyWidths);\n                }\n            },\n\n            _calculateStickyWidths: function(columns, initialLeftWidth, initialRightWidth) {\n                var that = this;\n                var i;\n                var column;\n                var columnWidth;\n                var nextColumnLeft;\n                var nextColumnRight;\n                var left = isRtl ? \"right\" : \"left\";\n                var right = isRtl ? \"left\" : \"right\";\n                var stickyWidths = {\n                    left: new Array(columns.length).fill(initialLeftWidth ? initialLeftWidth : 0),\n                    right: new Array(columns.length).fill(initialRightWidth ? initialRightWidth : 0)\n                };\n\n                for (i = 0; i < columns.length - 1; i++) {\n                    column = columns[i];\n                    columnWidth = that._sumColumnWidth(column);\n                    nextColumnLeft = columnWidth + stickyWidths[left][i];\n\n                    stickyWidths[left][i + 1] = nextColumnLeft;\n                }\n\n                for (i = columns.length - 1; i > 0; i--) {\n                    column = columns[i];\n                    columnWidth = that._sumColumnWidth(column);\n                    nextColumnRight = columnWidth + stickyWidths[right][i];\n\n                    stickyWidths[right][i - 1] = nextColumnRight;\n                }\n\n                return stickyWidths;\n            },\n\n            _setStickyClassAttributes: function(columns, masterIndex) {\n                var that = this;\n                var i;\n                var column;\n\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n\n                    if (column.columns) {\n                        if (!masterIndex && i) {\n                            masterIndex = i;\n                        }\n\n                        that._setStickyClassAttributes(childColumns([column]), masterIndex);\n                    }\n\n                    if (masterIndex) {\n                        addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_NO_BORDER_CLASS);\n                    }\n                    addColumnAttribute(column, \"attributes\", \"class\", STICKY_CELL_CLASS);\n                    addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_CLASS);\n                    addColumnAttribute(column, \"footerAttributes\", \"class\", STICKY_FOOTER_CLASS);\n                }\n            },\n\n            _setStickyStyleAttributes: function(columns, stickyWidths, updateStyles) {\n                var that = this;\n                var i;\n                var column;\n                var stickyLeft;\n                var stickyRight;\n                var stickyStyle;\n                var childCols;\n                var childStickyWidths;\n\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n                    stickyLeft = stickyWidths.left[i];\n                    stickyRight = stickyWidths.right[i];\n                    stickyStyle = { left: stickyLeft + \"px\", right: stickyRight + \"px\" };\n\n                    if (column.columns) {\n                        childCols = visibleChildColumns([column]);\n                        childStickyWidths = that._calculateStickyWidths(childCols, stickyLeft, stickyRight);\n\n                        that._setStickyStyleAttributes(childCols, childStickyWidths, updateStyles);\n\n                        if (updateStyles) {\n                            that._setStickyStyles(childCols, childStickyWidths);\n                        }\n                    }\n\n                    addColumnAttribute(column, \"attributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                    addColumnAttribute(column, \"attributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n                    addColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                    addColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n                    addColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                    addColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n\n                    column.stickyStyle = stickyStyle;\n                }\n            },\n\n            _removeStickyAttributes: function(columns) {\n                var that = this;\n                var i;\n                var cellClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_CELL_CLASS + \")*\", \"ig\");\n                var headerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_CLASS + \")*\", \"ig\");\n                var footerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_FOOTER_CLASS + \")*\", \"ig\");\n                var headerClassNoBorderRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_NO_BORDER_CLASS + \")*\", \"ig\");\n                var column;\n\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n\n                    if (column.columns) {\n                        that._removeStickyAttributes(childColumns([column]));\n                    }\n\n                    removeColumnAttribute(column, \"attributes\", \"class\", cellClassRegExp);\n                    removeColumnAttribute(column, \"attributes\", kendo.attr(\"style-left\"), '', true);\n                    removeColumnAttribute(column, \"attributes\", kendo.attr(\"style-right\"), '', true);\n\n                    removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassRegExp);\n                    removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassNoBorderRegExp);\n                    removeColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-left\"), '', true);\n                    removeColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-right\"), '', true);\n\n                    removeColumnAttribute(column, \"footerAttributes\", \"class\", footerClassRegExp);\n                    removeColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-left\"), '', true);\n                    removeColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-right\"), '', true);\n                }\n            },\n\n            _setStickyStyles: function(columns, stickyWidths) {\n                var that = this;\n                var i;\n                var j;\n                var leafsCols = leafColumns(nonLockedColumns(that.columns));\n                var rows = that.tbody.children(\":not(.k-detail-row)\");\n                var row;\n                var column;\n                var columnIndex;\n                var left;\n                var right;\n                var header;\n                var footer;\n                var groupHeader;\n                var cell;\n\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n                    left = stickyWidths.left[i];\n                    right = stickyWidths.right[i];\n                    columnIndex = leafsCols.indexOf(column);\n                    header = that._getColumnHeader(column);\n\n                    header.addClass(STICKY_HEADER_CLASS);\n                    if (column.headerAttributes[\"class\"] && column.headerAttributes[\"class\"].indexOf(STICKY_HEADER_NO_BORDER_CLASS) !== -1) {\n                        header.addClass(STICKY_HEADER_NO_BORDER_CLASS);\n                    }\n                    setLeftAndRightStyles(header, left, right);\n\n                    if (column.columns) {\n                        continue;\n                    }\n\n                    if (that.footer) {\n                        footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                        footer.addClass(STICKY_FOOTER_CLASS);\n                        setLeftAndRightStyles(footer, left, right);\n                    }\n\n                    for (j = 0; j < rows.length; j++) {\n                        row = $(rows[j]);\n\n                        if (row.hasClass(GROUPING_ROW)) {\n                            groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n\n                            groupHeader.addClass(STICKY_CELL_CLASS);\n                            setLeftAndRightStyles(groupHeader, left, right);\n                        } else {\n                            cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                            cell.addClass(STICKY_CELL_CLASS);\n                            setLeftAndRightStyles(cell, left, right);\n                        }\n                    }\n                }\n            },\n\n            _removeStickyStyles: function(columns) {\n                var that = this;\n                var i;\n                var j;\n                var leafsCols = leafColumns(nonLockedColumns(that.columns));\n                var rows = that.tbody.children(\":not(.k-detail-row)\");\n                var row;\n                var column;\n                var columnIndex;\n                var header;\n                var footer;\n                var groupHeader;\n                var cell;\n\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n                    columnIndex = leafsCols.indexOf(column);\n                    header = that._getColumnHeader(column);\n\n                    header.removeClass(STICKY_HEADER_CLASS);\n                    header.removeClass(STICKY_HEADER_NO_BORDER_CLASS);\n                    setLeftAndRightStyles(header, \"\", \"\");\n\n                    if (column.columns) {\n                        that._removeStickyStyles(column.columns);\n                        continue;\n                    }\n\n                    if (column.footerTemplate && that.footer) {\n                        footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                        footer.removeClass(STICKY_FOOTER_CLASS);\n                        setLeftAndRightStyles(footer, \"\", \"\");\n                    }\n\n                    for (j = 0; j < rows.length; j++) {\n                        row = $(rows[j]);\n\n                        if (row.hasClass(GROUPING_ROW)) {\n                            groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n\n                            groupHeader.removeClass(STICKY_CELL_CLASS);\n                            setLeftAndRightStyles(groupHeader, \"\", \"\");\n                        } else {\n                            cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                            cell.removeClass(STICKY_CELL_CLASS);\n                            setLeftAndRightStyles(cell, \"\", \"\");\n                        }\n                    }\n                }\n            },\n\n            _getColumnHeader: function(column) {\n                var that = this;\n                var header = $(\"#\" + column.headerAttributes.id).length ? $(\"#\" + column.headerAttributes.id) : $(\"#\" + that._cellId);\n\n                return header;\n            },\n\n            _sumColumnWidth: function(column) {\n                var that = this;\n                var width = 0;\n\n                if (column.columns) {\n                    width = that._sumCurrentWidths(leafColumns([column]));\n                } else {\n                    width = that._sumCurrentWidths([column]);\n                }\n\n                return width;\n            },\n\n            _sumCurrentWidths: function(cols) {\n                var that = this;\n                var width = 0;\n                var colWidth = 0;\n                var col;\n                var header;\n                var i;\n                var length = cols.length;\n\n                for (i = 0; i < length; i++) {\n                    col = cols[i];\n                    header = that._getColumnHeader(col);\n\n                    if (!col.hidden && columnMatchesMedia(col)) {\n                        colWidth = header.is(\":visible\") ? header.outerWidth() : col.width;\n\n                        width += colWidth ? parseInt(colWidth, 10) : 0;\n                    }\n                }\n\n                return width;\n            },\n\n            _belongsToGrid: function(element) {\n                return this.wrapper[0] === element.closest(WRAPPER)[0];\n            },\n\n            getSelectedData: function() {\n                var that = this;\n                var selectedRanges = that.selectable.selectedRanges();\n                var selectedRangeNames = Object.keys(selectedRanges);\n                var selectedSingleItems = that.selectable.selectedSingleItems();\n                var result = [];\n                var visibleColumns = visibleLeafColumns(that.columns);\n\n                for (var idx = 0; idx < selectedRangeNames.length; idx++) {\n                    result = result.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns, null, true));\n                }\n\n                if (selectedSingleItems.length) {\n                    result = result.concat(that._mapSelectionToData(selectedSingleItems, visibleColumns, null, true));\n                }\n\n                return result;\n            },\n\n            getSelectedDataByKeys: function() {\n                var that = this,\n                    dataSource = that.dataSource,\n                    keys = that.selectedKeyNames(),\n                    visibleColumns = visibleLeafColumns(that.columns),\n                    key,\n                    dataItem,\n                    result = {};\n\n                var columnMapHandler = function(col) {\n                    var result = {};\n\n                    if (!col.field) {\n                        return;\n                    }\n\n                    result[col.field] = dataItem[col.field];\n                    return result;\n                };\n\n                for (var i = 0; i < keys.length; i++) {\n                    key = keys[i];\n                    dataItem = dataSource.get(key);\n\n                    if (dataItem) {\n                        result[dataItem.uid] = $.extend.apply(null, visibleColumns.map(columnMapHandler));\n                    }\n                }\n\n                return Object.keys(result).map(function(id) {\n                    return result[id];\n                });\n            },\n\n            exportSelectedToExcel: function(includeHeaders) {\n                if (!kendo.excel || !kendo.ooxml) {\n                    throw new Error(\"The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.\");\n                }\n\n                var that = this;\n                var excel = this.options.excel || {};\n                var visibleColumns = visibleLeafColumns(that.columns);\n                var exporter = new kendo.excel.ExcelExporter({});\n                var columnHandler = function() {return { autoWidth: true };};\n                var book = {\n                    sheets: [{\n                        columns: Array.apply(0, Array(visibleColumns.length)).map(columnHandler),\n                        rows: [],\n                        freezePane: {},\n                        filter: false\n                    }]\n                };\n                var selectedRanges = that.selectable.selectedRanges();\n                var selectedRangeNames = Object.keys(selectedRanges);\n                var selectedSingleItems = that.selectable.selectedSingleItems();\n                var idx;\n                var exportData = [];\n                var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n                var sortHandler = exportDataSort.bind(that);\n\n                for (idx = 0; idx < selectedRangeNames.length; idx++) {\n                    exportData = exportData.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns, isExcelExportableColumn));\n                }\n\n                if (exportData.length) {\n                    that._addRangeSelectionRows(book, exporter, exportData, includeHeaders);\n\n                }\n                exportData = selectedSingleItems.length ? that._mapSelectionToData(selectedSingleItems, visibleColumns, isExcelExportableColumn) : [];\n\n                if (exportData.length) {\n                    if (hasLockedCols) {\n                        exportData = exportData.sort(sortHandler);\n                    }\n                    that._addSingleSelectionRows(book, exporter, exportData, includeHeaders);\n                }\n\n                if (book.sheets[0].rows.length) {\n                    var workbook = new kendo.ooxml.Workbook(book);\n\n                    if (!workbook.options) {\n                        workbook.options = {};\n                    }\n                    workbook.options.skipCustomHeight = true;\n\n                    workbook.toDataURLAsync().then(function(dataURI) {\n                        kendo.saveAs({\n                            dataURI: dataURI,\n                            fileName: book.fileName || excel.fileName,\n                            proxyURL: excel.proxyURL,\n                            forceProxy: excel.forceProxy\n                        });\n                    });\n                }\n            },\n\n            _addSingleSelectionRows: function(book, exporter, data, includeHeaders) {\n                var idx = 0;\n                var visibleColumns = visibleLeafExportColumns(this.columns);\n                var item;\n\n                for (idx = 0; idx < data.length; idx++) {\n                    item = data[idx];\n                    exporter.data = [item];\n                    this._setExporterColumns(exporter, visibleColumns, item);\n                    this._createExportRows(book, exporter, includeHeaders);\n                }\n            },\n\n            _addRangeSelectionRows: function(book, exporter, data, includeHeaders) {\n                var visibleColumns = visibleLeafExportColumns(this.columns);\n\n                exporter.data = data;\n                this._setExporterColumns(exporter, visibleColumns, data[0]);\n                this._createExportRows(book, exporter, includeHeaders);\n            },\n\n            _createExportRows: function(book, exporter, includeHeaders) {\n                book.sheets[0].rows = book.sheets[0].rows.concat(includeHeaders ? exporter._rows() : exporter._dataRows(exporter.data, 0));\n            },\n\n            _setExporterColumns: function(exporter, columns, item) {\n                exporter.columns = exporter.options.columns = $.map(columns.filter(function(col) {\n                    return Object.keys(item).indexOf(col.field) >= 0;\n                }), exporter._prepareColumn);\n            },\n\n            _mapSelectionToData: function(elements, visibleColumns, columnsFilter, ignoreOffset) {\n                var that = this;\n                var elementType = elements[0][0].nodeName;\n                var isRowSelection = elementType === 'TR';\n                var dataItem;\n                var result = {};\n                var element;\n                var curr;\n                var field;\n                var columnMapHandler = function(col) {\n                    var result = {};\n\n                    if (!col.field || (columnsFilter && !columnsFilter(col))) {\n                        return;\n                    }\n\n                    result[col.field] = dataItem[col.field];\n                    return result;\n                };\n                var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n                var column;\n\n                for (var i = 0; i < elements.length; i++) {\n                    element = elements[i];\n                    dataItem = that.dataItem(isRowSelection ? element : element.parent());\n\n                    if (isRowSelection) {\n                        result[dataItem.uid] = $.extend.apply(null, visibleColumns.map(columnMapHandler));\n                    } else {\n                        field = that._getCellField(element, hasLockedCols, ignoreOffset);\n\n                        if (!field) {\n                            continue;\n                        }\n\n                        curr = result[dataItem.uid];\n\n                        if (!curr) {\n                            curr = result[dataItem.uid] = {};\n                        }\n\n                        column = findColumnByField(visibleColumns, field);\n\n                        if (!column || (columnsFilter && !columnsFilter(column))) {\n                            continue;\n                        }\n\n                        curr[field] = dataItem[field];\n                    }\n                }\n\n                return Object.keys(result).map(function(id) {\n                    result[id].uid = id;\n                    return result[id];\n                });\n            },\n\n            _getCellField: function(cell, hasLockedCols, ignoreOffset) {\n                var grid = this;\n                var inLockedArea = hasLockedCols && $.contains(grid.lockedTable[0], cell[0]);\n                var fieldAttr = kendo.attr('field');\n                var index = kendo.attr('index');\n                var indexOffset = 0;\n\n                if (ignoreOffset) {\n                    indexOffset = grid._trailingColumns();\n                }\n\n                if (hasLockedCols) {\n                    return grid.element.find(\".k-grid-header-\" + (inLockedArea ? \"locked\" : \"wrap\") + \" th[\" + index + \"='\" + cell.index() + \"']\").attr(fieldAttr);\n                } else {\n                    return grid.thead.find(\"th[\" + index + \"='\" + (cell.index() - indexOffset) + \"']\").attr(fieldAttr);\n                }\n            },\n\n            _relatedRow: function(row) {\n                var lockedTable = this.lockedTable;\n                row = $(row);\n\n                if (!lockedTable) {\n                    return row;\n                }\n\n                var table = row.closest(this.table.add(this.lockedTable));\n                var index = table.find(\">tbody>tr\").index(row);\n\n                table = table[0] === this.table[0] ? lockedTable : this.table;\n\n                return table.find(\">tbody>tr\").eq(index);\n            },\n\n            _relatedCell: function(cell) {\n                var lockedTable = this.lockedTable;\n\n                cell = $(cell);\n\n                if (!lockedTable) {\n                    return cell;\n                }\n\n                var table = cell.closest(this.table.add(this.lockedTable));\n                var index = table.find(\">tbody>tr>td\").index(cell);\n\n                table = table[0] === this.table[0] ? lockedTable : this.table;\n\n                return table.find(\">tbody>tr>td\").index(index);\n            },\n\n            clearSelection: function() {\n                var that = this;\n\n                if (that.selectable && !that._checkBoxSelection) {\n                    that.selectable.clear();\n                }\n\n                if (that._checkBoxSelection) {\n                    that._deselectCheckRows(that.select());\n                    return;\n                }\n\n                if (that.options.persistSelection) {\n                    that._persistSelectedRows();\n                } else {\n                    that._selectedIds = {};\n                }\n            },\n\n            select: function(items) {\n                var that = this,\n                    selectable = that.selectable,\n                    selectableoptions = kendo.ui.Selectable.parseOptions(this.options.selectable),\n                    cell = selectableoptions.cell;\n\n                items = that.table.add(that.lockedTable).find(items);\n                if (items.length) {\n                    if (selectable && !selectable.options.multiple) {\n                        selectable.clear();\n                        items = items.first();\n                    }\n\n                    if (that._isLocked()) {\n                        items = items.add(items.map(function() {\n                            if (cell) {\n                                return that._relatedCell(this);\n                            }\n                            else {\n                                return that._relatedRow(this);\n                            }\n                        }));\n                    }\n\n                    if (selectable && !that._checkBoxSelection) {\n                        selectable.value(items);\n                    } else {\n                        that._checkRows(items);\n                        if (that.select().length === that.items().length) {\n                            that._toggleHeaderCheckState(true);\n                        }\n                    }\n\n                    if (!cell) {\n                        that._persistSelectedRows();\n                    }\n\n                    return;\n                }\n\n                return selectable ? selectable.value() : that.items().filter(\".\" + SELECTED);\n            },\n\n            _initSelectableAggregates: function() {\n                var that = this;\n\n                if (!that.options.selectable) {\n                    return;\n                }\n\n                if (!that._selectableAggregatesOptions) {\n                    that._selectableAggregatesOptions = that._parseSelectableAggregatesOptions();\n                }\n\n                if (that._selectableAggregatesOptions.count) {\n                    that._cellAggregates = {\n                        count: 0\n                    };\n                }\n            },\n\n            _calculateAggregatesForSelected: function() {\n                var that = this,\n                    options = that.options,\n                    selectedData = that.getSelectedDataByKeys(),\n                    selectable = that.options.selectable,\n                    cellAggregates = selectable.cellAggregates,\n                    cellsLength = visibleLeafColumns(that.columns).filter(function (col) { return !col.selectable && !col.draggable & !col.command; }).length,\n                    columnFields = getColumnsFields(options.columns),\n                    isCellSelection = kendo.ui.Selectable.parseOptions(selectable).cell,\n                    dataItem,\n                    type,\n                    value,\n                    numberAggregates = [],\n                    dateAggregates = [],\n                    booleanAggregates = [],\n                    count, min, max, sum, average, earliest, latest, isTrue, isFalse;\n\n                if (!cellAggregates) {\n                    return;\n                }\n\n                // getSelectedDataByKeys won't work for cell selection.\n                if (isCellSelection) {\n                    selectedData = that.getSelectedData();\n                }\n\n                cellAggregates = that._selectableAggregatesOptions;\n\n                for (var i = 0; i < selectedData.length; i++) {\n                    dataItem = selectedData[i];\n\n                    for (var j = 0; j < columnFields.length; j++) {\n                        value = dataItem[columnFields[j]];\n                        type = getType(value);\n\n                        switch (type) {\n                            case \"number\":\n                                numberAggregates.push(value);\n                                break;\n                            case \"date\":\n                                dateAggregates.push(value);\n                                break;\n                            case \"boolean\":\n                                booleanAggregates.push(value);\n                                break;\n                            default:\n                                break;\n                        }\n                    }\n                }\n\n                if (cellAggregates.count) {\n                    count = isCellSelection ? cellsExcludingSpecialColumns(that.select()).length : selectedData.length * cellsLength;\n                }\n\n                if (numberAggregates.length) {\n                    max = cellAggregates.max ? numberAggregates.reduce(function (acc, current) { return Math.max(acc, current); }) : null;\n                    min = cellAggregates.min ? numberAggregates.reduce(function (acc, current) { return Math.min(acc, current); }) : null;\n                    sum = cellAggregates.sum ? numberAggregates.reduce(function (acc, current) { return acc + current; }) : null;\n                    average = cellAggregates.average ? numberAggregates.reduce(function (acc, current) { return (acc + current); }) / numberAggregates.length : null;\n                }\n\n                if (dateAggregates.length) {\n                    earliest = cellAggregates.earliest ? dateAggregates.reduce(function (acc, current) { return new Date(Math.min(acc, current)); }) : null;\n                    latest = cellAggregates.latest ? dateAggregates.reduce(function (acc, current) { return new Date(Math.max(acc, current)); }) : null;\n                }\n\n                if (booleanAggregates.length) {\n                    isTrue = cellAggregates.isTrue ? booleanAggregates.filter(function (b) { return b === true; }).length : null;\n                    isFalse = cellAggregates.isFalse ? booleanAggregates.filter(function (b) { return b === false; }).length : null;\n                }\n\n                that._cellAggregates = {\n                    count: count,\n                    max: max,\n                    min: min,\n                    sum: sum,\n                    average: average,\n                    earliest: earliest,\n                    latest: latest,\n                    isTrue: isTrue,\n                    isFalse: isFalse\n                };\n\n                if (that.statusBar) {\n                    that._statusBar();\n                }\n            },\n\n            _parseSelectableAggregatesOptions: function() {\n                var that = this,\n                    cellAggregates = that.options.selectable.cellAggregates,\n                    result = {};\n\n                if (isArray(cellAggregates)) {\n                    for (var i = 0; i < cellAggregates.length; i++) {\n                        result[cellAggregates[i]] = true;\n                    }\n                    return result;\n                }\n\n                // If the value of cellAggregates is 'true' -> all aggregates must be enabled.\n                return {\n                    count: true,\n                    min: true,\n                    max: true,\n                    sum: true,\n                    average: true,\n                    earliest: true,\n                    latest: true,\n                    isTrue: true,\n                    isFalse: true\n                };\n            },\n\n            _toggleHeaderCheckState: function(checked) {\n                var that = this;\n                if (checked) {\n                    that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                        .prop(\"checked\", true).attr(ARIA_CHECKED, true)\n                        .attr(ARIA_LABEL, \"Deselect all rows\");\n                } else {\n                    that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                        .prop(\"checked\", false).attr(ARIA_CHECKED, false)\n                        .attr(ARIA_LABEL, \"Select all rows\");\n                }\n            },\n\n            _uncheckCheckBoxes: function() {\n                var that = this;\n                var tables = that.table.add(that.lockedTable);\n\n                tables.find(\"tbody \" + CHECKBOXINPUT).attr(ARIA_CHECKED, false)\n                    .prop(\"checked\", false).attr(ARIA_LABEL, \"Select row\");\n\n            },\n\n            _deselectCheckRows: function(items) {\n                var that = this,\n                rangeSelectedAttr = kendo.attr(\"range-selected\");\n                items = that.table.add(that.lockedTable).find(items);\n\n                if (that._isLocked()) {\n                    items = items.add(items.map(function() {\n                        return that._relatedRow(this);\n                    }));\n                }\n\n                items.each(function() {\n                    $(this).removeClass(SELECTED).removeAttr(rangeSelectedAttr).find(CHECKBOXINPUT).attr(ARIA_CHECKED, false)\n                        .prop(\"checked\", false).attr(ARIA_LABEL, \"Select row\");\n                });\n                that._toggleHeaderCheckState(false);\n\n                that._persistSelectedRows();\n\n            },\n\n            _checkRows: function(items) {\n                items.each(function() {\n                    $(this).addClass(SELECTED).find(CHECKBOXINPUT)\n                        .prop(\"checked\", true)\n                        .attr(ARIA_LABEL, \"Deselect row\")\n                        .attr(ARIA_CHECKED, true);\n                });\n            },\n\n            _persistSelectedRows: function() {\n                var that = this,\n                    key,\n                    dataItem,\n                    allRows = that.items(),\n                    dataSourceOptions = that.dataSource.options,\n                    schema = dataSourceOptions.schema,\n                    modelId,\n                    selectedViewIds = {};\n\n                if (!schema || !schema.model || !that._data) {\n                    return;\n                }\n\n                modelId = isFunction(schema.model) ? schema.model.fn.idField : schema.model.id;\n\n                if (!modelId) {\n                    return;\n                }\n\n                if (!kendo.ui.Selectable.parseOptions(that.options.selectable).multiple && !that._checkBoxSelection) {\n                    that._selectedIds = {};\n                }\n\n                that.select().each(function() {\n                    dataItem = that.dataItem(this);\n                    selectedViewIds[dataItem[modelId]] = true;\n                });\n\n                for (var i = 0; i < allRows.length; i ++) {\n                    dataItem = that.dataItem(allRows[i]);\n                    key = dataItem[modelId];\n                    if (selectedViewIds[key]) {\n                        that._selectedIds[key] = true;\n                    } else {\n                        delete that._selectedIds[key];\n                    }\n                }\n            },\n\n            selectedKeyNames: function() {\n                var that = this,\n                    ids = [];\n                for (var property in that._selectedIds) {\n                    ids.push(property);\n                }\n                ids.sort();\n                return ids;\n            },\n\n            _updateCurrentAttr: function(current, next) {\n                var headerId = $(current).data(\"headerId\");\n                var nextId;\n                var descId;\n\n                $(current).removeClass(FOCUSED);\n                this.table.removeAttr(ARIA_ACTIVEDESCENDANT);\n\n                if (headerId) {\n                    headerId = headerId.replace(this._cellId, \"\");\n                    $(current).attr(ID, headerId);\n                } else {\n                    $(current).removeAttr(ID);\n                }\n\n                nextId = next.attr(ID);\n\n                if (nextId != this._cellId) {\n                    next.data(\"headerId\", nextId);\n                }\n\n                if (!!nextId) {\n                    descId = nextId;\n                } else {\n                    next.attr(ID, this._cellId);\n                }\n\n                next.addClass(FOCUSED);\n                this.table.attr(ARIA_ACTIVEDESCENDANT, descId || this._cellId);\n\n                this._current = next;\n            },\n\n            _scrollCurrent: function() {\n                var current = this._current;\n                var scrollable = this.options.scrollable;\n\n                if (!current || !scrollable) {\n                    return;\n                }\n\n                var row = current.parent();\n                var tableContainer = row.closest(\"table\").parent();\n\n                var isInLockedContainer = tableContainer.is(\".k-grid-content-locked,.k-grid-header-locked\");\n                var isInContent = tableContainer.is(\".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap\");\n\n                var scrollableContainer = $(this.content).find(\">.k-virtual-scrollable-wrap\").addBack().last()[0];\n\n                //adjust scroll vertically\n                if (isInContent) {\n                    if (this.virtualScroll) {\n                        var rowIndex = Math.max(inArray(row[0], this._items(row.parent())), 0);\n                        if (this.virtualScroll.rows) {\n                            this._rowVirtualIndex = this.virtualScrollable.itemIndex(rowIndex);\n                            this.virtualScrollable.scrollIntoView(row);\n                        } else {\n                            this._rowVirtualIndex = rowIndex;\n                            this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                        }\n                    } else {\n                        this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                    }\n                }\n\n                if (this.lockedContent) {\n                    //sync locked and non-locked content scrollTop\n                    this.lockedContent[0].scrollTop = scrollableContainer.scrollTop;\n                }\n\n                //adjust scroll horizontally, if not inside locked tables\n                if (!isInLockedContainer) {\n                    this._scrollTo(current[0], scrollableContainer);\n                }\n            },\n\n            current: function(next) {\n                return this._setCurrent(next, true);\n            },\n\n            _setCurrent: function(next, preventTrigger, preventScroll) {\n                var current = this._current;\n\n                next = $(next);\n\n                if (current && next && current.length && next.length && current.closest(\".k-filter-row\").length > 0 && next.closest(\".k-filter-row\").length === 0) {\n                    this._filterFocusable().attr(TABINDEX, -1);\n                }\n\n                if (next.length) {\n                    if (!current || current[0] !== next[0]) {\n                        var parent = next.parent();\n                        var siblings = parent.children(DATA_CELL);\n                        var colspan = parseInt(parent.children().first().attr(\"colspan\"), 10);\n\n                        if (this._hasVirtualColumns()) {\n                            this._virtualCellIndex = (colspan > 1 ? colspan : 0) + siblings.index(next);\n                        }\n                        this._updateCurrentAttr(current, next);\n\n                        if (!preventScroll) {\n                            this._scrollCurrent();\n                        }\n\n                        if (!preventTrigger) {\n                            this.trigger(NAVIGATE, {\n                                element: next\n                            });\n                        }\n                    }\n                }\n\n                if (next && next.length) {\n                    this._lastCellIndex = next.parent().children(\".k-group-cell,\" + DATA_CELL_HIDDENINCLUDED).index(next);\n                }\n\n                this._updateSelctCheckbox(current, next);\n\n                return this._current;\n            },\n\n            _removeCurrent: function() {\n                if (this._current) {\n                    this._current.removeClass(FOCUSED);\n                    this._current = null;\n                }\n            },\n\n            _updateSelctCheckbox: function(current, next) {\n                var nextCheckbox;\n\n                if (next && next.length) {\n                    nextCheckbox = next.find(\".k-select-checkbox\");\n\n                    if (nextCheckbox.length > 0) {\n                        nextCheckbox.focus();\n                    } else if (current && current.find(\".k-select-checkbox\").length > 0) {\n                        focusTable(this.table, true);\n                    }\n                }\n            },\n\n            _scrollTo: function(element, container) {\n                var elementToLowercase = element.tagName.toLowerCase();\n                var isHorizontal = elementToLowercase === \"td\" || elementToLowercase === \"th\";\n                var table = $(element).closest(\"table\")[0];\n                var elementOffsetDir = element[isHorizontal ? \"offsetWidth\" : \"offsetHeight\"];\n                var containerScroll = container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"];\n                var containerOffsetDir = container[isHorizontal ? \"clientWidth\" : \"clientHeight\"];\n                var elementOffset = $(element).css(\"position\") === \"relative\" && isRtl && isHorizontal ? Math.abs(table.offsetLeft - element.offsetLeft) : element[isHorizontal ? \"offsetLeft\" : \"offsetTop\"];\n                var bottomDistance = elementOffset + elementOffsetDir;\n                var result = 0;\n                var ieCorrection = 0;\n                var firefoxCorrection = 0;\n\n                if (isRtl && isHorizontal) {\n                    if (browser.msie || browser.edge) {\n                        ieCorrection = table.offsetLeft;\n                    } else if (browser.mozilla || (browser.webkit && (browser.version > 85))) {\n                        firefoxCorrection = table.offsetLeft - kendo.support.scrollbar();\n                    }\n                }\n\n                containerScroll = Math.abs(containerScroll + ieCorrection - firefoxCorrection);\n\n                if (containerScroll > elementOffset) {\n                    result = elementOffset;\n                } else if (bottomDistance > (containerScroll + containerOffsetDir)) {\n                    if (elementOffsetDir <= containerOffsetDir) {\n                        result = (bottomDistance - containerOffsetDir);\n                    } else {\n                        result = elementOffset;\n                    }\n                } else {\n                    result = containerScroll;\n                }\n\n                result = Math.abs(result + ieCorrection) + firefoxCorrection;\n\n                container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"] = result;\n            },\n\n            _navigatable: function() {\n                var that = this;\n\n                if (!that.options.navigatable) {\n                    return;\n                }\n\n                //data tables - locked and non-locked\n                var dataTables = that.table.add(that.lockedTable);\n                //header tables - locked and non-locked\n                var headerTables = that.thead.parent().add($(\">table\", that.lockedHeader));\n\n                //the over wich keys will be handled\n                var tables = dataTables;\n\n                if (that.options.scrollable) {\n                    //add the header table when the widget is scrollable\n                    tables = tables.add(headerTables);\n                }\n\n                this._navigatableTables = tables;\n                this._headertables = headerTables;\n\n                //dettach all previous events\n                tables.off(MOUSEDOWN + NS + \" focus\" + NS + \" focusout\" + NS + \" keydown\" + NS);\n\n                headerTables\n                    .find(\"a.k-link\").attr(\"tabIndex\", -1);\n\n                //prevent propagation when clicked inside detail grid\n                dataTables\n                    .on(\"keydown\" + NS, \".k-detail-cell\", function(e) {\n                        if (e.target !== e.currentTarget) {\n                            e.stopImmediatePropagation();\n                        }\n                    });\n\n                tables\n                    //handle click on tables, will attempt to focus the table\n                    .on((kendo.support.touch ? \"touchstart\" + NS : MOUSEDOWN + NS), NAVROW + \">\" + NAVCELL, tableClick.bind(that))\n                    .on(\"focus\" + NS, that._tableFocus.bind(that))\n                    .on(\"focusout\" + NS, that._tableBlur.bind(that))\n                    .on(\"keydown\" + NS, that, that._tableKeyDown.bind(that));\n\n                that._filterFocusable().on(\"focus\", that._filterFocus.bind(that));\n            },\n\n            _filterFocus: function(e) {\n                var header = e.target.closest(\"th\");\n\n                this._filterFocusable().attr(TABINDEX, 0);\n                this._setCurrent(header);\n                $(header).removeClass(FOCUSED);\n            },\n\n            _tableFocus: function() {\n                var current = this.current();\n                var table = this.lockedTable ? this.lockedTable : this.table;\n\n                //if there is already current, highlighted it\n                //otherwise highlight the first possible cell\n                if (current && current.is(\":visible\")) {\n                    current.addClass(FOCUSED);\n                } else {\n                    if (this._virtualColScroll) {\n                        this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first(), true, true);\n                    } else {\n                        this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first());\n                    }\n                }\n\n                this.table.attr(TABINDEX, 0);\n            },\n\n            _tableBlur: function() {\n                var current = this.current();\n\n                if (current) {\n                    current.removeClass(FOCUSED);\n                }\n            },\n\n            _findCellIndex: function(columns, startIndex, reversed) {\n                var cellIndex;\n                var i;\n\n                if (reversed) {\n                    for (i = startIndex; i >= 0; i--) {\n                        cellIndex = i;\n                        if (!columns[i].hidden) {\n                            break;\n                        }\n                    }\n                } else {\n                    for (i = startIndex; i < columns.length; i++) {\n                        cellIndex = i;\n                        if (!columns[i].hidden) {\n                            break;\n                        }\n                    }\n                }\n\n                return cellIndex;\n            },\n\n            _scrollToColumn: function(key, e) {\n                if (this._virtualCellIndex === undefined$1) {\n                    return false;\n                }\n\n                var that = this;\n                var cellIndex = that._virtualCellIndex;\n                var leafsCols = leafColumns(nonLockedColumns(that.columns));\n                var scrollWidth = 0;\n\n                if (key == (isRtl ? keys.LEFT : keys.RIGHT) && (cellIndex !== leafsCols.length - 1)) {\n                    cellIndex = that._findCellIndex(leafsCols, cellIndex + 1);\n                } else if (key == (isRtl ? keys.RIGHT : keys.LEFT) && cellIndex) {\n                    cellIndex = that._findCellIndex(leafsCols,cellIndex - 1, true);\n                } else if (key == keys.HOME) {\n                    cellIndex = that._findCellIndex(leafsCols, 0);\n                } else if (key == keys.END) {\n                    cellIndex = that._findCellIndex(leafsCols, leafsCols.length - 1, true);\n                }\n\n                for (var i = 0; i < cellIndex; i++) {\n                    scrollWidth += leafsCols[i].width;\n                }\n\n                that._virtualCellIndex = cellIndex;\n                if (e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n                kendo.scrollLeft(that.content, scrollWidth);\n                return true;\n            },\n\n            _tableKeyDown: function(e) {\n                var current = this.current();\n                var virtualScroll = this.virtualScroll || {};\n                var requestInProgress = this.virtualScrollable && this.virtualScrollable.fetching();\n                var target = $(e.target);\n                var canHandle = !e.isDefaultPrevented() && !target.is(\":button,a,:input:not(.k-select-checkbox),a>.k-icon,a>.k-svg-icon\");\n\n                if (e.altKey && e.keyCode == keys.DOWN) {\n                    this.current().find(\".k-grid-filter-menu, .k-grid-column-menu\").click();\n                    e.stopImmediatePropagation();\n                    return;\n                }\n\n                // do not handle key down if request in progress\n                // or there isn't current set\n                if (requestInProgress) {\n                    // swallow key events while in progress\n                    e.preventDefault();\n                    return;\n                }\n\n                if (virtualScroll.columns && (!current || !document.body.contains(current[0])) && (this._scrollToColumn(e.keyCode, e))) {\n                    return;\n                }\n\n                if (!current) {\n                    current = $(this.lockedTable).add(this.options.scrollable ? this.table : this.tbody).find(NAVROW).first().children(NAVCELL).first();\n                }\n\n                if (!current.length) {\n                    return;\n                }\n\n                var handled = false;\n\n                if (!e.isDefaultPrevented() && e.keyCode === keys.F10) {\n                    handled = this._focusToolbar();\n                }\n\n                if (canHandle && e.keyCode == keys.UP) {\n                    handled = this._moveUp(current, e.shiftKey, e.ctrlKey);\n                }\n\n                if (canHandle && e.keyCode == keys.DOWN) {\n                    handled = this._moveDown(current, e.shiftKey, e.ctrlKey);\n                }\n\n                if (canHandle && e.keyCode == (isRtl ? keys.LEFT : keys.RIGHT)) {\n                    handled = this._moveRight(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n                }\n\n                if (canHandle && e.keyCode == (isRtl ? keys.RIGHT : keys.LEFT)) {\n                    handled = this._moveLeft(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n                }\n\n                if (canHandle && e.keyCode == keys.PAGEDOWN) {\n                    handled = this._handlePageDown();\n                }\n\n                if (canHandle && e.keyCode == keys.PAGEUP) {\n                    handled = this._handlePageUp();\n                }\n\n                if (canHandle && e.keyCode == keys.HOME) {\n                    handled = this._handleHome(current, e.ctrlKey);\n                }\n\n                if (canHandle && e.keyCode == keys.END) {\n                    handled = this._handleEnd(current, e.ctrlKey);\n                }\n\n                if (canHandle && e.keyCode == keys.SPACEBAR) {\n                    handled = this._handleSpaceKey(current, e.ctrlKey);\n                }\n\n                if (e.keyCode == keys.ENTER || e.keyCode == keys.F2) {\n                    handled = this._handleEnterKey(current, e.currentTarget, target);\n                }\n\n                if (e.keyCode == keys.ESC) {\n                    handled = this._handleEscKey(current, e.currentTarget);\n                }\n\n                if (e.keyCode == keys.TAB) {\n                    handled = this._handleTabKey(current, e.currentTarget, e.shiftKey, target);\n                }\n\n                if (handled) {\n                    //prevent scrolling while pressing the keys\n                    e.preventDefault();\n                    //required in hierarchy\n                    e.stopPropagation();\n                }\n            },\n\n            _focusToolbar: function() {\n                var focusable = this.wrapper.find(\".k-grid-toolbar [tabindex=0]\");\n\n                if (focusable.length > 0) {\n                    focusable.first().addClass(\".k-focus\").trigger(\"focus\");\n\n                    return true;\n                }\n\n                return false;\n            },\n\n            _moveLeft: function(current, altKey, shiftKey, ctrlKey, currentTable) {\n                var next, index;\n                var row = current.parent();\n                //thead or tbody\n                var container = row.parent();\n\n                if (altKey) {\n                    if (row.hasClass(GROUPING_ROW)) {\n                        this.collapseGroup(row);\n                    } else {\n                        this.collapseRow(row);\n                    }\n                } else if (ctrlKey && current.is(DOT + HEADER_CLASS) && this.options.reorderable) {\n                   this._moveColumn(current, true);\n                } else {\n                    index = container.find(NAVROW).index(row);\n                    next = this._prevHorizontalCell(container, current, index);\n\n                    if (!next[0]) {\n                        if (shiftKey) {\n                            if (this.lockedTable) {\n                                next = this._relatedRow(row);\n                                if ($.contains(this.lockedTable[0], row[0])) {\n                                    next = next.prevAll(ITEMROW).first();\n                                }\n                                next = next.children(DATA_CELL).last();\n                            } else {\n                                next = this._tabNext(current, currentTable, true);\n                            }\n                        } else {\n                            container = this._horizontalContainer(container);\n\n                            next = this._prevHorizontalCell(container, current, index);\n\n                            if (next[0] !== current[0]) {\n                                focusTable(this.table, true);\n                            }\n                        }\n                    }\n\n                    this._setCurrent(next);\n                }\n\n                return true;\n            },\n\n            _moveRight: function(current, altKey, shiftKey, ctrlKey, currentTable) {\n                var next, index;\n                var row = current.parent();\n                //thead or tbody\n                var container = row.parent();\n\n                if (altKey) {\n                    if (row.hasClass(GROUPING_ROW)) {\n                        this.expandGroup(row);\n                    } else {\n                        this.expandRow(row);\n                    }\n                 } else if (ctrlKey && current.is(DOT + HEADER_CLASS) && this.options.reorderable) {\n                    this._moveColumn(current, false);\n                } else {\n                    index = container.find(NAVROW).index(row);\n                    next = this._nextHorizontalCell(container, current, index);\n\n                    if (!next[0]) {\n                        if (shiftKey) {\n                           if (this.lockedTable) {\n                                next = this._relatedRow(row);\n                                if ($.contains(this.table[0], row[0])) {\n                                    next = next.nextAll(ITEMROW).first();\n                                }\n                                next = next.children(DATA_CELL).first();\n                            } else {\n                                next = this._tabNext(current, currentTable, false);\n                            }\n                        } else {\n                            container = this._horizontalContainer(container, true);\n\n                            next = this._nextHorizontalCell(container, current, index);\n\n                            if (next[0] !== current[0]) {\n                                focusTable(this.table, true);\n                            }\n                        }\n                    }\n\n                    this._setCurrent(next);\n                }\n\n                return true;\n            },\n\n            _moveUp: function(current, shiftKey, ctrlKey) {\n                //thead or tbody\n                var container = current.parent().parent();\n                var next, cellIndex, index, oldIndex;\n\n                if (shiftKey) {\n                   next = current.parent();\n                   next = next.prevAll(ITEMROW).first();\n                   next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).last();\n                } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                    cellIndex = current.index();\n                    next = current.parent();\n                    next = next.prevAll(ITEMROW).first();\n                    index = this.tbody.children(ITEMROW).index(next);\n                    oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                    if (index >= 0 && !this.trigger(ROWREORDER, { oldIndex: oldIndex, newIndex: index, row: current.parent() })) {\n                        this.reorderRows(current.parent(), index);\n                        next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                    }\n                } else {\n                   next = this._prevVerticalCell(container, current);\n                   if (!next[0]) {\n                      this._lastCellIndex = 0;\n                      container = this._verticalContainer(container, true);\n\n                      next = this._prevVerticalCell(container, current);\n\n                      if (next[0]) {\n                          focusTable(this.table, true);\n                      }\n                   }\n                }\n\n                var tmp = this._lastCellIndex || 0;\n                this._setCurrent(next);\n                this._lastCellIndex = tmp;\n\n                return true;\n            },\n\n            _moveDown: function(current, shiftKey, ctrlKey) {\n                //thead or tbody\n                var container = current.parent().parent();\n                var next, cellIndex, index, oldIndex;\n\n                if (shiftKey) {\n                    next = current.parent();\n                    next = next.nextAll(ITEMROW).first();\n                    next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).first();\n                } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                    cellIndex = current.index();\n                    next = current.parent();\n                    next = next.nextAll(ITEMROW).first();\n                    index = this.tbody.children(ITEMROW).index(next);\n                    oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                    if (index >= 0 && !this.trigger(ROWREORDER, { oldIndex: oldIndex, newIndex: index, row: current.parent() })) {\n                        this.reorderRows(current.parent(), index + 1);\n                        next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                    }\n                } else {\n                    next = this._nextVerticalCell(container, current);\n                    if (!next[0]) {\n                        this._lastCellIndex = 0;\n                        container = this._verticalContainer(container);\n\n                        next = this._nextVerticalCell(container, current);\n                        if (next[0]) {\n                            focusTable(this.table, true);\n                        }\n                    }\n                }\n                var tmp = this._lastCellIndex || 0;\n                this._setCurrent(this._findVisibleCell(next));\n                this._lastCellIndex = tmp;\n                return true;\n            },\n\n            _moveColumn: function(current, isLeft) {\n                var elements = this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter + \":visible\");\n\n                var columns = visibleColumns(flatColumnsInDomOrder(this.columns));\n                var oldIndex = elements.index($(current));\n                var offset = isLeft ? - 1 : 1;\n                var column = columns[oldIndex];\n                var newIndex = targetParentContainerIndex(columns, this.columns, oldIndex, oldIndex + offset);\n                if (newIndex >= 0) {\n                    this.reorderColumn(newIndex, column, isLeft);\n                    this.trigger(COLUMNREORDER, {\n                        newIndex: newIndex,\n                        oldIndex: oldIndex,\n                        column: column\n                    });\n                }\n            },\n\n            _handleHome: function(current, ctrl) {\n                var row = current.parent();\n                var rowContainer = row.parent();\n                var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n                var isInBody = rowContainer[0] === this.tbody[0];\n                var prev;\n\n                if (this._hasVirtualColumns()) {\n                    this._scrollToColumn(keys.HOME);\n                    return true;\n                }\n\n                if (ctrl) {\n                    if (this.lockedTable) {\n                        prev = this.lockedTable.find(ITEMROW).first().children(NAVCELL).first();\n                    } else {\n                        prev = this.table.find(ITEMROW).first().children(NAVCELL).first();\n                    }\n                } else if (isInBody || isInLockedTable) {\n                    if (isInBody && this.lockedTable) {\n                        row = this._relatedRow(row);\n                    }\n                    prev = row.children(DATA_CELL).first();\n                }\n\n                if (prev && prev.length) {\n                    this._setCurrent(prev);\n                    return true;\n                }\n            },\n\n            _handleEnd: function(current, ctrl) {\n                var row = current.parent();\n                var rowContainer = row.parent();\n                var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n                var isInBody = rowContainer[0] === this.tbody[0];\n                var next;\n\n                if (this._hasVirtualColumns()) {\n                    this._scrollToColumn(keys.END);\n                    return true;\n                }\n\n                if (ctrl) {\n                    next = this.table.find(ITEMROW).last().children(NAVCELL).last();\n                } else if (isInBody || isInLockedTable) {\n                    if (!isInBody && this.lockedTable) {\n                        row = this._relatedRow(row);\n                    }\n                    next = row.children(DATA_CELL).last();\n                }\n\n                if (next && next.length) {\n                    this._setCurrent(next);\n                    return true;\n                }\n            },\n\n            _handlePageDown: function() {\n                if (!this.options.pageable) {\n                    return false;\n                }\n\n                this.dataSource.page(this.dataSource.page() + 1);\n\n                return true;\n            },\n\n            _handlePageUp: function() {\n                if (!this.options.pageable) {\n                    return false;\n                }\n\n                this.dataSource.page(this.dataSource.page() - 1);\n\n                return true;\n            },\n\n            _handleTabKey: function(current, currentTable, shiftKey, target) {\n                var isInCell = this.options.editable && this._editMode() == \"incell\";\n                var cell, filterFocusable;\n\n                if (!isInCell ||\n                    current.is(\"th\") ||\n                    (this.options.scrollable ? this._headertables.filter(currentTable).length : this.thead.filter(target).length)) {\n                        if (current.parent().hasClass(\"k-filter-row\")) {\n                            filterFocusable = this._filterFocusable();\n\n                            if (!shiftKey && filterFocusable[filterFocusable.length - 1] === document.activeElement) {\n                                filterFocusable.first().trigger(\"focus\");\n\n                                return true;\n                            } else if (shiftKey && filterFocusable[0] === document.activeElement) {\n                                filterFocusable.last().trigger(\"focus\");\n\n                                return true;\n                            }\n                        }\n\n                        return false;\n                }\n\n                cell = $(activeElement()).closest(\".k-edit-cell\");\n\n                if (cell[0] && cell[0] !== current[0]) {\n                    current = cell;\n                }\n\n                cell = this._tabNext(current, currentTable, shiftKey);\n\n                if (cell[0] === current[0]) {\n                    return false;\n                }\n\n                if (cell.length) {\n                    this._handleEditing(current, cell, cell.closest(\"table\"));\n\n                    return true;\n                }\n\n                return false;\n            },\n\n            _handleEscKey: function(current) {\n                var active = activeElement();\n                var isInCell = this._editMode() == \"incell\";\n\n                if (!isInEdit(current)) {\n                    if (current.has(active).length) {\n                        // return focus back to the table\n                        focusTable(this.table, true);\n\n                        return true;\n                    }\n\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        this._filterFocusable().attr(TABINDEX, -1);\n                        focusTable(this.table, true);\n\n                        return true;\n                    }\n\n                    return false;\n                }\n\n                if (isInCell) {\n                    this.closeCell(true);\n                } else {\n                    var currentIndex = $(current).parent().index();\n                    if (active) {\n                        active.blur();\n                    }\n                    this.cancelRow(true);\n                    if (currentIndex >= 0) {\n                        this._setCurrent(this.items().eq(currentIndex).children(NAVCELL).first());\n                    }\n                }\n\n                focusTable(this.table, true);\n\n                return true;\n            },\n\n            _toggleCurrent: function(current, editable, hasDetails) {\n                var row = current.parent();\n\n                if (current.is(\".k-command-cell\")) {\n                    return false;\n                }\n\n                if (row.is(\".k-filter-row\")) {\n                    return false;\n                }\n\n                if (row.is(DOT + GROUPING_ROW)) {\n                    row.find(\".k-icon,.k-svg-icon\").first().click();\n\n                    return true;\n                }\n\n                if (!editable && hasDetails) {\n                    row.find(\".k-icon,.k-svg-icon\").first().click();\n\n                    return true;\n                }\n\n                return false;\n            },\n\n            _handleSpaceKey: function(current, ctrlKey) {\n                var that = this;\n\n                if (!ctrlKey || !that.groupable || !current.hasClass(HEADER_CLASS)) {\n                    return;\n                }\n\n                var descriptors = that.groupable.descriptors();\n                var field = current.attr(kendo.attr(\"field\"));\n                var aggregates = that.groupable.aggregates();\n\n                if (that.groupable._canDrag(current)) {\n                    descriptors.push({\n                        field: field,\n                        dir: \"asc\",\n                        aggregates: aggregates || []\n                    });\n                } else {\n                    descriptors = $.grep(descriptors, function(item)\n                    {\n                        return item.field !== field;\n                    });\n                }\n\n                that.dataSource.group(descriptors);\n\n                return true;\n            },\n\n            _handleEnterKey: function(current, currentTable, target) {\n                var editable = this.options.editable && this.options.editable.update !== false;\n                var container = target.closest(\"td\");\n                var hasDetails = this._hasDetails();\n                var link, filterFocusable;\n\n                if (!target.is(\"table\") && !$.contains(current[0], target[0])) {\n                    current = container;\n                }\n\n                if (current.is(\"th\")) {\n                    // sort the column, if possible\n                    link = current.find(\".k-link\");\n\n                    if (current.has($(activeElement())).length > 0) {\n                        return false;\n                    } else if (link.length) {\n                        link.click();\n                    } else if (current.parent().hasClass(\"k-filter-row\")) {\n                        filterFocusable = this._filterFocusable();\n                        filterFocusable.attr(TABINDEX, 0);\n                        current.find(\":kendoFocusable\").first().focus();\n                    } else {\n                        current.find(CHECKBOXINPUT).trigger(\"focus\");\n                    }\n\n                    return true;\n                }\n                if (this._toggleCurrent(current, editable, hasDetails)) {\n                    return true;\n                }\n\n                var focusable = current.find(\":kendoFocusable\").first();\n                if (focusable[0] && !current.hasClass(\"k-edit-cell\") && current.hasClass(\"k-focus\")) {\n                    focusable.trigger(\"focus\");\n\n                    return true;\n                }\n\n                if (editable && !target.is(\":button,.k-button,textarea\")) {\n                    if (!container[0]) {\n                        container = current;\n                    }\n\n                    this._handleEditing(container, false, currentTable);\n\n                    return true;\n                }\n\n                return false;\n            },\n\n            _nextHorizontalCell: function(table, current, originalIndex) {\n                var cells = current.nextAll(DATA_CELL);\n\n                if (!cells.length) {\n                    var rows = table.find(NAVROW);\n                    var rowIndex = rows.index(current.parent());\n\n                    //no sibling cells are found and we've changed the table\n                    if (rowIndex == -1) {\n                        if (current.hasClass(HEADER_CLASS)) {\n                            var headerRows = [];\n                            mapColumnToCellRows([lockedColumns(this.columns)[0]], childColumnsCells(rows.eq(0).children(\":visible\").first()), headerRows, 0, 0);\n\n                            if (headerRows[originalIndex]) {\n                                return headerRows[originalIndex][0];\n                            }\n\n                            return current;\n                        }\n\n                        //current is in filter row\n                        if (current.parent().hasClass(\"k-filter-row\")) {\n                            return rows.last().children(DATA_CELL).first();\n                        }\n\n                        //get the same row index in the new table\n                        return this._findVisibleCell(rows.eq(originalIndex).children(DATA_CELL_HIDDENINCLUDED).first());\n                    }\n                }\n\n                return this._findVisibleCell(current.nextAll(DATA_CELL + \",[hidden]\").eq(0));\n            },\n\n            _prevHorizontalCell: function(table, current, originalIndex) {\n                var cells = current.prevAll(DATA_CELL);\n\n                if (!cells.length) {\n                    var rows = table.find(NAVROW);\n                    var rowIndex = rows.index(current.parent());\n\n                    //no sibling cells are found and we've changed the table\n                    if (rowIndex == -1) {\n                        if (current.hasClass(HEADER_CLASS)) {\n                            var headerRows = [];\n                            var columns = lockedColumns(this.columns);\n                            mapColumnToCellRows([columns[columns.length - 1]], childColumnsCells(rows.eq(0).children().last()), headerRows, 0, 0);\n\n                            if (headerRows[originalIndex]) {\n                                return headerRows[originalIndex][0];\n                            }\n\n                            return current;\n                        }\n\n                        //current is in filter row\n                        if (current.parent().hasClass(\"k-filter-row\")) {\n                            return rows.last().children(DATA_CELL).last();\n                        }\n\n                        //get the same row index in the new table\n                        return rows.eq(originalIndex).children(DATA_CELL).last();\n                    }\n                }\n\n                cells = current.prevAll(DATA_CELL + \",[hidden]\");\n                var cellToFocus = this._findVisibleCell(cells.first());\n                if (cellToFocus.is(\".k-group-cell\")) {\n                    return cellToFocus.next(DATA_CELL);\n                }\n\n                return cellToFocus;\n            },\n\n            _currentDataIndex: function(table, current) {\n                var index = current.attr(\"data-index\");\n\n                if (!index) {\n                    return undefined$1;\n                }\n\n                var lockedColumnsCount = lockedColumns(this.columns).length;\n                if (lockedColumnsCount && !table.closest(DIV).hasClass(\"k-grid-content-locked\")[0]) {\n                    return index - lockedColumnsCount;\n                }\n\n                return index;\n            },\n\n            _findVisibleCell: function($cell) {\n                var col = $cell.index();\n                var row = $cell.closest('tr').index();\n                var $newFocus;\n\n                if ($cell.is('[hidden]')) {\n                    $newFocus = $cell.prevAll(':not([hidden])').first();\n                    var hiddenCount = $cell.prevUntil(':not([hidden])', '[hidden]').length;\n                    if (!$newFocus.attr('colspan') || ($newFocus.attr('colspan') > 1 && $newFocus.attr('colspan') <= hiddenCount + 1)) {\n                        $newFocus = $cell.prevAll('[hidden]').last();\n                        if ($newFocus.length === 0) {\n                            return $cell.closest('tr').prevAll().find((\"td:nth-of-type(\" + (col + 1) + \"):visible\")).last();\n                        }\n\n                        while (!$newFocus.attr('rowspan') && !($newFocus.attr('rowspan') > 1 && $newFocus.attr('rowspan') != row - $newFocus.closest('tr').index()) && Math.abs($newFocus.index() - col) != $newFocus.attr('colspan')) {\n                            $newFocus = $newFocus.closest('tr').prevAll().find('td, th').eq(col).first();\n                            if ($newFocus.length === 0) {\n                                $newFocus = $cell;\n                                break;\n                            }\n                        }\n                    }\n                } else {\n                    $newFocus = $cell;\n                }\n\n                return $newFocus;\n            },\n\n            _prevVerticalCell: function(container, current) {\n                var cells;\n                var row = current.parent();\n                var rows = container.children(NAVROW);\n                var rowIndex = rows.index(row);\n                //get data-index in case of last level of multi-level columns\n                var index = this._currentDataIndex(container, current);\n\n                //current is in the header, but not at the last level of multi-level columns\n                if (index || current.hasClass(HEADER_CLASS)) {\n                    cells = parentColumnsCells(current);\n                    return cells.eq(cells.length - 2);\n                }\n\n                //check this out\n                index = Math.max(row.children(DATA_CELL_HIDDENINCLUDED).index(current), this._lastCellIndex || 0);\n\n                //if current is inside filter row\n                if (row.hasClass(\"k-filter-row\")) {\n                    var offset = rows.last().children(\".k-group-cell\").length;\n\n                    return leafDataCells(container).filter(isCellVisible).eq(Math.max(0, index - offset));\n                }\n\n                //move up to header container\n                if (rowIndex == -1) {\n                    if (this._hasVirtualColumns()) {\n                        index = this._virtualCellIndex;\n                    }\n                    //is there filter row in the header container\n                    row = container.find(\"tr.k-filter-row:visible\");\n                    if (!row[0]) {\n                        // in hierarchical grid we need to correct the index\n                        // since the k-hierarchy cell is navigatable\n                        if ((this._hasDetails() || current.parent().find('.k-hierarchy-cell').length) && index) {\n                            index--;\n                        }\n\n                        var offset$1 = 0;\n                        if (current.parent().is(\".k-table-group-row\")) {\n                            offset$1 = rows.last().children(\".k-group-cell\").length;\n                        }\n\n                        return leafDataCells(container).eq(Math.max(0, index - offset$1));\n                    } else {\n                        if (this._hasDetails()) {\n                            index--;\n                        }\n                    }\n                } else {\n                    row = rowIndex === 0 ? $() : rows.eq(rowIndex - 1);\n                }\n\n                cells = row.children(DATA_CELL_HIDDENINCLUDED);\n                if (cells.length > index) {\n                    var nextCell = cells.eq(index);\n                    if (nextCell.is(\".k-group-cell\")) {\n                        nextCell = nextCell.nextAll(DATA_CELL_HIDDENINCLUDED + \":not(.k-group-cell)\").first();\n                    }\n\n                    return this._findVisibleCell(nextCell);\n                }\n\n                return cells.eq(0);\n            },\n\n            _nextVerticalCell: function(container, current) {\n                var cells;\n                var originalRow;\n                var row = originalRow = current.parent();\n                var rows = container.children(NAVROW);\n                var rowIndex = rows.index(row);\n                //get data-index in case of last level of multi-level columns\n                var index = this._currentDataIndex(container, current);\n                var virtualScroll = this.virtualScroll || {};\n                var colspan;\n                //current is in the header, but not at the last level of multi-level columns\n                //and we are not changing the table\n                if (rowIndex != -1 && index === undefined$1 && current.hasClass(HEADER_CLASS)) {\n                    return childColumnsCells(current).eq(1);\n                }\n\n                index = index ? parseInt(index, 10) : row.children(DATA_CELL_HIDDENINCLUDED).index(current);\n                index = Math.max(index, this._lastCellIndex || 0);\n\n                //move down to data container\n                if (rowIndex == -1) {\n                    row = rows.eq(0);\n                    if (virtualScroll.columns) {\n                        colspan = parseInt(row.children().first().attr(\"colspan\"), 10);\n                        index = this._virtualCellIndex - (colspan > 1 ? colspan : 0);\n                    }\n                    // in hierarchical grid we need to correct the index\n                    // since the k-hierarchy cell is navigatable\n                    if (this._hasDetails() || row.find('.k-hierarchy-cell').length) {\n                        index++;\n                    }\n\n                    if (row.hasClass(\"k-table-group-row\")) {\n                        index += originalRow.children(\".k-group-cell\").length;\n                    }\n                } else {\n                    row = rows.eq(rowIndex + current[0].rowSpan);\n                }\n\n                cells = row.children(\".k-group-cell,\" + DATA_CELL_HIDDENINCLUDED);\n\n                var cellToFocus = cells.eq(0);\n                if (cells.length > index) {\n                    cellToFocus = cells.eq(index);\n                }\n\n                if (cellToFocus.is(\".k-group-cell\")) {\n                    cellToFocus = cellToFocus.next(\":not(k-group-cell):not([hidden])\");\n                }\n\n                return cellToFocus;\n            },\n\n            _verticalContainer: function(container, up) {\n                var table = container.parent();\n                var length = this._navigatableTables.length;\n                var step = Math.floor(length / 2);\n                var index = inArray(table[0], this._navigatableTables);\n\n                if (up) {\n                    step *= -1;\n                }\n                index += step;\n\n                if (index >= 0 || index < length) {\n                    table = this._navigatableTables.eq(index);\n                }\n\n                return table.find(up ? \">thead\" : \">tbody\");\n            },\n\n            _filterFocusable: function() {\n                return this.wrapper.find(\".k-filter-row\").find(\".k-dropdownlist, .k-input .k-input-inner:visible, input[type='radio']:visible, input[type='checkbox']:visible\");\n            },\n\n            _horizontalContainer: function(container, right) {\n                var length = this._navigatableTables.length;\n                if (length <= 2) {\n                    return container;\n                }\n\n                var table = container.parent();\n                var index = inArray(table[0], this._navigatableTables);\n\n                index += right ? 1 : -1;\n\n                if (right && (index == 2 || index == length)) {\n                    return container;\n                }\n\n                if (!right && (index == 1 || index < 0)) {\n                    return container;\n                }\n\n                return this._navigatableTables.eq(index).find(\"thead, tbody\");\n            },\n\n            _tabNext: function(current, currentTable, back) {\n                var switchRow = true;\n                var next = back ? current.prevAll(DATA_CELL).first() : current.nextAll(\":visible\").first();\n\n                if (!next.length) {\n                    next = current.parent();\n                    if (this.lockedTable) {\n                        switchRow = (back && currentTable == this.lockedTable[0]) || (!back && currentTable == this.table[0]);\n                        next = this._relatedRow(next);\n                    }\n\n                    if (switchRow) {\n                        if (this._hasVirtualColumns()) {\n                            return current;\n                        }\n                        next = next[back ? \"prevAll\" : \"nextAll\"](\"tr:not(.k-grouping-row):not(.k-detail-row):visible\").first();\n                    }\n                    if (back) {\n                        next = next.children(DATA_CELL).last();\n                    } else {\n                        next = next.children(DATA_CELL).first();\n                    }\n                }\n\n                return next;\n            },\n\n            _handleEditing: function(current, next, table) {\n                var that = this,\n                    active = $(activeElement()),\n                    mode = that._editMode(),\n                    isIE = browser.msie,\n                    editContainer = that._editContainer,\n                    focusable,\n                    editable = that.options.editable && that.options.editable.update !== false,\n                    isEdited;\n\n                table = $(table);\n                if (mode == \"incell\") {\n                    isEdited = current.hasClass(\"k-edit-cell\");\n                } else {\n                    isEdited = current.parent().hasClass(\"k-grid-edit-row\");\n                }\n\n                if (that.editable) {\n                    if ($.contains(editContainer[0], active[0])) {\n                        active.trigger(\"blur\");\n                        if (isIE) {\n                            //IE10 with jQuery 1.9.x does not trigger blur handler\n                            //numeric textbox does trigger change\n                            active.trigger(\"blur\");\n                        }\n                    }\n\n                    if (!that.editable) {\n                        focusTable(that.table);\n                        return;\n                    }\n\n                    if (that.editable.end()) {\n                        if (mode == \"incell\") {\n                            that.closeCell();\n                        } else {\n                            that.saveRow();\n                            isEdited = true;\n                        }\n                    } else {\n                        if (mode == \"incell\") {\n                            that._setCurrent(editContainer);\n                        } else {\n                            that._setCurrent(editContainer.children().filter(DATA_CELL).first());\n                        }\n                        focusable = editContainer.find(\":kendoFocusable\").first()[0];\n                        if (focusable) {\n                            focusable.focus();\n                        }\n                        return;\n                    }\n                }\n\n                if (next) {\n                    that._setCurrent(next);\n                }\n\n                focusTable(that.table, true);\n\n                if (!editable) {\n                    return;\n                }\n\n                if ((!isEdited && !next) || next) {\n                    if (mode === INCELL) {\n                        if (!$(that.current()).hasClass(HIERARCHY_CELL_CLASS)) {\n                            that.editCell(that.current());\n                        }\n                    } else {\n                        that.editRow(that.current().parent());\n                    }\n                }\n            },\n\n            _wrapper: function() {\n                var that = this,\n                    table = that.table,\n                    height = that.options.height,\n                    width = that.options.width,\n                    wrapper = that.element;\n\n                if (!wrapper.is(DIV)) {\n                   wrapper = wrapper.wrap(\"<div/>\").parent();\n                }\n\n                that.wrapper = wrapper.addClass(\"k-grid \" + kendo.getValidCssClass(\"k-grid-\", \"size\", that.options.size));\n\n                if (height) {\n                    that.wrapper.css(HEIGHT, height);\n                    table.css(HEIGHT, AUTO);\n                }\n\n                if (width) {\n                    that.wrapper.css(WIDTH, width);\n                }\n\n                that._initMobile();\n            },\n\n            _initContextMenu: function() {\n                var that = this,\n                    options = that.options,\n                    groupsContextMenu = isPlainObject(options.contextMenu) && isArray(options.contextMenu.groups) ? { items: options.contextMenu.groups } : { items: defaultGroupsContextMenu },\n                    tbodyContextMenu = isPlainObject(options.contextMenu) && isArray(options.contextMenu.body) ? { items: options.contextMenu.body } : { items: defaultBodyContextMenu },\n                    theadContextMenu = isPlainObject(options.contextMenu) && isArray(options.contextMenu.head) ? { items: options.contextMenu.head } : { items: defaultHeadContextMenu };\n\n                var mainOptions = isPlainObject(options.contextMenu) ? options.contextMenu : {};\n\n                tbodyContextMenu = extend({}, {\n                    messages: options.messages,\n                    target: that.tbody,\n                    filter: \".k-table-td\",\n                    action: that._action.bind(that),\n                    states: that._buildStates()\n                }, mainOptions, tbodyContextMenu);\n\n                theadContextMenu = extend({}, {\n                    messages: options.messages,\n                    target: that.thead,\n                    filter: \".k-table-th\",\n                    action: that._action.bind(that),\n                    states: that._buildStates()\n                }, mainOptions, theadContextMenu);\n\n                if (that.groupable) {\n                    groupsContextMenu = extend({}, {\n                        showOn: \"click\",\n                        target: that.groupable.groupContainer,\n                        filter: \".k-groupable-context-menu\",\n                        messages: options.messages,\n                        action: that._action.bind(that),\n                        states: that._buildStates()\n                    }, mainOptions, groupsContextMenu);\n                }\n\n\n                that.tbodyContextMenu = new ui.grid.ContextMenu(\"<ul></ul>\", tbodyContextMenu);\n                that.theadContextMenu = new ui.grid.ContextMenu(\"<ul></ul>\", theadContextMenu);\n                that.groupsContextMenu = !!that.groupable && new ui.grid.ContextMenu(\"<ul></ul>\", groupsContextMenu);\n            },\n\n            _buildStates: function() {\n                var this$1$1 = this;\n\n                var that = this;\n\n                return {\n                    isEditable: that.options.editable,\n                    isSelectable: that.options.selectable,\n                    isSortable: that.options.sortable,\n                    isRowReorderable: isPlainObject(that.options.reorderable) ? that.options.reorderable.rows : that.options.reorderable,\n                    isGroupable: that.options.groupable,\n                    allowPaste: that.options.allowPaste,\n                    alwaysDisabled: false,\n                    hasSelection: function () { return (this$1$1.select() ? this$1$1.select().length > 0 : false); },\n                    isSorted: function () { return !(this$1$1.dataSource.sort() ? this$1$1.dataSource.sort().length > 0 : false); },\n                    canMoveGroupPrev: function (target) {\n                        var group = $(target).closest(\".k-chip\");\n\n                        return group.index() > 0;\n                    },\n                    canMoveGroupNext: function (target) {\n                        var length = $(target).closest(\".k-chip-list\").children().length - 1;\n                        var group = $(target).closest(\".k-chip\");\n\n                        return group.index() < length;\n                    }\n                };\n            },\n\n            _action: function(args) {\n                var commandName = args.command,\n                    commandOptions = extend({ grid: this }, args.options),\n                    command = new ui.grid.commands[commandName](commandOptions);\n\n                return command.exec();\n            },\n\n            _initMobile: function() {\n                var options = this.options;\n                var that = this;\n\n                this._isMobile = (options.mobile === true && kendo.support.mobileOS) ||\n                                    options.mobile === \"phone\" ||\n                                    options.mobile === \"tablet\";\n\n                if (this._isMobile) {\n                    var html = this.wrapper.addClass(\"k-grid-mobile\").wrap(\n                        '<div data-' + kendo.ns + 'stretch=\"true\" data-' + kendo.ns + 'role=\"view\" ' +\n                        'data-' + kendo.ns + 'init-widgets=\"false\"></div>'\n                    )\n                    .parent();\n\n                    this.pane = this._createPane(html);\n                    this.view = this.pane.view();\n\n                    if (options.height) {\n                        this.pane.element.parent().css(HEIGHT, options.height);\n                    } else {\n                        this.pane.element.parent().css(HEIGHT, this.wrapper[0].style.height);\n                    }\n\n                    this._editAnimation = \"slide\";\n\n                    // Grid transitions should not propagate to the view\n                    that.wrapper.on(\"transitionend\" + NS, function(e) {\n                        e.stopPropagation();\n                    });\n\n                    that.wrapper.on(\"contextmenu\" + NS, \"th a\", function(e) {\n                        e.preventDefault();\n                        return false;\n                    });\n\n                    this.view.bind(\"showStart\", function() {\n                        if (that._isLocked()) {\n                            that._updateTablesWidth();\n                            that._applyLockedContainersWidth();\n                            that._syncLockedContentHeight();\n                            that._syncLockedHeaderHeight();\n                            that._syncLockedFooterHeight();\n                        }\n                    });\n                }\n            },\n\n            _createPane: function(html) {\n                var pane = kendo.Pane.wrap(html, {\n                    viewEngine: {\n                        viewOptions: {\n                            renderOnInit: true,\n                            wrap: false,\n                            wrapInSections: true,\n                            detachOnHide: false,\n                            detachOnDestroy: false\n                        }\n                    }\n                });\n\n                return pane;\n            },\n\n            _tbody: function() {\n                var that = this,\n                    table = that.table,\n                    tbody;\n\n                tbody = table.find(\">tbody\");\n\n                if (!tbody.length) {\n                    tbody = $(\"<tbody/>\").appendTo(table);\n                }\n\n                tbody.addClass('k-table-tbody');\n                that.tbody = tbody;\n            },\n\n            _scrollable: function() {\n                var that = this,\n                    header,\n                    table,\n                    options = that.options,\n                    scrollable = options.scrollable,\n                    hasVirtualScroll = scrollable !== true && scrollable.virtual,\n                    virtualScroll = hasVirtualScroll ? parseVirtualSettings(scrollable.virtual) : null,\n                    scrollbar = !kendo.support.kineticScrollNeeded || (virtualScroll && virtualScroll.rows) ? kendo.support.scrollbar() : 0,\n                    headerWrap;\n\n                if (scrollable) {\n                    header = that.wrapper.children(\".k-grid-header\");\n\n                    if (!header[0]) {\n                        header = $('<div class=\"k-grid-header\" />').insertBefore(that.table);\n                    }\n\n                    // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n                    header.css((isRtl ? \"padding-left\" : \"padding-right\"), scrollable.virtual ? scrollbar + 1 : scrollbar);\n                    table = $('<table role=\"none\" class=\"k-grid-header-table k-table\"/>');\n                    table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", options.size));\n\n                    table.width(that.table[0].style.width);\n\n                    table.append(that.thead);\n                    header.empty().append($('<div class=\"k-grid-header-wrap k-auto-scrollable\" />').append(table));\n\n\n                    that.content = that.table.parent();\n                    that.virtualScroll = virtualScroll;\n\n                    if (that.content.is(\".k-virtual-scrollable-wrap, \" + DOT + classNames.scrollContainer)) {\n                        that.content = that.content.parent();\n                    }\n\n                    if (!that.content.is(\".k-grid-content, .k-virtual-scrollable-wrap\")) {\n                        that.content = that.table.wrap('<div class=\"k-grid-content k-auto-scrollable\" />').parent();\n                    }\n\n                    if (!that.content.parent().hasClass(\"k-grid-container\")) {\n                        that.content.wrap(\"<div class='k-grid-container' />\").parent();\n                    }\n\n                    if (virtualScroll && virtualScroll.rows && !that.virtualScrollable) {\n                        that._createVirtualScrollable();\n                    }\n\n                    if (virtualScroll && virtualScroll.columns) {\n\n                        that.table.css({\n                            width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n                        });\n                    }\n\n                    headerWrap = header.children(\".k-grid-header-wrap\");\n\n                    that.scrollables = headerWrap.add(that.content);\n\n                    // the footer may exists if rendered from the server\n                    var footer = that.wrapper.find(\".k-grid-footer\");\n\n                    if (footer.length) {\n                        that.scrollables = that.scrollables.add(footer.children(\".k-grid-footer-wrap\"));\n                    }\n\n                    headerWrap.off(\"scroll\" + NS).on(\"scroll\" + NS, function(e) {\n                        if (that._scrollLeft !== this.scrollLeft) {\n                            kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                        }\n                    });\n\n                    if (virtualScroll && virtualScroll.rows) {\n                        that.content.find(\">.k-virtual-scrollable-wrap\").off(\"scroll\" + NS).on(\"scroll\" + NS, function() {\n                            var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                            that._scrollLeft = this.scrollLeft;\n                            kendo.scrollLeft(that.scrollables, this.scrollLeft);\n                            if (that.lockedContent) {\n                                that.lockedContent[0].scrollTop = this.scrollTop;\n                            }\n                            if (virtualScroll.columns && isScrollingLeft) {\n                                that.refresh();\n                            }\n                        });\n                    } else {\n                        var endless = scrollable.endless;\n                        var originalPageSize = that.dataSource.options.pageSize;\n                        if (endless) {\n                            that._endlessPageSize = originalPageSize;\n                        }\n                        that.content.off(\"scroll\" + NS).on(\"scroll\" + NS, function(e) {\n                            var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                            that._scrollLeft = this.scrollLeft;\n                            kendo.scrollLeft(that.scrollables.not(e.currentTarget), that._scrollLeft);\n                            if (that.lockedContent && e.currentTarget == that.content[0]) {\n                                that.lockedContent[0].scrollTop = this.scrollTop;\n                            }\n                            if (endless) {\n                                if ((this.scrollTop + this.clientHeight - this.scrollHeight >= -10) &&\n                                    !that._endlessFetchInProgress &&\n                                    that._endlessPageSize < that.dataSource.total()) {\n                                    that._skipRerenderItemsCount = that._endlessPageSize;\n                                    that._endlessPageSize = that._endlessPageSize + originalPageSize;\n                                    that.dataSource.options.endless = true;\n                                    that._endlessFetchInProgress = true;\n                                    that.dataSource.pageSize(that._endlessPageSize);\n                                }\n                            }\n\n                            if (virtualScroll && virtualScroll.columns && isScrollingLeft) {\n                                  that._virtualColScroll = true;\n                                  that._cacheEditableState();\n                                  that.refresh();\n                                  that._restoreEditableState();\n                                  that._virtualColScroll = false;\n                            }\n\n                            if (that.rowResizer) {\n                                that.rowResizer.css(\"left\", e.currentTarget.scrollLeft + \"px\");\n                            }\n                        });\n\n                        var touchScroller = that.content.data(\"kendoTouchScroller\");\n                        if (touchScroller) {\n                            touchScroller.destroy();\n                        }\n\n                        touchScroller = kendo.touchScroller(that.content);\n                        if (touchScroller && touchScroller.movable) {\n                            that.touchScroller = touchScroller;\n                            touchScroller.movable.bind(\"change\", function(e) {\n                                kendo.scrollLeft(that.scrollables, -e.sender.x);\n                                if (that.lockedContent) {\n                                    that.lockedContent.scrollTop(-e.sender.y);\n                                }\n                            });\n\n                            that.one(DATABOUND, function(e) {\n                                e.sender.wrapper.addClass(\"k-grid-backface\");\n                            });\n                        }\n                    }\n                }\n            },\n\n            _createVirtualScrollable: function() {\n                var that = this;\n\n                if (that.virtualScrollable) {\n                    that.virtualScrollable.destroy();\n                }\n\n                that.virtualScrollable = new VirtualScrollable(that.content, {\n                    dataSource: that.dataSource,\n                    itemHeight: function() { return that._averageRowHeight(); },\n                    page: function() {\n                        that._restoreEditableState();\n                    },\n                    scroll: function() {\n                        that._focusEditable();\n                    },\n                    loadStart: function() {\n                        that._progress(true);\n                    },\n                    loadEnd: function() {\n                        that._progress(false);\n                    }\n                });\n\n                that.virtualScrollable.bind(PAGING, that._onVirtualPaging.bind(that));\n            },\n\n            _onVirtualPaging: function() {\n                var that = this;\n\n                that._cacheEditableState();\n\n                if (that._isVirtualIncellEditable()) {\n                    that._shouldClearEditableState = false;\n                    that.closeCell();\n                    that._shouldClearEditableState = true;\n                }\n            },\n\n            _isVirtualEditable: function() {\n                return this._isVirtualIncellEditable() || this._isVirtualInlineEditable() || this._isVirtualPopupEditable();\n            },\n\n            _isVirtualInlineEditable: function() {\n                return (this.virtualScrollable) && this._editMode() === INLINE;\n            },\n\n            _isVirtualIncellEditable: function() {\n                return (this.virtualScrollable) && this._editMode() === INCELL;\n            },\n\n            _isVirtualPopupEditable: function() {\n                return this.virtualScrollable && this._editMode() === \"popup\";\n            },\n\n            _hasVirtualColumns: function() {\n                return (this.virtualScroll || {}).columns ? true : false;\n            },\n\n            _scrollVirtualWrapper: function() {\n                var that = this;\n                var scrollable = that.virtualScrollable;\n\n                if (that._isVirtualInlineEditable() || that._isVirtualIncellEditable()) {\n                    if (scrollable._isScrolledToBottom()) {\n                        scrollable._scrollWrapperToBottom();\n                    } else if (scrollable._isScrolledToTop()) {\n                        scrollable._scrollWrapperToTop();\n                    }\n                }\n            },\n\n            _scrollVirtualWrapperOnColumnResize: function() {\n                var virtualScrollable = this.virtualScrollable;\n\n                if (virtualScrollable) {\n                    virtualScrollable._scrollWrapperOnColumnResize();\n                }\n            },\n\n            _restoreEditableState: function() {\n                var that = this;\n                var editableState = that._editableState || {};\n                var editedModel = editableState.model;\n                var dataSource = that.dataSource;\n                var inlineMode = that._isVirtualInlineEditable();\n                var incellMode = that._isVirtualIncellEditable();\n                var virtualColumns = that._hasVirtualColumns();\n                var row;\n                var cell;\n\n                if ((inlineMode || incellMode || virtualColumns) && editedModel && dataSource._getByUid(editedModel.uid, dataSource.view())) {\n                    if (that._editMode() === INLINE) {\n                        that._shouldClearEditableState = false;\n                        that.editRow(editedModel);\n                        if (!virtualColumns) {\n                            that._focusEditable();\n                        }\n                    } else if (that._editMode() === INCELL) {\n                        row = that.tbody.children(attrEquals(UNIQUE_ID, editedModel.uid));\n                        cell = $(row).children(attrEquals(FIELD, editableState.field));\n\n                        if (cell[0]) {\n                            that._shouldClearEditableState = false;\n                            that.editCell(cell);\n                            if (!virtualColumns) {\n                                that._focusEditable();\n                            }\n                        }\n                    }\n                }\n\n                that._shouldClearEditableState = true;\n            },\n\n            _focusEditable: function() {\n                var that = this;\n                var editedField = (that._editableState || {}).field;\n                var editContainer = that._editContainer;\n\n                if (editContainer && editContainer.length && !contains(editContainer[0], activeElement()) && that._canFocusEditable()) {\n                    if (that._isVirtualInlineEditable() || that._hasVirtualColumns()) {\n                        editContainer.find(attrEquals(CONTAINER_FOR, editedField)).find(FOCUSABLE).eq(0).trigger(\"focus\");\n                    } else if (that._isVirtualIncellEditable() || that._hasVirtualColumns()) {\n                        editContainer.find(FOCUSABLE).eq(0).trigger(\"focus\");\n                    }\n                }\n            },\n\n            _canFocusEditable: function() {\n                var that = this;\n                var result = ((that._isVirtualIncellEditable() || that._isVirtualInlineEditable() || that._hasVirtualColumns()) &&\n                (isElementVisibleInWrapper((that.virtualScrollable || {}).wrapper, that._editContainer) || isElementVisibleInWrapper(that.content, that._editContainer)));\n\n                return result;\n            },\n\n            _cacheEditableState: function() {\n                var that = this;\n                var editContainer = that._editContainer;\n                var editedModel = editContainer ? that._modelForContainer(editContainer) : null;\n                var inlineMode = that._isVirtualInlineEditable();\n                var incellMode = that._isVirtualIncellEditable();\n                var virtualColumns = that._hasVirtualColumns();\n                var active;\n                var widget;\n                var value;\n\n                if ((inlineMode || incellMode || virtualColumns) && editedModel) {\n                    that._clearEditableState();\n                    active = $(activeElement());\n\n                    if (editContainer && active[0] && contains(editContainer[0], active[0])) {\n                        //change event is not fired if the editable container is scrolled\n                        //out of the virtual view with the mousewheel right after editing\n                        active.change();\n\n                        widget = kendo.widgetInstance(active, kendo.ui);\n\n                        if (widget && isFunction(widget.value) && active.is(INPUT)) {\n                            value = active.val();\n\n                            if (active.is(\"[type='checkbox'\")) {\n                                value = active.is(\":checked\");\n                            }\n\n                            widget.value(value);\n                            widget.trigger(CHANGE);\n                        }\n                    }\n\n                    if (that._editMode() === INLINE) {\n                        that._editableState = {\n                            model: editedModel,\n                            field: active.closest(\"[\" + kendo.attr(CONTAINER_FOR) + \"]\").attr(kendo.attr(CONTAINER_FOR))\n                        };\n                    } else if (that._editMode() === INCELL) {\n                        that._editableState = {\n                            model: editedModel,\n                            field: editContainer.attr(kendo.attr(FIELD))\n                        };\n                    }\n                }\n            },\n\n            _clearSortClasses: function() {\n                var that = this,\n                    content = that.content || that.table,\n                    lockedContent = that.lockedContent;\n\n                if (content) {\n                    content.find(COLGROUP).removeClass(SORTED_CLASS);\n                }\n\n                if (lockedContent) {\n                    lockedContent.find(COLGROUP).removeClass(SORTED_CLASS);\n                }\n            },\n\n            _clearEditableState: function() {\n                var that = this;\n\n                if (that.virtualScrollable || (that.virtualScroll && that._hasVirtualColumns())) {\n                    that._editableState = null;\n                }\n            },\n\n            _destroyVirtualScrollable: function() {\n                var that = this;\n\n                that._clearEditableState();\n\n                if (that.virtualScrollable && that.virtualScrollable.element) {\n                    that.virtualScrollable.destroy();\n                }\n\n                that.virtualScrollable = null;\n            },\n\n            _destroyRowResizing: function() {\n                if (this.rowResizing) {\n                    this.rowResizing.destroy();\n\n                    this.rowResizing = null;\n                }\n\n                if (this.rowResizer) {\n                    this._detachRowResizerEvents();\n                    this.rowResizer.off(DUBLECLICK + NS);\n                    this.rowResizer = null;\n                    this._clearCachedRowsHeight();\n                }\n            },\n\n            _renderNoRecordsContent: function() {\n                var that = this;\n\n                if (that.options.noRecords) {\n                    var noRecordsElement = that.table.parent().children('.' + NORECORDSCLASS);\n\n                    if (noRecordsElement.length) {\n                        noRecordsElement.remove();\n                    }\n\n                    if (!that.dataSource || !that.dataSource.view().length) {\n                        noRecordsElement = $(that.noRecordsTemplate({ grid: that }));\n                        kendo.applyStylesFromKendoAttributes(noRecordsElement, [\"margin\", \"position\"]);\n                        noRecordsElement.insertAfter(that.table);\n                    }\n                }\n            },\n\n            _setContentWidth: function(scrollLeft) {\n                var that = this,\n                    hiddenDivClass = 'k-grid-content-expander',\n                    hiddenDiv = '<div class=\"' + hiddenDivClass + '\"></div>',\n                    resizable = that.resizable,\n                    expander;\n\n                if (that.options.scrollable && that.wrapper.is(\":visible\")) {\n                    expander = that.table.parent().children('.' + hiddenDivClass);\n                    that._setContentWidthHandler = that._setContentWidth.bind(that);\n                    if (!that.dataSource || !that.dataSource.view().length) {\n                        if (!expander[0]) {\n                            expander = $(hiddenDiv).appendTo(that.table.parent());\n                            if (resizable) {\n                                resizable.bind(\"resize\", that._setContentWidthHandler);\n                            }\n                        }\n                        if (that.thead) {\n                            expander.width(that.thead.width());\n                            if (!isNaN(parseFloat(scrollLeft, 10))) {\n                                kendo.scrollLeft(that.content, scrollLeft);\n                            }\n                        }\n                    } else if (expander[0]) {\n                        expander.remove();\n                        if (resizable) {\n                            resizable.unbind(\"resize\", that._setContentWidthHandler);\n                        }\n                    }\n\n                    that._applyLockedContainersWidth();\n                    that._syncLockedContentHeight();\n\n                    // workaround IE does not show vertical scrollbar for elements without width\n                    if (that.lockedHeader && that.table[0].clientWidth === 0) {\n                        that.table[0].style.width = \"1px\";\n                    }\n                }\n            },\n\n            _applyLockedContainersWidth: function() {\n                if (this.options.scrollable && this.lockedHeader) {\n                    var headerTable = this.thead.parent(),\n                        headerWrap = headerTable.parent(),\n                        contentWidth = this.wrapper[0].clientWidth,\n                        groups = this._groups(),\n                        scrollbar = kendo.support.scrollbar(),\n                        cols = this.lockedHeader.find(\">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                        nonLockedCols = headerTable.find(\">colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                        width = columnsWidth(cols),\n                        nonLockedColsWidth = columnsWidth(nonLockedCols),\n                        footerWrap;\n\n                    if (groups > 0) {\n                        width += outerWidth(this.lockedHeader.find(\".k-group-cell\").first()) * groups;\n                    }\n\n                    if (width >= contentWidth) {\n                        width = contentWidth - 3 * scrollbar;\n                    }\n\n                    this.lockedHeader\n                        .add(this.lockedContent)\n                        .width(width);\n\n                    headerWrap[0].style.width = headerWrap.parent().width() - width - 2 + PX;\n\n                    headerTable.add(this.table).width(nonLockedColsWidth);\n\n                    //https://github.com/telerik/kendo-ui-core/issues/377\n                    if (this.virtualScrollable && !isIE11) {\n                        contentWidth -= scrollbar;\n                    }\n\n                    this.content[0].style.width = contentWidth - width - 1 + PX;\n\n                    if (this.lockedFooter && this.lockedFooter.length) {\n                        this.lockedFooter.width(width);\n                        footerWrap = this.footer.find(\".k-grid-footer-wrap\");\n                        footerWrap[0].style.width = headerWrap[0].clientWidth + PX;\n                        footerWrap.children().first().width(nonLockedColsWidth);\n                    }\n                }\n            },\n\n            _setContentHeight: function() {\n                var that = this,\n                    options = that.options,\n                    height,\n                    header = that.wrapper.children(\".k-grid-header\"),\n                    scrollbar = kendo.support.scrollbar();\n                var scrollableHeight = (options.scrollable || {}).height;\n\n                if (options.scrollable && that.wrapper.is(\":visible\")) {\n                    if (scrollableHeight && that.content[0].style.height === \"\") {\n                        // fallback to client-side setting as ASP.NET MVC Core wrapper does not provide server rendering of the content\n                        that.content[0].style.height = scrollableHeight;\n                    }\n\n                    height = that.wrapper.innerHeight();\n\n                    height -= outerHeight(header);\n\n                    if (that.pager && that.pager.element.is(\":visible\")) {\n                        height -= outerHeight(that.pager.element);\n                    }\n\n                    if (options.groupable) {\n                        height -= outerHeight(that.wrapper.children(\".k-grouping-header\"));\n                    }\n\n                    if (options.toolbar) {\n                        height -= outerHeight(that.wrapper.children(\".k-grid-toolbar\"));\n                    }\n\n                    if (that.footerTemplate) {\n                        height -= outerHeight(that.wrapper.children(\".k-grid-footer\"));\n                    }\n\n                    if (that.statusBar) {\n                        height -= outerHeight(that.wrapper.children(\".k-selection-aggregates\"));\n                    }\n\n                    var isGridHeightSet = function(el) {\n                        var initialHeight, newHeight;\n                        if (el[0].style.height) {\n                            return true;\n                        } else {\n                            initialHeight = el.height();\n                        }\n\n                        el.height(AUTO);\n                        newHeight = el.height();\n\n                        if (initialHeight != newHeight) {\n                            el.height(\"\");\n                            return true;\n                        }\n                        el.height(\"\");\n                        return false;\n                    };\n\n                    if (isGridHeightSet(that.wrapper)) { // set content height only if needed\n                        if (height > scrollbar * 2) { // do not set height if proper scrollbar cannot be displayed\n                            if (that.lockedContent) {\n                                scrollbar = that.table[0].offsetWidth > that.table.parent()[0].clientWidth ? scrollbar : 0;\n                                that.lockedContent.height(height - scrollbar);\n                            }\n\n                            that.content.height(height);\n                        } else {\n                            that.content.height(scrollbar * 2 + 1);\n                        }\n                    }\n                }\n            },\n\n            _averageRowHeight: function() {\n                var that = this,\n                    itemsCount = that._items(that.tbody, true).length,\n                    rowHeight = that._rowHeight;\n\n                if (itemsCount === 0) {\n                    return rowHeight;\n                }\n\n                if (!that._rowHeight) {\n                    that._rowHeight = rowHeight = outerHeight(that.table) / itemsCount;\n                    that._sum = rowHeight;\n                    that._measures = 1;\n                }\n\n                var currentRowHeight = outerHeight(that.table) / itemsCount;\n\n                if (rowHeight !== currentRowHeight) {\n                    that._measures ++;\n                    that._sum += currentRowHeight;\n                    that._rowHeight = that._sum / that._measures;\n                }\n                return rowHeight;\n            },\n\n            _dataSource: function() {\n                var that = this,\n                    options = that.options,\n                    pageable,\n                    dataSource = options.dataSource;\n\n                dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n                if (isPlainObject(dataSource)) {\n                    extend(dataSource, { table: that.table, fields: that.columns });\n\n                    pageable = options.pageable;\n\n                    if (isPlainObject(pageable) && pageable.pageSize !== undefined$1) {\n                        dataSource.pageSize = pageable.pageSize;\n                    }\n                }\n\n                if (that.dataSource && that._refreshHandler) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler)\n                                    .unbind(PROGRESS, that._progressHandler)\n                                    .unbind(ERROR, that._errorHandler)\n                                    .unbind(SORT, that._sortHandler);\n                } else {\n                    that._refreshHandler = that.refresh.bind(that);\n                    that._progressHandler = that._requestStart.bind(that);\n                    that._errorHandler = that._error.bind(that);\n                    that._sortHandler = that._clearSortClasses.bind(that);\n                }\n\n                that.dataSource = DataSource.create(dataSource)\n                                    .bind(CHANGE, that._refreshHandler)\n                                    .bind(PROGRESS, that._progressHandler)\n                                    .bind(ERROR, that._errorHandler)\n                                    .bind(SORT, that._sortHandler);\n            },\n\n            _error: function() {\n                this._progress(false);\n            },\n\n            _requestStart: function() {\n                this._progress(true);\n            },\n\n            _modelChange: function(e) {\n                var that = this,\n                    tbody = that.tbody,\n                    model = e.model,\n                    row = that.tbody.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"),\n                    relatedRow,\n                    cell,\n                    column,\n                    isAlt = row.hasClass(\"k-alt\"),\n                    tmp,\n                    idx = that._items(tbody).index(row),\n                    isLocked = that.lockedContent,\n                    selectable,\n                    selectableRow,\n                    childCells,\n                    originalCells,\n                    length;\n\n                if (isLocked) {\n                    relatedRow = that._relatedRow(row);\n                }\n\n                if (row.add(relatedRow).children(\".k-edit-cell\").length && !that.options.rowTemplate) {\n                    row.add(relatedRow).children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function() {\n                        cell = $(this);\n                        column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                        if (column.field === e.field) {\n                            if (!cell.hasClass(\"k-edit-cell\")) {\n                                that._displayCell(cell, column, model);\n                            } else {\n                                cell.addClass(\"k-dirty-cell\");\n                            }\n                        }\n                    });\n\n                } else if (!row.hasClass(\"k-grid-edit-row\")) {\n\n                    selectableRow = $().add(row);\n\n                    if (isLocked) {\n                        tmp = (isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model);\n\n                        selectableRow = selectableRow.add(relatedRow);\n\n                        relatedRow.replaceWith(tmp);\n                    }\n\n                    tmp = (isAlt ? that.altRowTemplate : that.rowTemplate)(model);\n\n                    var tmpResult = $(tmp);\n                    kendo.applyStylesFromKendoAttributes(tmpResult, [\"display\"]);\n                    row.replaceWith(tmpResult);\n\n                    tmp = that._items(tbody).eq(idx);\n\n                    if (isLocked) {\n                        row = row.add(relatedRow);\n\n                        relatedRow = that._relatedRow(tmp)[0];\n                        adjustRowHeight(tmp[0], relatedRow);\n\n                        tmp = tmp.add(relatedRow);\n                    }\n\n                    selectable = that.options.selectable;\n                    if ((selectable || that._checkBoxSelection) && row.hasClass(SELECTED)) {\n                       that.select(tmp);\n                    }\n\n                    originalCells = selectableRow.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n                    childCells = tmp.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n                    for (idx = 0, length = that.columns.length; idx < length; idx++) {\n                        column = that.columns[idx];\n\n                        cell = childCells.eq(idx);\n                        if (selectable && originalCells.eq(idx).hasClass(SELECTED)) {\n                            cell.addClass(SELECTED);\n                        }\n                    }\n\n                    that.trigger(\"itemChange\", { item: tmp, data: model, ns: ui });\n                }\n            },\n\n            _pageable: function() {\n                var that = this,\n                    pagerWrap,\n                    pageable = that.options.pageable,\n                    size = that.options.size,\n                    navigatable = that.options.navigatable;\n\n                if (pageable) {\n                    pagerWrap = that.wrapper.children(\"div.k-grid-pager\");\n\n                    if (!pagerWrap.length) {\n                        pagerWrap = $('<div class=\"k-pager k-grid-pager\"/>');\n                    }\n\n                    if (pageable.position === \"top\") {\n                        pagerWrap.prependTo(that.wrapper).addClass(\"k-grid-pager-top\");\n                    } else {\n                        pagerWrap.appendTo(that.wrapper);\n                    }\n\n                    if (that.pager) {\n                        that.pager.destroy();\n                    }\n\n                    if (typeof pageable === \"object\" && pageable instanceof kendo.ui.Pager) {\n                        that.pager = pageable;\n                    } else {\n                        if (that.dataSource._groupPaging) {\n                            that.pager = new GroupsPager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource, navigatable: navigatable, size: size }));\n                        } else {\n                            that.pager = new kendo.ui.Pager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource, navigatable: navigatable, size: size }));\n                        }\n                    }\n\n                    that.pager.bind(\"pageChange\", function(e) {\n                        if (that.trigger(\"page\", { page: e.index })) {\n                            e.preventDefault();\n                        }\n                    });\n\n                    that._togglePagerVisibility();\n                }\n            },\n\n            _statusBar: function() {\n                var that = this,\n                    options = that.options,\n                    wrapper = that.wrapper,\n                    statusBarTemplate = options.statusBarTemplate,\n                    content = \"\";\n\n                if (statusBarTemplate) {\n                    if (!that.statusBar) {\n                        content += '<div class=\"k-selection-aggregates k-grid-selection-aggregates\">';\n\n                        content += statusBarTemplate({ aggregates: that._cellAggregates });\n\n                        content += '</div>';\n\n                        if (options.scrollable) {\n                            that.statusBar = $(content).insertAfter(wrapper.find(DOT + \"k-grid-container\"));\n                        } else {\n                            that.statusBar = $(content).insertAfter(wrapper.find(DOT + \"k-grid-table\"));\n                        }\n                    } else {\n                        that.statusBar.html(statusBarTemplate({ aggregates: that._cellAggregates }));\n                    }\n                }\n            },\n\n            _footer: function() {\n                var that = this,\n                    aggregates = that.dataSource.aggregates(),\n                    html = \"\",\n                    footerTemplate = that.footerTemplate,\n                    options = that.options,\n                    footerWrap,\n                    footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n                if (footerTemplate) {\n                    html = $(that._wrapFooter(footerTemplate(aggregates)));\n                    kendo.applyStylesFromKendoAttributes(html, [\"display\", \"left\", \"right\"]);\n\n                    if (footer.length) {\n                        var tmp = html;\n\n                        footer.replaceWith(tmp);\n                        footer = that.footer = tmp;\n                    } else {\n                        if (options.scrollable) {\n                            if (that.statusBar) {\n                                that.footer = html.insertBefore(that.statusBar);\n                            } else if (options.pageable && options.pageable.position !== \"top\") {\n                                that.footer = html.insertBefore(that.wrapper.children(\"div.k-grid-pager\"));\n                            } else {\n                                that.footer = html.appendTo(that.wrapper);\n                            }\n                            footer = that.footer;\n                        } else {\n                            footer = that.footer = html.insertAfter(that.tbody);\n                        }\n                    }\n                } else if (footer && !that.footer) {\n                    that.footer = footer;\n                }\n\n                if (footer.length) {\n                    if (options.scrollable) {\n                        footerWrap = footer.attr(TABINDEX, -1).children(\".k-grid-footer-wrap\");\n\n                        that.scrollables = $(\n                            that.scrollables\n                                .filter(function() { return !$(this).is(\".k-grid-footer-wrap\"); })\n                                .toArray()\n                        ).add(footerWrap);\n                    }\n\n                    if (that._footerWidth) {\n                        footer.find(\"table\").css('width', that._footerWidth);\n                    }\n\n                    if (footerWrap) {\n                        var offset = kendo.scrollLeft(that.content);\n\n                        if (options.scrollable !== true && that.virtualScroll && that.virtualScroll.rows) {\n                            offset = kendo.scrollLeft(that.wrapper.find('.k-virtual-scrollable-wrap'));\n                        }\n                        kendo.scrollLeft(footerWrap, offset);\n                    }\n                }\n\n                if (that.lockedContent) {\n                    that._appendLockedColumnFooter();\n                    that._applyLockedContainersWidth();\n                    that._syncLockedFooterHeight();\n                }\n            },\n\n            _wrapFooter: function(footerRow) {\n                var that = this,\n                    html = \"\",\n                    table,\n                    scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n\n                if (that.options.scrollable) {\n                    html = $('<div class=\"k-grid-footer\"><div class=\"k-grid-footer-wrap\"><table class=\"k-table k-grid-footer-table\"><tfoot class=\"k-table-tfoot\">' + footerRow + '</tfoot></table></div></div>');\n                    table = html.find(\"table\");\n                    table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n                    that._appendCols(table);\n                    html.css((isRtl ? \"padding-left\" : \"padding-right\"), scrollbar); // Update inner fix.\n\n                    return html;\n                }\n\n                return '<tfoot class=\"k-grid-footer k-table-tfoot\">' + footerRow + '</tfoot>';\n            },\n\n            _globalColumnsMenu: function(cell) {\n                var that = this,\n                    menu,\n                    columns = leafColumns(that.columns),\n                    options = that.options,\n                    columnMenu = options.columnMenu,\n                    menuOptions,\n                    initCallback = function(e) {\n                        that.trigger(COLUMNMENUINIT, { field: e.field, container: e.container });\n                    },\n                    openCallback = function(e) {\n                        that.trigger(COLUMNMENUOPEN, { field: e.field, container: e.container });\n                    },\n                    closeCallback = function() {\n                        cell.trigger(\"focus\");\n                    };\n\n                if (columnMenu) {\n                    if (typeof columnMenu == \"boolean\") {\n                        columnMenu = {};\n                    }\n\n                    that._setColumnsMediaVisibility(columns);\n\n                    var toggleable = !!(columnMenu.autoSize || columnMenu.clearAllFilters);\n\n                    menu = cell.data(\"kendoColumnMenu\");\n                    if (menu) {\n                        menu.destroy();\n                    }\n\n                    var columnsExpanderOptions = {\n                        toggleable: toggleable,\n                        expanded: columnMenu.expanded || true,\n                        animation: false,\n                        hideExpanderIndicator: !toggleable\n                    };\n\n                    menuOptions = {\n                        dataSource: that.dataSource,\n                        columns: columnMenu.columns,\n                        sortable: false,\n                        filterable: false,\n                        clearAllFilters: columnMenu.clearAllFilters,\n                        messages: columnMenu.messages,\n                        hideAutoSizeColumn: true,\n                        owner: that,\n                        closeCallback: closeCallback,\n                        init: initCallback,\n                        open: openCallback,\n                        pane: that.pane,\n                        autoSize: columnMenu.autoSize,\n                        encodeTitles: that.options.encodeTitles,\n                        componentType: \"modern\",\n                        columnsExpanderOptions: columnsExpanderOptions\n                    };\n\n                    cell.kendoColumnMenu(menuOptions);\n                }\n            },\n\n            _columnMenu: function() {\n                var that = this,\n                    menu,\n                    columns = leafColumns(that.columns),\n                    column,\n                    options = that.options,\n                    columnMenu = options.columnMenu,\n                    menuOptions,\n                    sortable,\n                    filterable,\n                    cells,\n                    hasMultiColumnHeaders = grep(that.columns, function(item) {\n                        return item.columns !== undefined$1;\n                    }).length > 0,\n                    hasLockableColumns = grep(that.columns, function(item) {\n                        return item.lockable !== false;\n                    }).length > 0,\n                    hasStickableColumns = grep(that.columns, function(item) {\n                        return item.stickable === true;\n                    }).length > 0,\n                    isMobile = this._isMobile,\n                    initCallback = function(e) {\n                        that.trigger(COLUMNMENUINIT, { field: e.field, container: e.container });\n                    },\n                    openCallback = function(e) {\n                        that.trigger(COLUMNMENUOPEN, { field: e.field, container: e.container });\n                    },\n                    closeCallback = function() {\n                        focusTable(that.table, true);\n                    },\n                    stickCallback = function(e) {\n                        that.trigger(COLUMNSTICK, { column: e.column });\n                    },\n                    unstickCallback = function(e) {\n                        that.trigger(COLUMNUNSTICK, { column: e.column });\n                    },\n                    sortHandler = function(e) {\n                        if (that.trigger(\"sort\", { sort: e.sort })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    },\n                    filterHandler = function(e) {\n                        if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    };\n\n                if (columnMenu) {\n                    if (typeof columnMenu == \"boolean\") {\n                        columnMenu = {};\n                    }\n\n                    that._setColumnsMediaVisibility(columns);\n\n                    cells = leafDataCells(that.thead);\n\n                    for (var idx = 0, length = cells.length; idx < length; idx++) {\n                        column = columns[idx];\n                        var cell = cells.eq(idx);\n\n                        if (column.columnMenu !== false && !column.command && (column.field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                            menu = cell.data(\"kendoColumnMenu\");\n                            if (menu) {\n                                menu.destroy();\n                            }\n\n                            sortable = column.sortable !== false && columnMenu.sortable !== false && options.sortable !== false ? extend({}, options.sortable, {\n                                compare: (column.sortable || {}).compare\n                            }) : false;\n\n                            filterable = options.filterable && column.filterable !== false && columnMenu.filterable !== false ? extend({ pane: that.pane }, options.filterable, column.filterable) : false;\n\n                            if (column.filterable && column.filterable.dataSource) {\n                                filterable.forceUnique = false;\n                                filterable.checkSource = column.filterable.dataSource;\n                            }\n\n                            if (filterable) {\n                                filterable.format = column.format;\n                            }\n\n                            menuOptions = {\n                                dataSource: that.dataSource,\n                                values: column.values,\n                                columns: columnMenu.columns,\n                                sortable: sortable,\n                                filterable: filterable,\n                                messages: columnMenu.messages,\n                                owner: that,\n                                closeCallback: closeCallback,\n                                init: initCallback,\n                                open: openCallback,\n                                stick: stickCallback,\n                                unstick: unstickCallback,\n                                pane: that.pane,\n                                sort: sortHandler,\n                                filtering: filterHandler,\n                                filter: isMobile ? \":not(.k-column-active)\" : \"\",\n                                autoSize: columnMenu.autoSize,\n                                hasLockableColumns: lockedColumns(columns).length > 0 && hasLockableColumns && !hasMultiColumnHeaders,\n                                hasStickableColumns: hasStickableColumns && !hasMultiColumnHeaders,\n                                encodeTitles: that.options.encodeTitles,\n                                componentType: columnMenu.componentType,\n                                appendTo: DOT + classNames.headerCellInner,\n                                reorderable: options.reorderable === true || (options.reorderable && options.reorderable.columns),\n                                groupable: that.options.groupable && that.options.groupable.enabled !== false && column.groupable !== false\n                            };\n\n                            cell.kendoColumnMenu(menuOptions);\n                        }\n                    }\n                }\n            },\n\n            _headerCells: function() {\n                return $(this.thead).find(\"th\").filter(function() {\n                    var th = $(this);\n                    return !th.hasClass(\"k-group-cell\") && !th.hasClass(\"k-hierarchy-cell\");\n                });\n            },\n\n            _hasFilterMenu: function() {\n                var filterable = this.options.filterable;\n                if (filterable && typeof filterable.mode == STRING && filterable.mode.indexOf(\"menu\") == -1) {\n                    return false;\n                }\n\n                return filterable;\n            },\n\n            _filterable: function() {\n                var that = this,\n                    columns = leafColumns(that.columns),\n                    filterMenu,\n                    cells,\n                    cell,\n                    filterInit = function(e) {\n                        that.trigger(FILTERMENUINIT, { field: e.field, container: e.container });\n                    },\n                    closeCallback = function() {\n                        focusTable(that.table, true);\n                    },\n                    filterHandler = function(e) {\n                        if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    },\n                    filterOpen = function(e) {\n                        that.trigger(FILTERMENUOPEN, { field: e.field, container: e.container });\n                    },\n                    filterable = that._hasFilterMenu();\n\n                if (filterable && !that.options.columnMenu) {\n                    cells = leafDataCells(that.thead);//that._headerCells();\n\n                    for (var idx = 0, length = cells.length; idx < length; idx++) {\n                        cell = cells.eq(idx);\n\n                        if (columns[idx].filterable !== false && !columns[idx].command && (columns[idx].field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                            filterMenu = cell.data(\"kendoFilterMenu\");\n\n                            if (filterMenu) {\n                                filterMenu.destroy();\n                            }\n\n                            filterMenu = cell.data(\"kendoFilterMultiCheck\");\n                            if (filterMenu) {\n                               filterMenu.destroy();\n                            }\n\n                            var columnFilterable = columns[idx].filterable;\n\n                            var options = extend({},\n                                filterable,\n                                columnFilterable,\n                                {\n                                    dataSource: that.dataSource,\n                                    values: columns[idx].values,\n                                    format: columns[idx].format,\n                                    closeCallback: closeCallback,\n                                    title: columns[idx].title || columns[idx].field,\n                                    init: filterInit,\n                                    open: filterOpen,\n                                    pane: that.pane,\n                                    change: filterHandler,\n                                    appendTo: DOT + classNames.headerCellInner\n                                }\n                            );\n\n                            if (columnFilterable && columnFilterable.messages) {\n                                options.messages = extend(true, {}, filterable.messages, columnFilterable.messages);\n                            }\n                            if (columnFilterable && columnFilterable.dataSource) {\n                                options.forceUnique = false;\n                                options.checkSource = columnFilterable.dataSource;\n                            }\n\n                            if (columnFilterable && columnFilterable.multi) {\n                                cell.kendoFilterMultiCheck(options);\n                            } else {\n                                cell.kendoFilterMenu(options);\n                            }\n                        }\n                    }\n                }\n            },\n\n            _filterRow: function() {\n                var that = this;\n                if (!that._hasFilterRow()) {\n                   return;\n                }\n\n                var settings;\n                var columns = leafColumns(that.columns),\n                    filterable = that.options.filterable,\n                    rowheader = that.thead.find(\".k-filter-row\"),\n                    filterHandler = function(e) {\n                        if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    };\n\n\n                this._updateHeader(that._groups());\n\n                for (var i = 0; i < columns.length; i++) {\n                    var suggestDataSource,\n                        col = columns[i],\n                        operators = that.options.filterable.operators,\n                        customDataSource = false,\n                        td = $(\"<td class='k-table-td' title='\" + that.options.messages.filterCellTitle + \"'/>\"),\n                        field = col.field;\n\n                    if (col.hidden) {\n                        td.hide();\n                    }\n                    rowheader.append(td);\n                    if (field && col.filterable !== false) {\n                        var cellOptions = col.filterable && col.filterable.cell || {};\n\n                        suggestDataSource = that.options.dataSource;\n                        if (suggestDataSource instanceof DataSource) {\n                            suggestDataSource = that.options.dataSource.options;\n                        }\n\n                        var messages = extend(true, {}, filterable.messages);\n                        if (col.filterable) {\n                            extend(true, messages, col.filterable.messages);\n                        }\n\n                        if (cellOptions.enabled === false) {\n                            td.html(\"&nbsp;\");\n                            continue;\n                        }\n                        if (cellOptions.dataSource) {\n                            suggestDataSource = cellOptions.dataSource;\n                            customDataSource = true;\n                        }\n                        if (col.filterable && col.filterable.operators) {\n                            operators = col.filterable.operators;\n                        }\n\n                        settings = {\n                            column: col,\n                            dataSource: that.dataSource,\n                            suggestDataSource: suggestDataSource,\n                            customDataSource: customDataSource,\n                            field: field,\n                            messages: messages,\n                            size: that.options.size,\n                            values: col.values,\n                            template: cellOptions.template,\n                            delay: cellOptions.delay,\n                            inputWidth: cellOptions.inputWidth,\n                            suggestionOperator: cellOptions.suggestionOperator,\n                            minLength: cellOptions.minLength,\n                            dataTextField: cellOptions.dataTextField,\n                            operator: cellOptions.operator,\n                            operators: operators,\n                            showOperators: cellOptions.showOperators,\n                            change: filterHandler\n                        };\n\n                        $(\"<span/>\").attr(kendo.attr(\"field\"), field)\n                            .appendTo(td)\n                            .kendoFilterCell(settings);\n                    } else {\n                        td.html(\"&nbsp;\");\n                    }\n                    td.data(\"column\", col);\n                }\n\n                this._filterFocusable().attr(TABINDEX, -1);\n            },\n\n            _sortable: function() {\n                var that = this,\n                    columns = leafColumns(that.columns),\n                    column,\n                    sorterInstance,\n                    cell,\n                    sortable = that.options.sortable,\n                    sortHandler = function(e) {\n                        if (that.trigger(\"sort\", { sort: e.sort })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                        }\n                    };\n\n\n                if (sortable) {\n                    var cells = leafDataCells(that.thead);\n\n                    for (var idx = 0, length = cells.length; idx < length; idx++) {\n                        column = columns[idx];\n\n                        if (column.sortable !== false && !column.command && column.field) {\n                            cell = cells.eq(idx);\n\n                            sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                            if (sorterInstance) {\n                                sorterInstance.destroy();\n                            }\n\n                            cell.attr(\"data-\" + kendo.ns + \"field\", column.field)\n                                .kendoColumnSorter(\n                                    extend({}, sortable, column.sortable, {\n                                        dataSource: that.dataSource,\n                                        aria: true,\n                                        filter: \":not(.k-column-active)\",\n                                        change: sortHandler\n                                    })\n                                );\n                        }\n                    }\n                    cells = null;\n                }\n            },\n\n            _columns: function(columns) {\n                var that = this,\n                    table = that.table,\n                    encoded,\n                    cols = table.find(\"col\"),\n                    lockedCols,\n                    headerRows = that.element.find('thead tr'),\n                    dataSource = that.options.dataSource,\n                    draggableColumns;\n\n                // using HTML5 data attributes as a configuration option e.g. <th data-field=\"foo\">Foo</foo>\n                columns = columns.length ? columns : map(table.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\"), function(th, idx) {\n                    th = $(th);\n                    var sortable = th.attr(kendo.attr(\"sortable\")),\n                        filterable = th.attr(kendo.attr(\"filterable\")),\n                        type = th.attr(kendo.attr(\"type\")),\n                        groupable = th.attr(kendo.attr(\"groupable\")),\n                        field = th.attr(kendo.attr(\"field\")),\n                        title = th.attr(kendo.attr(\"title\")),\n                        columnMenu = th.attr(kendo.attr(\"column-menu\")),\n                        menu = th.attr(kendo.attr(\"menu\"));\n\n                    if (!field) {\n                       field = th.text().replace(/\\s|[^A-z0-9]/g, \"\");\n                    }\n\n                    return {\n                        field: field,\n                        type: type,\n                        title: title,\n                        sortable: sortable !== \"false\",\n                        filterable: filterable !== \"false\",\n                        groupable: groupable !== \"false\",\n                        menu: menu !== \"false\",\n                        columnMenu: columnMenu !== \"false\",\n                        template: th.attr(kendo.attr(\"template\")),\n                        width: cols.eq(idx).css(WIDTH)\n                    };\n                });\n\n                encoded = !(that.table.find(\"tbody tr\").length > 0 && (!dataSource || !dataSource.transport));\n\n                if (that.options.scrollable) {\n                    var initialColumns = columns;\n                    lockedCols = lockedColumns(columns);\n                    columns = nonLockedColumns(columns);\n\n                    if (lockedCols.length > 0 && columns.length === 0) {\n                        throw new Error(\"There should be at least one non locked column\");\n                    }\n\n                    normalizeHeaderCells(that.element.find(\"tr:has(th)\").first(), initialColumns);\n                    columns = lockedCols.concat(columns);\n                }\n\n                if (headerRows.length && columns.length) {\n                    that._updateColumnIDs(columns, headerRows.first());\n                }\n\n                that.columns = normalizeColumns(columns, encoded);\n\n                if ($.grep(leafColumns(that.columns), function(col) { return col.selectable;}).length) {\n                    that._selectedIds = {};\n                    that._checkBoxSelection = true;\n                    that.wrapper.on(CLICK + NS, \"tbody > tr \" + CHECKBOXINPUT, that._checkboxClick.bind(that));\n                    that.wrapper.on(CLICK + NS, \"thead > tr \" + CHECKBOXINPUT, that._headerCheckboxClick.bind(that));\n                }\n\n                draggableColumns = $.grep(leafColumns(that.columns), function(col) { return col.draggable;});\n\n                if (draggableColumns.length) {\n                    that._hasDragHandleColumn = true;\n\n                    for (var i = 0; i < draggableColumns.length; i++) {\n                        draggableColumns[i].headerAttributes = $.extend({\n                            \"aria-label\": that.options.messages.dragHandleLabel\n                        }, draggableColumns[i].headerAttributes);\n                    }\n                }\n\n                that._foreignKeyBindings(that.columns);\n            },\n\n            _foreignKeyBindings: function(columns) {\n                var that = this;\n                var length = columns.length;\n                var column;\n\n                for (var i = 0; i < length; i++) {\n                    column = columns[i];\n\n                    if (column.dataSource) {\n                        that._fetchForeignKeyValues(column);\n                    }\n                }\n            },\n\n            _fetchForeignKeyValues: function(column) {\n                var that = this;\n                var promise = $.Deferred();\n\n                that._hasBoundForeignKey = true;\n                column.dataSource = DataSource.create(column.dataSource);\n\n                if (!that._foreignKeyPromises) {\n                    that._foreignKeyPromises = [];\n                }\n\n                that._foreignKeyPromises.push(promise);\n                column.dataSource.fetch().then(function() {\n                    var data = column.dataSource.data();\n                    column.values = data.map(function(item) {\n                        return {\n                            value: item[column.dataValueField],\n                            text: item[column.dataTextField]\n                        };\n                    });\n                    promise.resolve();\n                });\n\n            },\n\n            _updateColumnIDs: function(columns, tr) {\n\n                if (!columns.length) {\n                    return;\n                }\n\n                var ths = tr.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\");\n                var id;\n                for (var i = 0; i < columns.length; i++) {\n                    id = ths.eq(i).attr(ID);\n                    if (id) {\n                        columns[i].headerAttributes = extend(columns[i].headerAttributes, { id: id });\n                    }\n                }\n\n                this._updateColumnIDs(childColumns(columns), tr.next());\n            },\n\n            _headerCheckboxClick: function(e) {\n                var that = this,\n                    checkBox = $(e.target),\n                    checked = checkBox.prop(\"checked\");\n\n                if (!that._belongsToGrid(checkBox)) {\n                    return;\n                }\n\n                if (that.trigger(CHANGING, { target: checkBox, originalEvent: e })) {\n                    e.preventDefault();\n                    return;\n                }\n\n                if (checked) {\n                    that.select(that.items());\n                } else {\n                    that.clearSelection();\n                }\n\n                that._calculateAggregatesForSelected();\n                that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n            },\n\n            _checkboxClick: function(e) {\n                var that = this,\n                    row = $(e.target).closest(TR),\n                    isSelecting = !row.hasClass(SELECTED);\n\n                if (!that._belongsToGrid(row)) {\n                    return;\n                }\n\n                if (that.trigger(CHANGING, { target: row, originalEvent: e })) {\n                    e.preventDefault();\n                    return;\n                }\n\n                if (isSelecting) {\n                    that.select(row);\n                } else {\n                    that._deselectCheckRows(row);\n                }\n                that._calculateAggregatesForSelected();\n                that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n            },\n\n            _groups: function() {\n                var group = this.dataSource.group();\n\n                return group ? group.length : 0;\n            },\n\n            _tmpl: function(rowTemplate, columns, alt, skipGroupCells) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    paramName = settings.paramName,\n                    idx,\n                    length = columns.length,\n                    template,\n                    state = { storage: {}, count: 0 },\n                    column,\n                    type,\n                    hasDetails = that._hasDetails(),\n                    groups = that._groups();\n\n                var fieldAttr = kendo.attr(\"field\");\n                var field;\n                var classAttribute;\n                var compiledAttributes;\n                var rowTemplateFunc;\n\n                if (!rowTemplate) {\n                    rowTemplateFunc = function (data) {\n                        var uid = length ? (\" \" + (kendo.attr(\"uid\")) + \"=\\\"\" + (kendo.getter(\"uid\")(data)) + \"\\\"\") : '';\n                        var rowTemplateResult = \"<tr class=\\\"\" + (alt ? 'k-alt k-table-row k-table-alt-row ' : 'k-table-row ') + \"k-master-row\\\"\" + uid + \">\";\n\n                        if (groups > 0 && !skipGroupCells) {\n                            rowTemplateResult += groupCells(groups);\n                        }\n\n                        if (hasDetails) {\n                            rowTemplateResult += '<td class=\"k-hierarchy-cell k-table-td\" aria-expanded=\"false\">' + kendo.ui.icon($((\"<a href=\\\"#\\\" \" + ARIA_LABEL + \"=\\\"\" + EXPAND + \"\\\" tabindex=\\\"-1\\\"></a>\")), { icon: (\"caret-alt-\" + (isRtl ? \"left\" : \"right\")) }) + '</td>';\n                        }\n\n                        for (idx = 0; idx < length; idx++) {\n                            column = columns[idx];\n                            template = column.template;\n                            type = typeof template;\n                            field = column.field;\n                            compiledAttributes = {};\n\n                            var dirtyCellTemplate = (void 0);\n\n                            if (that._editMode() && field) {\n                                column.attributes = column.attributes || {};\n\n                                if (that.virtualScroll) {\n                                    column.attributes[fieldAttr] = field;\n                                }\n\n                                dirtyCellTemplate = that._dirtyCellTemplate(field)(data);\n                            }\n\n                            if (column.colSpan && column.colSpan > 0 && hasHiddenStyle(column.attributes)) { //virtual cell should be visible at all times\n                                column.attributes = removeHiddenStyle(column.attributes);\n                            } else if (!column.colSpan && column.hidden) {\n                                column.attributes = addHiddenStyle(column.attributes);\n                            }\n\n                            if (column.command) {\n                                column.attributes = column.attributes || {};\n                                classAttribute = column.attributes[\"class\"];\n\n                                if (typeof classAttribute !== \"undefined\") {\n                                    if (classAttribute.indexOf(\"k-command-cell\") < 0) {\n                                        column.attributes[\"class\"] += \" k-command-cell\";\n                                    }\n                                } else {\n                                    column.attributes[\"class\"] = \"k-command-cell\";\n                                }\n                            }\n\n                            if (column.draggable) {\n                                column.attributes = column.attributes || {};\n                                if (typeof column.attributes[\"class\"] !== \"undefined\") {\n                                    if (column.attributes[\"class\"].indexOf(\"k-drag-cell k-touch-action-none\") < 0) {\n                                        column.attributes[\"class\"] += \" k-drag-cell k-touch-action-none\";\n                                    }\n                                } else {\n                                    column.attributes[\"class\"] = \"k-drag-cell k-touch-action-none\";\n                                }\n\n                                if (typeof column.attributes[ARIA_LABEL] === \"undefined\") {\n                                    column.attributes[ARIA_LABEL] = that.options.messages.dragHandleLabel;\n                                }\n\n                                if (typeof column.attributes.style !== \"undefined\") {\n                                    if (column.attributes.style.indexOf(\"cursor: move;\") < 0) {\n                                        column.attributes.style += \" cursor: move;\";\n                                    }\n                                } else {\n                                    column.attributes.style = \"cursor: move;\";\n                                }\n                            }\n\n                            if (column._attributesFunction) {\n                                compiledAttributes = column._attributesFunction(data);\n                            }\n\n                            var attributes = extend({}, column.attributes, compiledAttributes);\n                            if (dirtyCellTemplate) {\n                                attributes[\"class\"] = (attributes[\"class\"] || \"\");\n                                attributes[\"class\"] += dirtyCellTemplate;\n                            }\n                            var columnAttributes = stringifyAttributes(attributes);\n                            var colSpanAttributes = '';\n\n                            if (column.colSpan) {\n                                if (column.colSpan > 1) {\n                                    colSpanAttributes += \" \" + kendo.attr(\"virtual\");\n                                }\n                                colSpanAttributes += \" colSpan=\\\"\" + (column.colSpan) + \"\\\"\";\n                            }\n                            rowTemplateResult += decorateCellWithClass((\"<td\" + columnAttributes + colSpanAttributes + \">\"));\n                            rowTemplateResult += column.selectable ? kendo.template(SELECTCOLUMNTMPL)({ size: kendo.getValidCssClass(\"k-checkbox-\", \"size\", that.options.size) }) : that._cellTmpl(column, state)(data);\n                            rowTemplateResult += \"</td>\";\n                        }\n\n                        rowTemplateResult += \"</tr>\";\n                        return rowTemplateResult;\n                    };\n                }\n\n                rowTemplate = kendo.template(rowTemplate || rowTemplateFunc, settings);\n\n                if (state.count > 0) {\n                    return rowTemplate.bind(state.storage);\n                }\n\n                return rowTemplate;\n            },\n\n            _dirtyCellTemplate: function(field) {\n                return function (data) {\n                    if (field && data && data.dirty && data.dirtyFields) {\n                        var dirtyField = field.charAt(0) === \"[\" ? kendo.getter(field)(data.dirtyFields) : data.dirtyFields[field];\n                        return dirtyField ? ' k-dirty-cell' : '';\n                    }\n\n                    return \"\";\n                };\n            },\n\n            _headerCellText: function(column) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    template = column.headerTemplate,\n                    type = typeof(template),\n                    text = column.title && (that.options.encodeTitles ? htmlEncode(column.title) : column.title) || column.field || \"\";\n\n                if (type === FUNCTION) {\n                    text = kendo.template(template, settings)({});\n                } else if (type === STRING) {\n                    text = template;\n                }\n                return text;\n            },\n\n            _cellTmpl: function(column, state) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    template = column.template,\n                    field = column.field,\n                    // html = \"\",\n                    idx,\n                    length,\n                    format = column.format,\n                    type = typeof template,\n                    columnValues = column.values;\n\n                if (column.command) {\n                    if (isArray(column.command)) {\n                        return function (data) {\n                            var html = \"\";\n                            for (idx = 0, length = column.command.length; idx < length; idx++) {\n                                if (column.command[idx].visible) {\n                                    html += column.command[idx].visible(data) ? that._createButton(column.command[idx]) : '';\n                                } else {\n                                    html += that._createButton(column.command[idx]);\n                                }\n                            }\n                            return html;\n                        };\n                    }\n                    return function () { return that._createButton(column.command); };\n                }\n\n                if (column.selectable) {\n                    return SELECTCOLUMNTMPL;\n                }\n\n                if (column.draggable) {\n                    return DRAGHANDLECOLUMNTMPL;\n                }\n\n                return function (data) {\n                    var html = that._dirtyIndicatorTemplate(field)(data);\n\n                    if (type === FUNCTION) {\n                        state.storage[\"tmpl\" + state.count] = template;\n                        html += template(data);\n                        state.count++;\n                    } else if (type === STRING) {\n                        html += kendo.template(template, settings)(data);\n                    } else if (columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0] && field) {\n                        var v = convertToObject(columnValues);\n                        var f = v[settings.useWithBlock ? kendo.getter(field)(data) : field];\n                        html += encode(f != null ? f : '');\n                    } else {\n                        var fieldValue = '';\n                        if (field) {\n                            field = kendo.getter(field)(data);\n                            fieldValue = field == null ? '' : field;\n                        }\n\n                        if (format) {\n                            fieldValue = kendo.format(format.replace(formatRegExp, \"$1\"), fieldValue);\n                        }\n\n                        html += column.encoded ? encode(fieldValue) : fieldValue;\n                    }\n\n                    return html;\n                };\n            },\n\n            _dirtyIndicatorTemplate: function(field) {\n                return function (data) {\n                    if (field && data && data.dirty && data.dirtyFields) {\n                        var dirtyField = field.charAt(0) === \"[\" ? kendo.getter(field)(data.dirtyFields) : data.dirtyFields[field];\n                        return dirtyField ? '<span class=\\\"k-dirty\\\"></span>' : '';\n                    }\n\n                    return \"\";\n                };\n            },\n\n            _virtualCols: function(columns) {\n                var that = this;\n                var widths = $.map(columns, function(c) { return c.hidden ? 0 : parseInt(c.width, 10); });\n                var scrollLeft = that.virtualScrollable ? kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\")) : kendo.scrollLeft(that.content);\n                var tableWidth = outerWidth(that.content);\n                var sumOfWidths = sumWidths(columns);\n                var colsToRender = [];\n                var firstColspan = 0;\n                var lastColspan = 0;\n                var hiddenColumns = 0;\n                var idx = 0;\n                var widthOfHiddenColumns = 0;\n                var considerNext;\n\n                for (idx = 0; idx < columns.length; idx++) {\n                    considerNext = (idx < widths.length - 1) ? widths[idx + 1] : 0;\n                    if (widthOfHiddenColumns + widths[idx] + 2 * considerNext < scrollLeft) {\n                        if (widths[idx]) {\n                            hiddenColumns++;\n                        }\n                        widthOfHiddenColumns += widths[idx];\n                    } else {\n                        firstColspan = 1 + hiddenColumns;\n                        break;\n                    }\n                }\n\n                hiddenColumns = 0;\n                widthOfHiddenColumns = 0;\n\n                for (var i = columns.length - 1; i >= 0; i--) {\n                    if (widthOfHiddenColumns + 3 * widths[i] < sumOfWidths - tableWidth - scrollLeft) {\n                        if (widths[i]) {\n                            hiddenColumns++;\n                        }\n                        widthOfHiddenColumns += widths[i];\n                    } else {\n                        lastColspan = 1 + hiddenColumns;\n                        for (var j = idx; j <= i; j++) {\n                            if (columns[j].locked) {\n                                continue;\n                            }\n                            colsToRender.push(columns[j]);\n                            if (columns[j].colSpan) {\n                                delete columns[j].colSpan;\n                            }\n                        }\n                        colsToRender[0].colSpan = firstColspan;\n                        colsToRender[colsToRender.length - 1].colSpan = lastColspan;\n                        break;\n                    }\n                }\n\n                if (colsToRender[0].hidden) {\n                    colsToRender[0].colSpan--;\n                }\n\n                that.virtualCols = colsToRender;\n\n                return colsToRender;\n            },\n\n            _templates: function() {\n                var that = this,\n                    options = that.options,\n                    dataSource = that.dataSource,\n                    groups = dataSource.group(),\n                    footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                    aggregates = dataSource.aggregate(),\n                    columnLeafs = leafColumns(that.columns),\n                    columnsLocked = leafColumns(lockedColumns(that.columns)),\n                    leafsCols = options.scrollable ? leafColumns(nonLockedColumns(that.columns)) : columnLeafs,\n                    columns = (that.virtualScroll || {}).columns ? that._virtualCols(leafsCols) : leafsCols,\n                    groupHeaderColumnTemplateLockedColumns = grep(visibleColumns(columnsLocked), function(column, index) { return column.groupHeaderColumnTemplate && index !== 0; }),\n                    groupHeaderColumnTemplateNonLockedColumns = grep(visibleColumns(columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n                if (options.scrollable && columnsLocked.length) {\n                    if (options.rowTemplate || options.altRowTemplate) {\n                        throw new Error(\"Having both row template and locked columns is not supported\");\n                    }\n\n                    that.rowTemplate = that._tmpl(options.rowTemplate, columns, false, true);\n                    that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true, true);\n\n                    that.lockedRowTemplate = that._tmpl(options.rowTemplate, columnsLocked);\n                    that.lockedAltRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columnsLocked, true);\n                } else {\n                    that.rowTemplate = that._tmpl(options.rowTemplate, columns);\n                    that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true);\n                }\n\n                if (that._hasDetails()) {\n                    that.detailTemplate = that._detailTmpl(options.detailTemplate || (function () { return \"\"; }));\n                }\n\n                if ((that._group && !isEmptyObject(aggregates)) || (!isEmptyObject(aggregates) && !footer.length) ||\n                    grep(columnLeafs, function(column) { return column.footerTemplate; }).length) {\n\n                    that.footerTemplate = that._footerTmpl(columnLeafs, aggregates, \"footerTemplate\", \"k-footer-template k-table-row\");\n                }\n\n                if (groups && grep(columnLeafs, function(column) { return column.groupFooterTemplate; }).length) {\n                    aggregates = $.map(groups, function(g) { return g.aggregates; });\n\n                    that.groupFooterTemplate = that._footerTmpl(columns, aggregates, \"groupFooterTemplate\", \"k-group-footer k-table-row\", columnsLocked.length);\n\n                    if (options.scrollable && columnsLocked.length) {\n                        that.lockedGroupFooterTemplate = that._footerTmpl(columnsLocked, aggregates, \"groupFooterTemplate\", \"k-group-footer k-table-row\");\n                    }\n                }\n\n                if (groups && (groupHeaderColumnTemplateLockedColumns.length || groupHeaderColumnTemplateNonLockedColumns.length)) {\n                    aggregates = $.map(groups, function(g) { return g.aggregates; });\n\n                    that.groupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columns), aggregates, \"groupHeaderColumnTemplate\", \"k-table-group-row k-grouping-row k-table-row\", columnsLocked.length, groupHeaderColumnTemplateNonLockedColumns);\n\n                    if (options.scrollable && columnsLocked.length) {\n                        that.lockedGroupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columnsLocked), aggregates, \"groupHeaderColumnTemplate\", \"k-table-group-row k-grouping-row k-table-row\", 0, groupHeaderColumnTemplateLockedColumns);\n                    }\n                } else {\n                    that.groupHeaderColumnTemplate = null;\n                    that.lockedGroupHeaderColumnTemplate = null;\n                }\n\n                if (that.options.noRecords) {\n                    that.noRecordsTemplate = that._noRecordsTmpl();\n                }\n            },\n\n            _noRecordsTmpl: function() {\n                var wrapper = '<div class=\"{0}\">{1}</div>';\n                var defaultTemplate = '<div class=\"k-grid-norecords-template\"{1}>{0}</div>';\n                var scrollableNoGridHeightStyles = (this.options.scrollable && !this.wrapper[0].style.height) ? (\" \" + (kendo.attr(\"style-margin\")) + \"=\\\"0 auto\\\" \" + (kendo.attr(\"style-position\")) + \"=\\\"static\\\"\") : '';\n                var state = { storage: {}, count: 0 };\n                var settings = $.extend({}, kendo.Template, this.options.templateSettings);\n                var paramName = settings.paramName;\n                var template;\n                // var html = \"\";\n                var type;\n                var tmpl;\n                var resultTemplate;\n\n                if (this.options.noRecords.template) {\n                    template = this.options.noRecords.template;\n                } else {\n                    template = kendo.format(defaultTemplate, this.options.messages.noRecords, scrollableNoGridHeightStyles);\n                }\n\n                type = typeof template;\n                if (type === \"function\") {\n                    var currentCustomTemplate = state.storage[\"tmpl\" + state.count] = template;\n                    state.count++;\n                    resultTemplate = function (data) { return kendo.format(wrapper, NORECORDSCLASS, currentCustomTemplate(data)); };\n\n                } else if (type === \"string\") {\n                    resultTemplate = this.options.noRecords.template ?\n                        kendo.format(wrapper, NORECORDSCLASS, template)\n                        : function () { return kendo.format(wrapper, NORECORDSCLASS, template); };\n                }\n\n                tmpl = kendo.template(resultTemplate, settings);\n\n                if (state.count > 0) {\n                    tmpl = tmpl.bind(state.storage);\n                }\n\n                return tmpl;\n            },\n\n            _footerTmpl: function(columns, aggregates, templateName, rowClass, skipGroupCells) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    paramName = settings.paramName,\n                    // html = \"\",\n                    idx,\n                    length,\n                    template,\n                    type,\n                    storage = {},\n                    count = 0,\n                    scope = {},\n                    groups = that._groups(),\n                    fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                    column;\n\n                var footerTemplateFunction = function (data) {\n                    var html = '<tr class=\"' + rowClass + '\">';\n\n                    if (groups > 0 && !skipGroupCells) {\n                        html += groupCells(groups);\n                    }\n\n                    if (that._hasDetails()) {\n                        html += '<td class=\"k-hierarchy-cell k-table-td\">&nbsp;</td>';\n                    }\n\n                    for (idx = 0, length = columns.length; idx < length; idx++) {\n                        column = columns[idx];\n                        template = column[templateName];\n                        type = typeof template;\n\n                        html += decorateCellWithClass(\"<td\" + stringifyAttributes(column.footerAttributes) + \">\");\n\n                        if (template) {\n                            if (type !== FUNCTION) {\n                                scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + \"['\" + column.field + \"']\" }) : {};\n                                template = kendo.template(template, scope);\n                            }\n\n                            storage[\"tmpl\" + count] = template;\n                            html += template(data);\n                            count++;\n                        } else {\n                            html += \"&nbsp;\";\n                        }\n\n                        html += \"</td>\";\n                    }\n\n                    html += '</tr>';\n                    return html;\n                };\n\n                var resultTemplate = kendo.template(footerTemplateFunction, settings);\n\n                if (count > 0) {\n                    return resultTemplate.bind(storage);\n                }\n\n                return resultTemplate;\n            },\n\n            _groupHeaderTmpl: function(columns, aggregates, templateName, rowClass, skipGroupCells, groupHeaderColumnTemplateColumns) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    paramName = settings.paramName,\n                    html = \"\",\n                    idx,\n                    length,\n                    template,\n                    type,\n                    storage = {},\n                    count = 0,\n                    scope = {},\n                    fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                    column,\n                    headerTemplateIndex = groupHeaderColumnTemplateColumns.length ? inArray(groupHeaderColumnTemplateColumns[0], columns) : -1,\n                    groupHeaderColumnTemplateClass;\n\n                if (headerTemplateIndex < 0) {\n                    return;\n                }\n                var groupHeaderTemplFunc = function (data) {\n                    var resultHtml = '<tr data-group-uid=\"' + data.uid + '\" class=\"' + rowClass + '\">';\n\n                    if (!skipGroupCells) {\n                        for (var i = 0; i < data.groupCells; i++) {\n                            resultHtml += '<td class=\"k-table-td k-group-cell\">&nbsp;</td>';\n                        }\n                    }\n\n                    if (that._hasDetails()) {\n                        resultHtml += '<td class=\"k-table-td k-hierarchy-cell\">&nbsp;</td>';\n                    }\n\n                    if (headerTemplateIndex < MINCOLSPANVALUE && groupHeaderColumnTemplateColumns.length <= 1 && !skipGroupCells) {\n                        resultHtml += !skipGroupCells ? groupCellBuilder(columns.length)(data) : '';\n                        return resultHtml;\n                        // return kendo.template(resultHtml, settings);\n                    }\n\n                    if (headerTemplateIndex < MINCOLSPANVALUE) {\n                        headerTemplateIndex = !skipGroupCells ? 1 : 0;\n                        resultHtml += !skipGroupCells ? groupCellBuilder(headerTemplateIndex)(data) : '';\n                    }\n                    else {\n                        resultHtml += !skipGroupCells ? groupCellBuilder(headerTemplateIndex)(data) : groupCellLockedContentBuilder(headerTemplateIndex);\n                    }\n\n                    for (idx = headerTemplateIndex, length = columns.length; idx < length; idx++) {\n                        column = columns[idx];\n                        template = column[templateName];\n                        type = typeof template;\n\n                        if (column.sticky) {\n                            var stickyAttributes = '';\n                            groupHeaderColumnTemplateClass = (column.groupHeaderColumnTemplateClass || '');\n\n                            if (!groupHeaderColumnTemplateClass) {\n                                groupHeaderColumnTemplateClass = column.groupHeaderColumnTemplateClass = \"group-header-column-template-\" + kendo.guid();\n                            }\n\n                            if (isPlainObject(column.stickyStyle)) {\n                                var stickyLeft = column.stickyStyle.left ? ((kendo.attr(\"style-left\")) + \"=\\\"\" + (column.stickyStyle.left) + \"\\\"\") : '';\n                                var stickyRight = column.stickyStyle.right ? ((kendo.attr(\"style-right\")) + \"=\\\"\" + (column.stickyStyle.right) + \"\\\"\") : '';\n                                stickyAttributes = stickyLeft + \" \" + stickyRight;\n                            }\n\n                            resultHtml += \"<td class=\\\"k-table-td \" + STICKY_CELL_CLASS + \" \" + groupHeaderColumnTemplateClass + \"\\\" \" + stickyAttributes + \">\";\n                        } else {\n                            resultHtml += \"<td class='k-table-td'>\";\n                        }\n\n                        if (template) {\n                            if (type !== FUNCTION) {\n                                scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + \"['\" + column.field + \"']\" }) : {};\n                                template = kendo.template(template, scope);\n                            }\n\n                            storage[\"tmpl\" + count] = template;\n                            resultHtml += storage[\"tmpl\" + count](data);\n                            count++;\n                        } else {\n                            resultHtml += \"&nbsp;\";\n                        }\n\n                        resultHtml += \"</td>\";\n                    }\n\n                    resultHtml += '</tr>';\n\n                    return resultHtml;\n                };\n\n                html = kendo.template(groupHeaderTemplFunc, settings);\n\n                if (count > 0) {\n                    return html.bind(storage);\n                }\n\n                return html;\n            },\n\n            _detailTmpl: function(template) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    paramName = settings.paramName,\n                    templateFunctionStorage = {},\n                    templateFunctionCount = 0,\n                    groups = that._groups(),\n                    colspan = visibleColumns(leafColumns(that.columns)).length,\n                    type = typeof template;\n\n                var detailTemplateFunction = function (data) {\n                    var html = '<tr role=\"row\" class=\"k-detail-row k-table-row\">';\n                    if (groups > 0) {\n                        html += groupCells(groups);\n                    }\n\n                    html += \"<td role=\\\"gridcell\\\" class=\\\"k-hierarchy-cell k-table-td\\\"></td><td role=\\\"gridcell\\\" class=\\\"k-table-td k-detail-cell\\\"\" + (colspan ? (\" colspan=\\\"\" + colspan + \"\\\"\") : '') + \">\";\n                    if (type === FUNCTION) {\n                        templateFunctionStorage[\"tmpl\" + templateFunctionCount] = template;\n                        html += template(data);\n                        templateFunctionCount++;\n                    } else {\n                        html += kendo.template(template, settings)(data);\n                    }\n\n                    html += \"</td></tr>\";\n                    return html;\n                };\n\n                var resultTemplate = kendo.template(detailTemplateFunction, settings);\n\n                if (templateFunctionCount > 0) {\n                    return resultTemplate.bind(templateFunctionStorage);\n                }\n\n                return resultTemplate;\n            },\n\n            _hasDetails: function() {\n                var that = this;\n\n                return that.options.detailTemplate !== null || (that._events[DETAILINIT] || []).length;\n            },\n            _hasFilterRow: function() {\n                var filterable = this.options.filterable;\n                var hasFiltering = filterable &&\n                        typeof filterable.mode == STRING &&\n                        filterable.mode.indexOf(ROW) != -1;\n                var columns = this.columns;\n                var columnsWithoutFiltering = $.grep(columns, function(col) {\n                    return col.filterable === false;\n                });\n\n                if (columns.length && columnsWithoutFiltering.length == columns.length) {\n                    hasFiltering = false;\n                }\n\n                return hasFiltering;\n            },\n\n            _details: function() {\n                var that = this;\n\n                if (that.options.scrollable && that._hasDetails() && lockedColumns(that.columns).length) {\n                    throw new Error(\"Having both detail template and locked columns is not supported\");\n                }\n\n                that.table.on(CLICK + NS, \".k-hierarchy-cell \" + CARET_ALT_RIGHT + \", .k-hierarchy-cell \" + CARET_ALT_DOWN, function(e) {\n                    var button = $(this);\n\n                    that._toggleDetails(button);\n                    e.preventDefault();\n                    return false;\n                });\n            },\n\n            _toggleDetails: function(button, omitAnimation) {\n                var that = this,\n                cell = button.closest(\"td.k-hierarchy-cell\"),\n                expanding = button.is(CARET_ALT_RIGHT),\n                masterRow = button.closest(\"tr.k-master-row\"),\n                masterRowIndex = masterRow.attr(ARIA_ROWINDEX),\n                detailRow,\n                detailTemplate = that.detailTemplate,\n                data,\n                hasDetails = that._hasDetails(),\n                ariaLabelText = expanding ? COLLAPSE : EXPAND,\n                ariaExpandText = expanding ? true : false;\n\n                if (!expanding) {\n                    kendo.ui.icon(button, { icon: (\"caret-alt-\" + (isRtl ? 'left' : 'right')) });\n                } else {\n                    kendo.ui.icon(button, { icon: \"caret-alt-down\" });\n                }\n\n                button.attr(ARIA_LABEL, ariaLabelText);\n\n                cell.attr(ARIA_EXPANDED, ariaExpandText);\n\n                detailRow = masterRow.next();\n\n                if (detailRow.hasClass(\"k-hidden\")) {\n                    detailRow.removeClass(\"k-hidden\");\n                }\n\n                if (hasDetails && !detailRow.hasClass(\"k-detail-row\")) {\n                    data = that.dataItem(masterRow);\n\n                    detailRow = $(detailTemplate(data))\n                        .addClass(masterRow.hasClass(\"k-alt\") ? \"k-alt\" : \"\")\n                        .insertAfter(masterRow);\n\n                    if (masterRowIndex || masterRowIndex === 0) {\n                        detailRow.attr(ARIA_ROWINDEX, Number(masterRowIndex) + 1);\n                    }\n\n                    that.trigger(DETAILINIT, { masterRow: masterRow, detailRow: detailRow, data: data, detailCell: detailRow.find(\".k-detail-cell\") });\n                }\n\n                that.trigger(expanding ? DETAILEXPAND : DETAILCOLLAPSE, { masterRow: masterRow, detailRow: detailRow });\n\n                if (omitAnimation) {\n                    toggleRow(detailRow, expanding);\n                } else {\n                    detailRow.toggle(expanding);\n                }\n            },\n\n            dataItem: function(tr) {\n                tr = $(tr)[0];\n                if (!tr) {\n                    return null;\n                }\n\n                var rows = this.tbody.children(),\n                    classesRegEx = /k-grouping-row|k-detail-row|k-group-footer/,\n                    idx = tr.sectionRowIndex,\n                    j, correctIdx;\n\n                correctIdx = idx;\n\n                for (j = 0; j < idx; j++) {\n                    if (classesRegEx.test(rows[j].className)) {\n                        correctIdx--;\n                    }\n                }\n\n                return this._data[correctIdx];\n            },\n\n            expandRow: function(tr, omitAnimation) {\n                var button = $(tr).find('> td ' + CARET_ALT_RIGHT);\n\n                if (button.length) {\n                    this._toggleDetails(button, omitAnimation);\n                }\n            },\n\n            collapseRow: function(tr, omitAnimation) {\n                var button = $(tr).find('> td ' + CARET_ALT_DOWN);\n\n                if (button.length) {\n                    this._toggleDetails(button, omitAnimation);\n                }\n            },\n\n            _createHeaderCells: function(columns, rowSpan) {\n                var that = this,\n                    idx,\n                    th,\n                    text,\n                    html = \"\",\n                    length,\n                    title,\n                    columnMenu = that.options.columnMenu,\n                    sortable = that.options.sortable,\n                    filterable = that._hasFilterMenu(),\n                    messages = that.options.messages,\n                    leafs = leafColumns(that.columns),\n                    groups = that.dataSource.group(),\n                    field;\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    th = columns[idx].column || columns[idx];\n                    text = that._headerCellText(th);\n                    title = th.title;\n                    field = \"\";\n\n                    var index = inArray(th, leafs);\n                    var currentTh = \"\";\n\n                    if (th.selectable) {\n                        currentTh += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                        if (rowSpan && !columns[idx].colSpan) {\n                            currentTh += \" rowspan='\" + rowSpan + \"'\";\n                        }\n\n                        if (index > -1) {\n                            currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                        }\n                        text = th.headerTemplate ? text : kendo.template(SELECTCOLUMNHEADERTMPL)({ size: kendo.getValidCssClass(\"k-checkbox-\", \"size\", that.options.size) });\n                        currentTh += \">\" + text + \"</th>\";\n                    } else if (th.draggable) {\n                        currentTh += \"<th class='k-header k-drag-cell' scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                        if (rowSpan && !columns[idx].colSpan) {\n                            currentTh += \" rowspan='\" + rowSpan + \"'\";\n                        }\n\n                        if (index > -1) {\n                            currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                        }\n                        text = th.headerTemplate ? text : \"\";\n                        currentTh += \">\" + text + \"</th>\";\n                    } else if (th.command) {\n                        currentTh += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                        if (rowSpan && !columns[idx].colSpan) {\n                            currentTh += \" rowspan='\" + rowSpan + \"'\";\n                        }\n\n                        if (index > -1) {\n                            currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                        }\n\n                        currentTh += \">\" + ((!text || text === \"&nbsp;\") ? text : kendo.template(DEFAULTHEADERTEMPLATE)({ text: text })) + \"</th>\";\n                    } else {\n                        if (th.field) {\n                            field = kendo.attr(\"field\") + \"='\" + th.field + \"' \";\n                        }\n\n                        currentTh += \"<th scope='col' \" + field;\n                        if ((columnMenu && th.field && th.menu !== false)) {\n                            currentTh += \" aria-haspopup='menu'\";\n                        } else if (filterable && th.filterable !== false && !th.command) {\n                            currentTh += \" aria-haspopup='dialog'\";\n                        }\n\n                        if (rowSpan && !columns[idx].colSpan) {\n                            currentTh += \" rowspan='\" + rowSpan + \"'\";\n                        }\n\n                        if (columns[idx].colSpan > 1) {\n                            currentTh += 'colspan=\"' + (columns[idx].colSpan - hiddenLeafColumnsCount(th.columns)) + '\" ';\n                            currentTh += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                        } else if (columns[idx].colSpan === 1) {\n                            currentTh += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                        }\n\n                        if (title) {\n                            title = title && (that.options.encodeTitles ? htmlEncode(title, true) : title);\n                            currentTh += kendo.attr(\"title\") + '=\"' + title + '\" ';\n                        }\n\n                        if (th.groupable !== undefined$1) {\n                            currentTh += kendo.attr(\"groupable\") + \"='\" + th.groupable + \"' \";\n                        }\n\n                        if (isColumnGroupable(that, th) && (!th.headerAttributes || !th.headerAttributes.title)) {\n                            currentTh += \"title='\";\n                            currentTh += isGroupedBy(groups, th.field) ? messages.ungroupHeader : messages.groupHeader;\n                            currentTh += \"' \";\n                        }\n\n                        if (th.aggregates && th.aggregates.length) {\n                            currentTh += kendo.attr(\"aggregates\") + \"='\" + th.aggregates + \"'\";\n                        }\n\n                        if (index > -1) {\n                            currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                        }\n\n                        currentTh += stringifyAttributes(th.headerAttributes);\n\n                        text = kendo.template(DEFAULTHEADERTEMPLATE)({ text: text });\n\n                        currentTh += \">\" + text + \"</th>\";\n                    }\n                    html += $(currentTh).addClass(\"k-table-th\")[0].outerHTML;\n                }\n                return html;\n            },\n\n            _appendLockedColumnContent: function() {\n                var columns = this.columns,\n                    idx,\n                    colgroup = this.table.find(\"colgroup\"),\n                    cols = colgroup.find(COLGROUP),\n                    length,\n                    lockedCols = $(),\n                    skipHiddenCount = 0,\n                    container,\n                    colSpan,\n                    spanIdx,\n                    colOffset = 0;\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    if (columns[idx].locked) {\n\n                        if (isVisible(columns[idx])) {\n                            colSpan = 1;\n\n                            if (columns[idx].columns) {\n                                colSpan = leafColumns(columns[idx].columns).length - hiddenLeafColumnsCount(columns[idx].columns);\n                            }\n\n                            colSpan = colSpan || 1;\n                            for (spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                                lockedCols = lockedCols.add(cols.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                            }\n                            colOffset += colSpan - 1;\n                        } else {\n                            skipHiddenCount ++;\n                        }\n                    }\n                }\n\n                container = $('<div class=\"k-grid-content-locked\"><table class=\"k-grid-table k-table\"><colgroup></colgroup><tbody class=\"k-table-tbody\"></tbody></table></div>');\n                // detach is required for IE8, otherwise it switches to compatibility mode\n                colgroup.detach();\n                container.find(\"colgroup\").append(lockedCols);\n                colgroup.insertBefore(this.table.find(\"tbody\"));\n\n                this.lockedContent = container.insertBefore(this.content);\n                this.lockedTable = container.children(\"table\");\n                this.lockedTable.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", this.options.size));\n            },\n\n            _appendLockedColumnFooter: function() {\n                var that = this;\n                var footer = that.footer;\n                var cells = footer.find(\".k-footer-template>td\");\n                var cols = footer.find(\".k-grid-footer-wrap>table>colgroup>col\");\n                var html = $('<div class=\"k-grid-footer-locked\"><table class=\"k-grid-footer-table k-table\"><colgroup></colgroup><tfoot class=\"k-table-tfoot\"><tr class=\"k-footer-template k-table-row\"></tr></tfoot></table></div>');\n                var idx, length;\n                var groups = that._groups();\n                var lockedCells = $(), lockedCols = $();\n\n                html.find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", this.options.size));\n\n                lockedCells = lockedCells.add(cells.filter(\".k-group-cell\"));\n                for (idx = 0, length = leafColumns(lockedColumns(that.columns)).length; idx < length; idx++) {\n                    lockedCells = lockedCells.add(cells.eq(idx + groups));\n                }\n\n                lockedCols = lockedCols.add(cols.filter(\".k-group-col\"));\n                for (idx = 0, length = visibleColumns(leafColumns(visibleLockedColumns(that.columns))).length; idx < length; idx++) {\n                    lockedCols = lockedCols.add(cols.eq(idx + groups));\n                }\n\n                lockedCells.appendTo(html.find(TR));\n                lockedCols.appendTo(html.find(\"colgroup\"));\n                that.lockedFooter = html.prependTo(footer);\n            },\n\n            _appendLockedColumnHeader: function(container) {\n                var that = this,\n                    columns = this.columns,\n                    idx,\n                    html,\n                    length,\n                    colgroup,\n                    tr,\n                    trFilter,\n                    table,\n                    header,\n                    filtercellCells,\n                    rows = [],\n                    skipHiddenCount = 0,\n                    cols = $(),\n                    hasFilterRow = that._hasFilterRow(),\n                    filterCellOffset = 0,\n                    filterCells = $(),\n                    cell,\n                    leafColumnsCount = 0,\n                    cells = $();\n\n                colgroup = that.thead.prev().find(COLGROUP);\n                header = that.thead.find(TR).first().find(\".k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n                filtercellCells = that.thead.find(\".k-filter-row\").find(\"td:not(.k-group-cell,.k-hierarchy-cell)\");\n\n                var colOffset = 0;\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    if (columns[idx].locked) {\n                        cell = header.eq(idx);\n                        leafColumnsCount = leafColumns(columns[idx].columns || []).length;\n\n                        if (isVisible(columns[idx])) {\n                            var colSpan = null;\n\n                            if (columns[idx].columns) {\n                                colSpan = leafColumnsCount - hiddenLeafColumnsCount(columns[idx].columns);\n                            }\n\n                            colSpan = colSpan || 1;\n                            for (var spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                                cols = cols.add(colgroup.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                            }\n                            colOffset += colSpan - 1;\n                        }\n\n                        mapColumnToCellRows([columns[idx]], childColumnsCells(cell), rows, 0, 0);\n\n                        leafColumnsCount = leafColumnsCount || 1;\n                        for (var j = 0; j < leafColumnsCount; j++) {\n                            filterCells = filterCells.add(filtercellCells.eq(filterCellOffset + j));\n                        }\n                        filterCellOffset += leafColumnsCount;\n                    }\n\n                    if (columns[idx].columns) {\n                        skipHiddenCount += hiddenLeafColumnsCount(columns[idx].columns);\n                    }\n\n                    if (!isVisible(columns[idx])) {\n                        skipHiddenCount++;\n                    }\n                }\n\n                if (rows.length) {\n                    html = '<div class=\"k-grid-header-locked\"><table class=\"k-grid-header-table k-table\"><colgroup></colgroup><thead class=\"k-table-thead\">';\n                    html += new Array(rows.length + 1).join(\"<tr class='k-table-row'></tr>\");\n                    html += (hasFilterRow ? '<tr class=\"k-filter-row k-table-row\"></tr>' : '') + '</thead></table></div>';\n\n                    table = $(html);\n\n                    table.find('.k-grid-header-locked').css('width', '1px');\n\n                    table.find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n                    colgroup = table.find(\"colgroup\");\n                    colgroup.append(that.thead.prev().find(\"col.k-group-col\").add(cols));\n\n                    tr = table.find(\"thead tr:not(.k-filter-row)\");\n                    for (idx = 0, length = rows.length; idx < length; idx++) {\n                        cells = toJQuery(rows[idx]);\n                        tr.eq(idx).append(that.thead.find(TR).eq(idx).find(\".k-group-cell\").add(cells));\n                    }\n\n                    var count = removeEmptyRows(this.thead);\n                    if (rows.length < count) {\n                        removeRowSpanValue(table, count - rows.length);\n                    }\n\n                    trFilter = table.find(\".k-filter-row\");\n                    trFilter.append(that.thead.find(\".k-filter-row .k-group-cell\").add(filterCells));\n\n                    this.lockedHeader = table.prependTo(container);\n                    this.thead.find(\".k-group-cell\").remove();\n\n                    return true;\n                }\n                return false;\n            },\n\n            _removeLockedContainers: function() {\n                var elements = this.lockedHeader\n                    .add(this.lockedContent)\n                    .add(this.lockedFooter);\n\n                kendo.destroy(elements);\n                elements.off(NS).remove();\n\n                this.lockedHeader = this.lockedContent = this.lockedFooter = null;\n                this.selectable = null;\n            },\n\n            _thead: function() {\n                var that = this,\n                    columns = that.columns,\n                    hasDetails = that._hasDetails() && columns.length,\n                    hasFilterRow = that._hasFilterRow(),\n                    idx,\n                    html = \"\",\n                    thead = that.table.find(\">thead\"),\n                    hasTHead = that.element.find(\"thead\").first().length > 0,\n                    headerContent = that.options.messages.expandCollapseColumnHeader,\n                    tr;\n\n                if (!thead.length) {\n                    thead = $(\"<thead/>\").insertBefore(that.tbody);\n                }\n\n                thead.addClass(\"k-table-thead\").attr(\"role\", \"rowgroup\");\n\n                if (that.lockedHeader && that.thead) {\n                    tr = that.thead.find(\"tr:has(th):not(.k-filter-row)\").html(\"\");\n                    tr.remove();\n                    tr = $();\n\n                    that._removeLockedContainers();\n                } else if (hasTHead) {\n                    tr = that.element.find(\"thead\").first().find(\"tr:has(th):not(.k-filter-row)\");\n                } else {\n                    tr = that.element.find(\"tr:has(th)\").first();\n                }\n\n                if (!tr.length) {\n                    tr = thead.children().first();\n                    if (!tr.length) {\n                       var rows = [{ rowSpan: 1, cells: [], index: 0 }];\n                       that._prepareColumns(rows, columns);\n\n                       for (idx = 0; idx < rows.length; idx++) {\n                           html += \"<tr class='k-table-row'>\";\n                           if (hasDetails) {\n                               html += '<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">' + headerContent + '</th>';\n                           }\n                           html += that._createHeaderCells(rows[idx].cells, rows[idx].rowSpan);\n                           html += \"</tr>\";\n                       }\n\n                       tr = $(html);\n                       kendo.applyStylesFromKendoAttributes(tr, [\"display\", \"left\", \"right\"]);\n                    }\n                } else {\n                    for (idx = 0; idx < columns.length; idx++) {\n    \t\t\t\t\tvar columnIndex = inArray(columns[idx], leafColumns(columns));\n    \t\t\t\t\tvar cell = leafDataCells(tr.parent()).filter(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(columnIndex);\n                        cell.addClass(\"k-table-th\");\n    \t\t\t\t\tif (columns[idx].hidden && columnIndex >= 0) {\n    \t\t\t\t\t\tcell[0].style.display = NONE;\n    \t\t\t\t\t}\n                   }\n\n                   that._updateHeadersAttr(childColumns(columns));\n    \t\t\t}\n\n                if (hasFilterRow) {\n                    var filterRow = $(\"<tr/>\");\n                    filterRow.addClass(\"k-filter-row k-table-row\");\n                    if (hasDetails || tr.find(\".k-hierarchy-cell\").length) { // handles server side detail template\n                        filterRow.prepend('<td class=\"k-table-td k-hierarchy-cell\">&nbsp;</td>');\n                    }\n\n                    var existingFilterRow = (that.thead || thead).find(\".k-filter-row\");\n                    if (existingFilterRow.length) {\n                        kendo.destroy(existingFilterRow);\n                        existingFilterRow.remove();\n                    }\n\n                    thead.append(filterRow);\n                }\n\n                if (!tr.children().length) {\n                    html = \"\";\n                    if (hasDetails) {\n                        html += '<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">&nbsp;</th>';\n                    }\n\n                    html += that._createHeaderCells(columns);\n\n                    tr.html(html);\n                } else if (hasDetails && !tr.find(\".k-hierarchy-cell\")[0]) {\n                    tr.prepend('<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">' + (headerContent ? headerContent : '&nbsp;') + '</th>');\n                }\n\n                tr.find(\"th\").addClass(HEADER_CLASS);\n\n                if (!that.options.scrollable) {\n                    thead.addClass(\"k-grid-header\");\n                }\n\n                tr.find(\"script\").remove().end().prependTo(thead);\n\n                if (that.thead) {\n                    that._destroyColumnAttachments();\n                }\n\n                that.thead = thead;\n\n                that._sortable();\n\n                that._filterable();\n\n                that._filterRow();\n\n                that._scrollable();\n\n                that._columnMenu();\n\n                var syncHeight;\n                var hasLockedColumns = this.options.scrollable && lockedColumns(this.columns).length;\n\n                if (hasLockedColumns) {\n\n                    syncHeight = that._appendLockedColumnHeader(that.thead.closest(\".k-grid-header\"));\n\n                    that._appendLockedColumnContent();\n\n                    that.lockedContent.on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n\n                    if (kendo.support.touch) {\n                        that._lockedContentUserEvents = new kendo.UserEvents(that.lockedContent, {\n                            move: function(e) {\n                                that.content.scrollTop(that.content.scrollTop() + (-e.y.delta));\n                                e.preventDefault();\n                            }\n                        });\n                    }\n\n                    that._updateLockedCols();\n                }\n\n                that._updateCols();\n\n                that._updateColumnCellIndex();\n\n                that._updateFirstColumnClass();\n\n                that._resizable();\n\n                that._draggable();\n\n                that._reorderable();\n\n                that._updateHeader(that._groups());\n\n                that._updateStickyColumns();\n\n                if (hasLockedColumns) {\n                    if (syncHeight) {\n                        that._syncLockedHeaderHeight();\n                    }\n\n                    that._applyLockedContainersWidth();\n                }\n            },\n\n            _retrieveFirstColumn: function(columns, rows) {\n                var result = $();\n\n                if (rows.length && columns[0]) {\n                    var column = columns[0];\n\n                    while (column.columns && column.columns.length) {\n                        column = column.columns[0];\n                        rows = rows.filter(\":not(:first)\");\n                    }\n\n                    result = result.add(rows);\n                }\n\n                return result;\n            },\n\n            _updateFirstColumnClass: function() {\n                var that = this,\n                    columns = that.columns || [],\n                    hasDetails = that._hasDetails() && columns.length;\n\n                if (!hasDetails && !that._groups()) {\n                    var tr = that.thead.find(\">tr:not(.k-filter-row):not(:first)\");\n                    columns = nonLockedColumns(columns);\n\n                    var rows = that._retrieveFirstColumn(columns, tr);\n\n                    if (that._isLocked()) {\n                        tr = that.lockedHeader.find(\"thead>tr:not(.k-filter-row):not(:first)\");\n                        columns = lockedColumns(that.columns);\n\n                        rows = rows.add(that._retrieveFirstColumn(columns, tr));\n                    }\n\n                    rows.each(function() {\n                        var ths = $(this).find(\"th\");\n                        ths.removeClass(\"k-first\");\n                        ths.eq(0).addClass(\"k-first\");\n                    });\n                }\n            },\n\n            _prepareColumns: function(rows, columns, parentCell, parentRow) {\n                var row = parentRow || rows[rows.length - 1];\n\n                var childRow = rows[row.index + 1];\n                var totalColSpan = 0;\n\n                for (var idx = 0; idx < columns.length; idx++) {\n                    var cell = { column: columns[idx], colSpan: 0 };\n                    row.cells.push(cell);\n\n                    if (columns[idx].columns && columns[idx].columns.length) {\n                        if (!childRow) {\n                            childRow = { rowSpan: 0, cells: [], index: rows.length };\n                            rows.push(childRow);\n                        }\n                        cell.colSpan = columns[idx].columns.length;\n                        this._prepareColumns(rows, columns[idx].columns, cell, childRow);\n                        totalColSpan += cell.colSpan - 1;\n                        row.rowSpan = rows.length - row.index;\n                    }\n                }\n                if (parentCell) {\n                    parentCell.colSpan += totalColSpan;\n                }\n            },\n\n            _wheelScroll: function(e) {\n                if (e.ctrlKey) {\n                    return;\n                }\n\n                var content = this.content;\n\n                if (this.virtualScroll && this.virtualScroll.rows) {\n                    content = this.virtualScrollable.verticalScrollbar;\n                }\n\n                var scrollTop = content.scrollTop(),\n                    delta = kendo.wheelDeltaY(e);\n\n                if (delta) {\n                    if (content[0].scrollHeight > content[0].clientHeight &&\n                        (content[0].scrollTop < content[0].scrollHeight - content[0].clientHeight && delta < 0 ||\n                        content[0].scrollTop > 0 && delta > 0)) {\n                        e.preventDefault();\n                    }\n\n                    content.scrollTop(scrollTop + (-delta));\n                }\n            },\n\n            _isLocked: function() {\n                return this.lockedHeader != null;\n            },\n\n            _updateHeaderCols: function() {\n                var table = this.thead.parent().add(this.table);\n\n                if (this._isLocked()) {\n                    normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n                } else {\n                    normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), 0);\n                }\n            },\n\n            _updateColumnSorters: function() {\n                var that = this;\n                var cells = leafDataCells(that.thead);\n                var columns = leafColumns(that.columns);\n                var column;\n                var cell;\n                var sorterInstance;\n\n                if (!that.options.sortable) {\n                    return;\n                }\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n\n                    if (column.sortable !== false && !column.command && column.field) {\n                        cell = cells.eq(idx);\n\n                        sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                        if (sorterInstance) {\n                            sorterInstance.refresh();\n                        }\n                    }\n                }\n            },\n\n            _updateHeadersAttr: function(columns) {\n                if (!columns.length) {\n                    return;\n                }\n\n                var that = this;\n\n                for (var i = 0; i < columns.length; i++) {\n                    if (columns[i].headerAttributes) {\n                        var th = that.element.find(\"[id='\" + columns[i].headerAttributes.id + \"']\");\n                        th.attr(\"headers\", columns[i].headerAttributes.headers);\n                    }\n                }\n\n                that._updateHeadersAttr(childColumns(columns));\n            },\n\n            _updateCols: function(table) {\n                table = table || this.thead.parent().add(this.table);\n\n                this._appendCols(table, this._isLocked());\n            },\n\n            _updateLockedCols: function(table) {\n                if (this._isLocked()) {\n                    table = table || this.lockedHeader.find(\"table\").add(this.lockedTable);\n\n                    normalizeCols(table, visibleLeafColumns(visibleLockedColumns(this.columns)), this._hasDetails(), this._groups());\n                }\n            },\n\n            _appendCols: function(table, locked) {\n                if (locked) {\n                    normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0, this.options.resizable);\n                } else {\n                    normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), this._groups(), this.options.resizable);\n                }\n            },\n\n            _autoColumns: function(schema) {\n                if (schema && schema.toJSON) {\n                    var that = this,\n                        field,\n                        encoded;\n\n                    schema = schema.toJSON();\n\n                    encoded = !(that.table.find(\"tbody tr\").length > 0 && (!that.dataSource || !that.dataSource.transport));\n\n                    for (field in schema) {\n                        that.columns.push({ field: field, encoded: encoded, headerAttributes: { id: kendo.guid() } });\n                    }\n\n                    that._thead();\n\n                    that._templates();\n                }\n            },\n\n            _setRowCachedHeight: function(row, uid) {\n                var cachedHeights = this._cachedRowsHeight,\n                    cachedHeight = cachedHeights[uid],\n                    $row;\n\n                if (cachedHeight) {\n                    $row = $(row);\n                    $row[0].style.height = cachedHeight + \"px\";\n                    row = $row.prop(\"outerHTML\");\n                }\n\n                return row;\n            },\n\n            _rowsHtml: function(data, templates) {\n                var that = this,\n                    html = \"\",\n                    idx,\n                    rowTemplate = templates.rowTemplate,\n                    altRowTemplate = templates.altRowTemplate,\n                    cachedHeights = that._cachedRowsHeight,\n                    length, row;\n\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    if (that._skipRerenderItemsCount > 0) {\n                        that._skipRerenderItemsCount--;\n                    } else {\n                        if (idx % 2) {\n                            row = altRowTemplate(data[idx]);\n                        } else {\n                            row = rowTemplate(data[idx]);\n                        }\n\n                        if (cachedHeights) {\n                            row = that._setRowCachedHeight(row, data[idx].uid);\n                        }\n\n                        html += row;\n                    }\n                    that._data.push(data[idx]);\n                }\n\n                return html;\n            },\n\n            _groupData: function(group, skipFooter, firstColumn) {\n                var that = this,\n                    footerDefaults = that._groupAggregatesDefaultObject || {},\n                    groupItems = group.items,\n                    aggregates = extend({}, footerDefaults, group.aggregates),\n                    headerData = extend({}, {\n                        field: group.field,\n                        value: group.value,\n                        items: groupItems,\n                        aggregates: aggregates\n                    }, group.aggregates[firstColumn ? firstColumn.field : group.field]),\n                    footerData = {};\n\n                if (!skipFooter) {\n                    for (var aggregate in aggregates) {\n                        footerData[aggregate] = extend({}, aggregates[aggregate],\n                            { group: { field: group.field, value: group.value, items: groupItems } }\n                        );\n                    }\n                }\n                return extend({}, footerData, headerData);\n            },\n\n            _removeGroupIfEmpty: function(row) {\n                var that = this,\n                    itemsCount,\n                    subgroupsCount,\n                    length = that.dataSource._group.length;\n\n                for (var i = 0; i < length; i++) {\n                    row = row.prev();\n                    itemsCount = +row.attr('data-group-item-count');\n                    subgroupsCount = +row.attr('data-sub-group-count');\n\n                    if (itemsCount == 1 || subgroupsCount == 1) {\n                        row.hide();\n                    }\n\n                }\n            },\n\n            _groupRowHtml: function(group, colspan, level, groupHeaderBuilder, templates, skipColspan, skipLastGroup, isLockedTable) {\n                var that = this,\n                    html = \"\",\n                    idx,\n                    length,\n                    isLocked = that.lockedContent != null,\n                    field = group.field,\n                    column = grep(leafColumns(that.columns), function(column) { return column.field == field; })[0] || { },\n                    firstColumn = visibleColumns(that.columns)[0],\n                    firstVisibleColumnGroupHeaderTemplate = firstColumn ? firstColumn.groupHeaderColumnTemplate : null,\n                    template = column.groupHeaderTemplate ? column.groupHeaderTemplate : firstVisibleColumnGroupHeaderTemplate,\n                    text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded),\n                    groupItems = group.currentItems || group.items,\n                    groups = that._groups(),\n                    groupFooterTemplate = templates.groupFooterTemplate,\n                    groupHeaderColumnTemplate = templates.groupHeaderColumnTemplate,\n                    groupData,\n                    isGroupPaged = that.dataSource._isGroupPaged(),\n                    expanded = isGroupPaged ? that.dataSource._groupsState[group.uid] : true;\n\n                if (that.options.editable && group.items && group.items[0] && group.items[0].isNew && group.items[0].isNew()) {\n                    expanded = true;\n                }\n\n                if (templates.groupFooterTemplate || templates.groupHeaderColumnTemplate || column.groupHeaderTemplate) {\n                    groupData = that._groupData(group, false, !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false);\n                }\n                if (template && !skipColspan) {\n                    text = typeof template === FUNCTION ? template(groupData) : kendo.template(template)(groupData);\n                }\n\n                if (!that._skipRerenderItemsCount) {\n                    if (!group.excludeHeader) {\n                        html += groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, groups - level, groupData, level, text, expanded, group, isGroupPaged);\n                    } else if (isLocked) {\n                        group.excludeHeader = isLockedTable ? false : true;\n                    } else {\n                        group.excludeHeader = false;\n                    }\n                } else {\n                    groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged);\n                }\n\n                if (expanded) {\n                    if (group.hasSubgroups) {\n                        for (idx = 0, length = groupItems.length; idx < length; idx++) {\n                            html += that._groupRowHtml(groupItems[idx], skipColspan ? colspan : colspan - 1, level + 1, groupHeaderBuilder, templates, skipColspan, skipLastGroup && idx === groupItems.length - 1, isLockedTable);\n                        }\n                    } else {\n                        html += that._rowsHtml(groupItems, templates);\n                    }\n                }\n\n                if (groupFooterTemplate) {\n\n                    if (skipLastGroup) {\n                        if (!inArray(group.value, that._skippedGroups)) {\n                            that._skippedGroups.push(group.value);\n                        }\n                    } else {\n                        if (that._skippedGroups.length && that._skippedGroups[0] === group.value) {\n                            that._skippedGroups.shift();\n                        }\n                        if (!that._skipRerenderItemsCount) {\n                            html += groupFooterTemplate(groupData);\n                        }\n                    }\n                }\n                return html;\n            },\n\n            collapseGroup: function(group) {\n                var level,\n                    that = this,\n                    groupToCollapse = group,\n                    groupable = this.options.groupable,\n                    showFooter = groupable.showFooter,\n                    footerCount = showFooter ? 0 : 1,\n                    offset,\n                    relatedGroup = $(),\n                    idx,\n                    length,\n                    tr;\n\n                group = $(group);\n                level = group.find(\".k-group-cell\").length;\n\n                if (this.dataSource._isGroupPaged()) {\n                    var groupUid = group.attr(\"data-group-uid\");\n                    var groupObject = that.dataSource._getGroupByUid(groupUid);\n                    var currentGroupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    var groupCountAfterCollapse;\n\n                    that.dataSource._groupsState[groupUid] = false;\n                    groupCountAfterCollapse = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    that.dataSource._serverGroupsTotal -= currentGroupCount - groupCountAfterCollapse;\n                    that._progress(true);\n                    that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function() {\n                        that._progress(false);\n                    }, \"collapseGroup\");\n                    return;\n                }\n\n                if (this._isLocked()) {\n                    if (!group.closest(DIV).hasClass(\"k-grid-content-locked\")) {\n                        relatedGroup = group.nextAll(TR);\n                        group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                    } else {\n                        relatedGroup = this.tbody.children(TR).eq(group.index()).nextAll(TR);\n                    }\n                }\n\n                if (group.find(CARET_ALT_DOWN).length) {\n                    kendo.ui.icon(group.find(CARET_ALT_DOWN), { icon: (\"caret-alt-\" + (isRtl ? 'left' : 'right')) });\n                }\n\n                group.find(\"td[aria-expanded='true']\").first().attr(ARIA_EXPANDED, false)\n                    .find(\"a\").attr(ARIA_LABEL, EXPAND);\n\n                group = group.nextAll(TR);\n\n                var toHide = [];\n\n                for (idx = 0, length = group.length; idx < length; idx ++ ) {\n                    tr = group.eq(idx);\n                    offset = tr.find(\".k-group-cell\").length;\n\n                    if (tr.hasClass(GROUPING_ROW)) {\n                        footerCount++;\n                    } else if (tr.hasClass(\"k-group-footer\")) {\n                        footerCount--;\n                    }\n\n                    if (offset <= level || (tr.hasClass(\"k-group-footer\") && footerCount < 0)) {\n                        break;\n                    }\n\n                    if (relatedGroup.length) {\n                        toHide.push(relatedGroup[idx]);\n                    }\n                    toHide.push(tr[0]);\n                }\n\n                $(toHide).hide();\n\n                if (this.options.scrollable.endless && this.content) {\n                    clearTimeout(that._collapseGroupsTimeOut);\n                    that._collapseGroupsTimeOut = setTimeout(function() {\n                        that.content.scroll();\n                        that._groupToCollapse = groupToCollapse;\n                    });\n                }\n            },\n\n            expandGroup: function(group) {\n                    group = $(group);\n\n                var that = this,\n                    showFooter = that.options.groupable.showFooter,\n                    level,\n                    tr,\n                    offset,\n                    relatedGroup = $(),\n                    idx,\n                    length,\n                    footersVisibility = [],\n                    groupsCount = 1;\n\n                    level = group.find(\".k-group-cell\").length;\n\n                if (this.dataSource._isGroupPaged()) {\n                    var groupUid = group.attr(\"data-group-uid\");\n                    var groupObject = that.dataSource._getGroupByUid(groupUid);\n                    var groupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    var groupCountAfterExpand;\n\n                    that.dataSource._groupsState[groupUid] = true;\n                    if (groupObject.items && groupObject.items.length) {\n                        groupCountAfterExpand = that.dataSource._calculateGroupsTotal([groupObject], true);\n                        that.dataSource._serverGroupsTotal += groupCountAfterExpand - groupCount;\n                    }\n\n                    that._progress(true);\n                    that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function() {\n                        that._progress(false);\n                    }, \"expandGroup\");\n                    return;\n                }\n\n                if (this._isLocked()) {\n                    if (!group.closest(DIV).hasClass(\"k-grid-content-locked\")) {\n                        relatedGroup = group.nextAll(TR);\n                        group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                    } else {\n                        relatedGroup = this.tbody.children(TR).eq(group.index()).nextAll(TR);\n                    }\n                }\n\n                if (group.find(CARET_ALT_RIGHT).length) {\n                    kendo.ui.icon(group.find(CARET_ALT_RIGHT), { icon: \"caret-alt-down\" });\n                }\n\n                group.find(\"td[aria-expanded='false']\").first().attr(ARIA_EXPANDED, true)\n                    .find(\"a\").attr(ARIA_LABEL, COLLAPSE);\n                group = group.nextAll(TR);\n\n                for (idx = 0, length = group.length; idx < length; idx ++ ) {\n                    tr = group.eq(idx);\n                    offset = tr.find(\".k-group-cell\").length;\n                    if (offset <= level) {\n                        break;\n                    }\n\n                    if (offset == level + 1 && !tr.hasClass(\"k-detail-row\")) {\n                        tr.show();\n                        relatedGroup.eq(idx).show();\n\n                        if (tr.hasClass(GROUPING_ROW) && tr.find(\".k-icon,.k-svg-icon\").is(CARET_ALT_DOWN)) {\n                            that.expandGroup(tr);\n                        }\n\n                        if (tr.hasClass(\"k-master-row\") && tr.find(\".k-icon,.k-svg-icon\").is(CARET_ALT_DOWN)) {\n                            tr.next().show();\n                            relatedGroup.eq(idx + 1).show();\n                        }\n                    }\n\n                    if (tr.hasClass(GROUPING_ROW)) {\n                        if (showFooter) {\n                            footersVisibility.push(tr.is(\":visible\"));\n                        }\n                        groupsCount ++;\n                    }\n\n                    if (tr.hasClass(\"k-group-footer\")) {\n                        if (showFooter) {\n                            var toggleVisibility = footersVisibility.pop();\n                            tr.toggle(toggleVisibility);\n                            relatedGroup.eq(idx).toggle(toggleVisibility);\n                        }\n                        if (groupsCount == 1) {\n                            tr.show();\n                            relatedGroup.eq(idx).show();\n                        } else {\n                            groupsCount --;\n                        }\n                    }\n                }\n\n                if ((level === 0 && that.options.scrollable.endless && this._isLocked()) ||\n                (!that.options.scrollable.endless && this._isLocked())) {\n                    that._syncLockedContentHeight();\n                }\n            },\n\n            _updateHeader: function(groups) {\n                var that = this,\n                    container = that._isLocked() ? that.lockedHeader.find(\"thead\") : that.thead,\n                    filterCells = container.find(\"tr.k-filter-row\").find(\"td.k-group-cell\").length,\n                    length = container.find(TR).first().find(\"th.k-group-cell\").length,\n                    rows = container.children(\"tr:not(:first)\").filter(function() {\n                        return !$(this).children(\":visible\").length;\n                    });\n\n                if (groups > length) {\n                    $(new Array(groups - length + 1).join('<th class=\"k-group-cell k-header k-table-th\" scope=\"col\">' + encode(that.options.messages.expandCollapseColumnHeader) + '</th>')).prependTo(container.children(\"tr:not(.k-filter-row)\"));\n                    if (that.element.is(\":visible\")) {\n                        rows.find(\"th.k-group-cell\").hide();\n                    }\n                } else if (groups < length) {\n                    container.find(TR).each(function() {\n                        $(this).find(\".k-group-cell\").eq(groups).remove();\n                        $(this).find(\".k-group-cell\").slice(groups).remove();\n                    });\n                }\n                if (groups > filterCells) {\n                    $(new Array(groups - filterCells + 1).join('<td class=\"k-group-cell k-table-td\">&nbsp;</td>')).prependTo(container.find(\".k-filter-row\"));\n                }\n            },\n\n            _firstDataItem: function(data, grouped) {\n                if (data && grouped) {\n                    if (data.hasSubgroups) {\n                        data = this._firstDataItem(data.items[0], grouped);\n                    } else {\n                        data = data.items[0];\n                    }\n                }\n                return data;\n            },\n\n            _updateTablesWidth: function() {\n                var that = this,\n                    tables;\n\n                if (!that._isLocked()) {\n                    return;\n                }\n\n                tables =\n                    $(\">.k-grid-footer>.k-grid-footer-wrap>table\", that.wrapper)\n                    .add(that.thead.parent())\n                    .add(that.table);\n\n                that._footerWidth = tableWidth(tables.eq(0));\n                tables.width(that._footerWidth);\n\n                tables =\n                    $(\">.k-grid-footer>.k-grid-footer-locked>table\", that.wrapper)\n                    .add(that.lockedHeader.find(\">table\"))\n                    .add(that.lockedTable);\n\n                tables.width(tableWidth(tables.eq(0)));\n            },\n\n            hideColumn: function(column) {\n                var that = this,\n                    cell,\n                    tables,\n                    idx,\n                    cols,\n                    colWidth,\n                    position,\n                    width = 0,\n                    headerCellIndex,\n                    length,\n                    footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                    virtualScroll = that.virtualScroll || {},\n                    columns = that.columns,\n                    visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                    columnIndex,\n                    groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    column = grep(flatColumns(columns), function(item) {\n                        return item === column;\n                    })[0];\n                } else {\n                    column = grep(flatColumns(columns), function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || !isVisible(column)) {\n                    return;\n                }\n\n                var setColumnVisibility = that._columnVisibilitySetter(column);\n\n                if (column.columns && column.columns.length) {\n                    position = columnVisiblePosition(column, columns);\n\n                    setColumnVisibility(column, false);\n\n                    setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, false);\n\n                    for (idx = 0; idx < column.columns.length; idx++) {\n                       this.hideColumn(column.columns[idx]);\n                    }\n\n                    that._ariaAddHiddenColIndex();\n                    that.trigger(COLUMNHIDE, { column: column });\n\n                    return;\n                }\n\n                columnIndex = inArray(column, visibleColumns(leafColumns(columns)));\n\n                setColumnVisibility(column, false);\n\n                that._setParentsVisibility(column, false);\n\n                that._templates();\n\n                that._updateCols();\n                that._updateLockedCols();\n\n                var container = that.thead;\n\n                headerCellIndex = columnIndex;\n                if (that.lockedHeader && visibleLocked > columnIndex) {\n                    container = that.lockedHeader.find(\">table>thead\");\n                } else {\n                    headerCellIndex -= visibleLocked;\n                }\n\n                cell = leafDataCells(container).filter(isCellVisible).eq(headerCellIndex);\n                cell[0].style.display = NONE;\n\n                setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>td\"), columnIndex, false);\n                if (footer[0]) {\n                    that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n                    that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n                    setCellVisibility(footer.find(\".k-footer-template>td\"), columnIndex, false);\n                }\n\n                if (virtualScroll.columns && !column.locked) {\n                    that._updateContentWidth();\n                    that.trigger(COLUMNHIDE, { column: column });\n                    return;\n                }\n\n                if (that.lockedTable && visibleLocked > columnIndex) {\n                    hideColumnCells(that.lockedTable.find(\">tbody>tr\"), columnIndex);\n                } else {\n                    hideColumnCells(that.tbody.children(), columnIndex - visibleLocked);\n                }\n\n                if (that.lockedTable) {\n                    that._updateTablesWidth();\n                    that._applyLockedContainersWidth();\n                    that._syncLockedContentHeight();\n                    that._syncLockedHeaderHeight();\n                    that._syncLockedFooterHeight();\n                } else {\n                    cols = that.thead.prev().find(\"col\");\n                    for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n\n                        if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n\n                        if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n\n                        if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                            width += parseInt(colWidth, 10);\n                        } else {\n                            width = 0;\n                            break;\n                        }\n                    }\n\n                    tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                    that._footerWidth = null;\n\n                    if (width) {\n                        tables.each(function() {\n                            this.style.width = width + PX;\n                        });\n\n                        that._footerWidth = width;\n                        that._setContentWidth();\n                    }\n                }\n\n                that._updateFirstColumnClass();\n                that._updateStickyColumns();\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n                that._ariaAddHiddenColIndex();\n                that.trigger(COLUMNHIDE, { column: column });\n            },\n\n            _setParentsVisibility: function(column, visible) {\n                var that = this;\n                var columns = that.columns;\n                var idx;\n                var parents = [];\n                var parent;\n                var position;\n                var cell;\n                var colSpan;\n                var setColumnVisibility = that._columnVisibilitySetter(column);\n\n                var predicate = visible ?\n                    function(p) { return visibleColumns(p.columns).length && p.hidden; } :\n                    function(p) { return !visibleColumns(p.columns).length && !p.hidden; };\n\n\n                if (columnParents(column, columns, parents) && parents.length) {\n                    for (idx = parents.length - 1; idx >= 0; idx--) {\n                        parent = parents[idx];\n                        position = columnPosition(parent, columns);\n                        cell = elements($(\">table>thead\", this.lockedHeader), this.thead, \">tr:eq(\" + position.row + \")>th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(position.cell);\n\n                        if (predicate(parent)) {\n                            setColumnVisibility(parent, visible);\n                            cell[0].style.display = visible ? \"\" : NONE;\n                        }\n\n                        if (cell.filter(\"[\" + kendo.attr(\"colspan\") + \"]\").length) {\n                            colSpan = parseInt(cell.attr(kendo.attr(\"colspan\")), 10);\n                            cell[0].colSpan = (colSpan - hiddenLeafColumnsCount(parent.columns)) || 1;\n                        }\n                    }\n                }\n            },\n\n            _updateContentWidth: function() {\n                var that = this;\n                var tables = that.table.add(that.thead.parent());\n\n                tables.css({\n                    width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n                });\n                that.refresh();\n            },\n\n            showColumn: function(column) {\n                var that = this,\n                    idx,\n                    length,\n                    cell,\n                    tables,\n                    width,\n                    headerCellIndex,\n                    position,\n                    colWidth,\n                    cols,\n                    columns = that.columns,\n                    virtualScroll = that.virtualScroll || {},\n                    footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                    lockedColumnsCount = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).length : 0,\n                    columnIndex,\n                    originalColumn,\n                    columnLeafIndex,\n                    groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n                if (typeof column == \"number\") {\n                    columnIndex = column;\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    $.each(flatColumns(columns), function(index, item) {\n                        if (item === column) {\n                            column = item;\n                            columnIndex = index;\n                            return false;\n                        }\n                    });\n                } else {\n                    $.each(flatColumns(columns), function(index, item) {\n                        if (item.field === column) {\n                            column = item;\n                            columnIndex = index;\n                            return false;\n                        }\n                    });\n                }\n\n                if (!column || isVisible(column)) {\n                    return;\n                }\n\n                var setColumnVisibility = that._columnVisibilitySetter(column);\n\n                if (column.columns && column.columns.length) {\n                    position = columnPosition(column, columns);\n                    originalColumn = flatColumns(that.options.columns)[columnIndex];\n\n                    setColumnVisibility(column, true);\n\n                    setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, true);\n\n                    for (idx = 0; idx < column.columns.length; idx++) {\n                        if (!originalColumn.columns[idx].hidden) {\n                            this.showColumn(column.columns[idx]);\n                        }\n                    }\n\n                    that._ariaRemoveHiddenColIndex();\n                    that.trigger(COLUMNSHOW, { column: column });\n\n                    return;\n                }\n\n                columnLeafIndex = inArray(column, leafColumns(columns));\n\n                setColumnVisibility(column, true);\n\n                that._setParentsVisibility(column, true);\n\n                that._templates();\n                that._updateCols();\n                that._updateLockedCols();\n\n                var container = that.thead;\n\n                headerCellIndex = columnLeafIndex;\n                if (that.lockedHeader && lockedColumnsCount > columnLeafIndex) {\n                    container = that.lockedHeader.find(\">table>thead\");\n                } else {\n                    headerCellIndex -= lockedColumnsCount;\n                }\n\n                cell = leafDataCells(container).eq(headerCellIndex);\n                cell[0].style.display = \"\";\n                cell[0].classList.remove(\"k-hidden\");\n\n                setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>td\"), columnLeafIndex, true);\n                if (footer[0]) {\n                    that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n                    that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n                    setCellVisibility(footer.find(\".k-footer-template>td\"), columnLeafIndex, true);\n                }\n\n                if (virtualScroll.columns && !column.locked) {\n                    that._updateContentWidth();\n                    that.trigger(COLUMNSHOW, { column: column });\n                    return;\n                }\n\n                if (that.lockedTable && lockedColumnsCount > columnLeafIndex) {\n                    showColumnCells(that.lockedTable.find(\">tbody>tr\"), columnLeafIndex);\n                } else {\n                    showColumnCells(that.tbody.children(), columnLeafIndex - lockedColumnsCount);\n                }\n\n                if (that.lockedTable) {\n                    that._updateTablesWidth();\n                    that._applyLockedContainersWidth();\n                    that._syncLockedContentHeight();\n                    that._syncLockedHeaderHeight();\n                } else {\n                    tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                    if (!column.width) {\n                        tables.width(\"\");\n                    } else {\n                        width = 0;\n                        cols = that.thead.prev().find(\"col\");\n                        for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                            colWidth = cols[idx].style.width;\n\n                            if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                                width += outerWidth(cols[idx]);\n                                continue;\n                            }\n\n                            if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                                width += outerWidth(cols[idx]);\n                                continue;\n                            }\n\n                            if (colWidth.indexOf(\"%\") > -1) {\n                                width = 0;\n                                break;\n                            }\n                            width += parseInt(colWidth, 10);\n                        }\n\n                        that._footerWidth = null;\n                        if (width) {\n                            tables.each(function() {\n                                this.style.width = width + PX;\n                            });\n                            that._footerWidth = width;\n                            that._setContentWidth();\n                        }\n                    }\n                }\n\n                that._updateFirstColumnClass();\n                that._updateStickyColumns();\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n                that._ariaRemoveHiddenColIndex();\n                that.trigger(COLUMNSHOW, { column: column });\n            },\n\n            _columnVisibilitySetter: function(column) {\n                var col = column || {};\n\n                if (isUndefined(col.media)) {\n                    return setColumnVisibility;\n                } else {\n                    return setColumnMediaVisibility;\n                }\n            },\n\n\n            _buildSkeleton: function() {\n                var visibleColumns = this.virtualCols ? this.virtualCols : visibleLeafColumns(this.columns);\n                var pageSize = this.dataSource.pageSize() || this.dataSource.total();\n                var loaderHTML = \"\";\n                var colspan;\n                var groups = this._groups();\n                var columnsCount = visibleColumns.length + groups;\n\n                if (this._hasDetails()) {\n                    columnsCount++;\n                }\n\n                if (this._hasVirtualColumns()) {\n                    colspan = parseInt(this.content.find(TR).first().find(\"td\").first().attr(\"colspan\"), 10);\n                }\n\n                for (var i = 0; i < pageSize; i++) {\n                    loaderHTML += \"<tr class='k-table-row'>\";\n                    for (var j = 0; j < columnsCount; j++) {\n                        if (colspan && !j) {\n                            loaderHTML += \"<td colspan='\" + colspan + \"'><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>\";\n                        } else {\n                            loaderHTML += \"<td><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>\";\n                        }\n                    }\n                    loaderHTML += \"</tr>\";\n                }\n                return loaderHTML;\n            },\n\n            _progress: function(toggle) {\n                var element = this.element;\n                var endless = this.options.scrollable && this.options.scrollable.endless;\n                var loaderType = this.options.loaderType;\n                var isVirtualization = this.options.scrollable && this.options.scrollable.virtual;\n                var skeleton;\n\n                if (isVirtualization) {\n                    element = this.content;\n                } else if (this._editContainer && this._editMode() === \"popup\") {\n                    element = this._editContainer;\n                } else if (this.lockedContent || endless) {\n                    element = this.wrapper;\n                } else if (this.element.is(\"table\")) {\n                    element = this.element.parent();\n                } else if (this.content && this.content.length) {\n                    element = this.content;\n                }\n\n                if (loaderType == \"skeleton\") {\n                    if (toggle) {\n                        skeleton = this._buildSkeleton();\n                            element.find(\"tbody\")\n                             .empty()\n                             .append(skeleton);\n                    } else {\n                        element.find(\".k-skeleton\").closest(\"tbody\").empty();\n                    }\n                } else {\n                    if (endless && toggle) {\n                        kendo.ui.progress(element, toggle, { height: this.content.height(), top: this.content.parent()[0].offsetTop, opacity: true });\n                    } else {\n                        kendo.ui.progress(element, toggle);\n                    }\n                }\n            },\n\n            _resize: function(size, force) {\n\n                this._syncLockedContentHeight();\n                this._syncLockedHeaderHeight();\n\n                if (this.content) {\n                    this._setContentWidth();\n                    this._setContentHeight();\n                }\n\n                if (this.lockedTable) {\n                    this._syncLockedScroll();\n                }\n\n                if (this.virtualScrollable && (force || this._rowHeight)) {\n                    if (force) {\n                        this._rowHeight = null;\n                    }\n                    this.virtualScrollable.repaintScrollbar();\n                }\n\n                if (this.pager && this.pager.element) {\n                    this.pager.resize(force);\n                }\n\n                if (this._anyStickyColumns()) {\n                    this._updateStickyColumns(false);\n                }\n            },\n\n            _isActiveInTable: function() {\n                var active = activeElement();\n\n                if (!active) { return false; }\n\n                return this.table[0] === active ||\n                    $.contains(this.table[0], active) ||\n                    (this._isLocked() &&\n                        (this.lockedTable[0] === active || $.contains(this.lockedTable[0], active))\n                    );\n            },\n\n            refresh: function(e) {\n                var that = this,\n                    data = that.dataSource.view(),\n                    navigatable = that.options.navigatable,\n                    virtualScroll = that.virtualScroll || {},\n                    currentIndex,\n                    current = $(that.current()),\n                    isCurrentInHeader = false,\n                    groups = that._groups(),\n                    colspan = groups + visibleLeafColumns(visibleColumns(that.columns)).length,\n                    contentScrollLeft,\n                    cachedItemsToSkip;\n\n                if (e && e.action === \"itemchange\" && (that.editable || that.options.scrollable.endless)) { // skip rebinding if editing is in progress\n                    if (this._editMode() != \"popup\" || this._editMode() === \"popup\" && !that._editableIsClosing) { // popup editing animation has not finished yet and the editable is not destoyed\n                        return;\n                    }\n                }\n\n                if (that._shouldMapHights) {\n                    that._mapCachedRowsHeight(\"get\", \"uid\");\n                    that._shouldMapHights = false;\n                }\n\n                if (virtualScroll.columns) {\n                    that._templates();\n                }\n\n                //someone remove the edited item\n                if (e && e.action === \"remove\" && that.editable &&\n                    that.editable.options.model && inArray(that.editable.options.model, e.items) > -1) {\n                    that.editable.options.model.unbind(CHANGE, that._modelChangeHandler);\n                }\n\n                e = e || {};\n\n                if (that.trigger(\"dataBinding\", { action: e.action || \"rebind\", index: e.index, items: e.items })) {\n                    return;\n                }\n\n                if (e.action === SYNC && that._isVirtualEditable()) {\n                    that._destroyEditable();\n                    that._clearEditableState();\n                }\n\n                if (!that._endlessFetchInProgress) {\n                    if (navigatable && (that._isActiveInTable() || (that._editContainer && that._editContainer.data(\"kendoWindow\")))) {\n                        isCurrentInHeader = current.is(\"th\");\n                        currentIndex = isCurrentInHeader ? current.parent().children(\":not(.k-group-cell)\").index(current[0]) : Math.max(that.cellIndex(current), 0);\n                    }\n                    that._destroyEditable();\n                }\n\n                if (that.options.scrollable && that.options.scrollable.endless && !that._pdfInitialized) {\n                    clearTimeout(that._progressTimeOut);\n                    that._progressTimeOut = setTimeout(function() {\n                        if (!that._endlessFetchInProgress) {\n                            that._progress(false);\n                        }\n                    }, 250);\n                } else {\n                     that._progress(false);\n                }\n\n                if (current.length) {\n                    that._currentRowIndex = current.parent().index();\n                }\n\n                that._hideResizeHandle();\n\n                that._data = [];\n\n                if (!that.columns.length) {\n                    that._autoColumns(that._firstDataItem(data[0], groups));\n                    colspan = groups + that.columns.length;\n                }\n\n                that._group = groups > 0 || that._group;\n\n                if (that._group) {\n                    that._templates();\n                    that._updateCols();\n                    that._updateLockedCols();\n                    if (!that._virtualColScroll) {\n                        that._updateHeader(groups);\n                    }\n                    that._group = groups > 0;\n                    that._groupRows = groupRows(data);\n                }\n\n                if (that.content) {\n                    contentScrollLeft = kendo.scrollLeft(that.content);\n                }\n                cachedItemsToSkip = that._skipRerenderItemsCount;\n                that._renderContent(data, colspan, groups);\n                if (that.options.scrollable && that.options.scrollable.endless && this.lockedContent) {\n                    that._skipRerenderItemsCount = cachedItemsToSkip;\n                }\n                that._renderLockedContent(data, colspan, groups);\n\n                if (!that._virtualColScroll) {\n                    that._footer();\n\n                    that._renderNoRecordsContent();\n\n                    that._togglePagerVisibility();\n\n                    that._setContentHeight();\n\n                    that._setContentWidth(that.content && contentScrollLeft);\n                }\n\n                if (that.lockedTable) {\n                    //requires manual trigger of scroll to sync both tables\n                    if (virtualScroll.rows) {\n                        that.content.find(\">.k-virtual-scrollable-wrap\").trigger(\"scroll\");\n                    } else if (that.touchScroller) {\n                        that.touchScroller.movable.trigger(\"change\");\n                    } else {\n                        that.wrapper.one(\"scroll\", function(e) { e.stopPropagation(); });\n                        that.content.trigger(\"scroll\");\n                    }\n                }\n\n                if (!that._endlessFetchInProgress && !that._rowDropping) {\n                    that._restoreCurrent(currentIndex, isCurrentInHeader);\n                }\n\n                if (that.touchScroller) {\n                    that.touchScroller.contentResized();\n                }\n\n                if (that.selectable) {\n                    that.selectable.resetTouchEvents();\n                }\n\n                if (that._checkBoxSelection) {\n                    that._toggleHeaderCheckState(false);\n                }\n\n                if (that.options.persistSelection &&\n                    ((that.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell) || that._checkBoxSelection) &&\n                    (that.items().length || that.dataSource._isGroupPaged())) {\n                    that._restoreSelection();\n                }\n\n                if (!that.options.persistSelection) {\n                    that._selectedIds = {};\n                }\n\n                if (that._hasReorderableRows()) {\n                    that._draggableRows();\n                    that._reorderableRows();\n                }\n\n                if (that.options.selectable && that.options.selectable.cellAggregates) {\n                    that._calculateAggregatesForSelected();\n                }\n\n                that._aria();\n\n                that.trigger(DATABOUND);\n           },\n\n            _restoreCurrent: function(currentIndex, isCurrentInHeader) {\n                if (currentIndex === undefined$1 || currentIndex < 0) {\n                    return;\n                }\n\n                this._removeCurrent();\n\n                if (isCurrentInHeader) {\n                    this._setCurrent(this.thead.find(\"th:not(.k-group-cell)\").eq(currentIndex), false, this._hasVirtualColumns());\n                } else {\n                    var rowIndex = 0;\n                    var virtualScroll = this.virtualScroll || {};\n\n                    if (this._rowVirtualIndex) {\n                        if (virtualScroll.rows) {\n                            rowIndex = this.virtualScrollable.position(this._rowVirtualIndex);\n                        } else {\n                            rowIndex = this._rowVirtualIndex;\n                        }\n                    } else if (this._currentRowIndex) {\n                        rowIndex = this._currentRowIndex;\n                    } else {\n                        currentIndex = 0;\n                    }\n\n                    var row = $();\n                    var colspan;\n\n                    if (this.lockedTable) {\n                        row = this.lockedTable.find(\">tbody>tr\").eq(rowIndex);\n                    }\n                    row = row.add(this.tbody.children().eq(rowIndex));\n\n                    if (this._hasVirtualColumns()) {\n                        colspan = parseInt(row.find(\"td\").first().attr(\"colspan\"), 10);\n                        currentIndex = this._virtualCellIndex - (colspan > 1 ? colspan - 1 : 0);\n                    }\n\n\n                    var td = row.find(\">td:not(.k-group-cell):not(.k-hierarchy-cell)\")\n                        .eq(currentIndex);\n\n                    if (!td.length || currentIndex < 0) {\n                        return;\n                    }\n\n                    if (this._hasVirtualColumns()) {\n                        this._setCurrent(td, true, true);\n                    } else {\n                        this._setCurrent(td);\n                    }\n\n                }\n\n                if (this._current) {\n                    focusTable(this.table, true);\n                }\n            },\n\n            _restoreSelection: function() {\n                var that = this,\n                    allRows = that.items(),\n                    selectedRows,\n                    id = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n\n                selectedRows = grep(allRows, function(row) {\n                     var dataItemKey = that.dataItem(row)[id];\n                     if (that._selectedIds[dataItemKey]) {\n                        return row;\n                     }\n                });\n\n                that.select(selectedRows);\n            },\n\n            _getSelectedRowUids: function() {\n                var that = this,\n                    selected = that.select(),\n                    row,\n                    uid,\n                    result = [];\n\n                for (var i = 0; i < selected.length; i++) {\n                    row = $(selected[i]);\n\n                    if (kendo.ui.Selectable.parseOptions(that.options.selectable).cell) {\n                        row = row.closest(TR);\n                    }\n\n                    uid = row.data(\"uid\");\n\n                    if (result.indexOf(uid) === -1) {\n                        result.push(uid);\n                    }\n                }\n\n                return result;\n            },\n\n            _getSelectedColumnFields: function() {\n                var that = this,\n                    selected = that.select(),\n                    field,\n                    index,\n                    visibleColumns = visibleLeafColumns(that.columns).filter(function (col) { return !col.selectable && !col.draggable & !col.command; }),\n                    result = [];\n\n                // If the mode is in row selection, then return all of the visible columns.\n                if (!kendo.ui.Selectable.parseOptions(that.options.selectable).cell) {\n                    return visibleColumns.map(function (vc) { return vc.field; });\n                }\n\n                for (var i = 0; i < selected.length; i++) {\n                    index = $(selected[i]).index();\n\n                    field = that.thead.find(\"th:eq(\" + index + \")\").data(\"field\");\n\n                    if (result.indexOf(field) === -1) {\n                        result.push(field);\n                    }\n                }\n\n                return result;\n            },\n\n           _cleanupDetailItems: function() {\n               var that = this;\n\n               if (that._hasDetails()) {\n                   that.tbody.find(\".k-detail-cell\").empty();\n               }\n           },\n\n           _renderContent: function(data, colspan, groups) {\n                var that = this,\n                    idx,\n                    length,\n                    html = \"\",\n                    isLocked = that.lockedContent != null,\n                    endlessAppend = null,\n                    skipLastGroup,\n                    flatViewLength,\n                    scrollable = that.options.scrollable,\n                    templates = {\n                            rowTemplate: that.rowTemplate,\n                            altRowTemplate: that.altRowTemplate,\n                            groupFooterTemplate: that.groupFooterTemplate,\n                            groupHeaderColumnTemplate: that.groupHeaderColumnTemplate\n                        };\n                if (scrollable && scrollable.endless && !that.dataSource.options.endless) {\n                    that._skipRerenderItemsCount = 0;\n                    if (that.content) {\n                        that.content[0].scrollTop = 0;\n                    }\n                }\n                endlessAppend = that._skipRerenderItemsCount > 0;\n                colspan = isLocked ? colspan - visibleLeafColumns(visibleLockedColumns(that.columns)).length : colspan;\n                if (groups > 0) {\n\n                    colspan = isLocked ? colspan - groups : colspan;\n\n                    if (that.detailTemplate) {\n                        colspan++;\n                    }\n\n                    if (that.groupFooterTemplate) {\n                        that._groupAggregatesDefaultObject = that.dataSource.aggregates();\n                    }\n                    if (that.options.scrollable.endless) {\n                        flatViewLength = that.dataSource.flatView().length;\n                    }\n                    for (idx = 0, length = data.length; idx < length; idx++) {\n                        if (!that._skippedGroups) {\n                            that._skippedGroups = [];\n                        }\n                        skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== that.dataSource.total();\n                        html += that._groupRowHtml(data[idx], colspan, 0, isLocked ? groupRowLockedContentBuilder : groupRowBuilder, templates, isLocked, skipLastGroup, false);\n                    }\n                } else {\n                    html += that._rowsHtml(data, templates);\n                }\n\n                if (endlessAppend) {\n                    that.tbody.append(html);\n                    kendo.applyStylesFromKendoAttributes(that.tbody, [\"display\", \"left\", \"right\"]);\n                    clearTimeout(that._endlessFetchTimeOut);\n                    that._endlessFetchTimeOut = setTimeout(function() {\n                        if (that._groupToCollapse) {\n                            that.collapseGroup(that._groupToCollapse);\n                            that._groupToCollapse = null;\n                        }\n                    });\n                    that._endlessFetchInProgress = null;\n                } else {\n                    that.tbody = appendContent(that.tbody, that.table, html, this.options.size);\n                }\n           },\n\n           _renderGroupRows: function() {\n            var that = this,\n            data = that._groupRows,\n            groupRows = that.wrapper.find(DOT + GROUPING_ROW),\n            groups = that._groups(),\n            groupRowBuilderFunc,\n            isLocked = that.lockedContent != null,\n            columns,\n            colspan,\n            group,\n            field,\n            column,\n            template,\n            text,\n            groupHeaderData,\n            tableContainer,\n            isInLockedContainer,\n            prevElement,\n            newGroupRowElement,\n            currentRow,\n            level,\n            groupHeaderColumnTemplate,\n            firstColumnGroupData;\n\n            groupRows.each(function(index, row) {\n                currentRow = $(row);\n                tableContainer = currentRow.closest(\"table\").parent();\n                isInLockedContainer = tableContainer.is(\".\" + CONTENTRLOCKEDCONTAINER);\n                columns = isInLockedContainer ? visibleLeafColumns(visibleColumns(lockedColumns(that.columns))) : visibleLeafColumns(visibleColumns(nonLockedColumns(that.columns)));\n                level = currentRow.find(\".\" + GROUPCELLCLASS).length;\n                if (isLocked) {\n                    groupRowBuilderFunc = isInLockedContainer ? groupRowBuilder : groupRowLockedContentBuilder;\n                    colspan = isInLockedContainer ? columns.length + groups - level : columns.length;\n                }\n                else {\n                    groupRowBuilderFunc = groupRowBuilder;\n                    colspan = columns.length + groups - level;\n                }\n\n                group = index >= data.length ? data[index - data.length] : data[index];\n                field = group.field;\n                column = grep(leafColumns(that.columns), function(column) { return column.field == field; })[0] || { };\n                firstColumnGroupData = !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false;\n                template = column.groupHeaderTemplate ? column.groupHeaderTemplate : visibleColumns(that.columns)[0].groupHeaderColumnTemplate;\n                text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded);\n                groups = groups;\n                groupHeaderData = that._groupData(group, false, firstColumnGroupData);\n                groupHeaderColumnTemplate = isInLockedContainer ? that.lockedGroupHeaderColumnTemplate : that.groupHeaderColumnTemplate;\n\n                if (template) {\n                    text = typeof template === FUNCTION ? template(groupHeaderData) : kendo.template(template)(groupHeaderData);\n                }\n\n                prevElement = currentRow.prev().length ? currentRow.prev() : currentRow.parent();\n\n                newGroupRowElement = $(groupHeaderColumnTemplate ?\n                    groupHeaderColumnTemplate(extend({}, groupHeaderData, { groupCells: level, colspan: groups - level, text: text })) :\n                    groupRowBuilderFunc(colspan, level, text, null, null, null, isRtl)\n                );\n\n                kendo.applyStylesFromKendoAttributes(newGroupRowElement, [\"display\", \"left\", \"right\"]);\n\n                if (prevElement.is(\"tbody\")) {\n                    prevElement.prepend(newGroupRowElement);\n                }\n                else {\n                    prevElement.after(newGroupRowElement);\n                }\n                    currentRow.remove();\n               });\n           },\n\n           _renderLockedContent: function(data, colspan, groups) {\n               var html = \"\",\n                   idx,\n                   length,\n                   skipLastGroup,\n                   endlessAppend = null,\n                   flatViewLength,\n                   templates = {\n                       rowTemplate: this.lockedRowTemplate,\n                       altRowTemplate: this.lockedAltRowTemplate,\n                       groupFooterTemplate: this.lockedGroupFooterTemplate,\n                       groupHeaderColumnTemplate: this.lockedGroupHeaderColumnTemplate\n                   };\n\n               if (this.lockedContent) {\n\n                   var table = this.lockedTable;\n                   endlessAppend = this._skipRerenderItemsCount > 0;\n\n                   if (groups > 0) {\n                       colspan = colspan - visibleColumns(leafColumns(nonLockedColumns(this.columns))).length;\n                       if (this.options.scrollable.endless) {\n                         flatViewLength = this.dataSource.flatView().length;\n                       }\n                       for (idx = 0, length = data.length; idx < length; idx++) {\n                        skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== this.dataSource.total();\n                        html += this._groupRowHtml(data[idx], colspan, 0, groupRowBuilder, templates, false, skipLastGroup, true);\n                       }\n                   } else {\n                       html = this._rowsHtml(data, templates);\n                   }\n\n                   if (endlessAppend) {\n                       table.children(\"tbody\").append(html);\n                   } else {\n                       appendContent(table.children(\"tbody\"), table, html, this.options.size);\n                   }\n\n                   this._syncLockedContentHeight();\n               }\n           },\n\n           _togglePagerVisibility: function() {\n               if (this.options.pageable.alwaysVisible === false) {\n                    this.wrapper.find(\".k-grid-pager\").toggle(this.dataSource.total() >= this.dataSource.pageSize());\n                }\n           },\n\n           _adjustRowsHeight: function(table1, table2) {\n               var rows = table1[0].rows,\n                   length = rows.length,\n                   idx,\n                   rows2 = table2[0].rows,\n                   containers = table1.add(table2),\n                   containersLength = containers.length,\n                   heights = [];\n\n               for (idx = 0; idx < length; idx++) {\n                   if (!rows2[idx]) {\n                       break;\n                   }\n\n                   if (rows[idx].style.height) {\n                       rows[idx].style.height = rows2[idx].style.height = \"\";\n                   }\n               }\n\n               for (idx = 0; idx < length; idx++) {\n                   if (!rows2[idx]) {\n                       break;\n                   }\n\n                   var offsetHeight1 = rows[idx].offsetHeight;\n                   var offsetHeight2 = rows2[idx].offsetHeight;\n                   var height = 0;\n\n                   if (offsetHeight1 > offsetHeight2) {\n                       height = offsetHeight1;\n                   } else if (offsetHeight1 < offsetHeight2) {\n                       height = offsetHeight2;\n                   }\n\n                   heights.push(height);\n               }\n\n               for (idx = 0; idx < containersLength; idx++) {\n                   containers[idx].style.display = NONE;\n               }\n\n               for (idx = 0; idx < length; idx++) {\n                   if (heights[idx]) {\n                       //add one to resolve row misalignment in IE\n                       rows[idx].style.height = rows2[idx].style.height = (heights[idx] + 1) + PX;\n                   }\n               }\n\n               for (idx = 0; idx < containersLength; idx++) {\n                   containers[idx].style.display = \"\";\n               }\n           }\n       });\n\n       if (kendo.ExcelMixin) {\n           kendo.ExcelMixin.extend(Grid.prototype);\n       }\n\n       if (kendo.PDFMixin) {\n           kendo.PDFMixin.extend(Grid.prototype);\n\n           Grid.prototype._drawPDF_autoPageBreak = function(progress) {\n               var grid = this;\n               var result = new $.Deferred();\n               var dataSource = grid.dataSource;\n               var allPages = grid.options.pdf.allPages;\n               var origBody = grid.wrapper.find('> table > tbody, .k-grid-content > table > tbody').first();\n               var cont = $(\"<div>\")\n                   .css({ position: \"absolute\", left: -10000, top: -10000 });\n               var clone;\n\n               grid.toggleUnexportableColumns(grid.columns);\n               clone = grid.wrapper.clone().css({\n                   height: AUTO, width: AUTO\n               }).appendTo(cont);\n               clone.find(\".k-grid-content\").css({ height: AUTO, width: AUTO, overflow: \"visible\" });\n               clone.find('> table, .k-grid-content > table, .k-grid-footer table').css({ height: AUTO, width: \"100%\", overflow: \"visible\" });\n               clone.find(\".k-grid-pager, .k-grid-toolbar, .k-grouping-header\").remove();\n               clone.find(\".k-grid-header, .k-grid-footer, .k-auto-scrollable\").css({ paddingRight: 0 });\n\n               this._initPDFProgress(progress);\n\n               var body = clone.find('> table > tbody, .k-grid-content > table > tbody').first().empty();\n               var startingPage = dataSource.page();\n\n               function resolve() {\n                   if (allPages && startingPage !== undefined$1) {\n                       dataSource.one(\"change\", draw);\n                       dataSource.page(startingPage);\n                   } else {\n                       grid.refresh();\n                       draw();\n                   }\n               }\n\n               function draw() {\n                   cont.appendTo(document.body);\n                   var options = $.extend({}, grid.options.pdf, {\n                       _destructive: true,\n                       progress: function(p) {\n                           progress.notify({\n                               page: p.page,\n                               pageNumber: p.pageNum,\n                               progress: 0.5 + p.pageNum / p.totalPages / 2,\n                               totalPages: p.totalPages\n                           });\n                       }\n                   });\n                   kendo.drawing.drawDOM(clone, options)\n                       .always(function() {\n                           cont.remove();\n                       })\n                       .then(function(group) {\n                           result.resolve(group);\n                           grid.toggleUnexportableColumns(grid.columns, true);\n                       })\n                       .fail(function(err) {\n                           result.reject(err);\n                       });\n               }\n\n               function renderPage() {\n                   var pageNum = dataSource.page();\n                   var totalPages = allPages ? dataSource.totalPages() : 1;\n                   body.append(origBody.children(\"tr:not(.k-detail-row)\"));\n                   if (pageNum < totalPages) {\n                       dataSource.page(pageNum + 1);\n                   } else {\n                       dataSource.unbind(\"change\", renderPage);\n                       resolve();\n                   }\n               }\n\n               if (allPages) {\n                   dataSource.bind(\"change\", renderPage);\n                   dataSource.page(1);\n               } else {\n                   renderPage();\n               }\n\n               return result.promise();\n           };\n\n           Grid.prototype.toggleUnexportableColumns = function(columns, restore) {\n               var length = columns.length;\n               var column;\n               var exportable;\n               var visibleInExport;\n               var visibleInExportOnly;\n\n               for (var i = 0; i < length; i++) {\n                   column = columns[i];\n                   exportable = column.exportable;\n                   if (!restore) {\n                       if (typeof column.exportable === \"object\") {\n                           exportable = column.exportable.pdf;\n                       }\n\n                       visibleInExport = !column.hidden && exportable !== false;\n                       visibleInExportOnly = column.hidden && exportable === true;\n                       exportable = visibleInExport || visibleInExportOnly;\n\n                       if (!exportable && !column.hidden) {\n                           column._toggledDuringExport = true;\n                           this.hideColumn(column);\n                       } else if (exportable && column.hidden) {\n                           column._toggledDuringExport = true;\n                           this.showColumn(column);\n                       } else if (exportable && column.columns) {\n                           this.toggleUnexportableColumns(column.columns);\n                       }\n                   } else {\n                       if (column._toggledDuringExport) {\n                           column._toggledDuringExport = false;\n\n                           if (column.hidden) {\n                               this.showColumn(column);\n                           } else {\n                               this.hideColumn(column);\n                           }\n                       } else if (column.columns) {\n                           this.toggleUnexportableColumns(column.columns, restore);\n                       }\n                   }\n               }\n           };\n\n           Grid.prototype._drawPDF = function(progress) {\n               var grid = this;\n\n               if (grid.options.pdf.paperSize && grid.options.pdf.paperSize != AUTO) {\n                   return grid._drawPDF_autoPageBreak(progress);\n               }\n\n               var result = new $.Deferred();\n               var dataSource = grid.dataSource;\n               var allPages = grid.options.pdf.allPages;\n\n               this._initPDFProgress(progress);\n\n               // This group will be our document containing all pages\n               var doc = new kendo.drawing.Group();\n               var startingPage = dataSource.page();\n\n               function resolve() {\n                   if (allPages && startingPage !== undefined$1) {\n                       dataSource.unbind(\"change\", exportPage);\n                       dataSource.one(\"change\", function() {\n                           result.resolve(doc);\n                       });\n\n                       dataSource.page(startingPage);\n                   } else {\n                       result.resolve(doc);\n                   }\n               }\n\n               function exportPage() {\n                    grid.toggleUnexportableColumns(grid.columns);\n                    grid._drawPDFShadow({\n                        width: grid.wrapper.width()\n                    }, {\n                        avoidLinks: grid.options.pdf.avoidLinks\n                    })\n                    .done(function(group) {\n                        var pageNum = dataSource.page();\n                        var totalPages = allPages ? dataSource.totalPages() : 1;\n\n                        var args = {\n                            page: group,\n                            pageNumber: pageNum,\n                            progress: pageNum / totalPages,\n                            totalPages: totalPages\n                        };\n\n                        grid.toggleUnexportableColumns(grid.columns, true);\n                        progress.notify(args);\n                        doc.append(args.page);\n\n                        if (pageNum < totalPages) {\n                            dataSource.page(pageNum + 1);\n                        } else {\n                            resolve();\n                        }\n                    })\n                    .fail(function(err) {\n                        result.reject(err);\n                    });\n                }\n\n                if (allPages) {\n                    dataSource.bind(\"change\", exportPage);\n                    dataSource.page(1);\n                } else {\n                    exportPage();\n                }\n\n                return result.promise();\n            };\n\n            Grid.prototype._initPDFProgress = function(deferred) {\n               var loading = $(\"<div class='k-loading-pdf-mask'><div class='k-loading-color'></div></div>\");\n               loading.prepend(this.wrapper.clone().css({\n                   position: \"absolute\", top: 0, left: 0\n               }));\n\n               this._pdfInitialized = true;\n               this.wrapper.append(loading);\n\n               var pb = $(\"<div class='k-loading-pdf-progress'>\")\n               .appendTo(loading)\n               .kendoProgressBar({\n                   type: \"chunk\",\n                   chunkCount: 10,\n                   min: 0,\n                   max: 1,\n                   value: 0\n               }).data(\"kendoProgressBar\");\n\n               deferred.progress(function(e) {\n                   pb.value(e.progress);\n               })\n               .always(function() {\n                   kendo.destroy(loading);\n                   loading.remove();\n               });\n            };\n       }\n\n       function syncTableHeight(table1, table2) {\n           table1 = table1[0];\n           table2 = table2[0];\n\n           if (table1.rows.length !== table2.rows.length) {\n               var lockedHeigth = table1.offsetHeight;\n               var tableHeigth = table2.offsetHeight;\n\n               var row;\n               var diff;\n               if (lockedHeigth > tableHeigth) {\n                   row = table2.rows[table2.rows.length - 1];\n\n                   if (filterRowRegExp.test(row.className)) {\n                       row = table2.rows[table2.rows.length - 2];\n                   }\n\n                   diff = lockedHeigth - tableHeigth;\n               } else {\n                   row = table1.rows[table1.rows.length - 1];\n\n                   if (filterRowRegExp.test(row.className)) {\n                       row = table1.rows[table1.rows.length - 2];\n                   }\n\n                   diff = tableHeigth - lockedHeigth;\n               }\n               row.style.height = row.offsetHeight + diff + PX;\n           }\n       }\n\n       function adjustRowHeight(row1, row2) {\n           var height;\n           var offsetHeight1 = row1.offsetHeight;\n           var offsetHeight2 = row2.offsetHeight;\n\n           if (offsetHeight1 > offsetHeight2) {\n               height = offsetHeight1 + PX;\n           } else if (offsetHeight1 < offsetHeight2) {\n               height = offsetHeight2 + PX;\n           }\n\n           if (height) {\n               row1.style.height = row2.style.height = height;\n           }\n       }\n\n       function getCommand(commands, name) {\n           var idx, length, command;\n\n           if (typeof commands === STRING && commands === name) {\n              return commands;\n           }\n\n           if (isPlainObject(commands) && commands.name === name) {\n               return commands;\n           }\n\n           if (isArray(commands)) {\n               for (idx = 0, length = commands.length; idx < length; idx++) {\n                   command = commands[idx];\n\n                   if ((typeof command === STRING && command === name) || (command.name === name)) {\n                       return command;\n                   }\n               }\n           }\n           return null;\n       }\n\n       function compareElements(element, toCompare) {\n           if (element.length !== toCompare.length) {\n               return false;\n           }\n\n           for (var i = 0; i < element.length; i++) {\n               if (element[i] !== toCompare[i]) {\n                   return false;\n               }\n           }\n\n           return true;\n       }\n\n       function focusTable(table, direct) {\n           if (!table || table.length === 0) {\n               return;\n           }\n\n           if (direct === true) {\n               table = $(table);\n               var scrollLeft = kendo.scrollLeft(table.parent());\n\n                kendo.focusElement(table);\n                kendo.scrollLeft(table.parent(), scrollLeft);\n            } else {\n                $(table).one(\"focusin\", function(e) { e.preventDefault(); }).trigger(\"focus\");\n            }\n        }\n\n       function isColumnGroupable(grid, column) {\n           return grid.options.groupable && (column.groupable || column.groupable === undefined$1);\n       }\n\n       function isGroupedBy(groups, field) {\n           return !!$.grep(groups, function(item) {\n               return item.field === field;\n           }).length;\n       }\n\n       function isColumnEditable(column, model) {\n           if (!column.field || column.selectable) {\n               return false;\n           }\n           if (model.editable && !model.editable(column.field)) {\n               return false;\n           }\n           if (column.editable && !column.editable(model)) {\n               return false;\n           }\n           return true;\n       }\n\n       function isInputElement(element) {\n           return $(element).is(\":button,a,:input,a>.k-icon,a>.k-svg-icon,textarea,span.k-select,span.k-icon,span.k-svg-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdownlist,.k-switch-thumb,.k-switch-track,.k-switch-label-off,.k-switch-label-on\");\n       }\n\n        function tableClick(e) {\n            var that = this,\n                currentTarget = $(e.currentTarget),\n                isHeader = currentTarget.is(\"th\"),\n                table = this.table.add(this.lockedTable),\n                headerTable = this.thead.parent().add($(\">table\", this.lockedHeader)),\n                isInput = isInputElement(e.target),\n                preventScroll = $(e.target).is('.k-checkbox'),\n                target = $(e.target),\n                currentTable = currentTarget.closest(\"table\")[0];\n\n            if (isInput && currentTarget.find(kendo.roleSelector(\"filtercell\")).length) {\n                this._setCurrent(currentTarget);\n                return;\n            }\n\n            if (currentTable !== table[0] && currentTable !== table[1] && currentTable !== headerTable[0] && currentTable !== headerTable[1]) {\n                return;\n            }\n\n            if (target.is(CARET_ALT_RIGHT + \",\" + CARET_ALT_DOWN)) {\n                return;\n            }\n\n            if (this.options.navigatable) {\n                this._setCurrent(currentTarget, false, preventScroll);\n            }\n\n            if (isHeader || !isInput) {\n                setTimeout(function() {\n                    var activeEl = $(kendo._activeElement());\n                    if ((activeEl.hasClass(\"k-widget\") || activeEl.hasClass(\"k-dropdownlist\")) && !activeEl.hasClass(\"k-grid-pager\")) {\n                        return;\n                    }\n\n                    //Only if input element is not selected yet and it is not descendant of the grid's table\n                    if (that.table && (activeEl.is(CHECKBOXINPUT) || !isInputElement(kendo._activeElement()) || !$.contains(currentTable, kendo._activeElement()))) {\n                        //DOMElement.focus() only for header, because IE doesn't really focus the table\n                        focusTable(that.table[0], true);\n                    }\n                });\n            }\n\n            if (isHeader && !kendo.support.touch) {\n                e.preventDefault(); //if any problem occurs, call preventDefault only for the clicked header links\n            }\n        }\n\n       function leftMostPosition(element, rtl) {\n           if (!rtl) {\n               return 0;\n           }\n\n           var result = 0;\n\n           if (kendo.support.browser.webkit) {\n               result = element.width();\n           }\n\n           return result;\n       }\n\n       function parseVirtualSettings(options) {\n            var asLowerString;\n\n            if (typeof options === \"string\") {\n                asLowerString = options.toLowerCase();\n                if (asLowerString === \"true\") {\n                    return {\n                        rows: true\n                    };\n                } else {\n                    return {\n                        rows: asLowerString.indexOf(\"rows\") > -1,\n                        columns: asLowerString.indexOf(\"columns\") > -1\n                    };\n                }\n\n            } else if (options === true) {\n                return {\n                    rows: true\n                };\n            }\n       }\n\n       function isElementVisibleInWrapper(wrapper, element) {\n           var offsetTop;\n           var halfHeight;\n\n           if (!wrapper) {\n             return false;\n           }\n\n           element = $(element);\n\n           if (element[0] && contains(wrapper[0], element[0])) {\n               offsetTop = element.offset().top - wrapper.offset().top;\n               halfHeight = element.outerHeight() / 2;\n\n               if ((offsetTop >= 0 || math.abs(offsetTop) <= halfHeight) && (math.floor(offsetTop + halfHeight) <= wrapper.height())) {\n                   return true;\n               }\n           }\n\n           return false;\n       }\n\n       function isInEdit(cell) {\n           return cell &&\n               (cell.hasClass(\"k-edit-cell\") ||\n                cell.parent().hasClass(\"k-grid-edit-row\"));\n       }\n\n        function groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, templateColspan, groupData, level, text, expanded, group, isGroupPaged) {\n            var html;\n\n            if (groupHeaderColumnTemplate) {\n                html = groupHeaderColumnTemplate(extend({}, groupData, {\n                    groupCells: level,\n                    colspan: templateColspan,\n                    text: text,\n                    expanded: expanded,\n                    isRtl: isRtl,\n                    uid: group.uid\n                }));\n            } else {\n                html = groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged);\n            }\n\n            return html;\n        }\n\n       function groupCellBuilder(headerTemplateIndex) {\n        return function (ref) {\n           var colspan = ref.colspan;\n           var text = ref.text;\n           var expanded = ref.expanded;\n           var isRtl = ref.isRtl;\n\n           return \"<td class=\\\"k-table-td\\\" colspan=\\\"\" + (colspan + headerTemplateIndex) + \"\\\">\" +\n        '<p class=\"k-reset\">' +\n            kendo.ui.icon($((\"<a href=\\\"\\\\#\\\" tabindex=\\\"-1\\\" \" + ARIA_LABEL + \"=\\\"\" + ((expanded ? COLLAPSE : EXPAND)) + \"\\\"></a>\")), { icon: (expanded ? 'caret-alt-down' : (\"caret-alt-\" + (isRtl ? 'left' : 'right'))) }) + text +\n        \"</p></td>\" + (new Array(colspan + headerTemplateIndex).join(\"<td hidden group-header-spanned-hidden></td>\"));\n        };\n       }\n\n       function groupCellLockedContentBuilder(headerTemplateIndex) {\n        return '<td class=\"k-table-td\" colspan=\"' + headerTemplateIndex + '\">' +\n        \"<p class=\\\"k-reset\\\">&nbsp;</p></td>\" + (new Array(headerTemplateIndex).join(\"<td hidden group-header-spanned-hidden></td>\"));\n       }\n\n       function groupRowBuilder(colspan, level, text, expanded, uid, includeAdditionalData, isRtl) {\n        return '<tr ' + (includeAdditionalData ? 'data-group-uid=\"' + uid + '\"' : '') + 'class=\"k-table-group-row k-grouping-row k-table-row\">' + groupCells(level) +\n            '<td class=\"k-table-td\" colspan=\"' + colspan + '\" aria-expanded=\"' + !!expanded + '\">' +\n            '<p class=\"k-reset\">' +\n            kendo.ui.icon($('<a href=\"#\" tabindex=\"-1\" ' + ARIA_LABEL + '=\"' + (expanded ? COLLAPSE : EXPAND) + '\"></a>'), { icon: (expanded ? 'caret-alt-down' : (\"caret-alt-\" + (isRtl ? 'left' : 'right'))) }) + text +\n        \"</p></td>\" + (new Array(colspan).join(\"<td hidden group-header-spanned-hidden></td>\")) + \"</tr>\";\n       }\n\n       function groupRowLockedContentBuilder(colspan) {\n        return '<tr class=\"k-table-group-row k-grouping-row k-table-row\">' +\n            '<td class=\"k-table-td\" colspan=\"' + colspan + '\" aria-expanded=\"true\">' +\n            \"<p class=\\\"k-reset\\\">&nbsp;</p></td>\" + (new Array(colspan).join(\"<td hidden group-header-spanned-hidden></td>\")) + \"</tr>\";\n       }\n\n       function toggleRow(row, visible) {\n           row = $(row)[0];\n           if (visible) {\n               row.style.display = \"\";\n           } else {\n               row.style.display = NONE;\n           }\n       }\n\n       function htmlEncode(value, backslashEscapeQuotes) {\n           var ampRegExp = /&/g,\n               ltRegExp = /</g,\n               quoteRegExp = /\"/g,\n               aposRegExp = /'/g,\n               gtRegExp = />/g;\n\n           return (\"\" + value)\n               .replace(ampRegExp, \"&amp;\")\n               .replace(ltRegExp, \"&lt;\")\n               .replace(gtRegExp, \"&gt;\")\n               .replace(quoteRegExp, function(match) {\n                   if (backslashEscapeQuotes) {\n                       return \"\\\\\" + match;\n                   }\n                   return \"&quot;\";\n               })\n               .replace(aposRegExp, \"&#39;\");\n       }\n\n       function isEmptyString(value) {\n            return !/\\S/.test(value);\n       }\n\n       function getTitle(field, columns) {\n            return columns.filter(function(col) {\n                return col.field === field;\n            })[0].title || field;\n        }\n\n        function exportDataSort(a, b) {\n            return this.dataSource.indexOf(this.dataSource.getByUid(a.uid)) - this.dataSource.indexOf(this.dataSource.getByUid(b.uid));\n        }\n\n        function isExcelExportableColumn(column) {\n            return !(column.exportable === false || (column.exportable && column.exportable.excel === false));\n        }\n\n       ui.plugin(Grid);\n       ui.plugin(VirtualScrollable);\n\n       extend(kendo.ui.grid, {\n           defaultBodyContextMenu: defaultBodyContextMenu,\n           defaultHeadContextMenu: defaultHeadContextMenu,\n           defaultGroupsContextMenu: defaultGroupsContextMenu\n       });\n\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}